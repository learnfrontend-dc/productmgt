{"version":3,"sources":["packages/language-service/bundles/language-service.umd.js"],"names":["$deferred","$resolved","$provided","$reflect","defineMetadata","getOwnMetadata","$getModule","name","require","define","modules","cb","global","module","exports","provided","result","Object","assign","reflect-metadata","apply","this","map","fs","path","ts","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","t","s","i","n","arguments","length","call","__values","o","m","Symbol","iterator","next","value","done","__read","r","e","ar","push","error","__spread","concat","ViewEncapsulation","ChangeDetectionStrategy","createInject","makeMetadataFactory","token","createInjectionToken","desc","_desc","ngInjectableDef","undefined","createAttribute","attributeName","createContentChildren","selector","data","first","isViewQuery","descendants","createContentChild","createViewChildren","createViewChild","createDirective","dir","SecurityContext","MissingTranslationStrategy","createComponent","c","changeDetection","Default","createPipe","pure","createInput","bindingPropertyName","createOutput","createHostBinding","hostPropertyName","createHostListener","eventName","args","createNgModule","ngModule","createInjectable","injectable","createOptional","createSelf","createSkipSelf","createHost","Type","Function","props","factory","_i","values","ngMetadataName","isTypeOf","obj","DASH_CASE_REGEXP","splitAtColon","input","defaultValues","_splitAt","character","characterIndex","indexOf","slice","trim","visitValue","visitor","context","isArray","visitArray","isStrictStringMap","getPrototypeOf","STRING_MAP_PROTO","visitStringMap","visitPrimitive","visitOther","isDefined","val","noUndefined","ValueTransformer","arr","_this","keys","forEach","key","SyncAsync","isPromise","then","msg","Error","syntaxError","parseErrors","ERROR_SYNTAX_ERROR","ERROR_PARSE_ERRORS","escapeRegExp","replace","utf8Encode","str","encoded","index","codePoint","charCodeAt","low","String","fromCharCode","stringify","join","overriddenName","res","toString","newLineIndex","substring","resolveForwardRef","type","Version","full","splits","split","major","minor","patch","ProviderAstType","TextAst","ngContentIndex","sourceSpan","visit","visitText","BoundTextAst","visitBoundText","AttrAst","visitAttr","BoundElementPropertyAst","securityContext","unit","isAnimation","PropertyBindingType","Animation","visitElementProperty","BoundEventAst","target","phase","handler","fullName","calcFullName","visitEvent","ReferenceAst","originalValue","visitReference","VariableAst","visitVariable","ElementAst","attrs","inputs","outputs","references","directives","providers","hasViewContainer","queryMatches","children","endSourceSpan","visitElement","EmbeddedTemplateAst","variables","visitEmbeddedTemplate","BoundDirectivePropertyAst","directiveName","templateName","visitDirectiveProperty","DirectiveAst","directive","hostProperties","hostEvents","contentQueryStartId","visitDirective","ProviderAst","multiProvider","eager","providerType","lifecycleHooks","isModule","NgContentAst","visitNgContent","NullTemplateVisitor","ast","RecursiveTemplateAstVisitor","_super","visitChildren","results","templateVisitAll","asts","astResult","CompilerConfig","_a","_b","_c","defaultEncapsulation","_d","useJit","_e","jitDevMode","_f","missingTranslation","preserveWhitespaces","strictInjectionParameters","Emulated","preserveWhitespacesDefault","preserveWhitespacesOption","defaultSetting","StaticSymbol","filePath","members","assertNoMembers","JSON","StaticSymbolCache","cache","Map","get","declarationFile","set","HOST_REG_EXP","sanitizeIdentifier","CompileSummaryKind","_anonymousTypeIndex","identifierName","compileIdentifier","reference","ref","identifier","tokenName","tokenReference","CompileStylesheetMetadata","styles","styleUrls","moduleUrl","_normalizeArray","CompileTemplateMetadata","template","templateUrl","htmlAst","externalStylesheets","animations","ngContentSelectors","interpolation","isInline","encapsulation","flatten","list","reduce","flat","item","flatItem","toSummary","CompileDirectiveMetadata","isComponent","exportAs","hostListeners","hostAttributes","viewProviders","queries","guards","viewQueries","entryComponents","componentViewType","rendererType","componentFactory","isHost","host","matches","match","inputsMap","bindConfig","parts","outputsMap","summaryKind","Directive","CompilePipeMetadata","Pipe","CompileNgModuleMetadata","declaredDirectives","exportedDirectives","declaredPipes","exportedPipes","bootstrapComponents","importedModules","exportedModules","schemas","transitiveModule","id","NgModule","TransitiveCompileNgModuleMetadata","directivesSet","Set","exportedDirectivesSet","pipesSet","pipes","exportedPipesSet","modulesSet","entryComponentsSet","addProvider","provider","addDirective","has","add","addExportedDirective","addPipe","addExportedPipe","addModule","addEntryComponent","ec","componentType","ProviderMeta","useClass","useValue","useExisting","useFactory","deps","multi","dependencies","AstPath","path$$1","position","defineProperty","enumerable","configurable","parentOf","node","childOf","ctor","pop","Text","Expansion","switchValue","cases","switchValueSourceSpan","visitExpansion","ExpansionCase","expression","valueSourceSpan","expSourceSpan","visitExpansionCase","Attribute","valueSpan","visitAttribute","Element","startSourceSpan","Comment","visitComment","visitAll","nodes","RecursiveVisitor","findNode","class_1","span","spanOf","start","offset","end","assertArrayOfStrings","INTERPOLATION_BLACKLIST_REGEXPS","assertInterpolationSymbols","start_1","end_1","regexp","test","InterpolationConfig","fromArray","markers","DEFAULT_INTERPOLATION_CONFIG","StyleWithImports","style","isStyleUrlResolvable","url","schemeMatch","URL_WITH_SCHEMA_REGEXP","TagContentType","CSS_IMPORT_REGEXP","CSS_STRIPPABLE_COMMENT_REGEXP","splitNsName","elementName","colonIndex","isNgContainer","tagName","isNgContent","getNsPrefix","mergeNsAndName","prefix","localName","NAMED_ENTITIES","Aacute","aacute","Acirc","acirc","acute","AElig","aelig","Agrave","agrave","alefsym","Alpha","alpha","amp","and","ang","apos","Aring","aring","asymp","Atilde","atilde","Auml","auml","bdquo","Beta","beta","brvbar","bull","cap","Ccedil","ccedil","cedil","cent","Chi","chi","circ","clubs","cong","copy","crarr","cup","curren","dagger","Dagger","darr","dArr","deg","Delta","delta","diams","divide","Eacute","eacute","Ecirc","ecirc","Egrave","egrave","empty","emsp","ensp","Epsilon","epsilon","equiv","Eta","eta","ETH","eth","Euml","euml","euro","exist","fnof","forall","frac12","frac14","frac34","frasl","Gamma","gamma","ge","gt","harr","hArr","hearts","hellip","Iacute","iacute","Icirc","icirc","iexcl","Igrave","igrave","image","infin","int","Iota","iota","iquest","isin","Iuml","iuml","Kappa","kappa","Lambda","lambda","lang","laquo","larr","lArr","lceil","ldquo","le","lfloor","lowast","loz","lrm","lsaquo","lsquo","lt","macr","mdash","micro","middot","minus","Mu","mu","nabla","nbsp","ndash","ne","ni","not","notin","nsub","Ntilde","ntilde","Nu","nu","Oacute","oacute","Ocirc","ocirc","OElig","oelig","Ograve","ograve","oline","Omega","omega","Omicron","omicron","oplus","or","ordf","ordm","Oslash","oslash","Otilde","otilde","otimes","Ouml","ouml","para","permil","perp","Phi","phi","Pi","pi","piv","plusmn","pound","prime","Prime","prod","prop","Psi","psi","quot","radic","rang","raquo","rarr","rArr","rceil","rdquo","real","reg","rfloor","Rho","rho","rlm","rsaquo","rsquo","sbquo","Scaron","scaron","sdot","sect","shy","Sigma","sigma","sigmaf","sim","spades","sub","sube","sum","sup","sup1","sup2","sup3","supe","szlig","Tau","tau","there4","Theta","theta","thetasym","thinsp","THORN","thorn","tilde","times","trade","Uacute","uacute","uarr","uArr","Ucirc","ucirc","Ugrave","ugrave","uml","upsih","Upsilon","upsilon","Uuml","uuml","weierp","Xi","xi","Yacute","yacute","yen","yuml","Yuml","Zeta","zeta","zwj","zwnj","NGSP_UNICODE","PreparsedElementType","NG_CONTENT_SELECT_ATTR","LINK_ELEMENT","LINK_STYLE_REL_ATTR","LINK_STYLE_HREF_ATTR","LINK_STYLE_REL_VALUE","STYLE_ELEMENT","SCRIPT_ELEMENT","NG_NON_BINDABLE_ATTR","NG_PROJECT_AS","preparseElement","selectAttr","hrefAttr","relAttr","nonBindable","projectAs","attr","lcAttrName","toLowerCase","normalizeNgContentSelect","nodeName","OTHER","NG_CONTENT","STYLE","SCRIPT","STYLESHEET","PreparsedElement","DirectiveNormalizer","_resourceLoader","_urlResolver","_htmlParser","_config","_resourceLoaderCache","clearCache","clear","clearCacheFor","normalizedDirective","delete","stylesheet","_fetch","normalizeTemplate","prenormData","_preParseTemplate","preparsedTemplate","_normalizeTemplateMetadata","prenomData","resolve","_preparseLoadedTemplate","templateAbsUrl","interpolationConfig","rootNodesAndErrors","parse","templateSourceUrl","ngModuleType","compMeta","templateMeta","jitSourceUrl","errors","templateMetadataStyles","_normalizeStylesheet","TemplatePreparseVisitor","rootNodes","templateStyles","inlineStyleUrls","_loadMissingExternalStylesheets","_normalizeLoadedTemplateMetadata","stylesheets","_inlineStyles","styleUrl","None","targetStyles","loadedStylesheets","syncAsyncValues","filter","loadedStyle","some","Promise","all","_","allStyleUrls","allStyles","styleWithImports","extractStyleUrls","resolver","baseUrl","cssText","foundUrls","modifiedCssText","ngNonBindableStackCount","preparsedElement","textContent_1","child","QUERY_METADATA_IDENTIFIERS","DirectiveResolver","_reflector","isDirective","typeMetadata","annotations","isDirectiveMetadata","throwIfNotFound","metadata","findLast","propertyMetadata","propMetadata","_mergeWithPropertyMetadata","dm","directiveType","propName","a","output","hostBinding","startWith","hostListener","query","_merge","_extractPublicName","def","_dedupeBindings","bindings","names","publicNames","reversedResult","binding","name_1","reverse","mergedInputs","mergedOutputs","mergedHost","mergedQueries","moduleId","condition","TokenType","$EOF","$TAB","$LF","$VTAB","$FF","$CR","$SPACE","$DQ","$$","$SQ","$PLUS","$MINUS","$SLASH","$SEMICOLON","$EQ","$GT","$0","$9","$A","$F","$Z","$_","$a","$f","$n","$r","$t","$v","$z","$LBRACE","$NBSP","isWhitespace","code","isDigit","isAsciiLetter","Token","KEYWORDS","Lexer","tokenize","text","scanner","_Scanner","tokens","scanToken","newCharacterToken","Character","newOperatorToken","Operator","EOF","numValue","strValue","isCharacter","isNumber","Number","isString","isOperator","operater","isIdentifier","Identifier","isKeyword","Keyword","isKeywordLet","isKeywordAs","isKeywordNull","isKeywordUndefined","isKeywordTrue","isKeywordFalse","isKeywordThis","isError","toNumber","peek","advance","isIdentifierStart","scanIdentifier","scanNumber","scanCharacter","scanString","scanOperator","scanComplexOperator","one","twoCode","two","threeCode","three","isIdentifierPart","newKeywordToken","newIdentifierToken","simple","isExponentSign","newNumberToken","parseIntAutoRadix","parseInt","isNaN","parseFloat","quote","buffer","marker","unescapedCode","hex","unescape","last","newStringToken","message","newErrorToken","ParserError","errLocation","ctxLocation","ParseSpan","AST","Quote","uninterpretedExpression","location","visitQuote","EmptyExpr","ImplicitReceiver","visitImplicitReceiver","Chain","expressions","visitChain","Conditional","trueExp","falseExp","visitConditional","PropertyRead","receiver","visitPropertyRead","PropertyWrite","visitPropertyWrite","SafePropertyRead","visitSafePropertyRead","KeyedRead","visitKeyedRead","KeyedWrite","visitKeyedWrite","BindingPipe","exp","visitPipe","LiteralPrimitive","visitLiteralPrimitive","LiteralArray","visitLiteralArray","LiteralMap","visitLiteralMap","Interpolation","strings","visitInterpolation","Binary","operation","left","right","visitBinary","PrefixNot","visitPrefixNot","NonNullAssert","visitNonNullAssert","MethodCall","visitMethodCall","SafeMethodCall","visitSafeMethodCall","FunctionCall","visitFunctionCall","ASTWithSource","source","TemplateBinding","keyIsVar","NullAstVisitor","RecursiveAstVisitor","AstTransformer","AstMemoryEfficientTransformer","modified","original","visitAstChildren","SplitInterpolation","offsets","TemplateBindingParseResult","templateBindings","warnings","_createInterpolateRegExp","config","pattern","RegExp","ParseErrorLevel","Parser","_lexer","parseAction","_checkNoInterpolation","sourceToLex","_stripComments","_ParseAST","parseChain","parseBinding","_parseBindingAst","parseSimpleBinding","SimpleExpressionChecker","check","_reportError","_parseQuote","prefixSeparatorIndex","parseTemplateBindings","prefixToken","prefixTokens","unshift","parseInterpolation","splitInterpolation","expressionText","part","_findInterpolationErrorColumn","wrapLiteralPrimitive","_commentStart","outerQuote","char","nextChar","partInErrIdx","j","inputLength","rparensExpected","rbracketsExpected","rbracesExpected","inputIndex","optionalCharacter","peekKeywordLet","peekKeywordAs","expectCharacter","optionalOperator","op","expectOperator","operator","expectIdentifierOrKeyword","expectIdentifierOrKeywordOrString","exprs","expr","parsePipe","parseExpression","parseConditional","parseLogicalOr","yes","no","parseLogicalAnd","parseEquality","parseRelational","parseAdditive","parseMultiplicative","parsePrefix","parseCallChain","parsePrimary","parseAccessMemberOrMethodCall","parseCallArguments","elements","parseExpressionList","parseLiteralMap","literalValue","terminator","quoted","isSafe","positionals","expectTemplateBindingKey","operatorFound","rawKey","toUpperCase","name_2","letStart","letName","locationText","skip","ParseLocation","file","line","col","moveBy","content","len","ch","priorLine","substr","lastIndexOf","getContext","maxChars","maxLines","startOffset","endOffset","ctxChars","ctxLines","before","after","ParseSourceFile","ParseSourceSpan","details","TokenType$1","ParseError","level","ERROR","contextualMessage","ctx","Token$1","TokenError","errorMsg","tokenType","TokenizeResult","_CR_OR_CRLF_REGEXP","_unexpectedCharacterErrorMsg","charCode","_unknownEntityErrorMsg","entitySrc","_ControlFlowError","_Tokenizer","_file","_getTagDefinition","_tokenizeIcu","_interpolationConfig","_peek","_nextPeek","_index","_line","_column","_expansionCaseStack","_inInterpolation","_input","_length","_advance","_processCarriageReturns","_getLocation","_attemptCharCode","_consumeCdata","_consumeComment","_consumeDocType","_consumeTagClose","_consumeTagOpen","_tokenizeExpansionForm","_consumeText","_beginToken","_endToken","mergeTextTokens","srcTokens","dstTokens","lastDstToken","TEXT","isExpansionFormStart","_consumeExpansionFormStart","isExpansionCaseStart","_isInExpansionForm","_consumeExpansionCaseStart","_isInExpansionCase","_consumeExpansionCaseEnd","_consumeExpansionFormEnd","_getSpan","_currentTokenStart","_currentTokenType","_createError","_attemptCharCodeCaseInsensitive","compareCharCodeCaseInsensitive","code1","code2","toUpperCaseCharCode","_requireCharCode","_attemptStr","chars","initialPosition","_savePosition","_restorePosition","_attemptStrCaseInsensitive","_requireStr","_attemptCharCodeUntilFn","predicate","_requireCharCodeUntilFn","_attemptUntilChar","_readChar","decodeEntities","_decodeEntity","startPosition","isNamedEntityEnd","isHex","numberStart","isDigitEntityEnd","strNum","entity","_consumeRawText","firstCharOfEnd","attemptEndRest","tagCloseStart","textStart","ESCAPABLE_RAW_TEXT","RAW_TEXT","COMMENT_START","textToken","COMMENT_END","CDATA_START","CDATA_END","DOC_TYPE","_consumePrefixAndName","nameStart","nameOrPrefixStart","isNameEnd","lowercaseTagName","savedPos","_consumeTagOpenStart","isNotWhitespace","_consumeAttributeName","_consumeAttributeValue","_consumeTagOpenEnd","contentTokenType","contentType","_consumeRawTextWithTagClose","TAG_CLOSE","TAG_OPEN_START","ATTR_NAME","prefixAndName","ATTR_VALUE","quoteChar","valueStart","TAG_OPEN_END_VOID","TAG_OPEN_END","EXPANSION_FORM_START","_readUntil","EXPANSION_CASE_VALUE","EXPANSION_CASE_EXP_START","EXPANSION_CASE_EXP_END","EXPANSION_FORM_END","_isTextEnd","nbTokens","isAsciiHexDigit","isInterpolationStart","TreeError","ParseTreeResult","Parser$1","getTagDefinition","parseExpansionForms","tokensAndErrors","tokenizeExpansionForms","treeAndErrors","_TreeBuilder","build","_rootNodes","_errors","_elementStack","_consumeStartTag","_consumeEndTag","_closeVoidElement","_consumeExpansion","prev","_advanceIf","startToken","_addToParent","expCase","_parseExpansionCase","_collectExpansionExpTokens","parsedExp","expansionFormStack","lastOnStack","parent_1","_getParentElement","ignoreFirstLf","el","isVoid","startTagToken","_consumeAttr","_getElementFullName","selfClosing","tagDef","canSelfClose","_pushElement","_popElement","parentEl","isClosedByChild","_getParentElementSkippingContainers","parent","container","requireExtraParent","newParent","parentToAdd","_insertBeforeContainer","endTagToken","stackIndex","splice","closedByParent","attrName","valueToken","parentElement","implicitNamespacePrefix","stack","element","digest","sha1","utf8","words32","stringToWords32","endian","wordAt","Endian","Big","w","h0","h1","h2","h3","h4","rol32","fk","f","k","temp","add32","byteStringToHexString","byteAt","words32ToByteString","serializeNodes","serializerVisitor","meaning","decimalDigest","_SerializerIgnoreIcuExpVisitor","computeMsgId","fingerprint","hi","lo","him","lom","add64","ah","al","bh","add32to64","carry","l","rol64","count","byteStringToDecString","decimal","toThePower","addBigInt","numberTimesBigInt","_SerializerVisitor","visitContainer","visitIcu","icu","strCases","visitTagPlaceholder","ph","startName","closeName","visitPlaceholder","visitIcuPlaceholder","hash32","mix","Little","sub32","high","word","word32ToByteString","x","y","Math","max","tmpSum","num","product","bToThePower","Message","placeholders","placeholderToMessage","description","sources","startLine","startCol","endLine","endCol","Text$1","Container","Icu","TagPlaceholder","tag","Placeholder","IcuPlaceholder","CloneVisitor","expressionPlaceholder","RecurseVisitor","HtmlTagDefinition","closedByChildren","requiredParents","PARSABLE_DATA","currentParent","lcParent","TAG_DEFINITIONS","base","meta","area","embed","link","img","param","hr","br","track","wbr","thead","tbody","tfoot","tr","td","th","svg","math","li","dt","dd","rb","rt","rtc","rp","optgroup","option","pre","listing","script","title","textarea","_DEFAULT_TAG_DEFINITION","getHtmlTagDefinition","_VisitorMode","TAG_TO_PLACEHOLDER_NAMES","A","B","BR","EM","H1","H2","H3","H4","H5","H6","HR","I","LI","LINK","OL","P","Q","S","SMALL","SUB","SUP","TBODY","TD","TFOOT","TH","THEAD","TR","TT","U","UL","PlaceholderRegistry","_placeHolderNameCounts","_signatureToName","getStartTagPlaceholderName","signature","_hashTag","upperTag","baseName","_generateUniqueName","getCloseTagPlaceholderName","_hashClosingTag","getPlaceholderName","upperName","uniqueName","getUniquePlaceholder","sort","_expParser","_I18nVisitor","_expressionParser","toI18nMessage","_isIcu","_icuDepth","_placeholderRegistry","_placeholderToContent","_placeholderToMessage","i18nodes","startPhName","closePhName","attribute","_visitTextWithInterpolation","comment","i18nIcuCases","i18nIcu","caze","expPh","phName","icuCase","sDelimiter","eDelimiter","_CUSTOM_PH_EXP","lastStringIdx","I18nError","_I18N_COMMENT_PREFIX_REGEXP","MEANING_SEPARATOR","ID_SEPARATOR","i18nCommentsWarned","ExtractionResult","messages","_Visitor","_implicitTags","_implicitAttrs","extract","_init","Extract","_inI18nBlock","_messages","merge","translations","Merge","_translations","translatedNode","_mode","_mayBeAddBlockChildren","wasInIcu","_inIcu","_isInTranslatableSection","_addMessage","isOpening","_isOpeningComment","startsWith","isClosing","_isClosingComment","_inI18nNode","_depth","_blockStartDepth","_closeTranslatableSection","_blockChildren","_blockMeaningAndDesc","_translateMessage","console","warn","_openTranslatableSection","wasInI18nNode","wasInImplicitNode","_inImplicitNode","childNodes","translatedChildNodes","i18nAttr","_getI18nAttr","find","i18nMeta","isImplicit","isTopLevelImplicit","isTranslatable","visited","_visitAttributesOf","translatedAttrs","_translateAttributes","mode","_msgCountAtSectionStart","_createI18nMessage","createI18nMessageFactory","explicitAttrNameToValue","implicitAttrNames","msgMeta","_parseMessageMeta","attributes","i18nParsedMessageMeta","translatedAttributes","directChildren","startIndex","i18n","idIndex","descIndex","meaningAndDesc","_TAG_DEFINITION","XmlTagDefinition","getXmlTagDefinition","XmlParser","Serializer","createNameMapper","SimplePlaceholderMapper","mapName","internalToPublic","publicToNextId","publicToInternal","toPublicName","internalName","toInternalName","publicName","visitPlaceholderName","nextId","_visitor","visitTag","strAttrs","_serializeAttributes","strChildren","visitDeclaration","decl","visitDoctype","doctype","rootTag","dtd","serialize","Declaration","unescapedAttrs","escapeXml","Doctype","Tag","Text$2","unescapedValue","CR","ws","_ESCAPED_CHARS","entry","Xliff","write","locale","_WriteVisitor","transUnits","contextTags","contextGroupTag","purpose","context-type","transUnit","datatype","priority","from","body","source-language","xliff","version","xmlns","encoding","load","XliffParser","msgIdToHtml","i18nNodesByMsgId","converter","XmlToI18n","msgId","convert","i18nNodes","ctype","getCtypeForTag","equiv-text","startTagPh","closeTagPh","equivText","_locale","_unitMlString","_msgIdToHtml","xml","idAttr","_addError","innerText","localeAttr","expansion","expansionCase","xmlIcu","nameAttr","caseMap","Xliff2","_WriteVisitor$1","units","notes","category","segment","srcLang","Xliff2Parser","XmlToI18n$1","getTypeForTag","_nextPlaceholderId","disp","tagPc","equivStart","equivEnd","dispStart","dispEnd","idStr","versionAttr","version$$1","startAttr","endAttr","endId","Xmb","exampleVisitor","ExampleVisitor","_Visitor$2","rootNode","sourceTags","addDefaultExamples","digest$1","startEx","closeEx","exTag","exText","TypeModifier","Xtb","XtbParser","XmlToI18n$2","createLazyProperty","valueFn","xtb","_bundleDepth","langAttr","HtmlParser","TranslationBundle","_i18nNodesByMsgId","mapperFactory","missingTranslationStrategy","Warning","_i18nToHtml","I18nToHtmlVisitor","serializer","srcMsg","html","_digest","_mapperFactory","_missingTranslationStrategy","_console","_contextStack","_convertToText","_srcMsg","_mapper","mapper","I18NHtmlParser","translationsFormat","createSerializer","format","_translationBundle","parseResult","mergeTranslations","implicitTags","implicitAttrs","CORE","Identifiers","ANALYZE_FOR_ENTRY_COMPONENTS","moduleName","ElementRef","NgModuleRef","ViewContainerRef","ChangeDetectorRef","QueryList","TemplateRef","CodegenComponentFactoryResolver","ComponentFactoryResolver","ComponentFactory","ComponentRef","NgModuleFactory","createModuleFactory","moduleDef","moduleProviderDef","RegisterModuleFactoryFn","inject","INJECTOR","Injector","defineInjectable","LOCALE_ID","TRANSLATIONS_FORMAT","inlineInterpolate","interpolate","EMPTY_ARRAY","EMPTY_MAP","Renderer","viewDef","elementDef","anchorDef","textDef","directiveDef","providerDef","queryDef","pureArrayDef","pureObjectDef","purePipeDef","pipeDef","nodeValue","ngContentDef","unwrapValue","createRendererType2","RendererType2","ViewDefinition","createComponentFactory","createTokenForReference","createTokenForExternalReference","reflector","resolveExternalReference","BuiltinTypeName","Type$1","modifiers","hasModifier","modifier","BinaryOperator","BuiltinType","visitType","visitBuiltinType","MapType","ExpressionType","visitExpressionType","ArrayType","of","visitArrayType","valueType","visitMapType","INFERRED_TYPE","Dynamic","Inferred","BOOL_TYPE","Bool","nullSafeIsEquivalent","other","isEquivalent","areAllEquivalent","Int","BuiltinVar","Expression","ReadPropExpr","ReadKeyExpr","callMethod","params","InvokeMethodExpr","callFn","InvokeFunctionExpr","instantiate","InstantiateExpr","conditional","trueCase","falseCase","ConditionalExpr","equals","rhs","BinaryOperatorExpr","Equals","notEquals","NotEquals","identical","Identical","notIdentical","NotIdentical","Minus","plus","Plus","Divide","multiply","Multiply","modulo","Modulo","And","bitwiseAnd","parens","BitwiseAnd","Or","lower","Lower","lowerEquals","LowerEquals","bigger","Bigger","biggerEquals","BiggerEquals","isBlank","TYPED_NULL_EXPR","cast","CastExpr","toStmt","ExpressionStatement","BuiltinMethod","ReadVarExpr","builtin","isConstant","visitExpression","visitReadVarExpr","WriteVarExpr","visitWriteVarExpr","toDeclStmt","DeclareVarStmt","WriteKeyExpr","visitWriteKeyExpr","WritePropExpr","visitWritePropExpr","StmtModifier","method","visitInvokeMethodExpr","fn","visitInvokeFunctionExpr","classExpr","visitInstantiateExpr","LiteralExpr","visitLiteralExpr","ExternalExpr","typeParams","runtime","visitExternalExpr","visitConditionalExpr","NotExpr","visitNotExpr","AssertNotNull","visitAssertNotNullExpr","visitCastExpr","FunctionExpr","statements","visitFunctionExpr","DeclareFunctionStmt","lhs","visitBinaryOperatorExpr","visitReadPropExpr","visitReadKeyExpr","LiteralArrayExpr","entries","every","visitLiteralArrayExpr","LiteralMapEntry","LiteralMapExpr","visitLiteralMapExpr","CommaExpr","visitCommaExpr","This","Super","CatchError","CatchStack","Statement","stmt","visitStatement","visitDeclareVarStmt","visitDeclareFunctionStmt","visitExpressionStmt","ReturnStatement","visitReturnStmt","AbstractClassPart","ClassMethod","ClassField","initializer","ClassGetter","ClassStmt","fields","getters","constructorMethod","methods","visitDeclareClassStmt","IfStmt","visitIfStmt","TryCatchStmt","CommentStmt","multiline","visitCommentStmt","JSDocCommentStmt","tags","visitJSDocCommentStmt","serializeTags","e_1","out","tags_1","tags_1_1","tagToString","e_1_1","return","bodyStmts","catchStmts","visitTryCatchStmt","ThrowStmt","visitThrowStmt","AstTransformer$1","transformExpr","transformStmt","visitAllExpressions","visitAllStatements","mapType","getter","ctorMethod","stmts","RecursiveAstVisitor$1","variable","importExpr","literalArr","_ReadVarVisitor","varNames","_FindExternalReferencesVisitor","externalReferences","_ApplySourceSpanTransformer","_clone","clone","STRIP_SRC_FILE_SUFFIXES","GENERATED_FILE","JIT_SUMMARY_FILE","JIT_SUMMARY_NAME","ngfactoryFilePath","forceSourceFile","urlWithSuffix","splitTypescriptSuffix","normalizeGenFileSuffix","srcFileSuffix","stripGeneratedFileSuffix","endsWith","lastDot","LifecycleHooks","LOWERED_SYMBOL","LIFECYCLE_HOOKS_VALUES","OnInit","OnDestroy","DoCheck","OnChanges","AfterContentInit","AfterContentChecked","AfterViewInit","AfterViewChecked","_SELECTOR_REGEXP","CssSelector","classNames","notSelectors","_addResult","cssSel","cssSelector","current","inNot","lastIndex","exec","setElement","addClassName","addAttribute","isElementSelector","hasElementSelector","getMatchingElementTemplate","classAttr","getAttrs","klass","notSelector","SelectorMatcher","_elementMap","_elementPartialMap","_classMap","_classPartialMap","_attrValueMap","_attrValuePartialMap","_listContexts","createNotMatcher","notMatcher","addSelectables","cssSelectors","callbackCtxt","listContext","SelectorListContext","_addSelectable","matcher","selectable","SelectorContext","_addTerminal","_addPartial","className","terminalMap","terminalValuesMap","partialMap","partialValuesMap","terminalList","matchedCallback","alreadyMatched","_matchTerminal","_matchPartial","name_3","selectables","starSelectables","finalize","nestedSelector","selectors","cbContext","callback","CompileMetadataResolver","_ngModuleResolver","_directiveResolver","_pipeResolver","_summaryResolver","_schemaRegistry","_directiveNormalizer","_staticSymbolCache","_errorCollector","_nonNormalizedDirectiveCache","_directiveCache","_summaryCache","_pipeCache","_ngModuleCache","_ngModuleOfTypes","_shallowModuleCache","getReflector","dirMeta","_createProxyClass","baseType","delegate","proxyClass","setDelegate","getGeneratedClass","dirType","getComponentViewClass","viewClassName","compType","embeddedTemplateIndex","getHostComponentViewClass","hostViewClassName","getHostComponentType","HostClass","getRendererType","rendererTypeName","getComponentFactory","componentFactoryName","hostView","initComponentFactory","_loadSummary","kind","typeSummary","summary","resolveSummary","getHostComponentMetadata","hostViewType","hostType","diDeps","loadDirectiveMetadata","isSync","getNonNormalizedDirectiveMetadata","createDirectiveMetadata","templateMetadata","normalizedDirMeta","componentModuleUrl","annotation","componentStillLoadingError","error$$1","cacheEntry","nonNormalizedTemplateMetadata","changeDetectionStrategy","entryComponentMetadata","_getProvidersMetadata","stringifyType","flattenAndDedupeArray","_getEntryComponentMetadata","getDefaultComponentElementName","_getQueriesMetadata","_getTypeMetadata","getDirectiveMetadata","getDirectiveSummary","dirSummary","isPipe","isNgModule","getNgModuleSummary","moduleType","alreadyCollecting","moduleSummary","moduleMeta","getNgModuleMetadata","loadNgModuleDirectiveAndPipeMetadata","loading","promise","_loadPipeMetadata","getShallowModuleMetadata","compileMeta","ngModuleMeta","shallowAnnotations","rawExports","rawImports","imports","rawProviders","exportedNonModuleIdentifiers","importedType","importedModuleType","isValidType","_checkSelfImport","_getTypeDescriptor","importedModuleSummary","exportedType","exportedModuleSummary","_getIdentifierMetadata","_getTransitiveNgModuleMetadata","declarations","declaredType","declaredIdentifier","_addTypeToModule","exportedId","bootstrap","provide","oldModule","modulesByToken","modSummary","mod","comp","addedTokens","tokenRef","prevModules","moduleRef","isInjectable","tryAnnotations","ann","getInjectableSummary","Injectable","getInjectableMetadata","throwOnUnknownDeps","symbol","providedIn","_getDependenciesMetadata","getAllLifecycleHooks","hook","hasLifecycleHook","getHookName","_getFactoryMetadata","getPipeMetadata","pipeType","pipeMeta","getPipeSummary","pipeSummary","getOrLoadPipeMetadata","pipeAnnotation","typeOrFunc","hasUnknownDeps","dependenciesMetadata","parameters","isAttribute","isSelf","isSkipSelf","isOptional","paramEntry","_getTokenMetadata","depsTokens","dep","targetEntryComponents","debugInfo","compileProviders","providerIdx","providerMeta","_validateProvider","providersInfo","soFar","seenProvider","seenProviderIdx","_getEntryComponentsFromProvider","getProviderMetadata","components","collectedIdentifiers","extractIdentifiers","targetIdentifiers","_CompileValueConverter","_getInjectableTypeMetadata","compileDeps","compileTypeMetadata","compileFactoryMetadata","propertyName","_getQueryMetadata","_queryVarBindings","q","varName","read","otherType","tree","dedupeArray","array","flattenArray","ProviderError","ProviderViewContext","component","_getViewQueries","viewQueryId","_addQueryToTokenMap","queryId","ProviderElementContext","viewContext","_parent","_isViewRoot","_directiveAsts","refs","isTemplate","_sourceSpan","_transformedProviders","_seenProviders","_queriedTokens","transformedHasViewContainer","_attrs","attrAst","directivesMeta","directiveAst","_allProviders","_resolveProvidersFromDirectives","targetErrors","providersByToken","_resolveProviders","Component","PublicService","PrivateService","_contentQueries","_getContentQueries","contentQueryId","contentQueries","directiveIndex","_addQueryReadsTo","templateRefId","refAst","defaultQueryValue","_getOrCreateLocalProvider","afterElement","lazyProviders","eagerProviders","sortedProviderTypes","transformProviders","sortedDirectives","dir1","dir2","allMatches","defaultValue","queryReadTokens","_getQueriesFor","queryValue","currentEl","distance","requestingProviderType","resolvedProvider","Builtin","transformedProviderAst","transformedProviders","transformedUseValue","transformedUseExisting","transformedDeps","existingDiDep","_getDependency","_transformProvider","_transformProviderAst","_getLocalDependency","attrValue","isValue","currElement","currEager","prevElement","targetProvidersByToken","NgModuleResolver","SourceMapGenerator","sourcesContent","lines","lastCol0","hasMappings","addSource","addLine","addMapping","col0","sourceUrl","sourceLine0","sourceCol0","currentLine","toJSON","sourcesIndex","mappings","lastSourceIndex","lastSourceLine0","lastSourceCol0","segments","segAsStr","toBase64VLQ","sourceRoot","toJsComment","toBase64String","b64","i1","i2","i3","toBase64Digit","digit","B64_DIGITS","_SINGLE_QUOTE_ESCAPE_STRING_RE","_LEGAL_IDENTIFIER_RE","_INDENT_WITH","CATCH_ERROR_VAR$1","CATCH_STACK_VAR$1","_EmittedLine","indent","partsLength","srcSpans","AbstractEmitterVisitor","EmitterVisitorContext","_indent","_classes","_preambleLineCount","_lines","createRoot","println","lastPart","print","lineIsEmpty","_currentLine","lineLength","newLine","removeEmptyLastLine","incIndent","decIndent","pushClass","clazz","popClass","toSource","sourceLines","_createIndent","toSourceMapGenerator","genFilePath","startsAtLine","firstOffsetMapped","mapFirstOffsetIfNeeded","lineIdx","spans","spanIdx","sourceLine","sourceCol","setPreambleLineCount","column","emittedLine","columnsLeft","partIndex","_escapeDollarInStrings","hasElseCase","lineWasEmpty","getBuiltinMethodName","escapeIdentifier","opStr","visitAllObjects","separator","incrementedIndent","escapeDollar","alwaysQuote","_TsEmitterVisitor","referenceFilter","importFilter","typeExpression","importsWithPrefixes","reexports","defaultType","_visitIdentifier","Exported","as","Final","_printColonType","field","_visitClassField","_visitClassConstructor","_visitClassGetter","_visitClassMethod","Private","Static","_visitParams","typeStr","ConcatArray","SubscribeObservable","Bind","size","PipeResolver","metas","SECURITY_SCHEMA","registerContext","specs","specs_1","specs_1_1","HTML","URL","RESOURCE_URL","BOOLEAN","NUMBER","STRING","OBJECT","SCHEMA","_ATTR_TO_PROP","class","for","formaction","innerHtml","readonly","tabindex","DomElementSchemaRegistry","_schema","encodedType","strType","properties","superName","superType","property","hasProperty","schemaMetas","schema","hasElement","getMappedPropName","NONE","validateProperty","validateAttribute","allKnownElementNames","normalizeAnimationStyleProperty","dashCaseToCamelCase","normalizeAnimationStyleValue","camelCaseProp","userProvidedProp","strVal","_isPixelDimensionStyle","valAndSuffixMatch","ElementSchemaRegistry","SKIP_WS_TRIM_TAGS","WS_CHARS","NO_WS_REGEXP","WS_REPLACE_REGEXP","replaceNgsp","WhitespaceVisitor","hasPreserveWhitespacesAttr","PLURAL_CASES","expandNodes","expander","_Expander","ExpansionResult","isExpanded","BoundPropertyType","expanded","ExpansionError","_expandPluralForm","expansionResult","switchAttr","_expandDefaultForm","BoundProperty","isLiteral","LITERAL_ATTR","ANIMATION","BindingParser","_exprParser","_targetErrors","pipesByName","_usedPipes","pipe","getUsedPipes","createBoundHostProperties","boundProps_1","parsePropertyBinding","createDirectiveHostPropertyAsts","elementSelector","boundProps","createElementPropertyAst","createDirectiveHostEventAsts","targetEventAsts_1","parseEvent","sourceInfo","_reportExpressionParserErrors","_checkPipes","parseInlineTemplateBinding","targetMatchableAttrs","targetProps","targetVars","_parseTemplateBindings","_parsePropertyAst","parseLiteralAttr","bindingsResult","warning","WARNING","_isAnimationLabel","_parseAnimation","isAnimationProp","_parseBinding","parsePropertyInterpolation","DEFAULT","isHostBinding","boundProp","bindingType","boundPropertyName","securityContexts","_validatePropertyOrAttributeName","calcPossibleSecurityContexts","nsSeparatorIdx","Class","Style","Property","targetEvents","_parseAnimationEvent","_parseEvent","splitAtPeriod","_parseAction","errors_1","errors_1_1","collector","PipeCollector","pipeName","isAttr","report","registry","ctxs","elementNames","notElementNames","possibleElementNames","BIND_NAME_REGEXP","CLASS_ATTR","TEXT_CSS_SELECTOR","TemplateParseError","TemplateParseResult","templateAst","usedPipes","TemplateParser","transforms","tryParse","htmlParseResult","getInterpolationConfig","removeWhitespaces","htmlAstWithErrors","tryParseHtml","expandHtml","uniqDirectives","removeSummaryDuplicates","uniqPipes","providerViewContext","bindingParser","parseVisitor","TemplateParseVisitor","EMPTY_ELEMENT_CONTEXT","_assertNoReferenceDuplicationOnTemplate","transform","forced","expandedHtmlAst","existingReferences","_bindingParser","_schemas","selectorMatcher","directivesIndex","ngContentCount","findNgContentIndex","valueNoNgsp","queryStartIndex","matchableAttrs","elementOrDirectiveProps","elementOrDirectiveRefs","elementVars","events","templateElementOrDirectiveProps","templateMatchableAttrs","templateElementVars","hasInlineTemplates","isTemplateElement","isNgTemplate","templateBindingsSource","hasBinding","_parseAttr","normalizedName","_normalizeAttributeName","hasTemplateBinding","elementCssSelector","createElementCssSelector","_parseDirectives","directiveMetas","matchElement","boundDirectivePropNames","directiveAsts","_createDirectiveAsts","elementProps","_createElementPropertyAsts","providerContext","NON_BINDABLE_VISITOR","ElementContext","parsedElement","projectionSelector","_isEmptyTextNode","_assertAllEventsPublishedByDirectives","_assertNoComponentsNorElementBindingsOnTemplate","transformedDirectiveAsts","_assertElementExists","_assertOnlyOneComponent","ngContentIndex_1","templateQueryStartIndex","templateSelector","templateDirectiveMetas","templateBoundDirectivePropNames","templateDirectiveAsts","templateElementProps","templateProviderContext","targetRefs","srcSpan","bindParts","_parseVariable","_parseReference","_parseAssignmentEvent","ElementOrDirectiveRef","elementSourceSpan","targetReferences","targetBoundDirectivePropNames","matchedReferences","directiveProperties","_checkPropertiesInSchema","_createDirectivePropertyAsts","elOrDirRef","isReferenceToDirective","refToken","targetBoundDirectiveProps","boundPropsByName_1","prevValue","dirProp","isEmptyExpression","boundElementProps","_findComponentDirectives","_findComponentDirectiveNames","componentTypeNames","elName","allDirectiveEvents","event","NonBindableVisitor","attrNameAndValues","splitExportAs","_ngContentIndexMatcher","_wildcardNgContentIndex","wildcardNgContentIndex","ngContentIndices","elNameNoNs","attrNameNoNs","BindingForm","_Mode","items","_BuiltinAstConverter","_converterFactory","BuiltinFunctionCall","createPipeConverter","createLiteralArrayConverter","createLiteralMapConverter","KEY_CONTEXT","CORE$1","FixupExpression","resolved","fixup","shared","MapPlaceholderNames","Identifiers$1","NEW_METHOD","TRANSFORM_METHOD","PATCH_DEPS","createElement","elementEnd","elementProperty","elementAttribute","elementClassNamed","elementStyleNamed","containerCreate","containerEnd","directiveCreate","directiveInput","textCreateBound","bind","interpolation1","interpolation2","interpolation3","interpolation4","interpolation5","interpolation6","interpolation7","interpolation8","interpolationV","pureFunction0","pureFunction1","pureFunction2","pureFunction3","pureFunction4","pureFunction5","pureFunction6","pureFunction7","pureFunction8","pureFunctionV","pipeBind1","pipeBind2","pipeBind3","pipeBind4","pipeBindV","projection","projectionDef","refreshComponent","directiveLifeCycle","injectAttribute","injectElementRef","injectTemplateRef","injectViewContainerRef","directiveInject","defineComponent","defineDirective","defineInjector","definePipe","queryRefresh","NgOnChangesFeature","listener","pureFunctionIdentifiers","getLiteralFactory","outputContext","literal$$1","constantPool","literalFactory","literalFactoryArguments","noop","BindingScope","declareLocalVarCallback","referenceNameIndex","declared","getLocal","nestedScope","declareCallback","freshReferenceName","ROOT_SCOPE","ValueConverter","outputCtx","allocateSlot","pipeSlots","slot","slotPseudoLocal","bindingId","pipeBinding","getConstLiteral","literalMap","ContentProjectionVisitor","projectionMap","ngContent","TS","ResolvedStaticSymbol","StaticSymbolResolver","staticSymbolCache","summaryResolver","errorRecorder","metadataCache","resolvedSymbols","resolvedFilePaths","importAs","symbolResourcePaths","symbolFromFile","knownFileNameToModuleNames","resolveSymbol","staticSymbol","_resolveSymbolMembers","_resolveSymbolFromSummary","_createSymbolsOf","getImportAs","useSummaries","baseSymbol","getStaticSymbol","baseImportAs","summarizedFileName","stripSummaryForJitFileSuffix","summarizedName","stripSummaryForJitNameSuffix","symbolName","summaryForJitFileName","fileName","summaryForJitName","getResourcePath","getTypeArity","isGeneratedFile","resolvedSymbol","unwrapResolvedMetadata","arity","getKnownModuleName","recordImportAs","sourceSymbol","targetSymbol","recordModuleNameForFileName","invalidateFile","symbols","symbols_1","symbols_1_1","ignoreErrorsFor","recorder","baseResolvedSymbol","baseMetadata","__symbolic","statics","hasDecorators","getModuleMetadata","metadataKey","decorators","getSymbolsOf","summarySymbols","metadataSymbols","e_2","_loop_1","moduleExport","export","exportSymbol","symName","unescapeIdentifier","resolvedModule","resolveModule","createExport","this_1","e_2_1","topLevelSymbolNames_1","origins_1","symbolMeta","origin","originFilePath","reportError","createResolvedSymbol","topLevelPath","topLevelSymbolNames","_originalFileMemo","isTsFile","isLibraryFile","getOriginalName","getOutputName","self","transformedMeta","ReferenceTransformer","functionParams","symbolic","oldLen","unwrappedTransformedMeta","moduleMetadata","moduleMetadatas","getMetadataFor","maxVersion_1","md","getSymbolByModule","containingFile","moduleNameToFileName","ToJsonSerializer","symbolResolver","srcFileName","indexBySymbol","reexportedBy","processedSummaryBySymbol","processedSummaries","unprocessedSymbolSummariesBySymbol","addSummary","unprocessedSummary","processedSummary","processValue","metadata_1","clone_1","isCall","isFunctionCall","isMethodCallOnVariable","declarationSymbol","isLoweredSymbol","ngModuleSummary","summary_1","json","summaries","reexportSymbol","__symbol","toSummaryFileName","flags","visitStaticSymbol","loadSummary","StubEmitFlags","FromJsonDeserializer","symbolCache","deserialize","libraryFileName","allImportAs","serializedSymbol","fromSummaryFileName","FORMATTED_MESSAGE","ANGULAR_CORE","HIDDEN_KEY","IGNORE","REFERENCE_SET","shouldIgnore","StaticReflector","knownMetadataClasses","knownMetadataFunctions","annotationCache","shallowAnnotationCache","propertyCache","parameterCache","methodCache","staticCache","conversionMap","resolvedExternalReferences","annotationForParentClassWithSummaryKind","initializeConversionMap","kc","_registerDecoratorOrConstructor","kf","_registerFunction","findSymbolDeclaration","declarationSymbol_1","refSymbol","findDeclaration","tryFindDeclaration","resolvedMetadata","originalRecorder","_annotations","simplify","classMetadata","getTypeMetadata","parentType","findParentType","parentAnnotations","ownAnnotations_1","requiredAnnotationTypes","requiredType","formatMetadataError","metadataError","parentPropMetadata_1","parentProp","members_1","parameters_1","ctorData","rawParameterTypes","parameterDecorators_1","rawParamType","nestedResult","paramType","trySimplify","_methodNames","methodNames","parentMethodNames_1","members_2","isMethod","_staticMembers","staticMembers","lcProperty","staticMembers_1","staticMembers_1_1","injectionToken","opaqueToken","ROUTES","lazy","scope","BindingScope$1","calling","simplifyInContext","depth","resolveReferenceValue","simplifyEagerly","simplifyNested","nestedContext","isMetadataError","summaryMsg","chain","errorSummary","REFERENCE_TO_NONEXPORTED_CLASS","VARIABLE_NOT_INITIALIZED","DESTRUCTURE_NOT_SUPPORTED","COULD_NOT_RESOLVE_TYPE","FUNCTION_CALL_NOT_SUPPORTED","REFERENCE_TO_LOCAL_SYMBOL","advise","isPrimitive","result_2","spreadArray","spreadArray_1","spreadArray_1_1","value_2","e_3_1","e_3","declarationValue","operand","indexTarget","member","selectContext","selectTarget","localValue","missing","argExpressions","arg","simplifyCall","functionSymbol","targetFunction","targetExpression","value_1","defaults","functionScope","result_1","oldScope","mapStringMap","simplifyLazily","reportingContext","METADATA_ERROR","LAMBDA_NOT_SUPPORTED","PopulatedScope","formattedError","formatChain","indentStr","half","floor","formatMetadataMessageChain","expandedMessage","typeName","messageAdvise","AotSummaryResolver","summaryCache","loadedFilePaths","isSourceFile","referringSrcFileName","referringLibFileName","rootSymbol","_loadSummaryFile","importedFilePath","hasSummary","summaryFilePath","summaryFileName","deserializeSummaries","JitSummaryResolver","_summaries","createOfflineCompileUrlResolver","UrlResolver","JitEmitterVisitor","_evalArgNames","_evalArgValues","_evalExportedVars","createReturnStmt","resultVar","getArgs","AbstractJsEmitterVisitor","fnExpr","currentClass","_ComponentIndex","UrlResolverImpl","_packagePrefix","resolvedUrl","_resolveUrl","_split","encodeURI","baseParts","Scheme","_joinAndCanonicalizePath","Port","Path","resolvedParts","_splitRe","uri","_removeDotSegments","leadingSlash","trailingSlash","up","pos","_buildFromEncodedParts","opt_scheme","opt_userInfo","opt_domain","opt_port","opt_path","opt_queryData","opt_fragment","UserInfo","Domain","QueryData","Fragment","BuiltinType$1","DiagnosticKind","ResourceLoader","TypeDiagnostic","AstType","getType","getDiagnostics","diagnostics","callable","reportWarning","normalize$$1","Undefined","Null","Other","nullable","getNonNullableType","leftType","rightType","leftRawKind","getTypeKind","rightRawKind","leftKind","operKind","Any","getBuiltinType","errorAst","Boolean","anyType","getTypeUnion","selectSignature","language","public","definition","signatures","types","indexed","argument","undefinedType","targetType","keyType","getArrayType","resolveMethodCall","getPipes","expType","expressionType","resolvePropertyRead","_anyType","_undefinedType","receiverType","isAny","receiverInfo","getDefinitionOf","info","templateOffset","refinedVariableType","templateElement","ngForDirective","ngForOfBinding","getElementType","getExpressionScope","includeEvent","getReferences","processReferences","getTypeSymbol","references_1","references_1_1","getVarDeclarations","tail","_loop_2","getTemplateContext","Unbound","getEventDeclaration","referenceTable","createSymbolTable","variableTable","eventsTable","mergeSymbolTable","ExpressionDiagnosticsVisitor","diagnoseExpression","attributeValueLocation","directiveSummary","spanOf$1","previousDirectiveSummary","hasTemplateReference","diDep","getExpressionDiagnostics","analyzer","offsetSpan","amount","toNumbers","compareNumbers","min","longestArray","comparisonResult","isPrivate","ModifierFlags","getCombinedModifierFlags","NodeFlags","isReferenceType","ObjectFlags","TypeFlags","objectFlags","Reference","TypeScriptSymbolQuery","program","checker","fetchPipes","typeCache","typeKindOf","StringLike","StringLiteral","NumberLike","Union","candidate","unionType","e_7_1","e_7","TypeParameter","getTsTypeOf","getBuiltinTypeFromTs","TypeWrapper","elementType","getTypeParameterOf","tsType","nonNullableType","pipesCache","typeSymbol","findClassSymbolInContext","contextType","getTemplateRefContextType","SymbolWrapper","MapSymbolTable","addAll","DeclaredSymbol","symbolTables","symbolTables_1","symbolTables_1_1","getSpanAt","spanAt","sourceFile","position_1","getPositionOfLineAndCharacter","forEachChild","findChild","SyntaxKind","LastToken","getStart","getEnd","getTypeOfSymbolAtLocation","getFromSymbolTable","constructorDeclaration","type_1","getTypeAtLocation","typeArguments","getTypeWrapper","typeCallable","getCallSignatures","signaturesOf","SignatureWrapper","getSymbol","definitionFromTsSymbol","SymbolTableWrapper","getProperties","SymbolFlags","Alias","getAliasedSymbol","getContainerOf","getFlags","ClassMember","parentDeclarationOf","e_6_1","e_6","isSymbolPrivate","valueDeclaration","_members","Interface","getDeclaredTypeOfSymbol","typeWrapper","_tsType","declaration","getParameters","getReturnType","SignatureResultOverride","resultType","toSymbolTableFactory","tsVersion","isVersionBetween","tsNumbers","e_4","symbols_2","symbols_2_1","e_4_1","toSymbolTable","symbolTable","toSymbols","table","own","_values","previous","symbols_3","symbols_3_1","e_5_1","e_5","PipesTable","PipeSymbol","INDEX_PATTERN","EmptyTable","instance","parameterType","classSymbol","findClassSymbol","findTransformMethodType","classType","getProperty","getSourceFile","indexVersion","dirname","getExportsOfModule","setParents","AsExpression","TrueKeyword","AnyKeyword","NullKeyword","numeric","NumericLiteral","NoSubstitutionTemplateLiteral","VoidExpression","ClassDeclaration","InterfaceDeclaration","SourceFile","METADATA_VERSION","isFunctionMetadata","isMetadataGlobalReferenceExpression","isMetadataSymbolicReferenceExpression","isMetadataModuleReferenceExpression","default","isMetadataError$1","spreadElementSyntaxKind","SpreadElement","SpreadElementExpression","isMethodCallOf","callExpression","memberName","PropertyAccessExpression","isCallOf","ident","recordMapEntry","nodeMap","isMetadataImportedSymbolReferenceExpression","isMetadataImportDefaultReference","everyNodeChild","isPrimitive$1","isDefined$1","getSourceFileOfNode","getLineAndCharacterOfPosition","errorSymbol","Evaluator","options","recordExport","nameOf","evaluateNode","received","getText","isFoldable","isFoldableWorker","folding","ObjectLiteralExpression","PropertyAssignment","ArrayLiteralExpression","CallExpression","arrayOrEmpty","arrayNode","arrayValue","FalseKeyword","TemplateHead","TemplateMiddle","TemplateTail","ParenthesizedExpression","BinaryExpression","binaryExpression","operatorToken","PlusToken","MinusToken","AsteriskToken","SlashToken","PercentToken","AmpersandAmpersandToken","BarBarToken","ElementAccessExpression","elementAccessExpression","argumentExpression","TemplateExpression","templateSpans","preferReference","recordEntry","substituteExpression","newEntry","isFoldableError","verboseInvalidExpression","resolveName","obj_1","quoted_1","ShorthandPropertyAssignment","assignment","propertyValue","isPropertyAssignment","quotedNames","arr_1","isMetadataSymbolicSpreadExpression","firstArgument","ArrowFunction","NewExpression","newExpression","newArgs","newTarget","propertyAccessExpression","expression_1","expression_2","TypeReference","typeReferenceNode","typeNameNode_1","typeReference","QualifiedName","qualifiedName","left_1","identifier_1","getReference","args_1","UnionType","UndefinedKeyword","StringKeyword","NumberKeyword","BooleanKeyword","TypeAssertionExpression","PrefixUnaryExpression","prefixUnaryExpression","TildeToken","ExclamationToken","operatorText","AmpersandToken","BarToken","CaretToken","EqualsEqualsToken","ExclamationEqualsToken","EqualsEqualsEqualsToken","ExclamationEqualsEqualsToken","LessThanToken","GreaterThanToken","LessThanEqualsToken","GreaterThanEqualsToken","LessThanLessThanToken","GreaterThanGreaterThanToken","GreaterThanGreaterThanGreaterThanToken","ConditionalExpression","conditionalExpression","thenExpression","whenTrue","elseExpression","whenFalse","FunctionExpression","TaggedTemplateExpression","templateExpression","literal","head","ClassExpression","createNodeArray","v","EmitFlags","Symbols","defineReference","_symbols","populateBuiltins","buildImports","stripQuotes","ImportEqualsDeclaration","importEqualsDeclaration","moduleReference","ExternalModuleReference","externalReference","from_1","ImportDeclaration","importDecl","importClause","moduleSpecifier","namedBindings","NamedImports","NamespaceImport","isStatic","MetadataCollector","getMetadata","strict","locals","composedSubstituter","evaluatorOptions","evaluator","errorSym","maybeGetSimpleFunction","functionDeclaration","functionName","functionBody","statement","returnStatement","func","namesOf","addNamesOf","bindingPattern","parameters_2","parameters_2_1","exportMap","ExportDeclaration","exportClause","spec","isExport","isDeclarationFile","Export","isExportedIdentifier","isExported","exportedIdentifierName","exportedName","classDeclaration","FunctionDeclaration","nameNode","classMetadataOf","getDecorators","decorator","objFromDecorator","decoratorNode","referenceFrom","isMetadataSymbolicSelectExpression","heritageClauses","hc","ExtendsKeyword","extends","typeParameters","recordMember","recordStaticMember","isConstructor","Constructor","MethodDeclaration","maybeFunc","methodDecorators","parameterDecoratorData","parametersData","hasDecoratorData","hasParameterData","parameters_1_1","parameter","parameterData","parameterDecorators","PropertyDeclaration","GetAccessor","SetAccessor","propertyDecorators","TypeAliasDeclaration","typeDeclaration","interfaceDeclaration","EnumDeclaration","enumDeclaration","enumValueHolder","enumName","nextDefaultValue","writtenMembers","enumValue","VariableStatement","variableStatement","variableDeclaration","varValue","exported","report_1","BindingElement","ObjectBindingPattern","ArrayBindingPattern","declarationList","validateMetadata","validateExpression","shouldReportNode","expandedMessage$1","validateFunction","oldLocals","isMetadataSymbolicExpression","indexExpression","ifExpression","getOwnPropertyNames","nodeStart","isClassMetadata","validateClass","classData","validateMember","isMethodMetadata","isConstructorMetadata","staticMember","DiagnosticKind$1","DTS$2","upgradeMetadataWithDtsData","oldMetadata","dtsFilePath","newMetadata","origins","dtsMetadata","getSourceFileMetadata","spanOf$3","isParseSourceSpan","inSpan","exclusive","offsetSpan$1","getSelectors","flatten$1","removeSuffix","suffix","uniqueByName","elements_1","elements_1_1","diagnosticInfoFromTemplateInfo","findTemplateAstAt","allowWidening","isNarrower","spanA","spanB","findAstAt","excludeEmpty","getExpressionCompletions","getExpressionSymbol","groups","onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onkeypress","onkeydown","onkeyup","onload","onunload","href","alt","media","nohref","usemap","src","onfocus","onblur","charset","declare","classid","codebase","codetype","archive","standby","cite","datetime","accept","shape","coords","action","enctype","onsubmit","onreset","accept-charset","valuetype","longdesc","width","disabled","onselect","accesskey","multiple","onchange","label","selected","checked","maxlength","rows","cols","height","border","frame","rules","cellspacing","cellpadding","datapagesize","align","charoff","valign","abbr","axis","headers","rowspan","colspan","profile","http-equiv","scheme","hreflang","rel","rev","ismap","defer","BIG","STRONG","DFN","CODE","SAMP","KBD","VAR","CITE","ABBR","ACRONYM","SPAN","BDO","BODY","ADDRESS","DIV","MAP","AREA","IMG","PARAM","PRE","BLOCKQUOTE","INS","DEL","DL","DT","DD","FORM","LABEL","INPUT","SELECT","OPTGROUP","OPTION","TEXTAREA","FIELDSET","LEGEND","BUTTON","TABLE","CAPTION","COLGROUP","COL","HEAD","TITLE","BASE","META","NOSCRIPT","defaultAttributes","SCHEMA$1","EVENT","BOOLEAN$1","NUMBER$1","STRING$1","OBJECT$1","SchemaInformation","typeParts","allKnownElements","eventsOf","propertiesOf","typeOf","_instance","hiddenHtmlElements","noscript","attributeCompletions","attributeCompletionsForElement","getAttributeInfosForElement","htmlAttributes","attributeNames","compose","indexes","indexes_1","indexes_1_1","group","fromHtml","htmlProperties","propertyNames","htmlEvents","eventNames","selectorMap","selectorAndAttributeNames","attrs_1","selectorAndAttr","hasTemplateReference$1","createElementCssSelector$1","templateAttr","foldAttrs","inputOutput","templates","duplicate","cloneAttr","expandedAttr","nameOfAttr","elementCompletions","htmlNames","voidElementAttributeCompletions","ExpressionVisitor","attributeValueCompletions","key_1","selectorInfo","selector_1","templateBindingResult","expressionParser","valueRelativePosition_1","keyCompletions","lowerName","equalLocation","directiveMetadata","contextTable","symbolsToCompletions","expressionPosition","completions","attributeValuePosition","locateSymbol","templatePosition","symbol_1","span_1","attributeValueSymbol_1","inEvent","findAttribute","expressionOffset","OverrideKindSymbol","findOutputBinding","fieldName","invertMap","findInputBinding","sym","kindOverride","createLanguageService","LanguageServiceImpl","getTemplateReferences","getTemplates","getTemplateDiagnostics","astProvider","getTemplateAst","expressionDiagnostics","getTemplateExpressionDiagnostics","templates_1","templates_1_1","getDeclarations","getAnalyzedModules","getDeclarationDiagnostics","declarationSpan","ngModuleByPipeOrDirective","ngModules","declarations_1","declarations_1_1","uniqueBySpan","getPipesAt","templateInfo","getTemplateAstAtPosition","getCompletionsAt","getTemplateCompletions","templatePosition_1","path_1","mostSpecific","astPosition_1","startTagSpan","dinfo","widerPath_1","widerVisitor","entityCompletions","found","re","getSourceText","interpolationCompletions","templatePath","getDefinitionAt","getDefinition","getHoverAt","getHover","hoverTextOf","getTemplateAt","contextFile","metadataResolver","rawHtmlParser","htmlParser","parser","htmlResult","analyzedModules","findSuitableDefaultModule","resultSize","module_1","moduleSize","removeMissing","opts","ChangeDetectionStrategy$1","ChangeDetectorStatus","Query","InjectionToken","ANNOTATIONS","PARAMETERS","PROP_METADATA","makeDecorator","parentClass","chainFn","typeFn","metaCtor","makeMetadataCtor","DecoratorFactory","annotationInstance","TypeDecorator","cls","annotationCls","makeParamDecorator","ParamDecoratorFactory","ParamDecorator","unusedKey","makePropDecorator","PropDecoratorFactory","decoratorInstance","PropDecorator","Type$2","isType","__window","window","__self","WorkerGlobalScope","__global","_global","_symbolIterator","getSymbolIterator","Symbol_1","scheduleMicroTask","Zone","looseIdentical","stringify$1","DELEGATE_CTOR","INHERITED_CLASS","INHERITED_CLASS_WITH_CTOR","ReflectionCapabilities","reflect","_reflect","isReflectionEnabled","_zipTypesAndAnnotations","paramTypes","paramAnnotations","_ownParameters","parentCtor","tsickleCtorParams","ctorParameters","paramTypes_1","ctorParam","paramAnnotations_1","convertTsickleDecoratorIntoMetadata","fill","getParentCtor","_ownAnnotations","ownAnnotations","_ownPropMetadata","propDecorators","propDecorators_1","propMetadata_1","ownPropMetadata","setter","importUri","resourceUri","resolveIdentifier","resolveEnum","enumIdentifier","decoratorInvocations","decoratorInvocation","parentProto","forwardRef","forwardRefFn","__forward_ref__","resolveForwardRef$1","Inject","Optional","Self","SkipSelf","SOURCE$1","_THROW_IF_NOT_FOUND","THROW_IF_NOT_FOUND","NullInjector","notFoundValue","StaticInjector","NULL","IDENT","EMPTY","CIRCULAR","MULTI_PROVIDER_FN","GET_PROPERTY_NAME$1","USE_VALUE$2","getClosureSafeProperty$1","objWithPropertyToExtract","NULL_INJECTOR","NEW_LINE","NO_NEW_LINE","records","_records","useNew","recursivelyProcessProviders","staticError","resolveProvider","computeDeps","providerDeps","multiProviderMixError","record","tryResolveToken","resolveToken","depRecords","depRecord","childRecord","tokenPath","formatError","charAt","_currentInjector","setCurrentInjector","injector","former","injectableDef","injectArgs","GET_PROPERTY_NAME","USE_VALUE$1","getClosureSafeProperty","EMPTY_ARRAY$1","convertInjectableProviderToFactory","deps_1","reflectionCapabilities","valueProvider_1","existingProvider_1","factoryProvider_1","classProvider_1","deps_2","deps_3","ViewEncapsulation$1","injectableType","ngInjectorDef","Version$1","VERSION$2","ERROR_DEBUG_CONTEXT","ERROR_ORIGINAL_ERROR","ERROR_LOGGER","getDebugContext","getOriginalError","defaultErrorLogger","ErrorHandler","handleError","originalError","_findOriginalError","_findContext","errorLogger","getErrorLogger","constructResolvingPath","findFirstClosedCycle","injectionError","constructResolvingMessage","errMsg","wrappedError","addKey","injectors","noAnnotationError","ii","ReflectiveKey","displayName","_globalKeyRegistry","numberOfKeys","KeyRegistry","_allKeys","newKey","Reflector","updateCapabilities","caps","ReflectiveDependency","optional","visibility","fromKey","_EMPTY_LIST","ResolvedReflectiveProvider_","resolvedFactories","resolvedFactory","ResolvedReflectiveFactory","resolveReflectiveProvider","resolveReflectiveFactory","factoryFn","resolvedDeps","_dependenciesFor","aliasInstance","constructDependencies","params_1","_extractToken","_createDependency","paramMetadata","UNDEFINED","ReflectiveInjector","resolveReflectiveProviders","resolvedProviderMap","mergeResolvedReflectiveProviders","normalizedProvidersMap","existing","_normalizeProviders","invalidProviderError","resolveAndCreate","ResolvedReflectiveProviders","fromResolvedProviders","ReflectiveInjector_","_providers","_constructionCounter","keyIds","objs","_getByKey","resolveAndCreateChild","createChildFromResolved","inj","resolveAndInstantiate","instantiateResolved","_instantiateProvider","getProviderAtIndex","outOfBoundsError","_new","_getMaxNumberOfObjects","cyclicDependencyError","_instantiate","ResolvedReflectiveFactory$$1","_getByReflectiveDependency","instantiationError","originalException","originalStack","INJECTOR_KEY","_getByKeySelf","_getByKeyDefault","_getObjByKeyId","keyId","_throwOrNull","noProviderError","inj_","_mapProviders","isFunction","_enable_super_gross_mode_that_will_cause_bad_things","useDeprecatedSynchronousErrorHandling","log","hostReportError","err","setTimeout","empty$1","closed","complete","isObject","tryCatchTarget","errorObject","tryCatcher","tryCatch","__extends$2","UnsubscriptionError","Subscription","unsubscribe","_parents","_subscriptions","_unsubscribe","hasErrors","remove","flattenUnsubscriptionErrors","teardown","subscription","_addParent","tmp","subscriptions","subscriptionIndex","errs","rxSubscriber","__extends$1","Subscriber","destinationOrNext","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","destination","isTrustedSubscriber","trustedSubscriber","SafeSubscriber","subscriber","_next","_error","_complete","_unsubscribeAndRecycle","_parentSubscriber","observerOrNext","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","observable","noop$1","Observable","subscribe","_isScalar","_subscribe","lift","observable$$1","sink","toSubscriber","nextOrObserver","_trySubscribe","promiseCtor","getPromiseCtor","reject","operations","pipeFromArray","fns","piped","toPromise","__extends$5","ObjectUnsubscribedError","__extends$6","SubjectSubscription","subject","observers","subscriberIndex","__extends$4","SubjectSubscriber","Subject","hasError","thrownError","AnonymousSubject","asObservable","__extends$7","refCount","refCountOperatorFunction","RefCountOperator$1","RefCountOperator","connectable","_refCount","refCounter","RefCountSubscriber$1","connection","connect","RefCountSubscriber","sharedConnection","_connection","__extends$3","connectableProto","ConnectableObservable","subjectFactory","_isComplete","getSubject","_subject","ConnectableSubscriber","connectableObservableDescriptor","writable","__extends$8","refCount$$1","GroupDurationSubscriber","GroupBySubscriber","keySelector","durationSelector","subjectSelector","attemptedToUnsubscribe","_group","groupedObservable","GroupedObservable","duration","removeGroup","groupSubject","refCountSubscription","InnerRefCountSubscription","__extends$9","__extends$13","BehaviorSubject","_value","getValue","Action","scheduler","work","schedule","state","delay","__extends$12","AsyncAction","pending","recycleAsyncId","requestAsyncId","setInterval","flush","clearInterval","execute","_execute","errored","errorValue","actions","__extends$11","QueueAction","Scheduler","SchedulerAction","now","Date","__extends$15","AsyncScheduler","active","scheduled","shift","__extends$14","queue","QueueScheduler","EMPTY$1","empty$2","emptyScheduled","isScheduler","subscribeToArray","dispatch","Notification","hasValue","observe","observer","do","toObservable","scalar","throwError","createNext","undefinedValueNotification","createError","createComplete","completeNotification","__extends$16","ObserveOnSubscriber","notification","scheduleMessage","ObserveOnMessage","__extends$10","ReplayEvent","ReplaySubject","bufferSize","windowTime","POSITIVE_INFINITY","_events","_infiniteTimeWindow","_bufferSize","_windowTime","nextInfiniteTimeWindow","nextTimeWindow","_getNow","_trimBufferThenGetEvents","eventsCount","spliceCount","time","__extends$17","nextHandle","AsyncSubject","hasNext","hasCompleted","tasksByHandle","__extends$18","AsapAction","handle","runIfPresent","__extends$19","asap","AsapScheduler","__extends$20","AnimationFrameAction","requestAnimationFrame","cancelAnimationFrame","__extends$21","__extends$22","AnimationFrameScheduler","VirtualAction","VirtualTimeScheduler","maxFrames","frameTimeFactor","sortActions","identity","__extends$23","__extends$24","ArgumentOutOfRangeError","EmptyError","__extends$25","__extends$26","TimeoutError","MapOperator","project","thisArg","MapSubscriber","__extends$28","OuterSubscriber","notifyNext","outerValue","innerValue","outerIndex","innerIndex","innerSub","notifyError","notifyComplete","__extends$29","InnerSubscriber","subscribeToPromise","getSymbolIterator$1","subscribeToIterable","iterable","iterator$$1","subscribeToObservable","obs","TypeError","isArrayLike","isPromise$1","subscribeTo","subscribeToResult","outerSubscriber","__extends$27","CombineLatestSubscriber","resultSelector","observables","toRespond","unused","_tryResultSelector","__extends$30","MergeMapOperator","concurrent","MergeMapSubscriber","_tryNext","_innerSub","ish","__extends$31","ForkJoinSubscriber","completed","haveValues","innerSubscription","_hasValue","__extends$32","__extends$33","RaceSubscriber","hasFirst","StaticIterator","ZipSubscriber","iterators","StaticArrayIterator","ZipBufferIterator","stillUnsubscribed","notifyInactive","checkIterators","shouldComplete","_tryresultSelector","nextResult","isComplete","__extends$34","__extends$35","AuditSubscriber","throttled","clearThrottle","__extends$36","BufferSubscriber","closingNotifier","__extends$37","BufferCountSubscriber","BufferSkipCountSubscriber","startBufferEvery","buffers","Context","dispatchBufferTimeSpanOnly","prevContext","closeContext","openContext","closeAction","bufferTimeSpan","dispatchBufferCreation","bufferCreationInterval","dispatchBufferClose","BufferTimeSubscriber","maxBufferSize","contexts","timespanOnly","creationState","filledBufferContext","onBufferFull","__extends$38","__extends$39","BufferToggleSubscriber","openings","closingSelector","closeBuffer","openBuffer","trySubscribe","__extends$40","BufferWhenSubscriber","subscribing","closingSubscription","__extends$41","CatchSubscriber","caught","err2","__extends$42","CountSubscriber","_tryPredicate","__extends$43","DebounceSubscriber","durationSubscription","emitValue","dispatchNext$2","debouncedNext","DebounceTimeSubscriber","dueTime","debouncedSubscription","lastValue","clearDebounce","__extends$44","__extends$45","DefaultIfEmptySubscriber","isEmpty","DelayMessage","DelaySubscriber","delay_1","_schedule","scheduleNotification","__extends$46","SubscriptionDelaySubscriber","DelayWhenSubscriber","delayDurationSelector","delayNotifierSubscriptions","removeSubscription","tryComplete","delayNotifier","tryDelay","subscriptionIdx","notifierSubscription","SubscriptionDelayObservable","subscriptionDelay","sourceSubscribed","subscribeToSource","__extends$47","__extends$48","DeMaterializeSubscriber","__extends$49","DistinctSubscriber","flushes","_useKeySelector","_finalizeNext","__extends$50","DistinctUntilChangedSubscriber","compare","hasKey","__extends$51","FilterSubscriber","__extends$52","TapSubscriber","_tapNext","_tapError","_tapComplete","__extends$53","TakeSubscriber","total","__extends$54","EverySubscriber","everyValueMatch","__extends$55","SwitchFirstSubscriber","hasSubscription","__extends$56","ExhaustMapSubscriber","tryNext","__extends$57","ExpandSubscriber","subscribeToProjection","__extends$58","FinallySubscriber","__extends$59","FindValueSubscriber","yieldIndex","__extends$60","IgnoreElementsSubscriber","__extends$61","IsEmptySubscriber","__extends$62","TakeLastSubscriber","ring","idx","__extends$63","MapToSubscriber","__extends$64","MaterializeSubscriber","__extends$65","ScanSubscriber","accumulator","_seed","hasSeed","seed","MergeScanSubscriber","acc","MulticastOperator","__extends$66","__extends$67","OnErrorResumeNextSubscriber","nextSources","subscribeToNextSource","__extends$68","PairwiseSubscriber","hasPrev","__extends$69","RepeatSubscriber","__extends$70","RepeatWhenSubscriber","notifier","sourceIsBeingSubscribedTo","retries","subscribeToRetries","retriesSubscription","notifications","__extends$71","RetrySubscriber","__extends$72","RetryWhenSubscriber","__extends$73","SampleSubscriber","dispatchNotification","period","SampleTimeSubscriber","__extends$74","SequenceEqualCompareToSubscriber","SequenceEqualSubscriber","compareTo","comparor","_oneComplete","emit","checkValues","areEqual","nextB","shareSubjectFactory","__extends$75","__extends$76","SingleSubscriber","seenValue","applySingleValue","singleValue","__extends$77","SkipSubscriber","__extends$78","SkipLastSubscriber","_skipCount","_count","_ring","skipCount","currentIndex","oldValue","__extends$79","SkipUntilSubscriber","__extends$80","SkipWhileSubscriber","skipping","tryCallPredicate","__extends$81","SubscribeOnObservable","delayTime","isNumeric","__extends$82","SwitchMapSubscriber","__extends$83","TakeUntilSubscriber","__extends$84","TakeWhileSubscriber","nextOrComplete","predicateResult","__extends$85","ThrottleSubscriber","_leading","_trailing","_sendValue","_throttled","send","throttle","tryDurationSelector","throttlingDone","dispatchNext$3","ThrottleTimeSubscriber","leading","trailing","_hasTrailingValue","_trailingValue","__extends$86","__extends$87","TimeoutWithSubscriber","absoluteTimeout","waitFor","withObservable","scheduleTimeout","dispatchTimeout","__extends$88","WindowSubscriber","openWindow","prevWindow","newWindow","__extends$89","WindowCountSubscriber","windowSize","startWindowEvery","windows","window_1","CountedSubject","_numberOfNextedValues","dispatchWindowTimeSpanOnly","windowTimeSpan","closeWindow","dispatchWindowCreation","windowCreationInterval","dispatchWindowClose","WindowTimeSubscriber","maxWindowSize","numberOfNextedValues","window_2","__extends$90","__extends$91","WindowToggleSubscriber","openSubscription","inner","__extends$92","unsubscribeClosingNotification","closingNotification","__read$12","isPromise$2","WithLatestFromSubscriber","__spread$12","_tryProject","APP_INITIALIZER","ApplicationInitStatus","appInits","initialized","donePromise","rej","runInitializers","asyncInitPromises","initResult","catch","APP_ID_RANDOM_PROVIDER","_appIdRandomProviderFactory","_randomChar","random","PLATFORM_ID","APP_BOOTSTRAP_LISTENER","Console","_throwError","trace","Compiler","compileModuleSync","compileModuleAsync","compileModuleAndAllComponentsSync","compileModuleAndAllComponentsAsync","CompilerFactory","_NullComponentFactoryResolver","resolveComponentFactory","noComponentFactoryError","ComponentFactoryBoundToModule","projectableNodes","rootSelectorOrNode","wtfEnabled","detectWTF","wtf","noopScope","arg0","arg1","wtfCreateScope","createScope","wtfLeave","leave","returnValue","leaveScope","EventEmitter","isAsync","__isAsync","generatorOrNext","schedulerFn","errorFn","completeFn","NgZone","enableLongStackTrace","hasPendingMicrotasks","hasPendingMacrotasks","isStable","onUnstable","onMicrotaskEmpty","onStable","onError","assertZonePatched","_nesting","_outer","_inner","fork","forkInnerZoneWithAngularBehavior","zone","isAngularZone","onInvokeTask","task","applyThis","applyArgs","onEnter","invokeTask","onLeave","onInvoke","invoke","onHasTask","hasTaskState","hasTask","change","microTask","checkStable","macroTask","onHandleError","runOutsideAngular","isInAngularZone","assertInAngularZone","assertNotInAngularZone","run","runTask","scheduleEventTask","EMPTY_PAYLOAD","noop$2","cancelTask","runGuarded","NoopNgZone","Testability","_ngZone","_pendingCount","_isZoneStable","_didWork","_callbacks","_watchAngularEvents","taskTrackingZone","_runCallbacksIfReady","increasePendingRequestCount","decreasePendingRequestCount","clearTimeout","timeoutId","doneCb","pending_1","getPendingTasks","updateCb","macroTasks","isPeriodic","creationLocation","xhr","addCallback","timeout","whenStable","getPendingRequestCount","findProviders","using","exactMatch","TestabilityRegistry","_applications","_testabilityGetter","addToWindow","registerApplication","testability","unregisterApplication","unregisterAllApplications","getTestability","elem","getAllTestabilities","getAllRootElements","findTestabilityInTree","findInAncestors","_NoopGetTestability","_devMode","isDevMode","PlatformRef","_injector","_modules","_destroyListeners","_destroyed","bootstrapModuleFactory","moduleFactory","ngZone","getNgZone","ngZoneOption","ngZoneInjector","exceptionHandler","onDestroy","_callAndReportToErrorHandler","errorHandler","initStatus","_moduleDoBootstrap","bootstrapModule","compilerOptions","compilerFactory","optionsReducer","createCompiler","appRef","ApplicationRef","_bootstrapComponents","ngDoBootstrap","destroy","dst","_zone","_exceptionHandler","_componentFactoryResolver","_initStatus","_bootstrapListeners","_views","_runningTick","_enforceNoNewChanges","_stable","componentTypes","tick","isCurrentlyStable","stableSub","unstableSub","mergeAll","mergeMap","isObservable","fromObservable","fromPromise","isIterable","fromIterable","mapOperation","share","multicast","subjectOrSubjectFactory","multicastOperatorFunction","componentOrFactory","compRef","_unloadComponent","nativeElement","_loadComponent","_tickScope","view","detectChanges","checkNoChanges","attachView","viewRef","attachToAppRef","detachView","detachFromAppRef","componentRef","ngOnDestroy","RendererStyleFlags2","RendererFactory2","Renderer2","dirty","_results","changes","init","toArray","reset","flatten$2","notifyOnChanges","setDirty","EventListener","EmbeddedViewRef","ViewRef","DebugNode","nativeNode","_debugContext","DebugElement","addChild","listeners","providerTokens","classes","removeChild","childIndex","insertChildrenAfter","newChildren","siblingIndex","insertBefore","refChild","newChild","refIndex","queryAll","_queryElementChildren","queryAllNodes","_queryNodeChildren","triggerEventHandler","eventObj","parentNode","_nativeNodeToDebugNode","getDebugNode","indexDebugNode","devModeEqual","isListLikeIterableA","isListLikeIterable","isListLikeIterableB","areIterablesEqual","comparator","iterator1","iterator2","item1","item2","WrappedValue","wrapped","wrap","unwrap","isWrapped","SimpleChange","previousValue","currentValue","firstChange","isFirstChange","isJsObject","DefaultIterableDifferFactory","supports","trackByFn","DefaultIterableDiffer","trackByIdentity","_linkedRecords","_unlinkedRecords","_previousItHead","_itHead","_itTail","_additionsHead","_additionsTail","_movesHead","_movesTail","_removalsHead","_removalsTail","_identityChangesHead","_identityChangesTail","_trackByFn","forEachItem","forEachOperation","nextIt","nextRemove","addRemoveOffset","moveOffsets","getPreviousIndex","adjPreviousIndex","_nextRemoved","previousIndex","localMovePreviousIndex","localCurrentIndex","forEachPreviousItem","_nextPrevious","forEachAddedItem","_nextAdded","forEachMovedItem","_nextMoved","forEachRemovedItem","forEachIdentityChange","_nextIdentityChange","diff","collection","_reset","itemTrackBy","mayBeDirty","index_1","trackById","_verifyReinsertion","_addIdentityChange","_mismatch","iterateListLike","_truncate","isDirty","nextRecord","previousRecord","_prev","_remove","_moveAfter","_reinsertAfter","_addAfter","IterableChangeRecord_","reinsertRecord","_addToMoves","_addToRemovals","_unlink","prevRecord","_prevRemoved","_insertAfter","_DuplicateMap","put","toIndex","_prevDup","_nextDup","_DuplicateItemRecordList","_head","_tail","atOrAfterIndex","duplicates","recordList","moveOffset","MissingTranslationStrategy$1","DefaultKeyValueDifferFactory","DefaultKeyValueDiffer","_mapHead","_appendAfter","_previousMapHead","_changesHead","_changesTail","forEachChangedItem","_nextChanged","_forEach","_maybeAddToChanges","_getOrCreateRecordForKey","_insertBeforeOrAppend","record_1","KeyValueChangeRecord_","_addToAdditions","newValue","_addToChanges","IterableDiffers","factories","copied","extend","getTypeNameForDebugging","KeyValueDiffers","kv","keyValDiff","iterableDiff","defaultIterableDiffers","defaultKeyValueDiffers","createPlatformFactory","parentPlatformFactory","_iterableDiffersFactory","_keyValueDiffersFactory","_localeFactory","tagSet","merge$2","sets","sets_1","sets_1_1","ApplicationModule","SecurityContext$1","VOID_ELEMENTS","OPTIONAL_END_TAG_BLOCK_ELEMENTS","OPTIONAL_END_TAG_INLINE_ELEMENTS","OPTIONAL_END_TAG_ELEMENTS","Sanitizer","shiftInitState","priorInitState","newInitState","initState","initIndex","shouldCallLifecycleInitHook","asTextData","asElementData","asProviderData","asPureExpressionData","asQueryList","Services","setCurrentNode","createRootView","createEmbeddedView","createComponentView","createNgModuleRef","overrideProvider","overrideComponentView","clearOverrides","checkAndUpdateView","checkNoChangesView","destroyView","resolveDep","createDebugContext","handleEvent","updateDirectives","updateRenderer","dirtyParentQueries","expressionChangedAfterItHasBeenCheckedError","currValue","isFirstCheck","viewDebugError","_addDebugContext","logError","viewDestroyedError","NOOP","_tokenKeyCache","tokenKey","checkBinding","bindingIdx","oldValues","bindingIndex","checkAndUpdateBinding","checkBindingNoChanges","bindingName","nodeIndex","markParentViewsForCheck","currView","viewContainerParent","markParentViewsForCheckProjectedViews","endView","dispatchEvent","componentView","root","declaredViewContainer","parentNodeDef","viewParentEl","renderNode","renderElement","renderText","isComponentView","isEmbeddedView","splitDepsDsl","sourceName","getParentRenderElement","renderHost","renderParent","componentRendererType","Native","DEFINITION_CACHE","WeakMap","resolveDefinition","visitRootRenderNodes","nextSibling","renderer","visitSiblingRenderNodes","endIndex","nodeDef","visitRenderNode","childCount","visitProjectedRenderNodes","compView","hostElDef","projectedNodes","execRenderNodeAction","rn","bindingFlags","embeddedViews","viewContainer","_embeddedViews","appendChild","NS_PREFIX_RE","splitNamespace","elDef","selectorOrNode","ns","createComment","selectRootElement","setAttribute","listenToElementOutputs","handleEventClosure","renderEventHandlerClosure","listenTarget","listenerView","disposable","listen","disposables","outputIndex","checkAndUpdateElementValue","elData","renderNode$$1","setElementAttribute","renderValue","sanitizer","sanitize","removeAttribute","setElementClass","addClass","removeClass","setElementStyle","setStyle","removeStyle","setElementProperty","setProperty","UNDEFINED_VALUE","InjectorRefTokenKey$1","INJECTORRefTokenKey$1","NgModuleRefTokenKey","resolveNgModuleDep","depDef","tokenKey_1","_def","providersByKey","providerInstance","_createProviderInstance$1","targetsModule","moduleTransitivelyPresent","isRoot","_createClass","depValues","_callFactory","detachEmbeddedView","elementData","viewIndex","removeFromArray","renderDetachView","renderAttachEmbeddedView","prevView","prevRenderNode","addToArray","EMPTY_CONTEXT","ComponentFactory_","viewDefFactory","_inputs","_outputs","inputsArr","outputsArr","componentNodeIndex","componentProvider","ComponentRef_","ViewRef_","_view","_viewRef","_component","_elDef","changeDetectorRef","Injector_","createViewContainerData","ViewContainerRef_","_data","attachToViewContainerRef","templateRef","insert","ngModuleRef","contextInjector","parentInjector","destroyed","viewRef_","attachEmbeddedView","parentView","attachProjectedView","vcElementData","dvcElementData","projectedViews","_projectedViews","markNodeAsProjectedTemplate","nodeFlags","childFlags","move","moveEmbeddedView","oldViewIndex","newViewIndex","viewData","detach","createChangeDetectorRef","_viewContainerRef","_appRef","rootRenderNodes","renderNodes","markForCheck","fs$$1","rendererFactory","begin","reattach","vcRef","createTemplateData","TemplateRef_","_parentView","createInjector$1","createRendererV1","RendererAdapter","namespaceAndName","createViewRoot","hostElement","createTemplateAnchor","createText","projectNodes","attachViewAfter","viewRootNodes","viewAllNodes","destroyNode","listenGlobal","attributeValue","setBindingDebugInfo","isAdd","styleName","styleValue","invokeElementMethod","methodName","setText","setValue","animate","NgModuleRef_","_moduleType","initNgModule","provDef","injectFlags","callNgModuleLifecycle","lifecycles","RendererV1TokenKey","Renderer2TokenKey","ElementRefTokenKey","ViewContainerRefTokenKey","TemplateRefTokenKey","ChangeDetectorRefTokenKey","InjectorRefTokenKey","INJECTORRefTokenKey","createProviderInstance","_createProviderInstance","createPipeInstance","createClass","createDirectiveInstance","eventHandlerClosure","allowPrivateServices","callFactory","ViewAction","NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR","startView","tokenKey$$1","searchView","findCompView","providerDef_1","allProviders","publicProviders","providerData","updateProp","nonMinifiedName","callLifecycleHooksChildrenFirst","callProviderLifecycles","directChildFlags","callElementProvidersLifecycles","ngAfterContentInit","ngAfterContentChecked","ngAfterViewInit","ngAfterViewChecked","queryIds","nodeMatchedQueries","tplDef","filterId","checkAndUpdateQuery","queryList","directiveInstance","newValues","calcQueryValues","notify","boundValue","matchedQueries","getQueryValue","childMatchedQueries","embeddedView","dvc","projectedView","queryValueType","appendNgContent","_addInterpolationPart","anchorDef$$1","createView","initView","createViewNodes","compRenderer","createRenderer","outputCount","bindingCount","nodeData","compViewDef","execComponentViewsAction","CreateViewNodes","execQueriesAction","markProjectedViewsForCheck","execEmbeddedViewsAction","CheckNoChanges","CheckAndUpdate","callInit","checkAndUpdateNode","argStyle","v0","v1","v2","v3","v4","v5","v6","v7","v8","v9","checkAndUpdateNodeInline","checkAndUpdateElementInline","bindLen","changed","checkAndUpdateTextInline","checkAndUpdateDirectiveInline","ngOnChanges","ngOnInit","ngDoCheck","checkAndUpdatePureExpressionInline","checkAndUpdateNodeDynamic","checkAndUpdateElementDynamic","checkAndUpdateTextDynamic","checkAndUpdateDirectiveDynamic","checkAndUpdatePureExpressionDynamic","i_1","checkNoChangesNode","checkNoChangesNodeInline","checkNoChangesNodeDynamic","checkNoChangesQuery","Destroy","detachProjectedView","destroyViewNodes","callViewAction","viewState","execProjectedViewsAction","CheckNoChangesProjectedViews","CheckAndUpdateProjectedViews","queryFlags","staticDynamicQueryFlag","checkType","nodeCount","createProdRootView","elInjector","createRootData","debugCreateRootView","DebugRendererFactory2","defWithOverride","applyProviderOverridesToView","callWithDebugContext","DebugAction","debugCreateEmbeddedView","viewDef$$1","debugCreateComponentView","viewDefOverrides","debugCreateNgModuleRef","applyProviderOverridesToNgModule","calcHasOverrides","hasOverrides","hasDeprecatedOverrides","providerOverrides","override","deprecatedBehavior","providerOverridesWithScope","applyProviderOverrides","moduleSet_1","_currentAction","_currentView","_currentNodeIndex","debugOverrideProvider","debugOverrideComponentView","compFactory","getComponentViewDefinitionFactory","debugClearOverrides","elementIndicesWithOverwrittenProviders","findElementIndicesWithOverwrittenProviders","elIndicesWithOverwrittenProviders","lastElementDef","applyProviderOverridesToElement","elIndex","prodCheckAndUpdateNode","checkIndex","prodCheckNoChangesNode","debugCheckAndUpdateView","debugCheckNoChangesView","debugDestroyView","debugSetCurrentNode","debugHandleEvent","debugUpdateDirectives","nextDirectiveWithBinding","debugCheckDirectivesFn","debugCheckAndUpdateNode","debugCheckNoChangesNode","debugUpdateRenderer","nextRenderNodeWithBinding","debugCheckRenderNodeFn","givenValues","bindingValues","camelCaseToDashCase","CAMEL_CASE_REGEXP","normalizeDebugBindingValue","DebugContext_","elView","elOrCompView","childDef","collectReferences","findHostElement","logViewDef","logNodeIndex","renderNodeIndex","getRenderNodeIndex","currRenderNodeIndex","refName","oldAction","oldView","oldNodeIndex","isViewDebugError","viewWrappedDebugError","getCurrentDebugContext","RendererStyleFlags3","renderData","DebugRenderer2","whenRenderingDone","removeDebugNodeFromIndex","namespace","debugCtx","debugEl","debugChildEl","debugRefEl","oldChild","executeHooks","allHooks","checkHooks","creationMode","hooksToCall","callHooks","isProceduralRenderer","stringify$2","findNextRNodeSibling","stopNode","currentNode","pNextOrParent","findFirstRNode","currentSibling","getNextLNodeWithProjection","getNextOrParentSiblingNode","initialNode","nextNode","native","childContainerData","dynamicLContainerNode","views","createTextNode","addRemoveViewFromContainer","insertMode","beforeNode","setViewNext","getParentState","rootView","cleanUpView","removeListeners","cleanup","removeEventListener","executeOnDestroys","destroyHooks","tView","executePipeOnDestroys","pipeDestroyHooks","NgModuleFactory_","_ngModuleDefFactory","initServicesIfNeeded","services","createDebugServices","createProdServices","previousOrParentNode","isParent","tData","currentQueries","NG_HOST_SYMBOL","_CLEAN_PROMISE","_ROOT_DIRECTIVE_INDICES","currentView","checkNoChangesMode","enterView","newView","bindingStartIndex","leaveView","viewHooks","viewCheckHooks","lifecycleStage","refreshDirectives","executeInitAndContentHooks","firstTemplatePass","setHostBindings","hostBindings","refreshChildComponents","componentRefresh","defs","dirIndex","executeInitHooks","initHooks","contentHooks","contentCheckHooks","renderEmbeddedTemplate","viewNode","_isParent","_previousOrParentNode","rf","createLNode","isState","createLNodeObject","nodeInjector","tNode","createLView","viewId","dynamicViewCount","getOrCreateTView","ngPrivateData","createTView","directiveRegistry","pipeRegistry","currentMatches","refreshDynamicChildren","getRenderFlags","container_1","elementIndex","viewAttached","detectChangesInternal","getDirectiveInstance","instanceOrArray","hostNode","_getComponentHostLElementNode","_lViewNode","_setComponentContext","markViewDirty","scheduleTick","rootContext","res_1","clean","getRootView","lView","rootComponent","renderComponentOrTemplate","componentOrContext","_lContainerNode","_viewRefs","lContainer","notImplemented","lViewNode","adjustedIdx","_adjustIndex","insertView","containerNextNativeNode","newIndex","removeView","removeIndex","destroyViewTree","viewOrContainer","QueryList_","_valuesTree","flatten$3","ReflectorModuleModuleResolutionHost","getProgram","metadataCollector","directoryExists","directoryName","fileExists","getScriptSnapshot","readFile","snapshot","getLength","sf","cacheMetadata","ReflectorHost","serviceHost","metadataReaderCache","createMetadataReaderCache","hostAdapter","moduleResolutionCache","createModuleResolutionCache","getCurrentDirectory","modulePath","readMetadata","metadatas","readMetadataFile","metadataPath","metadataOrMetadatas","maxMetadata","basePath","resolveModuleName","resolvedFileName","DummyHtmlParser","DummyResourceLoader","TypeScriptServiceHost","tsService","_typeCache","modulesOutOfDate","fileVersions","setSite","service","validate","_resolver","moduleResolver","directiveResolver","pipeResolver","elementSchemaRegistry","resourceLoader","urlResolver","directiveNormalizer","collectError","ensureTemplateMap","templateReferences","getSourceFromNode","getScriptVersion","fileToComponent","getSourceFromType","updateAnalyzedModules","ensureAnalyzedModules","getScriptFileNames","files","analyzeNgModules","fileNames","staticSymbolResolver","mergeAnalyzedFiles","analyzedFiles","allNgModules","allPipesAndDirectives","af","symbolsMissingModule","_analyzeFilesIncludingNonProgramFiles","seenFiles","visitFile","analyzedFile","analyzeFile","injectables","exportsNonSourceFiles","isNgSymbol","isValueExportingNonSourceFile","Visitor","modMeta","getSourceFiles","version_1","visit_1","templateSource","visit_2","getDeclarationFromNode","_checker","getTypeChecker","lastProgram","_staticSymbolResolver","clearCaches","seen_1","collectedErrors","templateReference","getSourceFromDeclaration","queryCache","getClassMembersFromDeclaration","pipes_1","getSymbolQuery","getPipesTable","getTemplateClassDeclFromNode","stringOf","shrink$1","spanOf$4","getTemplateClassFromStaticSymbol","_reflectorHost","scriptFileNames","tsConfigPath","findTsConfig$1","existsSync","parentDir","genDir","getCompilationSettings","paths","errorMap","sourceFilePath","reflectorHost","currentToken","missingTemplate","callTarget","Decorator","getCollectedErrors","defaultSpan","spanAt$1","isFormattedError","errorToDiagnosticWithChain","convertChain","projectHostMap","VERSION$3","createLanguageServiceFromTypescript","ngHost","ngServer","VERSION","getExternalFiles","proxy","oldLS","languageService","tryCall","tryFilenameCall","ls","tryFilenameOneCall","tryFilenameTwoCall","p1","p2","tryFilenameThreeCall","p3","tryFilenameFourCall","p4","typescriptOnly","cleanupSemanticCache","getSyntacticDiagnostics","getSemanticDiagnostics","getCompilerOptionsDiagnostics","getSyntacticClassifications","getSemanticClassifications","getEncodedSyntacticClassifications","getEncodedSemanticClassifications","getCompletionsAtPosition","getCompletionEntryDetails","getCompletionEntrySymbol","getQuickInfoAtPosition","getNameOrDottedNameSpan","getBreakpointStatementAtPosition","getSignatureHelpItems","getRenameInfo","findRenameLocations","getDefinitionAtPosition","getTypeDefinitionAtPosition","getImplementationAtPosition","getReferencesAtPosition","findReferences","getDocumentHighlights","getOccurrencesAtPosition","getNavigateToItems","searchValue","maxResultCount","excludeDtsFiles","getNavigationBarItems","getNavigationTree","getOutliningSpans","getTodoComments","getBraceMatchingAtPosition","getIndentationAtPosition","getFormattingEditsForRange","getFormattingEditsForDocument","getFormattingEditsAfterKeystroke","getDocCommentTemplateAtPosition","isValidBraceCompletionAtPosition","getSpanOfEnclosingComment","getCodeFixesAtPosition","applyCodeActionCommand","getEmitOutput","dispose","getApplicableRefactors","getEditsForRefactor","getDefinitionAndBoundSpan","getCombinedCodeFix","fixId","formatOptions","tryOperation","attempting","projectService","logger","languageServiceHost","isGlobalCompletion","isMemberCompletion","isNewIdentifierLocation","results_1","results_1_1","sortText","kindModifiers","ours","displayParts","documentation","textSpan","file_1","diagnosticToDiagnostic","messageText","diagnosticMessageToDiagnosticMessageText","diagnosticChainToDiagnosticChain","DiagnosticCategory","ours_1","ours_1_1","loc","containerName","containerKind"],"mappings":"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G,EAAG,GAAI,IACxBtyC,MAAO,IAEPuyC,IAAqB,EAAG,EAAG,EAAG,GAoC9BC,IACA,iYAGA,s1BACA,qgCACA,gOACA,2uBACA,uBACA,2CACA,uBACA,wCACA,uBACA,kCACA,yCACA,mLACA,8JACA,eACA,yBACA,iCACA,iQACA,yHACA,sCACA,+BACA,4BACA,0BACA,8BACA,yCACA,6BACA,0BACA,uDACA,wCACA,qCACA,uGACA,iGACA,sOACA,mDACA,sBACA,wCACA,6BACA,2JACA,oJACA,wbACA,+BACA,8BACA,6BACA,wIACA,yBACA,4HACA,8BACA,mDACA,2DACA,sCACA,kDACA,uIACA,yCACA,6EACA,wDACA,wBACA,gDACA,yBACA,2BACA,qCACA,mCACA,gGACA,wGACA,wBACA,0BACA,mDACA,sBACA,2CACA,8BACA,mHACA,+DACA,oHACA,iDACA,wDACA,0BACA,qNACA,2BACA,sDACA,iCACA,yBACA,oCACA,wBACA,+BACA,qCACA,wCACA,6BACA,+BACA,2BACA,mBACA,sBACA,8BACA,sBACA,4BACA,kCACA,0BACA,+BACA,gCACA,gCACA,6BACA,2BACA,sBACA,+CACA,+CACA,+CACA,+CACA,6BACA,sBACA,sBACA,0BACA,2BACA,uBACA,2BACA,iCACA,0BACA,qBACA,2BACA,qBACA,oCACA,wBACA,4BACA,2BACA,qCACA,oBACA,qBACA,mBACA,uBACA,2BACA,sBACA,8BACA,+BACA,qCACA,2BACA,mDACA,yBACA,2BACA,mBACA,8CACA,6BACA,qBACA,mCACA,kCACA,kCACA,oBACA,0BACA,8BACA,2BACA,wEACA,gFACA,yBACA,8BACA,sBAEAC,GAAQ,QACRC,GAAY,UACZC,GAAW,SACXC,GAAW,SACXC,GAAW,SACXC,GAAmC,WACnC,SAASA,IACL,IAAIvkH,EAAQ5H,KACZA,KAAK86E,UACL+wC,GAAS/jH,QAAQ,SAAUwyE,GACvB,IAAI3mE,EAAQ2mE,EAAYtwE,MAAM,KAC1BwwE,EAAa7mE,EAAM,GAAG3J,MAAM,KAC5BoiH,GAAaz4G,E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","sourcesContent":["/**\n * @license Angular v6.0.0\n * (c) 2010-2018 Google, Inc. https://angular.io/\n * License: MIT\n */\n\nvar $reflect = {defineMetadata: function() {}, getOwnMetadata: function(){}};\n((typeof global !== 'undefined' && global)||{})['Reflect'] = $reflect;\nvar $deferred, $resolved, $provided;\nfunction $getModule(name) { return $provided[name] || require(name); }\nfunction define(modules, cb) { $deferred = { modules: modules, cb: cb }; }\nmodule.exports = function(provided) {\n  if ($resolved) return $resolved;\n  var result = {};\n  $provided = Object.assign({'reflect-metadata': $reflect}, provided || {}, { exports: result });\n  $deferred.cb.apply(this, $deferred.modules.map($getModule));\n  $resolved = result;\n  return result;\n}\n\ndefine(['exports', 'fs', 'path', 'typescript'], function (exports, fs, path, ts) { 'use strict';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar createInject = makeMetadataFactory('Inject', function (token) { return ({ token: token }); });\nvar createInjectionToken = makeMetadataFactory('InjectionToken', function (desc) { return ({ _desc: desc, ngInjectableDef: undefined }); });\nvar createAttribute = makeMetadataFactory('Attribute', function (attributeName) { return ({ attributeName: attributeName }); });\nvar createContentChildren = makeMetadataFactory('ContentChildren', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: false, isViewQuery: false, descendants: false }, data));\n});\nvar createContentChild = makeMetadataFactory('ContentChild', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: true, isViewQuery: false, descendants: true }, data));\n});\nvar createViewChildren = makeMetadataFactory('ViewChildren', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: false, isViewQuery: true, descendants: true }, data));\n});\nvar createViewChild = makeMetadataFactory('ViewChild', function (selector, data) {\n    return (__assign({ selector: selector, first: true, isViewQuery: true, descendants: true }, data));\n});\nvar createDirective = makeMetadataFactory('Directive', function (dir) {\n    if (dir === void 0) { dir = {}; }\n    return dir;\n});\nvar ViewEncapsulation;\n(function (ViewEncapsulation) {\n    ViewEncapsulation[ViewEncapsulation[\"Emulated\"] = 0] = \"Emulated\";\n    ViewEncapsulation[ViewEncapsulation[\"Native\"] = 1] = \"Native\";\n    ViewEncapsulation[ViewEncapsulation[\"None\"] = 2] = \"None\";\n})(ViewEncapsulation || (ViewEncapsulation = {}));\nvar ChangeDetectionStrategy;\n(function (ChangeDetectionStrategy) {\n    ChangeDetectionStrategy[ChangeDetectionStrategy[\"OnPush\"] = 0] = \"OnPush\";\n    ChangeDetectionStrategy[ChangeDetectionStrategy[\"Default\"] = 1] = \"Default\";\n})(ChangeDetectionStrategy || (ChangeDetectionStrategy = {}));\nvar createComponent = makeMetadataFactory('Component', function (c) {\n    if (c === void 0) { c = {}; }\n    return (__assign({ changeDetection: ChangeDetectionStrategy.Default }, c));\n});\nvar createPipe = makeMetadataFactory('Pipe', function (p) { return (__assign({ pure: true }, p)); });\nvar createInput = makeMetadataFactory('Input', function (bindingPropertyName) { return ({ bindingPropertyName: bindingPropertyName }); });\nvar createOutput = makeMetadataFactory('Output', function (bindingPropertyName) { return ({ bindingPropertyName: bindingPropertyName }); });\nvar createHostBinding = makeMetadataFactory('HostBinding', function (hostPropertyName) { return ({ hostPropertyName: hostPropertyName }); });\nvar createHostListener = makeMetadataFactory('HostListener', function (eventName, args) { return ({ eventName: eventName, args: args }); });\nvar createNgModule = makeMetadataFactory('NgModule', function (ngModule) { return ngModule; });\nvar createInjectable = makeMetadataFactory('Injectable', function (injectable) {\n    if (injectable === void 0) { injectable = {}; }\n    return injectable;\n});\nvar CUSTOM_ELEMENTS_SCHEMA = {\n    name: 'custom-elements'\n};\nvar NO_ERRORS_SCHEMA = {\n    name: 'no-errors-schema'\n};\nvar createOptional = makeMetadataFactory('Optional');\nvar createSelf = makeMetadataFactory('Self');\nvar createSkipSelf = makeMetadataFactory('SkipSelf');\nvar createHost = makeMetadataFactory('Host');\nvar Type = Function;\nvar SecurityContext;\n(function (SecurityContext) {\n    SecurityContext[SecurityContext[\"NONE\"] = 0] = \"NONE\";\n    SecurityContext[SecurityContext[\"HTML\"] = 1] = \"HTML\";\n    SecurityContext[SecurityContext[\"STYLE\"] = 2] = \"STYLE\";\n    SecurityContext[SecurityContext[\"SCRIPT\"] = 3] = \"SCRIPT\";\n    SecurityContext[SecurityContext[\"URL\"] = 4] = \"URL\";\n    SecurityContext[SecurityContext[\"RESOURCE_URL\"] = 5] = \"RESOURCE_URL\";\n})(SecurityContext || (SecurityContext = {}));\nvar MissingTranslationStrategy;\n(function (MissingTranslationStrategy) {\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Error\"] = 0] = \"Error\";\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Warning\"] = 1] = \"Warning\";\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Ignore\"] = 2] = \"Ignore\";\n})(MissingTranslationStrategy || (MissingTranslationStrategy = {}));\nfunction makeMetadataFactory(name, props) {\n    var factory = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var values = props ? props.apply(void 0, __spread(args)) : {};\n        return __assign({ ngMetadataName: name }, values);\n    };\n    factory.isTypeOf = function (obj) { return obj && obj.ngMetadataName === name; };\n    factory.ngMetadataName = name;\n    return factory;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar DASH_CASE_REGEXP = /-+([a-z0-9])/g;\nfunction dashCaseToCamelCase(input) {\n    return input.replace(DASH_CASE_REGEXP, function () {\n        var m = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            m[_i] = arguments[_i];\n        }\n        return m[1].toUpperCase();\n    });\n}\nfunction splitAtColon(input, defaultValues) {\n    return _splitAt(input, ':', defaultValues);\n}\nfunction splitAtPeriod(input, defaultValues) {\n    return _splitAt(input, '.', defaultValues);\n}\nfunction _splitAt(input, character, defaultValues) {\n    var characterIndex = input.indexOf(character);\n    if (characterIndex == -1)\n        return defaultValues;\n    return [input.slice(0, characterIndex).trim(), input.slice(characterIndex + 1).trim()];\n}\nfunction visitValue(value, visitor, context) {\n    if (Array.isArray(value)) {\n        return visitor.visitArray(value, context);\n    }\n    if (isStrictStringMap(value)) {\n        return visitor.visitStringMap(value, context);\n    }\n    if (value == null || typeof value == 'string' || typeof value == 'number' ||\n        typeof value == 'boolean') {\n        return visitor.visitPrimitive(value, context);\n    }\n    return visitor.visitOther(value, context);\n}\nfunction isDefined(val) {\n    return val !== null && val !== undefined;\n}\nfunction noUndefined(val) {\n    return val === undefined ? null : val;\n}\nvar ValueTransformer = /** @class */ (function () {\n    function ValueTransformer() {\n    }\n    ValueTransformer.prototype.visitArray = function (arr, context) {\n        var _this = this;\n        return arr.map(function (value) { return visitValue(value, _this, context); });\n    };\n    ValueTransformer.prototype.visitStringMap = function (map, context) {\n        var _this = this;\n        var result = {};\n        Object.keys(map).forEach(function (key) { result[key] = visitValue(map[key], _this, context); });\n        return result;\n    };\n    ValueTransformer.prototype.visitPrimitive = function (value, context) { return value; };\n    ValueTransformer.prototype.visitOther = function (value, context) { return value; };\n    return ValueTransformer;\n}());\nvar SyncAsync = {\n    assertSync: function (value) {\n        if (isPromise(value)) {\n            throw new Error(\"Illegal state: value cannot be a promise\");\n        }\n        return value;\n    },\n    then: function (value, cb) { return isPromise(value) ? value.then(cb) : cb(value); },\n    all: function (syncAsyncValues) {\n        return syncAsyncValues.some(isPromise) ? Promise.all(syncAsyncValues) : syncAsyncValues;\n    }\n};\nfunction error(msg) {\n    throw new Error(\"Internal Error: \" + msg);\n}\nfunction syntaxError(msg, parseErrors) {\n    var error = Error(msg);\n    error[ERROR_SYNTAX_ERROR] = true;\n    if (parseErrors)\n        error[ERROR_PARSE_ERRORS] = parseErrors;\n    return error;\n}\nvar ERROR_SYNTAX_ERROR = 'ngSyntaxError';\nvar ERROR_PARSE_ERRORS = 'ngParseErrors';\n\n\n// Escape characters that have a special meaning in Regular Expressions\nfunction escapeRegExp(s) {\n    return s.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n}\nvar STRING_MAP_PROTO = Object.getPrototypeOf({});\nfunction isStrictStringMap(obj) {\n    return typeof obj === 'object' && obj !== null && Object.getPrototypeOf(obj) === STRING_MAP_PROTO;\n}\nfunction utf8Encode(str) {\n    var encoded = '';\n    for (var index = 0; index < str.length; index++) {\n        var codePoint = str.charCodeAt(index);\n        // decode surrogate\n        // see https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n        if (codePoint >= 0xd800 && codePoint <= 0xdbff && str.length > (index + 1)) {\n            var low = str.charCodeAt(index + 1);\n            if (low >= 0xdc00 && low <= 0xdfff) {\n                index++;\n                codePoint = ((codePoint - 0xd800) << 10) + low - 0xdc00 + 0x10000;\n            }\n        }\n        if (codePoint <= 0x7f) {\n            encoded += String.fromCharCode(codePoint);\n        }\n        else if (codePoint <= 0x7ff) {\n            encoded += String.fromCharCode(((codePoint >> 6) & 0x1F) | 0xc0, (codePoint & 0x3f) | 0x80);\n        }\n        else if (codePoint <= 0xffff) {\n            encoded += String.fromCharCode((codePoint >> 12) | 0xe0, ((codePoint >> 6) & 0x3f) | 0x80, (codePoint & 0x3f) | 0x80);\n        }\n        else if (codePoint <= 0x1fffff) {\n            encoded += String.fromCharCode(((codePoint >> 18) & 0x07) | 0xf0, ((codePoint >> 12) & 0x3f) | 0x80, ((codePoint >> 6) & 0x3f) | 0x80, (codePoint & 0x3f) | 0x80);\n        }\n    }\n    return encoded;\n}\nfunction stringify(token) {\n    if (typeof token === 'string') {\n        return token;\n    }\n    if (token instanceof Array) {\n        return '[' + token.map(stringify).join(', ') + ']';\n    }\n    if (token == null) {\n        return '' + token;\n    }\n    if (token.overriddenName) {\n        return \"\" + token.overriddenName;\n    }\n    if (token.name) {\n        return \"\" + token.name;\n    }\n    // WARNING: do not try to `JSON.stringify(token)` here\n    // see https://github.com/angular/angular/issues/23440\n    var res = token.toString();\n    if (res == null) {\n        return '' + res;\n    }\n    var newLineIndex = res.indexOf('\\n');\n    return newLineIndex === -1 ? res : res.substring(0, newLineIndex);\n}\n/**\n * Lazily retrieves the reference value from a forwardRef.\n */\nfunction resolveForwardRef(type) {\n    if (typeof type === 'function' && type.hasOwnProperty('__forward_ref__')) {\n        return type();\n    }\n    else {\n        return type;\n    }\n}\n/**\n * Determine if the argument is shaped like a Promise\n */\nfunction isPromise(obj) {\n    // allow any Promise/A+ compliant thenable.\n    // It's up to the caller to ensure that obj.then conforms to the spec\n    return !!obj && typeof obj.then === 'function';\n}\nvar Version = /** @class */ (function () {\n    function Version(full) {\n        this.full = full;\n        var splits = full.split('.');\n        this.major = splits[0];\n        this.minor = splits[1];\n        this.patch = splits.slice(2).join('.');\n    }\n    return Version;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all public APIs of the common package.\n */\n/**\n *\n */\nvar VERSION = new Version('6.0.0');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A segment of text within the template.\n */\nvar TextAst = /** @class */ (function () {\n    function TextAst(value, ngContentIndex, sourceSpan) {\n        this.value = value;\n        this.ngContentIndex = ngContentIndex;\n        this.sourceSpan = sourceSpan;\n    }\n    TextAst.prototype.visit = function (visitor, context) { return visitor.visitText(this, context); };\n    return TextAst;\n}());\n/**\n * A bound expression within the text of a template.\n */\nvar BoundTextAst = /** @class */ (function () {\n    function BoundTextAst(value, ngContentIndex, sourceSpan) {\n        this.value = value;\n        this.ngContentIndex = ngContentIndex;\n        this.sourceSpan = sourceSpan;\n    }\n    BoundTextAst.prototype.visit = function (visitor, context) {\n        return visitor.visitBoundText(this, context);\n    };\n    return BoundTextAst;\n}());\n/**\n * A plain attribute on an element.\n */\nvar AttrAst = /** @class */ (function () {\n    function AttrAst(name, value, sourceSpan) {\n        this.name = name;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    AttrAst.prototype.visit = function (visitor, context) { return visitor.visitAttr(this, context); };\n    return AttrAst;\n}());\n/**\n * A binding for an element property (e.g. `[property]=\"expression\"`) or an animation trigger (e.g.\n * `[@trigger]=\"stateExp\"`)\n */\nvar BoundElementPropertyAst = /** @class */ (function () {\n    function BoundElementPropertyAst(name, type, securityContext, value, unit, sourceSpan) {\n        this.name = name;\n        this.type = type;\n        this.securityContext = securityContext;\n        this.value = value;\n        this.unit = unit;\n        this.sourceSpan = sourceSpan;\n        this.isAnimation = this.type === PropertyBindingType.Animation;\n    }\n    BoundElementPropertyAst.prototype.visit = function (visitor, context) {\n        return visitor.visitElementProperty(this, context);\n    };\n    return BoundElementPropertyAst;\n}());\n/**\n * A binding for an element event (e.g. `(event)=\"handler()\"`) or an animation trigger event (e.g.\n * `(@trigger.phase)=\"callback($event)\"`).\n */\nvar BoundEventAst = /** @class */ (function () {\n    function BoundEventAst(name, target, phase, handler, sourceSpan) {\n        this.name = name;\n        this.target = target;\n        this.phase = phase;\n        this.handler = handler;\n        this.sourceSpan = sourceSpan;\n        this.fullName = BoundEventAst.calcFullName(this.name, this.target, this.phase);\n        this.isAnimation = !!this.phase;\n    }\n    BoundEventAst.calcFullName = function (name, target, phase) {\n        if (target) {\n            return target + \":\" + name;\n        }\n        else if (phase) {\n            return \"@\" + name + \".\" + phase;\n        }\n        else {\n            return name;\n        }\n    };\n    BoundEventAst.prototype.visit = function (visitor, context) {\n        return visitor.visitEvent(this, context);\n    };\n    return BoundEventAst;\n}());\n/**\n * A reference declaration on an element (e.g. `let someName=\"expression\"`).\n */\nvar ReferenceAst = /** @class */ (function () {\n    function ReferenceAst(name, value, originalValue, sourceSpan) {\n        this.name = name;\n        this.value = value;\n        this.originalValue = originalValue;\n        this.sourceSpan = sourceSpan;\n    }\n    ReferenceAst.prototype.visit = function (visitor, context) {\n        return visitor.visitReference(this, context);\n    };\n    return ReferenceAst;\n}());\n/**\n * A variable declaration on a <ng-template> (e.g. `var-someName=\"someLocalName\"`).\n */\nvar VariableAst = /** @class */ (function () {\n    function VariableAst(name, value, sourceSpan) {\n        this.name = name;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    VariableAst.prototype.visit = function (visitor, context) {\n        return visitor.visitVariable(this, context);\n    };\n    return VariableAst;\n}());\n/**\n * An element declaration in a template.\n */\nvar ElementAst = /** @class */ (function () {\n    function ElementAst(name, attrs, inputs, outputs, references, directives, providers, hasViewContainer, queryMatches, children, ngContentIndex, sourceSpan, endSourceSpan) {\n        this.name = name;\n        this.attrs = attrs;\n        this.inputs = inputs;\n        this.outputs = outputs;\n        this.references = references;\n        this.directives = directives;\n        this.providers = providers;\n        this.hasViewContainer = hasViewContainer;\n        this.queryMatches = queryMatches;\n        this.children = children;\n        this.ngContentIndex = ngContentIndex;\n        this.sourceSpan = sourceSpan;\n        this.endSourceSpan = endSourceSpan;\n    }\n    ElementAst.prototype.visit = function (visitor, context) {\n        return visitor.visitElement(this, context);\n    };\n    return ElementAst;\n}());\n/**\n * A `<ng-template>` element included in an Angular template.\n */\nvar EmbeddedTemplateAst = /** @class */ (function () {\n    function EmbeddedTemplateAst(attrs, outputs, references, variables, directives, providers, hasViewContainer, queryMatches, children, ngContentIndex, sourceSpan) {\n        this.attrs = attrs;\n        this.outputs = outputs;\n        this.references = references;\n        this.variables = variables;\n        this.directives = directives;\n        this.providers = providers;\n        this.hasViewContainer = hasViewContainer;\n        this.queryMatches = queryMatches;\n        this.children = children;\n        this.ngContentIndex = ngContentIndex;\n        this.sourceSpan = sourceSpan;\n    }\n    EmbeddedTemplateAst.prototype.visit = function (visitor, context) {\n        return visitor.visitEmbeddedTemplate(this, context);\n    };\n    return EmbeddedTemplateAst;\n}());\n/**\n * A directive property with a bound value (e.g. `*ngIf=\"condition\").\n */\nvar BoundDirectivePropertyAst = /** @class */ (function () {\n    function BoundDirectivePropertyAst(directiveName, templateName, value, sourceSpan) {\n        this.directiveName = directiveName;\n        this.templateName = templateName;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    BoundDirectivePropertyAst.prototype.visit = function (visitor, context) {\n        return visitor.visitDirectiveProperty(this, context);\n    };\n    return BoundDirectivePropertyAst;\n}());\n/**\n * A directive declared on an element.\n */\nvar DirectiveAst = /** @class */ (function () {\n    function DirectiveAst(directive, inputs, hostProperties, hostEvents, contentQueryStartId, sourceSpan) {\n        this.directive = directive;\n        this.inputs = inputs;\n        this.hostProperties = hostProperties;\n        this.hostEvents = hostEvents;\n        this.contentQueryStartId = contentQueryStartId;\n        this.sourceSpan = sourceSpan;\n    }\n    DirectiveAst.prototype.visit = function (visitor, context) {\n        return visitor.visitDirective(this, context);\n    };\n    return DirectiveAst;\n}());\n/**\n * A provider declared on an element\n */\nvar ProviderAst = /** @class */ (function () {\n    function ProviderAst(token, multiProvider, eager, providers, providerType, lifecycleHooks, sourceSpan, isModule) {\n        this.token = token;\n        this.multiProvider = multiProvider;\n        this.eager = eager;\n        this.providers = providers;\n        this.providerType = providerType;\n        this.lifecycleHooks = lifecycleHooks;\n        this.sourceSpan = sourceSpan;\n        this.isModule = isModule;\n    }\n    ProviderAst.prototype.visit = function (visitor, context) {\n        // No visit method in the visitor for now...\n        return null;\n    };\n    return ProviderAst;\n}());\nvar ProviderAstType;\n(function (ProviderAstType) {\n    ProviderAstType[ProviderAstType[\"PublicService\"] = 0] = \"PublicService\";\n    ProviderAstType[ProviderAstType[\"PrivateService\"] = 1] = \"PrivateService\";\n    ProviderAstType[ProviderAstType[\"Component\"] = 2] = \"Component\";\n    ProviderAstType[ProviderAstType[\"Directive\"] = 3] = \"Directive\";\n    ProviderAstType[ProviderAstType[\"Builtin\"] = 4] = \"Builtin\";\n})(ProviderAstType || (ProviderAstType = {}));\n/**\n * Position where content is to be projected (instance of `<ng-content>` in a template).\n */\nvar NgContentAst = /** @class */ (function () {\n    function NgContentAst(index, ngContentIndex, sourceSpan) {\n        this.index = index;\n        this.ngContentIndex = ngContentIndex;\n        this.sourceSpan = sourceSpan;\n    }\n    NgContentAst.prototype.visit = function (visitor, context) {\n        return visitor.visitNgContent(this, context);\n    };\n    return NgContentAst;\n}());\n/**\n * Enumeration of types of property bindings.\n */\nvar PropertyBindingType;\n(function (PropertyBindingType) {\n    /**\n     * A normal binding to a property (e.g. `[property]=\"expression\"`).\n     */\n    PropertyBindingType[PropertyBindingType[\"Property\"] = 0] = \"Property\";\n    /**\n     * A binding to an element attribute (e.g. `[attr.name]=\"expression\"`).\n     */\n    PropertyBindingType[PropertyBindingType[\"Attribute\"] = 1] = \"Attribute\";\n    /**\n     * A binding to a CSS class (e.g. `[class.name]=\"condition\"`).\n     */\n    PropertyBindingType[PropertyBindingType[\"Class\"] = 2] = \"Class\";\n    /**\n     * A binding to a style rule (e.g. `[style.rule]=\"expression\"`).\n     */\n    PropertyBindingType[PropertyBindingType[\"Style\"] = 3] = \"Style\";\n    /**\n     * A binding to an animation reference (e.g. `[animate.key]=\"expression\"`).\n     */\n    PropertyBindingType[PropertyBindingType[\"Animation\"] = 4] = \"Animation\";\n})(PropertyBindingType || (PropertyBindingType = {}));\n/**\n * A visitor that accepts each node but doesn't do anything. It is intended to be used\n * as the base class for a visitor that is only interested in a subset of the node types.\n */\nvar NullTemplateVisitor = /** @class */ (function () {\n    function NullTemplateVisitor() {\n    }\n    NullTemplateVisitor.prototype.visitNgContent = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitEmbeddedTemplate = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitElement = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitReference = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitVariable = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitEvent = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitElementProperty = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitAttr = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitBoundText = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitText = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitDirective = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitDirectiveProperty = function (ast, context) { };\n    return NullTemplateVisitor;\n}());\n/**\n * Base class that can be used to build a visitor that visits each node\n * in an template ast recursively.\n */\nvar RecursiveTemplateAstVisitor = /** @class */ (function (_super) {\n    __extends(RecursiveTemplateAstVisitor, _super);\n    function RecursiveTemplateAstVisitor() {\n        return _super.call(this) || this;\n    }\n    // Nodes with children\n    RecursiveTemplateAstVisitor.prototype.visitEmbeddedTemplate = function (ast, context) {\n        return this.visitChildren(context, function (visit) {\n            visit(ast.attrs);\n            visit(ast.references);\n            visit(ast.variables);\n            visit(ast.directives);\n            visit(ast.providers);\n            visit(ast.children);\n        });\n    };\n    RecursiveTemplateAstVisitor.prototype.visitElement = function (ast, context) {\n        return this.visitChildren(context, function (visit) {\n            visit(ast.attrs);\n            visit(ast.inputs);\n            visit(ast.outputs);\n            visit(ast.references);\n            visit(ast.directives);\n            visit(ast.providers);\n            visit(ast.children);\n        });\n    };\n    RecursiveTemplateAstVisitor.prototype.visitDirective = function (ast, context) {\n        return this.visitChildren(context, function (visit) {\n            visit(ast.inputs);\n            visit(ast.hostProperties);\n            visit(ast.hostEvents);\n        });\n    };\n    RecursiveTemplateAstVisitor.prototype.visitChildren = function (context, cb) {\n        var results = [];\n        var t = this;\n        function visit(children) {\n            if (children && children.length)\n                results.push(templateVisitAll(t, children, context));\n        }\n        cb(visit);\n        return [].concat.apply([], results);\n    };\n    return RecursiveTemplateAstVisitor;\n}(NullTemplateVisitor));\n/**\n * Visit every node in a list of {@link TemplateAst}s with the given {@link TemplateAstVisitor}.\n */\nfunction templateVisitAll(visitor, asts, context) {\n    if (context === void 0) { context = null; }\n    var result = [];\n    var visit = visitor.visit ?\n        function (ast) { return visitor.visit(ast, context) || ast.visit(visitor, context); } :\n        function (ast) { return ast.visit(visitor, context); };\n    asts.forEach(function (ast) {\n        var astResult = visit(ast);\n        if (astResult) {\n            result.push(astResult);\n        }\n    });\n    return result;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar CompilerConfig = /** @class */ (function () {\n    function CompilerConfig(_a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.defaultEncapsulation, defaultEncapsulation = _c === void 0 ? ViewEncapsulation.Emulated : _c, _d = _b.useJit, useJit = _d === void 0 ? true : _d, _e = _b.jitDevMode, jitDevMode = _e === void 0 ? false : _e, _f = _b.missingTranslation, missingTranslation = _f === void 0 ? null : _f, preserveWhitespaces = _b.preserveWhitespaces, strictInjectionParameters = _b.strictInjectionParameters;\n        this.defaultEncapsulation = defaultEncapsulation;\n        this.useJit = !!useJit;\n        this.jitDevMode = !!jitDevMode;\n        this.missingTranslation = missingTranslation;\n        this.preserveWhitespaces = preserveWhitespacesDefault(noUndefined(preserveWhitespaces));\n        this.strictInjectionParameters = strictInjectionParameters === true;\n    }\n    return CompilerConfig;\n}());\nfunction preserveWhitespacesDefault(preserveWhitespacesOption, defaultSetting) {\n    if (defaultSetting === void 0) { defaultSetting = false; }\n    return preserveWhitespacesOption === null ? defaultSetting : preserveWhitespacesOption;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A token representing the a reference to a static type.\n *\n * This token is unique for a filePath and name and can be used as a hash table key.\n */\nvar StaticSymbol = /** @class */ (function () {\n    function StaticSymbol(filePath, name, members) {\n        this.filePath = filePath;\n        this.name = name;\n        this.members = members;\n    }\n    StaticSymbol.prototype.assertNoMembers = function () {\n        if (this.members.length) {\n            throw new Error(\"Illegal state: symbol without members expected, but got \" + JSON.stringify(this) + \".\");\n        }\n    };\n    return StaticSymbol;\n}());\n/**\n * A cache of static symbol used by the StaticReflector to return the same symbol for the\n * same symbol values.\n */\nvar StaticSymbolCache = /** @class */ (function () {\n    function StaticSymbolCache() {\n        this.cache = new Map();\n    }\n    StaticSymbolCache.prototype.get = function (declarationFile, name, members) {\n        members = members || [];\n        var memberSuffix = members.length ? \".\" + members.join('.') : '';\n        var key = \"\\\"\" + declarationFile + \"\\\".\" + name + memberSuffix;\n        var result = this.cache.get(key);\n        if (!result) {\n            result = new StaticSymbol(declarationFile, name, members);\n            this.cache.set(key, result);\n        }\n        return result;\n    };\n    return StaticSymbolCache;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// group 0: \"[prop] or (event) or @trigger\"\n// group 1: \"prop\" from \"[prop]\"\n// group 2: \"event\" from \"(event)\"\n// group 3: \"@trigger\" from \"@trigger\"\nvar HOST_REG_EXP = /^(?:(?:\\[([^\\]]+)\\])|(?:\\(([^\\)]+)\\)))|(\\@[-\\w]+)$/;\nfunction sanitizeIdentifier(name) {\n    return name.replace(/\\W/g, '_');\n}\nvar _anonymousTypeIndex = 0;\nfunction identifierName(compileIdentifier) {\n    if (!compileIdentifier || !compileIdentifier.reference) {\n        return null;\n    }\n    var ref = compileIdentifier.reference;\n    if (ref instanceof StaticSymbol) {\n        return ref.name;\n    }\n    if (ref['__anonymousType']) {\n        return ref['__anonymousType'];\n    }\n    var identifier = stringify(ref);\n    if (identifier.indexOf('(') >= 0) {\n        // case: anonymous functions!\n        identifier = \"anonymous_\" + _anonymousTypeIndex++;\n        ref['__anonymousType'] = identifier;\n    }\n    else {\n        identifier = sanitizeIdentifier(identifier);\n    }\n    return identifier;\n}\n\nfunction viewClassName(compType, embeddedTemplateIndex) {\n    return \"View_\" + identifierName({ reference: compType }) + \"_\" + embeddedTemplateIndex;\n}\nfunction rendererTypeName(compType) {\n    return \"RenderType_\" + identifierName({ reference: compType });\n}\nfunction hostViewClassName(compType) {\n    return \"HostView_\" + identifierName({ reference: compType });\n}\nfunction componentFactoryName(compType) {\n    return identifierName({ reference: compType }) + \"NgFactory\";\n}\nvar CompileSummaryKind;\n(function (CompileSummaryKind) {\n    CompileSummaryKind[CompileSummaryKind[\"Pipe\"] = 0] = \"Pipe\";\n    CompileSummaryKind[CompileSummaryKind[\"Directive\"] = 1] = \"Directive\";\n    CompileSummaryKind[CompileSummaryKind[\"NgModule\"] = 2] = \"NgModule\";\n    CompileSummaryKind[CompileSummaryKind[\"Injectable\"] = 3] = \"Injectable\";\n})(CompileSummaryKind || (CompileSummaryKind = {}));\nfunction tokenName(token) {\n    return token.value != null ? sanitizeIdentifier(token.value) : identifierName(token.identifier);\n}\nfunction tokenReference(token) {\n    if (token.identifier != null) {\n        return token.identifier.reference;\n    }\n    else {\n        return token.value;\n    }\n}\n/**\n * Metadata about a stylesheet\n */\nvar CompileStylesheetMetadata = /** @class */ (function () {\n    function CompileStylesheetMetadata(_a) {\n        var _b = _a === void 0 ? {} : _a, moduleUrl = _b.moduleUrl, styles = _b.styles, styleUrls = _b.styleUrls;\n        this.moduleUrl = moduleUrl || null;\n        this.styles = _normalizeArray(styles);\n        this.styleUrls = _normalizeArray(styleUrls);\n    }\n    return CompileStylesheetMetadata;\n}());\n/**\n * Metadata regarding compilation of a template.\n */\nvar CompileTemplateMetadata = /** @class */ (function () {\n    function CompileTemplateMetadata(_a) {\n        var encapsulation = _a.encapsulation, template = _a.template, templateUrl = _a.templateUrl, htmlAst = _a.htmlAst, styles = _a.styles, styleUrls = _a.styleUrls, externalStylesheets = _a.externalStylesheets, animations = _a.animations, ngContentSelectors = _a.ngContentSelectors, interpolation = _a.interpolation, isInline = _a.isInline, preserveWhitespaces = _a.preserveWhitespaces;\n        this.encapsulation = encapsulation;\n        this.template = template;\n        this.templateUrl = templateUrl;\n        this.htmlAst = htmlAst;\n        this.styles = _normalizeArray(styles);\n        this.styleUrls = _normalizeArray(styleUrls);\n        this.externalStylesheets = _normalizeArray(externalStylesheets);\n        this.animations = animations ? flatten(animations) : [];\n        this.ngContentSelectors = ngContentSelectors || [];\n        if (interpolation && interpolation.length != 2) {\n            throw new Error(\"'interpolation' should have a start and an end symbol.\");\n        }\n        this.interpolation = interpolation;\n        this.isInline = isInline;\n        this.preserveWhitespaces = preserveWhitespaces;\n    }\n    CompileTemplateMetadata.prototype.toSummary = function () {\n        return {\n            ngContentSelectors: this.ngContentSelectors,\n            encapsulation: this.encapsulation,\n        };\n    };\n    return CompileTemplateMetadata;\n}());\n/**\n * Metadata regarding compilation of a directive.\n */\nvar CompileDirectiveMetadata = /** @class */ (function () {\n    function CompileDirectiveMetadata(_a) {\n        var isHost = _a.isHost, type = _a.type, isComponent = _a.isComponent, selector = _a.selector, exportAs = _a.exportAs, changeDetection = _a.changeDetection, inputs = _a.inputs, outputs = _a.outputs, hostListeners = _a.hostListeners, hostProperties = _a.hostProperties, hostAttributes = _a.hostAttributes, providers = _a.providers, viewProviders = _a.viewProviders, queries = _a.queries, guards = _a.guards, viewQueries = _a.viewQueries, entryComponents = _a.entryComponents, template = _a.template, componentViewType = _a.componentViewType, rendererType = _a.rendererType, componentFactory = _a.componentFactory;\n        this.isHost = !!isHost;\n        this.type = type;\n        this.isComponent = isComponent;\n        this.selector = selector;\n        this.exportAs = exportAs;\n        this.changeDetection = changeDetection;\n        this.inputs = inputs;\n        this.outputs = outputs;\n        this.hostListeners = hostListeners;\n        this.hostProperties = hostProperties;\n        this.hostAttributes = hostAttributes;\n        this.providers = _normalizeArray(providers);\n        this.viewProviders = _normalizeArray(viewProviders);\n        this.queries = _normalizeArray(queries);\n        this.guards = guards;\n        this.viewQueries = _normalizeArray(viewQueries);\n        this.entryComponents = _normalizeArray(entryComponents);\n        this.template = template;\n        this.componentViewType = componentViewType;\n        this.rendererType = rendererType;\n        this.componentFactory = componentFactory;\n    }\n    CompileDirectiveMetadata.create = function (_a) {\n        var isHost = _a.isHost, type = _a.type, isComponent = _a.isComponent, selector = _a.selector, exportAs = _a.exportAs, changeDetection = _a.changeDetection, inputs = _a.inputs, outputs = _a.outputs, host = _a.host, providers = _a.providers, viewProviders = _a.viewProviders, queries = _a.queries, guards = _a.guards, viewQueries = _a.viewQueries, entryComponents = _a.entryComponents, template = _a.template, componentViewType = _a.componentViewType, rendererType = _a.rendererType, componentFactory = _a.componentFactory;\n        var hostListeners = {};\n        var hostProperties = {};\n        var hostAttributes = {};\n        if (host != null) {\n            Object.keys(host).forEach(function (key) {\n                var value = host[key];\n                var matches = key.match(HOST_REG_EXP);\n                if (matches === null) {\n                    hostAttributes[key] = value;\n                }\n                else if (matches[1] != null) {\n                    hostProperties[matches[1]] = value;\n                }\n                else if (matches[2] != null) {\n                    hostListeners[matches[2]] = value;\n                }\n            });\n        }\n        var inputsMap = {};\n        if (inputs != null) {\n            inputs.forEach(function (bindConfig) {\n                // canonical syntax: `dirProp: elProp`\n                // if there is no `:`, use dirProp = elProp\n                var parts = splitAtColon(bindConfig, [bindConfig, bindConfig]);\n                inputsMap[parts[0]] = parts[1];\n            });\n        }\n        var outputsMap = {};\n        if (outputs != null) {\n            outputs.forEach(function (bindConfig) {\n                // canonical syntax: `dirProp: elProp`\n                // if there is no `:`, use dirProp = elProp\n                var parts = splitAtColon(bindConfig, [bindConfig, bindConfig]);\n                outputsMap[parts[0]] = parts[1];\n            });\n        }\n        return new CompileDirectiveMetadata({\n            isHost: isHost,\n            type: type,\n            isComponent: !!isComponent, selector: selector, exportAs: exportAs, changeDetection: changeDetection,\n            inputs: inputsMap,\n            outputs: outputsMap,\n            hostListeners: hostListeners,\n            hostProperties: hostProperties,\n            hostAttributes: hostAttributes,\n            providers: providers,\n            viewProviders: viewProviders,\n            queries: queries,\n            guards: guards,\n            viewQueries: viewQueries,\n            entryComponents: entryComponents,\n            template: template,\n            componentViewType: componentViewType,\n            rendererType: rendererType,\n            componentFactory: componentFactory,\n        });\n    };\n    CompileDirectiveMetadata.prototype.toSummary = function () {\n        return {\n            summaryKind: CompileSummaryKind.Directive,\n            type: this.type,\n            isComponent: this.isComponent,\n            selector: this.selector,\n            exportAs: this.exportAs,\n            inputs: this.inputs,\n            outputs: this.outputs,\n            hostListeners: this.hostListeners,\n            hostProperties: this.hostProperties,\n            hostAttributes: this.hostAttributes,\n            providers: this.providers,\n            viewProviders: this.viewProviders,\n            queries: this.queries,\n            guards: this.guards,\n            viewQueries: this.viewQueries,\n            entryComponents: this.entryComponents,\n            changeDetection: this.changeDetection,\n            template: this.template && this.template.toSummary(),\n            componentViewType: this.componentViewType,\n            rendererType: this.rendererType,\n            componentFactory: this.componentFactory\n        };\n    };\n    return CompileDirectiveMetadata;\n}());\nvar CompilePipeMetadata = /** @class */ (function () {\n    function CompilePipeMetadata(_a) {\n        var type = _a.type, name = _a.name, pure = _a.pure;\n        this.type = type;\n        this.name = name;\n        this.pure = !!pure;\n    }\n    CompilePipeMetadata.prototype.toSummary = function () {\n        return {\n            summaryKind: CompileSummaryKind.Pipe,\n            type: this.type,\n            name: this.name,\n            pure: this.pure\n        };\n    };\n    return CompilePipeMetadata;\n}());\n/**\n * Metadata regarding compilation of a module.\n */\nvar CompileNgModuleMetadata = /** @class */ (function () {\n    function CompileNgModuleMetadata(_a) {\n        var type = _a.type, providers = _a.providers, declaredDirectives = _a.declaredDirectives, exportedDirectives = _a.exportedDirectives, declaredPipes = _a.declaredPipes, exportedPipes = _a.exportedPipes, entryComponents = _a.entryComponents, bootstrapComponents = _a.bootstrapComponents, importedModules = _a.importedModules, exportedModules = _a.exportedModules, schemas = _a.schemas, transitiveModule = _a.transitiveModule, id = _a.id;\n        this.type = type || null;\n        this.declaredDirectives = _normalizeArray(declaredDirectives);\n        this.exportedDirectives = _normalizeArray(exportedDirectives);\n        this.declaredPipes = _normalizeArray(declaredPipes);\n        this.exportedPipes = _normalizeArray(exportedPipes);\n        this.providers = _normalizeArray(providers);\n        this.entryComponents = _normalizeArray(entryComponents);\n        this.bootstrapComponents = _normalizeArray(bootstrapComponents);\n        this.importedModules = _normalizeArray(importedModules);\n        this.exportedModules = _normalizeArray(exportedModules);\n        this.schemas = _normalizeArray(schemas);\n        this.id = id || null;\n        this.transitiveModule = transitiveModule || null;\n    }\n    CompileNgModuleMetadata.prototype.toSummary = function () {\n        var module = this.transitiveModule;\n        return {\n            summaryKind: CompileSummaryKind.NgModule,\n            type: this.type,\n            entryComponents: module.entryComponents,\n            providers: module.providers,\n            modules: module.modules,\n            exportedDirectives: module.exportedDirectives,\n            exportedPipes: module.exportedPipes\n        };\n    };\n    return CompileNgModuleMetadata;\n}());\nvar TransitiveCompileNgModuleMetadata = /** @class */ (function () {\n    function TransitiveCompileNgModuleMetadata() {\n        this.directivesSet = new Set();\n        this.directives = [];\n        this.exportedDirectivesSet = new Set();\n        this.exportedDirectives = [];\n        this.pipesSet = new Set();\n        this.pipes = [];\n        this.exportedPipesSet = new Set();\n        this.exportedPipes = [];\n        this.modulesSet = new Set();\n        this.modules = [];\n        this.entryComponentsSet = new Set();\n        this.entryComponents = [];\n        this.providers = [];\n    }\n    TransitiveCompileNgModuleMetadata.prototype.addProvider = function (provider, module) {\n        this.providers.push({ provider: provider, module: module });\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addDirective = function (id) {\n        if (!this.directivesSet.has(id.reference)) {\n            this.directivesSet.add(id.reference);\n            this.directives.push(id);\n        }\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addExportedDirective = function (id) {\n        if (!this.exportedDirectivesSet.has(id.reference)) {\n            this.exportedDirectivesSet.add(id.reference);\n            this.exportedDirectives.push(id);\n        }\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addPipe = function (id) {\n        if (!this.pipesSet.has(id.reference)) {\n            this.pipesSet.add(id.reference);\n            this.pipes.push(id);\n        }\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addExportedPipe = function (id) {\n        if (!this.exportedPipesSet.has(id.reference)) {\n            this.exportedPipesSet.add(id.reference);\n            this.exportedPipes.push(id);\n        }\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addModule = function (id) {\n        if (!this.modulesSet.has(id.reference)) {\n            this.modulesSet.add(id.reference);\n            this.modules.push(id);\n        }\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addEntryComponent = function (ec) {\n        if (!this.entryComponentsSet.has(ec.componentType)) {\n            this.entryComponentsSet.add(ec.componentType);\n            this.entryComponents.push(ec);\n        }\n    };\n    return TransitiveCompileNgModuleMetadata;\n}());\nfunction _normalizeArray(obj) {\n    return obj || [];\n}\nvar ProviderMeta = /** @class */ (function () {\n    function ProviderMeta(token, _a) {\n        var useClass = _a.useClass, useValue = _a.useValue, useExisting = _a.useExisting, useFactory = _a.useFactory, deps = _a.deps, multi = _a.multi;\n        this.token = token;\n        this.useClass = useClass || null;\n        this.useValue = useValue;\n        this.useExisting = useExisting;\n        this.useFactory = useFactory || null;\n        this.dependencies = deps || null;\n        this.multi = !!multi;\n    }\n    return ProviderMeta;\n}());\nfunction flatten(list) {\n    return list.reduce(function (flat, item) {\n        var flatItem = Array.isArray(item) ? flatten(item) : item;\n        return flat.concat(flatItem);\n    }, []);\n}\nfunction jitSourceUrl(url) {\n    // Note: We need 3 \"/\" so that ng shows up as a separate domain\n    // in the chrome dev tools.\n    return url.replace(/(\\w+:\\/\\/[\\w:-]+)?(\\/+)?/, 'ng:///');\n}\nfunction templateSourceUrl(ngModuleType, compMeta, templateMeta) {\n    var url;\n    if (templateMeta.isInline) {\n        if (compMeta.type.reference instanceof StaticSymbol) {\n            // Note: a .ts file might contain multiple components with inline templates,\n            // so we need to give them unique urls, as these will be used for sourcemaps.\n            url = compMeta.type.reference.filePath + \".\" + compMeta.type.reference.name + \".html\";\n        }\n        else {\n            url = identifierName(ngModuleType) + \"/\" + identifierName(compMeta.type) + \".html\";\n        }\n    }\n    else {\n        url = templateMeta.templateUrl;\n    }\n    return compMeta.type.reference instanceof StaticSymbol ? url : jitSourceUrl(url);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A path is an ordered set of elements. Typically a path is to  a\n * particular offset in a source file. The head of the list is the top\n * most node. The tail is the node that contains the offset directly.\n *\n * For example, the expression `a + b + c` might have an ast that looks\n * like:\n *     +\n *    / \\\n *   a   +\n *      / \\\n *     b   c\n *\n * The path to the node at offset 9 would be `['+' at 1-10, '+' at 7-10,\n * 'c' at 9-10]` and the path the node at offset 1 would be\n * `['+' at 1-10, 'a' at 1-2]`.\n */\nvar AstPath = /** @class */ (function () {\n    function AstPath(path$$1, position) {\n        if (position === void 0) { position = -1; }\n        this.path = path$$1;\n        this.position = position;\n    }\n    Object.defineProperty(AstPath.prototype, \"empty\", {\n        get: function () { return !this.path || !this.path.length; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AstPath.prototype, \"head\", {\n        get: function () { return this.path[0]; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AstPath.prototype, \"tail\", {\n        get: function () { return this.path[this.path.length - 1]; },\n        enumerable: true,\n        configurable: true\n    });\n    AstPath.prototype.parentOf = function (node) {\n        return node && this.path[this.path.indexOf(node) - 1];\n    };\n    AstPath.prototype.childOf = function (node) { return this.path[this.path.indexOf(node) + 1]; };\n    AstPath.prototype.first = function (ctor) {\n        for (var i = this.path.length - 1; i >= 0; i--) {\n            var item = this.path[i];\n            if (item instanceof ctor)\n                return item;\n        }\n    };\n    AstPath.prototype.push = function (node) { this.path.push(node); };\n    AstPath.prototype.pop = function () { return this.path.pop(); };\n    return AstPath;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Text = /** @class */ (function () {\n    function Text(value, sourceSpan) {\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    Text.prototype.visit = function (visitor, context) { return visitor.visitText(this, context); };\n    return Text;\n}());\nvar Expansion = /** @class */ (function () {\n    function Expansion(switchValue, type, cases, sourceSpan, switchValueSourceSpan) {\n        this.switchValue = switchValue;\n        this.type = type;\n        this.cases = cases;\n        this.sourceSpan = sourceSpan;\n        this.switchValueSourceSpan = switchValueSourceSpan;\n    }\n    Expansion.prototype.visit = function (visitor, context) { return visitor.visitExpansion(this, context); };\n    return Expansion;\n}());\nvar ExpansionCase = /** @class */ (function () {\n    function ExpansionCase(value, expression, sourceSpan, valueSourceSpan, expSourceSpan) {\n        this.value = value;\n        this.expression = expression;\n        this.sourceSpan = sourceSpan;\n        this.valueSourceSpan = valueSourceSpan;\n        this.expSourceSpan = expSourceSpan;\n    }\n    ExpansionCase.prototype.visit = function (visitor, context) { return visitor.visitExpansionCase(this, context); };\n    return ExpansionCase;\n}());\nvar Attribute = /** @class */ (function () {\n    function Attribute(name, value, sourceSpan, valueSpan) {\n        this.name = name;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n        this.valueSpan = valueSpan;\n    }\n    Attribute.prototype.visit = function (visitor, context) { return visitor.visitAttribute(this, context); };\n    return Attribute;\n}());\nvar Element = /** @class */ (function () {\n    function Element(name, attrs, children, sourceSpan, startSourceSpan, endSourceSpan) {\n        if (startSourceSpan === void 0) { startSourceSpan = null; }\n        if (endSourceSpan === void 0) { endSourceSpan = null; }\n        this.name = name;\n        this.attrs = attrs;\n        this.children = children;\n        this.sourceSpan = sourceSpan;\n        this.startSourceSpan = startSourceSpan;\n        this.endSourceSpan = endSourceSpan;\n    }\n    Element.prototype.visit = function (visitor, context) { return visitor.visitElement(this, context); };\n    return Element;\n}());\nvar Comment = /** @class */ (function () {\n    function Comment(value, sourceSpan) {\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    Comment.prototype.visit = function (visitor, context) { return visitor.visitComment(this, context); };\n    return Comment;\n}());\nfunction visitAll(visitor, nodes, context) {\n    if (context === void 0) { context = null; }\n    var result = [];\n    var visit = visitor.visit ?\n        function (ast) { return visitor.visit(ast, context) || ast.visit(visitor, context); } :\n        function (ast) { return ast.visit(visitor, context); };\n    nodes.forEach(function (ast) {\n        var astResult = visit(ast);\n        if (astResult) {\n            result.push(astResult);\n        }\n    });\n    return result;\n}\nvar RecursiveVisitor = /** @class */ (function () {\n    function RecursiveVisitor() {\n    }\n    RecursiveVisitor.prototype.visitElement = function (ast, context) {\n        this.visitChildren(context, function (visit) {\n            visit(ast.attrs);\n            visit(ast.children);\n        });\n    };\n    RecursiveVisitor.prototype.visitAttribute = function (ast, context) { };\n    RecursiveVisitor.prototype.visitText = function (ast, context) { };\n    RecursiveVisitor.prototype.visitComment = function (ast, context) { };\n    RecursiveVisitor.prototype.visitExpansion = function (ast, context) {\n        return this.visitChildren(context, function (visit) { visit(ast.cases); });\n    };\n    RecursiveVisitor.prototype.visitExpansionCase = function (ast, context) { };\n    RecursiveVisitor.prototype.visitChildren = function (context, cb) {\n        var results = [];\n        var t = this;\n        function visit(children) {\n            if (children)\n                results.push(visitAll(t, children, context));\n        }\n        cb(visit);\n        return [].concat.apply([], results);\n    };\n    return RecursiveVisitor;\n}());\nfunction spanOf(ast) {\n    var start = ast.sourceSpan.start.offset;\n    var end = ast.sourceSpan.end.offset;\n    if (ast instanceof Element) {\n        if (ast.endSourceSpan) {\n            end = ast.endSourceSpan.end.offset;\n        }\n        else if (ast.children && ast.children.length) {\n            end = spanOf(ast.children[ast.children.length - 1]).end;\n        }\n    }\n    return { start: start, end: end };\n}\nfunction findNode(nodes, position) {\n    var path$$1 = [];\n    var visitor = new /** @class */ (function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.visit = function (ast, context) {\n            var span = spanOf(ast);\n            if (span.start <= position && position < span.end) {\n                path$$1.push(ast);\n            }\n            else {\n                // Returning a value here will result in the children being skipped.\n                return true;\n            }\n        };\n        return class_1;\n    }(RecursiveVisitor));\n    visitAll(visitor, nodes);\n    return new AstPath(path$$1, position);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction assertArrayOfStrings(identifier, value) {\n    if (value == null) {\n        return;\n    }\n    if (!Array.isArray(value)) {\n        throw new Error(\"Expected '\" + identifier + \"' to be an array of strings.\");\n    }\n    for (var i = 0; i < value.length; i += 1) {\n        if (typeof value[i] !== 'string') {\n            throw new Error(\"Expected '\" + identifier + \"' to be an array of strings.\");\n        }\n    }\n}\nvar INTERPOLATION_BLACKLIST_REGEXPS = [\n    /^\\s*$/,\n    /[<>]/,\n    /^[{}]$/,\n    /&(#|[a-z])/i,\n    /^\\/\\//,\n];\nfunction assertInterpolationSymbols(identifier, value) {\n    if (value != null && !(Array.isArray(value) && value.length == 2)) {\n        throw new Error(\"Expected '\" + identifier + \"' to be an array, [start, end].\");\n    }\n    else if (value != null) {\n        var start_1 = value[0];\n        var end_1 = value[1];\n        // black list checking\n        INTERPOLATION_BLACKLIST_REGEXPS.forEach(function (regexp) {\n            if (regexp.test(start_1) || regexp.test(end_1)) {\n                throw new Error(\"['\" + start_1 + \"', '\" + end_1 + \"'] contains unusable interpolation symbol.\");\n            }\n        });\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar InterpolationConfig = /** @class */ (function () {\n    function InterpolationConfig(start, end) {\n        this.start = start;\n        this.end = end;\n    }\n    InterpolationConfig.fromArray = function (markers) {\n        if (!markers) {\n            return DEFAULT_INTERPOLATION_CONFIG;\n        }\n        assertInterpolationSymbols('interpolation', markers);\n        return new InterpolationConfig(markers[0], markers[1]);\n    };\n    return InterpolationConfig;\n}());\nvar DEFAULT_INTERPOLATION_CONFIG = new InterpolationConfig('{{', '}}');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar StyleWithImports = /** @class */ (function () {\n    function StyleWithImports(style, styleUrls) {\n        this.style = style;\n        this.styleUrls = styleUrls;\n    }\n    return StyleWithImports;\n}());\nfunction isStyleUrlResolvable(url) {\n    if (url == null || url.length === 0 || url[0] == '/')\n        return false;\n    var schemeMatch = url.match(URL_WITH_SCHEMA_REGEXP);\n    return schemeMatch === null || schemeMatch[1] == 'package' || schemeMatch[1] == 'asset';\n}\n/**\n * Rewrites stylesheets by resolving and removing the @import urls that\n * are either relative or don't have a `package:` scheme\n */\nfunction extractStyleUrls(resolver, baseUrl, cssText) {\n    var foundUrls = [];\n    var modifiedCssText = cssText.replace(CSS_STRIPPABLE_COMMENT_REGEXP, '')\n        .replace(CSS_IMPORT_REGEXP, function () {\n        var m = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            m[_i] = arguments[_i];\n        }\n        var url = m[1] || m[2];\n        if (!isStyleUrlResolvable(url)) {\n            // Do not attempt to resolve non-package absolute URLs with URI\n            // scheme\n            return m[0];\n        }\n        foundUrls.push(resolver.resolve(baseUrl, url));\n        return '';\n    });\n    return new StyleWithImports(modifiedCssText, foundUrls);\n}\nvar CSS_IMPORT_REGEXP = /@import\\s+(?:url\\()?\\s*(?:(?:['\"]([^'\"]*))|([^;\\)\\s]*))[^;]*;?/g;\nvar CSS_STRIPPABLE_COMMENT_REGEXP = /\\/\\*(?!#\\s*(?:sourceURL|sourceMappingURL)=)[\\s\\S]+?\\*\\//g;\nvar URL_WITH_SCHEMA_REGEXP = /^([^:/?#]+):/;\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TagContentType;\n(function (TagContentType) {\n    TagContentType[TagContentType[\"RAW_TEXT\"] = 0] = \"RAW_TEXT\";\n    TagContentType[TagContentType[\"ESCAPABLE_RAW_TEXT\"] = 1] = \"ESCAPABLE_RAW_TEXT\";\n    TagContentType[TagContentType[\"PARSABLE_DATA\"] = 2] = \"PARSABLE_DATA\";\n})(TagContentType || (TagContentType = {}));\nfunction splitNsName(elementName) {\n    if (elementName[0] != ':') {\n        return [null, elementName];\n    }\n    var colonIndex = elementName.indexOf(':', 1);\n    if (colonIndex == -1) {\n        throw new Error(\"Unsupported format \\\"\" + elementName + \"\\\" expecting \\\":namespace:name\\\"\");\n    }\n    return [elementName.slice(1, colonIndex), elementName.slice(colonIndex + 1)];\n}\n// `<ng-container>` tags work the same regardless the namespace\nfunction isNgContainer(tagName) {\n    return splitNsName(tagName)[1] === 'ng-container';\n}\n// `<ng-content>` tags work the same regardless the namespace\nfunction isNgContent(tagName) {\n    return splitNsName(tagName)[1] === 'ng-content';\n}\n// `<ng-template>` tags work the same regardless the namespace\nfunction isNgTemplate(tagName) {\n    return splitNsName(tagName)[1] === 'ng-template';\n}\nfunction getNsPrefix(fullName) {\n    return fullName === null ? null : splitNsName(fullName)[0];\n}\nfunction mergeNsAndName(prefix, localName) {\n    return prefix ? \":\" + prefix + \":\" + localName : localName;\n}\n// see http://www.w3.org/TR/html51/syntax.html#named-character-references\n// see https://html.spec.whatwg.org/multipage/entities.json\n// This list is not exhaustive to keep the compiler footprint low.\n// The `&#123;` / `&#x1ab;` syntax should be used when the named character reference does not\n// exist.\nvar NAMED_ENTITIES = {\n    'Aacute': '\\u00C1',\n    'aacute': '\\u00E1',\n    'Acirc': '\\u00C2',\n    'acirc': '\\u00E2',\n    'acute': '\\u00B4',\n    'AElig': '\\u00C6',\n    'aelig': '\\u00E6',\n    'Agrave': '\\u00C0',\n    'agrave': '\\u00E0',\n    'alefsym': '\\u2135',\n    'Alpha': '\\u0391',\n    'alpha': '\\u03B1',\n    'amp': '&',\n    'and': '\\u2227',\n    'ang': '\\u2220',\n    'apos': '\\u0027',\n    'Aring': '\\u00C5',\n    'aring': '\\u00E5',\n    'asymp': '\\u2248',\n    'Atilde': '\\u00C3',\n    'atilde': '\\u00E3',\n    'Auml': '\\u00C4',\n    'auml': '\\u00E4',\n    'bdquo': '\\u201E',\n    'Beta': '\\u0392',\n    'beta': '\\u03B2',\n    'brvbar': '\\u00A6',\n    'bull': '\\u2022',\n    'cap': '\\u2229',\n    'Ccedil': '\\u00C7',\n    'ccedil': '\\u00E7',\n    'cedil': '\\u00B8',\n    'cent': '\\u00A2',\n    'Chi': '\\u03A7',\n    'chi': '\\u03C7',\n    'circ': '\\u02C6',\n    'clubs': '\\u2663',\n    'cong': '\\u2245',\n    'copy': '\\u00A9',\n    'crarr': '\\u21B5',\n    'cup': '\\u222A',\n    'curren': '\\u00A4',\n    'dagger': '\\u2020',\n    'Dagger': '\\u2021',\n    'darr': '\\u2193',\n    'dArr': '\\u21D3',\n    'deg': '\\u00B0',\n    'Delta': '\\u0394',\n    'delta': '\\u03B4',\n    'diams': '\\u2666',\n    'divide': '\\u00F7',\n    'Eacute': '\\u00C9',\n    'eacute': '\\u00E9',\n    'Ecirc': '\\u00CA',\n    'ecirc': '\\u00EA',\n    'Egrave': '\\u00C8',\n    'egrave': '\\u00E8',\n    'empty': '\\u2205',\n    'emsp': '\\u2003',\n    'ensp': '\\u2002',\n    'Epsilon': '\\u0395',\n    'epsilon': '\\u03B5',\n    'equiv': '\\u2261',\n    'Eta': '\\u0397',\n    'eta': '\\u03B7',\n    'ETH': '\\u00D0',\n    'eth': '\\u00F0',\n    'Euml': '\\u00CB',\n    'euml': '\\u00EB',\n    'euro': '\\u20AC',\n    'exist': '\\u2203',\n    'fnof': '\\u0192',\n    'forall': '\\u2200',\n    'frac12': '\\u00BD',\n    'frac14': '\\u00BC',\n    'frac34': '\\u00BE',\n    'frasl': '\\u2044',\n    'Gamma': '\\u0393',\n    'gamma': '\\u03B3',\n    'ge': '\\u2265',\n    'gt': '>',\n    'harr': '\\u2194',\n    'hArr': '\\u21D4',\n    'hearts': '\\u2665',\n    'hellip': '\\u2026',\n    'Iacute': '\\u00CD',\n    'iacute': '\\u00ED',\n    'Icirc': '\\u00CE',\n    'icirc': '\\u00EE',\n    'iexcl': '\\u00A1',\n    'Igrave': '\\u00CC',\n    'igrave': '\\u00EC',\n    'image': '\\u2111',\n    'infin': '\\u221E',\n    'int': '\\u222B',\n    'Iota': '\\u0399',\n    'iota': '\\u03B9',\n    'iquest': '\\u00BF',\n    'isin': '\\u2208',\n    'Iuml': '\\u00CF',\n    'iuml': '\\u00EF',\n    'Kappa': '\\u039A',\n    'kappa': '\\u03BA',\n    'Lambda': '\\u039B',\n    'lambda': '\\u03BB',\n    'lang': '\\u27E8',\n    'laquo': '\\u00AB',\n    'larr': '\\u2190',\n    'lArr': '\\u21D0',\n    'lceil': '\\u2308',\n    'ldquo': '\\u201C',\n    'le': '\\u2264',\n    'lfloor': '\\u230A',\n    'lowast': '\\u2217',\n    'loz': '\\u25CA',\n    'lrm': '\\u200E',\n    'lsaquo': '\\u2039',\n    'lsquo': '\\u2018',\n    'lt': '<',\n    'macr': '\\u00AF',\n    'mdash': '\\u2014',\n    'micro': '\\u00B5',\n    'middot': '\\u00B7',\n    'minus': '\\u2212',\n    'Mu': '\\u039C',\n    'mu': '\\u03BC',\n    'nabla': '\\u2207',\n    'nbsp': '\\u00A0',\n    'ndash': '\\u2013',\n    'ne': '\\u2260',\n    'ni': '\\u220B',\n    'not': '\\u00AC',\n    'notin': '\\u2209',\n    'nsub': '\\u2284',\n    'Ntilde': '\\u00D1',\n    'ntilde': '\\u00F1',\n    'Nu': '\\u039D',\n    'nu': '\\u03BD',\n    'Oacute': '\\u00D3',\n    'oacute': '\\u00F3',\n    'Ocirc': '\\u00D4',\n    'ocirc': '\\u00F4',\n    'OElig': '\\u0152',\n    'oelig': '\\u0153',\n    'Ograve': '\\u00D2',\n    'ograve': '\\u00F2',\n    'oline': '\\u203E',\n    'Omega': '\\u03A9',\n    'omega': '\\u03C9',\n    'Omicron': '\\u039F',\n    'omicron': '\\u03BF',\n    'oplus': '\\u2295',\n    'or': '\\u2228',\n    'ordf': '\\u00AA',\n    'ordm': '\\u00BA',\n    'Oslash': '\\u00D8',\n    'oslash': '\\u00F8',\n    'Otilde': '\\u00D5',\n    'otilde': '\\u00F5',\n    'otimes': '\\u2297',\n    'Ouml': '\\u00D6',\n    'ouml': '\\u00F6',\n    'para': '\\u00B6',\n    'permil': '\\u2030',\n    'perp': '\\u22A5',\n    'Phi': '\\u03A6',\n    'phi': '\\u03C6',\n    'Pi': '\\u03A0',\n    'pi': '\\u03C0',\n    'piv': '\\u03D6',\n    'plusmn': '\\u00B1',\n    'pound': '\\u00A3',\n    'prime': '\\u2032',\n    'Prime': '\\u2033',\n    'prod': '\\u220F',\n    'prop': '\\u221D',\n    'Psi': '\\u03A8',\n    'psi': '\\u03C8',\n    'quot': '\\u0022',\n    'radic': '\\u221A',\n    'rang': '\\u27E9',\n    'raquo': '\\u00BB',\n    'rarr': '\\u2192',\n    'rArr': '\\u21D2',\n    'rceil': '\\u2309',\n    'rdquo': '\\u201D',\n    'real': '\\u211C',\n    'reg': '\\u00AE',\n    'rfloor': '\\u230B',\n    'Rho': '\\u03A1',\n    'rho': '\\u03C1',\n    'rlm': '\\u200F',\n    'rsaquo': '\\u203A',\n    'rsquo': '\\u2019',\n    'sbquo': '\\u201A',\n    'Scaron': '\\u0160',\n    'scaron': '\\u0161',\n    'sdot': '\\u22C5',\n    'sect': '\\u00A7',\n    'shy': '\\u00AD',\n    'Sigma': '\\u03A3',\n    'sigma': '\\u03C3',\n    'sigmaf': '\\u03C2',\n    'sim': '\\u223C',\n    'spades': '\\u2660',\n    'sub': '\\u2282',\n    'sube': '\\u2286',\n    'sum': '\\u2211',\n    'sup': '\\u2283',\n    'sup1': '\\u00B9',\n    'sup2': '\\u00B2',\n    'sup3': '\\u00B3',\n    'supe': '\\u2287',\n    'szlig': '\\u00DF',\n    'Tau': '\\u03A4',\n    'tau': '\\u03C4',\n    'there4': '\\u2234',\n    'Theta': '\\u0398',\n    'theta': '\\u03B8',\n    'thetasym': '\\u03D1',\n    'thinsp': '\\u2009',\n    'THORN': '\\u00DE',\n    'thorn': '\\u00FE',\n    'tilde': '\\u02DC',\n    'times': '\\u00D7',\n    'trade': '\\u2122',\n    'Uacute': '\\u00DA',\n    'uacute': '\\u00FA',\n    'uarr': '\\u2191',\n    'uArr': '\\u21D1',\n    'Ucirc': '\\u00DB',\n    'ucirc': '\\u00FB',\n    'Ugrave': '\\u00D9',\n    'ugrave': '\\u00F9',\n    'uml': '\\u00A8',\n    'upsih': '\\u03D2',\n    'Upsilon': '\\u03A5',\n    'upsilon': '\\u03C5',\n    'Uuml': '\\u00DC',\n    'uuml': '\\u00FC',\n    'weierp': '\\u2118',\n    'Xi': '\\u039E',\n    'xi': '\\u03BE',\n    'Yacute': '\\u00DD',\n    'yacute': '\\u00FD',\n    'yen': '\\u00A5',\n    'yuml': '\\u00FF',\n    'Yuml': '\\u0178',\n    'Zeta': '\\u0396',\n    'zeta': '\\u03B6',\n    'zwj': '\\u200D',\n    'zwnj': '\\u200C',\n};\n// The &ngsp; pseudo-entity is denoting a space. see:\n// https://github.com/dart-lang/angular/blob/0bb611387d29d65b5af7f9d2515ab571fd3fbee4/_tests/test/compiler/preserve_whitespace_test.dart\nvar NGSP_UNICODE = '\\uE500';\nNAMED_ENTITIES['ngsp'] = NGSP_UNICODE;\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar NG_CONTENT_SELECT_ATTR = 'select';\nvar LINK_ELEMENT = 'link';\nvar LINK_STYLE_REL_ATTR = 'rel';\nvar LINK_STYLE_HREF_ATTR = 'href';\nvar LINK_STYLE_REL_VALUE = 'stylesheet';\nvar STYLE_ELEMENT = 'style';\nvar SCRIPT_ELEMENT = 'script';\nvar NG_NON_BINDABLE_ATTR = 'ngNonBindable';\nvar NG_PROJECT_AS = 'ngProjectAs';\nfunction preparseElement(ast) {\n    var selectAttr = null;\n    var hrefAttr = null;\n    var relAttr = null;\n    var nonBindable = false;\n    var projectAs = null;\n    ast.attrs.forEach(function (attr) {\n        var lcAttrName = attr.name.toLowerCase();\n        if (lcAttrName == NG_CONTENT_SELECT_ATTR) {\n            selectAttr = attr.value;\n        }\n        else if (lcAttrName == LINK_STYLE_HREF_ATTR) {\n            hrefAttr = attr.value;\n        }\n        else if (lcAttrName == LINK_STYLE_REL_ATTR) {\n            relAttr = attr.value;\n        }\n        else if (attr.name == NG_NON_BINDABLE_ATTR) {\n            nonBindable = true;\n        }\n        else if (attr.name == NG_PROJECT_AS) {\n            if (attr.value.length > 0) {\n                projectAs = attr.value;\n            }\n        }\n    });\n    selectAttr = normalizeNgContentSelect(selectAttr);\n    var nodeName = ast.name.toLowerCase();\n    var type = PreparsedElementType.OTHER;\n    if (isNgContent(nodeName)) {\n        type = PreparsedElementType.NG_CONTENT;\n    }\n    else if (nodeName == STYLE_ELEMENT) {\n        type = PreparsedElementType.STYLE;\n    }\n    else if (nodeName == SCRIPT_ELEMENT) {\n        type = PreparsedElementType.SCRIPT;\n    }\n    else if (nodeName == LINK_ELEMENT && relAttr == LINK_STYLE_REL_VALUE) {\n        type = PreparsedElementType.STYLESHEET;\n    }\n    return new PreparsedElement(type, selectAttr, hrefAttr, nonBindable, projectAs);\n}\nvar PreparsedElementType;\n(function (PreparsedElementType) {\n    PreparsedElementType[PreparsedElementType[\"NG_CONTENT\"] = 0] = \"NG_CONTENT\";\n    PreparsedElementType[PreparsedElementType[\"STYLE\"] = 1] = \"STYLE\";\n    PreparsedElementType[PreparsedElementType[\"STYLESHEET\"] = 2] = \"STYLESHEET\";\n    PreparsedElementType[PreparsedElementType[\"SCRIPT\"] = 3] = \"SCRIPT\";\n    PreparsedElementType[PreparsedElementType[\"OTHER\"] = 4] = \"OTHER\";\n})(PreparsedElementType || (PreparsedElementType = {}));\nvar PreparsedElement = /** @class */ (function () {\n    function PreparsedElement(type, selectAttr, hrefAttr, nonBindable, projectAs) {\n        this.type = type;\n        this.selectAttr = selectAttr;\n        this.hrefAttr = hrefAttr;\n        this.nonBindable = nonBindable;\n        this.projectAs = projectAs;\n    }\n    return PreparsedElement;\n}());\nfunction normalizeNgContentSelect(selectAttr) {\n    if (selectAttr === null || selectAttr.length === 0) {\n        return '*';\n    }\n    return selectAttr;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar DirectiveNormalizer = /** @class */ (function () {\n    function DirectiveNormalizer(_resourceLoader, _urlResolver, _htmlParser, _config) {\n        this._resourceLoader = _resourceLoader;\n        this._urlResolver = _urlResolver;\n        this._htmlParser = _htmlParser;\n        this._config = _config;\n        this._resourceLoaderCache = new Map();\n    }\n    DirectiveNormalizer.prototype.clearCache = function () { this._resourceLoaderCache.clear(); };\n    DirectiveNormalizer.prototype.clearCacheFor = function (normalizedDirective) {\n        var _this = this;\n        if (!normalizedDirective.isComponent) {\n            return;\n        }\n        var template = normalizedDirective.template;\n        this._resourceLoaderCache.delete(template.templateUrl);\n        template.externalStylesheets.forEach(function (stylesheet) { _this._resourceLoaderCache.delete(stylesheet.moduleUrl); });\n    };\n    DirectiveNormalizer.prototype._fetch = function (url) {\n        var result = this._resourceLoaderCache.get(url);\n        if (!result) {\n            result = this._resourceLoader.get(url);\n            this._resourceLoaderCache.set(url, result);\n        }\n        return result;\n    };\n    DirectiveNormalizer.prototype.normalizeTemplate = function (prenormData) {\n        var _this = this;\n        if (isDefined(prenormData.template)) {\n            if (isDefined(prenormData.templateUrl)) {\n                throw syntaxError(\"'\" + stringify(prenormData.componentType) + \"' component cannot define both template and templateUrl\");\n            }\n            if (typeof prenormData.template !== 'string') {\n                throw syntaxError(\"The template specified for component \" + stringify(prenormData.componentType) + \" is not a string\");\n            }\n        }\n        else if (isDefined(prenormData.templateUrl)) {\n            if (typeof prenormData.templateUrl !== 'string') {\n                throw syntaxError(\"The templateUrl specified for component \" + stringify(prenormData.componentType) + \" is not a string\");\n            }\n        }\n        else {\n            throw syntaxError(\"No template specified for component \" + stringify(prenormData.componentType));\n        }\n        if (isDefined(prenormData.preserveWhitespaces) &&\n            typeof prenormData.preserveWhitespaces !== 'boolean') {\n            throw syntaxError(\"The preserveWhitespaces option for component \" + stringify(prenormData.componentType) + \" must be a boolean\");\n        }\n        return SyncAsync.then(this._preParseTemplate(prenormData), function (preparsedTemplate) { return _this._normalizeTemplateMetadata(prenormData, preparsedTemplate); });\n    };\n    DirectiveNormalizer.prototype._preParseTemplate = function (prenomData) {\n        var _this = this;\n        var template;\n        var templateUrl;\n        if (prenomData.template != null) {\n            template = prenomData.template;\n            templateUrl = prenomData.moduleUrl;\n        }\n        else {\n            templateUrl = this._urlResolver.resolve(prenomData.moduleUrl, prenomData.templateUrl);\n            template = this._fetch(templateUrl);\n        }\n        return SyncAsync.then(template, function (template) { return _this._preparseLoadedTemplate(prenomData, template, templateUrl); });\n    };\n    DirectiveNormalizer.prototype._preparseLoadedTemplate = function (prenormData, template, templateAbsUrl) {\n        var isInline = !!prenormData.template;\n        var interpolationConfig = InterpolationConfig.fromArray(prenormData.interpolation);\n        var rootNodesAndErrors = this._htmlParser.parse(template, templateSourceUrl({ reference: prenormData.ngModuleType }, { type: { reference: prenormData.componentType } }, { isInline: isInline, templateUrl: templateAbsUrl }), true, interpolationConfig);\n        if (rootNodesAndErrors.errors.length > 0) {\n            var errorString = rootNodesAndErrors.errors.join('\\n');\n            throw syntaxError(\"Template parse errors:\\n\" + errorString);\n        }\n        var templateMetadataStyles = this._normalizeStylesheet(new CompileStylesheetMetadata({ styles: prenormData.styles, moduleUrl: prenormData.moduleUrl }));\n        var visitor = new TemplatePreparseVisitor();\n        visitAll(visitor, rootNodesAndErrors.rootNodes);\n        var templateStyles = this._normalizeStylesheet(new CompileStylesheetMetadata({ styles: visitor.styles, styleUrls: visitor.styleUrls, moduleUrl: templateAbsUrl }));\n        var styles = templateMetadataStyles.styles.concat(templateStyles.styles);\n        var inlineStyleUrls = templateMetadataStyles.styleUrls.concat(templateStyles.styleUrls);\n        var styleUrls = this\n            ._normalizeStylesheet(new CompileStylesheetMetadata({ styleUrls: prenormData.styleUrls, moduleUrl: prenormData.moduleUrl }))\n            .styleUrls;\n        return {\n            template: template,\n            templateUrl: templateAbsUrl, isInline: isInline,\n            htmlAst: rootNodesAndErrors, styles: styles, inlineStyleUrls: inlineStyleUrls, styleUrls: styleUrls,\n            ngContentSelectors: visitor.ngContentSelectors,\n        };\n    };\n    DirectiveNormalizer.prototype._normalizeTemplateMetadata = function (prenormData, preparsedTemplate) {\n        var _this = this;\n        return SyncAsync.then(this._loadMissingExternalStylesheets(preparsedTemplate.styleUrls.concat(preparsedTemplate.inlineStyleUrls)), function (externalStylesheets) { return _this._normalizeLoadedTemplateMetadata(prenormData, preparsedTemplate, externalStylesheets); });\n    };\n    DirectiveNormalizer.prototype._normalizeLoadedTemplateMetadata = function (prenormData, preparsedTemplate, stylesheets) {\n        // Algorithm:\n        // - produce exactly 1 entry per original styleUrl in\n        // CompileTemplateMetadata.externalStylesheets with all styles inlined\n        // - inline all styles that are referenced by the template into CompileTemplateMetadata.styles.\n        // Reason: be able to determine how many stylesheets there are even without loading\n        // the template nor the stylesheets, so we can create a stub for TypeScript always synchronously\n        // (as resource loading may be async)\n        var _this = this;\n        var styles = __spread(preparsedTemplate.styles);\n        this._inlineStyles(preparsedTemplate.inlineStyleUrls, stylesheets, styles);\n        var styleUrls = preparsedTemplate.styleUrls;\n        var externalStylesheets = styleUrls.map(function (styleUrl) {\n            var stylesheet = stylesheets.get(styleUrl);\n            var styles = __spread(stylesheet.styles);\n            _this._inlineStyles(stylesheet.styleUrls, stylesheets, styles);\n            return new CompileStylesheetMetadata({ moduleUrl: styleUrl, styles: styles });\n        });\n        var encapsulation = prenormData.encapsulation;\n        if (encapsulation == null) {\n            encapsulation = this._config.defaultEncapsulation;\n        }\n        if (encapsulation === ViewEncapsulation.Emulated && styles.length === 0 &&\n            styleUrls.length === 0) {\n            encapsulation = ViewEncapsulation.None;\n        }\n        return new CompileTemplateMetadata({\n            encapsulation: encapsulation,\n            template: preparsedTemplate.template,\n            templateUrl: preparsedTemplate.templateUrl,\n            htmlAst: preparsedTemplate.htmlAst, styles: styles, styleUrls: styleUrls,\n            ngContentSelectors: preparsedTemplate.ngContentSelectors,\n            animations: prenormData.animations,\n            interpolation: prenormData.interpolation,\n            isInline: preparsedTemplate.isInline, externalStylesheets: externalStylesheets,\n            preserveWhitespaces: preserveWhitespacesDefault(prenormData.preserveWhitespaces, this._config.preserveWhitespaces),\n        });\n    };\n    DirectiveNormalizer.prototype._inlineStyles = function (styleUrls, stylesheets, targetStyles) {\n        var _this = this;\n        styleUrls.forEach(function (styleUrl) {\n            var stylesheet = stylesheets.get(styleUrl);\n            stylesheet.styles.forEach(function (style) { return targetStyles.push(style); });\n            _this._inlineStyles(stylesheet.styleUrls, stylesheets, targetStyles);\n        });\n    };\n    DirectiveNormalizer.prototype._loadMissingExternalStylesheets = function (styleUrls, loadedStylesheets) {\n        var _this = this;\n        if (loadedStylesheets === void 0) { loadedStylesheets = new Map(); }\n        return SyncAsync.then(SyncAsync.all(styleUrls.filter(function (styleUrl) { return !loadedStylesheets.has(styleUrl); })\n            .map(function (styleUrl) { return SyncAsync.then(_this._fetch(styleUrl), function (loadedStyle) {\n            var stylesheet = _this._normalizeStylesheet(new CompileStylesheetMetadata({ styles: [loadedStyle], moduleUrl: styleUrl }));\n            loadedStylesheets.set(styleUrl, stylesheet);\n            return _this._loadMissingExternalStylesheets(stylesheet.styleUrls, loadedStylesheets);\n        }); })), function (_) { return loadedStylesheets; });\n    };\n    DirectiveNormalizer.prototype._normalizeStylesheet = function (stylesheet) {\n        var _this = this;\n        var moduleUrl = stylesheet.moduleUrl;\n        var allStyleUrls = stylesheet.styleUrls.filter(isStyleUrlResolvable)\n            .map(function (url) { return _this._urlResolver.resolve(moduleUrl, url); });\n        var allStyles = stylesheet.styles.map(function (style) {\n            var styleWithImports = extractStyleUrls(_this._urlResolver, moduleUrl, style);\n            allStyleUrls.push.apply(allStyleUrls, __spread(styleWithImports.styleUrls));\n            return styleWithImports.style;\n        });\n        return new CompileStylesheetMetadata({ styles: allStyles, styleUrls: allStyleUrls, moduleUrl: moduleUrl });\n    };\n    return DirectiveNormalizer;\n}());\nvar TemplatePreparseVisitor = /** @class */ (function () {\n    function TemplatePreparseVisitor() {\n        this.ngContentSelectors = [];\n        this.styles = [];\n        this.styleUrls = [];\n        this.ngNonBindableStackCount = 0;\n    }\n    TemplatePreparseVisitor.prototype.visitElement = function (ast, context) {\n        var preparsedElement = preparseElement(ast);\n        switch (preparsedElement.type) {\n            case PreparsedElementType.NG_CONTENT:\n                if (this.ngNonBindableStackCount === 0) {\n                    this.ngContentSelectors.push(preparsedElement.selectAttr);\n                }\n                break;\n            case PreparsedElementType.STYLE:\n                var textContent_1 = '';\n                ast.children.forEach(function (child) {\n                    if (child instanceof Text) {\n                        textContent_1 += child.value;\n                    }\n                });\n                this.styles.push(textContent_1);\n                break;\n            case PreparsedElementType.STYLESHEET:\n                this.styleUrls.push(preparsedElement.hrefAttr);\n                break;\n            default:\n                break;\n        }\n        if (preparsedElement.nonBindable) {\n            this.ngNonBindableStackCount++;\n        }\n        visitAll(this, ast.children);\n        if (preparsedElement.nonBindable) {\n            this.ngNonBindableStackCount--;\n        }\n        return null;\n    };\n    TemplatePreparseVisitor.prototype.visitExpansion = function (ast, context) { visitAll(this, ast.cases); };\n    TemplatePreparseVisitor.prototype.visitExpansionCase = function (ast, context) {\n        visitAll(this, ast.expression);\n    };\n    TemplatePreparseVisitor.prototype.visitComment = function (ast, context) { return null; };\n    TemplatePreparseVisitor.prototype.visitAttribute = function (ast, context) { return null; };\n    TemplatePreparseVisitor.prototype.visitText = function (ast, context) { return null; };\n    return TemplatePreparseVisitor;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar QUERY_METADATA_IDENTIFIERS = [\n    createViewChild,\n    createViewChildren,\n    createContentChild,\n    createContentChildren,\n];\n/*\n * Resolve a `Type` for {@link Directive}.\n *\n * This interface can be overridden by the application developer to create custom behavior.\n *\n * See {@link Compiler}\n */\nvar DirectiveResolver = /** @class */ (function () {\n    function DirectiveResolver(_reflector) {\n        this._reflector = _reflector;\n    }\n    DirectiveResolver.prototype.isDirective = function (type) {\n        var typeMetadata = this._reflector.annotations(resolveForwardRef(type));\n        return typeMetadata && typeMetadata.some(isDirectiveMetadata);\n    };\n    DirectiveResolver.prototype.resolve = function (type, throwIfNotFound) {\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        var typeMetadata = this._reflector.annotations(resolveForwardRef(type));\n        if (typeMetadata) {\n            var metadata = findLast(typeMetadata, isDirectiveMetadata);\n            if (metadata) {\n                var propertyMetadata = this._reflector.propMetadata(type);\n                var guards = this._reflector.guards(type);\n                return this._mergeWithPropertyMetadata(metadata, propertyMetadata, guards, type);\n            }\n        }\n        if (throwIfNotFound) {\n            throw new Error(\"No Directive annotation found on \" + stringify(type));\n        }\n        return null;\n    };\n    DirectiveResolver.prototype._mergeWithPropertyMetadata = function (dm, propertyMetadata, guards, directiveType) {\n        var inputs = [];\n        var outputs = [];\n        var host = {};\n        var queries = {};\n        Object.keys(propertyMetadata).forEach(function (propName) {\n            var input = findLast(propertyMetadata[propName], function (a) { return createInput.isTypeOf(a); });\n            if (input) {\n                if (input.bindingPropertyName) {\n                    inputs.push(propName + \": \" + input.bindingPropertyName);\n                }\n                else {\n                    inputs.push(propName);\n                }\n            }\n            var output = findLast(propertyMetadata[propName], function (a) { return createOutput.isTypeOf(a); });\n            if (output) {\n                if (output.bindingPropertyName) {\n                    outputs.push(propName + \": \" + output.bindingPropertyName);\n                }\n                else {\n                    outputs.push(propName);\n                }\n            }\n            var hostBindings = propertyMetadata[propName].filter(function (a) { return createHostBinding.isTypeOf(a); });\n            hostBindings.forEach(function (hostBinding) {\n                if (hostBinding.hostPropertyName) {\n                    var startWith = hostBinding.hostPropertyName[0];\n                    if (startWith === '(') {\n                        throw new Error(\"@HostBinding can not bind to events. Use @HostListener instead.\");\n                    }\n                    else if (startWith === '[') {\n                        throw new Error(\"@HostBinding parameter should be a property name, 'class.<name>', or 'attr.<name>'.\");\n                    }\n                    host[\"[\" + hostBinding.hostPropertyName + \"]\"] = propName;\n                }\n                else {\n                    host[\"[\" + propName + \"]\"] = propName;\n                }\n            });\n            var hostListeners = propertyMetadata[propName].filter(function (a) { return createHostListener.isTypeOf(a); });\n            hostListeners.forEach(function (hostListener) {\n                var args = hostListener.args || [];\n                host[\"(\" + hostListener.eventName + \")\"] = propName + \"(\" + args.join(',') + \")\";\n            });\n            var query = findLast(propertyMetadata[propName], function (a) { return QUERY_METADATA_IDENTIFIERS.some(function (i) { return i.isTypeOf(a); }); });\n            if (query) {\n                queries[propName] = query;\n            }\n        });\n        return this._merge(dm, inputs, outputs, host, queries, guards, directiveType);\n    };\n    DirectiveResolver.prototype._extractPublicName = function (def) { return splitAtColon(def, [null, def])[1].trim(); };\n    DirectiveResolver.prototype._dedupeBindings = function (bindings) {\n        var names = new Set();\n        var publicNames = new Set();\n        var reversedResult = [];\n        // go last to first to allow later entries to overwrite previous entries\n        for (var i = bindings.length - 1; i >= 0; i--) {\n            var binding = bindings[i];\n            var name_1 = this._extractPublicName(binding);\n            publicNames.add(name_1);\n            if (!names.has(name_1)) {\n                names.add(name_1);\n                reversedResult.push(binding);\n            }\n        }\n        return reversedResult.reverse();\n    };\n    DirectiveResolver.prototype._merge = function (directive, inputs, outputs, host, queries, guards, directiveType) {\n        var mergedInputs = this._dedupeBindings(directive.inputs ? directive.inputs.concat(inputs) : inputs);\n        var mergedOutputs = this._dedupeBindings(directive.outputs ? directive.outputs.concat(outputs) : outputs);\n        var mergedHost = directive.host ? __assign({}, directive.host, host) : host;\n        var mergedQueries = directive.queries ? __assign({}, directive.queries, queries) : queries;\n        if (createComponent.isTypeOf(directive)) {\n            var comp = directive;\n            return createComponent({\n                selector: comp.selector,\n                inputs: mergedInputs,\n                outputs: mergedOutputs,\n                host: mergedHost,\n                exportAs: comp.exportAs,\n                moduleId: comp.moduleId,\n                queries: mergedQueries,\n                changeDetection: comp.changeDetection,\n                providers: comp.providers,\n                viewProviders: comp.viewProviders,\n                entryComponents: comp.entryComponents,\n                template: comp.template,\n                templateUrl: comp.templateUrl,\n                styles: comp.styles,\n                styleUrls: comp.styleUrls,\n                encapsulation: comp.encapsulation,\n                animations: comp.animations,\n                interpolation: comp.interpolation,\n                preserveWhitespaces: directive.preserveWhitespaces,\n            });\n        }\n        else {\n            return createDirective({\n                selector: directive.selector,\n                inputs: mergedInputs,\n                outputs: mergedOutputs,\n                host: mergedHost,\n                exportAs: directive.exportAs,\n                queries: mergedQueries,\n                providers: directive.providers, guards: guards\n            });\n        }\n    };\n    return DirectiveResolver;\n}());\nfunction isDirectiveMetadata(type) {\n    return createDirective.isTypeOf(type) || createComponent.isTypeOf(type);\n}\nfunction findLast(arr, condition) {\n    for (var i = arr.length - 1; i >= 0; i--) {\n        if (condition(arr[i])) {\n            return arr[i];\n        }\n    }\n    return null;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar $EOF = 0;\nvar $TAB = 9;\nvar $LF = 10;\nvar $VTAB = 11;\nvar $FF = 12;\nvar $CR = 13;\nvar $SPACE = 32;\nvar $BANG = 33;\nvar $DQ = 34;\nvar $HASH = 35;\nvar $$ = 36;\nvar $PERCENT = 37;\nvar $AMPERSAND = 38;\nvar $SQ = 39;\nvar $LPAREN = 40;\nvar $RPAREN = 41;\nvar $STAR = 42;\nvar $PLUS = 43;\nvar $COMMA = 44;\nvar $MINUS = 45;\nvar $PERIOD = 46;\nvar $SLASH = 47;\nvar $COLON = 58;\nvar $SEMICOLON = 59;\nvar $LT = 60;\nvar $EQ = 61;\nvar $GT = 62;\nvar $QUESTION = 63;\nvar $0 = 48;\nvar $9 = 57;\nvar $A = 65;\nvar $E = 69;\nvar $F = 70;\nvar $X = 88;\nvar $Z = 90;\nvar $LBRACKET = 91;\nvar $BACKSLASH = 92;\nvar $RBRACKET = 93;\nvar $CARET = 94;\nvar $_ = 95;\nvar $a = 97;\nvar $e = 101;\nvar $f = 102;\nvar $n = 110;\nvar $r = 114;\nvar $t = 116;\nvar $u = 117;\nvar $v = 118;\nvar $x = 120;\nvar $z = 122;\nvar $LBRACE = 123;\nvar $BAR = 124;\nvar $RBRACE = 125;\nvar $NBSP = 160;\n\n\n\nvar $BT = 96;\nfunction isWhitespace(code) {\n    return (code >= $TAB && code <= $SPACE) || (code == $NBSP);\n}\nfunction isDigit(code) {\n    return $0 <= code && code <= $9;\n}\nfunction isAsciiLetter(code) {\n    return code >= $a && code <= $z || code >= $A && code <= $Z;\n}\nfunction isAsciiHexDigit(code) {\n    return code >= $a && code <= $f || code >= $A && code <= $F || isDigit(code);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TokenType;\n(function (TokenType) {\n    TokenType[TokenType[\"Character\"] = 0] = \"Character\";\n    TokenType[TokenType[\"Identifier\"] = 1] = \"Identifier\";\n    TokenType[TokenType[\"Keyword\"] = 2] = \"Keyword\";\n    TokenType[TokenType[\"String\"] = 3] = \"String\";\n    TokenType[TokenType[\"Operator\"] = 4] = \"Operator\";\n    TokenType[TokenType[\"Number\"] = 5] = \"Number\";\n    TokenType[TokenType[\"Error\"] = 6] = \"Error\";\n})(TokenType || (TokenType = {}));\nvar KEYWORDS = ['var', 'let', 'as', 'null', 'undefined', 'true', 'false', 'if', 'else', 'this'];\nvar Lexer = /** @class */ (function () {\n    function Lexer() {\n    }\n    Lexer.prototype.tokenize = function (text) {\n        var scanner = new _Scanner(text);\n        var tokens = [];\n        var token = scanner.scanToken();\n        while (token != null) {\n            tokens.push(token);\n            token = scanner.scanToken();\n        }\n        return tokens;\n    };\n    return Lexer;\n}());\nvar Token = /** @class */ (function () {\n    function Token(index, type, numValue, strValue) {\n        this.index = index;\n        this.type = type;\n        this.numValue = numValue;\n        this.strValue = strValue;\n    }\n    Token.prototype.isCharacter = function (code) {\n        return this.type == TokenType.Character && this.numValue == code;\n    };\n    Token.prototype.isNumber = function () { return this.type == TokenType.Number; };\n    Token.prototype.isString = function () { return this.type == TokenType.String; };\n    Token.prototype.isOperator = function (operater) {\n        return this.type == TokenType.Operator && this.strValue == operater;\n    };\n    Token.prototype.isIdentifier = function () { return this.type == TokenType.Identifier; };\n    Token.prototype.isKeyword = function () { return this.type == TokenType.Keyword; };\n    Token.prototype.isKeywordLet = function () { return this.type == TokenType.Keyword && this.strValue == 'let'; };\n    Token.prototype.isKeywordAs = function () { return this.type == TokenType.Keyword && this.strValue == 'as'; };\n    Token.prototype.isKeywordNull = function () { return this.type == TokenType.Keyword && this.strValue == 'null'; };\n    Token.prototype.isKeywordUndefined = function () {\n        return this.type == TokenType.Keyword && this.strValue == 'undefined';\n    };\n    Token.prototype.isKeywordTrue = function () { return this.type == TokenType.Keyword && this.strValue == 'true'; };\n    Token.prototype.isKeywordFalse = function () { return this.type == TokenType.Keyword && this.strValue == 'false'; };\n    Token.prototype.isKeywordThis = function () { return this.type == TokenType.Keyword && this.strValue == 'this'; };\n    Token.prototype.isError = function () { return this.type == TokenType.Error; };\n    Token.prototype.toNumber = function () { return this.type == TokenType.Number ? this.numValue : -1; };\n    Token.prototype.toString = function () {\n        switch (this.type) {\n            case TokenType.Character:\n            case TokenType.Identifier:\n            case TokenType.Keyword:\n            case TokenType.Operator:\n            case TokenType.String:\n            case TokenType.Error:\n                return this.strValue;\n            case TokenType.Number:\n                return this.numValue.toString();\n            default:\n                return null;\n        }\n    };\n    return Token;\n}());\nfunction newCharacterToken(index, code) {\n    return new Token(index, TokenType.Character, code, String.fromCharCode(code));\n}\nfunction newIdentifierToken(index, text) {\n    return new Token(index, TokenType.Identifier, 0, text);\n}\nfunction newKeywordToken(index, text) {\n    return new Token(index, TokenType.Keyword, 0, text);\n}\nfunction newOperatorToken(index, text) {\n    return new Token(index, TokenType.Operator, 0, text);\n}\nfunction newStringToken(index, text) {\n    return new Token(index, TokenType.String, 0, text);\n}\nfunction newNumberToken(index, n) {\n    return new Token(index, TokenType.Number, n, '');\n}\nfunction newErrorToken(index, message) {\n    return new Token(index, TokenType.Error, 0, message);\n}\nvar EOF = new Token(-1, TokenType.Character, 0, '');\nvar _Scanner = /** @class */ (function () {\n    function _Scanner(input) {\n        this.input = input;\n        this.peek = 0;\n        this.index = -1;\n        this.length = input.length;\n        this.advance();\n    }\n    _Scanner.prototype.advance = function () {\n        this.peek = ++this.index >= this.length ? $EOF : this.input.charCodeAt(this.index);\n    };\n    _Scanner.prototype.scanToken = function () {\n        var input = this.input, length = this.length;\n        var peek = this.peek, index = this.index;\n        // Skip whitespace.\n        while (peek <= $SPACE) {\n            if (++index >= length) {\n                peek = $EOF;\n                break;\n            }\n            else {\n                peek = input.charCodeAt(index);\n            }\n        }\n        this.peek = peek;\n        this.index = index;\n        if (index >= length) {\n            return null;\n        }\n        // Handle identifiers and numbers.\n        if (isIdentifierStart(peek))\n            return this.scanIdentifier();\n        if (isDigit(peek))\n            return this.scanNumber(index);\n        var start = index;\n        switch (peek) {\n            case $PERIOD:\n                this.advance();\n                return isDigit(this.peek) ? this.scanNumber(start) :\n                    newCharacterToken(start, $PERIOD);\n            case $LPAREN:\n            case $RPAREN:\n            case $LBRACE:\n            case $RBRACE:\n            case $LBRACKET:\n            case $RBRACKET:\n            case $COMMA:\n            case $COLON:\n            case $SEMICOLON:\n                return this.scanCharacter(start, peek);\n            case $SQ:\n            case $DQ:\n                return this.scanString();\n            case $HASH:\n            case $PLUS:\n            case $MINUS:\n            case $STAR:\n            case $SLASH:\n            case $PERCENT:\n            case $CARET:\n                return this.scanOperator(start, String.fromCharCode(peek));\n            case $QUESTION:\n                return this.scanComplexOperator(start, '?', $PERIOD, '.');\n            case $LT:\n            case $GT:\n                return this.scanComplexOperator(start, String.fromCharCode(peek), $EQ, '=');\n            case $BANG:\n            case $EQ:\n                return this.scanComplexOperator(start, String.fromCharCode(peek), $EQ, '=', $EQ, '=');\n            case $AMPERSAND:\n                return this.scanComplexOperator(start, '&', $AMPERSAND, '&');\n            case $BAR:\n                return this.scanComplexOperator(start, '|', $BAR, '|');\n            case $NBSP:\n                while (isWhitespace(this.peek))\n                    this.advance();\n                return this.scanToken();\n        }\n        this.advance();\n        return this.error(\"Unexpected character [\" + String.fromCharCode(peek) + \"]\", 0);\n    };\n    _Scanner.prototype.scanCharacter = function (start, code) {\n        this.advance();\n        return newCharacterToken(start, code);\n    };\n    _Scanner.prototype.scanOperator = function (start, str) {\n        this.advance();\n        return newOperatorToken(start, str);\n    };\n    /**\n     * Tokenize a 2/3 char long operator\n     *\n     * @param start start index in the expression\n     * @param one first symbol (always part of the operator)\n     * @param twoCode code point for the second symbol\n     * @param two second symbol (part of the operator when the second code point matches)\n     * @param threeCode code point for the third symbol\n     * @param three third symbol (part of the operator when provided and matches source expression)\n     */\n    _Scanner.prototype.scanComplexOperator = function (start, one, twoCode, two, threeCode, three) {\n        this.advance();\n        var str = one;\n        if (this.peek == twoCode) {\n            this.advance();\n            str += two;\n        }\n        if (threeCode != null && this.peek == threeCode) {\n            this.advance();\n            str += three;\n        }\n        return newOperatorToken(start, str);\n    };\n    _Scanner.prototype.scanIdentifier = function () {\n        var start = this.index;\n        this.advance();\n        while (isIdentifierPart(this.peek))\n            this.advance();\n        var str = this.input.substring(start, this.index);\n        return KEYWORDS.indexOf(str) > -1 ? newKeywordToken(start, str) :\n            newIdentifierToken(start, str);\n    };\n    _Scanner.prototype.scanNumber = function (start) {\n        var simple = (this.index === start);\n        this.advance(); // Skip initial digit.\n        while (true) {\n            if (isDigit(this.peek)) {\n                // Do nothing.\n            }\n            else if (this.peek == $PERIOD) {\n                simple = false;\n            }\n            else if (isExponentStart(this.peek)) {\n                this.advance();\n                if (isExponentSign(this.peek))\n                    this.advance();\n                if (!isDigit(this.peek))\n                    return this.error('Invalid exponent', -1);\n                simple = false;\n            }\n            else {\n                break;\n            }\n            this.advance();\n        }\n        var str = this.input.substring(start, this.index);\n        var value = simple ? parseIntAutoRadix(str) : parseFloat(str);\n        return newNumberToken(start, value);\n    };\n    _Scanner.prototype.scanString = function () {\n        var start = this.index;\n        var quote = this.peek;\n        this.advance(); // Skip initial quote.\n        var buffer = '';\n        var marker = this.index;\n        var input = this.input;\n        while (this.peek != quote) {\n            if (this.peek == $BACKSLASH) {\n                buffer += input.substring(marker, this.index);\n                this.advance();\n                var unescapedCode = void 0;\n                // Workaround for TS2.1-introduced type strictness\n                this.peek = this.peek;\n                if (this.peek == $u) {\n                    // 4 character hex code for unicode character.\n                    var hex = input.substring(this.index + 1, this.index + 5);\n                    if (/^[0-9a-f]+$/i.test(hex)) {\n                        unescapedCode = parseInt(hex, 16);\n                    }\n                    else {\n                        return this.error(\"Invalid unicode escape [\\\\u\" + hex + \"]\", 0);\n                    }\n                    for (var i = 0; i < 5; i++) {\n                        this.advance();\n                    }\n                }\n                else {\n                    unescapedCode = unescape(this.peek);\n                    this.advance();\n                }\n                buffer += String.fromCharCode(unescapedCode);\n                marker = this.index;\n            }\n            else if (this.peek == $EOF) {\n                return this.error('Unterminated quote', 0);\n            }\n            else {\n                this.advance();\n            }\n        }\n        var last = input.substring(marker, this.index);\n        this.advance(); // Skip terminating quote.\n        return newStringToken(start, buffer + last);\n    };\n    _Scanner.prototype.error = function (message, offset) {\n        var position = this.index + offset;\n        return newErrorToken(position, \"Lexer Error: \" + message + \" at column \" + position + \" in expression [\" + this.input + \"]\");\n    };\n    return _Scanner;\n}());\nfunction isIdentifierStart(code) {\n    return ($a <= code && code <= $z) || ($A <= code && code <= $Z) ||\n        (code == $_) || (code == $$);\n}\nfunction isIdentifier(input) {\n    if (input.length == 0)\n        return false;\n    var scanner = new _Scanner(input);\n    if (!isIdentifierStart(scanner.peek))\n        return false;\n    scanner.advance();\n    while (scanner.peek !== $EOF) {\n        if (!isIdentifierPart(scanner.peek))\n            return false;\n        scanner.advance();\n    }\n    return true;\n}\nfunction isIdentifierPart(code) {\n    return isAsciiLetter(code) || isDigit(code) || (code == $_) ||\n        (code == $$);\n}\nfunction isExponentStart(code) {\n    return code == $e || code == $E;\n}\nfunction isExponentSign(code) {\n    return code == $MINUS || code == $PLUS;\n}\nfunction isQuote(code) {\n    return code === $SQ || code === $DQ || code === $BT;\n}\nfunction unescape(code) {\n    switch (code) {\n        case $n:\n            return $LF;\n        case $f:\n            return $FF;\n        case $r:\n            return $CR;\n        case $t:\n            return $TAB;\n        case $v:\n            return $VTAB;\n        default:\n            return code;\n    }\n}\nfunction parseIntAutoRadix(text) {\n    var result = parseInt(text);\n    if (isNaN(result)) {\n        throw new Error('Invalid integer literal when parsing ' + text);\n    }\n    return result;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ParserError = /** @class */ (function () {\n    function ParserError(message, input, errLocation, ctxLocation) {\n        this.input = input;\n        this.errLocation = errLocation;\n        this.ctxLocation = ctxLocation;\n        this.message = \"Parser Error: \" + message + \" \" + errLocation + \" [\" + input + \"] in \" + ctxLocation;\n    }\n    return ParserError;\n}());\nvar ParseSpan = /** @class */ (function () {\n    function ParseSpan(start, end) {\n        this.start = start;\n        this.end = end;\n    }\n    return ParseSpan;\n}());\nvar AST = /** @class */ (function () {\n    function AST(span) {\n        this.span = span;\n    }\n    AST.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return null;\n    };\n    AST.prototype.toString = function () { return 'AST'; };\n    return AST;\n}());\n/**\n * Represents a quoted expression of the form:\n *\n * quote = prefix `:` uninterpretedExpression\n * prefix = identifier\n * uninterpretedExpression = arbitrary string\n *\n * A quoted expression is meant to be pre-processed by an AST transformer that\n * converts it into another AST that no longer contains quoted expressions.\n * It is meant to allow third-party developers to extend Angular template\n * expression language. The `uninterpretedExpression` part of the quote is\n * therefore not interpreted by the Angular's own expression parser.\n */\nvar Quote = /** @class */ (function (_super) {\n    __extends(Quote, _super);\n    function Quote(span, prefix, uninterpretedExpression, location) {\n        var _this = _super.call(this, span) || this;\n        _this.prefix = prefix;\n        _this.uninterpretedExpression = uninterpretedExpression;\n        _this.location = location;\n        return _this;\n    }\n    Quote.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitQuote(this, context);\n    };\n    Quote.prototype.toString = function () { return 'Quote'; };\n    return Quote;\n}(AST));\nvar EmptyExpr = /** @class */ (function (_super) {\n    __extends(EmptyExpr, _super);\n    function EmptyExpr() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EmptyExpr.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        // do nothing\n    };\n    return EmptyExpr;\n}(AST));\nvar ImplicitReceiver = /** @class */ (function (_super) {\n    __extends(ImplicitReceiver, _super);\n    function ImplicitReceiver() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ImplicitReceiver.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitImplicitReceiver(this, context);\n    };\n    return ImplicitReceiver;\n}(AST));\n/**\n * Multiple expressions separated by a semicolon.\n */\nvar Chain = /** @class */ (function (_super) {\n    __extends(Chain, _super);\n    function Chain(span, expressions) {\n        var _this = _super.call(this, span) || this;\n        _this.expressions = expressions;\n        return _this;\n    }\n    Chain.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitChain(this, context);\n    };\n    return Chain;\n}(AST));\nvar Conditional = /** @class */ (function (_super) {\n    __extends(Conditional, _super);\n    function Conditional(span, condition, trueExp, falseExp) {\n        var _this = _super.call(this, span) || this;\n        _this.condition = condition;\n        _this.trueExp = trueExp;\n        _this.falseExp = falseExp;\n        return _this;\n    }\n    Conditional.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitConditional(this, context);\n    };\n    return Conditional;\n}(AST));\nvar PropertyRead = /** @class */ (function (_super) {\n    __extends(PropertyRead, _super);\n    function PropertyRead(span, receiver, name) {\n        var _this = _super.call(this, span) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        return _this;\n    }\n    PropertyRead.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitPropertyRead(this, context);\n    };\n    return PropertyRead;\n}(AST));\nvar PropertyWrite = /** @class */ (function (_super) {\n    __extends(PropertyWrite, _super);\n    function PropertyWrite(span, receiver, name, value) {\n        var _this = _super.call(this, span) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        _this.value = value;\n        return _this;\n    }\n    PropertyWrite.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitPropertyWrite(this, context);\n    };\n    return PropertyWrite;\n}(AST));\nvar SafePropertyRead = /** @class */ (function (_super) {\n    __extends(SafePropertyRead, _super);\n    function SafePropertyRead(span, receiver, name) {\n        var _this = _super.call(this, span) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        return _this;\n    }\n    SafePropertyRead.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitSafePropertyRead(this, context);\n    };\n    return SafePropertyRead;\n}(AST));\nvar KeyedRead = /** @class */ (function (_super) {\n    __extends(KeyedRead, _super);\n    function KeyedRead(span, obj, key) {\n        var _this = _super.call(this, span) || this;\n        _this.obj = obj;\n        _this.key = key;\n        return _this;\n    }\n    KeyedRead.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitKeyedRead(this, context);\n    };\n    return KeyedRead;\n}(AST));\nvar KeyedWrite = /** @class */ (function (_super) {\n    __extends(KeyedWrite, _super);\n    function KeyedWrite(span, obj, key, value) {\n        var _this = _super.call(this, span) || this;\n        _this.obj = obj;\n        _this.key = key;\n        _this.value = value;\n        return _this;\n    }\n    KeyedWrite.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitKeyedWrite(this, context);\n    };\n    return KeyedWrite;\n}(AST));\nvar BindingPipe = /** @class */ (function (_super) {\n    __extends(BindingPipe, _super);\n    function BindingPipe(span, exp, name, args) {\n        var _this = _super.call(this, span) || this;\n        _this.exp = exp;\n        _this.name = name;\n        _this.args = args;\n        return _this;\n    }\n    BindingPipe.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitPipe(this, context);\n    };\n    return BindingPipe;\n}(AST));\nvar LiteralPrimitive = /** @class */ (function (_super) {\n    __extends(LiteralPrimitive, _super);\n    function LiteralPrimitive(span, value) {\n        var _this = _super.call(this, span) || this;\n        _this.value = value;\n        return _this;\n    }\n    LiteralPrimitive.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitLiteralPrimitive(this, context);\n    };\n    return LiteralPrimitive;\n}(AST));\nvar LiteralArray = /** @class */ (function (_super) {\n    __extends(LiteralArray, _super);\n    function LiteralArray(span, expressions) {\n        var _this = _super.call(this, span) || this;\n        _this.expressions = expressions;\n        return _this;\n    }\n    LiteralArray.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitLiteralArray(this, context);\n    };\n    return LiteralArray;\n}(AST));\nvar LiteralMap = /** @class */ (function (_super) {\n    __extends(LiteralMap, _super);\n    function LiteralMap(span, keys, values) {\n        var _this = _super.call(this, span) || this;\n        _this.keys = keys;\n        _this.values = values;\n        return _this;\n    }\n    LiteralMap.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitLiteralMap(this, context);\n    };\n    return LiteralMap;\n}(AST));\nvar Interpolation = /** @class */ (function (_super) {\n    __extends(Interpolation, _super);\n    function Interpolation(span, strings, expressions) {\n        var _this = _super.call(this, span) || this;\n        _this.strings = strings;\n        _this.expressions = expressions;\n        return _this;\n    }\n    Interpolation.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitInterpolation(this, context);\n    };\n    return Interpolation;\n}(AST));\nvar Binary = /** @class */ (function (_super) {\n    __extends(Binary, _super);\n    function Binary(span, operation, left, right) {\n        var _this = _super.call(this, span) || this;\n        _this.operation = operation;\n        _this.left = left;\n        _this.right = right;\n        return _this;\n    }\n    Binary.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitBinary(this, context);\n    };\n    return Binary;\n}(AST));\nvar PrefixNot = /** @class */ (function (_super) {\n    __extends(PrefixNot, _super);\n    function PrefixNot(span, expression) {\n        var _this = _super.call(this, span) || this;\n        _this.expression = expression;\n        return _this;\n    }\n    PrefixNot.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitPrefixNot(this, context);\n    };\n    return PrefixNot;\n}(AST));\nvar NonNullAssert = /** @class */ (function (_super) {\n    __extends(NonNullAssert, _super);\n    function NonNullAssert(span, expression) {\n        var _this = _super.call(this, span) || this;\n        _this.expression = expression;\n        return _this;\n    }\n    NonNullAssert.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitNonNullAssert(this, context);\n    };\n    return NonNullAssert;\n}(AST));\nvar MethodCall = /** @class */ (function (_super) {\n    __extends(MethodCall, _super);\n    function MethodCall(span, receiver, name, args) {\n        var _this = _super.call(this, span) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        _this.args = args;\n        return _this;\n    }\n    MethodCall.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitMethodCall(this, context);\n    };\n    return MethodCall;\n}(AST));\nvar SafeMethodCall = /** @class */ (function (_super) {\n    __extends(SafeMethodCall, _super);\n    function SafeMethodCall(span, receiver, name, args) {\n        var _this = _super.call(this, span) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        _this.args = args;\n        return _this;\n    }\n    SafeMethodCall.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitSafeMethodCall(this, context);\n    };\n    return SafeMethodCall;\n}(AST));\nvar FunctionCall = /** @class */ (function (_super) {\n    __extends(FunctionCall, _super);\n    function FunctionCall(span, target, args) {\n        var _this = _super.call(this, span) || this;\n        _this.target = target;\n        _this.args = args;\n        return _this;\n    }\n    FunctionCall.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitFunctionCall(this, context);\n    };\n    return FunctionCall;\n}(AST));\nvar ASTWithSource = /** @class */ (function (_super) {\n    __extends(ASTWithSource, _super);\n    function ASTWithSource(ast, source, location, errors) {\n        var _this = _super.call(this, new ParseSpan(0, source == null ? 0 : source.length)) || this;\n        _this.ast = ast;\n        _this.source = source;\n        _this.location = location;\n        _this.errors = errors;\n        return _this;\n    }\n    ASTWithSource.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return this.ast.visit(visitor, context);\n    };\n    ASTWithSource.prototype.toString = function () { return this.source + \" in \" + this.location; };\n    return ASTWithSource;\n}(AST));\nvar TemplateBinding = /** @class */ (function () {\n    function TemplateBinding(span, key, keyIsVar, name, expression) {\n        this.span = span;\n        this.key = key;\n        this.keyIsVar = keyIsVar;\n        this.name = name;\n        this.expression = expression;\n    }\n    return TemplateBinding;\n}());\nvar NullAstVisitor = /** @class */ (function () {\n    function NullAstVisitor() {\n    }\n    NullAstVisitor.prototype.visitBinary = function (ast, context) { };\n    NullAstVisitor.prototype.visitChain = function (ast, context) { };\n    NullAstVisitor.prototype.visitConditional = function (ast, context) { };\n    NullAstVisitor.prototype.visitFunctionCall = function (ast, context) { };\n    NullAstVisitor.prototype.visitImplicitReceiver = function (ast, context) { };\n    NullAstVisitor.prototype.visitInterpolation = function (ast, context) { };\n    NullAstVisitor.prototype.visitKeyedRead = function (ast, context) { };\n    NullAstVisitor.prototype.visitKeyedWrite = function (ast, context) { };\n    NullAstVisitor.prototype.visitLiteralArray = function (ast, context) { };\n    NullAstVisitor.prototype.visitLiteralMap = function (ast, context) { };\n    NullAstVisitor.prototype.visitLiteralPrimitive = function (ast, context) { };\n    NullAstVisitor.prototype.visitMethodCall = function (ast, context) { };\n    NullAstVisitor.prototype.visitPipe = function (ast, context) { };\n    NullAstVisitor.prototype.visitPrefixNot = function (ast, context) { };\n    NullAstVisitor.prototype.visitNonNullAssert = function (ast, context) { };\n    NullAstVisitor.prototype.visitPropertyRead = function (ast, context) { };\n    NullAstVisitor.prototype.visitPropertyWrite = function (ast, context) { };\n    NullAstVisitor.prototype.visitQuote = function (ast, context) { };\n    NullAstVisitor.prototype.visitSafeMethodCall = function (ast, context) { };\n    NullAstVisitor.prototype.visitSafePropertyRead = function (ast, context) { };\n    return NullAstVisitor;\n}());\nvar RecursiveAstVisitor = /** @class */ (function () {\n    function RecursiveAstVisitor() {\n    }\n    RecursiveAstVisitor.prototype.visitBinary = function (ast, context) {\n        ast.left.visit(this);\n        ast.right.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitChain = function (ast, context) { return this.visitAll(ast.expressions, context); };\n    RecursiveAstVisitor.prototype.visitConditional = function (ast, context) {\n        ast.condition.visit(this);\n        ast.trueExp.visit(this);\n        ast.falseExp.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitPipe = function (ast, context) {\n        ast.exp.visit(this);\n        this.visitAll(ast.args, context);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitFunctionCall = function (ast, context) {\n        ast.target.visit(this);\n        this.visitAll(ast.args, context);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitImplicitReceiver = function (ast, context) { return null; };\n    RecursiveAstVisitor.prototype.visitInterpolation = function (ast, context) {\n        return this.visitAll(ast.expressions, context);\n    };\n    RecursiveAstVisitor.prototype.visitKeyedRead = function (ast, context) {\n        ast.obj.visit(this);\n        ast.key.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitKeyedWrite = function (ast, context) {\n        ast.obj.visit(this);\n        ast.key.visit(this);\n        ast.value.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitLiteralArray = function (ast, context) {\n        return this.visitAll(ast.expressions, context);\n    };\n    RecursiveAstVisitor.prototype.visitLiteralMap = function (ast, context) { return this.visitAll(ast.values, context); };\n    RecursiveAstVisitor.prototype.visitLiteralPrimitive = function (ast, context) { return null; };\n    RecursiveAstVisitor.prototype.visitMethodCall = function (ast, context) {\n        ast.receiver.visit(this);\n        return this.visitAll(ast.args, context);\n    };\n    RecursiveAstVisitor.prototype.visitPrefixNot = function (ast, context) {\n        ast.expression.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitNonNullAssert = function (ast, context) {\n        ast.expression.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitPropertyRead = function (ast, context) {\n        ast.receiver.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitPropertyWrite = function (ast, context) {\n        ast.receiver.visit(this);\n        ast.value.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitSafePropertyRead = function (ast, context) {\n        ast.receiver.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitSafeMethodCall = function (ast, context) {\n        ast.receiver.visit(this);\n        return this.visitAll(ast.args, context);\n    };\n    RecursiveAstVisitor.prototype.visitAll = function (asts, context) {\n        var _this = this;\n        asts.forEach(function (ast) { return ast.visit(_this, context); });\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitQuote = function (ast, context) { return null; };\n    return RecursiveAstVisitor;\n}());\nvar AstTransformer = /** @class */ (function () {\n    function AstTransformer() {\n    }\n    AstTransformer.prototype.visitImplicitReceiver = function (ast, context) { return ast; };\n    AstTransformer.prototype.visitInterpolation = function (ast, context) {\n        return new Interpolation(ast.span, ast.strings, this.visitAll(ast.expressions));\n    };\n    AstTransformer.prototype.visitLiteralPrimitive = function (ast, context) {\n        return new LiteralPrimitive(ast.span, ast.value);\n    };\n    AstTransformer.prototype.visitPropertyRead = function (ast, context) {\n        return new PropertyRead(ast.span, ast.receiver.visit(this), ast.name);\n    };\n    AstTransformer.prototype.visitPropertyWrite = function (ast, context) {\n        return new PropertyWrite(ast.span, ast.receiver.visit(this), ast.name, ast.value.visit(this));\n    };\n    AstTransformer.prototype.visitSafePropertyRead = function (ast, context) {\n        return new SafePropertyRead(ast.span, ast.receiver.visit(this), ast.name);\n    };\n    AstTransformer.prototype.visitMethodCall = function (ast, context) {\n        return new MethodCall(ast.span, ast.receiver.visit(this), ast.name, this.visitAll(ast.args));\n    };\n    AstTransformer.prototype.visitSafeMethodCall = function (ast, context) {\n        return new SafeMethodCall(ast.span, ast.receiver.visit(this), ast.name, this.visitAll(ast.args));\n    };\n    AstTransformer.prototype.visitFunctionCall = function (ast, context) {\n        return new FunctionCall(ast.span, ast.target.visit(this), this.visitAll(ast.args));\n    };\n    AstTransformer.prototype.visitLiteralArray = function (ast, context) {\n        return new LiteralArray(ast.span, this.visitAll(ast.expressions));\n    };\n    AstTransformer.prototype.visitLiteralMap = function (ast, context) {\n        return new LiteralMap(ast.span, ast.keys, this.visitAll(ast.values));\n    };\n    AstTransformer.prototype.visitBinary = function (ast, context) {\n        return new Binary(ast.span, ast.operation, ast.left.visit(this), ast.right.visit(this));\n    };\n    AstTransformer.prototype.visitPrefixNot = function (ast, context) {\n        return new PrefixNot(ast.span, ast.expression.visit(this));\n    };\n    AstTransformer.prototype.visitNonNullAssert = function (ast, context) {\n        return new NonNullAssert(ast.span, ast.expression.visit(this));\n    };\n    AstTransformer.prototype.visitConditional = function (ast, context) {\n        return new Conditional(ast.span, ast.condition.visit(this), ast.trueExp.visit(this), ast.falseExp.visit(this));\n    };\n    AstTransformer.prototype.visitPipe = function (ast, context) {\n        return new BindingPipe(ast.span, ast.exp.visit(this), ast.name, this.visitAll(ast.args));\n    };\n    AstTransformer.prototype.visitKeyedRead = function (ast, context) {\n        return new KeyedRead(ast.span, ast.obj.visit(this), ast.key.visit(this));\n    };\n    AstTransformer.prototype.visitKeyedWrite = function (ast, context) {\n        return new KeyedWrite(ast.span, ast.obj.visit(this), ast.key.visit(this), ast.value.visit(this));\n    };\n    AstTransformer.prototype.visitAll = function (asts) {\n        var res = new Array(asts.length);\n        for (var i = 0; i < asts.length; ++i) {\n            res[i] = asts[i].visit(this);\n        }\n        return res;\n    };\n    AstTransformer.prototype.visitChain = function (ast, context) {\n        return new Chain(ast.span, this.visitAll(ast.expressions));\n    };\n    AstTransformer.prototype.visitQuote = function (ast, context) {\n        return new Quote(ast.span, ast.prefix, ast.uninterpretedExpression, ast.location);\n    };\n    return AstTransformer;\n}());\n// A transformer that only creates new nodes if the transformer makes a change or\n// a change is made a child node.\nvar AstMemoryEfficientTransformer = /** @class */ (function () {\n    function AstMemoryEfficientTransformer() {\n    }\n    AstMemoryEfficientTransformer.prototype.visitImplicitReceiver = function (ast, context) { return ast; };\n    AstMemoryEfficientTransformer.prototype.visitInterpolation = function (ast, context) {\n        var expressions = this.visitAll(ast.expressions);\n        if (expressions !== ast.expressions)\n            return new Interpolation(ast.span, ast.strings, expressions);\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitLiteralPrimitive = function (ast, context) { return ast; };\n    AstMemoryEfficientTransformer.prototype.visitPropertyRead = function (ast, context) {\n        var receiver = ast.receiver.visit(this);\n        if (receiver !== ast.receiver) {\n            return new PropertyRead(ast.span, receiver, ast.name);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitPropertyWrite = function (ast, context) {\n        var receiver = ast.receiver.visit(this);\n        var value = ast.value.visit(this);\n        if (receiver !== ast.receiver || value !== ast.value) {\n            return new PropertyWrite(ast.span, receiver, ast.name, value);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitSafePropertyRead = function (ast, context) {\n        var receiver = ast.receiver.visit(this);\n        if (receiver !== ast.receiver) {\n            return new SafePropertyRead(ast.span, receiver, ast.name);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitMethodCall = function (ast, context) {\n        var receiver = ast.receiver.visit(this);\n        if (receiver !== ast.receiver) {\n            return new MethodCall(ast.span, receiver, ast.name, this.visitAll(ast.args));\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitSafeMethodCall = function (ast, context) {\n        var receiver = ast.receiver.visit(this);\n        var args = this.visitAll(ast.args);\n        if (receiver !== ast.receiver || args !== ast.args) {\n            return new SafeMethodCall(ast.span, receiver, ast.name, args);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitFunctionCall = function (ast, context) {\n        var target = ast.target && ast.target.visit(this);\n        var args = this.visitAll(ast.args);\n        if (target !== ast.target || args !== ast.args) {\n            return new FunctionCall(ast.span, target, args);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitLiteralArray = function (ast, context) {\n        var expressions = this.visitAll(ast.expressions);\n        if (expressions !== ast.expressions) {\n            return new LiteralArray(ast.span, expressions);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitLiteralMap = function (ast, context) {\n        var values = this.visitAll(ast.values);\n        if (values !== ast.values) {\n            return new LiteralMap(ast.span, ast.keys, values);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitBinary = function (ast, context) {\n        var left = ast.left.visit(this);\n        var right = ast.right.visit(this);\n        if (left !== ast.left || right !== ast.right) {\n            return new Binary(ast.span, ast.operation, left, right);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitPrefixNot = function (ast, context) {\n        var expression = ast.expression.visit(this);\n        if (expression !== ast.expression) {\n            return new PrefixNot(ast.span, expression);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitNonNullAssert = function (ast, context) {\n        var expression = ast.expression.visit(this);\n        if (expression !== ast.expression) {\n            return new NonNullAssert(ast.span, expression);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitConditional = function (ast, context) {\n        var condition = ast.condition.visit(this);\n        var trueExp = ast.trueExp.visit(this);\n        var falseExp = ast.falseExp.visit(this);\n        if (condition !== ast.condition || trueExp !== ast.trueExp || falseExp !== falseExp) {\n            return new Conditional(ast.span, condition, trueExp, falseExp);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitPipe = function (ast, context) {\n        var exp = ast.exp.visit(this);\n        var args = this.visitAll(ast.args);\n        if (exp !== ast.exp || args !== ast.args) {\n            return new BindingPipe(ast.span, exp, ast.name, args);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitKeyedRead = function (ast, context) {\n        var obj = ast.obj.visit(this);\n        var key = ast.key.visit(this);\n        if (obj !== ast.obj || key !== ast.key) {\n            return new KeyedRead(ast.span, obj, key);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitKeyedWrite = function (ast, context) {\n        var obj = ast.obj.visit(this);\n        var key = ast.key.visit(this);\n        var value = ast.value.visit(this);\n        if (obj !== ast.obj || key !== ast.key || value !== ast.value) {\n            return new KeyedWrite(ast.span, obj, key, value);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitAll = function (asts) {\n        var res = new Array(asts.length);\n        var modified = false;\n        for (var i = 0; i < asts.length; ++i) {\n            var original = asts[i];\n            var value = original.visit(this);\n            res[i] = value;\n            modified = modified || value !== original;\n        }\n        return modified ? res : asts;\n    };\n    AstMemoryEfficientTransformer.prototype.visitChain = function (ast, context) {\n        var expressions = this.visitAll(ast.expressions);\n        if (expressions !== ast.expressions) {\n            return new Chain(ast.span, expressions);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitQuote = function (ast, context) { return ast; };\n    return AstMemoryEfficientTransformer;\n}());\nfunction visitAstChildren(ast, visitor, context) {\n    function visit(ast) {\n        visitor.visit && visitor.visit(ast, context) || ast.visit(visitor, context);\n    }\n    function visitAll(asts) { asts.forEach(visit); }\n    ast.visit({\n        visitBinary: function (ast) {\n            visit(ast.left);\n            visit(ast.right);\n        },\n        visitChain: function (ast) { visitAll(ast.expressions); },\n        visitConditional: function (ast) {\n            visit(ast.condition);\n            visit(ast.trueExp);\n            visit(ast.falseExp);\n        },\n        visitFunctionCall: function (ast) {\n            if (ast.target) {\n                visit(ast.target);\n            }\n            visitAll(ast.args);\n        },\n        visitImplicitReceiver: function (ast) { },\n        visitInterpolation: function (ast) { visitAll(ast.expressions); },\n        visitKeyedRead: function (ast) {\n            visit(ast.obj);\n            visit(ast.key);\n        },\n        visitKeyedWrite: function (ast) {\n            visit(ast.obj);\n            visit(ast.key);\n            visit(ast.obj);\n        },\n        visitLiteralArray: function (ast) { visitAll(ast.expressions); },\n        visitLiteralMap: function (ast) { },\n        visitLiteralPrimitive: function (ast) { },\n        visitMethodCall: function (ast) {\n            visit(ast.receiver);\n            visitAll(ast.args);\n        },\n        visitPipe: function (ast) {\n            visit(ast.exp);\n            visitAll(ast.args);\n        },\n        visitPrefixNot: function (ast) { visit(ast.expression); },\n        visitNonNullAssert: function (ast) { visit(ast.expression); },\n        visitPropertyRead: function (ast) { visit(ast.receiver); },\n        visitPropertyWrite: function (ast) {\n            visit(ast.receiver);\n            visit(ast.value);\n        },\n        visitQuote: function (ast) { },\n        visitSafeMethodCall: function (ast) {\n            visit(ast.receiver);\n            visitAll(ast.args);\n        },\n        visitSafePropertyRead: function (ast) { visit(ast.receiver); },\n    });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar SplitInterpolation = /** @class */ (function () {\n    function SplitInterpolation(strings, expressions, offsets) {\n        this.strings = strings;\n        this.expressions = expressions;\n        this.offsets = offsets;\n    }\n    return SplitInterpolation;\n}());\nvar TemplateBindingParseResult = /** @class */ (function () {\n    function TemplateBindingParseResult(templateBindings, warnings, errors) {\n        this.templateBindings = templateBindings;\n        this.warnings = warnings;\n        this.errors = errors;\n    }\n    return TemplateBindingParseResult;\n}());\nfunction _createInterpolateRegExp(config) {\n    var pattern = escapeRegExp(config.start) + '([\\\\s\\\\S]*?)' + escapeRegExp(config.end);\n    return new RegExp(pattern, 'g');\n}\nvar Parser = /** @class */ (function () {\n    function Parser(_lexer) {\n        this._lexer = _lexer;\n        this.errors = [];\n    }\n    Parser.prototype.parseAction = function (input, location, interpolationConfig) {\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        this._checkNoInterpolation(input, location, interpolationConfig);\n        var sourceToLex = this._stripComments(input);\n        var tokens = this._lexer.tokenize(this._stripComments(input));\n        var ast = new _ParseAST(input, location, tokens, sourceToLex.length, true, this.errors, input.length - sourceToLex.length)\n            .parseChain();\n        return new ASTWithSource(ast, input, location, this.errors);\n    };\n    Parser.prototype.parseBinding = function (input, location, interpolationConfig) {\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var ast = this._parseBindingAst(input, location, interpolationConfig);\n        return new ASTWithSource(ast, input, location, this.errors);\n    };\n    Parser.prototype.parseSimpleBinding = function (input, location, interpolationConfig) {\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var ast = this._parseBindingAst(input, location, interpolationConfig);\n        var errors = SimpleExpressionChecker.check(ast);\n        if (errors.length > 0) {\n            this._reportError(\"Host binding expression cannot contain \" + errors.join(' '), input, location);\n        }\n        return new ASTWithSource(ast, input, location, this.errors);\n    };\n    Parser.prototype._reportError = function (message, input, errLocation, ctxLocation) {\n        this.errors.push(new ParserError(message, input, errLocation, ctxLocation));\n    };\n    Parser.prototype._parseBindingAst = function (input, location, interpolationConfig) {\n        // Quotes expressions use 3rd-party expression language. We don't want to use\n        // our lexer or parser for that, so we check for that ahead of time.\n        var quote = this._parseQuote(input, location);\n        if (quote != null) {\n            return quote;\n        }\n        this._checkNoInterpolation(input, location, interpolationConfig);\n        var sourceToLex = this._stripComments(input);\n        var tokens = this._lexer.tokenize(sourceToLex);\n        return new _ParseAST(input, location, tokens, sourceToLex.length, false, this.errors, input.length - sourceToLex.length)\n            .parseChain();\n    };\n    Parser.prototype._parseQuote = function (input, location) {\n        if (input == null)\n            return null;\n        var prefixSeparatorIndex = input.indexOf(':');\n        if (prefixSeparatorIndex == -1)\n            return null;\n        var prefix = input.substring(0, prefixSeparatorIndex).trim();\n        if (!isIdentifier(prefix))\n            return null;\n        var uninterpretedExpression = input.substring(prefixSeparatorIndex + 1);\n        return new Quote(new ParseSpan(0, input.length), prefix, uninterpretedExpression, location);\n    };\n    Parser.prototype.parseTemplateBindings = function (prefixToken, input, location) {\n        var tokens = this._lexer.tokenize(input);\n        if (prefixToken) {\n            // Prefix the tokens with the tokens from prefixToken but have them take no space (0 index).\n            var prefixTokens = this._lexer.tokenize(prefixToken).map(function (t) {\n                t.index = 0;\n                return t;\n            });\n            tokens.unshift.apply(tokens, __spread(prefixTokens));\n        }\n        return new _ParseAST(input, location, tokens, input.length, false, this.errors, 0)\n            .parseTemplateBindings();\n    };\n    Parser.prototype.parseInterpolation = function (input, location, interpolationConfig) {\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var split = this.splitInterpolation(input, location, interpolationConfig);\n        if (split == null)\n            return null;\n        var expressions = [];\n        for (var i = 0; i < split.expressions.length; ++i) {\n            var expressionText = split.expressions[i];\n            var sourceToLex = this._stripComments(expressionText);\n            var tokens = this._lexer.tokenize(sourceToLex);\n            var ast = new _ParseAST(input, location, tokens, sourceToLex.length, false, this.errors, split.offsets[i] + (expressionText.length - sourceToLex.length))\n                .parseChain();\n            expressions.push(ast);\n        }\n        return new ASTWithSource(new Interpolation(new ParseSpan(0, input == null ? 0 : input.length), split.strings, expressions), input, location, this.errors);\n    };\n    Parser.prototype.splitInterpolation = function (input, location, interpolationConfig) {\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var regexp = _createInterpolateRegExp(interpolationConfig);\n        var parts = input.split(regexp);\n        if (parts.length <= 1) {\n            return null;\n        }\n        var strings = [];\n        var expressions = [];\n        var offsets = [];\n        var offset = 0;\n        for (var i = 0; i < parts.length; i++) {\n            var part = parts[i];\n            if (i % 2 === 0) {\n                // fixed string\n                strings.push(part);\n                offset += part.length;\n            }\n            else if (part.trim().length > 0) {\n                offset += interpolationConfig.start.length;\n                expressions.push(part);\n                offsets.push(offset);\n                offset += part.length + interpolationConfig.end.length;\n            }\n            else {\n                this._reportError('Blank expressions are not allowed in interpolated strings', input, \"at column \" + this._findInterpolationErrorColumn(parts, i, interpolationConfig) + \" in\", location);\n                expressions.push('$implict');\n                offsets.push(offset);\n            }\n        }\n        return new SplitInterpolation(strings, expressions, offsets);\n    };\n    Parser.prototype.wrapLiteralPrimitive = function (input, location) {\n        return new ASTWithSource(new LiteralPrimitive(new ParseSpan(0, input == null ? 0 : input.length), input), input, location, this.errors);\n    };\n    Parser.prototype._stripComments = function (input) {\n        var i = this._commentStart(input);\n        return i != null ? input.substring(0, i).trim() : input;\n    };\n    Parser.prototype._commentStart = function (input) {\n        var outerQuote = null;\n        for (var i = 0; i < input.length - 1; i++) {\n            var char = input.charCodeAt(i);\n            var nextChar = input.charCodeAt(i + 1);\n            if (char === $SLASH && nextChar == $SLASH && outerQuote == null)\n                return i;\n            if (outerQuote === char) {\n                outerQuote = null;\n            }\n            else if (outerQuote == null && isQuote(char)) {\n                outerQuote = char;\n            }\n        }\n        return null;\n    };\n    Parser.prototype._checkNoInterpolation = function (input, location, interpolationConfig) {\n        var regexp = _createInterpolateRegExp(interpolationConfig);\n        var parts = input.split(regexp);\n        if (parts.length > 1) {\n            this._reportError(\"Got interpolation (\" + interpolationConfig.start + interpolationConfig.end + \") where expression was expected\", input, \"at column \" + this._findInterpolationErrorColumn(parts, 1, interpolationConfig) + \" in\", location);\n        }\n    };\n    Parser.prototype._findInterpolationErrorColumn = function (parts, partInErrIdx, interpolationConfig) {\n        var errLocation = '';\n        for (var j = 0; j < partInErrIdx; j++) {\n            errLocation += j % 2 === 0 ?\n                parts[j] :\n                \"\" + interpolationConfig.start + parts[j] + interpolationConfig.end;\n        }\n        return errLocation.length;\n    };\n    return Parser;\n}());\nvar _ParseAST = /** @class */ (function () {\n    function _ParseAST(input, location, tokens, inputLength, parseAction, errors, offset) {\n        this.input = input;\n        this.location = location;\n        this.tokens = tokens;\n        this.inputLength = inputLength;\n        this.parseAction = parseAction;\n        this.errors = errors;\n        this.offset = offset;\n        this.rparensExpected = 0;\n        this.rbracketsExpected = 0;\n        this.rbracesExpected = 0;\n        this.index = 0;\n    }\n    _ParseAST.prototype.peek = function (offset) {\n        var i = this.index + offset;\n        return i < this.tokens.length ? this.tokens[i] : EOF;\n    };\n    Object.defineProperty(_ParseAST.prototype, \"next\", {\n        get: function () { return this.peek(0); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(_ParseAST.prototype, \"inputIndex\", {\n        get: function () {\n            return (this.index < this.tokens.length) ? this.next.index + this.offset :\n                this.inputLength + this.offset;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _ParseAST.prototype.span = function (start) { return new ParseSpan(start, this.inputIndex); };\n    _ParseAST.prototype.advance = function () { this.index++; };\n    _ParseAST.prototype.optionalCharacter = function (code) {\n        if (this.next.isCharacter(code)) {\n            this.advance();\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    _ParseAST.prototype.peekKeywordLet = function () { return this.next.isKeywordLet(); };\n    _ParseAST.prototype.peekKeywordAs = function () { return this.next.isKeywordAs(); };\n    _ParseAST.prototype.expectCharacter = function (code) {\n        if (this.optionalCharacter(code))\n            return;\n        this.error(\"Missing expected \" + String.fromCharCode(code));\n    };\n    _ParseAST.prototype.optionalOperator = function (op) {\n        if (this.next.isOperator(op)) {\n            this.advance();\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    _ParseAST.prototype.expectOperator = function (operator) {\n        if (this.optionalOperator(operator))\n            return;\n        this.error(\"Missing expected operator \" + operator);\n    };\n    _ParseAST.prototype.expectIdentifierOrKeyword = function () {\n        var n = this.next;\n        if (!n.isIdentifier() && !n.isKeyword()) {\n            this.error(\"Unexpected token \" + n + \", expected identifier or keyword\");\n            return '';\n        }\n        this.advance();\n        return n.toString();\n    };\n    _ParseAST.prototype.expectIdentifierOrKeywordOrString = function () {\n        var n = this.next;\n        if (!n.isIdentifier() && !n.isKeyword() && !n.isString()) {\n            this.error(\"Unexpected token \" + n + \", expected identifier, keyword, or string\");\n            return '';\n        }\n        this.advance();\n        return n.toString();\n    };\n    _ParseAST.prototype.parseChain = function () {\n        var exprs = [];\n        var start = this.inputIndex;\n        while (this.index < this.tokens.length) {\n            var expr = this.parsePipe();\n            exprs.push(expr);\n            if (this.optionalCharacter($SEMICOLON)) {\n                if (!this.parseAction) {\n                    this.error('Binding expression cannot contain chained expression');\n                }\n                while (this.optionalCharacter($SEMICOLON)) {\n                } // read all semicolons\n            }\n            else if (this.index < this.tokens.length) {\n                this.error(\"Unexpected token '\" + this.next + \"'\");\n            }\n        }\n        if (exprs.length == 0)\n            return new EmptyExpr(this.span(start));\n        if (exprs.length == 1)\n            return exprs[0];\n        return new Chain(this.span(start), exprs);\n    };\n    _ParseAST.prototype.parsePipe = function () {\n        var result = this.parseExpression();\n        if (this.optionalOperator('|')) {\n            if (this.parseAction) {\n                this.error('Cannot have a pipe in an action expression');\n            }\n            do {\n                var name_1 = this.expectIdentifierOrKeyword();\n                var args = [];\n                while (this.optionalCharacter($COLON)) {\n                    args.push(this.parseExpression());\n                }\n                result = new BindingPipe(this.span(result.span.start), result, name_1, args);\n            } while (this.optionalOperator('|'));\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseExpression = function () { return this.parseConditional(); };\n    _ParseAST.prototype.parseConditional = function () {\n        var start = this.inputIndex;\n        var result = this.parseLogicalOr();\n        if (this.optionalOperator('?')) {\n            var yes = this.parsePipe();\n            var no = void 0;\n            if (!this.optionalCharacter($COLON)) {\n                var end = this.inputIndex;\n                var expression = this.input.substring(start, end);\n                this.error(\"Conditional expression \" + expression + \" requires all 3 expressions\");\n                no = new EmptyExpr(this.span(start));\n            }\n            else {\n                no = this.parsePipe();\n            }\n            return new Conditional(this.span(start), result, yes, no);\n        }\n        else {\n            return result;\n        }\n    };\n    _ParseAST.prototype.parseLogicalOr = function () {\n        // '||'\n        var result = this.parseLogicalAnd();\n        while (this.optionalOperator('||')) {\n            var right = this.parseLogicalAnd();\n            result = new Binary(this.span(result.span.start), '||', result, right);\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseLogicalAnd = function () {\n        // '&&'\n        var result = this.parseEquality();\n        while (this.optionalOperator('&&')) {\n            var right = this.parseEquality();\n            result = new Binary(this.span(result.span.start), '&&', result, right);\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseEquality = function () {\n        // '==','!=','===','!=='\n        var result = this.parseRelational();\n        while (this.next.type == TokenType.Operator) {\n            var operator = this.next.strValue;\n            switch (operator) {\n                case '==':\n                case '===':\n                case '!=':\n                case '!==':\n                    this.advance();\n                    var right = this.parseRelational();\n                    result = new Binary(this.span(result.span.start), operator, result, right);\n                    continue;\n            }\n            break;\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseRelational = function () {\n        // '<', '>', '<=', '>='\n        var result = this.parseAdditive();\n        while (this.next.type == TokenType.Operator) {\n            var operator = this.next.strValue;\n            switch (operator) {\n                case '<':\n                case '>':\n                case '<=':\n                case '>=':\n                    this.advance();\n                    var right = this.parseAdditive();\n                    result = new Binary(this.span(result.span.start), operator, result, right);\n                    continue;\n            }\n            break;\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseAdditive = function () {\n        // '+', '-'\n        var result = this.parseMultiplicative();\n        while (this.next.type == TokenType.Operator) {\n            var operator = this.next.strValue;\n            switch (operator) {\n                case '+':\n                case '-':\n                    this.advance();\n                    var right = this.parseMultiplicative();\n                    result = new Binary(this.span(result.span.start), operator, result, right);\n                    continue;\n            }\n            break;\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseMultiplicative = function () {\n        // '*', '%', '/'\n        var result = this.parsePrefix();\n        while (this.next.type == TokenType.Operator) {\n            var operator = this.next.strValue;\n            switch (operator) {\n                case '*':\n                case '%':\n                case '/':\n                    this.advance();\n                    var right = this.parsePrefix();\n                    result = new Binary(this.span(result.span.start), operator, result, right);\n                    continue;\n            }\n            break;\n        }\n        return result;\n    };\n    _ParseAST.prototype.parsePrefix = function () {\n        if (this.next.type == TokenType.Operator) {\n            var start = this.inputIndex;\n            var operator = this.next.strValue;\n            var result = void 0;\n            switch (operator) {\n                case '+':\n                    this.advance();\n                    result = this.parsePrefix();\n                    return new Binary(this.span(start), '-', result, new LiteralPrimitive(new ParseSpan(start, start), 0));\n                case '-':\n                    this.advance();\n                    result = this.parsePrefix();\n                    return new Binary(this.span(start), operator, new LiteralPrimitive(new ParseSpan(start, start), 0), result);\n                case '!':\n                    this.advance();\n                    result = this.parsePrefix();\n                    return new PrefixNot(this.span(start), result);\n            }\n        }\n        return this.parseCallChain();\n    };\n    _ParseAST.prototype.parseCallChain = function () {\n        var result = this.parsePrimary();\n        while (true) {\n            if (this.optionalCharacter($PERIOD)) {\n                result = this.parseAccessMemberOrMethodCall(result, false);\n            }\n            else if (this.optionalOperator('?.')) {\n                result = this.parseAccessMemberOrMethodCall(result, true);\n            }\n            else if (this.optionalCharacter($LBRACKET)) {\n                this.rbracketsExpected++;\n                var key = this.parsePipe();\n                this.rbracketsExpected--;\n                this.expectCharacter($RBRACKET);\n                if (this.optionalOperator('=')) {\n                    var value = this.parseConditional();\n                    result = new KeyedWrite(this.span(result.span.start), result, key, value);\n                }\n                else {\n                    result = new KeyedRead(this.span(result.span.start), result, key);\n                }\n            }\n            else if (this.optionalCharacter($LPAREN)) {\n                this.rparensExpected++;\n                var args = this.parseCallArguments();\n                this.rparensExpected--;\n                this.expectCharacter($RPAREN);\n                result = new FunctionCall(this.span(result.span.start), result, args);\n            }\n            else if (this.optionalOperator('!')) {\n                result = new NonNullAssert(this.span(result.span.start), result);\n            }\n            else {\n                return result;\n            }\n        }\n    };\n    _ParseAST.prototype.parsePrimary = function () {\n        var start = this.inputIndex;\n        if (this.optionalCharacter($LPAREN)) {\n            this.rparensExpected++;\n            var result = this.parsePipe();\n            this.rparensExpected--;\n            this.expectCharacter($RPAREN);\n            return result;\n        }\n        else if (this.next.isKeywordNull()) {\n            this.advance();\n            return new LiteralPrimitive(this.span(start), null);\n        }\n        else if (this.next.isKeywordUndefined()) {\n            this.advance();\n            return new LiteralPrimitive(this.span(start), void 0);\n        }\n        else if (this.next.isKeywordTrue()) {\n            this.advance();\n            return new LiteralPrimitive(this.span(start), true);\n        }\n        else if (this.next.isKeywordFalse()) {\n            this.advance();\n            return new LiteralPrimitive(this.span(start), false);\n        }\n        else if (this.next.isKeywordThis()) {\n            this.advance();\n            return new ImplicitReceiver(this.span(start));\n        }\n        else if (this.optionalCharacter($LBRACKET)) {\n            this.rbracketsExpected++;\n            var elements = this.parseExpressionList($RBRACKET);\n            this.rbracketsExpected--;\n            this.expectCharacter($RBRACKET);\n            return new LiteralArray(this.span(start), elements);\n        }\n        else if (this.next.isCharacter($LBRACE)) {\n            return this.parseLiteralMap();\n        }\n        else if (this.next.isIdentifier()) {\n            return this.parseAccessMemberOrMethodCall(new ImplicitReceiver(this.span(start)), false);\n        }\n        else if (this.next.isNumber()) {\n            var value = this.next.toNumber();\n            this.advance();\n            return new LiteralPrimitive(this.span(start), value);\n        }\n        else if (this.next.isString()) {\n            var literalValue = this.next.toString();\n            this.advance();\n            return new LiteralPrimitive(this.span(start), literalValue);\n        }\n        else if (this.index >= this.tokens.length) {\n            this.error(\"Unexpected end of expression: \" + this.input);\n            return new EmptyExpr(this.span(start));\n        }\n        else {\n            this.error(\"Unexpected token \" + this.next);\n            return new EmptyExpr(this.span(start));\n        }\n    };\n    _ParseAST.prototype.parseExpressionList = function (terminator) {\n        var result = [];\n        if (!this.next.isCharacter(terminator)) {\n            do {\n                result.push(this.parsePipe());\n            } while (this.optionalCharacter($COMMA));\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseLiteralMap = function () {\n        var keys = [];\n        var values = [];\n        var start = this.inputIndex;\n        this.expectCharacter($LBRACE);\n        if (!this.optionalCharacter($RBRACE)) {\n            this.rbracesExpected++;\n            do {\n                var quoted = this.next.isString();\n                var key = this.expectIdentifierOrKeywordOrString();\n                keys.push({ key: key, quoted: quoted });\n                this.expectCharacter($COLON);\n                values.push(this.parsePipe());\n            } while (this.optionalCharacter($COMMA));\n            this.rbracesExpected--;\n            this.expectCharacter($RBRACE);\n        }\n        return new LiteralMap(this.span(start), keys, values);\n    };\n    _ParseAST.prototype.parseAccessMemberOrMethodCall = function (receiver, isSafe) {\n        if (isSafe === void 0) { isSafe = false; }\n        var start = receiver.span.start;\n        var id = this.expectIdentifierOrKeyword();\n        if (this.optionalCharacter($LPAREN)) {\n            this.rparensExpected++;\n            var args = this.parseCallArguments();\n            this.expectCharacter($RPAREN);\n            this.rparensExpected--;\n            var span = this.span(start);\n            return isSafe ? new SafeMethodCall(span, receiver, id, args) :\n                new MethodCall(span, receiver, id, args);\n        }\n        else {\n            if (isSafe) {\n                if (this.optionalOperator('=')) {\n                    this.error('The \\'?.\\' operator cannot be used in the assignment');\n                    return new EmptyExpr(this.span(start));\n                }\n                else {\n                    return new SafePropertyRead(this.span(start), receiver, id);\n                }\n            }\n            else {\n                if (this.optionalOperator('=')) {\n                    if (!this.parseAction) {\n                        this.error('Bindings cannot contain assignments');\n                        return new EmptyExpr(this.span(start));\n                    }\n                    var value = this.parseConditional();\n                    return new PropertyWrite(this.span(start), receiver, id, value);\n                }\n                else {\n                    return new PropertyRead(this.span(start), receiver, id);\n                }\n            }\n        }\n    };\n    _ParseAST.prototype.parseCallArguments = function () {\n        if (this.next.isCharacter($RPAREN))\n            return [];\n        var positionals = [];\n        do {\n            positionals.push(this.parsePipe());\n        } while (this.optionalCharacter($COMMA));\n        return positionals;\n    };\n    /**\n     * An identifier, a keyword, a string with an optional `-` in between.\n     */\n    _ParseAST.prototype.expectTemplateBindingKey = function () {\n        var result = '';\n        var operatorFound = false;\n        do {\n            result += this.expectIdentifierOrKeywordOrString();\n            operatorFound = this.optionalOperator('-');\n            if (operatorFound) {\n                result += '-';\n            }\n        } while (operatorFound);\n        return result.toString();\n    };\n    _ParseAST.prototype.parseTemplateBindings = function () {\n        var bindings = [];\n        var prefix = null;\n        var warnings = [];\n        while (this.index < this.tokens.length) {\n            var start = this.inputIndex;\n            var keyIsVar = this.peekKeywordLet();\n            if (keyIsVar) {\n                this.advance();\n            }\n            var rawKey = this.expectTemplateBindingKey();\n            var key = rawKey;\n            if (!keyIsVar) {\n                if (prefix == null) {\n                    prefix = key;\n                }\n                else {\n                    key = prefix + key[0].toUpperCase() + key.substring(1);\n                }\n            }\n            this.optionalCharacter($COLON);\n            var name_2 = null;\n            var expression = null;\n            if (keyIsVar) {\n                if (this.optionalOperator('=')) {\n                    name_2 = this.expectTemplateBindingKey();\n                }\n                else {\n                    name_2 = '\\$implicit';\n                }\n            }\n            else if (this.peekKeywordAs()) {\n                var letStart = this.inputIndex;\n                this.advance(); // consume `as`\n                name_2 = rawKey;\n                key = this.expectTemplateBindingKey(); // read local var name\n                keyIsVar = true;\n            }\n            else if (this.next !== EOF && !this.peekKeywordLet()) {\n                var start_1 = this.inputIndex;\n                var ast = this.parsePipe();\n                var source = this.input.substring(start_1 - this.offset, this.inputIndex - this.offset);\n                expression = new ASTWithSource(ast, source, this.location, this.errors);\n            }\n            bindings.push(new TemplateBinding(this.span(start), key, keyIsVar, name_2, expression));\n            if (this.peekKeywordAs() && !keyIsVar) {\n                var letStart = this.inputIndex;\n                this.advance(); // consume `as`\n                var letName = this.expectTemplateBindingKey(); // read local var name\n                bindings.push(new TemplateBinding(this.span(letStart), letName, true, key, null));\n            }\n            if (!this.optionalCharacter($SEMICOLON)) {\n                this.optionalCharacter($COMMA);\n            }\n        }\n        return new TemplateBindingParseResult(bindings, warnings, this.errors);\n    };\n    _ParseAST.prototype.error = function (message, index) {\n        if (index === void 0) { index = null; }\n        this.errors.push(new ParserError(message, this.input, this.locationText(index), this.location));\n        this.skip();\n    };\n    _ParseAST.prototype.locationText = function (index) {\n        if (index === void 0) { index = null; }\n        if (index == null)\n            index = this.index;\n        return (index < this.tokens.length) ? \"at column \" + (this.tokens[index].index + 1) + \" in\" :\n            \"at the end of the expression\";\n    };\n    // Error recovery should skip tokens until it encounters a recovery point. skip() treats\n    // the end of input and a ';' as unconditionally a recovery point. It also treats ')',\n    // '}' and ']' as conditional recovery points if one of calling productions is expecting\n    // one of these symbols. This allows skip() to recover from errors such as '(a.) + 1' allowing\n    // more of the AST to be retained (it doesn't skip any tokens as the ')' is retained because\n    // of the '(' begins an '(' <expr> ')' production). The recovery points of grouping symbols\n    // must be conditional as they must be skipped if none of the calling productions are not\n    // expecting the closing token else we will never make progress in the case of an\n    // extraneous group closing symbol (such as a stray ')'). This is not the case for ';' because\n    // parseChain() is always the root production and it expects a ';'.\n    // If a production expects one of these token it increments the corresponding nesting count,\n    // and then decrements it just prior to checking if the token is in the input.\n    _ParseAST.prototype.skip = function () {\n        var n = this.next;\n        while (this.index < this.tokens.length && !n.isCharacter($SEMICOLON) &&\n            (this.rparensExpected <= 0 || !n.isCharacter($RPAREN)) &&\n            (this.rbracesExpected <= 0 || !n.isCharacter($RBRACE)) &&\n            (this.rbracketsExpected <= 0 || !n.isCharacter($RBRACKET))) {\n            if (this.next.isError()) {\n                this.errors.push(new ParserError(this.next.toString(), this.input, this.locationText(), this.location));\n            }\n            this.advance();\n            n = this.next;\n        }\n    };\n    return _ParseAST;\n}());\nvar SimpleExpressionChecker = /** @class */ (function () {\n    function SimpleExpressionChecker() {\n        this.errors = [];\n    }\n    SimpleExpressionChecker.check = function (ast) {\n        var s = new SimpleExpressionChecker();\n        ast.visit(s);\n        return s.errors;\n    };\n    SimpleExpressionChecker.prototype.visitImplicitReceiver = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitInterpolation = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitLiteralPrimitive = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitPropertyRead = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitPropertyWrite = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitSafePropertyRead = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitMethodCall = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitSafeMethodCall = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitFunctionCall = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitLiteralArray = function (ast, context) { this.visitAll(ast.expressions); };\n    SimpleExpressionChecker.prototype.visitLiteralMap = function (ast, context) { this.visitAll(ast.values); };\n    SimpleExpressionChecker.prototype.visitBinary = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitPrefixNot = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitNonNullAssert = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitConditional = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitPipe = function (ast, context) { this.errors.push('pipes'); };\n    SimpleExpressionChecker.prototype.visitKeyedRead = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitKeyedWrite = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitAll = function (asts) {\n        var _this = this;\n        return asts.map(function (node) { return node.visit(_this); });\n    };\n    SimpleExpressionChecker.prototype.visitChain = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitQuote = function (ast, context) { };\n    return SimpleExpressionChecker;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ParseLocation = /** @class */ (function () {\n    function ParseLocation(file, offset, line, col) {\n        this.file = file;\n        this.offset = offset;\n        this.line = line;\n        this.col = col;\n    }\n    ParseLocation.prototype.toString = function () {\n        return this.offset != null ? this.file.url + \"@\" + this.line + \":\" + this.col : this.file.url;\n    };\n    ParseLocation.prototype.moveBy = function (delta) {\n        var source = this.file.content;\n        var len = source.length;\n        var offset = this.offset;\n        var line = this.line;\n        var col = this.col;\n        while (offset > 0 && delta < 0) {\n            offset--;\n            delta++;\n            var ch = source.charCodeAt(offset);\n            if (ch == $LF) {\n                line--;\n                var priorLine = source.substr(0, offset - 1).lastIndexOf(String.fromCharCode($LF));\n                col = priorLine > 0 ? offset - priorLine : offset;\n            }\n            else {\n                col--;\n            }\n        }\n        while (offset < len && delta > 0) {\n            var ch = source.charCodeAt(offset);\n            offset++;\n            delta--;\n            if (ch == $LF) {\n                line++;\n                col = 0;\n            }\n            else {\n                col++;\n            }\n        }\n        return new ParseLocation(this.file, offset, line, col);\n    };\n    // Return the source around the location\n    // Up to `maxChars` or `maxLines` on each side of the location\n    ParseLocation.prototype.getContext = function (maxChars, maxLines) {\n        var content = this.file.content;\n        var startOffset = this.offset;\n        if (startOffset != null) {\n            if (startOffset > content.length - 1) {\n                startOffset = content.length - 1;\n            }\n            var endOffset = startOffset;\n            var ctxChars = 0;\n            var ctxLines = 0;\n            while (ctxChars < maxChars && startOffset > 0) {\n                startOffset--;\n                ctxChars++;\n                if (content[startOffset] == '\\n') {\n                    if (++ctxLines == maxLines) {\n                        break;\n                    }\n                }\n            }\n            ctxChars = 0;\n            ctxLines = 0;\n            while (ctxChars < maxChars && endOffset < content.length - 1) {\n                endOffset++;\n                ctxChars++;\n                if (content[endOffset] == '\\n') {\n                    if (++ctxLines == maxLines) {\n                        break;\n                    }\n                }\n            }\n            return {\n                before: content.substring(startOffset, this.offset),\n                after: content.substring(this.offset, endOffset + 1),\n            };\n        }\n        return null;\n    };\n    return ParseLocation;\n}());\nvar ParseSourceFile = /** @class */ (function () {\n    function ParseSourceFile(content, url) {\n        this.content = content;\n        this.url = url;\n    }\n    return ParseSourceFile;\n}());\nvar ParseSourceSpan = /** @class */ (function () {\n    function ParseSourceSpan(start, end, details) {\n        if (details === void 0) { details = null; }\n        this.start = start;\n        this.end = end;\n        this.details = details;\n    }\n    ParseSourceSpan.prototype.toString = function () {\n        return this.start.file.content.substring(this.start.offset, this.end.offset);\n    };\n    return ParseSourceSpan;\n}());\nvar ParseErrorLevel;\n(function (ParseErrorLevel) {\n    ParseErrorLevel[ParseErrorLevel[\"WARNING\"] = 0] = \"WARNING\";\n    ParseErrorLevel[ParseErrorLevel[\"ERROR\"] = 1] = \"ERROR\";\n})(ParseErrorLevel || (ParseErrorLevel = {}));\nvar ParseError = /** @class */ (function () {\n    function ParseError(span, msg, level) {\n        if (level === void 0) { level = ParseErrorLevel.ERROR; }\n        this.span = span;\n        this.msg = msg;\n        this.level = level;\n    }\n    ParseError.prototype.contextualMessage = function () {\n        var ctx = this.span.start.getContext(100, 3);\n        return ctx ? this.msg + \" (\\\"\" + ctx.before + \"[\" + ParseErrorLevel[this.level] + \" ->]\" + ctx.after + \"\\\")\" :\n            this.msg;\n    };\n    ParseError.prototype.toString = function () {\n        var details = this.span.details ? \", \" + this.span.details : '';\n        return this.contextualMessage() + \": \" + this.span.start + details;\n    };\n    return ParseError;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TokenType$1;\n(function (TokenType) {\n    TokenType[TokenType[\"TAG_OPEN_START\"] = 0] = \"TAG_OPEN_START\";\n    TokenType[TokenType[\"TAG_OPEN_END\"] = 1] = \"TAG_OPEN_END\";\n    TokenType[TokenType[\"TAG_OPEN_END_VOID\"] = 2] = \"TAG_OPEN_END_VOID\";\n    TokenType[TokenType[\"TAG_CLOSE\"] = 3] = \"TAG_CLOSE\";\n    TokenType[TokenType[\"TEXT\"] = 4] = \"TEXT\";\n    TokenType[TokenType[\"ESCAPABLE_RAW_TEXT\"] = 5] = \"ESCAPABLE_RAW_TEXT\";\n    TokenType[TokenType[\"RAW_TEXT\"] = 6] = \"RAW_TEXT\";\n    TokenType[TokenType[\"COMMENT_START\"] = 7] = \"COMMENT_START\";\n    TokenType[TokenType[\"COMMENT_END\"] = 8] = \"COMMENT_END\";\n    TokenType[TokenType[\"CDATA_START\"] = 9] = \"CDATA_START\";\n    TokenType[TokenType[\"CDATA_END\"] = 10] = \"CDATA_END\";\n    TokenType[TokenType[\"ATTR_NAME\"] = 11] = \"ATTR_NAME\";\n    TokenType[TokenType[\"ATTR_VALUE\"] = 12] = \"ATTR_VALUE\";\n    TokenType[TokenType[\"DOC_TYPE\"] = 13] = \"DOC_TYPE\";\n    TokenType[TokenType[\"EXPANSION_FORM_START\"] = 14] = \"EXPANSION_FORM_START\";\n    TokenType[TokenType[\"EXPANSION_CASE_VALUE\"] = 15] = \"EXPANSION_CASE_VALUE\";\n    TokenType[TokenType[\"EXPANSION_CASE_EXP_START\"] = 16] = \"EXPANSION_CASE_EXP_START\";\n    TokenType[TokenType[\"EXPANSION_CASE_EXP_END\"] = 17] = \"EXPANSION_CASE_EXP_END\";\n    TokenType[TokenType[\"EXPANSION_FORM_END\"] = 18] = \"EXPANSION_FORM_END\";\n    TokenType[TokenType[\"EOF\"] = 19] = \"EOF\";\n})(TokenType$1 || (TokenType$1 = {}));\nvar Token$1 = /** @class */ (function () {\n    function Token(type, parts, sourceSpan) {\n        this.type = type;\n        this.parts = parts;\n        this.sourceSpan = sourceSpan;\n    }\n    return Token;\n}());\nvar TokenError = /** @class */ (function (_super) {\n    __extends(TokenError, _super);\n    function TokenError(errorMsg, tokenType, span) {\n        var _this = _super.call(this, span, errorMsg) || this;\n        _this.tokenType = tokenType;\n        return _this;\n    }\n    return TokenError;\n}(ParseError));\nvar TokenizeResult = /** @class */ (function () {\n    function TokenizeResult(tokens, errors) {\n        this.tokens = tokens;\n        this.errors = errors;\n    }\n    return TokenizeResult;\n}());\nfunction tokenize(source, url, getTagDefinition, tokenizeExpansionForms, interpolationConfig) {\n    if (tokenizeExpansionForms === void 0) { tokenizeExpansionForms = false; }\n    if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n    return new _Tokenizer(new ParseSourceFile(source, url), getTagDefinition, tokenizeExpansionForms, interpolationConfig)\n        .tokenize();\n}\nvar _CR_OR_CRLF_REGEXP = /\\r\\n?/g;\nfunction _unexpectedCharacterErrorMsg(charCode) {\n    var char = charCode === $EOF ? 'EOF' : String.fromCharCode(charCode);\n    return \"Unexpected character \\\"\" + char + \"\\\"\";\n}\nfunction _unknownEntityErrorMsg(entitySrc) {\n    return \"Unknown entity \\\"\" + entitySrc + \"\\\" - use the \\\"&#<decimal>;\\\" or  \\\"&#x<hex>;\\\" syntax\";\n}\nvar _ControlFlowError = /** @class */ (function () {\n    function _ControlFlowError(error) {\n        this.error = error;\n    }\n    return _ControlFlowError;\n}());\n// See http://www.w3.org/TR/html51/syntax.html#writing\nvar _Tokenizer = /** @class */ (function () {\n    /**\n     * @param _file The html source\n     * @param _getTagDefinition\n     * @param _tokenizeIcu Whether to tokenize ICU messages (considered as text nodes when false)\n     * @param _interpolationConfig\n     */\n    function _Tokenizer(_file, _getTagDefinition, _tokenizeIcu, _interpolationConfig) {\n        if (_interpolationConfig === void 0) { _interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        this._file = _file;\n        this._getTagDefinition = _getTagDefinition;\n        this._tokenizeIcu = _tokenizeIcu;\n        this._interpolationConfig = _interpolationConfig;\n        // Note: this is always lowercase!\n        this._peek = -1;\n        this._nextPeek = -1;\n        this._index = -1;\n        this._line = 0;\n        this._column = -1;\n        this._expansionCaseStack = [];\n        this._inInterpolation = false;\n        this.tokens = [];\n        this.errors = [];\n        this._input = _file.content;\n        this._length = _file.content.length;\n        this._advance();\n    }\n    _Tokenizer.prototype._processCarriageReturns = function (content) {\n        // http://www.w3.org/TR/html5/syntax.html#preprocessing-the-input-stream\n        // In order to keep the original position in the source, we can not\n        // pre-process it.\n        // Instead CRs are processed right before instantiating the tokens.\n        return content.replace(_CR_OR_CRLF_REGEXP, '\\n');\n    };\n    _Tokenizer.prototype.tokenize = function () {\n        while (this._peek !== $EOF) {\n            var start = this._getLocation();\n            try {\n                if (this._attemptCharCode($LT)) {\n                    if (this._attemptCharCode($BANG)) {\n                        if (this._attemptCharCode($LBRACKET)) {\n                            this._consumeCdata(start);\n                        }\n                        else if (this._attemptCharCode($MINUS)) {\n                            this._consumeComment(start);\n                        }\n                        else {\n                            this._consumeDocType(start);\n                        }\n                    }\n                    else if (this._attemptCharCode($SLASH)) {\n                        this._consumeTagClose(start);\n                    }\n                    else {\n                        this._consumeTagOpen(start);\n                    }\n                }\n                else if (!(this._tokenizeIcu && this._tokenizeExpansionForm())) {\n                    this._consumeText();\n                }\n            }\n            catch (e) {\n                if (e instanceof _ControlFlowError) {\n                    this.errors.push(e.error);\n                }\n                else {\n                    throw e;\n                }\n            }\n        }\n        this._beginToken(TokenType$1.EOF);\n        this._endToken([]);\n        return new TokenizeResult(mergeTextTokens(this.tokens), this.errors);\n    };\n    /**\n     * @returns whether an ICU token has been created\n     * @internal\n     */\n    _Tokenizer.prototype._tokenizeExpansionForm = function () {\n        if (isExpansionFormStart(this._input, this._index, this._interpolationConfig)) {\n            this._consumeExpansionFormStart();\n            return true;\n        }\n        if (isExpansionCaseStart(this._peek) && this._isInExpansionForm()) {\n            this._consumeExpansionCaseStart();\n            return true;\n        }\n        if (this._peek === $RBRACE) {\n            if (this._isInExpansionCase()) {\n                this._consumeExpansionCaseEnd();\n                return true;\n            }\n            if (this._isInExpansionForm()) {\n                this._consumeExpansionFormEnd();\n                return true;\n            }\n        }\n        return false;\n    };\n    _Tokenizer.prototype._getLocation = function () {\n        return new ParseLocation(this._file, this._index, this._line, this._column);\n    };\n    _Tokenizer.prototype._getSpan = function (start, end) {\n        if (start === void 0) { start = this._getLocation(); }\n        if (end === void 0) { end = this._getLocation(); }\n        return new ParseSourceSpan(start, end);\n    };\n    _Tokenizer.prototype._beginToken = function (type, start) {\n        if (start === void 0) { start = this._getLocation(); }\n        this._currentTokenStart = start;\n        this._currentTokenType = type;\n    };\n    _Tokenizer.prototype._endToken = function (parts, end) {\n        if (end === void 0) { end = this._getLocation(); }\n        var token = new Token$1(this._currentTokenType, parts, new ParseSourceSpan(this._currentTokenStart, end));\n        this.tokens.push(token);\n        this._currentTokenStart = null;\n        this._currentTokenType = null;\n        return token;\n    };\n    _Tokenizer.prototype._createError = function (msg, span) {\n        if (this._isInExpansionForm()) {\n            msg += \" (Do you have an unescaped \\\"{\\\" in your template? Use \\\"{{ '{' }}\\\") to escape it.)\";\n        }\n        var error = new TokenError(msg, this._currentTokenType, span);\n        this._currentTokenStart = null;\n        this._currentTokenType = null;\n        return new _ControlFlowError(error);\n    };\n    _Tokenizer.prototype._advance = function () {\n        if (this._index >= this._length) {\n            throw this._createError(_unexpectedCharacterErrorMsg($EOF), this._getSpan());\n        }\n        if (this._peek === $LF) {\n            this._line++;\n            this._column = 0;\n        }\n        else if (this._peek !== $LF && this._peek !== $CR) {\n            this._column++;\n        }\n        this._index++;\n        this._peek = this._index >= this._length ? $EOF : this._input.charCodeAt(this._index);\n        this._nextPeek =\n            this._index + 1 >= this._length ? $EOF : this._input.charCodeAt(this._index + 1);\n    };\n    _Tokenizer.prototype._attemptCharCode = function (charCode) {\n        if (this._peek === charCode) {\n            this._advance();\n            return true;\n        }\n        return false;\n    };\n    _Tokenizer.prototype._attemptCharCodeCaseInsensitive = function (charCode) {\n        if (compareCharCodeCaseInsensitive(this._peek, charCode)) {\n            this._advance();\n            return true;\n        }\n        return false;\n    };\n    _Tokenizer.prototype._requireCharCode = function (charCode) {\n        var location = this._getLocation();\n        if (!this._attemptCharCode(charCode)) {\n            throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan(location, location));\n        }\n    };\n    _Tokenizer.prototype._attemptStr = function (chars) {\n        var len = chars.length;\n        if (this._index + len > this._length) {\n            return false;\n        }\n        var initialPosition = this._savePosition();\n        for (var i = 0; i < len; i++) {\n            if (!this._attemptCharCode(chars.charCodeAt(i))) {\n                // If attempting to parse the string fails, we want to reset the parser\n                // to where it was before the attempt\n                this._restorePosition(initialPosition);\n                return false;\n            }\n        }\n        return true;\n    };\n    _Tokenizer.prototype._attemptStrCaseInsensitive = function (chars) {\n        for (var i = 0; i < chars.length; i++) {\n            if (!this._attemptCharCodeCaseInsensitive(chars.charCodeAt(i))) {\n                return false;\n            }\n        }\n        return true;\n    };\n    _Tokenizer.prototype._requireStr = function (chars) {\n        var location = this._getLocation();\n        if (!this._attemptStr(chars)) {\n            throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan(location));\n        }\n    };\n    _Tokenizer.prototype._attemptCharCodeUntilFn = function (predicate) {\n        while (!predicate(this._peek)) {\n            this._advance();\n        }\n    };\n    _Tokenizer.prototype._requireCharCodeUntilFn = function (predicate, len) {\n        var start = this._getLocation();\n        this._attemptCharCodeUntilFn(predicate);\n        if (this._index - start.offset < len) {\n            throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan(start, start));\n        }\n    };\n    _Tokenizer.prototype._attemptUntilChar = function (char) {\n        while (this._peek !== char) {\n            this._advance();\n        }\n    };\n    _Tokenizer.prototype._readChar = function (decodeEntities) {\n        if (decodeEntities && this._peek === $AMPERSAND) {\n            return this._decodeEntity();\n        }\n        else {\n            var index = this._index;\n            this._advance();\n            return this._input[index];\n        }\n    };\n    _Tokenizer.prototype._decodeEntity = function () {\n        var start = this._getLocation();\n        this._advance();\n        if (this._attemptCharCode($HASH)) {\n            var isHex = this._attemptCharCode($x) || this._attemptCharCode($X);\n            var numberStart = this._getLocation().offset;\n            this._attemptCharCodeUntilFn(isDigitEntityEnd);\n            if (this._peek != $SEMICOLON) {\n                throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan());\n            }\n            this._advance();\n            var strNum = this._input.substring(numberStart, this._index - 1);\n            try {\n                var charCode = parseInt(strNum, isHex ? 16 : 10);\n                return String.fromCharCode(charCode);\n            }\n            catch (e) {\n                var entity = this._input.substring(start.offset + 1, this._index - 1);\n                throw this._createError(_unknownEntityErrorMsg(entity), this._getSpan(start));\n            }\n        }\n        else {\n            var startPosition = this._savePosition();\n            this._attemptCharCodeUntilFn(isNamedEntityEnd);\n            if (this._peek != $SEMICOLON) {\n                this._restorePosition(startPosition);\n                return '&';\n            }\n            this._advance();\n            var name_1 = this._input.substring(start.offset + 1, this._index - 1);\n            var char = NAMED_ENTITIES[name_1];\n            if (!char) {\n                throw this._createError(_unknownEntityErrorMsg(name_1), this._getSpan(start));\n            }\n            return char;\n        }\n    };\n    _Tokenizer.prototype._consumeRawText = function (decodeEntities, firstCharOfEnd, attemptEndRest) {\n        var tagCloseStart;\n        var textStart = this._getLocation();\n        this._beginToken(decodeEntities ? TokenType$1.ESCAPABLE_RAW_TEXT : TokenType$1.RAW_TEXT, textStart);\n        var parts = [];\n        while (true) {\n            tagCloseStart = this._getLocation();\n            if (this._attemptCharCode(firstCharOfEnd) && attemptEndRest()) {\n                break;\n            }\n            if (this._index > tagCloseStart.offset) {\n                // add the characters consumed by the previous if statement to the output\n                parts.push(this._input.substring(tagCloseStart.offset, this._index));\n            }\n            while (this._peek !== firstCharOfEnd) {\n                parts.push(this._readChar(decodeEntities));\n            }\n        }\n        return this._endToken([this._processCarriageReturns(parts.join(''))], tagCloseStart);\n    };\n    _Tokenizer.prototype._consumeComment = function (start) {\n        var _this = this;\n        this._beginToken(TokenType$1.COMMENT_START, start);\n        this._requireCharCode($MINUS);\n        this._endToken([]);\n        var textToken = this._consumeRawText(false, $MINUS, function () { return _this._attemptStr('->'); });\n        this._beginToken(TokenType$1.COMMENT_END, textToken.sourceSpan.end);\n        this._endToken([]);\n    };\n    _Tokenizer.prototype._consumeCdata = function (start) {\n        var _this = this;\n        this._beginToken(TokenType$1.CDATA_START, start);\n        this._requireStr('CDATA[');\n        this._endToken([]);\n        var textToken = this._consumeRawText(false, $RBRACKET, function () { return _this._attemptStr(']>'); });\n        this._beginToken(TokenType$1.CDATA_END, textToken.sourceSpan.end);\n        this._endToken([]);\n    };\n    _Tokenizer.prototype._consumeDocType = function (start) {\n        this._beginToken(TokenType$1.DOC_TYPE, start);\n        this._attemptUntilChar($GT);\n        this._advance();\n        this._endToken([this._input.substring(start.offset + 2, this._index - 1)]);\n    };\n    _Tokenizer.prototype._consumePrefixAndName = function () {\n        var nameOrPrefixStart = this._index;\n        var prefix = null;\n        while (this._peek !== $COLON && !isPrefixEnd(this._peek)) {\n            this._advance();\n        }\n        var nameStart;\n        if (this._peek === $COLON) {\n            this._advance();\n            prefix = this._input.substring(nameOrPrefixStart, this._index - 1);\n            nameStart = this._index;\n        }\n        else {\n            nameStart = nameOrPrefixStart;\n        }\n        this._requireCharCodeUntilFn(isNameEnd, this._index === nameStart ? 1 : 0);\n        var name = this._input.substring(nameStart, this._index);\n        return [prefix, name];\n    };\n    _Tokenizer.prototype._consumeTagOpen = function (start) {\n        var savedPos = this._savePosition();\n        var tagName;\n        var lowercaseTagName;\n        try {\n            if (!isAsciiLetter(this._peek)) {\n                throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan());\n            }\n            var nameStart = this._index;\n            this._consumeTagOpenStart(start);\n            tagName = this._input.substring(nameStart, this._index);\n            lowercaseTagName = tagName.toLowerCase();\n            this._attemptCharCodeUntilFn(isNotWhitespace);\n            while (this._peek !== $SLASH && this._peek !== $GT) {\n                this._consumeAttributeName();\n                this._attemptCharCodeUntilFn(isNotWhitespace);\n                if (this._attemptCharCode($EQ)) {\n                    this._attemptCharCodeUntilFn(isNotWhitespace);\n                    this._consumeAttributeValue();\n                }\n                this._attemptCharCodeUntilFn(isNotWhitespace);\n            }\n            this._consumeTagOpenEnd();\n        }\n        catch (e) {\n            if (e instanceof _ControlFlowError) {\n                // When the start tag is invalid, assume we want a \"<\"\n                this._restorePosition(savedPos);\n                // Back to back text tokens are merged at the end\n                this._beginToken(TokenType$1.TEXT, start);\n                this._endToken(['<']);\n                return;\n            }\n            throw e;\n        }\n        var contentTokenType = this._getTagDefinition(tagName).contentType;\n        if (contentTokenType === TagContentType.RAW_TEXT) {\n            this._consumeRawTextWithTagClose(lowercaseTagName, false);\n        }\n        else if (contentTokenType === TagContentType.ESCAPABLE_RAW_TEXT) {\n            this._consumeRawTextWithTagClose(lowercaseTagName, true);\n        }\n    };\n    _Tokenizer.prototype._consumeRawTextWithTagClose = function (lowercaseTagName, decodeEntities) {\n        var _this = this;\n        var textToken = this._consumeRawText(decodeEntities, $LT, function () {\n            if (!_this._attemptCharCode($SLASH))\n                return false;\n            _this._attemptCharCodeUntilFn(isNotWhitespace);\n            if (!_this._attemptStrCaseInsensitive(lowercaseTagName))\n                return false;\n            _this._attemptCharCodeUntilFn(isNotWhitespace);\n            return _this._attemptCharCode($GT);\n        });\n        this._beginToken(TokenType$1.TAG_CLOSE, textToken.sourceSpan.end);\n        this._endToken([null, lowercaseTagName]);\n    };\n    _Tokenizer.prototype._consumeTagOpenStart = function (start) {\n        this._beginToken(TokenType$1.TAG_OPEN_START, start);\n        var parts = this._consumePrefixAndName();\n        this._endToken(parts);\n    };\n    _Tokenizer.prototype._consumeAttributeName = function () {\n        this._beginToken(TokenType$1.ATTR_NAME);\n        var prefixAndName = this._consumePrefixAndName();\n        this._endToken(prefixAndName);\n    };\n    _Tokenizer.prototype._consumeAttributeValue = function () {\n        this._beginToken(TokenType$1.ATTR_VALUE);\n        var value;\n        if (this._peek === $SQ || this._peek === $DQ) {\n            var quoteChar = this._peek;\n            this._advance();\n            var parts = [];\n            while (this._peek !== quoteChar) {\n                parts.push(this._readChar(true));\n            }\n            value = parts.join('');\n            this._advance();\n        }\n        else {\n            var valueStart = this._index;\n            this._requireCharCodeUntilFn(isNameEnd, 1);\n            value = this._input.substring(valueStart, this._index);\n        }\n        this._endToken([this._processCarriageReturns(value)]);\n    };\n    _Tokenizer.prototype._consumeTagOpenEnd = function () {\n        var tokenType = this._attemptCharCode($SLASH) ? TokenType$1.TAG_OPEN_END_VOID : TokenType$1.TAG_OPEN_END;\n        this._beginToken(tokenType);\n        this._requireCharCode($GT);\n        this._endToken([]);\n    };\n    _Tokenizer.prototype._consumeTagClose = function (start) {\n        this._beginToken(TokenType$1.TAG_CLOSE, start);\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        var prefixAndName = this._consumePrefixAndName();\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        this._requireCharCode($GT);\n        this._endToken(prefixAndName);\n    };\n    _Tokenizer.prototype._consumeExpansionFormStart = function () {\n        this._beginToken(TokenType$1.EXPANSION_FORM_START, this._getLocation());\n        this._requireCharCode($LBRACE);\n        this._endToken([]);\n        this._expansionCaseStack.push(TokenType$1.EXPANSION_FORM_START);\n        this._beginToken(TokenType$1.RAW_TEXT, this._getLocation());\n        var condition = this._readUntil($COMMA);\n        this._endToken([condition], this._getLocation());\n        this._requireCharCode($COMMA);\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        this._beginToken(TokenType$1.RAW_TEXT, this._getLocation());\n        var type = this._readUntil($COMMA);\n        this._endToken([type], this._getLocation());\n        this._requireCharCode($COMMA);\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n    };\n    _Tokenizer.prototype._consumeExpansionCaseStart = function () {\n        this._beginToken(TokenType$1.EXPANSION_CASE_VALUE, this._getLocation());\n        var value = this._readUntil($LBRACE).trim();\n        this._endToken([value], this._getLocation());\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        this._beginToken(TokenType$1.EXPANSION_CASE_EXP_START, this._getLocation());\n        this._requireCharCode($LBRACE);\n        this._endToken([], this._getLocation());\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        this._expansionCaseStack.push(TokenType$1.EXPANSION_CASE_EXP_START);\n    };\n    _Tokenizer.prototype._consumeExpansionCaseEnd = function () {\n        this._beginToken(TokenType$1.EXPANSION_CASE_EXP_END, this._getLocation());\n        this._requireCharCode($RBRACE);\n        this._endToken([], this._getLocation());\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        this._expansionCaseStack.pop();\n    };\n    _Tokenizer.prototype._consumeExpansionFormEnd = function () {\n        this._beginToken(TokenType$1.EXPANSION_FORM_END, this._getLocation());\n        this._requireCharCode($RBRACE);\n        this._endToken([]);\n        this._expansionCaseStack.pop();\n    };\n    _Tokenizer.prototype._consumeText = function () {\n        var start = this._getLocation();\n        this._beginToken(TokenType$1.TEXT, start);\n        var parts = [];\n        do {\n            if (this._interpolationConfig && this._attemptStr(this._interpolationConfig.start)) {\n                parts.push(this._interpolationConfig.start);\n                this._inInterpolation = true;\n            }\n            else if (this._interpolationConfig && this._inInterpolation &&\n                this._attemptStr(this._interpolationConfig.end)) {\n                parts.push(this._interpolationConfig.end);\n                this._inInterpolation = false;\n            }\n            else {\n                parts.push(this._readChar(true));\n            }\n        } while (!this._isTextEnd());\n        this._endToken([this._processCarriageReturns(parts.join(''))]);\n    };\n    _Tokenizer.prototype._isTextEnd = function () {\n        if (this._peek === $LT || this._peek === $EOF) {\n            return true;\n        }\n        if (this._tokenizeIcu && !this._inInterpolation) {\n            if (isExpansionFormStart(this._input, this._index, this._interpolationConfig)) {\n                // start of an expansion form\n                return true;\n            }\n            if (this._peek === $RBRACE && this._isInExpansionCase()) {\n                // end of and expansion case\n                return true;\n            }\n        }\n        return false;\n    };\n    _Tokenizer.prototype._savePosition = function () {\n        return [this._peek, this._index, this._column, this._line, this.tokens.length];\n    };\n    _Tokenizer.prototype._readUntil = function (char) {\n        var start = this._index;\n        this._attemptUntilChar(char);\n        return this._input.substring(start, this._index);\n    };\n    _Tokenizer.prototype._restorePosition = function (position) {\n        this._peek = position[0];\n        this._index = position[1];\n        this._column = position[2];\n        this._line = position[3];\n        var nbTokens = position[4];\n        if (nbTokens < this.tokens.length) {\n            // remove any extra tokens\n            this.tokens = this.tokens.slice(0, nbTokens);\n        }\n    };\n    _Tokenizer.prototype._isInExpansionCase = function () {\n        return this._expansionCaseStack.length > 0 &&\n            this._expansionCaseStack[this._expansionCaseStack.length - 1] ===\n                TokenType$1.EXPANSION_CASE_EXP_START;\n    };\n    _Tokenizer.prototype._isInExpansionForm = function () {\n        return this._expansionCaseStack.length > 0 &&\n            this._expansionCaseStack[this._expansionCaseStack.length - 1] ===\n                TokenType$1.EXPANSION_FORM_START;\n    };\n    return _Tokenizer;\n}());\nfunction isNotWhitespace(code) {\n    return !isWhitespace(code) || code === $EOF;\n}\nfunction isNameEnd(code) {\n    return isWhitespace(code) || code === $GT || code === $SLASH ||\n        code === $SQ || code === $DQ || code === $EQ;\n}\nfunction isPrefixEnd(code) {\n    return (code < $a || $z < code) && (code < $A || $Z < code) &&\n        (code < $0 || code > $9);\n}\nfunction isDigitEntityEnd(code) {\n    return code == $SEMICOLON || code == $EOF || !isAsciiHexDigit(code);\n}\nfunction isNamedEntityEnd(code) {\n    return code == $SEMICOLON || code == $EOF || !isAsciiLetter(code);\n}\nfunction isExpansionFormStart(input, offset, interpolationConfig) {\n    var isInterpolationStart = interpolationConfig ? input.indexOf(interpolationConfig.start, offset) == offset : false;\n    return input.charCodeAt(offset) == $LBRACE && !isInterpolationStart;\n}\nfunction isExpansionCaseStart(peek) {\n    return peek === $EQ || isAsciiLetter(peek) || isDigit(peek);\n}\nfunction compareCharCodeCaseInsensitive(code1, code2) {\n    return toUpperCaseCharCode(code1) == toUpperCaseCharCode(code2);\n}\nfunction toUpperCaseCharCode(code) {\n    return code >= $a && code <= $z ? code - $a + $A : code;\n}\nfunction mergeTextTokens(srcTokens) {\n    var dstTokens = [];\n    var lastDstToken = undefined;\n    for (var i = 0; i < srcTokens.length; i++) {\n        var token = srcTokens[i];\n        if (lastDstToken && lastDstToken.type == TokenType$1.TEXT && token.type == TokenType$1.TEXT) {\n            lastDstToken.parts[0] += token.parts[0];\n            lastDstToken.sourceSpan.end = token.sourceSpan.end;\n        }\n        else {\n            lastDstToken = token;\n            dstTokens.push(lastDstToken);\n        }\n    }\n    return dstTokens;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TreeError = /** @class */ (function (_super) {\n    __extends(TreeError, _super);\n    function TreeError(elementName, span, msg) {\n        var _this = _super.call(this, span, msg) || this;\n        _this.elementName = elementName;\n        return _this;\n    }\n    TreeError.create = function (elementName, span, msg) {\n        return new TreeError(elementName, span, msg);\n    };\n    return TreeError;\n}(ParseError));\nvar ParseTreeResult = /** @class */ (function () {\n    function ParseTreeResult(rootNodes, errors) {\n        this.rootNodes = rootNodes;\n        this.errors = errors;\n    }\n    return ParseTreeResult;\n}());\nvar Parser$1 = /** @class */ (function () {\n    function Parser(getTagDefinition) {\n        this.getTagDefinition = getTagDefinition;\n    }\n    Parser.prototype.parse = function (source, url, parseExpansionForms, interpolationConfig) {\n        if (parseExpansionForms === void 0) { parseExpansionForms = false; }\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var tokensAndErrors = tokenize(source, url, this.getTagDefinition, parseExpansionForms, interpolationConfig);\n        var treeAndErrors = new _TreeBuilder(tokensAndErrors.tokens, this.getTagDefinition).build();\n        return new ParseTreeResult(treeAndErrors.rootNodes, tokensAndErrors.errors.concat(treeAndErrors.errors));\n    };\n    return Parser;\n}());\nvar _TreeBuilder = /** @class */ (function () {\n    function _TreeBuilder(tokens, getTagDefinition) {\n        this.tokens = tokens;\n        this.getTagDefinition = getTagDefinition;\n        this._index = -1;\n        this._rootNodes = [];\n        this._errors = [];\n        this._elementStack = [];\n        this._advance();\n    }\n    _TreeBuilder.prototype.build = function () {\n        while (this._peek.type !== TokenType$1.EOF) {\n            if (this._peek.type === TokenType$1.TAG_OPEN_START) {\n                this._consumeStartTag(this._advance());\n            }\n            else if (this._peek.type === TokenType$1.TAG_CLOSE) {\n                this._consumeEndTag(this._advance());\n            }\n            else if (this._peek.type === TokenType$1.CDATA_START) {\n                this._closeVoidElement();\n                this._consumeCdata(this._advance());\n            }\n            else if (this._peek.type === TokenType$1.COMMENT_START) {\n                this._closeVoidElement();\n                this._consumeComment(this._advance());\n            }\n            else if (this._peek.type === TokenType$1.TEXT || this._peek.type === TokenType$1.RAW_TEXT ||\n                this._peek.type === TokenType$1.ESCAPABLE_RAW_TEXT) {\n                this._closeVoidElement();\n                this._consumeText(this._advance());\n            }\n            else if (this._peek.type === TokenType$1.EXPANSION_FORM_START) {\n                this._consumeExpansion(this._advance());\n            }\n            else {\n                // Skip all other tokens...\n                this._advance();\n            }\n        }\n        return new ParseTreeResult(this._rootNodes, this._errors);\n    };\n    _TreeBuilder.prototype._advance = function () {\n        var prev = this._peek;\n        if (this._index < this.tokens.length - 1) {\n            // Note: there is always an EOF token at the end\n            this._index++;\n        }\n        this._peek = this.tokens[this._index];\n        return prev;\n    };\n    _TreeBuilder.prototype._advanceIf = function (type) {\n        if (this._peek.type === type) {\n            return this._advance();\n        }\n        return null;\n    };\n    _TreeBuilder.prototype._consumeCdata = function (startToken) {\n        this._consumeText(this._advance());\n        this._advanceIf(TokenType$1.CDATA_END);\n    };\n    _TreeBuilder.prototype._consumeComment = function (token) {\n        var text = this._advanceIf(TokenType$1.RAW_TEXT);\n        this._advanceIf(TokenType$1.COMMENT_END);\n        var value = text != null ? text.parts[0].trim() : null;\n        this._addToParent(new Comment(value, token.sourceSpan));\n    };\n    _TreeBuilder.prototype._consumeExpansion = function (token) {\n        var switchValue = this._advance();\n        var type = this._advance();\n        var cases = [];\n        // read =\n        while (this._peek.type === TokenType$1.EXPANSION_CASE_VALUE) {\n            var expCase = this._parseExpansionCase();\n            if (!expCase)\n                return; // error\n            cases.push(expCase);\n        }\n        // read the final }\n        if (this._peek.type !== TokenType$1.EXPANSION_FORM_END) {\n            this._errors.push(TreeError.create(null, this._peek.sourceSpan, \"Invalid ICU message. Missing '}'.\"));\n            return;\n        }\n        var sourceSpan = new ParseSourceSpan(token.sourceSpan.start, this._peek.sourceSpan.end);\n        this._addToParent(new Expansion(switchValue.parts[0], type.parts[0], cases, sourceSpan, switchValue.sourceSpan));\n        this._advance();\n    };\n    _TreeBuilder.prototype._parseExpansionCase = function () {\n        var value = this._advance();\n        // read {\n        if (this._peek.type !== TokenType$1.EXPANSION_CASE_EXP_START) {\n            this._errors.push(TreeError.create(null, this._peek.sourceSpan, \"Invalid ICU message. Missing '{'.\"));\n            return null;\n        }\n        // read until }\n        var start = this._advance();\n        var exp = this._collectExpansionExpTokens(start);\n        if (!exp)\n            return null;\n        var end = this._advance();\n        exp.push(new Token$1(TokenType$1.EOF, [], end.sourceSpan));\n        // parse everything in between { and }\n        var parsedExp = new _TreeBuilder(exp, this.getTagDefinition).build();\n        if (parsedExp.errors.length > 0) {\n            this._errors = this._errors.concat(parsedExp.errors);\n            return null;\n        }\n        var sourceSpan = new ParseSourceSpan(value.sourceSpan.start, end.sourceSpan.end);\n        var expSourceSpan = new ParseSourceSpan(start.sourceSpan.start, end.sourceSpan.end);\n        return new ExpansionCase(value.parts[0], parsedExp.rootNodes, sourceSpan, value.sourceSpan, expSourceSpan);\n    };\n    _TreeBuilder.prototype._collectExpansionExpTokens = function (start) {\n        var exp = [];\n        var expansionFormStack = [TokenType$1.EXPANSION_CASE_EXP_START];\n        while (true) {\n            if (this._peek.type === TokenType$1.EXPANSION_FORM_START ||\n                this._peek.type === TokenType$1.EXPANSION_CASE_EXP_START) {\n                expansionFormStack.push(this._peek.type);\n            }\n            if (this._peek.type === TokenType$1.EXPANSION_CASE_EXP_END) {\n                if (lastOnStack(expansionFormStack, TokenType$1.EXPANSION_CASE_EXP_START)) {\n                    expansionFormStack.pop();\n                    if (expansionFormStack.length == 0)\n                        return exp;\n                }\n                else {\n                    this._errors.push(TreeError.create(null, start.sourceSpan, \"Invalid ICU message. Missing '}'.\"));\n                    return null;\n                }\n            }\n            if (this._peek.type === TokenType$1.EXPANSION_FORM_END) {\n                if (lastOnStack(expansionFormStack, TokenType$1.EXPANSION_FORM_START)) {\n                    expansionFormStack.pop();\n                }\n                else {\n                    this._errors.push(TreeError.create(null, start.sourceSpan, \"Invalid ICU message. Missing '}'.\"));\n                    return null;\n                }\n            }\n            if (this._peek.type === TokenType$1.EOF) {\n                this._errors.push(TreeError.create(null, start.sourceSpan, \"Invalid ICU message. Missing '}'.\"));\n                return null;\n            }\n            exp.push(this._advance());\n        }\n    };\n    _TreeBuilder.prototype._consumeText = function (token) {\n        var text = token.parts[0];\n        if (text.length > 0 && text[0] == '\\n') {\n            var parent_1 = this._getParentElement();\n            if (parent_1 != null && parent_1.children.length == 0 &&\n                this.getTagDefinition(parent_1.name).ignoreFirstLf) {\n                text = text.substring(1);\n            }\n        }\n        if (text.length > 0) {\n            this._addToParent(new Text(text, token.sourceSpan));\n        }\n    };\n    _TreeBuilder.prototype._closeVoidElement = function () {\n        var el = this._getParentElement();\n        if (el && this.getTagDefinition(el.name).isVoid) {\n            this._elementStack.pop();\n        }\n    };\n    _TreeBuilder.prototype._consumeStartTag = function (startTagToken) {\n        var prefix = startTagToken.parts[0];\n        var name = startTagToken.parts[1];\n        var attrs = [];\n        while (this._peek.type === TokenType$1.ATTR_NAME) {\n            attrs.push(this._consumeAttr(this._advance()));\n        }\n        var fullName = this._getElementFullName(prefix, name, this._getParentElement());\n        var selfClosing = false;\n        // Note: There could have been a tokenizer error\n        // so that we don't get a token for the end tag...\n        if (this._peek.type === TokenType$1.TAG_OPEN_END_VOID) {\n            this._advance();\n            selfClosing = true;\n            var tagDef = this.getTagDefinition(fullName);\n            if (!(tagDef.canSelfClose || getNsPrefix(fullName) !== null || tagDef.isVoid)) {\n                this._errors.push(TreeError.create(fullName, startTagToken.sourceSpan, \"Only void and foreign elements can be self closed \\\"\" + startTagToken.parts[1] + \"\\\"\"));\n            }\n        }\n        else if (this._peek.type === TokenType$1.TAG_OPEN_END) {\n            this._advance();\n            selfClosing = false;\n        }\n        var end = this._peek.sourceSpan.start;\n        var span = new ParseSourceSpan(startTagToken.sourceSpan.start, end);\n        var el = new Element(fullName, attrs, [], span, span, undefined);\n        this._pushElement(el);\n        if (selfClosing) {\n            this._popElement(fullName);\n            el.endSourceSpan = span;\n        }\n    };\n    _TreeBuilder.prototype._pushElement = function (el) {\n        var parentEl = this._getParentElement();\n        if (parentEl && this.getTagDefinition(parentEl.name).isClosedByChild(el.name)) {\n            this._elementStack.pop();\n        }\n        var tagDef = this.getTagDefinition(el.name);\n        var _a = this._getParentElementSkippingContainers(), parent = _a.parent, container = _a.container;\n        if (parent && tagDef.requireExtraParent(parent.name)) {\n            var newParent = new Element(tagDef.parentToAdd, [], [], el.sourceSpan, el.startSourceSpan, el.endSourceSpan);\n            this._insertBeforeContainer(parent, container, newParent);\n        }\n        this._addToParent(el);\n        this._elementStack.push(el);\n    };\n    _TreeBuilder.prototype._consumeEndTag = function (endTagToken) {\n        var fullName = this._getElementFullName(endTagToken.parts[0], endTagToken.parts[1], this._getParentElement());\n        if (this._getParentElement()) {\n            this._getParentElement().endSourceSpan = endTagToken.sourceSpan;\n        }\n        if (this.getTagDefinition(fullName).isVoid) {\n            this._errors.push(TreeError.create(fullName, endTagToken.sourceSpan, \"Void elements do not have end tags \\\"\" + endTagToken.parts[1] + \"\\\"\"));\n        }\n        else if (!this._popElement(fullName)) {\n            var errMsg = \"Unexpected closing tag \\\"\" + fullName + \"\\\". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags\";\n            this._errors.push(TreeError.create(fullName, endTagToken.sourceSpan, errMsg));\n        }\n    };\n    _TreeBuilder.prototype._popElement = function (fullName) {\n        for (var stackIndex = this._elementStack.length - 1; stackIndex >= 0; stackIndex--) {\n            var el = this._elementStack[stackIndex];\n            if (el.name == fullName) {\n                this._elementStack.splice(stackIndex, this._elementStack.length - stackIndex);\n                return true;\n            }\n            if (!this.getTagDefinition(el.name).closedByParent) {\n                return false;\n            }\n        }\n        return false;\n    };\n    _TreeBuilder.prototype._consumeAttr = function (attrName) {\n        var fullName = mergeNsAndName(attrName.parts[0], attrName.parts[1]);\n        var end = attrName.sourceSpan.end;\n        var value = '';\n        var valueSpan = undefined;\n        if (this._peek.type === TokenType$1.ATTR_VALUE) {\n            var valueToken = this._advance();\n            value = valueToken.parts[0];\n            end = valueToken.sourceSpan.end;\n            valueSpan = valueToken.sourceSpan;\n        }\n        return new Attribute(fullName, value, new ParseSourceSpan(attrName.sourceSpan.start, end), valueSpan);\n    };\n    _TreeBuilder.prototype._getParentElement = function () {\n        return this._elementStack.length > 0 ? this._elementStack[this._elementStack.length - 1] : null;\n    };\n    /**\n     * Returns the parent in the DOM and the container.\n     *\n     * `<ng-container>` elements are skipped as they are not rendered as DOM element.\n     */\n    _TreeBuilder.prototype._getParentElementSkippingContainers = function () {\n        var container = null;\n        for (var i = this._elementStack.length - 1; i >= 0; i--) {\n            if (!isNgContainer(this._elementStack[i].name)) {\n                return { parent: this._elementStack[i], container: container };\n            }\n            container = this._elementStack[i];\n        }\n        return { parent: null, container: container };\n    };\n    _TreeBuilder.prototype._addToParent = function (node) {\n        var parent = this._getParentElement();\n        if (parent != null) {\n            parent.children.push(node);\n        }\n        else {\n            this._rootNodes.push(node);\n        }\n    };\n    /**\n     * Insert a node between the parent and the container.\n     * When no container is given, the node is appended as a child of the parent.\n     * Also updates the element stack accordingly.\n     *\n     * @internal\n     */\n    _TreeBuilder.prototype._insertBeforeContainer = function (parent, container, node) {\n        if (!container) {\n            this._addToParent(node);\n            this._elementStack.push(node);\n        }\n        else {\n            if (parent) {\n                // replace the container with the new node in the children\n                var index = parent.children.indexOf(container);\n                parent.children[index] = node;\n            }\n            else {\n                this._rootNodes.push(node);\n            }\n            node.children.push(container);\n            this._elementStack.splice(this._elementStack.indexOf(container), 0, node);\n        }\n    };\n    _TreeBuilder.prototype._getElementFullName = function (prefix, localName, parentElement) {\n        if (prefix == null) {\n            prefix = this.getTagDefinition(localName).implicitNamespacePrefix;\n            if (prefix == null && parentElement != null) {\n                prefix = getNsPrefix(parentElement.name);\n            }\n        }\n        return mergeNsAndName(prefix, localName);\n    };\n    return _TreeBuilder;\n}());\nfunction lastOnStack(stack, element) {\n    return stack.length > 0 && stack[stack.length - 1] === element;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction digest(message) {\n    return message.id || sha1(serializeNodes(message.nodes).join('') + (\"[\" + message.meaning + \"]\"));\n}\nfunction decimalDigest(message) {\n    if (message.id) {\n        return message.id;\n    }\n    var visitor = new _SerializerIgnoreIcuExpVisitor();\n    var parts = message.nodes.map(function (a) { return a.visit(visitor, null); });\n    return computeMsgId(parts.join(''), message.meaning);\n}\n/**\n * Serialize the i18n ast to something xml-like in order to generate an UID.\n *\n * The visitor is also used in the i18n parser tests\n *\n * @internal\n */\nvar _SerializerVisitor = /** @class */ (function () {\n    function _SerializerVisitor() {\n    }\n    _SerializerVisitor.prototype.visitText = function (text, context) { return text.value; };\n    _SerializerVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        return \"[\" + container.children.map(function (child) { return child.visit(_this); }).join(', ') + \"]\";\n    };\n    _SerializerVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var strCases = Object.keys(icu.cases).map(function (k) { return k + \" {\" + icu.cases[k].visit(_this) + \"}\"; });\n        return \"{\" + icu.expression + \", \" + icu.type + \", \" + strCases.join(', ') + \"}\";\n    };\n    _SerializerVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var _this = this;\n        return ph.isVoid ?\n            \"<ph tag name=\\\"\" + ph.startName + \"\\\"/>\" :\n            \"<ph tag name=\\\"\" + ph.startName + \"\\\">\" + ph.children.map(function (child) { return child.visit(_this); }).join(', ') + \"</ph name=\\\"\" + ph.closeName + \"\\\">\";\n    };\n    _SerializerVisitor.prototype.visitPlaceholder = function (ph, context) {\n        return ph.value ? \"<ph name=\\\"\" + ph.name + \"\\\">\" + ph.value + \"</ph>\" : \"<ph name=\\\"\" + ph.name + \"\\\"/>\";\n    };\n    _SerializerVisitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        return \"<ph icu name=\\\"\" + ph.name + \"\\\">\" + ph.value.visit(this) + \"</ph>\";\n    };\n    return _SerializerVisitor;\n}());\nvar serializerVisitor = new _SerializerVisitor();\nfunction serializeNodes(nodes) {\n    return nodes.map(function (a) { return a.visit(serializerVisitor, null); });\n}\n/**\n * Serialize the i18n ast to something xml-like in order to generate an UID.\n *\n * Ignore the ICU expressions so that message IDs stays identical if only the expression changes.\n *\n * @internal\n */\nvar _SerializerIgnoreIcuExpVisitor = /** @class */ (function (_super) {\n    __extends(_SerializerIgnoreIcuExpVisitor, _super);\n    function _SerializerIgnoreIcuExpVisitor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    _SerializerIgnoreIcuExpVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var strCases = Object.keys(icu.cases).map(function (k) { return k + \" {\" + icu.cases[k].visit(_this) + \"}\"; });\n        // Do not take the expression into account\n        return \"{\" + icu.type + \", \" + strCases.join(', ') + \"}\";\n    };\n    return _SerializerIgnoreIcuExpVisitor;\n}(_SerializerVisitor));\n/**\n * Compute the SHA1 of the given string\n *\n * see http://csrc.nist.gov/publications/fips/fips180-4/fips-180-4.pdf\n *\n * WARNING: this function has not been designed not tested with security in mind.\n *          DO NOT USE IT IN A SECURITY SENSITIVE CONTEXT.\n */\nfunction sha1(str) {\n    var utf8 = utf8Encode(str);\n    var words32 = stringToWords32(utf8, Endian.Big);\n    var len = utf8.length * 8;\n    var w = new Array(80);\n    var _a = __read([0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0], 5), a = _a[0], b = _a[1], c = _a[2], d = _a[3], e = _a[4];\n    words32[len >> 5] |= 0x80 << (24 - len % 32);\n    words32[((len + 64 >> 9) << 4) + 15] = len;\n    for (var i = 0; i < words32.length; i += 16) {\n        var _b = __read([a, b, c, d, e], 5), h0 = _b[0], h1 = _b[1], h2 = _b[2], h3 = _b[3], h4 = _b[4];\n        for (var j = 0; j < 80; j++) {\n            if (j < 16) {\n                w[j] = words32[i + j];\n            }\n            else {\n                w[j] = rol32(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);\n            }\n            var _c = __read(fk(j, b, c, d), 2), f = _c[0], k = _c[1];\n            var temp = [rol32(a, 5), f, e, k, w[j]].reduce(add32);\n            _d = __read([d, c, rol32(b, 30), a, temp], 5), e = _d[0], d = _d[1], c = _d[2], b = _d[3], a = _d[4];\n        }\n        _e = __read([add32(a, h0), add32(b, h1), add32(c, h2), add32(d, h3), add32(e, h4)], 5), a = _e[0], b = _e[1], c = _e[2], d = _e[3], e = _e[4];\n    }\n    return byteStringToHexString(words32ToByteString([a, b, c, d, e]));\n    var _d, _e;\n}\nfunction fk(index, b, c, d) {\n    if (index < 20) {\n        return [(b & c) | (~b & d), 0x5a827999];\n    }\n    if (index < 40) {\n        return [b ^ c ^ d, 0x6ed9eba1];\n    }\n    if (index < 60) {\n        return [(b & c) | (b & d) | (c & d), 0x8f1bbcdc];\n    }\n    return [b ^ c ^ d, 0xca62c1d6];\n}\n/**\n * Compute the fingerprint of the given string\n *\n * The output is 64 bit number encoded as a decimal string\n *\n * based on:\n * https://github.com/google/closure-compiler/blob/master/src/com/google/javascript/jscomp/GoogleJsMessageIdGenerator.java\n */\nfunction fingerprint(str) {\n    var utf8 = utf8Encode(str);\n    var _a = __read([hash32(utf8, 0), hash32(utf8, 102072)], 2), hi = _a[0], lo = _a[1];\n    if (hi == 0 && (lo == 0 || lo == 1)) {\n        hi = hi ^ 0x130f9bef;\n        lo = lo ^ -0x6b5f56d8;\n    }\n    return [hi, lo];\n}\nfunction computeMsgId(msg, meaning) {\n    var _a = __read(fingerprint(msg), 2), hi = _a[0], lo = _a[1];\n    if (meaning) {\n        var _b = __read(fingerprint(meaning), 2), him = _b[0], lom = _b[1];\n        _c = __read(add64(rol64([hi, lo], 1), [him, lom]), 2), hi = _c[0], lo = _c[1];\n    }\n    return byteStringToDecString(words32ToByteString([hi & 0x7fffffff, lo]));\n    var _c;\n}\nfunction hash32(str, c) {\n    var _a = __read([0x9e3779b9, 0x9e3779b9], 2), a = _a[0], b = _a[1];\n    var i;\n    var len = str.length;\n    for (i = 0; i + 12 <= len; i += 12) {\n        a = add32(a, wordAt(str, i, Endian.Little));\n        b = add32(b, wordAt(str, i + 4, Endian.Little));\n        c = add32(c, wordAt(str, i + 8, Endian.Little));\n        _b = __read(mix([a, b, c]), 3), a = _b[0], b = _b[1], c = _b[2];\n    }\n    a = add32(a, wordAt(str, i, Endian.Little));\n    b = add32(b, wordAt(str, i + 4, Endian.Little));\n    // the first byte of c is reserved for the length\n    c = add32(c, len);\n    c = add32(c, wordAt(str, i + 8, Endian.Little) << 8);\n    return mix([a, b, c])[2];\n    var _b;\n}\n// clang-format off\nfunction mix(_a) {\n    var _b = __read(_a, 3), a = _b[0], b = _b[1], c = _b[2];\n    a = sub32(a, b);\n    a = sub32(a, c);\n    a ^= c >>> 13;\n    b = sub32(b, c);\n    b = sub32(b, a);\n    b ^= a << 8;\n    c = sub32(c, a);\n    c = sub32(c, b);\n    c ^= b >>> 13;\n    a = sub32(a, b);\n    a = sub32(a, c);\n    a ^= c >>> 12;\n    b = sub32(b, c);\n    b = sub32(b, a);\n    b ^= a << 16;\n    c = sub32(c, a);\n    c = sub32(c, b);\n    c ^= b >>> 5;\n    a = sub32(a, b);\n    a = sub32(a, c);\n    a ^= c >>> 3;\n    b = sub32(b, c);\n    b = sub32(b, a);\n    b ^= a << 10;\n    c = sub32(c, a);\n    c = sub32(c, b);\n    c ^= b >>> 15;\n    return [a, b, c];\n}\n// clang-format on\n// Utils\nvar Endian;\n(function (Endian) {\n    Endian[Endian[\"Little\"] = 0] = \"Little\";\n    Endian[Endian[\"Big\"] = 1] = \"Big\";\n})(Endian || (Endian = {}));\nfunction add32(a, b) {\n    return add32to64(a, b)[1];\n}\nfunction add32to64(a, b) {\n    var low = (a & 0xffff) + (b & 0xffff);\n    var high = (a >>> 16) + (b >>> 16) + (low >>> 16);\n    return [high >>> 16, (high << 16) | (low & 0xffff)];\n}\nfunction add64(_a, _b) {\n    var _c = __read(_a, 2), ah = _c[0], al = _c[1];\n    var _d = __read(_b, 2), bh = _d[0], bl = _d[1];\n    var _e = __read(add32to64(al, bl), 2), carry = _e[0], l = _e[1];\n    var h = add32(add32(ah, bh), carry);\n    return [h, l];\n}\nfunction sub32(a, b) {\n    var low = (a & 0xffff) - (b & 0xffff);\n    var high = (a >> 16) - (b >> 16) + (low >> 16);\n    return (high << 16) | (low & 0xffff);\n}\n// Rotate a 32b number left `count` position\nfunction rol32(a, count) {\n    return (a << count) | (a >>> (32 - count));\n}\n// Rotate a 64b number left `count` position\nfunction rol64(_a, count) {\n    var _b = __read(_a, 2), hi = _b[0], lo = _b[1];\n    var h = (hi << count) | (lo >>> (32 - count));\n    var l = (lo << count) | (hi >>> (32 - count));\n    return [h, l];\n}\nfunction stringToWords32(str, endian) {\n    var words32 = Array((str.length + 3) >>> 2);\n    for (var i = 0; i < words32.length; i++) {\n        words32[i] = wordAt(str, i * 4, endian);\n    }\n    return words32;\n}\nfunction byteAt(str, index) {\n    return index >= str.length ? 0 : str.charCodeAt(index) & 0xff;\n}\nfunction wordAt(str, index, endian) {\n    var word = 0;\n    if (endian === Endian.Big) {\n        for (var i = 0; i < 4; i++) {\n            word += byteAt(str, index + i) << (24 - 8 * i);\n        }\n    }\n    else {\n        for (var i = 0; i < 4; i++) {\n            word += byteAt(str, index + i) << 8 * i;\n        }\n    }\n    return word;\n}\nfunction words32ToByteString(words32) {\n    return words32.reduce(function (str, word) { return str + word32ToByteString(word); }, '');\n}\nfunction word32ToByteString(word) {\n    var str = '';\n    for (var i = 0; i < 4; i++) {\n        str += String.fromCharCode((word >>> 8 * (3 - i)) & 0xff);\n    }\n    return str;\n}\nfunction byteStringToHexString(str) {\n    var hex = '';\n    for (var i = 0; i < str.length; i++) {\n        var b = byteAt(str, i);\n        hex += (b >>> 4).toString(16) + (b & 0x0f).toString(16);\n    }\n    return hex.toLowerCase();\n}\n// based on http://www.danvk.org/hex2dec.html (JS can not handle more than 56b)\nfunction byteStringToDecString(str) {\n    var decimal = '';\n    var toThePower = '1';\n    for (var i = str.length - 1; i >= 0; i--) {\n        decimal = addBigInt(decimal, numberTimesBigInt(byteAt(str, i), toThePower));\n        toThePower = numberTimesBigInt(256, toThePower);\n    }\n    return decimal.split('').reverse().join('');\n}\n// x and y decimal, lowest significant digit first\nfunction addBigInt(x, y) {\n    var sum = '';\n    var len = Math.max(x.length, y.length);\n    for (var i = 0, carry = 0; i < len || carry; i++) {\n        var tmpSum = carry + +(x[i] || 0) + +(y[i] || 0);\n        if (tmpSum >= 10) {\n            carry = 1;\n            sum += tmpSum - 10;\n        }\n        else {\n            carry = 0;\n            sum += tmpSum;\n        }\n    }\n    return sum;\n}\nfunction numberTimesBigInt(num, b) {\n    var product = '';\n    var bToThePower = b;\n    for (; num !== 0; num = num >>> 1) {\n        if (num & 1)\n            product = addBigInt(product, bToThePower);\n        bToThePower = addBigInt(bToThePower, bToThePower);\n    }\n    return product;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Message = /** @class */ (function () {\n    /**\n     * @param nodes message AST\n     * @param placeholders maps placeholder names to static content\n     * @param placeholderToMessage maps placeholder names to messages (used for nested ICU messages)\n     * @param meaning\n     * @param description\n     * @param id\n     */\n    function Message(nodes, placeholders, placeholderToMessage, meaning, description, id) {\n        this.nodes = nodes;\n        this.placeholders = placeholders;\n        this.placeholderToMessage = placeholderToMessage;\n        this.meaning = meaning;\n        this.description = description;\n        this.id = id;\n        if (nodes.length) {\n            this.sources = [{\n                    filePath: nodes[0].sourceSpan.start.file.url,\n                    startLine: nodes[0].sourceSpan.start.line + 1,\n                    startCol: nodes[0].sourceSpan.start.col + 1,\n                    endLine: nodes[nodes.length - 1].sourceSpan.end.line + 1,\n                    endCol: nodes[0].sourceSpan.start.col + 1\n                }];\n        }\n        else {\n            this.sources = [];\n        }\n    }\n    return Message;\n}());\nvar Text$1 = /** @class */ (function () {\n    function Text(value, sourceSpan) {\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    Text.prototype.visit = function (visitor, context) { return visitor.visitText(this, context); };\n    return Text;\n}());\n// TODO(vicb): do we really need this node (vs an array) ?\nvar Container = /** @class */ (function () {\n    function Container(children, sourceSpan) {\n        this.children = children;\n        this.sourceSpan = sourceSpan;\n    }\n    Container.prototype.visit = function (visitor, context) { return visitor.visitContainer(this, context); };\n    return Container;\n}());\nvar Icu = /** @class */ (function () {\n    function Icu(expression, type, cases, sourceSpan) {\n        this.expression = expression;\n        this.type = type;\n        this.cases = cases;\n        this.sourceSpan = sourceSpan;\n    }\n    Icu.prototype.visit = function (visitor, context) { return visitor.visitIcu(this, context); };\n    return Icu;\n}());\nvar TagPlaceholder = /** @class */ (function () {\n    function TagPlaceholder(tag, attrs, startName, closeName, children, isVoid, sourceSpan) {\n        this.tag = tag;\n        this.attrs = attrs;\n        this.startName = startName;\n        this.closeName = closeName;\n        this.children = children;\n        this.isVoid = isVoid;\n        this.sourceSpan = sourceSpan;\n    }\n    TagPlaceholder.prototype.visit = function (visitor, context) { return visitor.visitTagPlaceholder(this, context); };\n    return TagPlaceholder;\n}());\nvar Placeholder = /** @class */ (function () {\n    function Placeholder(value, name, sourceSpan) {\n        this.value = value;\n        this.name = name;\n        this.sourceSpan = sourceSpan;\n    }\n    Placeholder.prototype.visit = function (visitor, context) { return visitor.visitPlaceholder(this, context); };\n    return Placeholder;\n}());\nvar IcuPlaceholder = /** @class */ (function () {\n    function IcuPlaceholder(value, name, sourceSpan) {\n        this.value = value;\n        this.name = name;\n        this.sourceSpan = sourceSpan;\n    }\n    IcuPlaceholder.prototype.visit = function (visitor, context) { return visitor.visitIcuPlaceholder(this, context); };\n    return IcuPlaceholder;\n}());\n// Clone the AST\nvar CloneVisitor = /** @class */ (function () {\n    function CloneVisitor() {\n    }\n    CloneVisitor.prototype.visitText = function (text, context) { return new Text$1(text.value, text.sourceSpan); };\n    CloneVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        var children = container.children.map(function (n) { return n.visit(_this, context); });\n        return new Container(children, container.sourceSpan);\n    };\n    CloneVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var cases = {};\n        Object.keys(icu.cases).forEach(function (key) { return cases[key] = icu.cases[key].visit(_this, context); });\n        var msg = new Icu(icu.expression, icu.type, cases, icu.sourceSpan);\n        msg.expressionPlaceholder = icu.expressionPlaceholder;\n        return msg;\n    };\n    CloneVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var _this = this;\n        var children = ph.children.map(function (n) { return n.visit(_this, context); });\n        return new TagPlaceholder(ph.tag, ph.attrs, ph.startName, ph.closeName, children, ph.isVoid, ph.sourceSpan);\n    };\n    CloneVisitor.prototype.visitPlaceholder = function (ph, context) {\n        return new Placeholder(ph.value, ph.name, ph.sourceSpan);\n    };\n    CloneVisitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        return new IcuPlaceholder(ph.value, ph.name, ph.sourceSpan);\n    };\n    return CloneVisitor;\n}());\n// Visit all the nodes recursively\nvar RecurseVisitor = /** @class */ (function () {\n    function RecurseVisitor() {\n    }\n    RecurseVisitor.prototype.visitText = function (text, context) { };\n    RecurseVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        container.children.forEach(function (child) { return child.visit(_this); });\n    };\n    RecurseVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        Object.keys(icu.cases).forEach(function (k) { icu.cases[k].visit(_this); });\n    };\n    RecurseVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var _this = this;\n        ph.children.forEach(function (child) { return child.visit(_this); });\n    };\n    RecurseVisitor.prototype.visitPlaceholder = function (ph, context) { };\n    RecurseVisitor.prototype.visitIcuPlaceholder = function (ph, context) { };\n    return RecurseVisitor;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar HtmlTagDefinition = /** @class */ (function () {\n    function HtmlTagDefinition(_a) {\n        var _b = _a === void 0 ? {} : _a, closedByChildren = _b.closedByChildren, requiredParents = _b.requiredParents, implicitNamespacePrefix = _b.implicitNamespacePrefix, _c = _b.contentType, contentType = _c === void 0 ? TagContentType.PARSABLE_DATA : _c, _d = _b.closedByParent, closedByParent = _d === void 0 ? false : _d, _e = _b.isVoid, isVoid = _e === void 0 ? false : _e, _f = _b.ignoreFirstLf, ignoreFirstLf = _f === void 0 ? false : _f;\n        var _this = this;\n        this.closedByChildren = {};\n        this.closedByParent = false;\n        this.canSelfClose = false;\n        if (closedByChildren && closedByChildren.length > 0) {\n            closedByChildren.forEach(function (tagName) { return _this.closedByChildren[tagName] = true; });\n        }\n        this.isVoid = isVoid;\n        this.closedByParent = closedByParent || isVoid;\n        if (requiredParents && requiredParents.length > 0) {\n            this.requiredParents = {};\n            // The first parent is the list is automatically when none of the listed parents are present\n            this.parentToAdd = requiredParents[0];\n            requiredParents.forEach(function (tagName) { return _this.requiredParents[tagName] = true; });\n        }\n        this.implicitNamespacePrefix = implicitNamespacePrefix || null;\n        this.contentType = contentType;\n        this.ignoreFirstLf = ignoreFirstLf;\n    }\n    HtmlTagDefinition.prototype.requireExtraParent = function (currentParent) {\n        if (!this.requiredParents) {\n            return false;\n        }\n        if (!currentParent) {\n            return true;\n        }\n        var lcParent = currentParent.toLowerCase();\n        var isParentTemplate = lcParent === 'template' || currentParent === 'ng-template';\n        return !isParentTemplate && this.requiredParents[lcParent] != true;\n    };\n    HtmlTagDefinition.prototype.isClosedByChild = function (name) {\n        return this.isVoid || name.toLowerCase() in this.closedByChildren;\n    };\n    return HtmlTagDefinition;\n}());\n// see http://www.w3.org/TR/html51/syntax.html#optional-tags\n// This implementation does not fully conform to the HTML5 spec.\nvar TAG_DEFINITIONS = {\n    'base': new HtmlTagDefinition({ isVoid: true }),\n    'meta': new HtmlTagDefinition({ isVoid: true }),\n    'area': new HtmlTagDefinition({ isVoid: true }),\n    'embed': new HtmlTagDefinition({ isVoid: true }),\n    'link': new HtmlTagDefinition({ isVoid: true }),\n    'img': new HtmlTagDefinition({ isVoid: true }),\n    'input': new HtmlTagDefinition({ isVoid: true }),\n    'param': new HtmlTagDefinition({ isVoid: true }),\n    'hr': new HtmlTagDefinition({ isVoid: true }),\n    'br': new HtmlTagDefinition({ isVoid: true }),\n    'source': new HtmlTagDefinition({ isVoid: true }),\n    'track': new HtmlTagDefinition({ isVoid: true }),\n    'wbr': new HtmlTagDefinition({ isVoid: true }),\n    'p': new HtmlTagDefinition({\n        closedByChildren: [\n            'address', 'article', 'aside', 'blockquote', 'div', 'dl', 'fieldset', 'footer', 'form',\n            'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr',\n            'main', 'nav', 'ol', 'p', 'pre', 'section', 'table', 'ul'\n        ],\n        closedByParent: true\n    }),\n    'thead': new HtmlTagDefinition({ closedByChildren: ['tbody', 'tfoot'] }),\n    'tbody': new HtmlTagDefinition({ closedByChildren: ['tbody', 'tfoot'], closedByParent: true }),\n    'tfoot': new HtmlTagDefinition({ closedByChildren: ['tbody'], closedByParent: true }),\n    'tr': new HtmlTagDefinition({\n        closedByChildren: ['tr'],\n        requiredParents: ['tbody', 'tfoot', 'thead'],\n        closedByParent: true\n    }),\n    'td': new HtmlTagDefinition({ closedByChildren: ['td', 'th'], closedByParent: true }),\n    'th': new HtmlTagDefinition({ closedByChildren: ['td', 'th'], closedByParent: true }),\n    'col': new HtmlTagDefinition({ requiredParents: ['colgroup'], isVoid: true }),\n    'svg': new HtmlTagDefinition({ implicitNamespacePrefix: 'svg' }),\n    'math': new HtmlTagDefinition({ implicitNamespacePrefix: 'math' }),\n    'li': new HtmlTagDefinition({ closedByChildren: ['li'], closedByParent: true }),\n    'dt': new HtmlTagDefinition({ closedByChildren: ['dt', 'dd'] }),\n    'dd': new HtmlTagDefinition({ closedByChildren: ['dt', 'dd'], closedByParent: true }),\n    'rb': new HtmlTagDefinition({ closedByChildren: ['rb', 'rt', 'rtc', 'rp'], closedByParent: true }),\n    'rt': new HtmlTagDefinition({ closedByChildren: ['rb', 'rt', 'rtc', 'rp'], closedByParent: true }),\n    'rtc': new HtmlTagDefinition({ closedByChildren: ['rb', 'rtc', 'rp'], closedByParent: true }),\n    'rp': new HtmlTagDefinition({ closedByChildren: ['rb', 'rt', 'rtc', 'rp'], closedByParent: true }),\n    'optgroup': new HtmlTagDefinition({ closedByChildren: ['optgroup'], closedByParent: true }),\n    'option': new HtmlTagDefinition({ closedByChildren: ['option', 'optgroup'], closedByParent: true }),\n    'pre': new HtmlTagDefinition({ ignoreFirstLf: true }),\n    'listing': new HtmlTagDefinition({ ignoreFirstLf: true }),\n    'style': new HtmlTagDefinition({ contentType: TagContentType.RAW_TEXT }),\n    'script': new HtmlTagDefinition({ contentType: TagContentType.RAW_TEXT }),\n    'title': new HtmlTagDefinition({ contentType: TagContentType.ESCAPABLE_RAW_TEXT }),\n    'textarea': new HtmlTagDefinition({ contentType: TagContentType.ESCAPABLE_RAW_TEXT, ignoreFirstLf: true }),\n};\nvar _DEFAULT_TAG_DEFINITION = new HtmlTagDefinition();\nfunction getHtmlTagDefinition(tagName) {\n    return TAG_DEFINITIONS[tagName.toLowerCase()] || _DEFAULT_TAG_DEFINITION;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TAG_TO_PLACEHOLDER_NAMES = {\n    'A': 'LINK',\n    'B': 'BOLD_TEXT',\n    'BR': 'LINE_BREAK',\n    'EM': 'EMPHASISED_TEXT',\n    'H1': 'HEADING_LEVEL1',\n    'H2': 'HEADING_LEVEL2',\n    'H3': 'HEADING_LEVEL3',\n    'H4': 'HEADING_LEVEL4',\n    'H5': 'HEADING_LEVEL5',\n    'H6': 'HEADING_LEVEL6',\n    'HR': 'HORIZONTAL_RULE',\n    'I': 'ITALIC_TEXT',\n    'LI': 'LIST_ITEM',\n    'LINK': 'MEDIA_LINK',\n    'OL': 'ORDERED_LIST',\n    'P': 'PARAGRAPH',\n    'Q': 'QUOTATION',\n    'S': 'STRIKETHROUGH_TEXT',\n    'SMALL': 'SMALL_TEXT',\n    'SUB': 'SUBSTRIPT',\n    'SUP': 'SUPERSCRIPT',\n    'TBODY': 'TABLE_BODY',\n    'TD': 'TABLE_CELL',\n    'TFOOT': 'TABLE_FOOTER',\n    'TH': 'TABLE_HEADER_CELL',\n    'THEAD': 'TABLE_HEADER',\n    'TR': 'TABLE_ROW',\n    'TT': 'MONOSPACED_TEXT',\n    'U': 'UNDERLINED_TEXT',\n    'UL': 'UNORDERED_LIST',\n};\n/**\n * Creates unique names for placeholder with different content.\n *\n * Returns the same placeholder name when the content is identical.\n */\nvar PlaceholderRegistry = /** @class */ (function () {\n    function PlaceholderRegistry() {\n        // Count the occurrence of the base name top generate a unique name\n        this._placeHolderNameCounts = {};\n        // Maps signature to placeholder names\n        this._signatureToName = {};\n    }\n    PlaceholderRegistry.prototype.getStartTagPlaceholderName = function (tag, attrs, isVoid) {\n        var signature = this._hashTag(tag, attrs, isVoid);\n        if (this._signatureToName[signature]) {\n            return this._signatureToName[signature];\n        }\n        var upperTag = tag.toUpperCase();\n        var baseName = TAG_TO_PLACEHOLDER_NAMES[upperTag] || \"TAG_\" + upperTag;\n        var name = this._generateUniqueName(isVoid ? baseName : \"START_\" + baseName);\n        this._signatureToName[signature] = name;\n        return name;\n    };\n    PlaceholderRegistry.prototype.getCloseTagPlaceholderName = function (tag) {\n        var signature = this._hashClosingTag(tag);\n        if (this._signatureToName[signature]) {\n            return this._signatureToName[signature];\n        }\n        var upperTag = tag.toUpperCase();\n        var baseName = TAG_TO_PLACEHOLDER_NAMES[upperTag] || \"TAG_\" + upperTag;\n        var name = this._generateUniqueName(\"CLOSE_\" + baseName);\n        this._signatureToName[signature] = name;\n        return name;\n    };\n    PlaceholderRegistry.prototype.getPlaceholderName = function (name, content) {\n        var upperName = name.toUpperCase();\n        var signature = \"PH: \" + upperName + \"=\" + content;\n        if (this._signatureToName[signature]) {\n            return this._signatureToName[signature];\n        }\n        var uniqueName = this._generateUniqueName(upperName);\n        this._signatureToName[signature] = uniqueName;\n        return uniqueName;\n    };\n    PlaceholderRegistry.prototype.getUniquePlaceholder = function (name) {\n        return this._generateUniqueName(name.toUpperCase());\n    };\n    // Generate a hash for a tag - does not take attribute order into account\n    PlaceholderRegistry.prototype._hashTag = function (tag, attrs, isVoid) {\n        var start = \"<\" + tag;\n        var strAttrs = Object.keys(attrs).sort().map(function (name) { return \" \" + name + \"=\" + attrs[name]; }).join('');\n        var end = isVoid ? '/>' : \"></\" + tag + \">\";\n        return start + strAttrs + end;\n    };\n    PlaceholderRegistry.prototype._hashClosingTag = function (tag) { return this._hashTag(\"/\" + tag, {}, false); };\n    PlaceholderRegistry.prototype._generateUniqueName = function (base) {\n        var seen = this._placeHolderNameCounts.hasOwnProperty(base);\n        if (!seen) {\n            this._placeHolderNameCounts[base] = 1;\n            return base;\n        }\n        var id = this._placeHolderNameCounts[base];\n        this._placeHolderNameCounts[base] = id + 1;\n        return base + \"_\" + id;\n    };\n    return PlaceholderRegistry;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _expParser = new Parser(new Lexer());\n/**\n * Returns a function converting html nodes to an i18n Message given an interpolationConfig\n */\nfunction createI18nMessageFactory(interpolationConfig) {\n    var visitor = new _I18nVisitor(_expParser, interpolationConfig);\n    return function (nodes, meaning, description, id) {\n        return visitor.toI18nMessage(nodes, meaning, description, id);\n    };\n}\nvar _I18nVisitor = /** @class */ (function () {\n    function _I18nVisitor(_expressionParser, _interpolationConfig) {\n        this._expressionParser = _expressionParser;\n        this._interpolationConfig = _interpolationConfig;\n    }\n    _I18nVisitor.prototype.toI18nMessage = function (nodes, meaning, description, id) {\n        this._isIcu = nodes.length == 1 && nodes[0] instanceof Expansion;\n        this._icuDepth = 0;\n        this._placeholderRegistry = new PlaceholderRegistry();\n        this._placeholderToContent = {};\n        this._placeholderToMessage = {};\n        var i18nodes = visitAll(this, nodes, {});\n        return new Message(i18nodes, this._placeholderToContent, this._placeholderToMessage, meaning, description, id);\n    };\n    _I18nVisitor.prototype.visitElement = function (el, context) {\n        var children = visitAll(this, el.children);\n        var attrs = {};\n        el.attrs.forEach(function (attr) {\n            // Do not visit the attributes, translatable ones are top-level ASTs\n            attrs[attr.name] = attr.value;\n        });\n        var isVoid = getHtmlTagDefinition(el.name).isVoid;\n        var startPhName = this._placeholderRegistry.getStartTagPlaceholderName(el.name, attrs, isVoid);\n        this._placeholderToContent[startPhName] = el.sourceSpan.toString();\n        var closePhName = '';\n        if (!isVoid) {\n            closePhName = this._placeholderRegistry.getCloseTagPlaceholderName(el.name);\n            this._placeholderToContent[closePhName] = \"</\" + el.name + \">\";\n        }\n        return new TagPlaceholder(el.name, attrs, startPhName, closePhName, children, isVoid, el.sourceSpan);\n    };\n    _I18nVisitor.prototype.visitAttribute = function (attribute, context) {\n        return this._visitTextWithInterpolation(attribute.value, attribute.sourceSpan);\n    };\n    _I18nVisitor.prototype.visitText = function (text, context) {\n        return this._visitTextWithInterpolation(text.value, text.sourceSpan);\n    };\n    _I18nVisitor.prototype.visitComment = function (comment, context) { return null; };\n    _I18nVisitor.prototype.visitExpansion = function (icu, context) {\n        var _this = this;\n        this._icuDepth++;\n        var i18nIcuCases = {};\n        var i18nIcu = new Icu(icu.switchValue, icu.type, i18nIcuCases, icu.sourceSpan);\n        icu.cases.forEach(function (caze) {\n            i18nIcuCases[caze.value] = new Container(caze.expression.map(function (node) { return node.visit(_this, {}); }), caze.expSourceSpan);\n        });\n        this._icuDepth--;\n        if (this._isIcu || this._icuDepth > 0) {\n            // Returns an ICU node when:\n            // - the message (vs a part of the message) is an ICU message, or\n            // - the ICU message is nested.\n            var expPh = this._placeholderRegistry.getUniquePlaceholder(\"VAR_\" + icu.type);\n            i18nIcu.expressionPlaceholder = expPh;\n            this._placeholderToContent[expPh] = icu.switchValue;\n            return i18nIcu;\n        }\n        // Else returns a placeholder\n        // ICU placeholders should not be replaced with their original content but with the their\n        // translations. We need to create a new visitor (they are not re-entrant) to compute the\n        // message id.\n        // TODO(vicb): add a html.Node -> i18n.Message cache to avoid having to re-create the msg\n        var phName = this._placeholderRegistry.getPlaceholderName('ICU', icu.sourceSpan.toString());\n        var visitor = new _I18nVisitor(this._expressionParser, this._interpolationConfig);\n        this._placeholderToMessage[phName] = visitor.toI18nMessage([icu], '', '', '');\n        return new IcuPlaceholder(i18nIcu, phName, icu.sourceSpan);\n    };\n    _I18nVisitor.prototype.visitExpansionCase = function (icuCase, context) {\n        throw new Error('Unreachable code');\n    };\n    _I18nVisitor.prototype._visitTextWithInterpolation = function (text, sourceSpan) {\n        var splitInterpolation = this._expressionParser.splitInterpolation(text, sourceSpan.start.toString(), this._interpolationConfig);\n        if (!splitInterpolation) {\n            // No expression, return a single text\n            return new Text$1(text, sourceSpan);\n        }\n        // Return a group of text + expressions\n        var nodes = [];\n        var container = new Container(nodes, sourceSpan);\n        var _a = this._interpolationConfig, sDelimiter = _a.start, eDelimiter = _a.end;\n        for (var i = 0; i < splitInterpolation.strings.length - 1; i++) {\n            var expression = splitInterpolation.expressions[i];\n            var baseName = _extractPlaceholderName(expression) || 'INTERPOLATION';\n            var phName = this._placeholderRegistry.getPlaceholderName(baseName, expression);\n            if (splitInterpolation.strings[i].length) {\n                // No need to add empty strings\n                nodes.push(new Text$1(splitInterpolation.strings[i], sourceSpan));\n            }\n            nodes.push(new Placeholder(expression, phName, sourceSpan));\n            this._placeholderToContent[phName] = sDelimiter + expression + eDelimiter;\n        }\n        // The last index contains no expression\n        var lastStringIdx = splitInterpolation.strings.length - 1;\n        if (splitInterpolation.strings[lastStringIdx].length) {\n            nodes.push(new Text$1(splitInterpolation.strings[lastStringIdx], sourceSpan));\n        }\n        return container;\n    };\n    return _I18nVisitor;\n}());\nvar _CUSTOM_PH_EXP = /\\/\\/[\\s\\S]*i18n[\\s\\S]*\\([\\s\\S]*ph[\\s\\S]*=[\\s\\S]*(\"|')([\\s\\S]*?)\\1[\\s\\S]*\\)/g;\nfunction _extractPlaceholderName(input) {\n    return input.split(_CUSTOM_PH_EXP)[2];\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An i18n error.\n */\nvar I18nError = /** @class */ (function (_super) {\n    __extends(I18nError, _super);\n    function I18nError(span, msg) {\n        return _super.call(this, span, msg) || this;\n    }\n    return I18nError;\n}(ParseError));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _I18N_ATTR = 'i18n';\nvar _I18N_ATTR_PREFIX = 'i18n-';\nvar _I18N_COMMENT_PREFIX_REGEXP = /^i18n:?/;\nvar MEANING_SEPARATOR = '|';\nvar ID_SEPARATOR = '@@';\nvar i18nCommentsWarned = false;\n/**\n * Extract translatable messages from an html AST\n */\n\nfunction mergeTranslations(nodes, translations, interpolationConfig, implicitTags, implicitAttrs) {\n    var visitor = new _Visitor(implicitTags, implicitAttrs);\n    return visitor.merge(nodes, translations, interpolationConfig);\n}\nvar ExtractionResult = /** @class */ (function () {\n    function ExtractionResult(messages, errors) {\n        this.messages = messages;\n        this.errors = errors;\n    }\n    return ExtractionResult;\n}());\nvar _VisitorMode;\n(function (_VisitorMode) {\n    _VisitorMode[_VisitorMode[\"Extract\"] = 0] = \"Extract\";\n    _VisitorMode[_VisitorMode[\"Merge\"] = 1] = \"Merge\";\n})(_VisitorMode || (_VisitorMode = {}));\n/**\n * This Visitor is used:\n * 1. to extract all the translatable strings from an html AST (see `extract()`),\n * 2. to replace the translatable strings with the actual translations (see `merge()`)\n *\n * @internal\n */\nvar _Visitor = /** @class */ (function () {\n    function _Visitor(_implicitTags, _implicitAttrs) {\n        this._implicitTags = _implicitTags;\n        this._implicitAttrs = _implicitAttrs;\n    }\n    /**\n     * Extracts the messages from the tree\n     */\n    _Visitor.prototype.extract = function (nodes, interpolationConfig) {\n        var _this = this;\n        this._init(_VisitorMode.Extract, interpolationConfig);\n        nodes.forEach(function (node) { return node.visit(_this, null); });\n        if (this._inI18nBlock) {\n            this._reportError(nodes[nodes.length - 1], 'Unclosed block');\n        }\n        return new ExtractionResult(this._messages, this._errors);\n    };\n    /**\n     * Returns a tree where all translatable nodes are translated\n     */\n    _Visitor.prototype.merge = function (nodes, translations, interpolationConfig) {\n        this._init(_VisitorMode.Merge, interpolationConfig);\n        this._translations = translations;\n        // Construct a single fake root element\n        var wrapper = new Element('wrapper', [], nodes, undefined, undefined, undefined);\n        var translatedNode = wrapper.visit(this, null);\n        if (this._inI18nBlock) {\n            this._reportError(nodes[nodes.length - 1], 'Unclosed block');\n        }\n        return new ParseTreeResult(translatedNode.children, this._errors);\n    };\n    _Visitor.prototype.visitExpansionCase = function (icuCase, context) {\n        // Parse cases for translatable html attributes\n        var expression = visitAll(this, icuCase.expression, context);\n        if (this._mode === _VisitorMode.Merge) {\n            return new ExpansionCase(icuCase.value, expression, icuCase.sourceSpan, icuCase.valueSourceSpan, icuCase.expSourceSpan);\n        }\n    };\n    _Visitor.prototype.visitExpansion = function (icu, context) {\n        this._mayBeAddBlockChildren(icu);\n        var wasInIcu = this._inIcu;\n        if (!this._inIcu) {\n            // nested ICU messages should not be extracted but top-level translated as a whole\n            if (this._isInTranslatableSection) {\n                this._addMessage([icu]);\n            }\n            this._inIcu = true;\n        }\n        var cases = visitAll(this, icu.cases, context);\n        if (this._mode === _VisitorMode.Merge) {\n            icu = new Expansion(icu.switchValue, icu.type, cases, icu.sourceSpan, icu.switchValueSourceSpan);\n        }\n        this._inIcu = wasInIcu;\n        return icu;\n    };\n    _Visitor.prototype.visitComment = function (comment, context) {\n        var isOpening = _isOpeningComment(comment);\n        if (isOpening && this._isInTranslatableSection) {\n            this._reportError(comment, 'Could not start a block inside a translatable section');\n            return;\n        }\n        var isClosing = _isClosingComment(comment);\n        if (isClosing && !this._inI18nBlock) {\n            this._reportError(comment, 'Trying to close an unopened block');\n            return;\n        }\n        if (!this._inI18nNode && !this._inIcu) {\n            if (!this._inI18nBlock) {\n                if (isOpening) {\n                    // deprecated from v5 you should use <ng-container i18n> instead of i18n comments\n                    if (!i18nCommentsWarned && console && console.warn) {\n                        i18nCommentsWarned = true;\n                        var details = comment.sourceSpan.details ? \", \" + comment.sourceSpan.details : '';\n                        // TODO(ocombe): use a log service once there is a public one available\n                        console.warn(\"I18n comments are deprecated, use an <ng-container> element instead (\" + comment.sourceSpan.start + details + \")\");\n                    }\n                    this._inI18nBlock = true;\n                    this._blockStartDepth = this._depth;\n                    this._blockChildren = [];\n                    this._blockMeaningAndDesc =\n                        comment.value.replace(_I18N_COMMENT_PREFIX_REGEXP, '').trim();\n                    this._openTranslatableSection(comment);\n                }\n            }\n            else {\n                if (isClosing) {\n                    if (this._depth == this._blockStartDepth) {\n                        this._closeTranslatableSection(comment, this._blockChildren);\n                        this._inI18nBlock = false;\n                        var message = this._addMessage(this._blockChildren, this._blockMeaningAndDesc);\n                        // merge attributes in sections\n                        var nodes = this._translateMessage(comment, message);\n                        return visitAll(this, nodes);\n                    }\n                    else {\n                        this._reportError(comment, 'I18N blocks should not cross element boundaries');\n                        return;\n                    }\n                }\n            }\n        }\n    };\n    _Visitor.prototype.visitText = function (text, context) {\n        if (this._isInTranslatableSection) {\n            this._mayBeAddBlockChildren(text);\n        }\n        return text;\n    };\n    _Visitor.prototype.visitElement = function (el, context) {\n        var _this = this;\n        this._mayBeAddBlockChildren(el);\n        this._depth++;\n        var wasInI18nNode = this._inI18nNode;\n        var wasInImplicitNode = this._inImplicitNode;\n        var childNodes = [];\n        var translatedChildNodes = undefined;\n        // Extract:\n        // - top level nodes with the (implicit) \"i18n\" attribute if not already in a section\n        // - ICU messages\n        var i18nAttr = _getI18nAttr(el);\n        var i18nMeta = i18nAttr ? i18nAttr.value : '';\n        var isImplicit = this._implicitTags.some(function (tag) { return el.name === tag; }) && !this._inIcu &&\n            !this._isInTranslatableSection;\n        var isTopLevelImplicit = !wasInImplicitNode && isImplicit;\n        this._inImplicitNode = wasInImplicitNode || isImplicit;\n        if (!this._isInTranslatableSection && !this._inIcu) {\n            if (i18nAttr || isTopLevelImplicit) {\n                this._inI18nNode = true;\n                var message = this._addMessage(el.children, i18nMeta);\n                translatedChildNodes = this._translateMessage(el, message);\n            }\n            if (this._mode == _VisitorMode.Extract) {\n                var isTranslatable = i18nAttr || isTopLevelImplicit;\n                if (isTranslatable)\n                    this._openTranslatableSection(el);\n                visitAll(this, el.children);\n                if (isTranslatable)\n                    this._closeTranslatableSection(el, el.children);\n            }\n        }\n        else {\n            if (i18nAttr || isTopLevelImplicit) {\n                this._reportError(el, 'Could not mark an element as translatable inside a translatable section');\n            }\n            if (this._mode == _VisitorMode.Extract) {\n                // Descend into child nodes for extraction\n                visitAll(this, el.children);\n            }\n        }\n        if (this._mode === _VisitorMode.Merge) {\n            var visitNodes = translatedChildNodes || el.children;\n            visitNodes.forEach(function (child) {\n                var visited = child.visit(_this, context);\n                if (visited && !_this._isInTranslatableSection) {\n                    // Do not add the children from translatable sections (= i18n blocks here)\n                    // They will be added later in this loop when the block closes (i.e. on `<!-- /i18n -->`)\n                    childNodes = childNodes.concat(visited);\n                }\n            });\n        }\n        this._visitAttributesOf(el);\n        this._depth--;\n        this._inI18nNode = wasInI18nNode;\n        this._inImplicitNode = wasInImplicitNode;\n        if (this._mode === _VisitorMode.Merge) {\n            var translatedAttrs = this._translateAttributes(el);\n            return new Element(el.name, translatedAttrs, childNodes, el.sourceSpan, el.startSourceSpan, el.endSourceSpan);\n        }\n        return null;\n    };\n    _Visitor.prototype.visitAttribute = function (attribute, context) {\n        throw new Error('unreachable code');\n    };\n    _Visitor.prototype._init = function (mode, interpolationConfig) {\n        this._mode = mode;\n        this._inI18nBlock = false;\n        this._inI18nNode = false;\n        this._depth = 0;\n        this._inIcu = false;\n        this._msgCountAtSectionStart = undefined;\n        this._errors = [];\n        this._messages = [];\n        this._inImplicitNode = false;\n        this._createI18nMessage = createI18nMessageFactory(interpolationConfig);\n    };\n    // looks for translatable attributes\n    _Visitor.prototype._visitAttributesOf = function (el) {\n        var _this = this;\n        var explicitAttrNameToValue = {};\n        var implicitAttrNames = this._implicitAttrs[el.name] || [];\n        el.attrs.filter(function (attr) { return attr.name.startsWith(_I18N_ATTR_PREFIX); })\n            .forEach(function (attr) { return explicitAttrNameToValue[attr.name.slice(_I18N_ATTR_PREFIX.length)] =\n            attr.value; });\n        el.attrs.forEach(function (attr) {\n            if (attr.name in explicitAttrNameToValue) {\n                _this._addMessage([attr], explicitAttrNameToValue[attr.name]);\n            }\n            else if (implicitAttrNames.some(function (name) { return attr.name === name; })) {\n                _this._addMessage([attr]);\n            }\n        });\n    };\n    // add a translatable message\n    _Visitor.prototype._addMessage = function (ast, msgMeta) {\n        if (ast.length == 0 ||\n            ast.length == 1 && ast[0] instanceof Attribute && !ast[0].value) {\n            // Do not create empty messages\n            return null;\n        }\n        var _a = _parseMessageMeta(msgMeta), meaning = _a.meaning, description = _a.description, id = _a.id;\n        var message = this._createI18nMessage(ast, meaning, description, id);\n        this._messages.push(message);\n        return message;\n    };\n    // Translates the given message given the `TranslationBundle`\n    // This is used for translating elements / blocks - see `_translateAttributes` for attributes\n    // no-op when called in extraction mode (returns [])\n    _Visitor.prototype._translateMessage = function (el, message) {\n        if (message && this._mode === _VisitorMode.Merge) {\n            var nodes = this._translations.get(message);\n            if (nodes) {\n                return nodes;\n            }\n            this._reportError(el, \"Translation unavailable for message id=\\\"\" + this._translations.digest(message) + \"\\\"\");\n        }\n        return [];\n    };\n    // translate the attributes of an element and remove i18n specific attributes\n    _Visitor.prototype._translateAttributes = function (el) {\n        var _this = this;\n        var attributes = el.attrs;\n        var i18nParsedMessageMeta = {};\n        attributes.forEach(function (attr) {\n            if (attr.name.startsWith(_I18N_ATTR_PREFIX)) {\n                i18nParsedMessageMeta[attr.name.slice(_I18N_ATTR_PREFIX.length)] =\n                    _parseMessageMeta(attr.value);\n            }\n        });\n        var translatedAttributes = [];\n        attributes.forEach(function (attr) {\n            if (attr.name === _I18N_ATTR || attr.name.startsWith(_I18N_ATTR_PREFIX)) {\n                // strip i18n specific attributes\n                return;\n            }\n            if (attr.value && attr.value != '' && i18nParsedMessageMeta.hasOwnProperty(attr.name)) {\n                var _a = i18nParsedMessageMeta[attr.name], meaning = _a.meaning, description = _a.description, id = _a.id;\n                var message = _this._createI18nMessage([attr], meaning, description, id);\n                var nodes = _this._translations.get(message);\n                if (nodes) {\n                    if (nodes.length == 0) {\n                        translatedAttributes.push(new Attribute(attr.name, '', attr.sourceSpan));\n                    }\n                    else if (nodes[0] instanceof Text) {\n                        var value = nodes[0].value;\n                        translatedAttributes.push(new Attribute(attr.name, value, attr.sourceSpan));\n                    }\n                    else {\n                        _this._reportError(el, \"Unexpected translation for attribute \\\"\" + attr.name + \"\\\" (id=\\\"\" + (id || _this._translations.digest(message)) + \"\\\")\");\n                    }\n                }\n                else {\n                    _this._reportError(el, \"Translation unavailable for attribute \\\"\" + attr.name + \"\\\" (id=\\\"\" + (id || _this._translations.digest(message)) + \"\\\")\");\n                }\n            }\n            else {\n                translatedAttributes.push(attr);\n            }\n        });\n        return translatedAttributes;\n    };\n    /**\n     * Add the node as a child of the block when:\n     * - we are in a block,\n     * - we are not inside a ICU message (those are handled separately),\n     * - the node is a \"direct child\" of the block\n     */\n    _Visitor.prototype._mayBeAddBlockChildren = function (node) {\n        if (this._inI18nBlock && !this._inIcu && this._depth == this._blockStartDepth) {\n            this._blockChildren.push(node);\n        }\n    };\n    /**\n     * Marks the start of a section, see `_closeTranslatableSection`\n     */\n    _Visitor.prototype._openTranslatableSection = function (node) {\n        if (this._isInTranslatableSection) {\n            this._reportError(node, 'Unexpected section start');\n        }\n        else {\n            this._msgCountAtSectionStart = this._messages.length;\n        }\n    };\n    Object.defineProperty(_Visitor.prototype, \"_isInTranslatableSection\", {\n        /**\n         * A translatable section could be:\n         * - the content of translatable element,\n         * - nodes between `<!-- i18n -->` and `<!-- /i18n -->` comments\n         */\n        get: function () {\n            return this._msgCountAtSectionStart !== void 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Terminates a section.\n     *\n     * If a section has only one significant children (comments not significant) then we should not\n     * keep the message from this children:\n     *\n     * `<p i18n=\"meaning|description\">{ICU message}</p>` would produce two messages:\n     * - one for the <p> content with meaning and description,\n     * - another one for the ICU message.\n     *\n     * In this case the last message is discarded as it contains less information (the AST is\n     * otherwise identical).\n     *\n     * Note that we should still keep messages extracted from attributes inside the section (ie in the\n     * ICU message here)\n     */\n    _Visitor.prototype._closeTranslatableSection = function (node, directChildren) {\n        if (!this._isInTranslatableSection) {\n            this._reportError(node, 'Unexpected section end');\n            return;\n        }\n        var startIndex = this._msgCountAtSectionStart;\n        var significantChildren = directChildren.reduce(function (count, node) { return count + (node instanceof Comment ? 0 : 1); }, 0);\n        if (significantChildren == 1) {\n            for (var i = this._messages.length - 1; i >= startIndex; i--) {\n                var ast = this._messages[i].nodes;\n                if (!(ast.length == 1 && ast[0] instanceof Text$1)) {\n                    this._messages.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        this._msgCountAtSectionStart = undefined;\n    };\n    _Visitor.prototype._reportError = function (node, msg) {\n        this._errors.push(new I18nError(node.sourceSpan, msg));\n    };\n    return _Visitor;\n}());\nfunction _isOpeningComment(n) {\n    return !!(n instanceof Comment && n.value && n.value.startsWith('i18n'));\n}\nfunction _isClosingComment(n) {\n    return !!(n instanceof Comment && n.value && n.value === '/i18n');\n}\nfunction _getI18nAttr(p) {\n    return p.attrs.find(function (attr) { return attr.name === _I18N_ATTR; }) || null;\n}\nfunction _parseMessageMeta(i18n) {\n    if (!i18n)\n        return { meaning: '', description: '', id: '' };\n    var idIndex = i18n.indexOf(ID_SEPARATOR);\n    var descIndex = i18n.indexOf(MEANING_SEPARATOR);\n    var _a = __read((idIndex > -1) ? [i18n.slice(0, idIndex), i18n.slice(idIndex + 2)] : [i18n, ''], 2), meaningAndDesc = _a[0], id = _a[1];\n    var _b = __read((descIndex > -1) ?\n        [meaningAndDesc.slice(0, descIndex), meaningAndDesc.slice(descIndex + 1)] :\n        ['', meaningAndDesc], 2), meaning = _b[0], description = _b[1];\n    return { meaning: meaning, description: description, id: id };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar XmlTagDefinition = /** @class */ (function () {\n    function XmlTagDefinition() {\n        this.closedByParent = false;\n        this.contentType = TagContentType.PARSABLE_DATA;\n        this.isVoid = false;\n        this.ignoreFirstLf = false;\n        this.canSelfClose = true;\n    }\n    XmlTagDefinition.prototype.requireExtraParent = function (currentParent) { return false; };\n    XmlTagDefinition.prototype.isClosedByChild = function (name) { return false; };\n    return XmlTagDefinition;\n}());\nvar _TAG_DEFINITION = new XmlTagDefinition();\nfunction getXmlTagDefinition(tagName) {\n    return _TAG_DEFINITION;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar XmlParser = /** @class */ (function (_super) {\n    __extends(XmlParser, _super);\n    function XmlParser() {\n        return _super.call(this, getXmlTagDefinition) || this;\n    }\n    XmlParser.prototype.parse = function (source, url, parseExpansionForms) {\n        if (parseExpansionForms === void 0) { parseExpansionForms = false; }\n        return _super.prototype.parse.call(this, source, url, parseExpansionForms);\n    };\n    return XmlParser;\n}(Parser$1));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Serializer = /** @class */ (function () {\n    function Serializer() {\n    }\n    // Creates a name mapper, see `PlaceholderMapper`\n    // Returning `null` means that no name mapping is used.\n    Serializer.prototype.createNameMapper = function (message) { return null; };\n    return Serializer;\n}());\n/**\n * A simple mapper that take a function to transform an internal name to a public name\n */\nvar SimplePlaceholderMapper = /** @class */ (function (_super) {\n    __extends(SimplePlaceholderMapper, _super);\n    // create a mapping from the message\n    function SimplePlaceholderMapper(message, mapName) {\n        var _this = _super.call(this) || this;\n        _this.mapName = mapName;\n        _this.internalToPublic = {};\n        _this.publicToNextId = {};\n        _this.publicToInternal = {};\n        message.nodes.forEach(function (node) { return node.visit(_this); });\n        return _this;\n    }\n    SimplePlaceholderMapper.prototype.toPublicName = function (internalName) {\n        return this.internalToPublic.hasOwnProperty(internalName) ?\n            this.internalToPublic[internalName] :\n            null;\n    };\n    SimplePlaceholderMapper.prototype.toInternalName = function (publicName) {\n        return this.publicToInternal.hasOwnProperty(publicName) ? this.publicToInternal[publicName] :\n            null;\n    };\n    SimplePlaceholderMapper.prototype.visitText = function (text, context) { return null; };\n    SimplePlaceholderMapper.prototype.visitTagPlaceholder = function (ph, context) {\n        this.visitPlaceholderName(ph.startName);\n        _super.prototype.visitTagPlaceholder.call(this, ph, context);\n        this.visitPlaceholderName(ph.closeName);\n    };\n    SimplePlaceholderMapper.prototype.visitPlaceholder = function (ph, context) { this.visitPlaceholderName(ph.name); };\n    SimplePlaceholderMapper.prototype.visitIcuPlaceholder = function (ph, context) {\n        this.visitPlaceholderName(ph.name);\n    };\n    // XMB placeholders could only contains A-Z, 0-9 and _\n    SimplePlaceholderMapper.prototype.visitPlaceholderName = function (internalName) {\n        if (!internalName || this.internalToPublic.hasOwnProperty(internalName)) {\n            return;\n        }\n        var publicName = this.mapName(internalName);\n        if (this.publicToInternal.hasOwnProperty(publicName)) {\n            // Create a new XMB when it has already been used\n            var nextId = this.publicToNextId[publicName];\n            this.publicToNextId[publicName] = nextId + 1;\n            publicName = publicName + \"_\" + nextId;\n        }\n        else {\n            this.publicToNextId[publicName] = 1;\n        }\n        this.internalToPublic[internalName] = publicName;\n        this.publicToInternal[publicName] = internalName;\n    };\n    return SimplePlaceholderMapper;\n}(RecurseVisitor));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _Visitor$1 = /** @class */ (function () {\n    function _Visitor() {\n    }\n    _Visitor.prototype.visitTag = function (tag) {\n        var _this = this;\n        var strAttrs = this._serializeAttributes(tag.attrs);\n        if (tag.children.length == 0) {\n            return \"<\" + tag.name + strAttrs + \"/>\";\n        }\n        var strChildren = tag.children.map(function (node) { return node.visit(_this); });\n        return \"<\" + tag.name + strAttrs + \">\" + strChildren.join('') + \"</\" + tag.name + \">\";\n    };\n    _Visitor.prototype.visitText = function (text) { return text.value; };\n    _Visitor.prototype.visitDeclaration = function (decl) {\n        return \"<?xml\" + this._serializeAttributes(decl.attrs) + \" ?>\";\n    };\n    _Visitor.prototype._serializeAttributes = function (attrs) {\n        var strAttrs = Object.keys(attrs).map(function (name) { return name + \"=\\\"\" + attrs[name] + \"\\\"\"; }).join(' ');\n        return strAttrs.length > 0 ? ' ' + strAttrs : '';\n    };\n    _Visitor.prototype.visitDoctype = function (doctype) {\n        return \"<!DOCTYPE \" + doctype.rootTag + \" [\\n\" + doctype.dtd + \"\\n]>\";\n    };\n    return _Visitor;\n}());\nvar _visitor = new _Visitor$1();\nfunction serialize(nodes) {\n    return nodes.map(function (node) { return node.visit(_visitor); }).join('');\n}\nvar Declaration = /** @class */ (function () {\n    function Declaration(unescapedAttrs) {\n        var _this = this;\n        this.attrs = {};\n        Object.keys(unescapedAttrs).forEach(function (k) {\n            _this.attrs[k] = escapeXml(unescapedAttrs[k]);\n        });\n    }\n    Declaration.prototype.visit = function (visitor) { return visitor.visitDeclaration(this); };\n    return Declaration;\n}());\nvar Doctype = /** @class */ (function () {\n    function Doctype(rootTag, dtd) {\n        this.rootTag = rootTag;\n        this.dtd = dtd;\n    }\n    Doctype.prototype.visit = function (visitor) { return visitor.visitDoctype(this); };\n    return Doctype;\n}());\nvar Tag = /** @class */ (function () {\n    function Tag(name, unescapedAttrs, children) {\n        if (unescapedAttrs === void 0) { unescapedAttrs = {}; }\n        if (children === void 0) { children = []; }\n        var _this = this;\n        this.name = name;\n        this.children = children;\n        this.attrs = {};\n        Object.keys(unescapedAttrs).forEach(function (k) {\n            _this.attrs[k] = escapeXml(unescapedAttrs[k]);\n        });\n    }\n    Tag.prototype.visit = function (visitor) { return visitor.visitTag(this); };\n    return Tag;\n}());\nvar Text$2 = /** @class */ (function () {\n    function Text(unescapedValue) {\n        this.value = escapeXml(unescapedValue);\n    }\n    Text.prototype.visit = function (visitor) { return visitor.visitText(this); };\n    return Text;\n}());\nvar CR = /** @class */ (function (_super) {\n    __extends(CR, _super);\n    function CR(ws) {\n        if (ws === void 0) { ws = 0; }\n        return _super.call(this, \"\\n\" + new Array(ws + 1).join(' ')) || this;\n    }\n    return CR;\n}(Text$2));\nvar _ESCAPED_CHARS = [\n    [/&/g, '&amp;'],\n    [/\"/g, '&quot;'],\n    [/'/g, '&apos;'],\n    [/</g, '&lt;'],\n    [/>/g, '&gt;'],\n];\n// Escape `_ESCAPED_CHARS` characters in the given text with encoded entities\nfunction escapeXml(text) {\n    return _ESCAPED_CHARS.reduce(function (text, entry) { return text.replace(entry[0], entry[1]); }, text);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _VERSION = '1.2';\nvar _XMLNS = 'urn:oasis:names:tc:xliff:document:1.2';\n// TODO(vicb): make this a param (s/_/-/)\nvar _DEFAULT_SOURCE_LANG = 'en';\nvar _PLACEHOLDER_TAG = 'x';\nvar _MARKER_TAG = 'mrk';\nvar _FILE_TAG = 'file';\nvar _SOURCE_TAG = 'source';\nvar _SEGMENT_SOURCE_TAG = 'seg-source';\nvar _TARGET_TAG = 'target';\nvar _UNIT_TAG = 'trans-unit';\nvar _CONTEXT_GROUP_TAG = 'context-group';\nvar _CONTEXT_TAG = 'context';\n// http://docs.oasis-open.org/xliff/v1.2/os/xliff-core.html\n// http://docs.oasis-open.org/xliff/v1.2/xliff-profile-html/xliff-profile-html-1.2.html\nvar Xliff = /** @class */ (function (_super) {\n    __extends(Xliff, _super);\n    function Xliff() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Xliff.prototype.write = function (messages, locale) {\n        var visitor = new _WriteVisitor();\n        var transUnits = [];\n        messages.forEach(function (message) {\n            var contextTags = [];\n            message.sources.forEach(function (source) {\n                var contextGroupTag = new Tag(_CONTEXT_GROUP_TAG, { purpose: 'location' });\n                contextGroupTag.children.push(new CR(10), new Tag(_CONTEXT_TAG, { 'context-type': 'sourcefile' }, [new Text$2(source.filePath)]), new CR(10), new Tag(_CONTEXT_TAG, { 'context-type': 'linenumber' }, [new Text$2(\"\" + source.startLine)]), new CR(8));\n                contextTags.push(new CR(8), contextGroupTag);\n            });\n            var transUnit = new Tag(_UNIT_TAG, { id: message.id, datatype: 'html' });\n            (_a = transUnit.children).push.apply(_a, __spread([new CR(8), new Tag(_SOURCE_TAG, {}, visitor.serialize(message.nodes))], contextTags));\n            if (message.description) {\n                transUnit.children.push(new CR(8), new Tag('note', { priority: '1', from: 'description' }, [new Text$2(message.description)]));\n            }\n            if (message.meaning) {\n                transUnit.children.push(new CR(8), new Tag('note', { priority: '1', from: 'meaning' }, [new Text$2(message.meaning)]));\n            }\n            transUnit.children.push(new CR(6));\n            transUnits.push(new CR(6), transUnit);\n            var _a;\n        });\n        var body = new Tag('body', {}, __spread(transUnits, [new CR(4)]));\n        var file = new Tag('file', {\n            'source-language': locale || _DEFAULT_SOURCE_LANG,\n            datatype: 'plaintext',\n            original: 'ng2.template',\n        }, [new CR(4), body, new CR(2)]);\n        var xliff = new Tag('xliff', { version: _VERSION, xmlns: _XMLNS }, [new CR(2), file, new CR()]);\n        return serialize([\n            new Declaration({ version: '1.0', encoding: 'UTF-8' }), new CR(), xliff, new CR()\n        ]);\n    };\n    Xliff.prototype.load = function (content, url) {\n        // xliff to xml nodes\n        var xliffParser = new XliffParser();\n        var _a = xliffParser.parse(content, url), locale = _a.locale, msgIdToHtml = _a.msgIdToHtml, errors = _a.errors;\n        // xml nodes to i18n nodes\n        var i18nNodesByMsgId = {};\n        var converter = new XmlToI18n();\n        Object.keys(msgIdToHtml).forEach(function (msgId) {\n            var _a = converter.convert(msgIdToHtml[msgId], url), i18nNodes = _a.i18nNodes, e = _a.errors;\n            errors.push.apply(errors, __spread(e));\n            i18nNodesByMsgId[msgId] = i18nNodes;\n        });\n        if (errors.length) {\n            throw new Error(\"xliff parse errors:\\n\" + errors.join('\\n'));\n        }\n        return { locale: locale, i18nNodesByMsgId: i18nNodesByMsgId };\n    };\n    Xliff.prototype.digest = function (message) { return digest(message); };\n    return Xliff;\n}(Serializer));\nvar _WriteVisitor = /** @class */ (function () {\n    function _WriteVisitor() {\n    }\n    _WriteVisitor.prototype.visitText = function (text, context) { return [new Text$2(text.value)]; };\n    _WriteVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        var nodes = [];\n        container.children.forEach(function (node) { return nodes.push.apply(nodes, __spread(node.visit(_this))); });\n        return nodes;\n    };\n    _WriteVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var nodes = [new Text$2(\"{\" + icu.expressionPlaceholder + \", \" + icu.type + \", \")];\n        Object.keys(icu.cases).forEach(function (c) {\n            nodes.push.apply(nodes, __spread([new Text$2(c + \" {\")], icu.cases[c].visit(_this), [new Text$2(\"} \")]));\n        });\n        nodes.push(new Text$2(\"}\"));\n        return nodes;\n    };\n    _WriteVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var ctype = getCtypeForTag(ph.tag);\n        if (ph.isVoid) {\n            // void tags have no children nor closing tags\n            return [new Tag(_PLACEHOLDER_TAG, { id: ph.startName, ctype: ctype, 'equiv-text': \"<\" + ph.tag + \"/>\" })];\n        }\n        var startTagPh = new Tag(_PLACEHOLDER_TAG, { id: ph.startName, ctype: ctype, 'equiv-text': \"<\" + ph.tag + \">\" });\n        var closeTagPh = new Tag(_PLACEHOLDER_TAG, { id: ph.closeName, ctype: ctype, 'equiv-text': \"</\" + ph.tag + \">\" });\n        return __spread([startTagPh], this.serialize(ph.children), [closeTagPh]);\n    };\n    _WriteVisitor.prototype.visitPlaceholder = function (ph, context) {\n        return [new Tag(_PLACEHOLDER_TAG, { id: ph.name, 'equiv-text': \"{{\" + ph.value + \"}}\" })];\n    };\n    _WriteVisitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        var equivText = \"{\" + ph.value.expression + \", \" + ph.value.type + \", \" + Object.keys(ph.value.cases).map(function (value) { return value + ' {...}'; }).join(' ') + \"}\";\n        return [new Tag(_PLACEHOLDER_TAG, { id: ph.name, 'equiv-text': equivText })];\n    };\n    _WriteVisitor.prototype.serialize = function (nodes) {\n        var _this = this;\n        return [].concat.apply([], __spread(nodes.map(function (node) { return node.visit(_this); })));\n    };\n    return _WriteVisitor;\n}());\n// TODO(vicb): add error management (structure)\n// Extract messages as xml nodes from the xliff file\nvar XliffParser = /** @class */ (function () {\n    function XliffParser() {\n        this._locale = null;\n    }\n    XliffParser.prototype.parse = function (xliff, url) {\n        this._unitMlString = null;\n        this._msgIdToHtml = {};\n        var xml = new XmlParser().parse(xliff, url, false);\n        this._errors = xml.errors;\n        visitAll(this, xml.rootNodes, null);\n        return {\n            msgIdToHtml: this._msgIdToHtml,\n            errors: this._errors,\n            locale: this._locale,\n        };\n    };\n    XliffParser.prototype.visitElement = function (element, context) {\n        switch (element.name) {\n            case _UNIT_TAG:\n                this._unitMlString = null;\n                var idAttr = element.attrs.find(function (attr) { return attr.name === 'id'; });\n                if (!idAttr) {\n                    this._addError(element, \"<\" + _UNIT_TAG + \"> misses the \\\"id\\\" attribute\");\n                }\n                else {\n                    var id = idAttr.value;\n                    if (this._msgIdToHtml.hasOwnProperty(id)) {\n                        this._addError(element, \"Duplicated translations for msg \" + id);\n                    }\n                    else {\n                        visitAll(this, element.children, null);\n                        if (typeof this._unitMlString === 'string') {\n                            this._msgIdToHtml[id] = this._unitMlString;\n                        }\n                        else {\n                            this._addError(element, \"Message \" + id + \" misses a translation\");\n                        }\n                    }\n                }\n                break;\n            // ignore those tags\n            case _SOURCE_TAG:\n            case _SEGMENT_SOURCE_TAG:\n                break;\n            case _TARGET_TAG:\n                var innerTextStart = element.startSourceSpan.end.offset;\n                var innerTextEnd = element.endSourceSpan.start.offset;\n                var content = element.startSourceSpan.start.file.content;\n                var innerText = content.slice(innerTextStart, innerTextEnd);\n                this._unitMlString = innerText;\n                break;\n            case _FILE_TAG:\n                var localeAttr = element.attrs.find(function (attr) { return attr.name === 'target-language'; });\n                if (localeAttr) {\n                    this._locale = localeAttr.value;\n                }\n                visitAll(this, element.children, null);\n                break;\n            default:\n                // TODO(vicb): assert file structure, xliff version\n                // For now only recurse on unhandled nodes\n                visitAll(this, element.children, null);\n        }\n    };\n    XliffParser.prototype.visitAttribute = function (attribute, context) { };\n    XliffParser.prototype.visitText = function (text, context) { };\n    XliffParser.prototype.visitComment = function (comment, context) { };\n    XliffParser.prototype.visitExpansion = function (expansion, context) { };\n    XliffParser.prototype.visitExpansionCase = function (expansionCase, context) { };\n    XliffParser.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return XliffParser;\n}());\n// Convert ml nodes (xliff syntax) to i18n nodes\nvar XmlToI18n = /** @class */ (function () {\n    function XmlToI18n() {\n    }\n    XmlToI18n.prototype.convert = function (message, url) {\n        var xmlIcu = new XmlParser().parse(message, url, true);\n        this._errors = xmlIcu.errors;\n        var i18nNodes = this._errors.length > 0 || xmlIcu.rootNodes.length == 0 ?\n            [] : [].concat.apply([], __spread(visitAll(this, xmlIcu.rootNodes)));\n        return {\n            i18nNodes: i18nNodes,\n            errors: this._errors,\n        };\n    };\n    XmlToI18n.prototype.visitText = function (text, context) { return new Text$1(text.value, text.sourceSpan); };\n    XmlToI18n.prototype.visitElement = function (el, context) {\n        if (el.name === _PLACEHOLDER_TAG) {\n            var nameAttr = el.attrs.find(function (attr) { return attr.name === 'id'; });\n            if (nameAttr) {\n                return new Placeholder('', nameAttr.value, el.sourceSpan);\n            }\n            this._addError(el, \"<\" + _PLACEHOLDER_TAG + \"> misses the \\\"id\\\" attribute\");\n            return null;\n        }\n        if (el.name === _MARKER_TAG) {\n            return [].concat.apply([], __spread(visitAll(this, el.children)));\n        }\n        this._addError(el, \"Unexpected tag\");\n        return null;\n    };\n    XmlToI18n.prototype.visitExpansion = function (icu, context) {\n        var caseMap = {};\n        visitAll(this, icu.cases).forEach(function (c) {\n            caseMap[c.value] = new Container(c.nodes, icu.sourceSpan);\n        });\n        return new Icu(icu.switchValue, icu.type, caseMap, icu.sourceSpan);\n    };\n    XmlToI18n.prototype.visitExpansionCase = function (icuCase, context) {\n        return {\n            value: icuCase.value,\n            nodes: visitAll(this, icuCase.expression),\n        };\n    };\n    XmlToI18n.prototype.visitComment = function (comment, context) { };\n    XmlToI18n.prototype.visitAttribute = function (attribute, context) { };\n    XmlToI18n.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return XmlToI18n;\n}());\nfunction getCtypeForTag(tag) {\n    switch (tag.toLowerCase()) {\n        case 'br':\n            return 'lb';\n        case 'img':\n            return 'image';\n        default:\n            return \"x-\" + tag;\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _VERSION$1 = '2.0';\nvar _XMLNS$1 = 'urn:oasis:names:tc:xliff:document:2.0';\n// TODO(vicb): make this a param (s/_/-/)\nvar _DEFAULT_SOURCE_LANG$1 = 'en';\nvar _PLACEHOLDER_TAG$1 = 'ph';\nvar _PLACEHOLDER_SPANNING_TAG = 'pc';\nvar _MARKER_TAG$1 = 'mrk';\nvar _XLIFF_TAG = 'xliff';\nvar _SOURCE_TAG$1 = 'source';\nvar _TARGET_TAG$1 = 'target';\nvar _UNIT_TAG$1 = 'unit';\n// http://docs.oasis-open.org/xliff/xliff-core/v2.0/os/xliff-core-v2.0-os.html\nvar Xliff2 = /** @class */ (function (_super) {\n    __extends(Xliff2, _super);\n    function Xliff2() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Xliff2.prototype.write = function (messages, locale) {\n        var visitor = new _WriteVisitor$1();\n        var units = [];\n        messages.forEach(function (message) {\n            var unit = new Tag(_UNIT_TAG$1, { id: message.id });\n            var notes = new Tag('notes');\n            if (message.description || message.meaning) {\n                if (message.description) {\n                    notes.children.push(new CR(8), new Tag('note', { category: 'description' }, [new Text$2(message.description)]));\n                }\n                if (message.meaning) {\n                    notes.children.push(new CR(8), new Tag('note', { category: 'meaning' }, [new Text$2(message.meaning)]));\n                }\n            }\n            message.sources.forEach(function (source) {\n                notes.children.push(new CR(8), new Tag('note', { category: 'location' }, [\n                    new Text$2(source.filePath + \":\" + source.startLine + (source.endLine !== source.startLine ? ',' + source.endLine : ''))\n                ]));\n            });\n            notes.children.push(new CR(6));\n            unit.children.push(new CR(6), notes);\n            var segment = new Tag('segment');\n            segment.children.push(new CR(8), new Tag(_SOURCE_TAG$1, {}, visitor.serialize(message.nodes)), new CR(6));\n            unit.children.push(new CR(6), segment, new CR(4));\n            units.push(new CR(4), unit);\n        });\n        var file = new Tag('file', { 'original': 'ng.template', id: 'ngi18n' }, __spread(units, [new CR(2)]));\n        var xliff = new Tag(_XLIFF_TAG, { version: _VERSION$1, xmlns: _XMLNS$1, srcLang: locale || _DEFAULT_SOURCE_LANG$1 }, [new CR(2), file, new CR()]);\n        return serialize([\n            new Declaration({ version: '1.0', encoding: 'UTF-8' }), new CR(), xliff, new CR()\n        ]);\n    };\n    Xliff2.prototype.load = function (content, url) {\n        // xliff to xml nodes\n        var xliff2Parser = new Xliff2Parser();\n        var _a = xliff2Parser.parse(content, url), locale = _a.locale, msgIdToHtml = _a.msgIdToHtml, errors = _a.errors;\n        // xml nodes to i18n nodes\n        var i18nNodesByMsgId = {};\n        var converter = new XmlToI18n$1();\n        Object.keys(msgIdToHtml).forEach(function (msgId) {\n            var _a = converter.convert(msgIdToHtml[msgId], url), i18nNodes = _a.i18nNodes, e = _a.errors;\n            errors.push.apply(errors, __spread(e));\n            i18nNodesByMsgId[msgId] = i18nNodes;\n        });\n        if (errors.length) {\n            throw new Error(\"xliff2 parse errors:\\n\" + errors.join('\\n'));\n        }\n        return { locale: locale, i18nNodesByMsgId: i18nNodesByMsgId };\n    };\n    Xliff2.prototype.digest = function (message) { return decimalDigest(message); };\n    return Xliff2;\n}(Serializer));\nvar _WriteVisitor$1 = /** @class */ (function () {\n    function _WriteVisitor() {\n    }\n    _WriteVisitor.prototype.visitText = function (text, context) { return [new Text$2(text.value)]; };\n    _WriteVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        var nodes = [];\n        container.children.forEach(function (node) { return nodes.push.apply(nodes, __spread(node.visit(_this))); });\n        return nodes;\n    };\n    _WriteVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var nodes = [new Text$2(\"{\" + icu.expressionPlaceholder + \", \" + icu.type + \", \")];\n        Object.keys(icu.cases).forEach(function (c) {\n            nodes.push.apply(nodes, __spread([new Text$2(c + \" {\")], icu.cases[c].visit(_this), [new Text$2(\"} \")]));\n        });\n        nodes.push(new Text$2(\"}\"));\n        return nodes;\n    };\n    _WriteVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var _this = this;\n        var type = getTypeForTag(ph.tag);\n        if (ph.isVoid) {\n            var tagPh = new Tag(_PLACEHOLDER_TAG$1, {\n                id: (this._nextPlaceholderId++).toString(),\n                equiv: ph.startName,\n                type: type,\n                disp: \"<\" + ph.tag + \"/>\",\n            });\n            return [tagPh];\n        }\n        var tagPc = new Tag(_PLACEHOLDER_SPANNING_TAG, {\n            id: (this._nextPlaceholderId++).toString(),\n            equivStart: ph.startName,\n            equivEnd: ph.closeName,\n            type: type,\n            dispStart: \"<\" + ph.tag + \">\",\n            dispEnd: \"</\" + ph.tag + \">\",\n        });\n        var nodes = [].concat.apply([], __spread(ph.children.map(function (node) { return node.visit(_this); })));\n        if (nodes.length) {\n            nodes.forEach(function (node) { return tagPc.children.push(node); });\n        }\n        else {\n            tagPc.children.push(new Text$2(''));\n        }\n        return [tagPc];\n    };\n    _WriteVisitor.prototype.visitPlaceholder = function (ph, context) {\n        var idStr = (this._nextPlaceholderId++).toString();\n        return [new Tag(_PLACEHOLDER_TAG$1, {\n                id: idStr,\n                equiv: ph.name,\n                disp: \"{{\" + ph.value + \"}}\",\n            })];\n    };\n    _WriteVisitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        var cases = Object.keys(ph.value.cases).map(function (value) { return value + ' {...}'; }).join(' ');\n        var idStr = (this._nextPlaceholderId++).toString();\n        return [new Tag(_PLACEHOLDER_TAG$1, { id: idStr, equiv: ph.name, disp: \"{\" + ph.value.expression + \", \" + ph.value.type + \", \" + cases + \"}\" })];\n    };\n    _WriteVisitor.prototype.serialize = function (nodes) {\n        var _this = this;\n        this._nextPlaceholderId = 0;\n        return [].concat.apply([], __spread(nodes.map(function (node) { return node.visit(_this); })));\n    };\n    return _WriteVisitor;\n}());\n// Extract messages as xml nodes from the xliff file\nvar Xliff2Parser = /** @class */ (function () {\n    function Xliff2Parser() {\n        this._locale = null;\n    }\n    Xliff2Parser.prototype.parse = function (xliff, url) {\n        this._unitMlString = null;\n        this._msgIdToHtml = {};\n        var xml = new XmlParser().parse(xliff, url, false);\n        this._errors = xml.errors;\n        visitAll(this, xml.rootNodes, null);\n        return {\n            msgIdToHtml: this._msgIdToHtml,\n            errors: this._errors,\n            locale: this._locale,\n        };\n    };\n    Xliff2Parser.prototype.visitElement = function (element, context) {\n        switch (element.name) {\n            case _UNIT_TAG$1:\n                this._unitMlString = null;\n                var idAttr = element.attrs.find(function (attr) { return attr.name === 'id'; });\n                if (!idAttr) {\n                    this._addError(element, \"<\" + _UNIT_TAG$1 + \"> misses the \\\"id\\\" attribute\");\n                }\n                else {\n                    var id = idAttr.value;\n                    if (this._msgIdToHtml.hasOwnProperty(id)) {\n                        this._addError(element, \"Duplicated translations for msg \" + id);\n                    }\n                    else {\n                        visitAll(this, element.children, null);\n                        if (typeof this._unitMlString === 'string') {\n                            this._msgIdToHtml[id] = this._unitMlString;\n                        }\n                        else {\n                            this._addError(element, \"Message \" + id + \" misses a translation\");\n                        }\n                    }\n                }\n                break;\n            case _SOURCE_TAG$1:\n                // ignore source message\n                break;\n            case _TARGET_TAG$1:\n                var innerTextStart = element.startSourceSpan.end.offset;\n                var innerTextEnd = element.endSourceSpan.start.offset;\n                var content = element.startSourceSpan.start.file.content;\n                var innerText = content.slice(innerTextStart, innerTextEnd);\n                this._unitMlString = innerText;\n                break;\n            case _XLIFF_TAG:\n                var localeAttr = element.attrs.find(function (attr) { return attr.name === 'trgLang'; });\n                if (localeAttr) {\n                    this._locale = localeAttr.value;\n                }\n                var versionAttr = element.attrs.find(function (attr) { return attr.name === 'version'; });\n                if (versionAttr) {\n                    var version$$1 = versionAttr.value;\n                    if (version$$1 !== '2.0') {\n                        this._addError(element, \"The XLIFF file version \" + version$$1 + \" is not compatible with XLIFF 2.0 serializer\");\n                    }\n                    else {\n                        visitAll(this, element.children, null);\n                    }\n                }\n                break;\n            default:\n                visitAll(this, element.children, null);\n        }\n    };\n    Xliff2Parser.prototype.visitAttribute = function (attribute, context) { };\n    Xliff2Parser.prototype.visitText = function (text, context) { };\n    Xliff2Parser.prototype.visitComment = function (comment, context) { };\n    Xliff2Parser.prototype.visitExpansion = function (expansion, context) { };\n    Xliff2Parser.prototype.visitExpansionCase = function (expansionCase, context) { };\n    Xliff2Parser.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return Xliff2Parser;\n}());\n// Convert ml nodes (xliff syntax) to i18n nodes\nvar XmlToI18n$1 = /** @class */ (function () {\n    function XmlToI18n() {\n    }\n    XmlToI18n.prototype.convert = function (message, url) {\n        var xmlIcu = new XmlParser().parse(message, url, true);\n        this._errors = xmlIcu.errors;\n        var i18nNodes = this._errors.length > 0 || xmlIcu.rootNodes.length == 0 ?\n            [] : [].concat.apply([], __spread(visitAll(this, xmlIcu.rootNodes)));\n        return {\n            i18nNodes: i18nNodes,\n            errors: this._errors,\n        };\n    };\n    XmlToI18n.prototype.visitText = function (text, context) { return new Text$1(text.value, text.sourceSpan); };\n    XmlToI18n.prototype.visitElement = function (el, context) {\n        var _this = this;\n        switch (el.name) {\n            case _PLACEHOLDER_TAG$1:\n                var nameAttr = el.attrs.find(function (attr) { return attr.name === 'equiv'; });\n                if (nameAttr) {\n                    return [new Placeholder('', nameAttr.value, el.sourceSpan)];\n                }\n                this._addError(el, \"<\" + _PLACEHOLDER_TAG$1 + \"> misses the \\\"equiv\\\" attribute\");\n                break;\n            case _PLACEHOLDER_SPANNING_TAG:\n                var startAttr = el.attrs.find(function (attr) { return attr.name === 'equivStart'; });\n                var endAttr = el.attrs.find(function (attr) { return attr.name === 'equivEnd'; });\n                if (!startAttr) {\n                    this._addError(el, \"<\" + _PLACEHOLDER_TAG$1 + \"> misses the \\\"equivStart\\\" attribute\");\n                }\n                else if (!endAttr) {\n                    this._addError(el, \"<\" + _PLACEHOLDER_TAG$1 + \"> misses the \\\"equivEnd\\\" attribute\");\n                }\n                else {\n                    var startId = startAttr.value;\n                    var endId = endAttr.value;\n                    var nodes = [];\n                    return nodes.concat.apply(nodes, __spread([new Placeholder('', startId, el.sourceSpan)], el.children.map(function (node) { return node.visit(_this, null); }), [new Placeholder('', endId, el.sourceSpan)]));\n                }\n                break;\n            case _MARKER_TAG$1:\n                return [].concat.apply([], __spread(visitAll(this, el.children)));\n            default:\n                this._addError(el, \"Unexpected tag\");\n        }\n        return null;\n    };\n    XmlToI18n.prototype.visitExpansion = function (icu, context) {\n        var caseMap = {};\n        visitAll(this, icu.cases).forEach(function (c) {\n            caseMap[c.value] = new Container(c.nodes, icu.sourceSpan);\n        });\n        return new Icu(icu.switchValue, icu.type, caseMap, icu.sourceSpan);\n    };\n    XmlToI18n.prototype.visitExpansionCase = function (icuCase, context) {\n        return {\n            value: icuCase.value,\n            nodes: [].concat.apply([], __spread(visitAll(this, icuCase.expression))),\n        };\n    };\n    XmlToI18n.prototype.visitComment = function (comment, context) { };\n    XmlToI18n.prototype.visitAttribute = function (attribute, context) { };\n    XmlToI18n.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return XmlToI18n;\n}());\nfunction getTypeForTag(tag) {\n    switch (tag.toLowerCase()) {\n        case 'br':\n        case 'b':\n        case 'i':\n        case 'u':\n            return 'fmt';\n        case 'img':\n            return 'image';\n        case 'a':\n            return 'link';\n        default:\n            return 'other';\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _MESSAGES_TAG = 'messagebundle';\nvar _MESSAGE_TAG = 'msg';\nvar _PLACEHOLDER_TAG$2 = 'ph';\nvar _EXEMPLE_TAG = 'ex';\nvar _SOURCE_TAG$2 = 'source';\nvar _DOCTYPE = \"<!ELEMENT messagebundle (msg)*>\\n<!ATTLIST messagebundle class CDATA #IMPLIED>\\n\\n<!ELEMENT msg (#PCDATA|ph|source)*>\\n<!ATTLIST msg id CDATA #IMPLIED>\\n<!ATTLIST msg seq CDATA #IMPLIED>\\n<!ATTLIST msg name CDATA #IMPLIED>\\n<!ATTLIST msg desc CDATA #IMPLIED>\\n<!ATTLIST msg meaning CDATA #IMPLIED>\\n<!ATTLIST msg obsolete (obsolete) #IMPLIED>\\n<!ATTLIST msg xml:space (default|preserve) \\\"default\\\">\\n<!ATTLIST msg is_hidden CDATA #IMPLIED>\\n\\n<!ELEMENT source (#PCDATA)>\\n\\n<!ELEMENT ph (#PCDATA|ex)*>\\n<!ATTLIST ph name CDATA #REQUIRED>\\n\\n<!ELEMENT ex (#PCDATA)>\";\nvar Xmb = /** @class */ (function (_super) {\n    __extends(Xmb, _super);\n    function Xmb() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Xmb.prototype.write = function (messages, locale) {\n        var exampleVisitor = new ExampleVisitor();\n        var visitor = new _Visitor$2();\n        var rootNode = new Tag(_MESSAGES_TAG);\n        messages.forEach(function (message) {\n            var attrs = { id: message.id };\n            if (message.description) {\n                attrs['desc'] = message.description;\n            }\n            if (message.meaning) {\n                attrs['meaning'] = message.meaning;\n            }\n            var sourceTags = [];\n            message.sources.forEach(function (source) {\n                sourceTags.push(new Tag(_SOURCE_TAG$2, {}, [\n                    new Text$2(source.filePath + \":\" + source.startLine + (source.endLine !== source.startLine ? ',' + source.endLine : ''))\n                ]));\n            });\n            rootNode.children.push(new CR(2), new Tag(_MESSAGE_TAG, attrs, __spread(sourceTags, visitor.serialize(message.nodes))));\n        });\n        rootNode.children.push(new CR());\n        return serialize([\n            new Declaration({ version: '1.0', encoding: 'UTF-8' }),\n            new CR(),\n            new Doctype(_MESSAGES_TAG, _DOCTYPE),\n            new CR(),\n            exampleVisitor.addDefaultExamples(rootNode),\n            new CR(),\n        ]);\n    };\n    Xmb.prototype.load = function (content, url) {\n        throw new Error('Unsupported');\n    };\n    Xmb.prototype.digest = function (message) { return digest$1(message); };\n    Xmb.prototype.createNameMapper = function (message) {\n        return new SimplePlaceholderMapper(message, toPublicName);\n    };\n    return Xmb;\n}(Serializer));\nvar _Visitor$2 = /** @class */ (function () {\n    function _Visitor() {\n    }\n    _Visitor.prototype.visitText = function (text, context) { return [new Text$2(text.value)]; };\n    _Visitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        var nodes = [];\n        container.children.forEach(function (node) { return nodes.push.apply(nodes, __spread(node.visit(_this))); });\n        return nodes;\n    };\n    _Visitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var nodes = [new Text$2(\"{\" + icu.expressionPlaceholder + \", \" + icu.type + \", \")];\n        Object.keys(icu.cases).forEach(function (c) {\n            nodes.push.apply(nodes, __spread([new Text$2(c + \" {\")], icu.cases[c].visit(_this), [new Text$2(\"} \")]));\n        });\n        nodes.push(new Text$2(\"}\"));\n        return nodes;\n    };\n    _Visitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var startEx = new Tag(_EXEMPLE_TAG, {}, [new Text$2(\"<\" + ph.tag + \">\")]);\n        var startTagPh = new Tag(_PLACEHOLDER_TAG$2, { name: ph.startName }, [startEx]);\n        if (ph.isVoid) {\n            // void tags have no children nor closing tags\n            return [startTagPh];\n        }\n        var closeEx = new Tag(_EXEMPLE_TAG, {}, [new Text$2(\"</\" + ph.tag + \">\")]);\n        var closeTagPh = new Tag(_PLACEHOLDER_TAG$2, { name: ph.closeName }, [closeEx]);\n        return __spread([startTagPh], this.serialize(ph.children), [closeTagPh]);\n    };\n    _Visitor.prototype.visitPlaceholder = function (ph, context) {\n        var exTag = new Tag(_EXEMPLE_TAG, {}, [new Text$2(\"{{\" + ph.value + \"}}\")]);\n        return [new Tag(_PLACEHOLDER_TAG$2, { name: ph.name }, [exTag])];\n    };\n    _Visitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        var exTag = new Tag(_EXEMPLE_TAG, {}, [\n            new Text$2(\"{\" + ph.value.expression + \", \" + ph.value.type + \", \" + Object.keys(ph.value.cases).map(function (value) { return value + ' {...}'; }).join(' ') + \"}\")\n        ]);\n        return [new Tag(_PLACEHOLDER_TAG$2, { name: ph.name }, [exTag])];\n    };\n    _Visitor.prototype.serialize = function (nodes) {\n        var _this = this;\n        return [].concat.apply([], __spread(nodes.map(function (node) { return node.visit(_this); })));\n    };\n    return _Visitor;\n}());\nfunction digest$1(message) {\n    return decimalDigest(message);\n}\n// TC requires at least one non-empty example on placeholders\nvar ExampleVisitor = /** @class */ (function () {\n    function ExampleVisitor() {\n    }\n    ExampleVisitor.prototype.addDefaultExamples = function (node) {\n        node.visit(this);\n        return node;\n    };\n    ExampleVisitor.prototype.visitTag = function (tag) {\n        var _this = this;\n        if (tag.name === _PLACEHOLDER_TAG$2) {\n            if (!tag.children || tag.children.length == 0) {\n                var exText = new Text$2(tag.attrs['name'] || '...');\n                tag.children = [new Tag(_EXEMPLE_TAG, {}, [exText])];\n            }\n        }\n        else if (tag.children) {\n            tag.children.forEach(function (node) { return node.visit(_this); });\n        }\n    };\n    ExampleVisitor.prototype.visitText = function (text) { };\n    ExampleVisitor.prototype.visitDeclaration = function (decl) { };\n    ExampleVisitor.prototype.visitDoctype = function (doctype) { };\n    return ExampleVisitor;\n}());\n// XMB/XTB placeholders can only contain A-Z, 0-9 and _\nfunction toPublicName(internalName) {\n    return internalName.toUpperCase().replace(/[^A-Z0-9_]/g, '_');\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _TRANSLATIONS_TAG = 'translationbundle';\nvar _TRANSLATION_TAG = 'translation';\nvar _PLACEHOLDER_TAG$3 = 'ph';\nvar Xtb = /** @class */ (function (_super) {\n    __extends(Xtb, _super);\n    function Xtb() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Xtb.prototype.write = function (messages, locale) { throw new Error('Unsupported'); };\n    Xtb.prototype.load = function (content, url) {\n        // xtb to xml nodes\n        var xtbParser = new XtbParser();\n        var _a = xtbParser.parse(content, url), locale = _a.locale, msgIdToHtml = _a.msgIdToHtml, errors = _a.errors;\n        // xml nodes to i18n nodes\n        var i18nNodesByMsgId = {};\n        var converter = new XmlToI18n$2();\n        // Because we should be able to load xtb files that rely on features not supported by angular,\n        // we need to delay the conversion of html to i18n nodes so that non angular messages are not\n        // converted\n        Object.keys(msgIdToHtml).forEach(function (msgId) {\n            var valueFn = function () {\n                var _a = converter.convert(msgIdToHtml[msgId], url), i18nNodes = _a.i18nNodes, errors = _a.errors;\n                if (errors.length) {\n                    throw new Error(\"xtb parse errors:\\n\" + errors.join('\\n'));\n                }\n                return i18nNodes;\n            };\n            createLazyProperty(i18nNodesByMsgId, msgId, valueFn);\n        });\n        if (errors.length) {\n            throw new Error(\"xtb parse errors:\\n\" + errors.join('\\n'));\n        }\n        return { locale: locale, i18nNodesByMsgId: i18nNodesByMsgId };\n    };\n    Xtb.prototype.digest = function (message) { return digest$1(message); };\n    Xtb.prototype.createNameMapper = function (message) {\n        return new SimplePlaceholderMapper(message, toPublicName);\n    };\n    return Xtb;\n}(Serializer));\nfunction createLazyProperty(messages, id, valueFn) {\n    Object.defineProperty(messages, id, {\n        configurable: true,\n        enumerable: true,\n        get: function () {\n            var value = valueFn();\n            Object.defineProperty(messages, id, { enumerable: true, value: value });\n            return value;\n        },\n        set: function (_) { throw new Error('Could not overwrite an XTB translation'); },\n    });\n}\n// Extract messages as xml nodes from the xtb file\nvar XtbParser = /** @class */ (function () {\n    function XtbParser() {\n        this._locale = null;\n    }\n    XtbParser.prototype.parse = function (xtb, url) {\n        this._bundleDepth = 0;\n        this._msgIdToHtml = {};\n        // We can not parse the ICU messages at this point as some messages might not originate\n        // from Angular that could not be lex'd.\n        var xml = new XmlParser().parse(xtb, url, false);\n        this._errors = xml.errors;\n        visitAll(this, xml.rootNodes);\n        return {\n            msgIdToHtml: this._msgIdToHtml,\n            errors: this._errors,\n            locale: this._locale,\n        };\n    };\n    XtbParser.prototype.visitElement = function (element, context) {\n        switch (element.name) {\n            case _TRANSLATIONS_TAG:\n                this._bundleDepth++;\n                if (this._bundleDepth > 1) {\n                    this._addError(element, \"<\" + _TRANSLATIONS_TAG + \"> elements can not be nested\");\n                }\n                var langAttr = element.attrs.find(function (attr) { return attr.name === 'lang'; });\n                if (langAttr) {\n                    this._locale = langAttr.value;\n                }\n                visitAll(this, element.children, null);\n                this._bundleDepth--;\n                break;\n            case _TRANSLATION_TAG:\n                var idAttr = element.attrs.find(function (attr) { return attr.name === 'id'; });\n                if (!idAttr) {\n                    this._addError(element, \"<\" + _TRANSLATION_TAG + \"> misses the \\\"id\\\" attribute\");\n                }\n                else {\n                    var id = idAttr.value;\n                    if (this._msgIdToHtml.hasOwnProperty(id)) {\n                        this._addError(element, \"Duplicated translations for msg \" + id);\n                    }\n                    else {\n                        var innerTextStart = element.startSourceSpan.end.offset;\n                        var innerTextEnd = element.endSourceSpan.start.offset;\n                        var content = element.startSourceSpan.start.file.content;\n                        var innerText = content.slice(innerTextStart, innerTextEnd);\n                        this._msgIdToHtml[id] = innerText;\n                    }\n                }\n                break;\n            default:\n                this._addError(element, 'Unexpected tag');\n        }\n    };\n    XtbParser.prototype.visitAttribute = function (attribute, context) { };\n    XtbParser.prototype.visitText = function (text, context) { };\n    XtbParser.prototype.visitComment = function (comment, context) { };\n    XtbParser.prototype.visitExpansion = function (expansion, context) { };\n    XtbParser.prototype.visitExpansionCase = function (expansionCase, context) { };\n    XtbParser.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return XtbParser;\n}());\n// Convert ml nodes (xtb syntax) to i18n nodes\nvar XmlToI18n$2 = /** @class */ (function () {\n    function XmlToI18n() {\n    }\n    XmlToI18n.prototype.convert = function (message, url) {\n        var xmlIcu = new XmlParser().parse(message, url, true);\n        this._errors = xmlIcu.errors;\n        var i18nNodes = this._errors.length > 0 || xmlIcu.rootNodes.length == 0 ?\n            [] :\n            visitAll(this, xmlIcu.rootNodes);\n        return {\n            i18nNodes: i18nNodes,\n            errors: this._errors,\n        };\n    };\n    XmlToI18n.prototype.visitText = function (text, context) { return new Text$1(text.value, text.sourceSpan); };\n    XmlToI18n.prototype.visitExpansion = function (icu, context) {\n        var caseMap = {};\n        visitAll(this, icu.cases).forEach(function (c) {\n            caseMap[c.value] = new Container(c.nodes, icu.sourceSpan);\n        });\n        return new Icu(icu.switchValue, icu.type, caseMap, icu.sourceSpan);\n    };\n    XmlToI18n.prototype.visitExpansionCase = function (icuCase, context) {\n        return {\n            value: icuCase.value,\n            nodes: visitAll(this, icuCase.expression),\n        };\n    };\n    XmlToI18n.prototype.visitElement = function (el, context) {\n        if (el.name === _PLACEHOLDER_TAG$3) {\n            var nameAttr = el.attrs.find(function (attr) { return attr.name === 'name'; });\n            if (nameAttr) {\n                return new Placeholder('', nameAttr.value, el.sourceSpan);\n            }\n            this._addError(el, \"<\" + _PLACEHOLDER_TAG$3 + \"> misses the \\\"name\\\" attribute\");\n        }\n        else {\n            this._addError(el, \"Unexpected tag\");\n        }\n        return null;\n    };\n    XmlToI18n.prototype.visitComment = function (comment, context) { };\n    XmlToI18n.prototype.visitAttribute = function (attribute, context) { };\n    XmlToI18n.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return XmlToI18n;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar HtmlParser = /** @class */ (function (_super) {\n    __extends(HtmlParser, _super);\n    function HtmlParser() {\n        return _super.call(this, getHtmlTagDefinition) || this;\n    }\n    HtmlParser.prototype.parse = function (source, url, parseExpansionForms, interpolationConfig) {\n        if (parseExpansionForms === void 0) { parseExpansionForms = false; }\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        return _super.prototype.parse.call(this, source, url, parseExpansionForms, interpolationConfig);\n    };\n    return HtmlParser;\n}(Parser$1));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A container for translated messages\n */\nvar TranslationBundle = /** @class */ (function () {\n    function TranslationBundle(_i18nNodesByMsgId, locale, digest, mapperFactory, missingTranslationStrategy, console) {\n        if (_i18nNodesByMsgId === void 0) { _i18nNodesByMsgId = {}; }\n        if (missingTranslationStrategy === void 0) { missingTranslationStrategy = MissingTranslationStrategy.Warning; }\n        this._i18nNodesByMsgId = _i18nNodesByMsgId;\n        this.digest = digest;\n        this.mapperFactory = mapperFactory;\n        this._i18nToHtml = new I18nToHtmlVisitor(_i18nNodesByMsgId, locale, digest, mapperFactory, missingTranslationStrategy, console);\n    }\n    // Creates a `TranslationBundle` by parsing the given `content` with the `serializer`.\n    TranslationBundle.load = function (content, url, serializer, missingTranslationStrategy, console) {\n        var _a = serializer.load(content, url), locale = _a.locale, i18nNodesByMsgId = _a.i18nNodesByMsgId;\n        var digestFn = function (m) { return serializer.digest(m); };\n        var mapperFactory = function (m) { return serializer.createNameMapper(m); };\n        return new TranslationBundle(i18nNodesByMsgId, locale, digestFn, mapperFactory, missingTranslationStrategy, console);\n    };\n    // Returns the translation as HTML nodes from the given source message.\n    TranslationBundle.prototype.get = function (srcMsg) {\n        var html = this._i18nToHtml.convert(srcMsg);\n        if (html.errors.length) {\n            throw new Error(html.errors.join('\\n'));\n        }\n        return html.nodes;\n    };\n    TranslationBundle.prototype.has = function (srcMsg) { return this.digest(srcMsg) in this._i18nNodesByMsgId; };\n    return TranslationBundle;\n}());\nvar I18nToHtmlVisitor = /** @class */ (function () {\n    function I18nToHtmlVisitor(_i18nNodesByMsgId, _locale, _digest, _mapperFactory, _missingTranslationStrategy, _console) {\n        if (_i18nNodesByMsgId === void 0) { _i18nNodesByMsgId = {}; }\n        this._i18nNodesByMsgId = _i18nNodesByMsgId;\n        this._locale = _locale;\n        this._digest = _digest;\n        this._mapperFactory = _mapperFactory;\n        this._missingTranslationStrategy = _missingTranslationStrategy;\n        this._console = _console;\n        this._contextStack = [];\n        this._errors = [];\n    }\n    I18nToHtmlVisitor.prototype.convert = function (srcMsg) {\n        this._contextStack.length = 0;\n        this._errors.length = 0;\n        // i18n to text\n        var text = this._convertToText(srcMsg);\n        // text to html\n        var url = srcMsg.nodes[0].sourceSpan.start.file.url;\n        var html = new HtmlParser().parse(text, url, true);\n        return {\n            nodes: html.rootNodes,\n            errors: __spread(this._errors, html.errors),\n        };\n    };\n    I18nToHtmlVisitor.prototype.visitText = function (text, context) {\n        // `convert()` uses an `HtmlParser` to return `html.Node`s\n        // we should then make sure that any special characters are escaped\n        return escapeXml(text.value);\n    };\n    I18nToHtmlVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        return container.children.map(function (n) { return n.visit(_this); }).join('');\n    };\n    I18nToHtmlVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var cases = Object.keys(icu.cases).map(function (k) { return k + \" {\" + icu.cases[k].visit(_this) + \"}\"; });\n        // TODO(vicb): Once all format switch to using expression placeholders\n        // we should throw when the placeholder is not in the source message\n        var exp = this._srcMsg.placeholders.hasOwnProperty(icu.expression) ?\n            this._srcMsg.placeholders[icu.expression] :\n            icu.expression;\n        return \"{\" + exp + \", \" + icu.type + \", \" + cases.join(' ') + \"}\";\n    };\n    I18nToHtmlVisitor.prototype.visitPlaceholder = function (ph, context) {\n        var phName = this._mapper(ph.name);\n        if (this._srcMsg.placeholders.hasOwnProperty(phName)) {\n            return this._srcMsg.placeholders[phName];\n        }\n        if (this._srcMsg.placeholderToMessage.hasOwnProperty(phName)) {\n            return this._convertToText(this._srcMsg.placeholderToMessage[phName]);\n        }\n        this._addError(ph, \"Unknown placeholder \\\"\" + ph.name + \"\\\"\");\n        return '';\n    };\n    // Loaded message contains only placeholders (vs tag and icu placeholders).\n    // However when a translation can not be found, we need to serialize the source message\n    // which can contain tag placeholders\n    I18nToHtmlVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var _this = this;\n        var tag = \"\" + ph.tag;\n        var attrs = Object.keys(ph.attrs).map(function (name) { return name + \"=\\\"\" + ph.attrs[name] + \"\\\"\"; }).join(' ');\n        if (ph.isVoid) {\n            return \"<\" + tag + \" \" + attrs + \"/>\";\n        }\n        var children = ph.children.map(function (c) { return c.visit(_this); }).join('');\n        return \"<\" + tag + \" \" + attrs + \">\" + children + \"</\" + tag + \">\";\n    };\n    // Loaded message contains only placeholders (vs tag and icu placeholders).\n    // However when a translation can not be found, we need to serialize the source message\n    // which can contain tag placeholders\n    I18nToHtmlVisitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        // An ICU placeholder references the source message to be serialized\n        return this._convertToText(this._srcMsg.placeholderToMessage[ph.name]);\n    };\n    /**\n     * Convert a source message to a translated text string:\n     * - text nodes are replaced with their translation,\n     * - placeholders are replaced with their content,\n     * - ICU nodes are converted to ICU expressions.\n     */\n    I18nToHtmlVisitor.prototype._convertToText = function (srcMsg) {\n        var _this = this;\n        var id = this._digest(srcMsg);\n        var mapper = this._mapperFactory ? this._mapperFactory(srcMsg) : null;\n        var nodes;\n        this._contextStack.push({ msg: this._srcMsg, mapper: this._mapper });\n        this._srcMsg = srcMsg;\n        if (this._i18nNodesByMsgId.hasOwnProperty(id)) {\n            // When there is a translation use its nodes as the source\n            // And create a mapper to convert serialized placeholder names to internal names\n            nodes = this._i18nNodesByMsgId[id];\n            this._mapper = function (name) { return mapper ? mapper.toInternalName(name) : name; };\n        }\n        else {\n            // When no translation has been found\n            // - report an error / a warning / nothing,\n            // - use the nodes from the original message\n            // - placeholders are already internal and need no mapper\n            if (this._missingTranslationStrategy === MissingTranslationStrategy.Error) {\n                var ctx = this._locale ? \" for locale \\\"\" + this._locale + \"\\\"\" : '';\n                this._addError(srcMsg.nodes[0], \"Missing translation for message \\\"\" + id + \"\\\"\" + ctx);\n            }\n            else if (this._console &&\n                this._missingTranslationStrategy === MissingTranslationStrategy.Warning) {\n                var ctx = this._locale ? \" for locale \\\"\" + this._locale + \"\\\"\" : '';\n                this._console.warn(\"Missing translation for message \\\"\" + id + \"\\\"\" + ctx);\n            }\n            nodes = srcMsg.nodes;\n            this._mapper = function (name) { return name; };\n        }\n        var text = nodes.map(function (node) { return node.visit(_this); }).join('');\n        var context = this._contextStack.pop();\n        this._srcMsg = context.msg;\n        this._mapper = context.mapper;\n        return text;\n    };\n    I18nToHtmlVisitor.prototype._addError = function (el, msg) {\n        this._errors.push(new I18nError(el.sourceSpan, msg));\n    };\n    return I18nToHtmlVisitor;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar I18NHtmlParser = /** @class */ (function () {\n    function I18NHtmlParser(_htmlParser, translations, translationsFormat, missingTranslation, console) {\n        if (missingTranslation === void 0) { missingTranslation = MissingTranslationStrategy.Warning; }\n        this._htmlParser = _htmlParser;\n        if (translations) {\n            var serializer = createSerializer(translationsFormat);\n            this._translationBundle =\n                TranslationBundle.load(translations, 'i18n', serializer, missingTranslation, console);\n        }\n        else {\n            this._translationBundle =\n                new TranslationBundle({}, null, digest, undefined, missingTranslation, console);\n        }\n    }\n    I18NHtmlParser.prototype.parse = function (source, url, parseExpansionForms, interpolationConfig) {\n        if (parseExpansionForms === void 0) { parseExpansionForms = false; }\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var parseResult = this._htmlParser.parse(source, url, parseExpansionForms, interpolationConfig);\n        if (parseResult.errors.length) {\n            return new ParseTreeResult(parseResult.rootNodes, parseResult.errors);\n        }\n        return mergeTranslations(parseResult.rootNodes, this._translationBundle, interpolationConfig, [], {});\n    };\n    return I18NHtmlParser;\n}());\nfunction createSerializer(format) {\n    format = (format || 'xlf').toLowerCase();\n    switch (format) {\n        case 'xmb':\n            return new Xmb();\n        case 'xtb':\n            return new Xtb();\n        case 'xliff2':\n        case 'xlf2':\n            return new Xliff2();\n        case 'xliff':\n        case 'xlf':\n        default:\n            return new Xliff();\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar CORE = '@angular/core';\nvar Identifiers = /** @class */ (function () {\n    function Identifiers() {\n    }\n    Identifiers.ANALYZE_FOR_ENTRY_COMPONENTS = {\n        name: 'ANALYZE_FOR_ENTRY_COMPONENTS',\n        moduleName: CORE,\n    };\n    Identifiers.ElementRef = { name: 'ElementRef', moduleName: CORE };\n    Identifiers.NgModuleRef = { name: 'NgModuleRef', moduleName: CORE };\n    Identifiers.ViewContainerRef = { name: 'ViewContainerRef', moduleName: CORE };\n    Identifiers.ChangeDetectorRef = {\n        name: 'ChangeDetectorRef',\n        moduleName: CORE,\n    };\n    Identifiers.QueryList = { name: 'QueryList', moduleName: CORE };\n    Identifiers.TemplateRef = { name: 'TemplateRef', moduleName: CORE };\n    Identifiers.CodegenComponentFactoryResolver = {\n        name: 'CodegenComponentFactoryResolver',\n        moduleName: CORE,\n    };\n    Identifiers.ComponentFactoryResolver = {\n        name: 'ComponentFactoryResolver',\n        moduleName: CORE,\n    };\n    Identifiers.ComponentFactory = { name: 'ComponentFactory', moduleName: CORE };\n    Identifiers.ComponentRef = { name: 'ComponentRef', moduleName: CORE };\n    Identifiers.NgModuleFactory = { name: 'NgModuleFactory', moduleName: CORE };\n    Identifiers.createModuleFactory = {\n        name: 'cmf',\n        moduleName: CORE,\n    };\n    Identifiers.moduleDef = {\n        name: 'mod',\n        moduleName: CORE,\n    };\n    Identifiers.moduleProviderDef = {\n        name: 'mpd',\n        moduleName: CORE,\n    };\n    Identifiers.RegisterModuleFactoryFn = {\n        name: 'registerModuleFactory',\n        moduleName: CORE,\n    };\n    Identifiers.inject = { name: 'inject', moduleName: CORE };\n    Identifiers.INJECTOR = { name: 'INJECTOR', moduleName: CORE };\n    Identifiers.Injector = { name: 'Injector', moduleName: CORE };\n    Identifiers.defineInjectable = { name: 'defineInjectable', moduleName: CORE };\n    Identifiers.ViewEncapsulation = {\n        name: 'ViewEncapsulation',\n        moduleName: CORE,\n    };\n    Identifiers.ChangeDetectionStrategy = {\n        name: 'ChangeDetectionStrategy',\n        moduleName: CORE,\n    };\n    Identifiers.SecurityContext = {\n        name: 'SecurityContext',\n        moduleName: CORE,\n    };\n    Identifiers.LOCALE_ID = { name: 'LOCALE_ID', moduleName: CORE };\n    Identifiers.TRANSLATIONS_FORMAT = {\n        name: 'TRANSLATIONS_FORMAT',\n        moduleName: CORE,\n    };\n    Identifiers.inlineInterpolate = {\n        name: 'inlineInterpolate',\n        moduleName: CORE,\n    };\n    Identifiers.interpolate = { name: 'interpolate', moduleName: CORE };\n    Identifiers.EMPTY_ARRAY = { name: 'EMPTY_ARRAY', moduleName: CORE };\n    Identifiers.EMPTY_MAP = { name: 'EMPTY_MAP', moduleName: CORE };\n    Identifiers.Renderer = { name: 'Renderer', moduleName: CORE };\n    Identifiers.viewDef = { name: 'vid', moduleName: CORE };\n    Identifiers.elementDef = { name: 'eld', moduleName: CORE };\n    Identifiers.anchorDef = { name: 'and', moduleName: CORE };\n    Identifiers.textDef = { name: 'ted', moduleName: CORE };\n    Identifiers.directiveDef = { name: 'did', moduleName: CORE };\n    Identifiers.providerDef = { name: 'prd', moduleName: CORE };\n    Identifiers.queryDef = { name: 'qud', moduleName: CORE };\n    Identifiers.pureArrayDef = { name: 'pad', moduleName: CORE };\n    Identifiers.pureObjectDef = { name: 'pod', moduleName: CORE };\n    Identifiers.purePipeDef = { name: 'ppd', moduleName: CORE };\n    Identifiers.pipeDef = { name: 'pid', moduleName: CORE };\n    Identifiers.nodeValue = { name: 'nov', moduleName: CORE };\n    Identifiers.ngContentDef = { name: 'ncd', moduleName: CORE };\n    Identifiers.unwrapValue = { name: 'unv', moduleName: CORE };\n    Identifiers.createRendererType2 = { name: 'crt', moduleName: CORE };\n    // type only\n    Identifiers.RendererType2 = {\n        name: 'RendererType2',\n        moduleName: CORE,\n    };\n    // type only\n    Identifiers.ViewDefinition = {\n        name: 'ViewDefinition',\n        moduleName: CORE,\n    };\n    Identifiers.createComponentFactory = { name: 'ccf', moduleName: CORE };\n    return Identifiers;\n}());\nfunction createTokenForReference(reference) {\n    return { identifier: { reference: reference } };\n}\nfunction createTokenForExternalReference(reflector, reference) {\n    return createTokenForReference(reflector.resolveExternalReference(reference));\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n//// Types\nvar TypeModifier;\n(function (TypeModifier) {\n    TypeModifier[TypeModifier[\"Const\"] = 0] = \"Const\";\n})(TypeModifier || (TypeModifier = {}));\nvar Type$1 = /** @class */ (function () {\n    function Type(modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        this.modifiers = modifiers;\n        if (!modifiers) {\n            this.modifiers = [];\n        }\n    }\n    Type.prototype.hasModifier = function (modifier) { return this.modifiers.indexOf(modifier) !== -1; };\n    return Type;\n}());\nvar BuiltinTypeName;\n(function (BuiltinTypeName) {\n    BuiltinTypeName[BuiltinTypeName[\"Dynamic\"] = 0] = \"Dynamic\";\n    BuiltinTypeName[BuiltinTypeName[\"Bool\"] = 1] = \"Bool\";\n    BuiltinTypeName[BuiltinTypeName[\"String\"] = 2] = \"String\";\n    BuiltinTypeName[BuiltinTypeName[\"Int\"] = 3] = \"Int\";\n    BuiltinTypeName[BuiltinTypeName[\"Number\"] = 4] = \"Number\";\n    BuiltinTypeName[BuiltinTypeName[\"Function\"] = 5] = \"Function\";\n    BuiltinTypeName[BuiltinTypeName[\"Inferred\"] = 6] = \"Inferred\";\n})(BuiltinTypeName || (BuiltinTypeName = {}));\nvar BuiltinType = /** @class */ (function (_super) {\n    __extends(BuiltinType, _super);\n    function BuiltinType(name, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers) || this;\n        _this.name = name;\n        return _this;\n    }\n    BuiltinType.prototype.visitType = function (visitor, context) {\n        return visitor.visitBuiltinType(this, context);\n    };\n    return BuiltinType;\n}(Type$1));\nvar ExpressionType = /** @class */ (function (_super) {\n    __extends(ExpressionType, _super);\n    function ExpressionType(value, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers) || this;\n        _this.value = value;\n        return _this;\n    }\n    ExpressionType.prototype.visitType = function (visitor, context) {\n        return visitor.visitExpressionType(this, context);\n    };\n    return ExpressionType;\n}(Type$1));\nvar ArrayType = /** @class */ (function (_super) {\n    __extends(ArrayType, _super);\n    function ArrayType(of, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers) || this;\n        _this.of = of;\n        return _this;\n    }\n    ArrayType.prototype.visitType = function (visitor, context) {\n        return visitor.visitArrayType(this, context);\n    };\n    return ArrayType;\n}(Type$1));\nvar MapType = /** @class */ (function (_super) {\n    __extends(MapType, _super);\n    function MapType(valueType, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers) || this;\n        _this.valueType = valueType || null;\n        return _this;\n    }\n    MapType.prototype.visitType = function (visitor, context) { return visitor.visitMapType(this, context); };\n    return MapType;\n}(Type$1));\nvar DYNAMIC_TYPE = new BuiltinType(BuiltinTypeName.Dynamic);\nvar INFERRED_TYPE = new BuiltinType(BuiltinTypeName.Inferred);\nvar BOOL_TYPE = new BuiltinType(BuiltinTypeName.Bool);\nvar INT_TYPE = new BuiltinType(BuiltinTypeName.Int);\nvar NUMBER_TYPE = new BuiltinType(BuiltinTypeName.Number);\nvar STRING_TYPE = new BuiltinType(BuiltinTypeName.String);\nvar FUNCTION_TYPE = new BuiltinType(BuiltinTypeName.Function);\n///// Expressions\nvar BinaryOperator;\n(function (BinaryOperator) {\n    BinaryOperator[BinaryOperator[\"Equals\"] = 0] = \"Equals\";\n    BinaryOperator[BinaryOperator[\"NotEquals\"] = 1] = \"NotEquals\";\n    BinaryOperator[BinaryOperator[\"Identical\"] = 2] = \"Identical\";\n    BinaryOperator[BinaryOperator[\"NotIdentical\"] = 3] = \"NotIdentical\";\n    BinaryOperator[BinaryOperator[\"Minus\"] = 4] = \"Minus\";\n    BinaryOperator[BinaryOperator[\"Plus\"] = 5] = \"Plus\";\n    BinaryOperator[BinaryOperator[\"Divide\"] = 6] = \"Divide\";\n    BinaryOperator[BinaryOperator[\"Multiply\"] = 7] = \"Multiply\";\n    BinaryOperator[BinaryOperator[\"Modulo\"] = 8] = \"Modulo\";\n    BinaryOperator[BinaryOperator[\"And\"] = 9] = \"And\";\n    BinaryOperator[BinaryOperator[\"Or\"] = 10] = \"Or\";\n    BinaryOperator[BinaryOperator[\"BitwiseAnd\"] = 11] = \"BitwiseAnd\";\n    BinaryOperator[BinaryOperator[\"Lower\"] = 12] = \"Lower\";\n    BinaryOperator[BinaryOperator[\"LowerEquals\"] = 13] = \"LowerEquals\";\n    BinaryOperator[BinaryOperator[\"Bigger\"] = 14] = \"Bigger\";\n    BinaryOperator[BinaryOperator[\"BiggerEquals\"] = 15] = \"BiggerEquals\";\n})(BinaryOperator || (BinaryOperator = {}));\nfunction nullSafeIsEquivalent(base, other) {\n    if (base == null || other == null) {\n        return base == other;\n    }\n    return base.isEquivalent(other);\n}\nfunction areAllEquivalent(base, other) {\n    var len = base.length;\n    if (len !== other.length) {\n        return false;\n    }\n    for (var i = 0; i < len; i++) {\n        if (!base[i].isEquivalent(other[i])) {\n            return false;\n        }\n    }\n    return true;\n}\nvar Expression = /** @class */ (function () {\n    function Expression(type, sourceSpan) {\n        this.type = type || null;\n        this.sourceSpan = sourceSpan || null;\n    }\n    Expression.prototype.prop = function (name, sourceSpan) {\n        return new ReadPropExpr(this, name, null, sourceSpan);\n    };\n    Expression.prototype.key = function (index, type, sourceSpan) {\n        return new ReadKeyExpr(this, index, type, sourceSpan);\n    };\n    Expression.prototype.callMethod = function (name, params, sourceSpan) {\n        return new InvokeMethodExpr(this, name, params, null, sourceSpan);\n    };\n    Expression.prototype.callFn = function (params, sourceSpan) {\n        return new InvokeFunctionExpr(this, params, null, sourceSpan);\n    };\n    Expression.prototype.instantiate = function (params, type, sourceSpan) {\n        return new InstantiateExpr(this, params, type, sourceSpan);\n    };\n    Expression.prototype.conditional = function (trueCase, falseCase, sourceSpan) {\n        if (falseCase === void 0) { falseCase = null; }\n        return new ConditionalExpr(this, trueCase, falseCase, null, sourceSpan);\n    };\n    Expression.prototype.equals = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Equals, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.notEquals = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.NotEquals, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.identical = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Identical, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.notIdentical = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.NotIdentical, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.minus = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Minus, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.plus = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Plus, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.divide = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Divide, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.multiply = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Multiply, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.modulo = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Modulo, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.and = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.And, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.bitwiseAnd = function (rhs, sourceSpan, parens) {\n        if (parens === void 0) { parens = true; }\n        return new BinaryOperatorExpr(BinaryOperator.BitwiseAnd, this, rhs, null, sourceSpan, parens);\n    };\n    Expression.prototype.or = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Or, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.lower = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Lower, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.lowerEquals = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.LowerEquals, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.bigger = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Bigger, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.biggerEquals = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.BiggerEquals, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.isBlank = function (sourceSpan) {\n        // Note: We use equals by purpose here to compare to null and undefined in JS.\n        // We use the typed null to allow strictNullChecks to narrow types.\n        return this.equals(TYPED_NULL_EXPR, sourceSpan);\n    };\n    Expression.prototype.cast = function (type, sourceSpan) {\n        return new CastExpr(this, type, sourceSpan);\n    };\n    Expression.prototype.toStmt = function () { return new ExpressionStatement(this, null); };\n    return Expression;\n}());\nvar BuiltinVar;\n(function (BuiltinVar) {\n    BuiltinVar[BuiltinVar[\"This\"] = 0] = \"This\";\n    BuiltinVar[BuiltinVar[\"Super\"] = 1] = \"Super\";\n    BuiltinVar[BuiltinVar[\"CatchError\"] = 2] = \"CatchError\";\n    BuiltinVar[BuiltinVar[\"CatchStack\"] = 3] = \"CatchStack\";\n})(BuiltinVar || (BuiltinVar = {}));\nvar ReadVarExpr = /** @class */ (function (_super) {\n    __extends(ReadVarExpr, _super);\n    function ReadVarExpr(name, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        if (typeof name === 'string') {\n            _this.name = name;\n            _this.builtin = null;\n        }\n        else {\n            _this.name = null;\n            _this.builtin = name;\n        }\n        return _this;\n    }\n    ReadVarExpr.prototype.isEquivalent = function (e) {\n        return e instanceof ReadVarExpr && this.name === e.name && this.builtin === e.builtin;\n    };\n    ReadVarExpr.prototype.isConstant = function () { return false; };\n    ReadVarExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitReadVarExpr(this, context);\n    };\n    ReadVarExpr.prototype.set = function (value) {\n        if (!this.name) {\n            throw new Error(\"Built in variable \" + this.builtin + \" can not be assigned to.\");\n        }\n        return new WriteVarExpr(this.name, value, null, this.sourceSpan);\n    };\n    return ReadVarExpr;\n}(Expression));\nvar WriteVarExpr = /** @class */ (function (_super) {\n    __extends(WriteVarExpr, _super);\n    function WriteVarExpr(name, value, type, sourceSpan) {\n        var _this = _super.call(this, type || value.type, sourceSpan) || this;\n        _this.name = name;\n        _this.value = value;\n        return _this;\n    }\n    WriteVarExpr.prototype.isEquivalent = function (e) {\n        return e instanceof WriteVarExpr && this.name === e.name && this.value.isEquivalent(e.value);\n    };\n    WriteVarExpr.prototype.isConstant = function () { return false; };\n    WriteVarExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitWriteVarExpr(this, context);\n    };\n    WriteVarExpr.prototype.toDeclStmt = function (type, modifiers) {\n        return new DeclareVarStmt(this.name, this.value, type, modifiers, this.sourceSpan);\n    };\n    return WriteVarExpr;\n}(Expression));\nvar WriteKeyExpr = /** @class */ (function (_super) {\n    __extends(WriteKeyExpr, _super);\n    function WriteKeyExpr(receiver, index, value, type, sourceSpan) {\n        var _this = _super.call(this, type || value.type, sourceSpan) || this;\n        _this.receiver = receiver;\n        _this.index = index;\n        _this.value = value;\n        return _this;\n    }\n    WriteKeyExpr.prototype.isEquivalent = function (e) {\n        return e instanceof WriteKeyExpr && this.receiver.isEquivalent(e.receiver) &&\n            this.index.isEquivalent(e.index) && this.value.isEquivalent(e.value);\n    };\n    WriteKeyExpr.prototype.isConstant = function () { return false; };\n    WriteKeyExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitWriteKeyExpr(this, context);\n    };\n    return WriteKeyExpr;\n}(Expression));\nvar WritePropExpr = /** @class */ (function (_super) {\n    __extends(WritePropExpr, _super);\n    function WritePropExpr(receiver, name, value, type, sourceSpan) {\n        var _this = _super.call(this, type || value.type, sourceSpan) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        _this.value = value;\n        return _this;\n    }\n    WritePropExpr.prototype.isEquivalent = function (e) {\n        return e instanceof WritePropExpr && this.receiver.isEquivalent(e.receiver) &&\n            this.name === e.name && this.value.isEquivalent(e.value);\n    };\n    WritePropExpr.prototype.isConstant = function () { return false; };\n    WritePropExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitWritePropExpr(this, context);\n    };\n    return WritePropExpr;\n}(Expression));\nvar BuiltinMethod;\n(function (BuiltinMethod) {\n    BuiltinMethod[BuiltinMethod[\"ConcatArray\"] = 0] = \"ConcatArray\";\n    BuiltinMethod[BuiltinMethod[\"SubscribeObservable\"] = 1] = \"SubscribeObservable\";\n    BuiltinMethod[BuiltinMethod[\"Bind\"] = 2] = \"Bind\";\n})(BuiltinMethod || (BuiltinMethod = {}));\nvar InvokeMethodExpr = /** @class */ (function (_super) {\n    __extends(InvokeMethodExpr, _super);\n    function InvokeMethodExpr(receiver, method, args, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.receiver = receiver;\n        _this.args = args;\n        if (typeof method === 'string') {\n            _this.name = method;\n            _this.builtin = null;\n        }\n        else {\n            _this.name = null;\n            _this.builtin = method;\n        }\n        return _this;\n    }\n    InvokeMethodExpr.prototype.isEquivalent = function (e) {\n        return e instanceof InvokeMethodExpr && this.receiver.isEquivalent(e.receiver) &&\n            this.name === e.name && this.builtin === e.builtin && areAllEquivalent(this.args, e.args);\n    };\n    InvokeMethodExpr.prototype.isConstant = function () { return false; };\n    InvokeMethodExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitInvokeMethodExpr(this, context);\n    };\n    return InvokeMethodExpr;\n}(Expression));\nvar InvokeFunctionExpr = /** @class */ (function (_super) {\n    __extends(InvokeFunctionExpr, _super);\n    function InvokeFunctionExpr(fn, args, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.fn = fn;\n        _this.args = args;\n        return _this;\n    }\n    InvokeFunctionExpr.prototype.isEquivalent = function (e) {\n        return e instanceof InvokeFunctionExpr && this.fn.isEquivalent(e.fn) &&\n            areAllEquivalent(this.args, e.args);\n    };\n    InvokeFunctionExpr.prototype.isConstant = function () { return false; };\n    InvokeFunctionExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitInvokeFunctionExpr(this, context);\n    };\n    return InvokeFunctionExpr;\n}(Expression));\nvar InstantiateExpr = /** @class */ (function (_super) {\n    __extends(InstantiateExpr, _super);\n    function InstantiateExpr(classExpr, args, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.classExpr = classExpr;\n        _this.args = args;\n        return _this;\n    }\n    InstantiateExpr.prototype.isEquivalent = function (e) {\n        return e instanceof InstantiateExpr && this.classExpr.isEquivalent(e.classExpr) &&\n            areAllEquivalent(this.args, e.args);\n    };\n    InstantiateExpr.prototype.isConstant = function () { return false; };\n    InstantiateExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitInstantiateExpr(this, context);\n    };\n    return InstantiateExpr;\n}(Expression));\nvar LiteralExpr = /** @class */ (function (_super) {\n    __extends(LiteralExpr, _super);\n    function LiteralExpr(value, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.value = value;\n        return _this;\n    }\n    LiteralExpr.prototype.isEquivalent = function (e) {\n        return e instanceof LiteralExpr && this.value === e.value;\n    };\n    LiteralExpr.prototype.isConstant = function () { return true; };\n    LiteralExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitLiteralExpr(this, context);\n    };\n    return LiteralExpr;\n}(Expression));\nvar ExternalExpr = /** @class */ (function (_super) {\n    __extends(ExternalExpr, _super);\n    function ExternalExpr(value, type, typeParams, sourceSpan) {\n        if (typeParams === void 0) { typeParams = null; }\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.value = value;\n        _this.typeParams = typeParams;\n        return _this;\n    }\n    ExternalExpr.prototype.isEquivalent = function (e) {\n        return e instanceof ExternalExpr && this.value.name === e.value.name &&\n            this.value.moduleName === e.value.moduleName && this.value.runtime === e.value.runtime;\n    };\n    ExternalExpr.prototype.isConstant = function () { return false; };\n    ExternalExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitExternalExpr(this, context);\n    };\n    return ExternalExpr;\n}(Expression));\nvar ConditionalExpr = /** @class */ (function (_super) {\n    __extends(ConditionalExpr, _super);\n    function ConditionalExpr(condition, trueCase, falseCase, type, sourceSpan) {\n        if (falseCase === void 0) { falseCase = null; }\n        var _this = _super.call(this, type || trueCase.type, sourceSpan) || this;\n        _this.condition = condition;\n        _this.falseCase = falseCase;\n        _this.trueCase = trueCase;\n        return _this;\n    }\n    ConditionalExpr.prototype.isEquivalent = function (e) {\n        return e instanceof ConditionalExpr && this.condition.isEquivalent(e.condition) &&\n            this.trueCase.isEquivalent(e.trueCase) && nullSafeIsEquivalent(this.falseCase, e.falseCase);\n    };\n    ConditionalExpr.prototype.isConstant = function () { return false; };\n    ConditionalExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitConditionalExpr(this, context);\n    };\n    return ConditionalExpr;\n}(Expression));\nvar NotExpr = /** @class */ (function (_super) {\n    __extends(NotExpr, _super);\n    function NotExpr(condition, sourceSpan) {\n        var _this = _super.call(this, BOOL_TYPE, sourceSpan) || this;\n        _this.condition = condition;\n        return _this;\n    }\n    NotExpr.prototype.isEquivalent = function (e) {\n        return e instanceof NotExpr && this.condition.isEquivalent(e.condition);\n    };\n    NotExpr.prototype.isConstant = function () { return false; };\n    NotExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitNotExpr(this, context);\n    };\n    return NotExpr;\n}(Expression));\nvar AssertNotNull = /** @class */ (function (_super) {\n    __extends(AssertNotNull, _super);\n    function AssertNotNull(condition, sourceSpan) {\n        var _this = _super.call(this, condition.type, sourceSpan) || this;\n        _this.condition = condition;\n        return _this;\n    }\n    AssertNotNull.prototype.isEquivalent = function (e) {\n        return e instanceof AssertNotNull && this.condition.isEquivalent(e.condition);\n    };\n    AssertNotNull.prototype.isConstant = function () { return false; };\n    AssertNotNull.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitAssertNotNullExpr(this, context);\n    };\n    return AssertNotNull;\n}(Expression));\nvar CastExpr = /** @class */ (function (_super) {\n    __extends(CastExpr, _super);\n    function CastExpr(value, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.value = value;\n        return _this;\n    }\n    CastExpr.prototype.isEquivalent = function (e) {\n        return e instanceof CastExpr && this.value.isEquivalent(e.value);\n    };\n    CastExpr.prototype.isConstant = function () { return false; };\n    CastExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitCastExpr(this, context);\n    };\n    return CastExpr;\n}(Expression));\nvar FunctionExpr = /** @class */ (function (_super) {\n    __extends(FunctionExpr, _super);\n    function FunctionExpr(params, statements, type, sourceSpan, name) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.params = params;\n        _this.statements = statements;\n        _this.name = name;\n        return _this;\n    }\n    FunctionExpr.prototype.isEquivalent = function (e) {\n        return e instanceof FunctionExpr && areAllEquivalent(this.params, e.params) &&\n            areAllEquivalent(this.statements, e.statements);\n    };\n    FunctionExpr.prototype.isConstant = function () { return false; };\n    FunctionExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitFunctionExpr(this, context);\n    };\n    FunctionExpr.prototype.toDeclStmt = function (name, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        return new DeclareFunctionStmt(name, this.params, this.statements, this.type, modifiers, this.sourceSpan);\n    };\n    return FunctionExpr;\n}(Expression));\nvar BinaryOperatorExpr = /** @class */ (function (_super) {\n    __extends(BinaryOperatorExpr, _super);\n    function BinaryOperatorExpr(operator, lhs, rhs, type, sourceSpan, parens) {\n        if (parens === void 0) { parens = true; }\n        var _this = _super.call(this, type || lhs.type, sourceSpan) || this;\n        _this.operator = operator;\n        _this.rhs = rhs;\n        _this.parens = parens;\n        _this.lhs = lhs;\n        return _this;\n    }\n    BinaryOperatorExpr.prototype.isEquivalent = function (e) {\n        return e instanceof BinaryOperatorExpr && this.operator === e.operator &&\n            this.lhs.isEquivalent(e.lhs) && this.rhs.isEquivalent(e.rhs);\n    };\n    BinaryOperatorExpr.prototype.isConstant = function () { return false; };\n    BinaryOperatorExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitBinaryOperatorExpr(this, context);\n    };\n    return BinaryOperatorExpr;\n}(Expression));\nvar ReadPropExpr = /** @class */ (function (_super) {\n    __extends(ReadPropExpr, _super);\n    function ReadPropExpr(receiver, name, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        return _this;\n    }\n    ReadPropExpr.prototype.isEquivalent = function (e) {\n        return e instanceof ReadPropExpr && this.receiver.isEquivalent(e.receiver) &&\n            this.name === e.name;\n    };\n    ReadPropExpr.prototype.isConstant = function () { return false; };\n    ReadPropExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitReadPropExpr(this, context);\n    };\n    ReadPropExpr.prototype.set = function (value) {\n        return new WritePropExpr(this.receiver, this.name, value, null, this.sourceSpan);\n    };\n    return ReadPropExpr;\n}(Expression));\nvar ReadKeyExpr = /** @class */ (function (_super) {\n    __extends(ReadKeyExpr, _super);\n    function ReadKeyExpr(receiver, index, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.receiver = receiver;\n        _this.index = index;\n        return _this;\n    }\n    ReadKeyExpr.prototype.isEquivalent = function (e) {\n        return e instanceof ReadKeyExpr && this.receiver.isEquivalent(e.receiver) &&\n            this.index.isEquivalent(e.index);\n    };\n    ReadKeyExpr.prototype.isConstant = function () { return false; };\n    ReadKeyExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitReadKeyExpr(this, context);\n    };\n    ReadKeyExpr.prototype.set = function (value) {\n        return new WriteKeyExpr(this.receiver, this.index, value, null, this.sourceSpan);\n    };\n    return ReadKeyExpr;\n}(Expression));\nvar LiteralArrayExpr = /** @class */ (function (_super) {\n    __extends(LiteralArrayExpr, _super);\n    function LiteralArrayExpr(entries, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.entries = entries;\n        return _this;\n    }\n    LiteralArrayExpr.prototype.isConstant = function () { return this.entries.every(function (e) { return e.isConstant(); }); };\n    LiteralArrayExpr.prototype.isEquivalent = function (e) {\n        return e instanceof LiteralArrayExpr && areAllEquivalent(this.entries, e.entries);\n    };\n    LiteralArrayExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitLiteralArrayExpr(this, context);\n    };\n    return LiteralArrayExpr;\n}(Expression));\nvar LiteralMapEntry = /** @class */ (function () {\n    function LiteralMapEntry(key, value, quoted) {\n        this.key = key;\n        this.value = value;\n        this.quoted = quoted;\n    }\n    LiteralMapEntry.prototype.isEquivalent = function (e) {\n        return this.key === e.key && this.value.isEquivalent(e.value);\n    };\n    return LiteralMapEntry;\n}());\nvar LiteralMapExpr = /** @class */ (function (_super) {\n    __extends(LiteralMapExpr, _super);\n    function LiteralMapExpr(entries, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.entries = entries;\n        _this.valueType = null;\n        if (type) {\n            _this.valueType = type.valueType;\n        }\n        return _this;\n    }\n    LiteralMapExpr.prototype.isEquivalent = function (e) {\n        return e instanceof LiteralMapExpr && areAllEquivalent(this.entries, e.entries);\n    };\n    LiteralMapExpr.prototype.isConstant = function () { return this.entries.every(function (e) { return e.value.isConstant(); }); };\n    LiteralMapExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitLiteralMapExpr(this, context);\n    };\n    return LiteralMapExpr;\n}(Expression));\nvar CommaExpr = /** @class */ (function (_super) {\n    __extends(CommaExpr, _super);\n    function CommaExpr(parts, sourceSpan) {\n        var _this = _super.call(this, parts[parts.length - 1].type, sourceSpan) || this;\n        _this.parts = parts;\n        return _this;\n    }\n    CommaExpr.prototype.isEquivalent = function (e) {\n        return e instanceof CommaExpr && areAllEquivalent(this.parts, e.parts);\n    };\n    CommaExpr.prototype.isConstant = function () { return false; };\n    CommaExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitCommaExpr(this, context);\n    };\n    return CommaExpr;\n}(Expression));\nvar THIS_EXPR = new ReadVarExpr(BuiltinVar.This, null, null);\nvar SUPER_EXPR = new ReadVarExpr(BuiltinVar.Super, null, null);\nvar CATCH_ERROR_VAR = new ReadVarExpr(BuiltinVar.CatchError, null, null);\nvar CATCH_STACK_VAR = new ReadVarExpr(BuiltinVar.CatchStack, null, null);\nvar NULL_EXPR = new LiteralExpr(null, null, null);\nvar TYPED_NULL_EXPR = new LiteralExpr(null, INFERRED_TYPE, null);\n//// Statements\nvar StmtModifier;\n(function (StmtModifier) {\n    StmtModifier[StmtModifier[\"Final\"] = 0] = \"Final\";\n    StmtModifier[StmtModifier[\"Private\"] = 1] = \"Private\";\n    StmtModifier[StmtModifier[\"Exported\"] = 2] = \"Exported\";\n    StmtModifier[StmtModifier[\"Static\"] = 3] = \"Static\";\n})(StmtModifier || (StmtModifier = {}));\nvar Statement = /** @class */ (function () {\n    function Statement(modifiers, sourceSpan) {\n        this.modifiers = modifiers || [];\n        this.sourceSpan = sourceSpan || null;\n    }\n    Statement.prototype.hasModifier = function (modifier) { return this.modifiers.indexOf(modifier) !== -1; };\n    return Statement;\n}());\nvar DeclareVarStmt = /** @class */ (function (_super) {\n    __extends(DeclareVarStmt, _super);\n    function DeclareVarStmt(name, value, type, modifiers, sourceSpan) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers, sourceSpan) || this;\n        _this.name = name;\n        _this.value = value;\n        _this.type = type || (value && value.type) || null;\n        return _this;\n    }\n    DeclareVarStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof DeclareVarStmt && this.name === stmt.name &&\n            (this.value ? !!stmt.value && this.value.isEquivalent(stmt.value) : !stmt.value);\n    };\n    DeclareVarStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitDeclareVarStmt(this, context);\n    };\n    return DeclareVarStmt;\n}(Statement));\nvar DeclareFunctionStmt = /** @class */ (function (_super) {\n    __extends(DeclareFunctionStmt, _super);\n    function DeclareFunctionStmt(name, params, statements, type, modifiers, sourceSpan) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers, sourceSpan) || this;\n        _this.name = name;\n        _this.params = params;\n        _this.statements = statements;\n        _this.type = type || null;\n        return _this;\n    }\n    DeclareFunctionStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof DeclareFunctionStmt && areAllEquivalent(this.params, stmt.params) &&\n            areAllEquivalent(this.statements, stmt.statements);\n    };\n    DeclareFunctionStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitDeclareFunctionStmt(this, context);\n    };\n    return DeclareFunctionStmt;\n}(Statement));\nvar ExpressionStatement = /** @class */ (function (_super) {\n    __extends(ExpressionStatement, _super);\n    function ExpressionStatement(expr, sourceSpan) {\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.expr = expr;\n        return _this;\n    }\n    ExpressionStatement.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof ExpressionStatement && this.expr.isEquivalent(stmt.expr);\n    };\n    ExpressionStatement.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitExpressionStmt(this, context);\n    };\n    return ExpressionStatement;\n}(Statement));\nvar ReturnStatement = /** @class */ (function (_super) {\n    __extends(ReturnStatement, _super);\n    function ReturnStatement(value, sourceSpan) {\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.value = value;\n        return _this;\n    }\n    ReturnStatement.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof ReturnStatement && this.value.isEquivalent(stmt.value);\n    };\n    ReturnStatement.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitReturnStmt(this, context);\n    };\n    return ReturnStatement;\n}(Statement));\nvar AbstractClassPart = /** @class */ (function () {\n    function AbstractClassPart(type, modifiers) {\n        this.modifiers = modifiers;\n        if (!modifiers) {\n            this.modifiers = [];\n        }\n        this.type = type || null;\n    }\n    AbstractClassPart.prototype.hasModifier = function (modifier) { return this.modifiers.indexOf(modifier) !== -1; };\n    return AbstractClassPart;\n}());\nvar ClassField = /** @class */ (function (_super) {\n    __extends(ClassField, _super);\n    function ClassField(name, type, modifiers, initializer) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, type, modifiers) || this;\n        _this.name = name;\n        _this.initializer = initializer;\n        return _this;\n    }\n    ClassField.prototype.isEquivalent = function (f) { return this.name === f.name; };\n    return ClassField;\n}(AbstractClassPart));\nvar ClassMethod = /** @class */ (function (_super) {\n    __extends(ClassMethod, _super);\n    function ClassMethod(name, params, body, type, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, type, modifiers) || this;\n        _this.name = name;\n        _this.params = params;\n        _this.body = body;\n        return _this;\n    }\n    ClassMethod.prototype.isEquivalent = function (m) {\n        return this.name === m.name && areAllEquivalent(this.body, m.body);\n    };\n    return ClassMethod;\n}(AbstractClassPart));\nvar ClassGetter = /** @class */ (function (_super) {\n    __extends(ClassGetter, _super);\n    function ClassGetter(name, body, type, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, type, modifiers) || this;\n        _this.name = name;\n        _this.body = body;\n        return _this;\n    }\n    ClassGetter.prototype.isEquivalent = function (m) {\n        return this.name === m.name && areAllEquivalent(this.body, m.body);\n    };\n    return ClassGetter;\n}(AbstractClassPart));\nvar ClassStmt = /** @class */ (function (_super) {\n    __extends(ClassStmt, _super);\n    function ClassStmt(name, parent, fields, getters, constructorMethod, methods, modifiers, sourceSpan) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers, sourceSpan) || this;\n        _this.name = name;\n        _this.parent = parent;\n        _this.fields = fields;\n        _this.getters = getters;\n        _this.constructorMethod = constructorMethod;\n        _this.methods = methods;\n        return _this;\n    }\n    ClassStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof ClassStmt && this.name === stmt.name &&\n            nullSafeIsEquivalent(this.parent, stmt.parent) &&\n            areAllEquivalent(this.fields, stmt.fields) &&\n            areAllEquivalent(this.getters, stmt.getters) &&\n            this.constructorMethod.isEquivalent(stmt.constructorMethod) &&\n            areAllEquivalent(this.methods, stmt.methods);\n    };\n    ClassStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitDeclareClassStmt(this, context);\n    };\n    return ClassStmt;\n}(Statement));\nvar IfStmt = /** @class */ (function (_super) {\n    __extends(IfStmt, _super);\n    function IfStmt(condition, trueCase, falseCase, sourceSpan) {\n        if (falseCase === void 0) { falseCase = []; }\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.condition = condition;\n        _this.trueCase = trueCase;\n        _this.falseCase = falseCase;\n        return _this;\n    }\n    IfStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof IfStmt && this.condition.isEquivalent(stmt.condition) &&\n            areAllEquivalent(this.trueCase, stmt.trueCase) &&\n            areAllEquivalent(this.falseCase, stmt.falseCase);\n    };\n    IfStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitIfStmt(this, context);\n    };\n    return IfStmt;\n}(Statement));\nvar CommentStmt = /** @class */ (function (_super) {\n    __extends(CommentStmt, _super);\n    function CommentStmt(comment, multiline, sourceSpan) {\n        if (multiline === void 0) { multiline = false; }\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.comment = comment;\n        _this.multiline = multiline;\n        return _this;\n    }\n    CommentStmt.prototype.isEquivalent = function (stmt) { return stmt instanceof CommentStmt; };\n    CommentStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitCommentStmt(this, context);\n    };\n    return CommentStmt;\n}(Statement));\nvar JSDocCommentStmt = /** @class */ (function (_super) {\n    __extends(JSDocCommentStmt, _super);\n    function JSDocCommentStmt(tags, sourceSpan) {\n        if (tags === void 0) { tags = []; }\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.tags = tags;\n        return _this;\n    }\n    JSDocCommentStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof JSDocCommentStmt && this.toString() === stmt.toString();\n    };\n    JSDocCommentStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitJSDocCommentStmt(this, context);\n    };\n    JSDocCommentStmt.prototype.toString = function () { return serializeTags(this.tags); };\n    return JSDocCommentStmt;\n}(Statement));\nvar TryCatchStmt = /** @class */ (function (_super) {\n    __extends(TryCatchStmt, _super);\n    function TryCatchStmt(bodyStmts, catchStmts, sourceSpan) {\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.bodyStmts = bodyStmts;\n        _this.catchStmts = catchStmts;\n        return _this;\n    }\n    TryCatchStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof TryCatchStmt && areAllEquivalent(this.bodyStmts, stmt.bodyStmts) &&\n            areAllEquivalent(this.catchStmts, stmt.catchStmts);\n    };\n    TryCatchStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitTryCatchStmt(this, context);\n    };\n    return TryCatchStmt;\n}(Statement));\nvar ThrowStmt = /** @class */ (function (_super) {\n    __extends(ThrowStmt, _super);\n    function ThrowStmt(error, sourceSpan) {\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.error = error;\n        return _this;\n    }\n    ThrowStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof TryCatchStmt && this.error.isEquivalent(stmt.error);\n    };\n    ThrowStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitThrowStmt(this, context);\n    };\n    return ThrowStmt;\n}(Statement));\nvar AstTransformer$1 = /** @class */ (function () {\n    function AstTransformer() {\n    }\n    AstTransformer.prototype.transformExpr = function (expr, context) { return expr; };\n    AstTransformer.prototype.transformStmt = function (stmt, context) { return stmt; };\n    AstTransformer.prototype.visitReadVarExpr = function (ast, context) { return this.transformExpr(ast, context); };\n    AstTransformer.prototype.visitWriteVarExpr = function (expr, context) {\n        return this.transformExpr(new WriteVarExpr(expr.name, expr.value.visitExpression(this, context), expr.type, expr.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitWriteKeyExpr = function (expr, context) {\n        return this.transformExpr(new WriteKeyExpr(expr.receiver.visitExpression(this, context), expr.index.visitExpression(this, context), expr.value.visitExpression(this, context), expr.type, expr.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitWritePropExpr = function (expr, context) {\n        return this.transformExpr(new WritePropExpr(expr.receiver.visitExpression(this, context), expr.name, expr.value.visitExpression(this, context), expr.type, expr.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitInvokeMethodExpr = function (ast, context) {\n        var method = ast.builtin || ast.name;\n        return this.transformExpr(new InvokeMethodExpr(ast.receiver.visitExpression(this, context), method, this.visitAllExpressions(ast.args, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitInvokeFunctionExpr = function (ast, context) {\n        return this.transformExpr(new InvokeFunctionExpr(ast.fn.visitExpression(this, context), this.visitAllExpressions(ast.args, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitInstantiateExpr = function (ast, context) {\n        return this.transformExpr(new InstantiateExpr(ast.classExpr.visitExpression(this, context), this.visitAllExpressions(ast.args, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitLiteralExpr = function (ast, context) { return this.transformExpr(ast, context); };\n    AstTransformer.prototype.visitExternalExpr = function (ast, context) {\n        return this.transformExpr(ast, context);\n    };\n    AstTransformer.prototype.visitConditionalExpr = function (ast, context) {\n        return this.transformExpr(new ConditionalExpr(ast.condition.visitExpression(this, context), ast.trueCase.visitExpression(this, context), ast.falseCase.visitExpression(this, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitNotExpr = function (ast, context) {\n        return this.transformExpr(new NotExpr(ast.condition.visitExpression(this, context), ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitAssertNotNullExpr = function (ast, context) {\n        return this.transformExpr(new AssertNotNull(ast.condition.visitExpression(this, context), ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitCastExpr = function (ast, context) {\n        return this.transformExpr(new CastExpr(ast.value.visitExpression(this, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitFunctionExpr = function (ast, context) {\n        return this.transformExpr(new FunctionExpr(ast.params, this.visitAllStatements(ast.statements, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitBinaryOperatorExpr = function (ast, context) {\n        return this.transformExpr(new BinaryOperatorExpr(ast.operator, ast.lhs.visitExpression(this, context), ast.rhs.visitExpression(this, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitReadPropExpr = function (ast, context) {\n        return this.transformExpr(new ReadPropExpr(ast.receiver.visitExpression(this, context), ast.name, ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitReadKeyExpr = function (ast, context) {\n        return this.transformExpr(new ReadKeyExpr(ast.receiver.visitExpression(this, context), ast.index.visitExpression(this, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitLiteralArrayExpr = function (ast, context) {\n        return this.transformExpr(new LiteralArrayExpr(this.visitAllExpressions(ast.entries, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitLiteralMapExpr = function (ast, context) {\n        var _this = this;\n        var entries = ast.entries.map(function (entry) { return new LiteralMapEntry(entry.key, entry.value.visitExpression(_this, context), entry.quoted); });\n        var mapType = new MapType(ast.valueType, null);\n        return this.transformExpr(new LiteralMapExpr(entries, mapType, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitCommaExpr = function (ast, context) {\n        return this.transformExpr(new CommaExpr(this.visitAllExpressions(ast.parts, context), ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitAllExpressions = function (exprs, context) {\n        var _this = this;\n        return exprs.map(function (expr) { return expr.visitExpression(_this, context); });\n    };\n    AstTransformer.prototype.visitDeclareVarStmt = function (stmt, context) {\n        var value = stmt.value && stmt.value.visitExpression(this, context);\n        return this.transformStmt(new DeclareVarStmt(stmt.name, value, stmt.type, stmt.modifiers, stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitDeclareFunctionStmt = function (stmt, context) {\n        return this.transformStmt(new DeclareFunctionStmt(stmt.name, stmt.params, this.visitAllStatements(stmt.statements, context), stmt.type, stmt.modifiers, stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitExpressionStmt = function (stmt, context) {\n        return this.transformStmt(new ExpressionStatement(stmt.expr.visitExpression(this, context), stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitReturnStmt = function (stmt, context) {\n        return this.transformStmt(new ReturnStatement(stmt.value.visitExpression(this, context), stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitDeclareClassStmt = function (stmt, context) {\n        var _this = this;\n        var parent = stmt.parent.visitExpression(this, context);\n        var getters = stmt.getters.map(function (getter) { return new ClassGetter(getter.name, _this.visitAllStatements(getter.body, context), getter.type, getter.modifiers); });\n        var ctorMethod = stmt.constructorMethod &&\n            new ClassMethod(stmt.constructorMethod.name, stmt.constructorMethod.params, this.visitAllStatements(stmt.constructorMethod.body, context), stmt.constructorMethod.type, stmt.constructorMethod.modifiers);\n        var methods = stmt.methods.map(function (method) { return new ClassMethod(method.name, method.params, _this.visitAllStatements(method.body, context), method.type, method.modifiers); });\n        return this.transformStmt(new ClassStmt(stmt.name, parent, stmt.fields, getters, ctorMethod, methods, stmt.modifiers, stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitIfStmt = function (stmt, context) {\n        return this.transformStmt(new IfStmt(stmt.condition.visitExpression(this, context), this.visitAllStatements(stmt.trueCase, context), this.visitAllStatements(stmt.falseCase, context), stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitTryCatchStmt = function (stmt, context) {\n        return this.transformStmt(new TryCatchStmt(this.visitAllStatements(stmt.bodyStmts, context), this.visitAllStatements(stmt.catchStmts, context), stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitThrowStmt = function (stmt, context) {\n        return this.transformStmt(new ThrowStmt(stmt.error.visitExpression(this, context), stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitCommentStmt = function (stmt, context) {\n        return this.transformStmt(stmt, context);\n    };\n    AstTransformer.prototype.visitJSDocCommentStmt = function (stmt, context) {\n        return this.transformStmt(stmt, context);\n    };\n    AstTransformer.prototype.visitAllStatements = function (stmts, context) {\n        var _this = this;\n        return stmts.map(function (stmt) { return stmt.visitStatement(_this, context); });\n    };\n    return AstTransformer;\n}());\nvar RecursiveAstVisitor$1 = /** @class */ (function () {\n    function RecursiveAstVisitor() {\n    }\n    RecursiveAstVisitor.prototype.visitType = function (ast, context) { return ast; };\n    RecursiveAstVisitor.prototype.visitExpression = function (ast, context) {\n        if (ast.type) {\n            ast.type.visitType(this, context);\n        }\n        return ast;\n    };\n    RecursiveAstVisitor.prototype.visitBuiltinType = function (type, context) { return this.visitType(type, context); };\n    RecursiveAstVisitor.prototype.visitExpressionType = function (type, context) {\n        type.value.visitExpression(this, context);\n        return this.visitType(type, context);\n    };\n    RecursiveAstVisitor.prototype.visitArrayType = function (type, context) { return this.visitType(type, context); };\n    RecursiveAstVisitor.prototype.visitMapType = function (type, context) { return this.visitType(type, context); };\n    RecursiveAstVisitor.prototype.visitReadVarExpr = function (ast, context) {\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitWriteVarExpr = function (ast, context) {\n        ast.value.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitWriteKeyExpr = function (ast, context) {\n        ast.receiver.visitExpression(this, context);\n        ast.index.visitExpression(this, context);\n        ast.value.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitWritePropExpr = function (ast, context) {\n        ast.receiver.visitExpression(this, context);\n        ast.value.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitInvokeMethodExpr = function (ast, context) {\n        ast.receiver.visitExpression(this, context);\n        this.visitAllExpressions(ast.args, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitInvokeFunctionExpr = function (ast, context) {\n        ast.fn.visitExpression(this, context);\n        this.visitAllExpressions(ast.args, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitInstantiateExpr = function (ast, context) {\n        ast.classExpr.visitExpression(this, context);\n        this.visitAllExpressions(ast.args, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitLiteralExpr = function (ast, context) {\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitExternalExpr = function (ast, context) {\n        var _this = this;\n        if (ast.typeParams) {\n            ast.typeParams.forEach(function (type) { return type.visitType(_this, context); });\n        }\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitConditionalExpr = function (ast, context) {\n        ast.condition.visitExpression(this, context);\n        ast.trueCase.visitExpression(this, context);\n        ast.falseCase.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitNotExpr = function (ast, context) {\n        ast.condition.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitAssertNotNullExpr = function (ast, context) {\n        ast.condition.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitCastExpr = function (ast, context) {\n        ast.value.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitFunctionExpr = function (ast, context) {\n        this.visitAllStatements(ast.statements, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitBinaryOperatorExpr = function (ast, context) {\n        ast.lhs.visitExpression(this, context);\n        ast.rhs.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitReadPropExpr = function (ast, context) {\n        ast.receiver.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitReadKeyExpr = function (ast, context) {\n        ast.receiver.visitExpression(this, context);\n        ast.index.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitLiteralArrayExpr = function (ast, context) {\n        this.visitAllExpressions(ast.entries, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitLiteralMapExpr = function (ast, context) {\n        var _this = this;\n        ast.entries.forEach(function (entry) { return entry.value.visitExpression(_this, context); });\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitCommaExpr = function (ast, context) {\n        this.visitAllExpressions(ast.parts, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitAllExpressions = function (exprs, context) {\n        var _this = this;\n        exprs.forEach(function (expr) { return expr.visitExpression(_this, context); });\n    };\n    RecursiveAstVisitor.prototype.visitDeclareVarStmt = function (stmt, context) {\n        if (stmt.value) {\n            stmt.value.visitExpression(this, context);\n        }\n        if (stmt.type) {\n            stmt.type.visitType(this, context);\n        }\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitDeclareFunctionStmt = function (stmt, context) {\n        this.visitAllStatements(stmt.statements, context);\n        if (stmt.type) {\n            stmt.type.visitType(this, context);\n        }\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitExpressionStmt = function (stmt, context) {\n        stmt.expr.visitExpression(this, context);\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitReturnStmt = function (stmt, context) {\n        stmt.value.visitExpression(this, context);\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitDeclareClassStmt = function (stmt, context) {\n        var _this = this;\n        stmt.parent.visitExpression(this, context);\n        stmt.getters.forEach(function (getter) { return _this.visitAllStatements(getter.body, context); });\n        if (stmt.constructorMethod) {\n            this.visitAllStatements(stmt.constructorMethod.body, context);\n        }\n        stmt.methods.forEach(function (method) { return _this.visitAllStatements(method.body, context); });\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitIfStmt = function (stmt, context) {\n        stmt.condition.visitExpression(this, context);\n        this.visitAllStatements(stmt.trueCase, context);\n        this.visitAllStatements(stmt.falseCase, context);\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitTryCatchStmt = function (stmt, context) {\n        this.visitAllStatements(stmt.bodyStmts, context);\n        this.visitAllStatements(stmt.catchStmts, context);\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitThrowStmt = function (stmt, context) {\n        stmt.error.visitExpression(this, context);\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitCommentStmt = function (stmt, context) { return stmt; };\n    RecursiveAstVisitor.prototype.visitJSDocCommentStmt = function (stmt, context) { return stmt; };\n    RecursiveAstVisitor.prototype.visitAllStatements = function (stmts, context) {\n        var _this = this;\n        stmts.forEach(function (stmt) { return stmt.visitStatement(_this, context); });\n    };\n    return RecursiveAstVisitor;\n}());\n\nvar _ReadVarVisitor = /** @class */ (function (_super) {\n    __extends(_ReadVarVisitor, _super);\n    function _ReadVarVisitor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.varNames = new Set();\n        return _this;\n    }\n    _ReadVarVisitor.prototype.visitDeclareFunctionStmt = function (stmt, context) {\n        // Don't descend into nested functions\n        return stmt;\n    };\n    _ReadVarVisitor.prototype.visitDeclareClassStmt = function (stmt, context) {\n        // Don't descend into nested classes\n        return stmt;\n    };\n    _ReadVarVisitor.prototype.visitReadVarExpr = function (ast, context) {\n        if (ast.name) {\n            this.varNames.add(ast.name);\n        }\n        return null;\n    };\n    return _ReadVarVisitor;\n}(RecursiveAstVisitor$1));\n\nvar _FindExternalReferencesVisitor = /** @class */ (function (_super) {\n    __extends(_FindExternalReferencesVisitor, _super);\n    function _FindExternalReferencesVisitor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.externalReferences = [];\n        return _this;\n    }\n    _FindExternalReferencesVisitor.prototype.visitExternalExpr = function (e, context) {\n        this.externalReferences.push(e.value);\n        return _super.prototype.visitExternalExpr.call(this, e, context);\n    };\n    return _FindExternalReferencesVisitor;\n}(RecursiveAstVisitor$1));\n\n\nvar _ApplySourceSpanTransformer = /** @class */ (function (_super) {\n    __extends(_ApplySourceSpanTransformer, _super);\n    function _ApplySourceSpanTransformer(sourceSpan) {\n        var _this = _super.call(this) || this;\n        _this.sourceSpan = sourceSpan;\n        return _this;\n    }\n    _ApplySourceSpanTransformer.prototype._clone = function (obj) {\n        var clone = Object.create(obj.constructor.prototype);\n        for (var prop in obj) {\n            clone[prop] = obj[prop];\n        }\n        return clone;\n    };\n    _ApplySourceSpanTransformer.prototype.transformExpr = function (expr, context) {\n        if (!expr.sourceSpan) {\n            expr = this._clone(expr);\n            expr.sourceSpan = this.sourceSpan;\n        }\n        return expr;\n    };\n    _ApplySourceSpanTransformer.prototype.transformStmt = function (stmt, context) {\n        if (!stmt.sourceSpan) {\n            stmt = this._clone(stmt);\n            stmt.sourceSpan = this.sourceSpan;\n        }\n        return stmt;\n    };\n    return _ApplySourceSpanTransformer;\n}(AstTransformer$1));\nfunction variable(name, type, sourceSpan) {\n    return new ReadVarExpr(name, type, sourceSpan);\n}\nfunction importExpr(id, typeParams, sourceSpan) {\n    if (typeParams === void 0) { typeParams = null; }\n    return new ExternalExpr(id, null, typeParams, sourceSpan);\n}\n\n\nfunction literalArr(values, type, sourceSpan) {\n    return new LiteralArrayExpr(values, type, sourceSpan);\n}\nfunction literalMap(values, type) {\n    if (type === void 0) { type = null; }\n    return new LiteralMapExpr(values.map(function (e) { return new LiteralMapEntry(e.key, e.value, e.quoted); }), type, null);\n}\n\n\n\n\n\n\n/*\n * Serializes a `Tag` into a string.\n * Returns a string like \" @foo {bar} baz\" (note the leading whitespace before `@foo`).\n */\nfunction tagToString(tag) {\n    var out = '';\n    if (tag.tagName) {\n        out += \" @\" + tag.tagName;\n    }\n    if (tag.text) {\n        if (tag.text.match(/\\/\\*|\\*\\//)) {\n            throw new Error('JSDoc text cannot contain \"/*\" and \"*/\"');\n        }\n        out += ' ' + tag.text.replace(/@/g, '\\\\@');\n    }\n    return out;\n}\nfunction serializeTags(tags) {\n    if (tags.length === 0)\n        return '';\n    var out = '*\\n';\n    try {\n        for (var tags_1 = __values(tags), tags_1_1 = tags_1.next(); !tags_1_1.done; tags_1_1 = tags_1.next()) {\n            var tag = tags_1_1.value;\n            out += ' *';\n            // If the tagToString is multi-line, insert \" * \" prefixes on subsequent lines.\n            out += tagToString(tag).replace(/\\n/g, '\\n * ');\n            out += '\\n';\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (tags_1_1 && !tags_1_1.done && (_a = tags_1.return)) _a.call(tags_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    out += ' ';\n    return out;\n    var e_1, _a;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar STRIP_SRC_FILE_SUFFIXES = /(\\.ts|\\.d\\.ts|\\.js|\\.jsx|\\.tsx)$/;\nvar GENERATED_FILE = /\\.ngfactory\\.|\\.ngsummary\\./;\nvar JIT_SUMMARY_FILE = /\\.ngsummary\\./;\nvar JIT_SUMMARY_NAME = /NgSummary$/;\nfunction ngfactoryFilePath(filePath, forceSourceFile) {\n    if (forceSourceFile === void 0) { forceSourceFile = false; }\n    var urlWithSuffix = splitTypescriptSuffix(filePath, forceSourceFile);\n    return urlWithSuffix[0] + \".ngfactory\" + normalizeGenFileSuffix(urlWithSuffix[1]);\n}\nfunction stripGeneratedFileSuffix(filePath) {\n    return filePath.replace(GENERATED_FILE, '.');\n}\nfunction isGeneratedFile(filePath) {\n    return GENERATED_FILE.test(filePath);\n}\nfunction splitTypescriptSuffix(path$$1, forceSourceFile) {\n    if (forceSourceFile === void 0) { forceSourceFile = false; }\n    if (path$$1.endsWith('.d.ts')) {\n        return [path$$1.slice(0, -5), forceSourceFile ? '.ts' : '.d.ts'];\n    }\n    var lastDot = path$$1.lastIndexOf('.');\n    if (lastDot !== -1) {\n        return [path$$1.substring(0, lastDot), path$$1.substring(lastDot)];\n    }\n    return [path$$1, ''];\n}\nfunction normalizeGenFileSuffix(srcFileSuffix) {\n    return srcFileSuffix === '.tsx' ? '.ts' : srcFileSuffix;\n}\nfunction summaryFileName(fileName) {\n    var fileNameWithoutSuffix = fileName.replace(STRIP_SRC_FILE_SUFFIXES, '');\n    return fileNameWithoutSuffix + \".ngsummary.json\";\n}\nfunction summaryForJitFileName(fileName, forceSourceFile) {\n    if (forceSourceFile === void 0) { forceSourceFile = false; }\n    var urlWithSuffix = splitTypescriptSuffix(stripGeneratedFileSuffix(fileName), forceSourceFile);\n    return urlWithSuffix[0] + \".ngsummary\" + urlWithSuffix[1];\n}\nfunction stripSummaryForJitFileSuffix(filePath) {\n    return filePath.replace(JIT_SUMMARY_FILE, '.');\n}\nfunction summaryForJitName(symbolName) {\n    return symbolName + \"NgSummary\";\n}\nfunction stripSummaryForJitNameSuffix(symbolName) {\n    return symbolName.replace(JIT_SUMMARY_NAME, '');\n}\nvar LOWERED_SYMBOL = /\\u0275\\d+/;\nfunction isLoweredSymbol(name) {\n    return LOWERED_SYMBOL.test(name);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar LifecycleHooks;\n(function (LifecycleHooks) {\n    LifecycleHooks[LifecycleHooks[\"OnInit\"] = 0] = \"OnInit\";\n    LifecycleHooks[LifecycleHooks[\"OnDestroy\"] = 1] = \"OnDestroy\";\n    LifecycleHooks[LifecycleHooks[\"DoCheck\"] = 2] = \"DoCheck\";\n    LifecycleHooks[LifecycleHooks[\"OnChanges\"] = 3] = \"OnChanges\";\n    LifecycleHooks[LifecycleHooks[\"AfterContentInit\"] = 4] = \"AfterContentInit\";\n    LifecycleHooks[LifecycleHooks[\"AfterContentChecked\"] = 5] = \"AfterContentChecked\";\n    LifecycleHooks[LifecycleHooks[\"AfterViewInit\"] = 6] = \"AfterViewInit\";\n    LifecycleHooks[LifecycleHooks[\"AfterViewChecked\"] = 7] = \"AfterViewChecked\";\n})(LifecycleHooks || (LifecycleHooks = {}));\nvar LIFECYCLE_HOOKS_VALUES = [\n    LifecycleHooks.OnInit, LifecycleHooks.OnDestroy, LifecycleHooks.DoCheck, LifecycleHooks.OnChanges,\n    LifecycleHooks.AfterContentInit, LifecycleHooks.AfterContentChecked, LifecycleHooks.AfterViewInit,\n    LifecycleHooks.AfterViewChecked\n];\nfunction hasLifecycleHook(reflector, hook, token) {\n    return reflector.hasLifecycleHook(token, getHookName(hook));\n}\nfunction getAllLifecycleHooks(reflector, token) {\n    return LIFECYCLE_HOOKS_VALUES.filter(function (hook) { return hasLifecycleHook(reflector, hook, token); });\n}\nfunction getHookName(hook) {\n    switch (hook) {\n        case LifecycleHooks.OnInit:\n            return 'ngOnInit';\n        case LifecycleHooks.OnDestroy:\n            return 'ngOnDestroy';\n        case LifecycleHooks.DoCheck:\n            return 'ngDoCheck';\n        case LifecycleHooks.OnChanges:\n            return 'ngOnChanges';\n        case LifecycleHooks.AfterContentInit:\n            return 'ngAfterContentInit';\n        case LifecycleHooks.AfterContentChecked:\n            return 'ngAfterContentChecked';\n        case LifecycleHooks.AfterViewInit:\n            return 'ngAfterViewInit';\n        case LifecycleHooks.AfterViewChecked:\n            return 'ngAfterViewChecked';\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _SELECTOR_REGEXP = new RegExp('(\\\\:not\\\\()|' + //\":not(\"\n    '([-\\\\w]+)|' + // \"tag\"\n    '(?:\\\\.([-\\\\w]+))|' + // \".class\"\n    // \"-\" should appear first in the regexp below as FF31 parses \"[.-\\w]\" as a range\n    '(?:\\\\[([-.\\\\w*]+)(?:=([\\\"\\']?)([^\\\\]\\\"\\']*)\\\\5)?\\\\])|' + // \"[name]\", \"[name=value]\",\n    // \"[name=\"value\"]\",\n    // \"[name='value']\"\n    '(\\\\))|' + // \")\"\n    '(\\\\s*,\\\\s*)', // \",\"\n'g');\n/**\n * A css selector contains an element name,\n * css classes and attribute/value pairs with the purpose\n * of selecting subsets out of them.\n */\nvar CssSelector = /** @class */ (function () {\n    function CssSelector() {\n        this.element = null;\n        this.classNames = [];\n        /**\n         * The selectors are encoded in pairs where:\n         * - even locations are attribute names\n         * - odd locations are attribute values.\n         *\n         * Example:\n         * Selector: `[key1=value1][key2]` would parse to:\n         * ```\n         * ['key1', 'value1', 'key2', '']\n         * ```\n         */\n        this.attrs = [];\n        this.notSelectors = [];\n    }\n    CssSelector.parse = function (selector) {\n        var results = [];\n        var _addResult = function (res, cssSel) {\n            if (cssSel.notSelectors.length > 0 && !cssSel.element && cssSel.classNames.length == 0 &&\n                cssSel.attrs.length == 0) {\n                cssSel.element = '*';\n            }\n            res.push(cssSel);\n        };\n        var cssSelector = new CssSelector();\n        var match;\n        var current = cssSelector;\n        var inNot = false;\n        _SELECTOR_REGEXP.lastIndex = 0;\n        while (match = _SELECTOR_REGEXP.exec(selector)) {\n            if (match[1]) {\n                if (inNot) {\n                    throw new Error('Nesting :not is not allowed in a selector');\n                }\n                inNot = true;\n                current = new CssSelector();\n                cssSelector.notSelectors.push(current);\n            }\n            if (match[2]) {\n                current.setElement(match[2]);\n            }\n            if (match[3]) {\n                current.addClassName(match[3]);\n            }\n            if (match[4]) {\n                current.addAttribute(match[4], match[6]);\n            }\n            if (match[7]) {\n                inNot = false;\n                current = cssSelector;\n            }\n            if (match[8]) {\n                if (inNot) {\n                    throw new Error('Multiple selectors in :not are not supported');\n                }\n                _addResult(results, cssSelector);\n                cssSelector = current = new CssSelector();\n            }\n        }\n        _addResult(results, cssSelector);\n        return results;\n    };\n    CssSelector.prototype.isElementSelector = function () {\n        return this.hasElementSelector() && this.classNames.length == 0 && this.attrs.length == 0 &&\n            this.notSelectors.length === 0;\n    };\n    CssSelector.prototype.hasElementSelector = function () { return !!this.element; };\n    CssSelector.prototype.setElement = function (element) {\n        if (element === void 0) { element = null; }\n        this.element = element;\n    };\n    /** Gets a template string for an element that matches the selector. */\n    CssSelector.prototype.getMatchingElementTemplate = function () {\n        var tagName = this.element || 'div';\n        var classAttr = this.classNames.length > 0 ? \" class=\\\"\" + this.classNames.join(' ') + \"\\\"\" : '';\n        var attrs = '';\n        for (var i = 0; i < this.attrs.length; i += 2) {\n            var attrName = this.attrs[i];\n            var attrValue = this.attrs[i + 1] !== '' ? \"=\\\"\" + this.attrs[i + 1] + \"\\\"\" : '';\n            attrs += \" \" + attrName + attrValue;\n        }\n        return getHtmlTagDefinition(tagName).isVoid ? \"<\" + tagName + classAttr + attrs + \"/>\" :\n            \"<\" + tagName + classAttr + attrs + \"></\" + tagName + \">\";\n    };\n    CssSelector.prototype.getAttrs = function () {\n        var result = [];\n        if (this.classNames.length > 0) {\n            result.push('class', this.classNames.join(' '));\n        }\n        return result.concat(this.attrs);\n    };\n    CssSelector.prototype.addAttribute = function (name, value) {\n        if (value === void 0) { value = ''; }\n        this.attrs.push(name, value && value.toLowerCase() || '');\n    };\n    CssSelector.prototype.addClassName = function (name) { this.classNames.push(name.toLowerCase()); };\n    CssSelector.prototype.toString = function () {\n        var res = this.element || '';\n        if (this.classNames) {\n            this.classNames.forEach(function (klass) { return res += \".\" + klass; });\n        }\n        if (this.attrs) {\n            for (var i = 0; i < this.attrs.length; i += 2) {\n                var name_1 = this.attrs[i];\n                var value = this.attrs[i + 1];\n                res += \"[\" + name_1 + (value ? '=' + value : '') + \"]\";\n            }\n        }\n        this.notSelectors.forEach(function (notSelector) { return res += \":not(\" + notSelector + \")\"; });\n        return res;\n    };\n    return CssSelector;\n}());\n/**\n * Reads a list of CssSelectors and allows to calculate which ones\n * are contained in a given CssSelector.\n */\nvar SelectorMatcher = /** @class */ (function () {\n    function SelectorMatcher() {\n        this._elementMap = new Map();\n        this._elementPartialMap = new Map();\n        this._classMap = new Map();\n        this._classPartialMap = new Map();\n        this._attrValueMap = new Map();\n        this._attrValuePartialMap = new Map();\n        this._listContexts = [];\n    }\n    SelectorMatcher.createNotMatcher = function (notSelectors) {\n        var notMatcher = new SelectorMatcher();\n        notMatcher.addSelectables(notSelectors, null);\n        return notMatcher;\n    };\n    SelectorMatcher.prototype.addSelectables = function (cssSelectors, callbackCtxt) {\n        var listContext = null;\n        if (cssSelectors.length > 1) {\n            listContext = new SelectorListContext(cssSelectors);\n            this._listContexts.push(listContext);\n        }\n        for (var i = 0; i < cssSelectors.length; i++) {\n            this._addSelectable(cssSelectors[i], callbackCtxt, listContext);\n        }\n    };\n    /**\n     * Add an object that can be found later on by calling `match`.\n     * @param cssSelector A css selector\n     * @param callbackCtxt An opaque object that will be given to the callback of the `match` function\n     */\n    SelectorMatcher.prototype._addSelectable = function (cssSelector, callbackCtxt, listContext) {\n        var matcher = this;\n        var element = cssSelector.element;\n        var classNames = cssSelector.classNames;\n        var attrs = cssSelector.attrs;\n        var selectable = new SelectorContext(cssSelector, callbackCtxt, listContext);\n        if (element) {\n            var isTerminal = attrs.length === 0 && classNames.length === 0;\n            if (isTerminal) {\n                this._addTerminal(matcher._elementMap, element, selectable);\n            }\n            else {\n                matcher = this._addPartial(matcher._elementPartialMap, element);\n            }\n        }\n        if (classNames) {\n            for (var i = 0; i < classNames.length; i++) {\n                var isTerminal = attrs.length === 0 && i === classNames.length - 1;\n                var className = classNames[i];\n                if (isTerminal) {\n                    this._addTerminal(matcher._classMap, className, selectable);\n                }\n                else {\n                    matcher = this._addPartial(matcher._classPartialMap, className);\n                }\n            }\n        }\n        if (attrs) {\n            for (var i = 0; i < attrs.length; i += 2) {\n                var isTerminal = i === attrs.length - 2;\n                var name_2 = attrs[i];\n                var value = attrs[i + 1];\n                if (isTerminal) {\n                    var terminalMap = matcher._attrValueMap;\n                    var terminalValuesMap = terminalMap.get(name_2);\n                    if (!terminalValuesMap) {\n                        terminalValuesMap = new Map();\n                        terminalMap.set(name_2, terminalValuesMap);\n                    }\n                    this._addTerminal(terminalValuesMap, value, selectable);\n                }\n                else {\n                    var partialMap = matcher._attrValuePartialMap;\n                    var partialValuesMap = partialMap.get(name_2);\n                    if (!partialValuesMap) {\n                        partialValuesMap = new Map();\n                        partialMap.set(name_2, partialValuesMap);\n                    }\n                    matcher = this._addPartial(partialValuesMap, value);\n                }\n            }\n        }\n    };\n    SelectorMatcher.prototype._addTerminal = function (map, name, selectable) {\n        var terminalList = map.get(name);\n        if (!terminalList) {\n            terminalList = [];\n            map.set(name, terminalList);\n        }\n        terminalList.push(selectable);\n    };\n    SelectorMatcher.prototype._addPartial = function (map, name) {\n        var matcher = map.get(name);\n        if (!matcher) {\n            matcher = new SelectorMatcher();\n            map.set(name, matcher);\n        }\n        return matcher;\n    };\n    /**\n     * Find the objects that have been added via `addSelectable`\n     * whose css selector is contained in the given css selector.\n     * @param cssSelector A css selector\n     * @param matchedCallback This callback will be called with the object handed into `addSelectable`\n     * @return boolean true if a match was found\n    */\n    SelectorMatcher.prototype.match = function (cssSelector, matchedCallback) {\n        var result = false;\n        var element = cssSelector.element;\n        var classNames = cssSelector.classNames;\n        var attrs = cssSelector.attrs;\n        for (var i = 0; i < this._listContexts.length; i++) {\n            this._listContexts[i].alreadyMatched = false;\n        }\n        result = this._matchTerminal(this._elementMap, element, cssSelector, matchedCallback) || result;\n        result = this._matchPartial(this._elementPartialMap, element, cssSelector, matchedCallback) ||\n            result;\n        if (classNames) {\n            for (var i = 0; i < classNames.length; i++) {\n                var className = classNames[i];\n                result =\n                    this._matchTerminal(this._classMap, className, cssSelector, matchedCallback) || result;\n                result =\n                    this._matchPartial(this._classPartialMap, className, cssSelector, matchedCallback) ||\n                        result;\n            }\n        }\n        if (attrs) {\n            for (var i = 0; i < attrs.length; i += 2) {\n                var name_3 = attrs[i];\n                var value = attrs[i + 1];\n                var terminalValuesMap = this._attrValueMap.get(name_3);\n                if (value) {\n                    result =\n                        this._matchTerminal(terminalValuesMap, '', cssSelector, matchedCallback) || result;\n                }\n                result =\n                    this._matchTerminal(terminalValuesMap, value, cssSelector, matchedCallback) || result;\n                var partialValuesMap = this._attrValuePartialMap.get(name_3);\n                if (value) {\n                    result = this._matchPartial(partialValuesMap, '', cssSelector, matchedCallback) || result;\n                }\n                result =\n                    this._matchPartial(partialValuesMap, value, cssSelector, matchedCallback) || result;\n            }\n        }\n        return result;\n    };\n    /** @internal */\n    SelectorMatcher.prototype._matchTerminal = function (map, name, cssSelector, matchedCallback) {\n        if (!map || typeof name !== 'string') {\n            return false;\n        }\n        var selectables = map.get(name) || [];\n        var starSelectables = map.get('*');\n        if (starSelectables) {\n            selectables = selectables.concat(starSelectables);\n        }\n        if (selectables.length === 0) {\n            return false;\n        }\n        var selectable;\n        var result = false;\n        for (var i = 0; i < selectables.length; i++) {\n            selectable = selectables[i];\n            result = selectable.finalize(cssSelector, matchedCallback) || result;\n        }\n        return result;\n    };\n    /** @internal */\n    SelectorMatcher.prototype._matchPartial = function (map, name, cssSelector, matchedCallback) {\n        if (!map || typeof name !== 'string') {\n            return false;\n        }\n        var nestedSelector = map.get(name);\n        if (!nestedSelector) {\n            return false;\n        }\n        // TODO(perf): get rid of recursion and measure again\n        // TODO(perf): don't pass the whole selector into the recursion,\n        // but only the not processed parts\n        return nestedSelector.match(cssSelector, matchedCallback);\n    };\n    return SelectorMatcher;\n}());\nvar SelectorListContext = /** @class */ (function () {\n    function SelectorListContext(selectors) {\n        this.selectors = selectors;\n        this.alreadyMatched = false;\n    }\n    return SelectorListContext;\n}());\n// Store context to pass back selector and context when a selector is matched\nvar SelectorContext = /** @class */ (function () {\n    function SelectorContext(selector, cbContext, listContext) {\n        this.selector = selector;\n        this.cbContext = cbContext;\n        this.listContext = listContext;\n        this.notSelectors = selector.notSelectors;\n    }\n    SelectorContext.prototype.finalize = function (cssSelector, callback) {\n        var result = true;\n        if (this.notSelectors.length > 0 && (!this.listContext || !this.listContext.alreadyMatched)) {\n            var notMatcher = SelectorMatcher.createNotMatcher(this.notSelectors);\n            result = !notMatcher.match(cssSelector, null);\n        }\n        if (result && callback && (!this.listContext || !this.listContext.alreadyMatched)) {\n            if (this.listContext) {\n                this.listContext.alreadyMatched = true;\n            }\n            callback(this.selector, this.cbContext);\n        }\n        return result;\n    };\n    return SelectorContext;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ERROR_COMPONENT_TYPE = 'ngComponentType';\n// Design notes:\n// - don't lazily create metadata:\n//   For some metadata, we need to do async work sometimes,\n//   so the user has to kick off this loading.\n//   But we want to report errors even when the async work is\n//   not required to check that the user would have been able\n//   to wait correctly.\nvar CompileMetadataResolver = /** @class */ (function () {\n    function CompileMetadataResolver(_config, _htmlParser, _ngModuleResolver, _directiveResolver, _pipeResolver, _summaryResolver, _schemaRegistry, _directiveNormalizer, _console, _staticSymbolCache, _reflector, _errorCollector) {\n        this._config = _config;\n        this._htmlParser = _htmlParser;\n        this._ngModuleResolver = _ngModuleResolver;\n        this._directiveResolver = _directiveResolver;\n        this._pipeResolver = _pipeResolver;\n        this._summaryResolver = _summaryResolver;\n        this._schemaRegistry = _schemaRegistry;\n        this._directiveNormalizer = _directiveNormalizer;\n        this._console = _console;\n        this._staticSymbolCache = _staticSymbolCache;\n        this._reflector = _reflector;\n        this._errorCollector = _errorCollector;\n        this._nonNormalizedDirectiveCache = new Map();\n        this._directiveCache = new Map();\n        this._summaryCache = new Map();\n        this._pipeCache = new Map();\n        this._ngModuleCache = new Map();\n        this._ngModuleOfTypes = new Map();\n        this._shallowModuleCache = new Map();\n    }\n    CompileMetadataResolver.prototype.getReflector = function () { return this._reflector; };\n    CompileMetadataResolver.prototype.clearCacheFor = function (type) {\n        var dirMeta = this._directiveCache.get(type);\n        this._directiveCache.delete(type);\n        this._nonNormalizedDirectiveCache.delete(type);\n        this._summaryCache.delete(type);\n        this._pipeCache.delete(type);\n        this._ngModuleOfTypes.delete(type);\n        // Clear all of the NgModule as they contain transitive information!\n        this._ngModuleCache.clear();\n        if (dirMeta) {\n            this._directiveNormalizer.clearCacheFor(dirMeta);\n        }\n    };\n    CompileMetadataResolver.prototype.clearCache = function () {\n        this._directiveCache.clear();\n        this._nonNormalizedDirectiveCache.clear();\n        this._summaryCache.clear();\n        this._pipeCache.clear();\n        this._ngModuleCache.clear();\n        this._ngModuleOfTypes.clear();\n        this._directiveNormalizer.clearCache();\n    };\n    CompileMetadataResolver.prototype._createProxyClass = function (baseType, name) {\n        var delegate = null;\n        var proxyClass = function () {\n            if (!delegate) {\n                throw new Error(\"Illegal state: Class \" + name + \" for type \" + stringify(baseType) + \" is not compiled yet!\");\n            }\n            return delegate.apply(this, arguments);\n        };\n        proxyClass.setDelegate = function (d) {\n            delegate = d;\n            proxyClass.prototype = d.prototype;\n        };\n        // Make stringify work correctly\n        proxyClass.overriddenName = name;\n        return proxyClass;\n    };\n    CompileMetadataResolver.prototype.getGeneratedClass = function (dirType, name) {\n        if (dirType instanceof StaticSymbol) {\n            return this._staticSymbolCache.get(ngfactoryFilePath(dirType.filePath), name);\n        }\n        else {\n            return this._createProxyClass(dirType, name);\n        }\n    };\n    CompileMetadataResolver.prototype.getComponentViewClass = function (dirType) {\n        return this.getGeneratedClass(dirType, viewClassName(dirType, 0));\n    };\n    CompileMetadataResolver.prototype.getHostComponentViewClass = function (dirType) {\n        return this.getGeneratedClass(dirType, hostViewClassName(dirType));\n    };\n    CompileMetadataResolver.prototype.getHostComponentType = function (dirType) {\n        var name = identifierName({ reference: dirType }) + \"_Host\";\n        if (dirType instanceof StaticSymbol) {\n            return this._staticSymbolCache.get(dirType.filePath, name);\n        }\n        else {\n            var HostClass = function HostClass() { };\n            HostClass.overriddenName = name;\n            return HostClass;\n        }\n    };\n    CompileMetadataResolver.prototype.getRendererType = function (dirType) {\n        if (dirType instanceof StaticSymbol) {\n            return this._staticSymbolCache.get(ngfactoryFilePath(dirType.filePath), rendererTypeName(dirType));\n        }\n        else {\n            // returning an object as proxy,\n            // that we fill later during runtime compilation.\n            return {};\n        }\n    };\n    CompileMetadataResolver.prototype.getComponentFactory = function (selector, dirType, inputs, outputs) {\n        if (dirType instanceof StaticSymbol) {\n            return this._staticSymbolCache.get(ngfactoryFilePath(dirType.filePath), componentFactoryName(dirType));\n        }\n        else {\n            var hostView = this.getHostComponentViewClass(dirType);\n            // Note: ngContentSelectors will be filled later once the template is\n            // loaded.\n            var createComponentFactory = this._reflector.resolveExternalReference(Identifiers.createComponentFactory);\n            return createComponentFactory(selector, dirType, hostView, inputs, outputs, []);\n        }\n    };\n    CompileMetadataResolver.prototype.initComponentFactory = function (factory, ngContentSelectors) {\n        if (!(factory instanceof StaticSymbol)) {\n            (_a = factory.ngContentSelectors).push.apply(_a, __spread(ngContentSelectors));\n        }\n        var _a;\n    };\n    CompileMetadataResolver.prototype._loadSummary = function (type, kind) {\n        var typeSummary = this._summaryCache.get(type);\n        if (!typeSummary) {\n            var summary = this._summaryResolver.resolveSummary(type);\n            typeSummary = summary ? summary.type : null;\n            this._summaryCache.set(type, typeSummary || null);\n        }\n        return typeSummary && typeSummary.summaryKind === kind ? typeSummary : null;\n    };\n    CompileMetadataResolver.prototype.getHostComponentMetadata = function (compMeta, hostViewType) {\n        var hostType = this.getHostComponentType(compMeta.type.reference);\n        if (!hostViewType) {\n            hostViewType = this.getHostComponentViewClass(hostType);\n        }\n        // Note: ! is ok here as this method should only be called with normalized directive\n        // metadata, which always fills in the selector.\n        var template = CssSelector.parse(compMeta.selector)[0].getMatchingElementTemplate();\n        var templateUrl = '';\n        var htmlAst = this._htmlParser.parse(template, templateUrl);\n        return CompileDirectiveMetadata.create({\n            isHost: true,\n            type: { reference: hostType, diDeps: [], lifecycleHooks: [] },\n            template: new CompileTemplateMetadata({\n                encapsulation: ViewEncapsulation.None,\n                template: template,\n                templateUrl: templateUrl,\n                htmlAst: htmlAst,\n                styles: [],\n                styleUrls: [],\n                ngContentSelectors: [],\n                animations: [],\n                isInline: true,\n                externalStylesheets: [],\n                interpolation: null,\n                preserveWhitespaces: false,\n            }),\n            exportAs: null,\n            changeDetection: ChangeDetectionStrategy.Default,\n            inputs: [],\n            outputs: [],\n            host: {},\n            isComponent: true,\n            selector: '*',\n            providers: [],\n            viewProviders: [],\n            queries: [],\n            guards: {},\n            viewQueries: [],\n            componentViewType: hostViewType,\n            rendererType: { id: '__Host__', encapsulation: ViewEncapsulation.None, styles: [], data: {} },\n            entryComponents: [],\n            componentFactory: null\n        });\n    };\n    CompileMetadataResolver.prototype.loadDirectiveMetadata = function (ngModuleType, directiveType, isSync) {\n        var _this = this;\n        if (this._directiveCache.has(directiveType)) {\n            return null;\n        }\n        directiveType = resolveForwardRef(directiveType);\n        var _a = this.getNonNormalizedDirectiveMetadata(directiveType), annotation = _a.annotation, metadata = _a.metadata;\n        var createDirectiveMetadata = function (templateMetadata) {\n            var normalizedDirMeta = new CompileDirectiveMetadata({\n                isHost: false,\n                type: metadata.type,\n                isComponent: metadata.isComponent,\n                selector: metadata.selector,\n                exportAs: metadata.exportAs,\n                changeDetection: metadata.changeDetection,\n                inputs: metadata.inputs,\n                outputs: metadata.outputs,\n                hostListeners: metadata.hostListeners,\n                hostProperties: metadata.hostProperties,\n                hostAttributes: metadata.hostAttributes,\n                providers: metadata.providers,\n                viewProviders: metadata.viewProviders,\n                queries: metadata.queries,\n                guards: metadata.guards,\n                viewQueries: metadata.viewQueries,\n                entryComponents: metadata.entryComponents,\n                componentViewType: metadata.componentViewType,\n                rendererType: metadata.rendererType,\n                componentFactory: metadata.componentFactory,\n                template: templateMetadata\n            });\n            if (templateMetadata) {\n                _this.initComponentFactory(metadata.componentFactory, templateMetadata.ngContentSelectors);\n            }\n            _this._directiveCache.set(directiveType, normalizedDirMeta);\n            _this._summaryCache.set(directiveType, normalizedDirMeta.toSummary());\n            return null;\n        };\n        if (metadata.isComponent) {\n            var template = metadata.template;\n            var templateMeta = this._directiveNormalizer.normalizeTemplate({\n                ngModuleType: ngModuleType,\n                componentType: directiveType,\n                moduleUrl: this._reflector.componentModuleUrl(directiveType, annotation),\n                encapsulation: template.encapsulation,\n                template: template.template,\n                templateUrl: template.templateUrl,\n                styles: template.styles,\n                styleUrls: template.styleUrls,\n                animations: template.animations,\n                interpolation: template.interpolation,\n                preserveWhitespaces: template.preserveWhitespaces\n            });\n            if (isPromise(templateMeta) && isSync) {\n                this._reportError(componentStillLoadingError(directiveType), directiveType);\n                return null;\n            }\n            return SyncAsync.then(templateMeta, createDirectiveMetadata);\n        }\n        else {\n            // directive\n            createDirectiveMetadata(null);\n            return null;\n        }\n    };\n    CompileMetadataResolver.prototype.getNonNormalizedDirectiveMetadata = function (directiveType) {\n        var _this = this;\n        directiveType = resolveForwardRef(directiveType);\n        if (!directiveType) {\n            return null;\n        }\n        var cacheEntry = this._nonNormalizedDirectiveCache.get(directiveType);\n        if (cacheEntry) {\n            return cacheEntry;\n        }\n        var dirMeta = this._directiveResolver.resolve(directiveType, false);\n        if (!dirMeta) {\n            return null;\n        }\n        var nonNormalizedTemplateMetadata = undefined;\n        if (createComponent.isTypeOf(dirMeta)) {\n            // component\n            var compMeta = dirMeta;\n            assertArrayOfStrings('styles', compMeta.styles);\n            assertArrayOfStrings('styleUrls', compMeta.styleUrls);\n            assertInterpolationSymbols('interpolation', compMeta.interpolation);\n            var animations = compMeta.animations;\n            nonNormalizedTemplateMetadata = new CompileTemplateMetadata({\n                encapsulation: noUndefined(compMeta.encapsulation),\n                template: noUndefined(compMeta.template),\n                templateUrl: noUndefined(compMeta.templateUrl),\n                htmlAst: null,\n                styles: compMeta.styles || [],\n                styleUrls: compMeta.styleUrls || [],\n                animations: animations || [],\n                interpolation: noUndefined(compMeta.interpolation),\n                isInline: !!compMeta.template,\n                externalStylesheets: [],\n                ngContentSelectors: [],\n                preserveWhitespaces: noUndefined(dirMeta.preserveWhitespaces),\n            });\n        }\n        var changeDetectionStrategy = null;\n        var viewProviders = [];\n        var entryComponentMetadata = [];\n        var selector = dirMeta.selector;\n        if (createComponent.isTypeOf(dirMeta)) {\n            // Component\n            var compMeta = dirMeta;\n            changeDetectionStrategy = compMeta.changeDetection;\n            if (compMeta.viewProviders) {\n                viewProviders = this._getProvidersMetadata(compMeta.viewProviders, entryComponentMetadata, \"viewProviders for \\\"\" + stringifyType(directiveType) + \"\\\"\", [], directiveType);\n            }\n            if (compMeta.entryComponents) {\n                entryComponentMetadata = flattenAndDedupeArray(compMeta.entryComponents)\n                    .map(function (type) { return _this._getEntryComponentMetadata(type); })\n                    .concat(entryComponentMetadata);\n            }\n            if (!selector) {\n                selector = this._schemaRegistry.getDefaultComponentElementName();\n            }\n        }\n        else {\n            // Directive\n            if (!selector) {\n                this._reportError(syntaxError(\"Directive \" + stringifyType(directiveType) + \" has no selector, please add it!\"), directiveType);\n                selector = 'error';\n            }\n        }\n        var providers = [];\n        if (dirMeta.providers != null) {\n            providers = this._getProvidersMetadata(dirMeta.providers, entryComponentMetadata, \"providers for \\\"\" + stringifyType(directiveType) + \"\\\"\", [], directiveType);\n        }\n        var queries = [];\n        var viewQueries = [];\n        if (dirMeta.queries != null) {\n            queries = this._getQueriesMetadata(dirMeta.queries, false, directiveType);\n            viewQueries = this._getQueriesMetadata(dirMeta.queries, true, directiveType);\n        }\n        var metadata = CompileDirectiveMetadata.create({\n            isHost: false,\n            selector: selector,\n            exportAs: noUndefined(dirMeta.exportAs),\n            isComponent: !!nonNormalizedTemplateMetadata,\n            type: this._getTypeMetadata(directiveType),\n            template: nonNormalizedTemplateMetadata,\n            changeDetection: changeDetectionStrategy,\n            inputs: dirMeta.inputs || [],\n            outputs: dirMeta.outputs || [],\n            host: dirMeta.host || {},\n            providers: providers || [],\n            viewProviders: viewProviders || [],\n            queries: queries || [],\n            guards: dirMeta.guards || {},\n            viewQueries: viewQueries || [],\n            entryComponents: entryComponentMetadata,\n            componentViewType: nonNormalizedTemplateMetadata ? this.getComponentViewClass(directiveType) :\n                null,\n            rendererType: nonNormalizedTemplateMetadata ? this.getRendererType(directiveType) : null,\n            componentFactory: null\n        });\n        if (nonNormalizedTemplateMetadata) {\n            metadata.componentFactory =\n                this.getComponentFactory(selector, directiveType, metadata.inputs, metadata.outputs);\n        }\n        cacheEntry = { metadata: metadata, annotation: dirMeta };\n        this._nonNormalizedDirectiveCache.set(directiveType, cacheEntry);\n        return cacheEntry;\n    };\n    /**\n     * Gets the metadata for the given directive.\n     * This assumes `loadNgModuleDirectiveAndPipeMetadata` has been called first.\n     */\n    CompileMetadataResolver.prototype.getDirectiveMetadata = function (directiveType) {\n        var dirMeta = this._directiveCache.get(directiveType);\n        if (!dirMeta) {\n            this._reportError(syntaxError(\"Illegal state: getDirectiveMetadata can only be called after loadNgModuleDirectiveAndPipeMetadata for a module that declares it. Directive \" + stringifyType(directiveType) + \".\"), directiveType);\n        }\n        return dirMeta;\n    };\n    CompileMetadataResolver.prototype.getDirectiveSummary = function (dirType) {\n        var dirSummary = this._loadSummary(dirType, CompileSummaryKind.Directive);\n        if (!dirSummary) {\n            this._reportError(syntaxError(\"Illegal state: Could not load the summary for directive \" + stringifyType(dirType) + \".\"), dirType);\n        }\n        return dirSummary;\n    };\n    CompileMetadataResolver.prototype.isDirective = function (type) {\n        return !!this._loadSummary(type, CompileSummaryKind.Directive) ||\n            this._directiveResolver.isDirective(type);\n    };\n    CompileMetadataResolver.prototype.isPipe = function (type) {\n        return !!this._loadSummary(type, CompileSummaryKind.Pipe) ||\n            this._pipeResolver.isPipe(type);\n    };\n    CompileMetadataResolver.prototype.isNgModule = function (type) {\n        return !!this._loadSummary(type, CompileSummaryKind.NgModule) ||\n            this._ngModuleResolver.isNgModule(type);\n    };\n    CompileMetadataResolver.prototype.getNgModuleSummary = function (moduleType, alreadyCollecting) {\n        if (alreadyCollecting === void 0) { alreadyCollecting = null; }\n        var moduleSummary = this._loadSummary(moduleType, CompileSummaryKind.NgModule);\n        if (!moduleSummary) {\n            var moduleMeta = this.getNgModuleMetadata(moduleType, false, alreadyCollecting);\n            moduleSummary = moduleMeta ? moduleMeta.toSummary() : null;\n            if (moduleSummary) {\n                this._summaryCache.set(moduleType, moduleSummary);\n            }\n        }\n        return moduleSummary;\n    };\n    /**\n     * Loads the declared directives and pipes of an NgModule.\n     */\n    CompileMetadataResolver.prototype.loadNgModuleDirectiveAndPipeMetadata = function (moduleType, isSync, throwIfNotFound) {\n        var _this = this;\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        var ngModule = this.getNgModuleMetadata(moduleType, throwIfNotFound);\n        var loading = [];\n        if (ngModule) {\n            ngModule.declaredDirectives.forEach(function (id) {\n                var promise = _this.loadDirectiveMetadata(moduleType, id.reference, isSync);\n                if (promise) {\n                    loading.push(promise);\n                }\n            });\n            ngModule.declaredPipes.forEach(function (id) { return _this._loadPipeMetadata(id.reference); });\n        }\n        return Promise.all(loading);\n    };\n    CompileMetadataResolver.prototype.getShallowModuleMetadata = function (moduleType) {\n        var compileMeta = this._shallowModuleCache.get(moduleType);\n        if (compileMeta) {\n            return compileMeta;\n        }\n        var ngModuleMeta = findLast(this._reflector.shallowAnnotations(moduleType), createNgModule.isTypeOf);\n        compileMeta = {\n            type: this._getTypeMetadata(moduleType),\n            rawExports: ngModuleMeta.exports,\n            rawImports: ngModuleMeta.imports,\n            rawProviders: ngModuleMeta.providers,\n        };\n        this._shallowModuleCache.set(moduleType, compileMeta);\n        return compileMeta;\n    };\n    CompileMetadataResolver.prototype.getNgModuleMetadata = function (moduleType, throwIfNotFound, alreadyCollecting) {\n        var _this = this;\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        if (alreadyCollecting === void 0) { alreadyCollecting = null; }\n        moduleType = resolveForwardRef(moduleType);\n        var compileMeta = this._ngModuleCache.get(moduleType);\n        if (compileMeta) {\n            return compileMeta;\n        }\n        var meta = this._ngModuleResolver.resolve(moduleType, throwIfNotFound);\n        if (!meta) {\n            return null;\n        }\n        var declaredDirectives = [];\n        var exportedNonModuleIdentifiers = [];\n        var declaredPipes = [];\n        var importedModules = [];\n        var exportedModules = [];\n        var providers = [];\n        var entryComponents = [];\n        var bootstrapComponents = [];\n        var schemas = [];\n        if (meta.imports) {\n            flattenAndDedupeArray(meta.imports).forEach(function (importedType) {\n                var importedModuleType = undefined;\n                if (isValidType(importedType)) {\n                    importedModuleType = importedType;\n                }\n                else if (importedType && importedType.ngModule) {\n                    var moduleWithProviders = importedType;\n                    importedModuleType = moduleWithProviders.ngModule;\n                    if (moduleWithProviders.providers) {\n                        providers.push.apply(providers, __spread(_this._getProvidersMetadata(moduleWithProviders.providers, entryComponents, \"provider for the NgModule '\" + stringifyType(importedModuleType) + \"'\", [], importedType)));\n                    }\n                }\n                if (importedModuleType) {\n                    if (_this._checkSelfImport(moduleType, importedModuleType))\n                        return;\n                    if (!alreadyCollecting)\n                        alreadyCollecting = new Set();\n                    if (alreadyCollecting.has(importedModuleType)) {\n                        _this._reportError(syntaxError(_this._getTypeDescriptor(importedModuleType) + \" '\" + stringifyType(importedType) + \"' is imported recursively by the module '\" + stringifyType(moduleType) + \"'.\"), moduleType);\n                        return;\n                    }\n                    alreadyCollecting.add(importedModuleType);\n                    var importedModuleSummary = _this.getNgModuleSummary(importedModuleType, alreadyCollecting);\n                    alreadyCollecting.delete(importedModuleType);\n                    if (!importedModuleSummary) {\n                        _this._reportError(syntaxError(\"Unexpected \" + _this._getTypeDescriptor(importedType) + \" '\" + stringifyType(importedType) + \"' imported by the module '\" + stringifyType(moduleType) + \"'. Please add a @NgModule annotation.\"), moduleType);\n                        return;\n                    }\n                    importedModules.push(importedModuleSummary);\n                }\n                else {\n                    _this._reportError(syntaxError(\"Unexpected value '\" + stringifyType(importedType) + \"' imported by the module '\" + stringifyType(moduleType) + \"'\"), moduleType);\n                    return;\n                }\n            });\n        }\n        if (meta.exports) {\n            flattenAndDedupeArray(meta.exports).forEach(function (exportedType) {\n                if (!isValidType(exportedType)) {\n                    _this._reportError(syntaxError(\"Unexpected value '\" + stringifyType(exportedType) + \"' exported by the module '\" + stringifyType(moduleType) + \"'\"), moduleType);\n                    return;\n                }\n                if (!alreadyCollecting)\n                    alreadyCollecting = new Set();\n                if (alreadyCollecting.has(exportedType)) {\n                    _this._reportError(syntaxError(_this._getTypeDescriptor(exportedType) + \" '\" + stringify(exportedType) + \"' is exported recursively by the module '\" + stringifyType(moduleType) + \"'\"), moduleType);\n                    return;\n                }\n                alreadyCollecting.add(exportedType);\n                var exportedModuleSummary = _this.getNgModuleSummary(exportedType, alreadyCollecting);\n                alreadyCollecting.delete(exportedType);\n                if (exportedModuleSummary) {\n                    exportedModules.push(exportedModuleSummary);\n                }\n                else {\n                    exportedNonModuleIdentifiers.push(_this._getIdentifierMetadata(exportedType));\n                }\n            });\n        }\n        // Note: This will be modified later, so we rely on\n        // getting a new instance every time!\n        var transitiveModule = this._getTransitiveNgModuleMetadata(importedModules, exportedModules);\n        if (meta.declarations) {\n            flattenAndDedupeArray(meta.declarations).forEach(function (declaredType) {\n                if (!isValidType(declaredType)) {\n                    _this._reportError(syntaxError(\"Unexpected value '\" + stringifyType(declaredType) + \"' declared by the module '\" + stringifyType(moduleType) + \"'\"), moduleType);\n                    return;\n                }\n                var declaredIdentifier = _this._getIdentifierMetadata(declaredType);\n                if (_this.isDirective(declaredType)) {\n                    transitiveModule.addDirective(declaredIdentifier);\n                    declaredDirectives.push(declaredIdentifier);\n                    _this._addTypeToModule(declaredType, moduleType);\n                }\n                else if (_this.isPipe(declaredType)) {\n                    transitiveModule.addPipe(declaredIdentifier);\n                    transitiveModule.pipes.push(declaredIdentifier);\n                    declaredPipes.push(declaredIdentifier);\n                    _this._addTypeToModule(declaredType, moduleType);\n                }\n                else {\n                    _this._reportError(syntaxError(\"Unexpected \" + _this._getTypeDescriptor(declaredType) + \" '\" + stringifyType(declaredType) + \"' declared by the module '\" + stringifyType(moduleType) + \"'. Please add a @Pipe/@Directive/@Component annotation.\"), moduleType);\n                    return;\n                }\n            });\n        }\n        var exportedDirectives = [];\n        var exportedPipes = [];\n        exportedNonModuleIdentifiers.forEach(function (exportedId) {\n            if (transitiveModule.directivesSet.has(exportedId.reference)) {\n                exportedDirectives.push(exportedId);\n                transitiveModule.addExportedDirective(exportedId);\n            }\n            else if (transitiveModule.pipesSet.has(exportedId.reference)) {\n                exportedPipes.push(exportedId);\n                transitiveModule.addExportedPipe(exportedId);\n            }\n            else {\n                _this._reportError(syntaxError(\"Can't export \" + _this._getTypeDescriptor(exportedId.reference) + \" \" + stringifyType(exportedId.reference) + \" from \" + stringifyType(moduleType) + \" as it was neither declared nor imported!\"), moduleType);\n                return;\n            }\n        });\n        // The providers of the module have to go last\n        // so that they overwrite any other provider we already added.\n        if (meta.providers) {\n            providers.push.apply(providers, __spread(this._getProvidersMetadata(meta.providers, entryComponents, \"provider for the NgModule '\" + stringifyType(moduleType) + \"'\", [], moduleType)));\n        }\n        if (meta.entryComponents) {\n            entryComponents.push.apply(entryComponents, __spread(flattenAndDedupeArray(meta.entryComponents)\n                .map(function (type) { return _this._getEntryComponentMetadata(type); })));\n        }\n        if (meta.bootstrap) {\n            flattenAndDedupeArray(meta.bootstrap).forEach(function (type) {\n                if (!isValidType(type)) {\n                    _this._reportError(syntaxError(\"Unexpected value '\" + stringifyType(type) + \"' used in the bootstrap property of module '\" + stringifyType(moduleType) + \"'\"), moduleType);\n                    return;\n                }\n                bootstrapComponents.push(_this._getIdentifierMetadata(type));\n            });\n        }\n        entryComponents.push.apply(entryComponents, __spread(bootstrapComponents.map(function (type) { return _this._getEntryComponentMetadata(type.reference); })));\n        if (meta.schemas) {\n            schemas.push.apply(schemas, __spread(flattenAndDedupeArray(meta.schemas)));\n        }\n        compileMeta = new CompileNgModuleMetadata({\n            type: this._getTypeMetadata(moduleType),\n            providers: providers,\n            entryComponents: entryComponents,\n            bootstrapComponents: bootstrapComponents,\n            schemas: schemas,\n            declaredDirectives: declaredDirectives,\n            exportedDirectives: exportedDirectives,\n            declaredPipes: declaredPipes,\n            exportedPipes: exportedPipes,\n            importedModules: importedModules,\n            exportedModules: exportedModules,\n            transitiveModule: transitiveModule,\n            id: meta.id || null,\n        });\n        entryComponents.forEach(function (id) { return transitiveModule.addEntryComponent(id); });\n        providers.forEach(function (provider) { return transitiveModule.addProvider(provider, compileMeta.type); });\n        transitiveModule.addModule(compileMeta.type);\n        this._ngModuleCache.set(moduleType, compileMeta);\n        return compileMeta;\n    };\n    CompileMetadataResolver.prototype._checkSelfImport = function (moduleType, importedModuleType) {\n        if (moduleType === importedModuleType) {\n            this._reportError(syntaxError(\"'\" + stringifyType(moduleType) + \"' module can't import itself\"), moduleType);\n            return true;\n        }\n        return false;\n    };\n    CompileMetadataResolver.prototype._getTypeDescriptor = function (type) {\n        if (isValidType(type)) {\n            if (this.isDirective(type)) {\n                return 'directive';\n            }\n            if (this.isPipe(type)) {\n                return 'pipe';\n            }\n            if (this.isNgModule(type)) {\n                return 'module';\n            }\n        }\n        if (type.provide) {\n            return 'provider';\n        }\n        return 'value';\n    };\n    CompileMetadataResolver.prototype._addTypeToModule = function (type, moduleType) {\n        var oldModule = this._ngModuleOfTypes.get(type);\n        if (oldModule && oldModule !== moduleType) {\n            this._reportError(syntaxError(\"Type \" + stringifyType(type) + \" is part of the declarations of 2 modules: \" + stringifyType(oldModule) + \" and \" + stringifyType(moduleType) + \"! \" +\n                (\"Please consider moving \" + stringifyType(type) + \" to a higher module that imports \" + stringifyType(oldModule) + \" and \" + stringifyType(moduleType) + \". \") +\n                (\"You can also create a new NgModule that exports and includes \" + stringifyType(type) + \" then import that NgModule in \" + stringifyType(oldModule) + \" and \" + stringifyType(moduleType) + \".\")), moduleType);\n            return;\n        }\n        this._ngModuleOfTypes.set(type, moduleType);\n    };\n    CompileMetadataResolver.prototype._getTransitiveNgModuleMetadata = function (importedModules, exportedModules) {\n        // collect `providers` / `entryComponents` from all imported and all exported modules\n        var result = new TransitiveCompileNgModuleMetadata();\n        var modulesByToken = new Map();\n        importedModules.concat(exportedModules).forEach(function (modSummary) {\n            modSummary.modules.forEach(function (mod) { return result.addModule(mod); });\n            modSummary.entryComponents.forEach(function (comp) { return result.addEntryComponent(comp); });\n            var addedTokens = new Set();\n            modSummary.providers.forEach(function (entry) {\n                var tokenRef = tokenReference(entry.provider.token);\n                var prevModules = modulesByToken.get(tokenRef);\n                if (!prevModules) {\n                    prevModules = new Set();\n                    modulesByToken.set(tokenRef, prevModules);\n                }\n                var moduleRef = entry.module.reference;\n                // Note: the providers of one module may still contain multiple providers\n                // per token (e.g. for multi providers), and we need to preserve these.\n                if (addedTokens.has(tokenRef) || !prevModules.has(moduleRef)) {\n                    prevModules.add(moduleRef);\n                    addedTokens.add(tokenRef);\n                    result.addProvider(entry.provider, entry.module);\n                }\n            });\n        });\n        exportedModules.forEach(function (modSummary) {\n            modSummary.exportedDirectives.forEach(function (id) { return result.addExportedDirective(id); });\n            modSummary.exportedPipes.forEach(function (id) { return result.addExportedPipe(id); });\n        });\n        importedModules.forEach(function (modSummary) {\n            modSummary.exportedDirectives.forEach(function (id) { return result.addDirective(id); });\n            modSummary.exportedPipes.forEach(function (id) { return result.addPipe(id); });\n        });\n        return result;\n    };\n    CompileMetadataResolver.prototype._getIdentifierMetadata = function (type) {\n        type = resolveForwardRef(type);\n        return { reference: type };\n    };\n    CompileMetadataResolver.prototype.isInjectable = function (type) {\n        var annotations = this._reflector.tryAnnotations(type);\n        return annotations.some(function (ann) { return createInjectable.isTypeOf(ann); });\n    };\n    CompileMetadataResolver.prototype.getInjectableSummary = function (type) {\n        return {\n            summaryKind: CompileSummaryKind.Injectable,\n            type: this._getTypeMetadata(type, null, false)\n        };\n    };\n    CompileMetadataResolver.prototype.getInjectableMetadata = function (type, dependencies, throwOnUnknownDeps) {\n        if (dependencies === void 0) { dependencies = null; }\n        if (throwOnUnknownDeps === void 0) { throwOnUnknownDeps = true; }\n        var typeSummary = this._loadSummary(type, CompileSummaryKind.Injectable);\n        var typeMetadata = typeSummary ?\n            typeSummary.type :\n            this._getTypeMetadata(type, dependencies, throwOnUnknownDeps);\n        var annotations = this._reflector.annotations(type).filter(function (ann) { return createInjectable.isTypeOf(ann); });\n        if (annotations.length === 0) {\n            return null;\n        }\n        var meta = annotations[annotations.length - 1];\n        return {\n            symbol: type,\n            type: typeMetadata,\n            providedIn: meta.providedIn,\n            useValue: meta.useValue,\n            useClass: meta.useClass,\n            useExisting: meta.useExisting,\n            useFactory: meta.useFactory,\n            deps: meta.deps,\n        };\n    };\n    CompileMetadataResolver.prototype._getTypeMetadata = function (type, dependencies, throwOnUnknownDeps) {\n        if (dependencies === void 0) { dependencies = null; }\n        if (throwOnUnknownDeps === void 0) { throwOnUnknownDeps = true; }\n        var identifier = this._getIdentifierMetadata(type);\n        return {\n            reference: identifier.reference,\n            diDeps: this._getDependenciesMetadata(identifier.reference, dependencies, throwOnUnknownDeps),\n            lifecycleHooks: getAllLifecycleHooks(this._reflector, identifier.reference),\n        };\n    };\n    CompileMetadataResolver.prototype._getFactoryMetadata = function (factory, dependencies) {\n        if (dependencies === void 0) { dependencies = null; }\n        factory = resolveForwardRef(factory);\n        return { reference: factory, diDeps: this._getDependenciesMetadata(factory, dependencies) };\n    };\n    /**\n     * Gets the metadata for the given pipe.\n     * This assumes `loadNgModuleDirectiveAndPipeMetadata` has been called first.\n     */\n    CompileMetadataResolver.prototype.getPipeMetadata = function (pipeType) {\n        var pipeMeta = this._pipeCache.get(pipeType);\n        if (!pipeMeta) {\n            this._reportError(syntaxError(\"Illegal state: getPipeMetadata can only be called after loadNgModuleDirectiveAndPipeMetadata for a module that declares it. Pipe \" + stringifyType(pipeType) + \".\"), pipeType);\n        }\n        return pipeMeta || null;\n    };\n    CompileMetadataResolver.prototype.getPipeSummary = function (pipeType) {\n        var pipeSummary = this._loadSummary(pipeType, CompileSummaryKind.Pipe);\n        if (!pipeSummary) {\n            this._reportError(syntaxError(\"Illegal state: Could not load the summary for pipe \" + stringifyType(pipeType) + \".\"), pipeType);\n        }\n        return pipeSummary;\n    };\n    CompileMetadataResolver.prototype.getOrLoadPipeMetadata = function (pipeType) {\n        var pipeMeta = this._pipeCache.get(pipeType);\n        if (!pipeMeta) {\n            pipeMeta = this._loadPipeMetadata(pipeType);\n        }\n        return pipeMeta;\n    };\n    CompileMetadataResolver.prototype._loadPipeMetadata = function (pipeType) {\n        pipeType = resolveForwardRef(pipeType);\n        var pipeAnnotation = this._pipeResolver.resolve(pipeType);\n        var pipeMeta = new CompilePipeMetadata({\n            type: this._getTypeMetadata(pipeType),\n            name: pipeAnnotation.name,\n            pure: !!pipeAnnotation.pure\n        });\n        this._pipeCache.set(pipeType, pipeMeta);\n        this._summaryCache.set(pipeType, pipeMeta.toSummary());\n        return pipeMeta;\n    };\n    CompileMetadataResolver.prototype._getDependenciesMetadata = function (typeOrFunc, dependencies, throwOnUnknownDeps) {\n        var _this = this;\n        if (throwOnUnknownDeps === void 0) { throwOnUnknownDeps = true; }\n        var hasUnknownDeps = false;\n        var params = dependencies || this._reflector.parameters(typeOrFunc) || [];\n        var dependenciesMetadata = params.map(function (param) {\n            var isAttribute = false;\n            var isHost = false;\n            var isSelf = false;\n            var isSkipSelf = false;\n            var isOptional = false;\n            var token = null;\n            if (Array.isArray(param)) {\n                param.forEach(function (paramEntry) {\n                    if (createHost.isTypeOf(paramEntry)) {\n                        isHost = true;\n                    }\n                    else if (createSelf.isTypeOf(paramEntry)) {\n                        isSelf = true;\n                    }\n                    else if (createSkipSelf.isTypeOf(paramEntry)) {\n                        isSkipSelf = true;\n                    }\n                    else if (createOptional.isTypeOf(paramEntry)) {\n                        isOptional = true;\n                    }\n                    else if (createAttribute.isTypeOf(paramEntry)) {\n                        isAttribute = true;\n                        token = paramEntry.attributeName;\n                    }\n                    else if (createInject.isTypeOf(paramEntry)) {\n                        token = paramEntry.token;\n                    }\n                    else if (createInjectionToken.isTypeOf(paramEntry) || paramEntry instanceof StaticSymbol) {\n                        token = paramEntry;\n                    }\n                    else if (isValidType(paramEntry) && token == null) {\n                        token = paramEntry;\n                    }\n                });\n            }\n            else {\n                token = param;\n            }\n            if (token == null) {\n                hasUnknownDeps = true;\n                return null;\n            }\n            return {\n                isAttribute: isAttribute,\n                isHost: isHost,\n                isSelf: isSelf,\n                isSkipSelf: isSkipSelf,\n                isOptional: isOptional,\n                token: _this._getTokenMetadata(token)\n            };\n        });\n        if (hasUnknownDeps) {\n            var depsTokens = dependenciesMetadata.map(function (dep) { return dep ? stringifyType(dep.token) : '?'; }).join(', ');\n            var message = \"Can't resolve all parameters for \" + stringifyType(typeOrFunc) + \": (\" + depsTokens + \").\";\n            if (throwOnUnknownDeps || this._config.strictInjectionParameters) {\n                this._reportError(syntaxError(message), typeOrFunc);\n            }\n            else {\n                this._console.warn(\"Warning: \" + message + \" This will become an error in Angular v6.x\");\n            }\n        }\n        return dependenciesMetadata;\n    };\n    CompileMetadataResolver.prototype._getTokenMetadata = function (token) {\n        token = resolveForwardRef(token);\n        var compileToken;\n        if (typeof token === 'string') {\n            compileToken = { value: token };\n        }\n        else {\n            compileToken = { identifier: { reference: token } };\n        }\n        return compileToken;\n    };\n    CompileMetadataResolver.prototype._getProvidersMetadata = function (providers, targetEntryComponents, debugInfo, compileProviders, type) {\n        var _this = this;\n        if (compileProviders === void 0) { compileProviders = []; }\n        providers.forEach(function (provider, providerIdx) {\n            if (Array.isArray(provider)) {\n                _this._getProvidersMetadata(provider, targetEntryComponents, debugInfo, compileProviders);\n            }\n            else {\n                provider = resolveForwardRef(provider);\n                var providerMeta = undefined;\n                if (provider && typeof provider === 'object' && provider.hasOwnProperty('provide')) {\n                    _this._validateProvider(provider);\n                    providerMeta = new ProviderMeta(provider.provide, provider);\n                }\n                else if (isValidType(provider)) {\n                    providerMeta = new ProviderMeta(provider, { useClass: provider });\n                }\n                else if (provider === void 0) {\n                    _this._reportError(syntaxError(\"Encountered undefined provider! Usually this means you have a circular dependencies (might be caused by using 'barrel' index.ts files.\"));\n                    return;\n                }\n                else {\n                    var providersInfo = providers.reduce(function (soFar, seenProvider, seenProviderIdx) {\n                        if (seenProviderIdx < providerIdx) {\n                            soFar.push(\"\" + stringifyType(seenProvider));\n                        }\n                        else if (seenProviderIdx == providerIdx) {\n                            soFar.push(\"?\" + stringifyType(seenProvider) + \"?\");\n                        }\n                        else if (seenProviderIdx == providerIdx + 1) {\n                            soFar.push('...');\n                        }\n                        return soFar;\n                    }, [])\n                        .join(', ');\n                    _this._reportError(syntaxError(\"Invalid \" + (debugInfo ? debugInfo : 'provider') + \" - only instances of Provider and Type are allowed, got: [\" + providersInfo + \"]\"), type);\n                    return;\n                }\n                if (providerMeta.token ===\n                    _this._reflector.resolveExternalReference(Identifiers.ANALYZE_FOR_ENTRY_COMPONENTS)) {\n                    targetEntryComponents.push.apply(targetEntryComponents, __spread(_this._getEntryComponentsFromProvider(providerMeta, type)));\n                }\n                else {\n                    compileProviders.push(_this.getProviderMetadata(providerMeta));\n                }\n            }\n        });\n        return compileProviders;\n    };\n    CompileMetadataResolver.prototype._validateProvider = function (provider) {\n        if (provider.hasOwnProperty('useClass') && provider.useClass == null) {\n            this._reportError(syntaxError(\"Invalid provider for \" + stringifyType(provider.provide) + \". useClass cannot be \" + provider.useClass + \".\\n           Usually it happens when:\\n           1. There's a circular dependency (might be caused by using index.ts (barrel) files).\\n           2. Class was used before it was declared. Use forwardRef in this case.\"));\n        }\n    };\n    CompileMetadataResolver.prototype._getEntryComponentsFromProvider = function (provider, type) {\n        var _this = this;\n        var components = [];\n        var collectedIdentifiers = [];\n        if (provider.useFactory || provider.useExisting || provider.useClass) {\n            this._reportError(syntaxError(\"The ANALYZE_FOR_ENTRY_COMPONENTS token only supports useValue!\"), type);\n            return [];\n        }\n        if (!provider.multi) {\n            this._reportError(syntaxError(\"The ANALYZE_FOR_ENTRY_COMPONENTS token only supports 'multi = true'!\"), type);\n            return [];\n        }\n        extractIdentifiers(provider.useValue, collectedIdentifiers);\n        collectedIdentifiers.forEach(function (identifier) {\n            var entry = _this._getEntryComponentMetadata(identifier.reference, false);\n            if (entry) {\n                components.push(entry);\n            }\n        });\n        return components;\n    };\n    CompileMetadataResolver.prototype._getEntryComponentMetadata = function (dirType, throwIfNotFound) {\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        var dirMeta = this.getNonNormalizedDirectiveMetadata(dirType);\n        if (dirMeta && dirMeta.metadata.isComponent) {\n            return { componentType: dirType, componentFactory: dirMeta.metadata.componentFactory };\n        }\n        var dirSummary = this._loadSummary(dirType, CompileSummaryKind.Directive);\n        if (dirSummary && dirSummary.isComponent) {\n            return { componentType: dirType, componentFactory: dirSummary.componentFactory };\n        }\n        if (throwIfNotFound) {\n            throw syntaxError(dirType.name + \" cannot be used as an entry component.\");\n        }\n        return null;\n    };\n    CompileMetadataResolver.prototype._getInjectableTypeMetadata = function (type, dependencies) {\n        if (dependencies === void 0) { dependencies = null; }\n        var typeSummary = this._loadSummary(type, CompileSummaryKind.Injectable);\n        if (typeSummary) {\n            return typeSummary.type;\n        }\n        return this._getTypeMetadata(type, dependencies);\n    };\n    CompileMetadataResolver.prototype.getProviderMetadata = function (provider) {\n        var compileDeps = undefined;\n        var compileTypeMetadata = null;\n        var compileFactoryMetadata = null;\n        var token = this._getTokenMetadata(provider.token);\n        if (provider.useClass) {\n            compileTypeMetadata =\n                this._getInjectableTypeMetadata(provider.useClass, provider.dependencies);\n            compileDeps = compileTypeMetadata.diDeps;\n            if (provider.token === provider.useClass) {\n                // use the compileTypeMetadata as it contains information about lifecycleHooks...\n                token = { identifier: compileTypeMetadata };\n            }\n        }\n        else if (provider.useFactory) {\n            compileFactoryMetadata = this._getFactoryMetadata(provider.useFactory, provider.dependencies);\n            compileDeps = compileFactoryMetadata.diDeps;\n        }\n        return {\n            token: token,\n            useClass: compileTypeMetadata,\n            useValue: provider.useValue,\n            useFactory: compileFactoryMetadata,\n            useExisting: provider.useExisting ? this._getTokenMetadata(provider.useExisting) : undefined,\n            deps: compileDeps,\n            multi: provider.multi\n        };\n    };\n    CompileMetadataResolver.prototype._getQueriesMetadata = function (queries, isViewQuery, directiveType) {\n        var _this = this;\n        var res = [];\n        Object.keys(queries).forEach(function (propertyName) {\n            var query = queries[propertyName];\n            if (query.isViewQuery === isViewQuery) {\n                res.push(_this._getQueryMetadata(query, propertyName, directiveType));\n            }\n        });\n        return res;\n    };\n    CompileMetadataResolver.prototype._queryVarBindings = function (selector) { return selector.split(/\\s*,\\s*/); };\n    CompileMetadataResolver.prototype._getQueryMetadata = function (q, propertyName, typeOrFunc) {\n        var _this = this;\n        var selectors;\n        if (typeof q.selector === 'string') {\n            selectors =\n                this._queryVarBindings(q.selector).map(function (varName) { return _this._getTokenMetadata(varName); });\n        }\n        else {\n            if (!q.selector) {\n                this._reportError(syntaxError(\"Can't construct a query for the property \\\"\" + propertyName + \"\\\" of \\\"\" + stringifyType(typeOrFunc) + \"\\\" since the query selector wasn't defined.\"), typeOrFunc);\n                selectors = [];\n            }\n            else {\n                selectors = [this._getTokenMetadata(q.selector)];\n            }\n        }\n        return {\n            selectors: selectors,\n            first: q.first,\n            descendants: q.descendants, propertyName: propertyName,\n            read: q.read ? this._getTokenMetadata(q.read) : null\n        };\n    };\n    CompileMetadataResolver.prototype._reportError = function (error$$1, type, otherType) {\n        if (this._errorCollector) {\n            this._errorCollector(error$$1, type);\n            if (otherType) {\n                this._errorCollector(error$$1, otherType);\n            }\n        }\n        else {\n            throw error$$1;\n        }\n    };\n    return CompileMetadataResolver;\n}());\nfunction flattenArray(tree, out) {\n    if (out === void 0) { out = []; }\n    if (tree) {\n        for (var i = 0; i < tree.length; i++) {\n            var item = resolveForwardRef(tree[i]);\n            if (Array.isArray(item)) {\n                flattenArray(item, out);\n            }\n            else {\n                out.push(item);\n            }\n        }\n    }\n    return out;\n}\nfunction dedupeArray(array) {\n    if (array) {\n        return Array.from(new Set(array));\n    }\n    return [];\n}\nfunction flattenAndDedupeArray(tree) {\n    return dedupeArray(flattenArray(tree));\n}\nfunction isValidType(value) {\n    return (value instanceof StaticSymbol) || (value instanceof Type);\n}\nfunction extractIdentifiers(value, targetIdentifiers) {\n    visitValue(value, new _CompileValueConverter(), targetIdentifiers);\n}\nvar _CompileValueConverter = /** @class */ (function (_super) {\n    __extends(_CompileValueConverter, _super);\n    function _CompileValueConverter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    _CompileValueConverter.prototype.visitOther = function (value, targetIdentifiers) {\n        targetIdentifiers.push({ reference: value });\n    };\n    return _CompileValueConverter;\n}(ValueTransformer));\nfunction stringifyType(type) {\n    if (type instanceof StaticSymbol) {\n        return type.name + \" in \" + type.filePath;\n    }\n    else {\n        return stringify(type);\n    }\n}\n/**\n * Indicates that a component is still being loaded in a synchronous compile.\n */\nfunction componentStillLoadingError(compType) {\n    var error$$1 = Error(\"Can't compile synchronously as \" + stringify(compType) + \" is still being loaded!\");\n    error$$1[ERROR_COMPONENT_TYPE] = compType;\n    return error$$1;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ProviderError = /** @class */ (function (_super) {\n    __extends(ProviderError, _super);\n    function ProviderError(message, span) {\n        return _super.call(this, span, message) || this;\n    }\n    return ProviderError;\n}(ParseError));\nvar ProviderViewContext = /** @class */ (function () {\n    function ProviderViewContext(reflector, component) {\n        var _this = this;\n        this.reflector = reflector;\n        this.component = component;\n        this.errors = [];\n        this.viewQueries = _getViewQueries(component);\n        this.viewProviders = new Map();\n        component.viewProviders.forEach(function (provider) {\n            if (_this.viewProviders.get(tokenReference(provider.token)) == null) {\n                _this.viewProviders.set(tokenReference(provider.token), true);\n            }\n        });\n    }\n    return ProviderViewContext;\n}());\nvar ProviderElementContext = /** @class */ (function () {\n    function ProviderElementContext(viewContext, _parent, _isViewRoot, _directiveAsts, attrs, refs, isTemplate, contentQueryStartId, _sourceSpan) {\n        var _this = this;\n        this.viewContext = viewContext;\n        this._parent = _parent;\n        this._isViewRoot = _isViewRoot;\n        this._directiveAsts = _directiveAsts;\n        this._sourceSpan = _sourceSpan;\n        this._transformedProviders = new Map();\n        this._seenProviders = new Map();\n        this._queriedTokens = new Map();\n        this.transformedHasViewContainer = false;\n        this._attrs = {};\n        attrs.forEach(function (attrAst) { return _this._attrs[attrAst.name] = attrAst.value; });\n        var directivesMeta = _directiveAsts.map(function (directiveAst) { return directiveAst.directive; });\n        this._allProviders =\n            _resolveProvidersFromDirectives(directivesMeta, _sourceSpan, viewContext.errors);\n        this._contentQueries = _getContentQueries(contentQueryStartId, directivesMeta);\n        Array.from(this._allProviders.values()).forEach(function (provider) {\n            _this._addQueryReadsTo(provider.token, provider.token, _this._queriedTokens);\n        });\n        if (isTemplate) {\n            var templateRefId = createTokenForExternalReference(this.viewContext.reflector, Identifiers.TemplateRef);\n            this._addQueryReadsTo(templateRefId, templateRefId, this._queriedTokens);\n        }\n        refs.forEach(function (refAst) {\n            var defaultQueryValue = refAst.value ||\n                createTokenForExternalReference(_this.viewContext.reflector, Identifiers.ElementRef);\n            _this._addQueryReadsTo({ value: refAst.name }, defaultQueryValue, _this._queriedTokens);\n        });\n        if (this._queriedTokens.get(this.viewContext.reflector.resolveExternalReference(Identifiers.ViewContainerRef))) {\n            this.transformedHasViewContainer = true;\n        }\n        // create the providers that we know are eager first\n        Array.from(this._allProviders.values()).forEach(function (provider) {\n            var eager = provider.eager || _this._queriedTokens.get(tokenReference(provider.token));\n            if (eager) {\n                _this._getOrCreateLocalProvider(provider.providerType, provider.token, true);\n            }\n        });\n    }\n    ProviderElementContext.prototype.afterElement = function () {\n        var _this = this;\n        // collect lazy providers\n        Array.from(this._allProviders.values()).forEach(function (provider) {\n            _this._getOrCreateLocalProvider(provider.providerType, provider.token, false);\n        });\n    };\n    Object.defineProperty(ProviderElementContext.prototype, \"transformProviders\", {\n        get: function () {\n            // Note: Maps keep their insertion order.\n            var lazyProviders = [];\n            var eagerProviders = [];\n            this._transformedProviders.forEach(function (provider) {\n                if (provider.eager) {\n                    eagerProviders.push(provider);\n                }\n                else {\n                    lazyProviders.push(provider);\n                }\n            });\n            return lazyProviders.concat(eagerProviders);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ProviderElementContext.prototype, \"transformedDirectiveAsts\", {\n        get: function () {\n            var sortedProviderTypes = this.transformProviders.map(function (provider) { return provider.token.identifier; });\n            var sortedDirectives = this._directiveAsts.slice();\n            sortedDirectives.sort(function (dir1, dir2) { return sortedProviderTypes.indexOf(dir1.directive.type) -\n                sortedProviderTypes.indexOf(dir2.directive.type); });\n            return sortedDirectives;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ProviderElementContext.prototype, \"queryMatches\", {\n        get: function () {\n            var allMatches = [];\n            this._queriedTokens.forEach(function (matches) { allMatches.push.apply(allMatches, __spread(matches)); });\n            return allMatches;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ProviderElementContext.prototype._addQueryReadsTo = function (token, defaultValue, queryReadTokens) {\n        this._getQueriesFor(token).forEach(function (query) {\n            var queryValue = query.meta.read || defaultValue;\n            var tokenRef = tokenReference(queryValue);\n            var queryMatches = queryReadTokens.get(tokenRef);\n            if (!queryMatches) {\n                queryMatches = [];\n                queryReadTokens.set(tokenRef, queryMatches);\n            }\n            queryMatches.push({ queryId: query.queryId, value: queryValue });\n        });\n    };\n    ProviderElementContext.prototype._getQueriesFor = function (token) {\n        var result = [];\n        var currentEl = this;\n        var distance = 0;\n        var queries;\n        while (currentEl !== null) {\n            queries = currentEl._contentQueries.get(tokenReference(token));\n            if (queries) {\n                result.push.apply(result, __spread(queries.filter(function (query) { return query.meta.descendants || distance <= 1; })));\n            }\n            if (currentEl._directiveAsts.length > 0) {\n                distance++;\n            }\n            currentEl = currentEl._parent;\n        }\n        queries = this.viewContext.viewQueries.get(tokenReference(token));\n        if (queries) {\n            result.push.apply(result, __spread(queries));\n        }\n        return result;\n    };\n    ProviderElementContext.prototype._getOrCreateLocalProvider = function (requestingProviderType, token, eager) {\n        var _this = this;\n        var resolvedProvider = this._allProviders.get(tokenReference(token));\n        if (!resolvedProvider || ((requestingProviderType === ProviderAstType.Directive ||\n            requestingProviderType === ProviderAstType.PublicService) &&\n            resolvedProvider.providerType === ProviderAstType.PrivateService) ||\n            ((requestingProviderType === ProviderAstType.PrivateService ||\n                requestingProviderType === ProviderAstType.PublicService) &&\n                resolvedProvider.providerType === ProviderAstType.Builtin)) {\n            return null;\n        }\n        var transformedProviderAst = this._transformedProviders.get(tokenReference(token));\n        if (transformedProviderAst) {\n            return transformedProviderAst;\n        }\n        if (this._seenProviders.get(tokenReference(token)) != null) {\n            this.viewContext.errors.push(new ProviderError(\"Cannot instantiate cyclic dependency! \" + tokenName(token), this._sourceSpan));\n            return null;\n        }\n        this._seenProviders.set(tokenReference(token), true);\n        var transformedProviders = resolvedProvider.providers.map(function (provider) {\n            var transformedUseValue = provider.useValue;\n            var transformedUseExisting = provider.useExisting;\n            var transformedDeps = undefined;\n            if (provider.useExisting != null) {\n                var existingDiDep = _this._getDependency(resolvedProvider.providerType, { token: provider.useExisting }, eager);\n                if (existingDiDep.token != null) {\n                    transformedUseExisting = existingDiDep.token;\n                }\n                else {\n                    transformedUseExisting = null;\n                    transformedUseValue = existingDiDep.value;\n                }\n            }\n            else if (provider.useFactory) {\n                var deps = provider.deps || provider.useFactory.diDeps;\n                transformedDeps =\n                    deps.map(function (dep) { return _this._getDependency(resolvedProvider.providerType, dep, eager); });\n            }\n            else if (provider.useClass) {\n                var deps = provider.deps || provider.useClass.diDeps;\n                transformedDeps =\n                    deps.map(function (dep) { return _this._getDependency(resolvedProvider.providerType, dep, eager); });\n            }\n            return _transformProvider(provider, {\n                useExisting: transformedUseExisting,\n                useValue: transformedUseValue,\n                deps: transformedDeps\n            });\n        });\n        transformedProviderAst =\n            _transformProviderAst(resolvedProvider, { eager: eager, providers: transformedProviders });\n        this._transformedProviders.set(tokenReference(token), transformedProviderAst);\n        return transformedProviderAst;\n    };\n    ProviderElementContext.prototype._getLocalDependency = function (requestingProviderType, dep, eager) {\n        if (eager === void 0) { eager = false; }\n        if (dep.isAttribute) {\n            var attrValue = this._attrs[dep.token.value];\n            return { isValue: true, value: attrValue == null ? null : attrValue };\n        }\n        if (dep.token != null) {\n            // access builtints\n            if ((requestingProviderType === ProviderAstType.Directive ||\n                requestingProviderType === ProviderAstType.Component)) {\n                if (tokenReference(dep.token) ===\n                    this.viewContext.reflector.resolveExternalReference(Identifiers.Renderer) ||\n                    tokenReference(dep.token) ===\n                        this.viewContext.reflector.resolveExternalReference(Identifiers.ElementRef) ||\n                    tokenReference(dep.token) ===\n                        this.viewContext.reflector.resolveExternalReference(Identifiers.ChangeDetectorRef) ||\n                    tokenReference(dep.token) ===\n                        this.viewContext.reflector.resolveExternalReference(Identifiers.TemplateRef)) {\n                    return dep;\n                }\n                if (tokenReference(dep.token) ===\n                    this.viewContext.reflector.resolveExternalReference(Identifiers.ViewContainerRef)) {\n                    this.transformedHasViewContainer = true;\n                }\n            }\n            // access the injector\n            if (tokenReference(dep.token) ===\n                this.viewContext.reflector.resolveExternalReference(Identifiers.Injector)) {\n                return dep;\n            }\n            // access providers\n            if (this._getOrCreateLocalProvider(requestingProviderType, dep.token, eager) != null) {\n                return dep;\n            }\n        }\n        return null;\n    };\n    ProviderElementContext.prototype._getDependency = function (requestingProviderType, dep, eager) {\n        if (eager === void 0) { eager = false; }\n        var currElement = this;\n        var currEager = eager;\n        var result = null;\n        if (!dep.isSkipSelf) {\n            result = this._getLocalDependency(requestingProviderType, dep, eager);\n        }\n        if (dep.isSelf) {\n            if (!result && dep.isOptional) {\n                result = { isValue: true, value: null };\n            }\n        }\n        else {\n            // check parent elements\n            while (!result && currElement._parent) {\n                var prevElement = currElement;\n                currElement = currElement._parent;\n                if (prevElement._isViewRoot) {\n                    currEager = false;\n                }\n                result = currElement._getLocalDependency(ProviderAstType.PublicService, dep, currEager);\n            }\n            // check @Host restriction\n            if (!result) {\n                if (!dep.isHost || this.viewContext.component.isHost ||\n                    this.viewContext.component.type.reference === tokenReference(dep.token) ||\n                    this.viewContext.viewProviders.get(tokenReference(dep.token)) != null) {\n                    result = dep;\n                }\n                else {\n                    result = dep.isOptional ? { isValue: true, value: null } : null;\n                }\n            }\n        }\n        if (!result) {\n            this.viewContext.errors.push(new ProviderError(\"No provider for \" + tokenName(dep.token), this._sourceSpan));\n        }\n        return result;\n    };\n    return ProviderElementContext;\n}());\nfunction _transformProvider(provider, _a) {\n    var useExisting = _a.useExisting, useValue = _a.useValue, deps = _a.deps;\n    return {\n        token: provider.token,\n        useClass: provider.useClass,\n        useExisting: useExisting,\n        useFactory: provider.useFactory,\n        useValue: useValue,\n        deps: deps,\n        multi: provider.multi\n    };\n}\nfunction _transformProviderAst(provider, _a) {\n    var eager = _a.eager, providers = _a.providers;\n    return new ProviderAst(provider.token, provider.multiProvider, provider.eager || eager, providers, provider.providerType, provider.lifecycleHooks, provider.sourceSpan, provider.isModule);\n}\nfunction _resolveProvidersFromDirectives(directives, sourceSpan, targetErrors) {\n    var providersByToken = new Map();\n    directives.forEach(function (directive) {\n        var dirProvider = { token: { identifier: directive.type }, useClass: directive.type };\n        _resolveProviders([dirProvider], directive.isComponent ? ProviderAstType.Component : ProviderAstType.Directive, true, sourceSpan, targetErrors, providersByToken, /* isModule */ false);\n    });\n    // Note: directives need to be able to overwrite providers of a component!\n    var directivesWithComponentFirst = directives.filter(function (dir) { return dir.isComponent; }).concat(directives.filter(function (dir) { return !dir.isComponent; }));\n    directivesWithComponentFirst.forEach(function (directive) {\n        _resolveProviders(directive.providers, ProviderAstType.PublicService, false, sourceSpan, targetErrors, providersByToken, /* isModule */ false);\n        _resolveProviders(directive.viewProviders, ProviderAstType.PrivateService, false, sourceSpan, targetErrors, providersByToken, /* isModule */ false);\n    });\n    return providersByToken;\n}\nfunction _resolveProviders(providers, providerType, eager, sourceSpan, targetErrors, targetProvidersByToken, isModule) {\n    providers.forEach(function (provider) {\n        var resolvedProvider = targetProvidersByToken.get(tokenReference(provider.token));\n        if (resolvedProvider != null && !!resolvedProvider.multiProvider !== !!provider.multi) {\n            targetErrors.push(new ProviderError(\"Mixing multi and non multi provider is not possible for token \" + tokenName(resolvedProvider.token), sourceSpan));\n        }\n        if (!resolvedProvider) {\n            var lifecycleHooks = provider.token.identifier &&\n                provider.token.identifier.lifecycleHooks ?\n                provider.token.identifier.lifecycleHooks :\n                [];\n            var isUseValue = !(provider.useClass || provider.useExisting || provider.useFactory);\n            resolvedProvider = new ProviderAst(provider.token, !!provider.multi, eager || isUseValue, [provider], providerType, lifecycleHooks, sourceSpan, isModule);\n            targetProvidersByToken.set(tokenReference(provider.token), resolvedProvider);\n        }\n        else {\n            if (!provider.multi) {\n                resolvedProvider.providers.length = 0;\n            }\n            resolvedProvider.providers.push(provider);\n        }\n    });\n}\nfunction _getViewQueries(component) {\n    // Note: queries start with id 1 so we can use the number in a Bloom filter!\n    var viewQueryId = 1;\n    var viewQueries = new Map();\n    if (component.viewQueries) {\n        component.viewQueries.forEach(function (query) { return _addQueryToTokenMap(viewQueries, { meta: query, queryId: viewQueryId++ }); });\n    }\n    return viewQueries;\n}\nfunction _getContentQueries(contentQueryStartId, directives) {\n    var contentQueryId = contentQueryStartId;\n    var contentQueries = new Map();\n    directives.forEach(function (directive, directiveIndex) {\n        if (directive.queries) {\n            directive.queries.forEach(function (query) { return _addQueryToTokenMap(contentQueries, { meta: query, queryId: contentQueryId++ }); });\n        }\n    });\n    return contentQueries;\n}\nfunction _addQueryToTokenMap(map, query) {\n    query.meta.selectors.forEach(function (token) {\n        var entry = map.get(tokenReference(token));\n        if (!entry) {\n            entry = [];\n            map.set(tokenReference(token), entry);\n        }\n        entry.push(query);\n    });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar LOG_VAR = variable('_l');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Resolves types to {@link NgModule}.\n */\nvar NgModuleResolver = /** @class */ (function () {\n    function NgModuleResolver(_reflector) {\n        this._reflector = _reflector;\n    }\n    NgModuleResolver.prototype.isNgModule = function (type) { return this._reflector.annotations(type).some(createNgModule.isTypeOf); };\n    NgModuleResolver.prototype.resolve = function (type, throwIfNotFound) {\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        var ngModuleMeta = findLast(this._reflector.annotations(type), createNgModule.isTypeOf);\n        if (ngModuleMeta) {\n            return ngModuleMeta;\n        }\n        else {\n            if (throwIfNotFound) {\n                throw new Error(\"No NgModule metadata found for '\" + stringify(type) + \"'.\");\n            }\n            return null;\n        }\n    };\n    return NgModuleResolver;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit\nvar VERSION$1 = 3;\nvar JS_B64_PREFIX = '# sourceMappingURL=data:application/json;base64,';\nvar SourceMapGenerator = /** @class */ (function () {\n    function SourceMapGenerator(file) {\n        if (file === void 0) { file = null; }\n        this.file = file;\n        this.sourcesContent = new Map();\n        this.lines = [];\n        this.lastCol0 = 0;\n        this.hasMappings = false;\n    }\n    // The content is `null` when the content is expected to be loaded using the URL\n    SourceMapGenerator.prototype.addSource = function (url, content) {\n        if (content === void 0) { content = null; }\n        if (!this.sourcesContent.has(url)) {\n            this.sourcesContent.set(url, content);\n        }\n        return this;\n    };\n    SourceMapGenerator.prototype.addLine = function () {\n        this.lines.push([]);\n        this.lastCol0 = 0;\n        return this;\n    };\n    SourceMapGenerator.prototype.addMapping = function (col0, sourceUrl, sourceLine0, sourceCol0) {\n        if (!this.currentLine) {\n            throw new Error(\"A line must be added before mappings can be added\");\n        }\n        if (sourceUrl != null && !this.sourcesContent.has(sourceUrl)) {\n            throw new Error(\"Unknown source file \\\"\" + sourceUrl + \"\\\"\");\n        }\n        if (col0 == null) {\n            throw new Error(\"The column in the generated code must be provided\");\n        }\n        if (col0 < this.lastCol0) {\n            throw new Error(\"Mapping should be added in output order\");\n        }\n        if (sourceUrl && (sourceLine0 == null || sourceCol0 == null)) {\n            throw new Error(\"The source location must be provided when a source url is provided\");\n        }\n        this.hasMappings = true;\n        this.lastCol0 = col0;\n        this.currentLine.push({ col0: col0, sourceUrl: sourceUrl, sourceLine0: sourceLine0, sourceCol0: sourceCol0 });\n        return this;\n    };\n    Object.defineProperty(SourceMapGenerator.prototype, \"currentLine\", {\n        get: function () { return this.lines.slice(-1)[0]; },\n        enumerable: true,\n        configurable: true\n    });\n    SourceMapGenerator.prototype.toJSON = function () {\n        var _this = this;\n        if (!this.hasMappings) {\n            return null;\n        }\n        var sourcesIndex = new Map();\n        var sources = [];\n        var sourcesContent = [];\n        Array.from(this.sourcesContent.keys()).forEach(function (url, i) {\n            sourcesIndex.set(url, i);\n            sources.push(url);\n            sourcesContent.push(_this.sourcesContent.get(url) || null);\n        });\n        var mappings = '';\n        var lastCol0 = 0;\n        var lastSourceIndex = 0;\n        var lastSourceLine0 = 0;\n        var lastSourceCol0 = 0;\n        this.lines.forEach(function (segments) {\n            lastCol0 = 0;\n            mappings += segments\n                .map(function (segment) {\n                // zero-based starting column of the line in the generated code\n                var segAsStr = toBase64VLQ(segment.col0 - lastCol0);\n                lastCol0 = segment.col0;\n                if (segment.sourceUrl != null) {\n                    // zero-based index into the sources list\n                    segAsStr +=\n                        toBase64VLQ(sourcesIndex.get(segment.sourceUrl) - lastSourceIndex);\n                    lastSourceIndex = sourcesIndex.get(segment.sourceUrl);\n                    // the zero-based starting line in the original source\n                    segAsStr += toBase64VLQ(segment.sourceLine0 - lastSourceLine0);\n                    lastSourceLine0 = segment.sourceLine0;\n                    // the zero-based starting column in the original source\n                    segAsStr += toBase64VLQ(segment.sourceCol0 - lastSourceCol0);\n                    lastSourceCol0 = segment.sourceCol0;\n                }\n                return segAsStr;\n            })\n                .join(',');\n            mappings += ';';\n        });\n        mappings = mappings.slice(0, -1);\n        return {\n            'file': this.file || '',\n            'version': VERSION$1,\n            'sourceRoot': '',\n            'sources': sources,\n            'sourcesContent': sourcesContent,\n            'mappings': mappings,\n        };\n    };\n    SourceMapGenerator.prototype.toJsComment = function () {\n        return this.hasMappings ? '//' + JS_B64_PREFIX + toBase64String(JSON.stringify(this, null, 0)) :\n            '';\n    };\n    return SourceMapGenerator;\n}());\nfunction toBase64String(value) {\n    var b64 = '';\n    value = utf8Encode(value);\n    for (var i = 0; i < value.length;) {\n        var i1 = value.charCodeAt(i++);\n        var i2 = value.charCodeAt(i++);\n        var i3 = value.charCodeAt(i++);\n        b64 += toBase64Digit(i1 >> 2);\n        b64 += toBase64Digit(((i1 & 3) << 4) | (isNaN(i2) ? 0 : i2 >> 4));\n        b64 += isNaN(i2) ? '=' : toBase64Digit(((i2 & 15) << 2) | (i3 >> 6));\n        b64 += isNaN(i2) || isNaN(i3) ? '=' : toBase64Digit(i3 & 63);\n    }\n    return b64;\n}\nfunction toBase64VLQ(value) {\n    value = value < 0 ? ((-value) << 1) + 1 : value << 1;\n    var out = '';\n    do {\n        var digit = value & 31;\n        value = value >> 5;\n        if (value > 0) {\n            digit = digit | 32;\n        }\n        out += toBase64Digit(digit);\n    } while (value > 0);\n    return out;\n}\nvar B64_DIGITS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nfunction toBase64Digit(value) {\n    if (value < 0 || value >= 64) {\n        throw new Error(\"Can only encode value in the range [0, 63]\");\n    }\n    return B64_DIGITS[value];\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _SINGLE_QUOTE_ESCAPE_STRING_RE = /'|\\\\|\\n|\\r|\\$/g;\nvar _LEGAL_IDENTIFIER_RE = /^[$A-Z_][0-9A-Z_$]*$/i;\nvar _INDENT_WITH = '  ';\nvar CATCH_ERROR_VAR$1 = variable('error', null, null);\nvar CATCH_STACK_VAR$1 = variable('stack', null, null);\nvar _EmittedLine = /** @class */ (function () {\n    function _EmittedLine(indent) {\n        this.indent = indent;\n        this.partsLength = 0;\n        this.parts = [];\n        this.srcSpans = [];\n    }\n    return _EmittedLine;\n}());\nvar EmitterVisitorContext = /** @class */ (function () {\n    function EmitterVisitorContext(_indent) {\n        this._indent = _indent;\n        this._classes = [];\n        this._preambleLineCount = 0;\n        this._lines = [new _EmittedLine(_indent)];\n    }\n    EmitterVisitorContext.createRoot = function () { return new EmitterVisitorContext(0); };\n    Object.defineProperty(EmitterVisitorContext.prototype, \"_currentLine\", {\n        get: function () { return this._lines[this._lines.length - 1]; },\n        enumerable: true,\n        configurable: true\n    });\n    EmitterVisitorContext.prototype.println = function (from, lastPart) {\n        if (lastPart === void 0) { lastPart = ''; }\n        this.print(from || null, lastPart, true);\n    };\n    EmitterVisitorContext.prototype.lineIsEmpty = function () { return this._currentLine.parts.length === 0; };\n    EmitterVisitorContext.prototype.lineLength = function () {\n        return this._currentLine.indent * _INDENT_WITH.length + this._currentLine.partsLength;\n    };\n    EmitterVisitorContext.prototype.print = function (from, part, newLine) {\n        if (newLine === void 0) { newLine = false; }\n        if (part.length > 0) {\n            this._currentLine.parts.push(part);\n            this._currentLine.partsLength += part.length;\n            this._currentLine.srcSpans.push(from && from.sourceSpan || null);\n        }\n        if (newLine) {\n            this._lines.push(new _EmittedLine(this._indent));\n        }\n    };\n    EmitterVisitorContext.prototype.removeEmptyLastLine = function () {\n        if (this.lineIsEmpty()) {\n            this._lines.pop();\n        }\n    };\n    EmitterVisitorContext.prototype.incIndent = function () {\n        this._indent++;\n        if (this.lineIsEmpty()) {\n            this._currentLine.indent = this._indent;\n        }\n    };\n    EmitterVisitorContext.prototype.decIndent = function () {\n        this._indent--;\n        if (this.lineIsEmpty()) {\n            this._currentLine.indent = this._indent;\n        }\n    };\n    EmitterVisitorContext.prototype.pushClass = function (clazz) { this._classes.push(clazz); };\n    EmitterVisitorContext.prototype.popClass = function () { return this._classes.pop(); };\n    Object.defineProperty(EmitterVisitorContext.prototype, \"currentClass\", {\n        get: function () {\n            return this._classes.length > 0 ? this._classes[this._classes.length - 1] : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EmitterVisitorContext.prototype.toSource = function () {\n        return this.sourceLines\n            .map(function (l) { return l.parts.length > 0 ? _createIndent(l.indent) + l.parts.join('') : ''; })\n            .join('\\n');\n    };\n    EmitterVisitorContext.prototype.toSourceMapGenerator = function (genFilePath, startsAtLine) {\n        if (startsAtLine === void 0) { startsAtLine = 0; }\n        var map = new SourceMapGenerator(genFilePath);\n        var firstOffsetMapped = false;\n        var mapFirstOffsetIfNeeded = function () {\n            if (!firstOffsetMapped) {\n                // Add a single space so that tools won't try to load the file from disk.\n                // Note: We are using virtual urls like `ng:///`, so we have to\n                // provide a content here.\n                map.addSource(genFilePath, ' ').addMapping(0, genFilePath, 0, 0);\n                firstOffsetMapped = true;\n            }\n        };\n        for (var i = 0; i < startsAtLine; i++) {\n            map.addLine();\n            mapFirstOffsetIfNeeded();\n        }\n        this.sourceLines.forEach(function (line, lineIdx) {\n            map.addLine();\n            var spans = line.srcSpans;\n            var parts = line.parts;\n            var col0 = line.indent * _INDENT_WITH.length;\n            var spanIdx = 0;\n            // skip leading parts without source spans\n            while (spanIdx < spans.length && !spans[spanIdx]) {\n                col0 += parts[spanIdx].length;\n                spanIdx++;\n            }\n            if (spanIdx < spans.length && lineIdx === 0 && col0 === 0) {\n                firstOffsetMapped = true;\n            }\n            else {\n                mapFirstOffsetIfNeeded();\n            }\n            while (spanIdx < spans.length) {\n                var span = spans[spanIdx];\n                var source = span.start.file;\n                var sourceLine = span.start.line;\n                var sourceCol = span.start.col;\n                map.addSource(source.url, source.content)\n                    .addMapping(col0, source.url, sourceLine, sourceCol);\n                col0 += parts[spanIdx].length;\n                spanIdx++;\n                // assign parts without span or the same span to the previous segment\n                while (spanIdx < spans.length && (span === spans[spanIdx] || !spans[spanIdx])) {\n                    col0 += parts[spanIdx].length;\n                    spanIdx++;\n                }\n            }\n        });\n        return map;\n    };\n    EmitterVisitorContext.prototype.setPreambleLineCount = function (count) { return this._preambleLineCount = count; };\n    EmitterVisitorContext.prototype.spanOf = function (line, column) {\n        var emittedLine = this._lines[line - this._preambleLineCount];\n        if (emittedLine) {\n            var columnsLeft = column - _createIndent(emittedLine.indent).length;\n            for (var partIndex = 0; partIndex < emittedLine.parts.length; partIndex++) {\n                var part = emittedLine.parts[partIndex];\n                if (part.length > columnsLeft) {\n                    return emittedLine.srcSpans[partIndex];\n                }\n                columnsLeft -= part.length;\n            }\n        }\n        return null;\n    };\n    Object.defineProperty(EmitterVisitorContext.prototype, \"sourceLines\", {\n        get: function () {\n            if (this._lines.length && this._lines[this._lines.length - 1].parts.length === 0) {\n                return this._lines.slice(0, -1);\n            }\n            return this._lines;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return EmitterVisitorContext;\n}());\nvar AbstractEmitterVisitor = /** @class */ (function () {\n    function AbstractEmitterVisitor(_escapeDollarInStrings) {\n        this._escapeDollarInStrings = _escapeDollarInStrings;\n    }\n    AbstractEmitterVisitor.prototype.visitExpressionStmt = function (stmt, ctx) {\n        stmt.expr.visitExpression(this, ctx);\n        ctx.println(stmt, ';');\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitReturnStmt = function (stmt, ctx) {\n        ctx.print(stmt, \"return \");\n        stmt.value.visitExpression(this, ctx);\n        ctx.println(stmt, ';');\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitIfStmt = function (stmt, ctx) {\n        ctx.print(stmt, \"if (\");\n        stmt.condition.visitExpression(this, ctx);\n        ctx.print(stmt, \") {\");\n        var hasElseCase = stmt.falseCase != null && stmt.falseCase.length > 0;\n        if (stmt.trueCase.length <= 1 && !hasElseCase) {\n            ctx.print(stmt, \" \");\n            this.visitAllStatements(stmt.trueCase, ctx);\n            ctx.removeEmptyLastLine();\n            ctx.print(stmt, \" \");\n        }\n        else {\n            ctx.println();\n            ctx.incIndent();\n            this.visitAllStatements(stmt.trueCase, ctx);\n            ctx.decIndent();\n            if (hasElseCase) {\n                ctx.println(stmt, \"} else {\");\n                ctx.incIndent();\n                this.visitAllStatements(stmt.falseCase, ctx);\n                ctx.decIndent();\n            }\n        }\n        ctx.println(stmt, \"}\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitThrowStmt = function (stmt, ctx) {\n        ctx.print(stmt, \"throw \");\n        stmt.error.visitExpression(this, ctx);\n        ctx.println(stmt, \";\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitCommentStmt = function (stmt, ctx) {\n        if (stmt.multiline) {\n            ctx.println(stmt, \"/* \" + stmt.comment + \" */\");\n        }\n        else {\n            stmt.comment.split('\\n').forEach(function (line) { ctx.println(stmt, \"// \" + line); });\n        }\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitJSDocCommentStmt = function (stmt, ctx) {\n        ctx.println(stmt, \"/*\" + stmt.toString() + \"*/\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitWriteVarExpr = function (expr, ctx) {\n        var lineWasEmpty = ctx.lineIsEmpty();\n        if (!lineWasEmpty) {\n            ctx.print(expr, '(');\n        }\n        ctx.print(expr, expr.name + \" = \");\n        expr.value.visitExpression(this, ctx);\n        if (!lineWasEmpty) {\n            ctx.print(expr, ')');\n        }\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitWriteKeyExpr = function (expr, ctx) {\n        var lineWasEmpty = ctx.lineIsEmpty();\n        if (!lineWasEmpty) {\n            ctx.print(expr, '(');\n        }\n        expr.receiver.visitExpression(this, ctx);\n        ctx.print(expr, \"[\");\n        expr.index.visitExpression(this, ctx);\n        ctx.print(expr, \"] = \");\n        expr.value.visitExpression(this, ctx);\n        if (!lineWasEmpty) {\n            ctx.print(expr, ')');\n        }\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitWritePropExpr = function (expr, ctx) {\n        var lineWasEmpty = ctx.lineIsEmpty();\n        if (!lineWasEmpty) {\n            ctx.print(expr, '(');\n        }\n        expr.receiver.visitExpression(this, ctx);\n        ctx.print(expr, \".\" + expr.name + \" = \");\n        expr.value.visitExpression(this, ctx);\n        if (!lineWasEmpty) {\n            ctx.print(expr, ')');\n        }\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitInvokeMethodExpr = function (expr, ctx) {\n        expr.receiver.visitExpression(this, ctx);\n        var name = expr.name;\n        if (expr.builtin != null) {\n            name = this.getBuiltinMethodName(expr.builtin);\n            if (name == null) {\n                // some builtins just mean to skip the call.\n                return null;\n            }\n        }\n        ctx.print(expr, \".\" + name + \"(\");\n        this.visitAllExpressions(expr.args, ctx, \",\");\n        ctx.print(expr, \")\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitInvokeFunctionExpr = function (expr, ctx) {\n        expr.fn.visitExpression(this, ctx);\n        ctx.print(expr, \"(\");\n        this.visitAllExpressions(expr.args, ctx, ',');\n        ctx.print(expr, \")\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitReadVarExpr = function (ast, ctx) {\n        var varName = ast.name;\n        if (ast.builtin != null) {\n            switch (ast.builtin) {\n                case BuiltinVar.Super:\n                    varName = 'super';\n                    break;\n                case BuiltinVar.This:\n                    varName = 'this';\n                    break;\n                case BuiltinVar.CatchError:\n                    varName = CATCH_ERROR_VAR$1.name;\n                    break;\n                case BuiltinVar.CatchStack:\n                    varName = CATCH_STACK_VAR$1.name;\n                    break;\n                default:\n                    throw new Error(\"Unknown builtin variable \" + ast.builtin);\n            }\n        }\n        ctx.print(ast, varName);\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitInstantiateExpr = function (ast, ctx) {\n        ctx.print(ast, \"new \");\n        ast.classExpr.visitExpression(this, ctx);\n        ctx.print(ast, \"(\");\n        this.visitAllExpressions(ast.args, ctx, ',');\n        ctx.print(ast, \")\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitLiteralExpr = function (ast, ctx) {\n        var value = ast.value;\n        if (typeof value === 'string') {\n            ctx.print(ast, escapeIdentifier(value, this._escapeDollarInStrings));\n        }\n        else {\n            ctx.print(ast, \"\" + value);\n        }\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitConditionalExpr = function (ast, ctx) {\n        ctx.print(ast, \"(\");\n        ast.condition.visitExpression(this, ctx);\n        ctx.print(ast, '? ');\n        ast.trueCase.visitExpression(this, ctx);\n        ctx.print(ast, ': ');\n        ast.falseCase.visitExpression(this, ctx);\n        ctx.print(ast, \")\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitNotExpr = function (ast, ctx) {\n        ctx.print(ast, '!');\n        ast.condition.visitExpression(this, ctx);\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitAssertNotNullExpr = function (ast, ctx) {\n        ast.condition.visitExpression(this, ctx);\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitBinaryOperatorExpr = function (ast, ctx) {\n        var opStr;\n        switch (ast.operator) {\n            case BinaryOperator.Equals:\n                opStr = '==';\n                break;\n            case BinaryOperator.Identical:\n                opStr = '===';\n                break;\n            case BinaryOperator.NotEquals:\n                opStr = '!=';\n                break;\n            case BinaryOperator.NotIdentical:\n                opStr = '!==';\n                break;\n            case BinaryOperator.And:\n                opStr = '&&';\n                break;\n            case BinaryOperator.BitwiseAnd:\n                opStr = '&';\n                break;\n            case BinaryOperator.Or:\n                opStr = '||';\n                break;\n            case BinaryOperator.Plus:\n                opStr = '+';\n                break;\n            case BinaryOperator.Minus:\n                opStr = '-';\n                break;\n            case BinaryOperator.Divide:\n                opStr = '/';\n                break;\n            case BinaryOperator.Multiply:\n                opStr = '*';\n                break;\n            case BinaryOperator.Modulo:\n                opStr = '%';\n                break;\n            case BinaryOperator.Lower:\n                opStr = '<';\n                break;\n            case BinaryOperator.LowerEquals:\n                opStr = '<=';\n                break;\n            case BinaryOperator.Bigger:\n                opStr = '>';\n                break;\n            case BinaryOperator.BiggerEquals:\n                opStr = '>=';\n                break;\n            default:\n                throw new Error(\"Unknown operator \" + ast.operator);\n        }\n        if (ast.parens)\n            ctx.print(ast, \"(\");\n        ast.lhs.visitExpression(this, ctx);\n        ctx.print(ast, \" \" + opStr + \" \");\n        ast.rhs.visitExpression(this, ctx);\n        if (ast.parens)\n            ctx.print(ast, \")\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitReadPropExpr = function (ast, ctx) {\n        ast.receiver.visitExpression(this, ctx);\n        ctx.print(ast, \".\");\n        ctx.print(ast, ast.name);\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitReadKeyExpr = function (ast, ctx) {\n        ast.receiver.visitExpression(this, ctx);\n        ctx.print(ast, \"[\");\n        ast.index.visitExpression(this, ctx);\n        ctx.print(ast, \"]\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitLiteralArrayExpr = function (ast, ctx) {\n        ctx.print(ast, \"[\");\n        this.visitAllExpressions(ast.entries, ctx, ',');\n        ctx.print(ast, \"]\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitLiteralMapExpr = function (ast, ctx) {\n        var _this = this;\n        ctx.print(ast, \"{\");\n        this.visitAllObjects(function (entry) {\n            ctx.print(ast, escapeIdentifier(entry.key, _this._escapeDollarInStrings, entry.quoted) + \":\");\n            entry.value.visitExpression(_this, ctx);\n        }, ast.entries, ctx, ',');\n        ctx.print(ast, \"}\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitCommaExpr = function (ast, ctx) {\n        ctx.print(ast, '(');\n        this.visitAllExpressions(ast.parts, ctx, ',');\n        ctx.print(ast, ')');\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitAllExpressions = function (expressions, ctx, separator) {\n        var _this = this;\n        this.visitAllObjects(function (expr) { return expr.visitExpression(_this, ctx); }, expressions, ctx, separator);\n    };\n    AbstractEmitterVisitor.prototype.visitAllObjects = function (handler, expressions, ctx, separator) {\n        var incrementedIndent = false;\n        for (var i = 0; i < expressions.length; i++) {\n            if (i > 0) {\n                if (ctx.lineLength() > 80) {\n                    ctx.print(null, separator, true);\n                    if (!incrementedIndent) {\n                        // continuation are marked with double indent.\n                        ctx.incIndent();\n                        ctx.incIndent();\n                        incrementedIndent = true;\n                    }\n                }\n                else {\n                    ctx.print(null, separator, false);\n                }\n            }\n            handler(expressions[i]);\n        }\n        if (incrementedIndent) {\n            // continuation are marked with double indent.\n            ctx.decIndent();\n            ctx.decIndent();\n        }\n    };\n    AbstractEmitterVisitor.prototype.visitAllStatements = function (statements, ctx) {\n        var _this = this;\n        statements.forEach(function (stmt) { return stmt.visitStatement(_this, ctx); });\n    };\n    return AbstractEmitterVisitor;\n}());\nfunction escapeIdentifier(input, escapeDollar, alwaysQuote) {\n    if (alwaysQuote === void 0) { alwaysQuote = true; }\n    if (input == null) {\n        return null;\n    }\n    var body = input.replace(_SINGLE_QUOTE_ESCAPE_STRING_RE, function () {\n        var match = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            match[_i] = arguments[_i];\n        }\n        if (match[0] == '$') {\n            return escapeDollar ? '\\\\$' : '$';\n        }\n        else if (match[0] == '\\n') {\n            return '\\\\n';\n        }\n        else if (match[0] == '\\r') {\n            return '\\\\r';\n        }\n        else {\n            return \"\\\\\" + match[0];\n        }\n    });\n    var requiresQuotes = alwaysQuote || !_LEGAL_IDENTIFIER_RE.test(body);\n    return requiresQuotes ? \"'\" + body + \"'\" : body;\n}\nfunction _createIndent(count) {\n    var res = '';\n    for (var i = 0; i < count; i++) {\n        res += _INDENT_WITH;\n    }\n    return res;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar _TsEmitterVisitor = /** @class */ (function (_super) {\n    __extends(_TsEmitterVisitor, _super);\n    function _TsEmitterVisitor(referenceFilter, importFilter) {\n        var _this = _super.call(this, false) || this;\n        _this.referenceFilter = referenceFilter;\n        _this.importFilter = importFilter;\n        _this.typeExpression = 0;\n        _this.importsWithPrefixes = new Map();\n        _this.reexports = new Map();\n        return _this;\n    }\n    _TsEmitterVisitor.prototype.visitType = function (t, ctx, defaultType) {\n        if (defaultType === void 0) { defaultType = 'any'; }\n        if (t) {\n            this.typeExpression++;\n            t.visitType(this, ctx);\n            this.typeExpression--;\n        }\n        else {\n            ctx.print(null, defaultType);\n        }\n    };\n    _TsEmitterVisitor.prototype.visitLiteralExpr = function (ast, ctx) {\n        var value = ast.value;\n        if (value == null && ast.type != INFERRED_TYPE) {\n            ctx.print(ast, \"(\" + value + \" as any)\");\n            return null;\n        }\n        return _super.prototype.visitLiteralExpr.call(this, ast, ctx);\n    };\n    // Temporary workaround to support strictNullCheck enabled consumers of ngc emit.\n    // In SNC mode, [] have the type never[], so we cast here to any[].\n    // TODO: narrow the cast to a more explicit type, or use a pattern that does not\n    // start with [].concat. see https://github.com/angular/angular/pull/11846\n    _TsEmitterVisitor.prototype.visitLiteralArrayExpr = function (ast, ctx) {\n        if (ast.entries.length === 0) {\n            ctx.print(ast, '(');\n        }\n        var result = _super.prototype.visitLiteralArrayExpr.call(this, ast, ctx);\n        if (ast.entries.length === 0) {\n            ctx.print(ast, ' as any[])');\n        }\n        return result;\n    };\n    _TsEmitterVisitor.prototype.visitExternalExpr = function (ast, ctx) {\n        this._visitIdentifier(ast.value, ast.typeParams, ctx);\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitAssertNotNullExpr = function (ast, ctx) {\n        var result = _super.prototype.visitAssertNotNullExpr.call(this, ast, ctx);\n        ctx.print(ast, '!');\n        return result;\n    };\n    _TsEmitterVisitor.prototype.visitDeclareVarStmt = function (stmt, ctx) {\n        if (stmt.hasModifier(StmtModifier.Exported) && stmt.value instanceof ExternalExpr &&\n            !stmt.type) {\n            // check for a reexport\n            var _a = stmt.value.value, name_1 = _a.name, moduleName = _a.moduleName;\n            if (moduleName) {\n                var reexports = this.reexports.get(moduleName);\n                if (!reexports) {\n                    reexports = [];\n                    this.reexports.set(moduleName, reexports);\n                }\n                reexports.push({ name: name_1, as: stmt.name });\n                return null;\n            }\n        }\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            ctx.print(stmt, \"export \");\n        }\n        if (stmt.hasModifier(StmtModifier.Final)) {\n            ctx.print(stmt, \"const\");\n        }\n        else {\n            ctx.print(stmt, \"var\");\n        }\n        ctx.print(stmt, \" \" + stmt.name);\n        this._printColonType(stmt.type, ctx);\n        if (stmt.value) {\n            ctx.print(stmt, \" = \");\n            stmt.value.visitExpression(this, ctx);\n        }\n        ctx.println(stmt, \";\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitCastExpr = function (ast, ctx) {\n        ctx.print(ast, \"(<\");\n        ast.type.visitType(this, ctx);\n        ctx.print(ast, \">\");\n        ast.value.visitExpression(this, ctx);\n        ctx.print(ast, \")\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitInstantiateExpr = function (ast, ctx) {\n        ctx.print(ast, \"new \");\n        this.typeExpression++;\n        ast.classExpr.visitExpression(this, ctx);\n        this.typeExpression--;\n        ctx.print(ast, \"(\");\n        this.visitAllExpressions(ast.args, ctx, ',');\n        ctx.print(ast, \")\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitDeclareClassStmt = function (stmt, ctx) {\n        var _this = this;\n        ctx.pushClass(stmt);\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            ctx.print(stmt, \"export \");\n        }\n        ctx.print(stmt, \"class \" + stmt.name);\n        if (stmt.parent != null) {\n            ctx.print(stmt, \" extends \");\n            this.typeExpression++;\n            stmt.parent.visitExpression(this, ctx);\n            this.typeExpression--;\n        }\n        ctx.println(stmt, \" {\");\n        ctx.incIndent();\n        stmt.fields.forEach(function (field) { return _this._visitClassField(field, ctx); });\n        if (stmt.constructorMethod != null) {\n            this._visitClassConstructor(stmt, ctx);\n        }\n        stmt.getters.forEach(function (getter) { return _this._visitClassGetter(getter, ctx); });\n        stmt.methods.forEach(function (method) { return _this._visitClassMethod(method, ctx); });\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n        ctx.popClass();\n        return null;\n    };\n    _TsEmitterVisitor.prototype._visitClassField = function (field, ctx) {\n        if (field.hasModifier(StmtModifier.Private)) {\n            // comment out as a workaround for #10967\n            ctx.print(null, \"/*private*/ \");\n        }\n        if (field.hasModifier(StmtModifier.Static)) {\n            ctx.print(null, 'static ');\n        }\n        ctx.print(null, field.name);\n        this._printColonType(field.type, ctx);\n        if (field.initializer) {\n            ctx.print(null, ' = ');\n            field.initializer.visitExpression(this, ctx);\n        }\n        ctx.println(null, \";\");\n    };\n    _TsEmitterVisitor.prototype._visitClassGetter = function (getter, ctx) {\n        if (getter.hasModifier(StmtModifier.Private)) {\n            ctx.print(null, \"private \");\n        }\n        ctx.print(null, \"get \" + getter.name + \"()\");\n        this._printColonType(getter.type, ctx);\n        ctx.println(null, \" {\");\n        ctx.incIndent();\n        this.visitAllStatements(getter.body, ctx);\n        ctx.decIndent();\n        ctx.println(null, \"}\");\n    };\n    _TsEmitterVisitor.prototype._visitClassConstructor = function (stmt, ctx) {\n        ctx.print(stmt, \"constructor(\");\n        this._visitParams(stmt.constructorMethod.params, ctx);\n        ctx.println(stmt, \") {\");\n        ctx.incIndent();\n        this.visitAllStatements(stmt.constructorMethod.body, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n    };\n    _TsEmitterVisitor.prototype._visitClassMethod = function (method, ctx) {\n        if (method.hasModifier(StmtModifier.Private)) {\n            ctx.print(null, \"private \");\n        }\n        ctx.print(null, method.name + \"(\");\n        this._visitParams(method.params, ctx);\n        ctx.print(null, \")\");\n        this._printColonType(method.type, ctx, 'void');\n        ctx.println(null, \" {\");\n        ctx.incIndent();\n        this.visitAllStatements(method.body, ctx);\n        ctx.decIndent();\n        ctx.println(null, \"}\");\n    };\n    _TsEmitterVisitor.prototype.visitFunctionExpr = function (ast, ctx) {\n        if (ast.name) {\n            ctx.print(ast, 'function ');\n            ctx.print(ast, ast.name);\n        }\n        ctx.print(ast, \"(\");\n        this._visitParams(ast.params, ctx);\n        ctx.print(ast, \")\");\n        this._printColonType(ast.type, ctx, 'void');\n        if (!ast.name) {\n            ctx.print(ast, \" => \");\n        }\n        ctx.println(ast, '{');\n        ctx.incIndent();\n        this.visitAllStatements(ast.statements, ctx);\n        ctx.decIndent();\n        ctx.print(ast, \"}\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitDeclareFunctionStmt = function (stmt, ctx) {\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            ctx.print(stmt, \"export \");\n        }\n        ctx.print(stmt, \"function \" + stmt.name + \"(\");\n        this._visitParams(stmt.params, ctx);\n        ctx.print(stmt, \")\");\n        this._printColonType(stmt.type, ctx, 'void');\n        ctx.println(stmt, \" {\");\n        ctx.incIndent();\n        this.visitAllStatements(stmt.statements, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitTryCatchStmt = function (stmt, ctx) {\n        ctx.println(stmt, \"try {\");\n        ctx.incIndent();\n        this.visitAllStatements(stmt.bodyStmts, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"} catch (\" + CATCH_ERROR_VAR$1.name + \") {\");\n        ctx.incIndent();\n        var catchStmts = [CATCH_STACK_VAR$1.set(CATCH_ERROR_VAR$1.prop('stack', null)).toDeclStmt(null, [\n                StmtModifier.Final\n            ])].concat(stmt.catchStmts);\n        this.visitAllStatements(catchStmts, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitBuiltinType = function (type, ctx) {\n        var typeStr;\n        switch (type.name) {\n            case BuiltinTypeName.Bool:\n                typeStr = 'boolean';\n                break;\n            case BuiltinTypeName.Dynamic:\n                typeStr = 'any';\n                break;\n            case BuiltinTypeName.Function:\n                typeStr = 'Function';\n                break;\n            case BuiltinTypeName.Number:\n                typeStr = 'number';\n                break;\n            case BuiltinTypeName.Int:\n                typeStr = 'number';\n                break;\n            case BuiltinTypeName.String:\n                typeStr = 'string';\n                break;\n            default:\n                throw new Error(\"Unsupported builtin type \" + type.name);\n        }\n        ctx.print(null, typeStr);\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitExpressionType = function (ast, ctx) {\n        ast.value.visitExpression(this, ctx);\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitArrayType = function (type, ctx) {\n        this.visitType(type.of, ctx);\n        ctx.print(null, \"[]\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitMapType = function (type, ctx) {\n        ctx.print(null, \"{[key: string]:\");\n        this.visitType(type.valueType, ctx);\n        ctx.print(null, \"}\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.getBuiltinMethodName = function (method) {\n        var name;\n        switch (method) {\n            case BuiltinMethod.ConcatArray:\n                name = 'concat';\n                break;\n            case BuiltinMethod.SubscribeObservable:\n                name = 'subscribe';\n                break;\n            case BuiltinMethod.Bind:\n                name = 'bind';\n                break;\n            default:\n                throw new Error(\"Unknown builtin method: \" + method);\n        }\n        return name;\n    };\n    _TsEmitterVisitor.prototype._visitParams = function (params, ctx) {\n        var _this = this;\n        this.visitAllObjects(function (param) {\n            ctx.print(null, param.name);\n            _this._printColonType(param.type, ctx);\n        }, params, ctx, ',');\n    };\n    _TsEmitterVisitor.prototype._visitIdentifier = function (value, typeParams, ctx) {\n        var _this = this;\n        var name = value.name, moduleName = value.moduleName;\n        if (this.referenceFilter && this.referenceFilter(value)) {\n            ctx.print(null, '(null as any)');\n            return;\n        }\n        if (moduleName && (!this.importFilter || !this.importFilter(value))) {\n            var prefix = this.importsWithPrefixes.get(moduleName);\n            if (prefix == null) {\n                prefix = \"i\" + this.importsWithPrefixes.size;\n                this.importsWithPrefixes.set(moduleName, prefix);\n            }\n            ctx.print(null, prefix + \".\");\n        }\n        ctx.print(null, name);\n        if (this.typeExpression > 0) {\n            // If we are in a type expression that refers to a generic type then supply\n            // the required type parameters. If there were not enough type parameters\n            // supplied, supply any as the type. Outside a type expression the reference\n            // should not supply type parameters and be treated as a simple value reference\n            // to the constructor function itself.\n            var suppliedParameters = typeParams || [];\n            if (suppliedParameters.length > 0) {\n                ctx.print(null, \"<\");\n                this.visitAllObjects(function (type) { return type.visitType(_this, ctx); }, typeParams, ctx, ',');\n                ctx.print(null, \">\");\n            }\n        }\n    };\n    _TsEmitterVisitor.prototype._printColonType = function (type, ctx, defaultType) {\n        if (type !== INFERRED_TYPE) {\n            ctx.print(null, ':');\n            this.visitType(type, ctx, defaultType);\n        }\n    };\n    return _TsEmitterVisitor;\n}(AbstractEmitterVisitor));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Resolve a `Type` for {@link Pipe}.\n *\n * This interface can be overridden by the application developer to create custom behavior.\n *\n * See {@link Compiler}\n */\nvar PipeResolver = /** @class */ (function () {\n    function PipeResolver(_reflector) {\n        this._reflector = _reflector;\n    }\n    PipeResolver.prototype.isPipe = function (type) {\n        var typeMetadata = this._reflector.annotations(resolveForwardRef(type));\n        return typeMetadata && typeMetadata.some(createPipe.isTypeOf);\n    };\n    /**\n     * Return {@link Pipe} for a given `Type`.\n     */\n    PipeResolver.prototype.resolve = function (type, throwIfNotFound) {\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        var metas = this._reflector.annotations(resolveForwardRef(type));\n        if (metas) {\n            var annotation = findLast(metas, createPipe.isTypeOf);\n            if (annotation) {\n                return annotation;\n            }\n        }\n        if (throwIfNotFound) {\n            throw new Error(\"No Pipe decorator found on \" + stringify(type));\n        }\n        return null;\n    };\n    return PipeResolver;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// =================================================================================================\n// =================================================================================================\n// =========== S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P  ===========\n// =================================================================================================\n// =================================================================================================\n//\n//        DO NOT EDIT THIS LIST OF SECURITY SENSITIVE PROPERTIES WITHOUT A SECURITY REVIEW!\n//                               Reach out to mprobst for details.\n//\n// =================================================================================================\n/** Map from tagName|propertyName SecurityContext. Properties applying to all tags use '*'. */\nvar SECURITY_SCHEMA = {};\nfunction registerContext(ctx, specs) {\n    try {\n        for (var specs_1 = __values(specs), specs_1_1 = specs_1.next(); !specs_1_1.done; specs_1_1 = specs_1.next()) {\n            var spec = specs_1_1.value;\n            SECURITY_SCHEMA[spec.toLowerCase()] = ctx;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (specs_1_1 && !specs_1_1.done && (_a = specs_1.return)) _a.call(specs_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    var e_1, _a;\n}\n// Case is insignificant below, all element and attribute names are lower-cased for lookup.\nregisterContext(SecurityContext.HTML, [\n    'iframe|srcdoc',\n    '*|innerHTML',\n    '*|outerHTML',\n]);\nregisterContext(SecurityContext.STYLE, ['*|style']);\n// NB: no SCRIPT contexts here, they are never allowed due to the parser stripping them.\nregisterContext(SecurityContext.URL, [\n    '*|formAction', 'area|href', 'area|ping', 'audio|src', 'a|href',\n    'a|ping', 'blockquote|cite', 'body|background', 'del|cite', 'form|action',\n    'img|src', 'img|srcset', 'input|src', 'ins|cite', 'q|cite',\n    'source|src', 'source|srcset', 'track|src', 'video|poster', 'video|src',\n]);\nregisterContext(SecurityContext.RESOURCE_URL, [\n    'applet|code',\n    'applet|codebase',\n    'base|href',\n    'embed|src',\n    'frame|src',\n    'head|profile',\n    'html|manifest',\n    'iframe|src',\n    'link|href',\n    'media|src',\n    'object|codebase',\n    'object|data',\n    'script|src',\n]);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ElementSchemaRegistry = /** @class */ (function () {\n    function ElementSchemaRegistry() {\n    }\n    return ElementSchemaRegistry;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar BOOLEAN = 'boolean';\nvar NUMBER = 'number';\nvar STRING = 'string';\nvar OBJECT = 'object';\n/**\n * This array represents the DOM schema. It encodes inheritance, properties, and events.\n *\n * ## Overview\n *\n * Each line represents one kind of element. The `element_inheritance` and properties are joined\n * using `element_inheritance|properties` syntax.\n *\n * ## Element Inheritance\n *\n * The `element_inheritance` can be further subdivided as `element1,element2,...^parentElement`.\n * Here the individual elements are separated by `,` (commas). Every element in the list\n * has identical properties.\n *\n * An `element` may inherit additional properties from `parentElement` If no `^parentElement` is\n * specified then `\"\"` (blank) element is assumed.\n *\n * NOTE: The blank element inherits from root `[Element]` element, the super element of all\n * elements.\n *\n * NOTE an element prefix such as `:svg:` has no special meaning to the schema.\n *\n * ## Properties\n *\n * Each element has a set of properties separated by `,` (commas). Each property can be prefixed\n * by a special character designating its type:\n *\n * - (no prefix): property is a string.\n * - `*`: property represents an event.\n * - `!`: property is a boolean.\n * - `#`: property is a number.\n * - `%`: property is an object.\n *\n * ## Query\n *\n * The class creates an internal squas representation which allows to easily answer the query of\n * if a given property exist on a given element.\n *\n * NOTE: We don't yet support querying for types or events.\n * NOTE: This schema is auto extracted from `schema_extractor.ts` located in the test folder,\n *       see dom_element_schema_registry_spec.ts\n */\n// =================================================================================================\n// =================================================================================================\n// =========== S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P  ===========\n// =================================================================================================\n// =================================================================================================\n//\n//                       DO NOT EDIT THIS DOM SCHEMA WITHOUT A SECURITY REVIEW!\n//\n// Newly added properties must be security reviewed and assigned an appropriate SecurityContext in\n// dom_security_schema.ts. Reach out to mprobst & rjamet for details.\n//\n// =================================================================================================\nvar SCHEMA = [\n    '[Element]|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop,slot' +\n        /* added manually to avoid breaking changes */\n        ',*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored',\n    '[HTMLElement]^[Element]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate',\n    'abbr,address,article,aside,b,bdi,bdo,cite,code,dd,dfn,dt,em,figcaption,figure,footer,header,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate',\n    'media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,src,%srcObject,#volume',\n    ':svg:^[HTMLElement]|*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex',\n    ':svg:graphics^:svg:|',\n    ':svg:animation^:svg:|*begin,*end,*repeat',\n    ':svg:geometry^:svg:|',\n    ':svg:componentTransferFunction^:svg:|',\n    ':svg:gradient^:svg:|',\n    ':svg:textContent^:svg:graphics|',\n    ':svg:textPositioning^:svg:textContent|',\n    'a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,rev,search,shape,target,text,type,username',\n    'area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,search,shape,target,username',\n    'audio^media|',\n    'br^[HTMLElement]|clear',\n    'base^[HTMLElement]|href,target',\n    'body^[HTMLElement]|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink',\n    'button^[HTMLElement]|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value',\n    'canvas^[HTMLElement]|#height,#width',\n    'content^[HTMLElement]|select',\n    'dl^[HTMLElement]|!compact',\n    'datalist^[HTMLElement]|',\n    'details^[HTMLElement]|!open',\n    'dialog^[HTMLElement]|!open,returnValue',\n    'dir^[HTMLElement]|!compact',\n    'div^[HTMLElement]|align',\n    'embed^[HTMLElement]|align,height,name,src,type,width',\n    'fieldset^[HTMLElement]|!disabled,name',\n    'font^[HTMLElement]|color,face,size',\n    'form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target',\n    'frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src',\n    'frameset^[HTMLElement]|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows',\n    'hr^[HTMLElement]|align,color,!noShade,size,width',\n    'head^[HTMLElement]|',\n    'h1,h2,h3,h4,h5,h6^[HTMLElement]|align',\n    'html^[HTMLElement]|version',\n    'iframe^[HTMLElement]|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width',\n    'img^[HTMLElement]|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width',\n    'input^[HTMLElement]|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width',\n    'li^[HTMLElement]|type,#value',\n    'label^[HTMLElement]|htmlFor',\n    'legend^[HTMLElement]|align',\n    'link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type',\n    'map^[HTMLElement]|name',\n    'marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width',\n    'menu^[HTMLElement]|!compact',\n    'meta^[HTMLElement]|content,httpEquiv,name,scheme',\n    'meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value',\n    'ins,del^[HTMLElement]|cite,dateTime',\n    'ol^[HTMLElement]|!compact,!reversed,#start,type',\n    'object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width',\n    'optgroup^[HTMLElement]|!disabled,label',\n    'option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value',\n    'output^[HTMLElement]|defaultValue,%htmlFor,name,value',\n    'p^[HTMLElement]|align',\n    'param^[HTMLElement]|name,type,value,valueType',\n    'picture^[HTMLElement]|',\n    'pre^[HTMLElement]|#width',\n    'progress^[HTMLElement]|#max,#value',\n    'q,blockquote,cite^[HTMLElement]|',\n    'script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type',\n    'select^[HTMLElement]|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value',\n    'shadow^[HTMLElement]|',\n    'slot^[HTMLElement]|name',\n    'source^[HTMLElement]|media,sizes,src,srcset,type',\n    'span^[HTMLElement]|',\n    'style^[HTMLElement]|!disabled,media,type',\n    'caption^[HTMLElement]|align',\n    'th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width',\n    'col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width',\n    'table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width',\n    'tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign',\n    'tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign',\n    'template^[HTMLElement]|',\n    'textarea^[HTMLElement]|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap',\n    'title^[HTMLElement]|text',\n    'track^[HTMLElement]|!default,kind,label,src,srclang',\n    'ul^[HTMLElement]|!compact,type',\n    'unknown^[HTMLElement]|',\n    'video^media|#height,poster,#width',\n    ':svg:a^:svg:graphics|',\n    ':svg:animate^:svg:animation|',\n    ':svg:animateMotion^:svg:animation|',\n    ':svg:animateTransform^:svg:animation|',\n    ':svg:circle^:svg:geometry|',\n    ':svg:clipPath^:svg:graphics|',\n    ':svg:defs^:svg:graphics|',\n    ':svg:desc^:svg:|',\n    ':svg:discard^:svg:|',\n    ':svg:ellipse^:svg:geometry|',\n    ':svg:feBlend^:svg:|',\n    ':svg:feColorMatrix^:svg:|',\n    ':svg:feComponentTransfer^:svg:|',\n    ':svg:feComposite^:svg:|',\n    ':svg:feConvolveMatrix^:svg:|',\n    ':svg:feDiffuseLighting^:svg:|',\n    ':svg:feDisplacementMap^:svg:|',\n    ':svg:feDistantLight^:svg:|',\n    ':svg:feDropShadow^:svg:|',\n    ':svg:feFlood^:svg:|',\n    ':svg:feFuncA^:svg:componentTransferFunction|',\n    ':svg:feFuncB^:svg:componentTransferFunction|',\n    ':svg:feFuncG^:svg:componentTransferFunction|',\n    ':svg:feFuncR^:svg:componentTransferFunction|',\n    ':svg:feGaussianBlur^:svg:|',\n    ':svg:feImage^:svg:|',\n    ':svg:feMerge^:svg:|',\n    ':svg:feMergeNode^:svg:|',\n    ':svg:feMorphology^:svg:|',\n    ':svg:feOffset^:svg:|',\n    ':svg:fePointLight^:svg:|',\n    ':svg:feSpecularLighting^:svg:|',\n    ':svg:feSpotLight^:svg:|',\n    ':svg:feTile^:svg:|',\n    ':svg:feTurbulence^:svg:|',\n    ':svg:filter^:svg:|',\n    ':svg:foreignObject^:svg:graphics|',\n    ':svg:g^:svg:graphics|',\n    ':svg:image^:svg:graphics|',\n    ':svg:line^:svg:geometry|',\n    ':svg:linearGradient^:svg:gradient|',\n    ':svg:mpath^:svg:|',\n    ':svg:marker^:svg:|',\n    ':svg:mask^:svg:|',\n    ':svg:metadata^:svg:|',\n    ':svg:path^:svg:geometry|',\n    ':svg:pattern^:svg:|',\n    ':svg:polygon^:svg:geometry|',\n    ':svg:polyline^:svg:geometry|',\n    ':svg:radialGradient^:svg:gradient|',\n    ':svg:rect^:svg:geometry|',\n    ':svg:svg^:svg:graphics|#currentScale,#zoomAndPan',\n    ':svg:script^:svg:|type',\n    ':svg:set^:svg:animation|',\n    ':svg:stop^:svg:|',\n    ':svg:style^:svg:|!disabled,media,title,type',\n    ':svg:switch^:svg:graphics|',\n    ':svg:symbol^:svg:|',\n    ':svg:tspan^:svg:textPositioning|',\n    ':svg:text^:svg:textPositioning|',\n    ':svg:textPath^:svg:textContent|',\n    ':svg:title^:svg:|',\n    ':svg:use^:svg:graphics|',\n    ':svg:view^:svg:|#zoomAndPan',\n    'data^[HTMLElement]|value',\n    'keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name',\n    'menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default',\n    'summary^[HTMLElement]|',\n    'time^[HTMLElement]|dateTime',\n    ':svg:cursor^:svg:|',\n];\nvar _ATTR_TO_PROP = {\n    'class': 'className',\n    'for': 'htmlFor',\n    'formaction': 'formAction',\n    'innerHtml': 'innerHTML',\n    'readonly': 'readOnly',\n    'tabindex': 'tabIndex',\n};\nvar DomElementSchemaRegistry = /** @class */ (function (_super) {\n    __extends(DomElementSchemaRegistry, _super);\n    function DomElementSchemaRegistry() {\n        var _this = _super.call(this) || this;\n        _this._schema = {};\n        SCHEMA.forEach(function (encodedType) {\n            var type = {};\n            var _a = __read(encodedType.split('|'), 2), strType = _a[0], strProperties = _a[1];\n            var properties = strProperties.split(',');\n            var _b = __read(strType.split('^'), 2), typeNames = _b[0], superName = _b[1];\n            typeNames.split(',').forEach(function (tag) { return _this._schema[tag.toLowerCase()] = type; });\n            var superType = superName && _this._schema[superName.toLowerCase()];\n            if (superType) {\n                Object.keys(superType).forEach(function (prop) { type[prop] = superType[prop]; });\n            }\n            properties.forEach(function (property) {\n                if (property.length > 0) {\n                    switch (property[0]) {\n                        case '*':\n                            // We don't yet support events.\n                            // If ever allowing to bind to events, GO THROUGH A SECURITY REVIEW, allowing events\n                            // will\n                            // almost certainly introduce bad XSS vulnerabilities.\n                            // type[property.substring(1)] = EVENT;\n                            break;\n                        case '!':\n                            type[property.substring(1)] = BOOLEAN;\n                            break;\n                        case '#':\n                            type[property.substring(1)] = NUMBER;\n                            break;\n                        case '%':\n                            type[property.substring(1)] = OBJECT;\n                            break;\n                        default:\n                            type[property] = STRING;\n                    }\n                }\n            });\n        });\n        return _this;\n    }\n    DomElementSchemaRegistry.prototype.hasProperty = function (tagName, propName, schemaMetas) {\n        if (schemaMetas.some(function (schema) { return schema.name === NO_ERRORS_SCHEMA.name; })) {\n            return true;\n        }\n        if (tagName.indexOf('-') > -1) {\n            if (isNgContainer(tagName) || isNgContent(tagName)) {\n                return false;\n            }\n            if (schemaMetas.some(function (schema) { return schema.name === CUSTOM_ELEMENTS_SCHEMA.name; })) {\n                // Can't tell now as we don't know which properties a custom element will get\n                // once it is instantiated\n                return true;\n            }\n        }\n        var elementProperties = this._schema[tagName.toLowerCase()] || this._schema['unknown'];\n        return !!elementProperties[propName];\n    };\n    DomElementSchemaRegistry.prototype.hasElement = function (tagName, schemaMetas) {\n        if (schemaMetas.some(function (schema) { return schema.name === NO_ERRORS_SCHEMA.name; })) {\n            return true;\n        }\n        if (tagName.indexOf('-') > -1) {\n            if (isNgContainer(tagName) || isNgContent(tagName)) {\n                return true;\n            }\n            if (schemaMetas.some(function (schema) { return schema.name === CUSTOM_ELEMENTS_SCHEMA.name; })) {\n                // Allow any custom elements\n                return true;\n            }\n        }\n        return !!this._schema[tagName.toLowerCase()];\n    };\n    /**\n     * securityContext returns the security context for the given property on the given DOM tag.\n     *\n     * Tag and property name are statically known and cannot change at runtime, i.e. it is not\n     * possible to bind a value into a changing attribute or tag name.\n     *\n     * The filtering is white list based. All attributes in the schema above are assumed to have the\n     * 'NONE' security context, i.e. that they are safe inert string values. Only specific well known\n     * attack vectors are assigned their appropriate context.\n     */\n    DomElementSchemaRegistry.prototype.securityContext = function (tagName, propName, isAttribute) {\n        if (isAttribute) {\n            // NB: For security purposes, use the mapped property name, not the attribute name.\n            propName = this.getMappedPropName(propName);\n        }\n        // Make sure comparisons are case insensitive, so that case differences between attribute and\n        // property names do not have a security impact.\n        tagName = tagName.toLowerCase();\n        propName = propName.toLowerCase();\n        var ctx = SECURITY_SCHEMA[tagName + '|' + propName];\n        if (ctx) {\n            return ctx;\n        }\n        ctx = SECURITY_SCHEMA['*|' + propName];\n        return ctx ? ctx : SecurityContext.NONE;\n    };\n    DomElementSchemaRegistry.prototype.getMappedPropName = function (propName) { return _ATTR_TO_PROP[propName] || propName; };\n    DomElementSchemaRegistry.prototype.getDefaultComponentElementName = function () { return 'ng-component'; };\n    DomElementSchemaRegistry.prototype.validateProperty = function (name) {\n        if (name.toLowerCase().startsWith('on')) {\n            var msg = \"Binding to event property '\" + name + \"' is disallowed for security reasons, \" +\n                (\"please use (\" + name.slice(2) + \")=...\") +\n                (\"\\nIf '\" + name + \"' is a directive input, make sure the directive is imported by the\") +\n                \" current module.\";\n            return { error: true, msg: msg };\n        }\n        else {\n            return { error: false };\n        }\n    };\n    DomElementSchemaRegistry.prototype.validateAttribute = function (name) {\n        if (name.toLowerCase().startsWith('on')) {\n            var msg = \"Binding to event attribute '\" + name + \"' is disallowed for security reasons, \" +\n                (\"please use (\" + name.slice(2) + \")=...\");\n            return { error: true, msg: msg };\n        }\n        else {\n            return { error: false };\n        }\n    };\n    DomElementSchemaRegistry.prototype.allKnownElementNames = function () { return Object.keys(this._schema); };\n    DomElementSchemaRegistry.prototype.normalizeAnimationStyleProperty = function (propName) {\n        return dashCaseToCamelCase(propName);\n    };\n    DomElementSchemaRegistry.prototype.normalizeAnimationStyleValue = function (camelCaseProp, userProvidedProp, val) {\n        var unit = '';\n        var strVal = val.toString().trim();\n        var errorMsg = null;\n        if (_isPixelDimensionStyle(camelCaseProp) && val !== 0 && val !== '0') {\n            if (typeof val === 'number') {\n                unit = 'px';\n            }\n            else {\n                var valAndSuffixMatch = val.match(/^[+-]?[\\d\\.]+([a-z]*)$/);\n                if (valAndSuffixMatch && valAndSuffixMatch[1].length == 0) {\n                    errorMsg = \"Please provide a CSS unit value for \" + userProvidedProp + \":\" + val;\n                }\n            }\n        }\n        return { error: errorMsg, value: strVal + unit };\n    };\n    return DomElementSchemaRegistry;\n}(ElementSchemaRegistry));\nfunction _isPixelDimensionStyle(prop) {\n    switch (prop) {\n        case 'width':\n        case 'height':\n        case 'minWidth':\n        case 'minHeight':\n        case 'maxWidth':\n        case 'maxHeight':\n        case 'left':\n        case 'top':\n        case 'bottom':\n        case 'right':\n        case 'fontSize':\n        case 'outlineWidth':\n        case 'outlineOffset':\n        case 'paddingTop':\n        case 'paddingLeft':\n        case 'paddingBottom':\n        case 'paddingRight':\n        case 'marginTop':\n        case 'marginLeft':\n        case 'marginBottom':\n        case 'marginRight':\n        case 'borderRadius':\n        case 'borderWidth':\n        case 'borderTopWidth':\n        case 'borderLeftWidth':\n        case 'borderRightWidth':\n        case 'borderBottomWidth':\n        case 'textIndent':\n            return true;\n        default:\n            return false;\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar PRESERVE_WS_ATTR_NAME = 'ngPreserveWhitespaces';\nvar SKIP_WS_TRIM_TAGS = new Set(['pre', 'template', 'textarea', 'script', 'style']);\n// Equivalent to \\s with \\u00a0 (non-breaking space) excluded.\n// Based on https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp\nvar WS_CHARS = ' \\f\\n\\r\\t\\v\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff';\nvar NO_WS_REGEXP = new RegExp(\"[^\" + WS_CHARS + \"]\");\nvar WS_REPLACE_REGEXP = new RegExp(\"[\" + WS_CHARS + \"]{2,}\", 'g');\nfunction hasPreserveWhitespacesAttr(attrs) {\n    return attrs.some(function (attr) { return attr.name === PRESERVE_WS_ATTR_NAME; });\n}\n/**\n * Angular Dart introduced &ngsp; as a placeholder for non-removable space, see:\n * https://github.com/dart-lang/angular/blob/0bb611387d29d65b5af7f9d2515ab571fd3fbee4/_tests/test/compiler/preserve_whitespace_test.dart#L25-L32\n * In Angular Dart &ngsp; is converted to the 0xE500 PUA (Private Use Areas) unicode character\n * and later on replaced by a space. We are re-implementing the same idea here.\n */\nfunction replaceNgsp(value) {\n    // lexer is replacing the &ngsp; pseudo-entity with NGSP_UNICODE\n    return value.replace(new RegExp(NGSP_UNICODE, 'g'), ' ');\n}\n/**\n * This visitor can walk HTML parse tree and remove / trim text nodes using the following rules:\n * - consider spaces, tabs and new lines as whitespace characters;\n * - drop text nodes consisting of whitespace characters only;\n * - for all other text nodes replace consecutive whitespace characters with one space;\n * - convert &ngsp; pseudo-entity to a single space;\n *\n * Removal and trimming of whitespaces have positive performance impact (less code to generate\n * while compiling templates, faster view creation). At the same time it can be \"destructive\"\n * in some cases (whitespaces can influence layout). Because of the potential of breaking layout\n * this visitor is not activated by default in Angular 5 and people need to explicitly opt-in for\n * whitespace removal. The default option for whitespace removal will be revisited in Angular 6\n * and might be changed to \"on\" by default.\n */\nvar WhitespaceVisitor = /** @class */ (function () {\n    function WhitespaceVisitor() {\n    }\n    WhitespaceVisitor.prototype.visitElement = function (element, context) {\n        if (SKIP_WS_TRIM_TAGS.has(element.name) || hasPreserveWhitespacesAttr(element.attrs)) {\n            // don't descent into elements where we need to preserve whitespaces\n            // but still visit all attributes to eliminate one used as a market to preserve WS\n            return new Element(element.name, visitAll(this, element.attrs), element.children, element.sourceSpan, element.startSourceSpan, element.endSourceSpan);\n        }\n        return new Element(element.name, element.attrs, visitAll(this, element.children), element.sourceSpan, element.startSourceSpan, element.endSourceSpan);\n    };\n    WhitespaceVisitor.prototype.visitAttribute = function (attribute, context) {\n        return attribute.name !== PRESERVE_WS_ATTR_NAME ? attribute : null;\n    };\n    WhitespaceVisitor.prototype.visitText = function (text, context) {\n        var isNotBlank = text.value.match(NO_WS_REGEXP);\n        if (isNotBlank) {\n            return new Text(replaceNgsp(text.value).replace(WS_REPLACE_REGEXP, ' '), text.sourceSpan);\n        }\n        return null;\n    };\n    WhitespaceVisitor.prototype.visitComment = function (comment, context) { return comment; };\n    WhitespaceVisitor.prototype.visitExpansion = function (expansion, context) { return expansion; };\n    WhitespaceVisitor.prototype.visitExpansionCase = function (expansionCase, context) { return expansionCase; };\n    return WhitespaceVisitor;\n}());\nfunction removeWhitespaces(htmlAstWithErrors) {\n    return new ParseTreeResult(visitAll(new WhitespaceVisitor(), htmlAstWithErrors.rootNodes), htmlAstWithErrors.errors);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// http://cldr.unicode.org/index/cldr-spec/plural-rules\nvar PLURAL_CASES = ['zero', 'one', 'two', 'few', 'many', 'other'];\n/**\n * Expands special forms into elements.\n *\n * For example,\n *\n * ```\n * { messages.length, plural,\n *   =0 {zero}\n *   =1 {one}\n *   other {more than one}\n * }\n * ```\n *\n * will be expanded into\n *\n * ```\n * <ng-container [ngPlural]=\"messages.length\">\n *   <ng-template ngPluralCase=\"=0\">zero</ng-template>\n *   <ng-template ngPluralCase=\"=1\">one</ng-template>\n *   <ng-template ngPluralCase=\"other\">more than one</ng-template>\n * </ng-container>\n * ```\n */\nfunction expandNodes(nodes) {\n    var expander = new _Expander();\n    return new ExpansionResult(visitAll(expander, nodes), expander.isExpanded, expander.errors);\n}\nvar ExpansionResult = /** @class */ (function () {\n    function ExpansionResult(nodes, expanded, errors) {\n        this.nodes = nodes;\n        this.expanded = expanded;\n        this.errors = errors;\n    }\n    return ExpansionResult;\n}());\nvar ExpansionError = /** @class */ (function (_super) {\n    __extends(ExpansionError, _super);\n    function ExpansionError(span, errorMsg) {\n        return _super.call(this, span, errorMsg) || this;\n    }\n    return ExpansionError;\n}(ParseError));\n/**\n * Expand expansion forms (plural, select) to directives\n *\n * @internal\n */\nvar _Expander = /** @class */ (function () {\n    function _Expander() {\n        this.isExpanded = false;\n        this.errors = [];\n    }\n    _Expander.prototype.visitElement = function (element, context) {\n        return new Element(element.name, element.attrs, visitAll(this, element.children), element.sourceSpan, element.startSourceSpan, element.endSourceSpan);\n    };\n    _Expander.prototype.visitAttribute = function (attribute, context) { return attribute; };\n    _Expander.prototype.visitText = function (text, context) { return text; };\n    _Expander.prototype.visitComment = function (comment, context) { return comment; };\n    _Expander.prototype.visitExpansion = function (icu, context) {\n        this.isExpanded = true;\n        return icu.type == 'plural' ? _expandPluralForm(icu, this.errors) :\n            _expandDefaultForm(icu, this.errors);\n    };\n    _Expander.prototype.visitExpansionCase = function (icuCase, context) {\n        throw new Error('Should not be reached');\n    };\n    return _Expander;\n}());\n// Plural forms are expanded to `NgPlural` and `NgPluralCase`s\nfunction _expandPluralForm(ast, errors) {\n    var children = ast.cases.map(function (c) {\n        if (PLURAL_CASES.indexOf(c.value) == -1 && !c.value.match(/^=\\d+$/)) {\n            errors.push(new ExpansionError(c.valueSourceSpan, \"Plural cases should be \\\"=<number>\\\" or one of \" + PLURAL_CASES.join(\", \")));\n        }\n        var expansionResult = expandNodes(c.expression);\n        errors.push.apply(errors, __spread(expansionResult.errors));\n        return new Element(\"ng-template\", [new Attribute('ngPluralCase', \"\" + c.value, c.valueSourceSpan)], expansionResult.nodes, c.sourceSpan, c.sourceSpan, c.sourceSpan);\n    });\n    var switchAttr = new Attribute('[ngPlural]', ast.switchValue, ast.switchValueSourceSpan);\n    return new Element('ng-container', [switchAttr], children, ast.sourceSpan, ast.sourceSpan, ast.sourceSpan);\n}\n// ICU messages (excluding plural form) are expanded to `NgSwitch`  and `NgSwitchCase`s\nfunction _expandDefaultForm(ast, errors) {\n    var children = ast.cases.map(function (c) {\n        var expansionResult = expandNodes(c.expression);\n        errors.push.apply(errors, __spread(expansionResult.errors));\n        if (c.value === 'other') {\n            // other is the default case when no values match\n            return new Element(\"ng-template\", [new Attribute('ngSwitchDefault', '', c.valueSourceSpan)], expansionResult.nodes, c.sourceSpan, c.sourceSpan, c.sourceSpan);\n        }\n        return new Element(\"ng-template\", [new Attribute('ngSwitchCase', \"\" + c.value, c.valueSourceSpan)], expansionResult.nodes, c.sourceSpan, c.sourceSpan, c.sourceSpan);\n    });\n    var switchAttr = new Attribute('[ngSwitch]', ast.switchValue, ast.switchValueSourceSpan);\n    return new Element('ng-container', [switchAttr], children, ast.sourceSpan, ast.sourceSpan, ast.sourceSpan);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar PROPERTY_PARTS_SEPARATOR = '.';\nvar ATTRIBUTE_PREFIX = 'attr';\nvar CLASS_PREFIX = 'class';\nvar STYLE_PREFIX = 'style';\nvar ANIMATE_PROP_PREFIX = 'animate-';\nvar BoundPropertyType;\n(function (BoundPropertyType) {\n    BoundPropertyType[BoundPropertyType[\"DEFAULT\"] = 0] = \"DEFAULT\";\n    BoundPropertyType[BoundPropertyType[\"LITERAL_ATTR\"] = 1] = \"LITERAL_ATTR\";\n    BoundPropertyType[BoundPropertyType[\"ANIMATION\"] = 2] = \"ANIMATION\";\n})(BoundPropertyType || (BoundPropertyType = {}));\n/**\n * Represents a parsed property.\n */\nvar BoundProperty = /** @class */ (function () {\n    function BoundProperty(name, expression, type, sourceSpan) {\n        this.name = name;\n        this.expression = expression;\n        this.type = type;\n        this.sourceSpan = sourceSpan;\n        this.isLiteral = this.type === BoundPropertyType.LITERAL_ATTR;\n        this.isAnimation = this.type === BoundPropertyType.ANIMATION;\n    }\n    return BoundProperty;\n}());\n/**\n * Parses bindings in templates and in the directive host area.\n */\nvar BindingParser = /** @class */ (function () {\n    function BindingParser(_exprParser, _interpolationConfig, _schemaRegistry, pipes, _targetErrors) {\n        var _this = this;\n        this._exprParser = _exprParser;\n        this._interpolationConfig = _interpolationConfig;\n        this._schemaRegistry = _schemaRegistry;\n        this._targetErrors = _targetErrors;\n        this.pipesByName = new Map();\n        this._usedPipes = new Map();\n        pipes.forEach(function (pipe) { return _this.pipesByName.set(pipe.name, pipe); });\n    }\n    BindingParser.prototype.getUsedPipes = function () { return Array.from(this._usedPipes.values()); };\n    BindingParser.prototype.createBoundHostProperties = function (dirMeta, sourceSpan) {\n        var _this = this;\n        if (dirMeta.hostProperties) {\n            var boundProps_1 = [];\n            Object.keys(dirMeta.hostProperties).forEach(function (propName) {\n                var expression = dirMeta.hostProperties[propName];\n                if (typeof expression === 'string') {\n                    _this.parsePropertyBinding(propName, expression, true, sourceSpan, [], boundProps_1);\n                }\n                else {\n                    _this._reportError(\"Value of the host property binding \\\"\" + propName + \"\\\" needs to be a string representing an expression but got \\\"\" + expression + \"\\\" (\" + typeof expression + \")\", sourceSpan);\n                }\n            });\n            return boundProps_1;\n        }\n        return null;\n    };\n    BindingParser.prototype.createDirectiveHostPropertyAsts = function (dirMeta, elementSelector, sourceSpan) {\n        var _this = this;\n        var boundProps = this.createBoundHostProperties(dirMeta, sourceSpan);\n        return boundProps &&\n            boundProps.map(function (prop) { return _this.createElementPropertyAst(elementSelector, prop); });\n    };\n    BindingParser.prototype.createDirectiveHostEventAsts = function (dirMeta, sourceSpan) {\n        var _this = this;\n        if (dirMeta.hostListeners) {\n            var targetEventAsts_1 = [];\n            Object.keys(dirMeta.hostListeners).forEach(function (propName) {\n                var expression = dirMeta.hostListeners[propName];\n                if (typeof expression === 'string') {\n                    _this.parseEvent(propName, expression, sourceSpan, [], targetEventAsts_1);\n                }\n                else {\n                    _this._reportError(\"Value of the host listener \\\"\" + propName + \"\\\" needs to be a string representing an expression but got \\\"\" + expression + \"\\\" (\" + typeof expression + \")\", sourceSpan);\n                }\n            });\n            return targetEventAsts_1;\n        }\n        return null;\n    };\n    BindingParser.prototype.parseInterpolation = function (value, sourceSpan) {\n        var sourceInfo = sourceSpan.start.toString();\n        try {\n            var ast = this._exprParser.parseInterpolation(value, sourceInfo, this._interpolationConfig);\n            if (ast)\n                this._reportExpressionParserErrors(ast.errors, sourceSpan);\n            this._checkPipes(ast, sourceSpan);\n            return ast;\n        }\n        catch (e) {\n            this._reportError(\"\" + e, sourceSpan);\n            return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);\n        }\n    };\n    BindingParser.prototype.parseInlineTemplateBinding = function (prefixToken, value, sourceSpan, targetMatchableAttrs, targetProps, targetVars) {\n        var bindings = this._parseTemplateBindings(prefixToken, value, sourceSpan);\n        for (var i = 0; i < bindings.length; i++) {\n            var binding = bindings[i];\n            if (binding.keyIsVar) {\n                targetVars.push(new VariableAst(binding.key, binding.name, sourceSpan));\n            }\n            else if (binding.expression) {\n                this._parsePropertyAst(binding.key, binding.expression, sourceSpan, targetMatchableAttrs, targetProps);\n            }\n            else {\n                targetMatchableAttrs.push([binding.key, '']);\n                this.parseLiteralAttr(binding.key, null, sourceSpan, targetMatchableAttrs, targetProps);\n            }\n        }\n    };\n    BindingParser.prototype._parseTemplateBindings = function (prefixToken, value, sourceSpan) {\n        var _this = this;\n        var sourceInfo = sourceSpan.start.toString();\n        try {\n            var bindingsResult = this._exprParser.parseTemplateBindings(prefixToken, value, sourceInfo);\n            this._reportExpressionParserErrors(bindingsResult.errors, sourceSpan);\n            bindingsResult.templateBindings.forEach(function (binding) {\n                if (binding.expression) {\n                    _this._checkPipes(binding.expression, sourceSpan);\n                }\n            });\n            bindingsResult.warnings.forEach(function (warning) { _this._reportError(warning, sourceSpan, ParseErrorLevel.WARNING); });\n            return bindingsResult.templateBindings;\n        }\n        catch (e) {\n            this._reportError(\"\" + e, sourceSpan);\n            return [];\n        }\n    };\n    BindingParser.prototype.parseLiteralAttr = function (name, value, sourceSpan, targetMatchableAttrs, targetProps) {\n        if (_isAnimationLabel(name)) {\n            name = name.substring(1);\n            if (value) {\n                this._reportError(\"Assigning animation triggers via @prop=\\\"exp\\\" attributes with an expression is invalid.\" +\n                    \" Use property bindings (e.g. [@prop]=\\\"exp\\\") or use an attribute without a value (e.g. @prop) instead.\", sourceSpan, ParseErrorLevel.ERROR);\n            }\n            this._parseAnimation(name, value, sourceSpan, targetMatchableAttrs, targetProps);\n        }\n        else {\n            targetProps.push(new BoundProperty(name, this._exprParser.wrapLiteralPrimitive(value, ''), BoundPropertyType.LITERAL_ATTR, sourceSpan));\n        }\n    };\n    BindingParser.prototype.parsePropertyBinding = function (name, expression, isHost, sourceSpan, targetMatchableAttrs, targetProps) {\n        var isAnimationProp = false;\n        if (name.startsWith(ANIMATE_PROP_PREFIX)) {\n            isAnimationProp = true;\n            name = name.substring(ANIMATE_PROP_PREFIX.length);\n        }\n        else if (_isAnimationLabel(name)) {\n            isAnimationProp = true;\n            name = name.substring(1);\n        }\n        if (isAnimationProp) {\n            this._parseAnimation(name, expression, sourceSpan, targetMatchableAttrs, targetProps);\n        }\n        else {\n            this._parsePropertyAst(name, this._parseBinding(expression, isHost, sourceSpan), sourceSpan, targetMatchableAttrs, targetProps);\n        }\n    };\n    BindingParser.prototype.parsePropertyInterpolation = function (name, value, sourceSpan, targetMatchableAttrs, targetProps) {\n        var expr = this.parseInterpolation(value, sourceSpan);\n        if (expr) {\n            this._parsePropertyAst(name, expr, sourceSpan, targetMatchableAttrs, targetProps);\n            return true;\n        }\n        return false;\n    };\n    BindingParser.prototype._parsePropertyAst = function (name, ast, sourceSpan, targetMatchableAttrs, targetProps) {\n        targetMatchableAttrs.push([name, ast.source]);\n        targetProps.push(new BoundProperty(name, ast, BoundPropertyType.DEFAULT, sourceSpan));\n    };\n    BindingParser.prototype._parseAnimation = function (name, expression, sourceSpan, targetMatchableAttrs, targetProps) {\n        // This will occur when a @trigger is not paired with an expression.\n        // For animations it is valid to not have an expression since */void\n        // states will be applied by angular when the element is attached/detached\n        var ast = this._parseBinding(expression || 'undefined', false, sourceSpan);\n        targetMatchableAttrs.push([name, ast.source]);\n        targetProps.push(new BoundProperty(name, ast, BoundPropertyType.ANIMATION, sourceSpan));\n    };\n    BindingParser.prototype._parseBinding = function (value, isHostBinding, sourceSpan) {\n        var sourceInfo = sourceSpan.start.toString();\n        try {\n            var ast = isHostBinding ?\n                this._exprParser.parseSimpleBinding(value, sourceInfo, this._interpolationConfig) :\n                this._exprParser.parseBinding(value, sourceInfo, this._interpolationConfig);\n            if (ast)\n                this._reportExpressionParserErrors(ast.errors, sourceSpan);\n            this._checkPipes(ast, sourceSpan);\n            return ast;\n        }\n        catch (e) {\n            this._reportError(\"\" + e, sourceSpan);\n            return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);\n        }\n    };\n    BindingParser.prototype.createElementPropertyAst = function (elementSelector, boundProp) {\n        if (boundProp.isAnimation) {\n            return new BoundElementPropertyAst(boundProp.name, PropertyBindingType.Animation, SecurityContext.NONE, boundProp.expression, null, boundProp.sourceSpan);\n        }\n        var unit = null;\n        var bindingType = undefined;\n        var boundPropertyName = null;\n        var parts = boundProp.name.split(PROPERTY_PARTS_SEPARATOR);\n        var securityContexts = undefined;\n        // Check check for special cases (prefix style, attr, class)\n        if (parts.length > 1) {\n            if (parts[0] == ATTRIBUTE_PREFIX) {\n                boundPropertyName = parts[1];\n                this._validatePropertyOrAttributeName(boundPropertyName, boundProp.sourceSpan, true);\n                securityContexts = calcPossibleSecurityContexts(this._schemaRegistry, elementSelector, boundPropertyName, true);\n                var nsSeparatorIdx = boundPropertyName.indexOf(':');\n                if (nsSeparatorIdx > -1) {\n                    var ns = boundPropertyName.substring(0, nsSeparatorIdx);\n                    var name_1 = boundPropertyName.substring(nsSeparatorIdx + 1);\n                    boundPropertyName = mergeNsAndName(ns, name_1);\n                }\n                bindingType = PropertyBindingType.Attribute;\n            }\n            else if (parts[0] == CLASS_PREFIX) {\n                boundPropertyName = parts[1];\n                bindingType = PropertyBindingType.Class;\n                securityContexts = [SecurityContext.NONE];\n            }\n            else if (parts[0] == STYLE_PREFIX) {\n                unit = parts.length > 2 ? parts[2] : null;\n                boundPropertyName = parts[1];\n                bindingType = PropertyBindingType.Style;\n                securityContexts = [SecurityContext.STYLE];\n            }\n        }\n        // If not a special case, use the full property name\n        if (boundPropertyName === null) {\n            boundPropertyName = this._schemaRegistry.getMappedPropName(boundProp.name);\n            securityContexts = calcPossibleSecurityContexts(this._schemaRegistry, elementSelector, boundPropertyName, false);\n            bindingType = PropertyBindingType.Property;\n            this._validatePropertyOrAttributeName(boundPropertyName, boundProp.sourceSpan, false);\n        }\n        return new BoundElementPropertyAst(boundPropertyName, bindingType, securityContexts[0], boundProp.expression, unit, boundProp.sourceSpan);\n    };\n    BindingParser.prototype.parseEvent = function (name, expression, sourceSpan, targetMatchableAttrs, targetEvents) {\n        if (_isAnimationLabel(name)) {\n            name = name.substr(1);\n            this._parseAnimationEvent(name, expression, sourceSpan, targetEvents);\n        }\n        else {\n            this._parseEvent(name, expression, sourceSpan, targetMatchableAttrs, targetEvents);\n        }\n    };\n    BindingParser.prototype._parseAnimationEvent = function (name, expression, sourceSpan, targetEvents) {\n        var matches = splitAtPeriod(name, [name, '']);\n        var eventName = matches[0];\n        var phase = matches[1].toLowerCase();\n        if (phase) {\n            switch (phase) {\n                case 'start':\n                case 'done':\n                    var ast = this._parseAction(expression, sourceSpan);\n                    targetEvents.push(new BoundEventAst(eventName, null, phase, ast, sourceSpan));\n                    break;\n                default:\n                    this._reportError(\"The provided animation output phase value \\\"\" + phase + \"\\\" for \\\"@\" + eventName + \"\\\" is not supported (use start or done)\", sourceSpan);\n                    break;\n            }\n        }\n        else {\n            this._reportError(\"The animation trigger output event (@\" + eventName + \") is missing its phase value name (start or done are currently supported)\", sourceSpan);\n        }\n    };\n    BindingParser.prototype._parseEvent = function (name, expression, sourceSpan, targetMatchableAttrs, targetEvents) {\n        // long format: 'target: eventName'\n        var _a = __read(splitAtColon(name, [null, name]), 2), target = _a[0], eventName = _a[1];\n        var ast = this._parseAction(expression, sourceSpan);\n        targetMatchableAttrs.push([name, ast.source]);\n        targetEvents.push(new BoundEventAst(eventName, target, null, ast, sourceSpan));\n        // Don't detect directives for event names for now,\n        // so don't add the event name to the matchableAttrs\n    };\n    BindingParser.prototype._parseAction = function (value, sourceSpan) {\n        var sourceInfo = sourceSpan.start.toString();\n        try {\n            var ast = this._exprParser.parseAction(value, sourceInfo, this._interpolationConfig);\n            if (ast) {\n                this._reportExpressionParserErrors(ast.errors, sourceSpan);\n            }\n            if (!ast || ast.ast instanceof EmptyExpr) {\n                this._reportError(\"Empty expressions are not allowed\", sourceSpan);\n                return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);\n            }\n            this._checkPipes(ast, sourceSpan);\n            return ast;\n        }\n        catch (e) {\n            this._reportError(\"\" + e, sourceSpan);\n            return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);\n        }\n    };\n    BindingParser.prototype._reportError = function (message, sourceSpan, level) {\n        if (level === void 0) { level = ParseErrorLevel.ERROR; }\n        this._targetErrors.push(new ParseError(sourceSpan, message, level));\n    };\n    BindingParser.prototype._reportExpressionParserErrors = function (errors, sourceSpan) {\n        try {\n            for (var errors_1 = __values(errors), errors_1_1 = errors_1.next(); !errors_1_1.done; errors_1_1 = errors_1.next()) {\n                var error$$1 = errors_1_1.value;\n                this._reportError(error$$1.message, sourceSpan);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (errors_1_1 && !errors_1_1.done && (_a = errors_1.return)) _a.call(errors_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var e_1, _a;\n    };\n    BindingParser.prototype._checkPipes = function (ast, sourceSpan) {\n        var _this = this;\n        if (ast) {\n            var collector = new PipeCollector();\n            ast.visit(collector);\n            collector.pipes.forEach(function (ast, pipeName) {\n                var pipeMeta = _this.pipesByName.get(pipeName);\n                if (!pipeMeta) {\n                    _this._reportError(\"The pipe '\" + pipeName + \"' could not be found\", new ParseSourceSpan(sourceSpan.start.moveBy(ast.span.start), sourceSpan.start.moveBy(ast.span.end)));\n                }\n                else {\n                    _this._usedPipes.set(pipeName, pipeMeta);\n                }\n            });\n        }\n    };\n    /**\n     * @param propName the name of the property / attribute\n     * @param sourceSpan\n     * @param isAttr true when binding to an attribute\n     */\n    BindingParser.prototype._validatePropertyOrAttributeName = function (propName, sourceSpan, isAttr) {\n        var report = isAttr ? this._schemaRegistry.validateAttribute(propName) :\n            this._schemaRegistry.validateProperty(propName);\n        if (report.error) {\n            this._reportError(report.msg, sourceSpan, ParseErrorLevel.ERROR);\n        }\n    };\n    return BindingParser;\n}());\nvar PipeCollector = /** @class */ (function (_super) {\n    __extends(PipeCollector, _super);\n    function PipeCollector() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.pipes = new Map();\n        return _this;\n    }\n    PipeCollector.prototype.visitPipe = function (ast, context) {\n        this.pipes.set(ast.name, ast);\n        ast.exp.visit(this);\n        this.visitAll(ast.args, context);\n        return null;\n    };\n    return PipeCollector;\n}(RecursiveAstVisitor));\nfunction _isAnimationLabel(name) {\n    return name[0] == '@';\n}\nfunction calcPossibleSecurityContexts(registry, selector, propName, isAttribute) {\n    var ctxs = [];\n    CssSelector.parse(selector).forEach(function (selector) {\n        var elementNames = selector.element ? [selector.element] : registry.allKnownElementNames();\n        var notElementNames = new Set(selector.notSelectors.filter(function (selector) { return selector.isElementSelector(); })\n            .map(function (selector) { return selector.element; }));\n        var possibleElementNames = elementNames.filter(function (elementName) { return !notElementNames.has(elementName); });\n        ctxs.push.apply(ctxs, __spread(possibleElementNames.map(function (elementName) { return registry.securityContext(elementName, propName, isAttribute); })));\n    });\n    return ctxs.length === 0 ? [SecurityContext.NONE] : Array.from(new Set(ctxs)).sort();\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar BIND_NAME_REGEXP = /^(?:(?:(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.+))|\\[\\(([^\\)]+)\\)\\]|\\[([^\\]]+)\\]|\\(([^\\)]+)\\))$/;\n// Group 1 = \"bind-\"\nvar KW_BIND_IDX = 1;\n// Group 2 = \"let-\"\nvar KW_LET_IDX = 2;\n// Group 3 = \"ref-/#\"\nvar KW_REF_IDX = 3;\n// Group 4 = \"on-\"\nvar KW_ON_IDX = 4;\n// Group 5 = \"bindon-\"\nvar KW_BINDON_IDX = 5;\n// Group 6 = \"@\"\nvar KW_AT_IDX = 6;\n// Group 7 = the identifier after \"bind-\", \"let-\", \"ref-/#\", \"on-\", \"bindon-\" or \"@\"\nvar IDENT_KW_IDX = 7;\n// Group 8 = identifier inside [()]\nvar IDENT_BANANA_BOX_IDX = 8;\n// Group 9 = identifier inside []\nvar IDENT_PROPERTY_IDX = 9;\n// Group 10 = identifier inside ()\nvar IDENT_EVENT_IDX = 10;\nvar TEMPLATE_ATTR_PREFIX = '*';\nvar CLASS_ATTR = 'class';\nvar TEXT_CSS_SELECTOR = CssSelector.parse('*')[0];\nvar TemplateParseError = /** @class */ (function (_super) {\n    __extends(TemplateParseError, _super);\n    function TemplateParseError(message, span, level) {\n        return _super.call(this, span, message, level) || this;\n    }\n    return TemplateParseError;\n}(ParseError));\nvar TemplateParseResult = /** @class */ (function () {\n    function TemplateParseResult(templateAst, usedPipes, errors) {\n        this.templateAst = templateAst;\n        this.usedPipes = usedPipes;\n        this.errors = errors;\n    }\n    return TemplateParseResult;\n}());\nvar TemplateParser = /** @class */ (function () {\n    function TemplateParser(_config, _reflector, _exprParser, _schemaRegistry, _htmlParser, _console, transforms) {\n        this._config = _config;\n        this._reflector = _reflector;\n        this._exprParser = _exprParser;\n        this._schemaRegistry = _schemaRegistry;\n        this._htmlParser = _htmlParser;\n        this._console = _console;\n        this.transforms = transforms;\n    }\n    Object.defineProperty(TemplateParser.prototype, \"expressionParser\", {\n        get: function () { return this._exprParser; },\n        enumerable: true,\n        configurable: true\n    });\n    TemplateParser.prototype.parse = function (component, template, directives, pipes, schemas, templateUrl, preserveWhitespaces) {\n        var result = this.tryParse(component, template, directives, pipes, schemas, templateUrl, preserveWhitespaces);\n        var warnings = result.errors.filter(function (error$$1) { return error$$1.level === ParseErrorLevel.WARNING; });\n        var errors = result.errors.filter(function (error$$1) { return error$$1.level === ParseErrorLevel.ERROR; });\n        if (warnings.length > 0) {\n            this._console.warn(\"Template parse warnings:\\n\" + warnings.join('\\n'));\n        }\n        if (errors.length > 0) {\n            var errorString = errors.join('\\n');\n            throw syntaxError(\"Template parse errors:\\n\" + errorString, errors);\n        }\n        return { template: result.templateAst, pipes: result.usedPipes };\n    };\n    TemplateParser.prototype.tryParse = function (component, template, directives, pipes, schemas, templateUrl, preserveWhitespaces) {\n        var htmlParseResult = typeof template === 'string' ?\n            this._htmlParser.parse(template, templateUrl, true, this.getInterpolationConfig(component)) :\n            template;\n        if (!preserveWhitespaces) {\n            htmlParseResult = removeWhitespaces(htmlParseResult);\n        }\n        return this.tryParseHtml(this.expandHtml(htmlParseResult), component, directives, pipes, schemas);\n    };\n    TemplateParser.prototype.tryParseHtml = function (htmlAstWithErrors, component, directives, pipes, schemas) {\n        var result;\n        var errors = htmlAstWithErrors.errors;\n        var usedPipes = [];\n        if (htmlAstWithErrors.rootNodes.length > 0) {\n            var uniqDirectives = removeSummaryDuplicates(directives);\n            var uniqPipes = removeSummaryDuplicates(pipes);\n            var providerViewContext = new ProviderViewContext(this._reflector, component);\n            var interpolationConfig = undefined;\n            if (component.template && component.template.interpolation) {\n                interpolationConfig = {\n                    start: component.template.interpolation[0],\n                    end: component.template.interpolation[1]\n                };\n            }\n            var bindingParser = new BindingParser(this._exprParser, interpolationConfig, this._schemaRegistry, uniqPipes, errors);\n            var parseVisitor = new TemplateParseVisitor(this._reflector, this._config, providerViewContext, uniqDirectives, bindingParser, this._schemaRegistry, schemas, errors);\n            result = visitAll(parseVisitor, htmlAstWithErrors.rootNodes, EMPTY_ELEMENT_CONTEXT);\n            errors.push.apply(errors, __spread(providerViewContext.errors));\n            usedPipes.push.apply(usedPipes, __spread(bindingParser.getUsedPipes()));\n        }\n        else {\n            result = [];\n        }\n        this._assertNoReferenceDuplicationOnTemplate(result, errors);\n        if (errors.length > 0) {\n            return new TemplateParseResult(result, usedPipes, errors);\n        }\n        if (this.transforms) {\n            this.transforms.forEach(function (transform) { result = templateVisitAll(transform, result); });\n        }\n        return new TemplateParseResult(result, usedPipes, errors);\n    };\n    TemplateParser.prototype.expandHtml = function (htmlAstWithErrors, forced) {\n        if (forced === void 0) { forced = false; }\n        var errors = htmlAstWithErrors.errors;\n        if (errors.length == 0 || forced) {\n            // Transform ICU messages to angular directives\n            var expandedHtmlAst = expandNodes(htmlAstWithErrors.rootNodes);\n            errors.push.apply(errors, __spread(expandedHtmlAst.errors));\n            htmlAstWithErrors = new ParseTreeResult(expandedHtmlAst.nodes, errors);\n        }\n        return htmlAstWithErrors;\n    };\n    TemplateParser.prototype.getInterpolationConfig = function (component) {\n        if (component.template) {\n            return InterpolationConfig.fromArray(component.template.interpolation);\n        }\n        return undefined;\n    };\n    /** @internal */\n    TemplateParser.prototype._assertNoReferenceDuplicationOnTemplate = function (result, errors) {\n        var existingReferences = [];\n        result.filter(function (element) { return !!element.references; })\n            .forEach(function (element) { return element.references.forEach(function (reference) {\n            var name = reference.name;\n            if (existingReferences.indexOf(name) < 0) {\n                existingReferences.push(name);\n            }\n            else {\n                var error$$1 = new TemplateParseError(\"Reference \\\"#\" + name + \"\\\" is defined several times\", reference.sourceSpan, ParseErrorLevel.ERROR);\n                errors.push(error$$1);\n            }\n        }); });\n    };\n    return TemplateParser;\n}());\nvar TemplateParseVisitor = /** @class */ (function () {\n    function TemplateParseVisitor(reflector, config, providerViewContext, directives, _bindingParser, _schemaRegistry, _schemas, _targetErrors) {\n        var _this = this;\n        this.reflector = reflector;\n        this.config = config;\n        this.providerViewContext = providerViewContext;\n        this._bindingParser = _bindingParser;\n        this._schemaRegistry = _schemaRegistry;\n        this._schemas = _schemas;\n        this._targetErrors = _targetErrors;\n        this.selectorMatcher = new SelectorMatcher();\n        this.directivesIndex = new Map();\n        this.ngContentCount = 0;\n        // Note: queries start with id 1 so we can use the number in a Bloom filter!\n        this.contentQueryStartId = providerViewContext.component.viewQueries.length + 1;\n        directives.forEach(function (directive, index) {\n            var selector = CssSelector.parse(directive.selector);\n            _this.selectorMatcher.addSelectables(selector, directive);\n            _this.directivesIndex.set(directive, index);\n        });\n    }\n    TemplateParseVisitor.prototype.visitExpansion = function (expansion, context) { return null; };\n    TemplateParseVisitor.prototype.visitExpansionCase = function (expansionCase, context) { return null; };\n    TemplateParseVisitor.prototype.visitText = function (text, parent) {\n        var ngContentIndex = parent.findNgContentIndex(TEXT_CSS_SELECTOR);\n        var valueNoNgsp = replaceNgsp(text.value);\n        var expr = this._bindingParser.parseInterpolation(valueNoNgsp, text.sourceSpan);\n        return expr ? new BoundTextAst(expr, ngContentIndex, text.sourceSpan) :\n            new TextAst(valueNoNgsp, ngContentIndex, text.sourceSpan);\n    };\n    TemplateParseVisitor.prototype.visitAttribute = function (attribute, context) {\n        return new AttrAst(attribute.name, attribute.value, attribute.sourceSpan);\n    };\n    TemplateParseVisitor.prototype.visitComment = function (comment, context) { return null; };\n    TemplateParseVisitor.prototype.visitElement = function (element, parent) {\n        var _this = this;\n        var queryStartIndex = this.contentQueryStartId;\n        var nodeName = element.name;\n        var preparsedElement = preparseElement(element);\n        if (preparsedElement.type === PreparsedElementType.SCRIPT ||\n            preparsedElement.type === PreparsedElementType.STYLE) {\n            // Skipping <script> for security reasons\n            // Skipping <style> as we already processed them\n            // in the StyleCompiler\n            return null;\n        }\n        if (preparsedElement.type === PreparsedElementType.STYLESHEET &&\n            isStyleUrlResolvable(preparsedElement.hrefAttr)) {\n            // Skipping stylesheets with either relative urls or package scheme as we already processed\n            // them in the StyleCompiler\n            return null;\n        }\n        var matchableAttrs = [];\n        var elementOrDirectiveProps = [];\n        var elementOrDirectiveRefs = [];\n        var elementVars = [];\n        var events = [];\n        var templateElementOrDirectiveProps = [];\n        var templateMatchableAttrs = [];\n        var templateElementVars = [];\n        var hasInlineTemplates = false;\n        var attrs = [];\n        var isTemplateElement = isNgTemplate(element.name);\n        element.attrs.forEach(function (attr) {\n            var hasBinding = _this._parseAttr(isTemplateElement, attr, matchableAttrs, elementOrDirectiveProps, events, elementOrDirectiveRefs, elementVars);\n            var templateBindingsSource;\n            var prefixToken;\n            var normalizedName = _this._normalizeAttributeName(attr.name);\n            if (normalizedName.startsWith(TEMPLATE_ATTR_PREFIX)) {\n                templateBindingsSource = attr.value;\n                prefixToken = normalizedName.substring(TEMPLATE_ATTR_PREFIX.length) + ':';\n            }\n            var hasTemplateBinding = templateBindingsSource != null;\n            if (hasTemplateBinding) {\n                if (hasInlineTemplates) {\n                    _this._reportError(\"Can't have multiple template bindings on one element. Use only one attribute prefixed with *\", attr.sourceSpan);\n                }\n                hasInlineTemplates = true;\n                _this._bindingParser.parseInlineTemplateBinding(prefixToken, templateBindingsSource, attr.sourceSpan, templateMatchableAttrs, templateElementOrDirectiveProps, templateElementVars);\n            }\n            if (!hasBinding && !hasTemplateBinding) {\n                // don't include the bindings as attributes as well in the AST\n                attrs.push(_this.visitAttribute(attr, null));\n                matchableAttrs.push([attr.name, attr.value]);\n            }\n        });\n        var elementCssSelector = createElementCssSelector(nodeName, matchableAttrs);\n        var _a = this._parseDirectives(this.selectorMatcher, elementCssSelector), directiveMetas = _a.directives, matchElement = _a.matchElement;\n        var references = [];\n        var boundDirectivePropNames = new Set();\n        var directiveAsts = this._createDirectiveAsts(isTemplateElement, element.name, directiveMetas, elementOrDirectiveProps, elementOrDirectiveRefs, element.sourceSpan, references, boundDirectivePropNames);\n        var elementProps = this._createElementPropertyAsts(element.name, elementOrDirectiveProps, boundDirectivePropNames);\n        var isViewRoot = parent.isTemplateElement || hasInlineTemplates;\n        var providerContext = new ProviderElementContext(this.providerViewContext, parent.providerContext, isViewRoot, directiveAsts, attrs, references, isTemplateElement, queryStartIndex, element.sourceSpan);\n        var children = visitAll(preparsedElement.nonBindable ? NON_BINDABLE_VISITOR : this, element.children, ElementContext.create(isTemplateElement, directiveAsts, isTemplateElement ? parent.providerContext : providerContext));\n        providerContext.afterElement();\n        // Override the actual selector when the `ngProjectAs` attribute is provided\n        var projectionSelector = preparsedElement.projectAs != null ?\n            CssSelector.parse(preparsedElement.projectAs)[0] :\n            elementCssSelector;\n        var ngContentIndex = parent.findNgContentIndex(projectionSelector);\n        var parsedElement;\n        if (preparsedElement.type === PreparsedElementType.NG_CONTENT) {\n            if (element.children && !element.children.every(_isEmptyTextNode)) {\n                this._reportError(\"<ng-content> element cannot have content.\", element.sourceSpan);\n            }\n            parsedElement = new NgContentAst(this.ngContentCount++, hasInlineTemplates ? null : ngContentIndex, element.sourceSpan);\n        }\n        else if (isTemplateElement) {\n            this._assertAllEventsPublishedByDirectives(directiveAsts, events);\n            this._assertNoComponentsNorElementBindingsOnTemplate(directiveAsts, elementProps, element.sourceSpan);\n            parsedElement = new EmbeddedTemplateAst(attrs, events, references, elementVars, providerContext.transformedDirectiveAsts, providerContext.transformProviders, providerContext.transformedHasViewContainer, providerContext.queryMatches, children, hasInlineTemplates ? null : ngContentIndex, element.sourceSpan);\n        }\n        else {\n            this._assertElementExists(matchElement, element);\n            this._assertOnlyOneComponent(directiveAsts, element.sourceSpan);\n            var ngContentIndex_1 = hasInlineTemplates ? null : parent.findNgContentIndex(projectionSelector);\n            parsedElement = new ElementAst(nodeName, attrs, elementProps, events, references, providerContext.transformedDirectiveAsts, providerContext.transformProviders, providerContext.transformedHasViewContainer, providerContext.queryMatches, children, hasInlineTemplates ? null : ngContentIndex_1, element.sourceSpan, element.endSourceSpan || null);\n        }\n        if (hasInlineTemplates) {\n            var templateQueryStartIndex = this.contentQueryStartId;\n            var templateSelector = createElementCssSelector('ng-template', templateMatchableAttrs);\n            var templateDirectiveMetas = this._parseDirectives(this.selectorMatcher, templateSelector).directives;\n            var templateBoundDirectivePropNames = new Set();\n            var templateDirectiveAsts = this._createDirectiveAsts(true, element.name, templateDirectiveMetas, templateElementOrDirectiveProps, [], element.sourceSpan, [], templateBoundDirectivePropNames);\n            var templateElementProps = this._createElementPropertyAsts(element.name, templateElementOrDirectiveProps, templateBoundDirectivePropNames);\n            this._assertNoComponentsNorElementBindingsOnTemplate(templateDirectiveAsts, templateElementProps, element.sourceSpan);\n            var templateProviderContext = new ProviderElementContext(this.providerViewContext, parent.providerContext, parent.isTemplateElement, templateDirectiveAsts, [], [], true, templateQueryStartIndex, element.sourceSpan);\n            templateProviderContext.afterElement();\n            parsedElement = new EmbeddedTemplateAst([], [], [], templateElementVars, templateProviderContext.transformedDirectiveAsts, templateProviderContext.transformProviders, templateProviderContext.transformedHasViewContainer, templateProviderContext.queryMatches, [parsedElement], ngContentIndex, element.sourceSpan);\n        }\n        return parsedElement;\n    };\n    TemplateParseVisitor.prototype._parseAttr = function (isTemplateElement, attr, targetMatchableAttrs, targetProps, targetEvents, targetRefs, targetVars) {\n        var name = this._normalizeAttributeName(attr.name);\n        var value = attr.value;\n        var srcSpan = attr.sourceSpan;\n        var bindParts = name.match(BIND_NAME_REGEXP);\n        var hasBinding = false;\n        if (bindParts !== null) {\n            hasBinding = true;\n            if (bindParts[KW_BIND_IDX] != null) {\n                this._bindingParser.parsePropertyBinding(bindParts[IDENT_KW_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);\n            }\n            else if (bindParts[KW_LET_IDX]) {\n                if (isTemplateElement) {\n                    var identifier = bindParts[IDENT_KW_IDX];\n                    this._parseVariable(identifier, value, srcSpan, targetVars);\n                }\n                else {\n                    this._reportError(\"\\\"let-\\\" is only supported on ng-template elements.\", srcSpan);\n                }\n            }\n            else if (bindParts[KW_REF_IDX]) {\n                var identifier = bindParts[IDENT_KW_IDX];\n                this._parseReference(identifier, value, srcSpan, targetRefs);\n            }\n            else if (bindParts[KW_ON_IDX]) {\n                this._bindingParser.parseEvent(bindParts[IDENT_KW_IDX], value, srcSpan, targetMatchableAttrs, targetEvents);\n            }\n            else if (bindParts[KW_BINDON_IDX]) {\n                this._bindingParser.parsePropertyBinding(bindParts[IDENT_KW_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);\n                this._parseAssignmentEvent(bindParts[IDENT_KW_IDX], value, srcSpan, targetMatchableAttrs, targetEvents);\n            }\n            else if (bindParts[KW_AT_IDX]) {\n                this._bindingParser.parseLiteralAttr(name, value, srcSpan, targetMatchableAttrs, targetProps);\n            }\n            else if (bindParts[IDENT_BANANA_BOX_IDX]) {\n                this._bindingParser.parsePropertyBinding(bindParts[IDENT_BANANA_BOX_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);\n                this._parseAssignmentEvent(bindParts[IDENT_BANANA_BOX_IDX], value, srcSpan, targetMatchableAttrs, targetEvents);\n            }\n            else if (bindParts[IDENT_PROPERTY_IDX]) {\n                this._bindingParser.parsePropertyBinding(bindParts[IDENT_PROPERTY_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);\n            }\n            else if (bindParts[IDENT_EVENT_IDX]) {\n                this._bindingParser.parseEvent(bindParts[IDENT_EVENT_IDX], value, srcSpan, targetMatchableAttrs, targetEvents);\n            }\n        }\n        else {\n            hasBinding = this._bindingParser.parsePropertyInterpolation(name, value, srcSpan, targetMatchableAttrs, targetProps);\n        }\n        if (!hasBinding) {\n            this._bindingParser.parseLiteralAttr(name, value, srcSpan, targetMatchableAttrs, targetProps);\n        }\n        return hasBinding;\n    };\n    TemplateParseVisitor.prototype._normalizeAttributeName = function (attrName) {\n        return /^data-/i.test(attrName) ? attrName.substring(5) : attrName;\n    };\n    TemplateParseVisitor.prototype._parseVariable = function (identifier, value, sourceSpan, targetVars) {\n        if (identifier.indexOf('-') > -1) {\n            this._reportError(\"\\\"-\\\" is not allowed in variable names\", sourceSpan);\n        }\n        targetVars.push(new VariableAst(identifier, value, sourceSpan));\n    };\n    TemplateParseVisitor.prototype._parseReference = function (identifier, value, sourceSpan, targetRefs) {\n        if (identifier.indexOf('-') > -1) {\n            this._reportError(\"\\\"-\\\" is not allowed in reference names\", sourceSpan);\n        }\n        targetRefs.push(new ElementOrDirectiveRef(identifier, value, sourceSpan));\n    };\n    TemplateParseVisitor.prototype._parseAssignmentEvent = function (name, expression, sourceSpan, targetMatchableAttrs, targetEvents) {\n        this._bindingParser.parseEvent(name + \"Change\", expression + \"=$event\", sourceSpan, targetMatchableAttrs, targetEvents);\n    };\n    TemplateParseVisitor.prototype._parseDirectives = function (selectorMatcher, elementCssSelector) {\n        var _this = this;\n        // Need to sort the directives so that we get consistent results throughout,\n        // as selectorMatcher uses Maps inside.\n        // Also deduplicate directives as they might match more than one time!\n        var directives = new Array(this.directivesIndex.size);\n        // Whether any directive selector matches on the element name\n        var matchElement = false;\n        selectorMatcher.match(elementCssSelector, function (selector, directive) {\n            directives[_this.directivesIndex.get(directive)] = directive;\n            matchElement = matchElement || selector.hasElementSelector();\n        });\n        return {\n            directives: directives.filter(function (dir) { return !!dir; }),\n            matchElement: matchElement,\n        };\n    };\n    TemplateParseVisitor.prototype._createDirectiveAsts = function (isTemplateElement, elementName, directives, props, elementOrDirectiveRefs, elementSourceSpan, targetReferences, targetBoundDirectivePropNames) {\n        var _this = this;\n        var matchedReferences = new Set();\n        var component = null;\n        var directiveAsts = directives.map(function (directive) {\n            var sourceSpan = new ParseSourceSpan(elementSourceSpan.start, elementSourceSpan.end, \"Directive \" + identifierName(directive.type));\n            if (directive.isComponent) {\n                component = directive;\n            }\n            var directiveProperties = [];\n            var hostProperties = _this._bindingParser.createDirectiveHostPropertyAsts(directive, elementName, sourceSpan);\n            // Note: We need to check the host properties here as well,\n            // as we don't know the element name in the DirectiveWrapperCompiler yet.\n            hostProperties = _this._checkPropertiesInSchema(elementName, hostProperties);\n            var hostEvents = _this._bindingParser.createDirectiveHostEventAsts(directive, sourceSpan);\n            _this._createDirectivePropertyAsts(directive.inputs, props, directiveProperties, targetBoundDirectivePropNames);\n            elementOrDirectiveRefs.forEach(function (elOrDirRef) {\n                if ((elOrDirRef.value.length === 0 && directive.isComponent) ||\n                    (elOrDirRef.isReferenceToDirective(directive))) {\n                    targetReferences.push(new ReferenceAst(elOrDirRef.name, createTokenForReference(directive.type.reference), elOrDirRef.value, elOrDirRef.sourceSpan));\n                    matchedReferences.add(elOrDirRef.name);\n                }\n            });\n            var contentQueryStartId = _this.contentQueryStartId;\n            _this.contentQueryStartId += directive.queries.length;\n            return new DirectiveAst(directive, directiveProperties, hostProperties, hostEvents, contentQueryStartId, sourceSpan);\n        });\n        elementOrDirectiveRefs.forEach(function (elOrDirRef) {\n            if (elOrDirRef.value.length > 0) {\n                if (!matchedReferences.has(elOrDirRef.name)) {\n                    _this._reportError(\"There is no directive with \\\"exportAs\\\" set to \\\"\" + elOrDirRef.value + \"\\\"\", elOrDirRef.sourceSpan);\n                }\n            }\n            else if (!component) {\n                var refToken = null;\n                if (isTemplateElement) {\n                    refToken = createTokenForExternalReference(_this.reflector, Identifiers.TemplateRef);\n                }\n                targetReferences.push(new ReferenceAst(elOrDirRef.name, refToken, elOrDirRef.value, elOrDirRef.sourceSpan));\n            }\n        });\n        return directiveAsts;\n    };\n    TemplateParseVisitor.prototype._createDirectivePropertyAsts = function (directiveProperties, boundProps, targetBoundDirectiveProps, targetBoundDirectivePropNames) {\n        if (directiveProperties) {\n            var boundPropsByName_1 = new Map();\n            boundProps.forEach(function (boundProp) {\n                var prevValue = boundPropsByName_1.get(boundProp.name);\n                if (!prevValue || prevValue.isLiteral) {\n                    // give [a]=\"b\" a higher precedence than a=\"b\" on the same element\n                    boundPropsByName_1.set(boundProp.name, boundProp);\n                }\n            });\n            Object.keys(directiveProperties).forEach(function (dirProp) {\n                var elProp = directiveProperties[dirProp];\n                var boundProp = boundPropsByName_1.get(elProp);\n                // Bindings are optional, so this binding only needs to be set up if an expression is given.\n                if (boundProp) {\n                    targetBoundDirectivePropNames.add(boundProp.name);\n                    if (!isEmptyExpression(boundProp.expression)) {\n                        targetBoundDirectiveProps.push(new BoundDirectivePropertyAst(dirProp, boundProp.name, boundProp.expression, boundProp.sourceSpan));\n                    }\n                }\n            });\n        }\n    };\n    TemplateParseVisitor.prototype._createElementPropertyAsts = function (elementName, props, boundDirectivePropNames) {\n        var _this = this;\n        var boundElementProps = [];\n        props.forEach(function (prop) {\n            if (!prop.isLiteral && !boundDirectivePropNames.has(prop.name)) {\n                boundElementProps.push(_this._bindingParser.createElementPropertyAst(elementName, prop));\n            }\n        });\n        return this._checkPropertiesInSchema(elementName, boundElementProps);\n    };\n    TemplateParseVisitor.prototype._findComponentDirectives = function (directives) {\n        return directives.filter(function (directive) { return directive.directive.isComponent; });\n    };\n    TemplateParseVisitor.prototype._findComponentDirectiveNames = function (directives) {\n        return this._findComponentDirectives(directives)\n            .map(function (directive) { return identifierName(directive.directive.type); });\n    };\n    TemplateParseVisitor.prototype._assertOnlyOneComponent = function (directives, sourceSpan) {\n        var componentTypeNames = this._findComponentDirectiveNames(directives);\n        if (componentTypeNames.length > 1) {\n            this._reportError(\"More than one component matched on this element.\\n\" +\n                \"Make sure that only one component's selector can match a given element.\\n\" +\n                (\"Conflicting components: \" + componentTypeNames.join(',')), sourceSpan);\n        }\n    };\n    /**\n     * Make sure that non-angular tags conform to the schemas.\n     *\n     * Note: An element is considered an angular tag when at least one directive selector matches the\n     * tag name.\n     *\n     * @param matchElement Whether any directive has matched on the tag name\n     * @param element the html element\n     */\n    TemplateParseVisitor.prototype._assertElementExists = function (matchElement, element) {\n        var elName = element.name.replace(/^:xhtml:/, '');\n        if (!matchElement && !this._schemaRegistry.hasElement(elName, this._schemas)) {\n            var errorMsg = \"'\" + elName + \"' is not a known element:\\n\";\n            errorMsg +=\n                \"1. If '\" + elName + \"' is an Angular component, then verify that it is part of this module.\\n\";\n            if (elName.indexOf('-') > -1) {\n                errorMsg +=\n                    \"2. If '\" + elName + \"' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the '@NgModule.schemas' of this component to suppress this message.\";\n            }\n            else {\n                errorMsg +=\n                    \"2. To allow any element add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.\";\n            }\n            this._reportError(errorMsg, element.sourceSpan);\n        }\n    };\n    TemplateParseVisitor.prototype._assertNoComponentsNorElementBindingsOnTemplate = function (directives, elementProps, sourceSpan) {\n        var _this = this;\n        var componentTypeNames = this._findComponentDirectiveNames(directives);\n        if (componentTypeNames.length > 0) {\n            this._reportError(\"Components on an embedded template: \" + componentTypeNames.join(','), sourceSpan);\n        }\n        elementProps.forEach(function (prop) {\n            _this._reportError(\"Property binding \" + prop.name + \" not used by any directive on an embedded template. Make sure that the property name is spelled correctly and all directives are listed in the \\\"@NgModule.declarations\\\".\", sourceSpan);\n        });\n    };\n    TemplateParseVisitor.prototype._assertAllEventsPublishedByDirectives = function (directives, events) {\n        var _this = this;\n        var allDirectiveEvents = new Set();\n        directives.forEach(function (directive) {\n            Object.keys(directive.directive.outputs).forEach(function (k) {\n                var eventName = directive.directive.outputs[k];\n                allDirectiveEvents.add(eventName);\n            });\n        });\n        events.forEach(function (event) {\n            if (event.target != null || !allDirectiveEvents.has(event.name)) {\n                _this._reportError(\"Event binding \" + event.fullName + \" not emitted by any directive on an embedded template. Make sure that the event name is spelled correctly and all directives are listed in the \\\"@NgModule.declarations\\\".\", event.sourceSpan);\n            }\n        });\n    };\n    TemplateParseVisitor.prototype._checkPropertiesInSchema = function (elementName, boundProps) {\n        var _this = this;\n        // Note: We can't filter out empty expressions before this method,\n        // as we still want to validate them!\n        return boundProps.filter(function (boundProp) {\n            if (boundProp.type === PropertyBindingType.Property &&\n                !_this._schemaRegistry.hasProperty(elementName, boundProp.name, _this._schemas)) {\n                var errorMsg = \"Can't bind to '\" + boundProp.name + \"' since it isn't a known property of '\" + elementName + \"'.\";\n                if (elementName.startsWith('ng-')) {\n                    errorMsg +=\n                        \"\\n1. If '\" + boundProp.name + \"' is an Angular directive, then add 'CommonModule' to the '@NgModule.imports' of this component.\" +\n                            \"\\n2. To allow any property add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.\";\n                }\n                else if (elementName.indexOf('-') > -1) {\n                    errorMsg +=\n                        \"\\n1. If '\" + elementName + \"' is an Angular component and it has '\" + boundProp.name + \"' input, then verify that it is part of this module.\" +\n                            (\"\\n2. If '\" + elementName + \"' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the '@NgModule.schemas' of this component to suppress this message.\") +\n                            \"\\n3. To allow any property add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.\";\n                }\n                _this._reportError(errorMsg, boundProp.sourceSpan);\n            }\n            return !isEmptyExpression(boundProp.value);\n        });\n    };\n    TemplateParseVisitor.prototype._reportError = function (message, sourceSpan, level) {\n        if (level === void 0) { level = ParseErrorLevel.ERROR; }\n        this._targetErrors.push(new ParseError(sourceSpan, message, level));\n    };\n    return TemplateParseVisitor;\n}());\nvar NonBindableVisitor = /** @class */ (function () {\n    function NonBindableVisitor() {\n    }\n    NonBindableVisitor.prototype.visitElement = function (ast, parent) {\n        var preparsedElement = preparseElement(ast);\n        if (preparsedElement.type === PreparsedElementType.SCRIPT ||\n            preparsedElement.type === PreparsedElementType.STYLE ||\n            preparsedElement.type === PreparsedElementType.STYLESHEET) {\n            // Skipping <script> for security reasons\n            // Skipping <style> and stylesheets as we already processed them\n            // in the StyleCompiler\n            return null;\n        }\n        var attrNameAndValues = ast.attrs.map(function (attr) { return [attr.name, attr.value]; });\n        var selector = createElementCssSelector(ast.name, attrNameAndValues);\n        var ngContentIndex = parent.findNgContentIndex(selector);\n        var children = visitAll(this, ast.children, EMPTY_ELEMENT_CONTEXT);\n        return new ElementAst(ast.name, visitAll(this, ast.attrs), [], [], [], [], [], false, [], children, ngContentIndex, ast.sourceSpan, ast.endSourceSpan);\n    };\n    NonBindableVisitor.prototype.visitComment = function (comment, context) { return null; };\n    NonBindableVisitor.prototype.visitAttribute = function (attribute, context) {\n        return new AttrAst(attribute.name, attribute.value, attribute.sourceSpan);\n    };\n    NonBindableVisitor.prototype.visitText = function (text, parent) {\n        var ngContentIndex = parent.findNgContentIndex(TEXT_CSS_SELECTOR);\n        return new TextAst(text.value, ngContentIndex, text.sourceSpan);\n    };\n    NonBindableVisitor.prototype.visitExpansion = function (expansion, context) { return expansion; };\n    NonBindableVisitor.prototype.visitExpansionCase = function (expansionCase, context) { return expansionCase; };\n    return NonBindableVisitor;\n}());\n/**\n * A reference to an element or directive in a template. E.g., the reference in this template:\n *\n * <div #myMenu=\"coolMenu\">\n *\n * would be {name: 'myMenu', value: 'coolMenu', sourceSpan: ...}\n */\nvar ElementOrDirectiveRef = /** @class */ (function () {\n    function ElementOrDirectiveRef(name, value, sourceSpan) {\n        this.name = name;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    /** Gets whether this is a reference to the given directive. */\n    ElementOrDirectiveRef.prototype.isReferenceToDirective = function (directive) {\n        return splitExportAs(directive.exportAs).indexOf(this.value) !== -1;\n    };\n    return ElementOrDirectiveRef;\n}());\n/** Splits a raw, potentially comma-delimited `exportAs` value into an array of names. */\nfunction splitExportAs(exportAs) {\n    return exportAs ? exportAs.split(',').map(function (e) { return e.trim(); }) : [];\n}\nfunction splitClasses(classAttrValue) {\n    return classAttrValue.trim().split(/\\s+/g);\n}\nvar ElementContext = /** @class */ (function () {\n    function ElementContext(isTemplateElement, _ngContentIndexMatcher, _wildcardNgContentIndex, providerContext) {\n        this.isTemplateElement = isTemplateElement;\n        this._ngContentIndexMatcher = _ngContentIndexMatcher;\n        this._wildcardNgContentIndex = _wildcardNgContentIndex;\n        this.providerContext = providerContext;\n    }\n    ElementContext.create = function (isTemplateElement, directives, providerContext) {\n        var matcher = new SelectorMatcher();\n        var wildcardNgContentIndex = null;\n        var component = directives.find(function (directive) { return directive.directive.isComponent; });\n        if (component) {\n            var ngContentSelectors = component.directive.template.ngContentSelectors;\n            for (var i = 0; i < ngContentSelectors.length; i++) {\n                var selector = ngContentSelectors[i];\n                if (selector === '*') {\n                    wildcardNgContentIndex = i;\n                }\n                else {\n                    matcher.addSelectables(CssSelector.parse(ngContentSelectors[i]), i);\n                }\n            }\n        }\n        return new ElementContext(isTemplateElement, matcher, wildcardNgContentIndex, providerContext);\n    };\n    ElementContext.prototype.findNgContentIndex = function (selector) {\n        var ngContentIndices = [];\n        this._ngContentIndexMatcher.match(selector, function (selector, ngContentIndex) { ngContentIndices.push(ngContentIndex); });\n        ngContentIndices.sort();\n        if (this._wildcardNgContentIndex != null) {\n            ngContentIndices.push(this._wildcardNgContentIndex);\n        }\n        return ngContentIndices.length > 0 ? ngContentIndices[0] : null;\n    };\n    return ElementContext;\n}());\nfunction createElementCssSelector(elementName, attributes) {\n    var cssSelector = new CssSelector();\n    var elNameNoNs = splitNsName(elementName)[1];\n    cssSelector.setElement(elNameNoNs);\n    for (var i = 0; i < attributes.length; i++) {\n        var attrName = attributes[i][0];\n        var attrNameNoNs = splitNsName(attrName)[1];\n        var attrValue = attributes[i][1];\n        cssSelector.addAttribute(attrNameNoNs, attrValue);\n        if (attrName.toLowerCase() == CLASS_ATTR) {\n            var classes = splitClasses(attrValue);\n            classes.forEach(function (className) { return cssSelector.addClassName(className); });\n        }\n    }\n    return cssSelector;\n}\nvar EMPTY_ELEMENT_CONTEXT = new ElementContext(true, new SelectorMatcher(), null, null);\nvar NON_BINDABLE_VISITOR = new NonBindableVisitor();\nfunction _isEmptyTextNode(node) {\n    return node instanceof Text && node.value.trim().length == 0;\n}\nfunction removeSummaryDuplicates(items) {\n    var map = new Map();\n    items.forEach(function (item) {\n        if (!map.get(item.type.reference)) {\n            map.set(item.type.reference, item);\n        }\n    });\n    return Array.from(map.values());\n}\nfunction isEmptyExpression(ast) {\n    if (ast instanceof ASTWithSource) {\n        ast = ast.ast;\n    }\n    return ast instanceof EmptyExpr;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar EventHandlerVars = /** @class */ (function () {\n    function EventHandlerVars() {\n    }\n    EventHandlerVars.event = variable('$event');\n    return EventHandlerVars;\n}());\n/**\n * Converts the given expression AST into an executable output AST, assuming the expression is\n * used in an action binding (e.g. an event handler).\n */\n\n\nvar BindingForm;\n(function (BindingForm) {\n    // The general form of binding expression, supports all expressions.\n    BindingForm[BindingForm[\"General\"] = 0] = \"General\";\n    // Try to generate a simple binding (no temporaries or statements)\n    // otherwise generate a general binding\n    BindingForm[BindingForm[\"TrySimple\"] = 1] = \"TrySimple\";\n})(BindingForm || (BindingForm = {}));\n/**\n * Converts the given expression AST into an executable output AST, assuming the expression\n * is used in property binding. The expression has to be preprocessed via\n * `convertPropertyBindingBuiltins`.\n */\n\n\nvar _Mode;\n(function (_Mode) {\n    _Mode[_Mode[\"Statement\"] = 0] = \"Statement\";\n    _Mode[_Mode[\"Expression\"] = 1] = \"Expression\";\n})(_Mode || (_Mode = {}));\nvar _BuiltinAstConverter = /** @class */ (function (_super) {\n    __extends(_BuiltinAstConverter, _super);\n    function _BuiltinAstConverter(_converterFactory) {\n        var _this = _super.call(this) || this;\n        _this._converterFactory = _converterFactory;\n        return _this;\n    }\n    _BuiltinAstConverter.prototype.visitPipe = function (ast, context) {\n        var _this = this;\n        var args = __spread([ast.exp], ast.args).map(function (ast) { return ast.visit(_this, context); });\n        return new BuiltinFunctionCall(ast.span, args, this._converterFactory.createPipeConverter(ast.name, args.length));\n    };\n    _BuiltinAstConverter.prototype.visitLiteralArray = function (ast, context) {\n        var _this = this;\n        var args = ast.expressions.map(function (ast) { return ast.visit(_this, context); });\n        return new BuiltinFunctionCall(ast.span, args, this._converterFactory.createLiteralArrayConverter(ast.expressions.length));\n    };\n    _BuiltinAstConverter.prototype.visitLiteralMap = function (ast, context) {\n        var _this = this;\n        var args = ast.values.map(function (ast) { return ast.visit(_this, context); });\n        return new BuiltinFunctionCall(ast.span, args, this._converterFactory.createLiteralMapConverter(ast.keys));\n    };\n    return _BuiltinAstConverter;\n}(AstTransformer));\nvar BuiltinFunctionCall = /** @class */ (function (_super) {\n    __extends(BuiltinFunctionCall, _super);\n    function BuiltinFunctionCall(span, args, converter) {\n        var _this = _super.call(this, span, null, args) || this;\n        _this.args = args;\n        _this.converter = converter;\n        return _this;\n    }\n    return BuiltinFunctionCall;\n}(FunctionCall));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar LOG_VAR$1 = variable('_l');\nvar VIEW_VAR = variable('_v');\nvar CHECK_VAR = variable('_ck');\nvar COMP_VAR = variable('_co');\nvar EVENT_NAME_VAR = variable('en');\nvar ALLOW_DEFAULT_VAR = variable(\"ad\");\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Context to use when producing a key.\n *\n * This ensures we see the constant not the reference variable when producing\n * a key.\n */\nvar KEY_CONTEXT = {};\n/**\n * A node that is a place-holder that allows the node to be replaced when the actual\n * node is known.\n *\n * This allows the constant pool to change an expression from a direct reference to\n * a constant to a shared constant. It returns a fix-up node that is later allowed to\n * change the referenced expression.\n */\nvar FixupExpression = /** @class */ (function (_super) {\n    __extends(FixupExpression, _super);\n    function FixupExpression(resolved) {\n        var _this = _super.call(this, resolved.type) || this;\n        _this.resolved = resolved;\n        _this.original = resolved;\n        return _this;\n    }\n    FixupExpression.prototype.visitExpression = function (visitor, context) {\n        if (context === KEY_CONTEXT) {\n            // When producing a key we want to traverse the constant not the\n            // variable used to refer to it.\n            return this.original.visitExpression(visitor, context);\n        }\n        else {\n            return this.resolved.visitExpression(visitor, context);\n        }\n    };\n    FixupExpression.prototype.isEquivalent = function (e) {\n        return e instanceof FixupExpression && this.resolved.isEquivalent(e.resolved);\n    };\n    FixupExpression.prototype.isConstant = function () { return true; };\n    FixupExpression.prototype.fixup = function (expression) {\n        this.resolved = expression;\n        this.shared = true;\n    };\n    return FixupExpression;\n}(Expression));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Transform an i18n AST by renaming the placeholder nodes with the given mapper\nvar MapPlaceholderNames = /** @class */ (function (_super) {\n    __extends(MapPlaceholderNames, _super);\n    function MapPlaceholderNames() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MapPlaceholderNames.prototype.convert = function (nodes, mapper) {\n        var _this = this;\n        return mapper ? nodes.map(function (n) { return n.visit(_this, mapper); }) : nodes;\n    };\n    MapPlaceholderNames.prototype.visitTagPlaceholder = function (ph, mapper) {\n        var _this = this;\n        var startName = mapper.toPublicName(ph.startName);\n        var closeName = ph.closeName ? mapper.toPublicName(ph.closeName) : ph.closeName;\n        var children = ph.children.map(function (n) { return n.visit(_this, mapper); });\n        return new TagPlaceholder(ph.tag, ph.attrs, startName, closeName, children, ph.isVoid, ph.sourceSpan);\n    };\n    MapPlaceholderNames.prototype.visitPlaceholder = function (ph, mapper) {\n        return new Placeholder(ph.value, mapper.toPublicName(ph.name), ph.sourceSpan);\n    };\n    MapPlaceholderNames.prototype.visitIcuPlaceholder = function (ph, mapper) {\n        return new IcuPlaceholder(ph.value, mapper.toPublicName(ph.name), ph.sourceSpan);\n    };\n    return MapPlaceholderNames;\n}(CloneVisitor));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar CORE$1 = '@angular/core';\nvar Identifiers$1 = /** @class */ (function () {\n    function Identifiers() {\n    }\n    /* Methods */\n    Identifiers.NEW_METHOD = 'factory';\n    Identifiers.TRANSFORM_METHOD = 'transform';\n    Identifiers.PATCH_DEPS = 'patchedDeps';\n    /* Instructions */\n    Identifiers.createElement = { name: 'E', moduleName: CORE$1 };\n    Identifiers.elementEnd = { name: 'e', moduleName: CORE$1 };\n    Identifiers.elementProperty = { name: 'p', moduleName: CORE$1 };\n    Identifiers.elementAttribute = { name: 'a', moduleName: CORE$1 };\n    Identifiers.elementClassNamed = { name: 'kn', moduleName: CORE$1 };\n    Identifiers.elementStyleNamed = { name: 'sn', moduleName: CORE$1 };\n    Identifiers.containerCreate = { name: 'C', moduleName: CORE$1 };\n    Identifiers.containerEnd = { name: 'c', moduleName: CORE$1 };\n    Identifiers.directiveCreate = { name: 'D', moduleName: CORE$1 };\n    Identifiers.text = { name: 'T', moduleName: CORE$1 };\n    Identifiers.directiveInput = { name: 'i', moduleName: CORE$1 };\n    Identifiers.textCreateBound = { name: 't', moduleName: CORE$1 };\n    Identifiers.bind = { name: 'b', moduleName: CORE$1 };\n    Identifiers.interpolation1 = { name: 'i1', moduleName: CORE$1 };\n    Identifiers.interpolation2 = { name: 'i2', moduleName: CORE$1 };\n    Identifiers.interpolation3 = { name: 'i3', moduleName: CORE$1 };\n    Identifiers.interpolation4 = { name: 'i4', moduleName: CORE$1 };\n    Identifiers.interpolation5 = { name: 'i5', moduleName: CORE$1 };\n    Identifiers.interpolation6 = { name: 'i6', moduleName: CORE$1 };\n    Identifiers.interpolation7 = { name: 'i7', moduleName: CORE$1 };\n    Identifiers.interpolation8 = { name: 'i8', moduleName: CORE$1 };\n    Identifiers.interpolationV = { name: 'iV', moduleName: CORE$1 };\n    Identifiers.pureFunction0 = { name: 'f0', moduleName: CORE$1 };\n    Identifiers.pureFunction1 = { name: 'f1', moduleName: CORE$1 };\n    Identifiers.pureFunction2 = { name: 'f2', moduleName: CORE$1 };\n    Identifiers.pureFunction3 = { name: 'f3', moduleName: CORE$1 };\n    Identifiers.pureFunction4 = { name: 'f4', moduleName: CORE$1 };\n    Identifiers.pureFunction5 = { name: 'f5', moduleName: CORE$1 };\n    Identifiers.pureFunction6 = { name: 'f6', moduleName: CORE$1 };\n    Identifiers.pureFunction7 = { name: 'f7', moduleName: CORE$1 };\n    Identifiers.pureFunction8 = { name: 'f8', moduleName: CORE$1 };\n    Identifiers.pureFunctionV = { name: 'fV', moduleName: CORE$1 };\n    Identifiers.pipeBind1 = { name: 'pb1', moduleName: CORE$1 };\n    Identifiers.pipeBind2 = { name: 'pb2', moduleName: CORE$1 };\n    Identifiers.pipeBind3 = { name: 'pb3', moduleName: CORE$1 };\n    Identifiers.pipeBind4 = { name: 'pb4', moduleName: CORE$1 };\n    Identifiers.pipeBindV = { name: 'pbV', moduleName: CORE$1 };\n    Identifiers.load = { name: 'ld', moduleName: CORE$1 };\n    Identifiers.pipe = { name: 'Pp', moduleName: CORE$1 };\n    Identifiers.projection = { name: 'P', moduleName: CORE$1 };\n    Identifiers.projectionDef = { name: 'pD', moduleName: CORE$1 };\n    Identifiers.refreshComponent = { name: 'r', moduleName: CORE$1 };\n    Identifiers.directiveLifeCycle = { name: 'l', moduleName: CORE$1 };\n    Identifiers.injectAttribute = { name: 'injectAttribute', moduleName: CORE$1 };\n    Identifiers.injectElementRef = { name: 'injectElementRef', moduleName: CORE$1 };\n    Identifiers.injectTemplateRef = { name: 'injectTemplateRef', moduleName: CORE$1 };\n    Identifiers.injectViewContainerRef = { name: 'injectViewContainerRef', moduleName: CORE$1 };\n    Identifiers.directiveInject = { name: 'directiveInject', moduleName: CORE$1 };\n    Identifiers.defineComponent = { name: 'defineComponent', moduleName: CORE$1 };\n    Identifiers.defineDirective = {\n        name: 'defineDirective',\n        moduleName: CORE$1,\n    };\n    Identifiers.defineInjector = {\n        name: 'defineInjector',\n        moduleName: CORE$1,\n    };\n    Identifiers.definePipe = { name: 'definePipe', moduleName: CORE$1 };\n    Identifiers.query = { name: 'Q', moduleName: CORE$1 };\n    Identifiers.queryRefresh = { name: 'qR', moduleName: CORE$1 };\n    Identifiers.NgOnChangesFeature = { name: 'NgOnChangesFeature', moduleName: CORE$1 };\n    Identifiers.listener = { name: 'L', moduleName: CORE$1 };\n    return Identifiers;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar EMPTY_ARRAY = literalArr([]);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Comment to insert above back-patch\n */\n\n/**\n * Comment to mark removable expressions\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** The prefix reference variables */\nvar REFERENCE_PREFIX = '_r';\n\n\nvar BINDING_INSTRUCTION_MAP = (_a = {}, _a[PropertyBindingType.Property] = Identifiers$1.elementProperty, _a[PropertyBindingType.Attribute] = Identifiers$1.elementAttribute, _a[PropertyBindingType.Class] = Identifiers$1.elementClassNamed, _a[PropertyBindingType.Style] = Identifiers$1.elementStyleNamed, _a);\nfunction pipeBinding(args) {\n    switch (args.length) {\n        case 0:\n            // The first parameter to pipeBind is always the value to be transformed followed\n            // by arg.length arguments so the total number of arguments to pipeBind are\n            // arg.length + 1.\n            return Identifiers$1.pipeBind1;\n        case 1:\n            return Identifiers$1.pipeBind2;\n        case 2:\n            return Identifiers$1.pipeBind3;\n        default:\n            return Identifiers$1.pipeBindV;\n    }\n}\nvar pureFunctionIdentifiers = [\n    Identifiers$1.pureFunction0, Identifiers$1.pureFunction1, Identifiers$1.pureFunction2, Identifiers$1.pureFunction3, Identifiers$1.pureFunction4,\n    Identifiers$1.pureFunction5, Identifiers$1.pureFunction6, Identifiers$1.pureFunction7, Identifiers$1.pureFunction8\n];\nfunction getLiteralFactory(outputContext, literal$$1) {\n    var _a = outputContext.constantPool.getLiteralFactory(literal$$1), literalFactory = _a.literalFactory, literalFactoryArguments = _a.literalFactoryArguments;\n    literalFactoryArguments.length > 0 || error(\"Expected arguments to a literal factory function\");\n    var pureFunctionIdent = pureFunctionIdentifiers[literalFactoryArguments.length] || Identifiers$1.pureFunctionV;\n    // Literal factories are pure functions that only need to be re-invoked when the parameters\n    // change.\n    return importExpr(pureFunctionIdent).callFn(__spread([literalFactory], literalFactoryArguments));\n}\nfunction noop() { }\nvar BindingScope = /** @class */ (function () {\n    function BindingScope(parent, declareLocalVarCallback) {\n        if (parent === void 0) { parent = null; }\n        if (declareLocalVarCallback === void 0) { declareLocalVarCallback = noop; }\n        this.parent = parent;\n        this.declareLocalVarCallback = declareLocalVarCallback;\n        /**\n         * Keeps a map from local variables to their expressions.\n         *\n         * This is used when one refers to variable such as: 'let abc = a.b.c`.\n         * - key to the map is the string literal `\"abc\"`.\n         * - value `lhs` is the left hand side which is an AST representing `abc`.\n         * - value `rhs` is the right hand side which is an AST representing `a.b.c`.\n         * - value `declared` is true if the `declareLocalVarCallback` has been called for this scope\n         * already.\n         */\n        this.map = new Map();\n        this.referenceNameIndex = 0;\n    }\n    BindingScope.prototype.get = function (name) {\n        var current = this;\n        while (current) {\n            var value = current.map.get(name);\n            if (value != null) {\n                if (current !== this) {\n                    // make a local copy and reset the `declared` state.\n                    value = { lhs: value.lhs, rhs: value.rhs, declared: false };\n                    // Cache the value locally.\n                    this.map.set(name, value);\n                }\n                if (value.rhs && !value.declared) {\n                    // if it is first time we are referencing the variable in the scope\n                    // than invoke the callback to insert variable declaration.\n                    this.declareLocalVarCallback(value.lhs, value.rhs);\n                    value.declared = true;\n                }\n                return value.lhs;\n            }\n            current = current.parent;\n        }\n        return null;\n    };\n    /**\n     * Create a local variable for later reference.\n     *\n     * @param name Name of the variable.\n     * @param lhs AST representing the left hand side of the `let lhs = rhs;`.\n     * @param rhs AST representing the right hand side of the `let lhs = rhs;`. The `rhs` can be\n     * `undefined` for variable that are ambient such as `$event` and which don't have `rhs`\n     * declaration.\n     */\n    BindingScope.prototype.set = function (name, lhs, rhs) {\n        !this.map.has(name) ||\n            error(\"The name \" + name + \" is already defined in scope to be \" + this.map.get(name));\n        this.map.set(name, { lhs: lhs, rhs: rhs, declared: false });\n        return this;\n    };\n    BindingScope.prototype.getLocal = function (name) { return this.get(name); };\n    BindingScope.prototype.nestedScope = function (declareCallback) {\n        return new BindingScope(this, declareCallback);\n    };\n    BindingScope.prototype.freshReferenceName = function () {\n        var current = this;\n        // Find the top scope as it maintains the global reference count\n        while (current.parent)\n            current = current.parent;\n        var ref = \"\" + REFERENCE_PREFIX + current.referenceNameIndex++;\n        return ref;\n    };\n    BindingScope.ROOT_SCOPE = new BindingScope().set('$event', variable('$event'));\n    return BindingScope;\n}());\n\nvar ValueConverter = /** @class */ (function (_super) {\n    __extends(ValueConverter, _super);\n    function ValueConverter(outputCtx, allocateSlot, definePipe) {\n        var _this = _super.call(this) || this;\n        _this.outputCtx = outputCtx;\n        _this.allocateSlot = allocateSlot;\n        _this.definePipe = definePipe;\n        _this.pipeSlots = new Map();\n        return _this;\n    }\n    // AstMemoryEfficientTransformer\n    ValueConverter.prototype.visitPipe = function (pipe, context) {\n        // Allocate a slot to create the pipe\n        var slot = this.allocateSlot();\n        var slotPseudoLocal = \"PIPE:\" + slot;\n        var target = new PropertyRead(pipe.span, new ImplicitReceiver(pipe.span), slotPseudoLocal);\n        var bindingId = pipeBinding(pipe.args);\n        this.definePipe(pipe.name, slotPseudoLocal, slot, importExpr(bindingId));\n        var value = pipe.exp.visit(this);\n        var args = this.visitAll(pipe.args);\n        return new FunctionCall(pipe.span, target, __spread([new LiteralPrimitive(pipe.span, slot), value], args));\n    };\n    ValueConverter.prototype.visitLiteralArray = function (array, context) {\n        var _this = this;\n        return new BuiltinFunctionCall(array.span, this.visitAll(array.expressions), function (values) {\n            // If the literal has calculated (non-literal) elements transform it into\n            // calls to literal factories that compose the literal and will cache intermediate\n            // values. Otherwise, just return an literal array that contains the values.\n            var literal$$1 = literalArr(values);\n            return values.every(function (a) { return a.isConstant(); }) ?\n                _this.outputCtx.constantPool.getConstLiteral(literal$$1, true) :\n                getLiteralFactory(_this.outputCtx, literal$$1);\n        });\n    };\n    ValueConverter.prototype.visitLiteralMap = function (map, context) {\n        var _this = this;\n        return new BuiltinFunctionCall(map.span, this.visitAll(map.values), function (values) {\n            // If the literal has calculated (non-literal) elements  transform it into\n            // calls to literal factories that compose the literal and will cache intermediate\n            // values. Otherwise, just return an literal array that contains the values.\n            var literal$$1 = literalMap(values.map(function (value, index) { return ({ key: map.keys[index].key, value: value, quoted: map.keys[index].quoted }); }));\n            return values.every(function (a) { return a.isConstant(); }) ?\n                _this.outputCtx.constantPool.getConstLiteral(literal$$1, true) :\n                getLiteralFactory(_this.outputCtx, literal$$1);\n        });\n    };\n    return ValueConverter;\n}(AstMemoryEfficientTransformer));\nvar ContentProjectionVisitor = /** @class */ (function (_super) {\n    __extends(ContentProjectionVisitor, _super);\n    function ContentProjectionVisitor(projectionMap, ngContentSelectors) {\n        var _this = _super.call(this) || this;\n        _this.projectionMap = projectionMap;\n        _this.ngContentSelectors = ngContentSelectors;\n        _this.index = 1;\n        return _this;\n    }\n    ContentProjectionVisitor.prototype.visitNgContent = function (ngContent) {\n        var selector = this.ngContentSelectors[ngContent.index];\n        if (selector == null) {\n            error(\"could not find selector for index \" + ngContent.index + \" in \" + ngContent);\n        }\n        if (!selector || selector === '*') {\n            this.projectionMap.set(ngContent, { index: 0 });\n        }\n        else {\n            this.projectionMap.set(ngContent, { index: this.index++, selector: selector });\n        }\n    };\n    return ContentProjectionVisitor;\n}(RecursiveTemplateAstVisitor));\nvar _a;\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Write a pipe definition to the output context.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TS = /^(?!.*\\.d\\.ts$).*\\.ts$/;\nvar ResolvedStaticSymbol = /** @class */ (function () {\n    function ResolvedStaticSymbol(symbol, metadata) {\n        this.symbol = symbol;\n        this.metadata = metadata;\n    }\n    return ResolvedStaticSymbol;\n}());\nvar SUPPORTED_SCHEMA_VERSION = 4;\n/**\n * This class is responsible for loading metadata per symbol,\n * and normalizing references between symbols.\n *\n * Internally, it only uses symbols without members,\n * and deduces the values for symbols with members based\n * on these symbols.\n */\nvar StaticSymbolResolver = /** @class */ (function () {\n    function StaticSymbolResolver(host, staticSymbolCache, summaryResolver, errorRecorder) {\n        this.host = host;\n        this.staticSymbolCache = staticSymbolCache;\n        this.summaryResolver = summaryResolver;\n        this.errorRecorder = errorRecorder;\n        this.metadataCache = new Map();\n        // Note: this will only contain StaticSymbols without members!\n        this.resolvedSymbols = new Map();\n        this.resolvedFilePaths = new Set();\n        // Note: this will only contain StaticSymbols without members!\n        this.importAs = new Map();\n        this.symbolResourcePaths = new Map();\n        this.symbolFromFile = new Map();\n        this.knownFileNameToModuleNames = new Map();\n    }\n    StaticSymbolResolver.prototype.resolveSymbol = function (staticSymbol) {\n        if (staticSymbol.members.length > 0) {\n            return this._resolveSymbolMembers(staticSymbol);\n        }\n        // Note: always ask for a summary first,\n        // as we might have read shallow metadata via a .d.ts file\n        // for the symbol.\n        var resultFromSummary = this._resolveSymbolFromSummary(staticSymbol);\n        if (resultFromSummary) {\n            return resultFromSummary;\n        }\n        var resultFromCache = this.resolvedSymbols.get(staticSymbol);\n        if (resultFromCache) {\n            return resultFromCache;\n        }\n        // Note: Some users use libraries that were not compiled with ngc, i.e. they don't\n        // have summaries, only .d.ts files. So we always need to check both, the summary\n        // and metadata.\n        this._createSymbolsOf(staticSymbol.filePath);\n        return this.resolvedSymbols.get(staticSymbol);\n    };\n    /**\n     * getImportAs produces a symbol that can be used to import the given symbol.\n     * The import might be different than the symbol if the symbol is exported from\n     * a library with a summary; in which case we want to import the symbol from the\n     * ngfactory re-export instead of directly to avoid introducing a direct dependency\n     * on an otherwise indirect dependency.\n     *\n     * @param staticSymbol the symbol for which to generate a import symbol\n     */\n    StaticSymbolResolver.prototype.getImportAs = function (staticSymbol, useSummaries) {\n        if (useSummaries === void 0) { useSummaries = true; }\n        if (staticSymbol.members.length) {\n            var baseSymbol = this.getStaticSymbol(staticSymbol.filePath, staticSymbol.name);\n            var baseImportAs = this.getImportAs(baseSymbol, useSummaries);\n            return baseImportAs ?\n                this.getStaticSymbol(baseImportAs.filePath, baseImportAs.name, staticSymbol.members) :\n                null;\n        }\n        var summarizedFileName = stripSummaryForJitFileSuffix(staticSymbol.filePath);\n        if (summarizedFileName !== staticSymbol.filePath) {\n            var summarizedName = stripSummaryForJitNameSuffix(staticSymbol.name);\n            var baseSymbol = this.getStaticSymbol(summarizedFileName, summarizedName, staticSymbol.members);\n            var baseImportAs = this.getImportAs(baseSymbol, useSummaries);\n            return baseImportAs ?\n                this.getStaticSymbol(summaryForJitFileName(baseImportAs.filePath), summaryForJitName(baseImportAs.name), baseSymbol.members) :\n                null;\n        }\n        var result = (useSummaries && this.summaryResolver.getImportAs(staticSymbol)) || null;\n        if (!result) {\n            result = this.importAs.get(staticSymbol);\n        }\n        return result;\n    };\n    /**\n     * getResourcePath produces the path to the original location of the symbol and should\n     * be used to determine the relative location of resource references recorded in\n     * symbol metadata.\n     */\n    StaticSymbolResolver.prototype.getResourcePath = function (staticSymbol) {\n        return this.symbolResourcePaths.get(staticSymbol) || staticSymbol.filePath;\n    };\n    /**\n     * getTypeArity returns the number of generic type parameters the given symbol\n     * has. If the symbol is not a type the result is null.\n     */\n    StaticSymbolResolver.prototype.getTypeArity = function (staticSymbol) {\n        // If the file is a factory/ngsummary file, don't resolve the symbol as doing so would\n        // cause the metadata for an factory/ngsummary file to be loaded which doesn't exist.\n        // All references to generated classes must include the correct arity whenever\n        // generating code.\n        if (isGeneratedFile(staticSymbol.filePath)) {\n            return null;\n        }\n        var resolvedSymbol = unwrapResolvedMetadata(this.resolveSymbol(staticSymbol));\n        while (resolvedSymbol && resolvedSymbol.metadata instanceof StaticSymbol) {\n            resolvedSymbol = unwrapResolvedMetadata(this.resolveSymbol(resolvedSymbol.metadata));\n        }\n        return (resolvedSymbol && resolvedSymbol.metadata && resolvedSymbol.metadata.arity) || null;\n    };\n    StaticSymbolResolver.prototype.getKnownModuleName = function (filePath) {\n        return this.knownFileNameToModuleNames.get(filePath) || null;\n    };\n    StaticSymbolResolver.prototype.recordImportAs = function (sourceSymbol, targetSymbol) {\n        sourceSymbol.assertNoMembers();\n        targetSymbol.assertNoMembers();\n        this.importAs.set(sourceSymbol, targetSymbol);\n    };\n    StaticSymbolResolver.prototype.recordModuleNameForFileName = function (fileName, moduleName) {\n        this.knownFileNameToModuleNames.set(fileName, moduleName);\n    };\n    /**\n     * Invalidate all information derived from the given file.\n     *\n     * @param fileName the file to invalidate\n     */\n    StaticSymbolResolver.prototype.invalidateFile = function (fileName) {\n        this.metadataCache.delete(fileName);\n        this.resolvedFilePaths.delete(fileName);\n        var symbols = this.symbolFromFile.get(fileName);\n        if (symbols) {\n            this.symbolFromFile.delete(fileName);\n            try {\n                for (var symbols_1 = __values(symbols), symbols_1_1 = symbols_1.next(); !symbols_1_1.done; symbols_1_1 = symbols_1.next()) {\n                    var symbol = symbols_1_1.value;\n                    this.resolvedSymbols.delete(symbol);\n                    this.importAs.delete(symbol);\n                    this.symbolResourcePaths.delete(symbol);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (symbols_1_1 && !symbols_1_1.done && (_a = symbols_1.return)) _a.call(symbols_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        var e_1, _a;\n    };\n    /* @internal */\n    StaticSymbolResolver.prototype.ignoreErrorsFor = function (cb) {\n        var recorder = this.errorRecorder;\n        this.errorRecorder = function () { };\n        try {\n            return cb();\n        }\n        finally {\n            this.errorRecorder = recorder;\n        }\n    };\n    StaticSymbolResolver.prototype._resolveSymbolMembers = function (staticSymbol) {\n        var members = staticSymbol.members;\n        var baseResolvedSymbol = this.resolveSymbol(this.getStaticSymbol(staticSymbol.filePath, staticSymbol.name));\n        if (!baseResolvedSymbol) {\n            return null;\n        }\n        var baseMetadata = unwrapResolvedMetadata(baseResolvedSymbol.metadata);\n        if (baseMetadata instanceof StaticSymbol) {\n            return new ResolvedStaticSymbol(staticSymbol, this.getStaticSymbol(baseMetadata.filePath, baseMetadata.name, members));\n        }\n        else if (baseMetadata && baseMetadata.__symbolic === 'class') {\n            if (baseMetadata.statics && members.length === 1) {\n                return new ResolvedStaticSymbol(staticSymbol, baseMetadata.statics[members[0]]);\n            }\n        }\n        else {\n            var value = baseMetadata;\n            for (var i = 0; i < members.length && value; i++) {\n                value = value[members[i]];\n            }\n            return new ResolvedStaticSymbol(staticSymbol, value);\n        }\n        return null;\n    };\n    StaticSymbolResolver.prototype._resolveSymbolFromSummary = function (staticSymbol) {\n        var summary = this.summaryResolver.resolveSummary(staticSymbol);\n        return summary ? new ResolvedStaticSymbol(staticSymbol, summary.metadata) : null;\n    };\n    /**\n     * getStaticSymbol produces a Type whose metadata is known but whose implementation is not loaded.\n     * All types passed to the StaticResolver should be pseudo-types returned by this method.\n     *\n     * @param declarationFile the absolute path of the file where the symbol is declared\n     * @param name the name of the type.\n     * @param members a symbol for a static member of the named type\n     */\n    StaticSymbolResolver.prototype.getStaticSymbol = function (declarationFile, name, members) {\n        return this.staticSymbolCache.get(declarationFile, name, members);\n    };\n    /**\n     * hasDecorators checks a file's metadata for the presence of decorators without evaluating the\n     * metadata.\n     *\n     * @param filePath the absolute path to examine for decorators.\n     * @returns true if any class in the file has a decorator.\n     */\n    StaticSymbolResolver.prototype.hasDecorators = function (filePath) {\n        var metadata = this.getModuleMetadata(filePath);\n        if (metadata['metadata']) {\n            return Object.keys(metadata['metadata']).some(function (metadataKey) {\n                var entry = metadata['metadata'][metadataKey];\n                return entry && entry.__symbolic === 'class' && entry.decorators;\n            });\n        }\n        return false;\n    };\n    StaticSymbolResolver.prototype.getSymbolsOf = function (filePath) {\n        var summarySymbols = this.summaryResolver.getSymbolsOf(filePath);\n        if (summarySymbols) {\n            return summarySymbols;\n        }\n        // Note: Some users use libraries that were not compiled with ngc, i.e. they don't\n        // have summaries, only .d.ts files, but `summaryResolver.isLibraryFile` returns true.\n        this._createSymbolsOf(filePath);\n        var metadataSymbols = [];\n        this.resolvedSymbols.forEach(function (resolvedSymbol) {\n            if (resolvedSymbol.symbol.filePath === filePath) {\n                metadataSymbols.push(resolvedSymbol.symbol);\n            }\n        });\n        return metadataSymbols;\n    };\n    StaticSymbolResolver.prototype._createSymbolsOf = function (filePath) {\n        var _this = this;\n        if (this.resolvedFilePaths.has(filePath)) {\n            return;\n        }\n        this.resolvedFilePaths.add(filePath);\n        var resolvedSymbols = [];\n        var metadata = this.getModuleMetadata(filePath);\n        if (metadata['importAs']) {\n            // Index bundle indices should use the importAs module name defined\n            // in the bundle.\n            this.knownFileNameToModuleNames.set(filePath, metadata['importAs']);\n        }\n        // handle the symbols in one of the re-export location\n        if (metadata['exports']) {\n            var _loop_1 = function (moduleExport) {\n                // handle the symbols in the list of explicitly re-exported symbols.\n                if (moduleExport.export) {\n                    moduleExport.export.forEach(function (exportSymbol) {\n                        var symbolName;\n                        if (typeof exportSymbol === 'string') {\n                            symbolName = exportSymbol;\n                        }\n                        else {\n                            symbolName = exportSymbol.as;\n                        }\n                        symbolName = unescapeIdentifier(symbolName);\n                        var symName = symbolName;\n                        if (typeof exportSymbol !== 'string') {\n                            symName = unescapeIdentifier(exportSymbol.name);\n                        }\n                        var resolvedModule = _this.resolveModule(moduleExport.from, filePath);\n                        if (resolvedModule) {\n                            var targetSymbol = _this.getStaticSymbol(resolvedModule, symName);\n                            var sourceSymbol = _this.getStaticSymbol(filePath, symbolName);\n                            resolvedSymbols.push(_this.createExport(sourceSymbol, targetSymbol));\n                        }\n                    });\n                }\n                else {\n                    // handle the symbols via export * directives.\n                    var resolvedModule = this_1.resolveModule(moduleExport.from, filePath);\n                    if (resolvedModule) {\n                        var nestedExports = this_1.getSymbolsOf(resolvedModule);\n                        nestedExports.forEach(function (targetSymbol) {\n                            var sourceSymbol = _this.getStaticSymbol(filePath, targetSymbol.name);\n                            resolvedSymbols.push(_this.createExport(sourceSymbol, targetSymbol));\n                        });\n                    }\n                }\n            };\n            var this_1 = this;\n            try {\n                for (var _a = __values(metadata['exports']), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var moduleExport = _b.value;\n                    _loop_1(moduleExport);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n        // handle the actual metadata. Has to be after the exports\n        // as there migth be collisions in the names, and we want the symbols\n        // of the current module to win ofter reexports.\n        if (metadata['metadata']) {\n            // handle direct declarations of the symbol\n            var topLevelSymbolNames_1 = new Set(Object.keys(metadata['metadata']).map(unescapeIdentifier));\n            var origins_1 = metadata['origins'] || {};\n            Object.keys(metadata['metadata']).forEach(function (metadataKey) {\n                var symbolMeta = metadata['metadata'][metadataKey];\n                var name = unescapeIdentifier(metadataKey);\n                var symbol = _this.getStaticSymbol(filePath, name);\n                var origin = origins_1.hasOwnProperty(metadataKey) && origins_1[metadataKey];\n                if (origin) {\n                    // If the symbol is from a bundled index, use the declaration location of the\n                    // symbol so relative references (such as './my.html') will be calculated\n                    // correctly.\n                    var originFilePath = _this.resolveModule(origin, filePath);\n                    if (!originFilePath) {\n                        _this.reportError(new Error(\"Couldn't resolve original symbol for \" + origin + \" from \" + filePath));\n                    }\n                    else {\n                        _this.symbolResourcePaths.set(symbol, originFilePath);\n                    }\n                }\n                resolvedSymbols.push(_this.createResolvedSymbol(symbol, filePath, topLevelSymbolNames_1, symbolMeta));\n            });\n        }\n        resolvedSymbols.forEach(function (resolvedSymbol) { return _this.resolvedSymbols.set(resolvedSymbol.symbol, resolvedSymbol); });\n        this.symbolFromFile.set(filePath, resolvedSymbols.map(function (resolvedSymbol) { return resolvedSymbol.symbol; }));\n        var e_2, _c;\n    };\n    StaticSymbolResolver.prototype.createResolvedSymbol = function (sourceSymbol, topLevelPath, topLevelSymbolNames, metadata) {\n        var _this = this;\n        // For classes that don't have Angular summaries / metadata,\n        // we only keep their arity, but nothing else\n        // (e.g. their constructor parameters).\n        // We do this to prevent introducing deep imports\n        // as we didn't generate .ngfactory.ts files with proper reexports.\n        var isTsFile = TS.test(sourceSymbol.filePath);\n        if (this.summaryResolver.isLibraryFile(sourceSymbol.filePath) && !isTsFile && metadata &&\n            metadata['__symbolic'] === 'class') {\n            var transformedMeta_1 = { __symbolic: 'class', arity: metadata.arity };\n            return new ResolvedStaticSymbol(sourceSymbol, transformedMeta_1);\n        }\n        var _originalFileMemo;\n        var getOriginalName = function () {\n            if (!_originalFileMemo) {\n                // Guess what hte original file name is from the reference. If it has a `.d.ts` extension\n                // replace it with `.ts`. If it already has `.ts` just leave it in place. If it doesn't have\n                // .ts or .d.ts, append `.ts'. Also, if it is in `node_modules`, trim the `node_module`\n                // location as it is not important to finding the file.\n                _originalFileMemo =\n                    _this.host.getOutputName(topLevelPath.replace(/((\\.ts)|(\\.d\\.ts)|)$/, '.ts')\n                        .replace(/^.*node_modules[/\\\\]/, ''));\n            }\n            return _originalFileMemo;\n        };\n        var self = this;\n        var ReferenceTransformer = /** @class */ (function (_super) {\n            __extends(ReferenceTransformer, _super);\n            function ReferenceTransformer() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            ReferenceTransformer.prototype.visitStringMap = function (map, functionParams) {\n                var symbolic = map['__symbolic'];\n                if (symbolic === 'function') {\n                    var oldLen = functionParams.length;\n                    functionParams.push.apply(functionParams, __spread((map['parameters'] || [])));\n                    var result = _super.prototype.visitStringMap.call(this, map, functionParams);\n                    functionParams.length = oldLen;\n                    return result;\n                }\n                else if (symbolic === 'reference') {\n                    var module = map['module'];\n                    var name_1 = map['name'] ? unescapeIdentifier(map['name']) : map['name'];\n                    if (!name_1) {\n                        return null;\n                    }\n                    var filePath = void 0;\n                    if (module) {\n                        filePath = self.resolveModule(module, sourceSymbol.filePath);\n                        if (!filePath) {\n                            return {\n                                __symbolic: 'error',\n                                message: \"Could not resolve \" + module + \" relative to \" + sourceSymbol.filePath + \".\",\n                                line: map.line,\n                                character: map.character,\n                                fileName: getOriginalName()\n                            };\n                        }\n                        return {\n                            __symbolic: 'resolved',\n                            symbol: self.getStaticSymbol(filePath, name_1),\n                            line: map.line,\n                            character: map.character,\n                            fileName: getOriginalName()\n                        };\n                    }\n                    else if (functionParams.indexOf(name_1) >= 0) {\n                        // reference to a function parameter\n                        return { __symbolic: 'reference', name: name_1 };\n                    }\n                    else {\n                        if (topLevelSymbolNames.has(name_1)) {\n                            return self.getStaticSymbol(topLevelPath, name_1);\n                        }\n                        // ambient value\n                        \n                    }\n                }\n                else if (symbolic === 'error') {\n                    return __assign({}, map, { fileName: getOriginalName() });\n                }\n                else {\n                    return _super.prototype.visitStringMap.call(this, map, functionParams);\n                }\n            };\n            return ReferenceTransformer;\n        }(ValueTransformer));\n        var transformedMeta = visitValue(metadata, new ReferenceTransformer(), []);\n        var unwrappedTransformedMeta = unwrapResolvedMetadata(transformedMeta);\n        if (unwrappedTransformedMeta instanceof StaticSymbol) {\n            return this.createExport(sourceSymbol, unwrappedTransformedMeta);\n        }\n        return new ResolvedStaticSymbol(sourceSymbol, transformedMeta);\n    };\n    StaticSymbolResolver.prototype.createExport = function (sourceSymbol, targetSymbol) {\n        sourceSymbol.assertNoMembers();\n        targetSymbol.assertNoMembers();\n        if (this.summaryResolver.isLibraryFile(sourceSymbol.filePath) &&\n            this.summaryResolver.isLibraryFile(targetSymbol.filePath)) {\n            // This case is for an ng library importing symbols from a plain ts library\n            // transitively.\n            // Note: We rely on the fact that we discover symbols in the direction\n            // from source files to library files\n            this.importAs.set(targetSymbol, this.getImportAs(sourceSymbol) || sourceSymbol);\n        }\n        return new ResolvedStaticSymbol(sourceSymbol, targetSymbol);\n    };\n    StaticSymbolResolver.prototype.reportError = function (error$$1, context, path$$1) {\n        if (this.errorRecorder) {\n            this.errorRecorder(error$$1, (context && context.filePath) || path$$1);\n        }\n        else {\n            throw error$$1;\n        }\n    };\n    /**\n     * @param module an absolute path to a module file.\n     */\n    StaticSymbolResolver.prototype.getModuleMetadata = function (module) {\n        var moduleMetadata = this.metadataCache.get(module);\n        if (!moduleMetadata) {\n            var moduleMetadatas = this.host.getMetadataFor(module);\n            if (moduleMetadatas) {\n                var maxVersion_1 = -1;\n                moduleMetadatas.forEach(function (md) {\n                    if (md && md['version'] > maxVersion_1) {\n                        maxVersion_1 = md['version'];\n                        moduleMetadata = md;\n                    }\n                });\n            }\n            if (!moduleMetadata) {\n                moduleMetadata =\n                    { __symbolic: 'module', version: SUPPORTED_SCHEMA_VERSION, module: module, metadata: {} };\n            }\n            if (moduleMetadata['version'] != SUPPORTED_SCHEMA_VERSION) {\n                var errorMessage = moduleMetadata['version'] == 2 ?\n                    \"Unsupported metadata version \" + moduleMetadata['version'] + \" for module \" + module + \". This module should be compiled with a newer version of ngc\" :\n                    \"Metadata version mismatch for module \" + module + \", found version \" + moduleMetadata['version'] + \", expected \" + SUPPORTED_SCHEMA_VERSION;\n                this.reportError(new Error(errorMessage));\n            }\n            this.metadataCache.set(module, moduleMetadata);\n        }\n        return moduleMetadata;\n    };\n    StaticSymbolResolver.prototype.getSymbolByModule = function (module, symbolName, containingFile) {\n        var filePath = this.resolveModule(module, containingFile);\n        if (!filePath) {\n            this.reportError(new Error(\"Could not resolve module \" + module + (containingFile ? ' relative to ' +\n                containingFile : '')));\n            return this.getStaticSymbol(\"ERROR:\" + module, symbolName);\n        }\n        return this.getStaticSymbol(filePath, symbolName);\n    };\n    StaticSymbolResolver.prototype.resolveModule = function (module, containingFile) {\n        try {\n            return this.host.moduleNameToFileName(module, containingFile);\n        }\n        catch (e) {\n            console.error(\"Could not resolve module '\" + module + \"' relative to file \" + containingFile);\n            this.reportError(e, undefined, containingFile);\n        }\n        return null;\n    };\n    return StaticSymbolResolver;\n}());\n// Remove extra underscore from escaped identifier.\n// See https://github.com/Microsoft/TypeScript/blob/master/src/compiler/utilities.ts\nfunction unescapeIdentifier(identifier) {\n    return identifier.startsWith('___') ? identifier.substr(1) : identifier;\n}\nfunction unwrapResolvedMetadata(metadata) {\n    if (metadata && metadata.__symbolic === 'resolved') {\n        return metadata.symbol;\n    }\n    return metadata;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction deserializeSummaries(symbolCache, summaryResolver, libraryFileName, json) {\n    var deserializer = new FromJsonDeserializer(symbolCache, summaryResolver);\n    return deserializer.deserialize(libraryFileName, json);\n}\n\nvar ToJsonSerializer = /** @class */ (function (_super) {\n    __extends(ToJsonSerializer, _super);\n    function ToJsonSerializer(symbolResolver, summaryResolver, srcFileName) {\n        var _this = _super.call(this) || this;\n        _this.symbolResolver = symbolResolver;\n        _this.summaryResolver = summaryResolver;\n        _this.srcFileName = srcFileName;\n        // Note: This only contains symbols without members.\n        _this.symbols = [];\n        _this.indexBySymbol = new Map();\n        _this.reexportedBy = new Map();\n        // This now contains a `__symbol: number` in the place of\n        // StaticSymbols, but otherwise has the same shape as the original objects.\n        _this.processedSummaryBySymbol = new Map();\n        _this.processedSummaries = [];\n        _this.unprocessedSymbolSummariesBySymbol = new Map();\n        _this.moduleName = symbolResolver.getKnownModuleName(srcFileName);\n        return _this;\n    }\n    ToJsonSerializer.prototype.addSummary = function (summary) {\n        var _this = this;\n        var unprocessedSummary = this.unprocessedSymbolSummariesBySymbol.get(summary.symbol);\n        var processedSummary = this.processedSummaryBySymbol.get(summary.symbol);\n        if (!unprocessedSummary) {\n            unprocessedSummary = { symbol: summary.symbol, metadata: undefined };\n            this.unprocessedSymbolSummariesBySymbol.set(summary.symbol, unprocessedSummary);\n            processedSummary = { symbol: this.processValue(summary.symbol, 0 /* None */) };\n            this.processedSummaries.push(processedSummary);\n            this.processedSummaryBySymbol.set(summary.symbol, processedSummary);\n        }\n        if (!unprocessedSummary.metadata && summary.metadata) {\n            var metadata_1 = summary.metadata || {};\n            if (metadata_1.__symbolic === 'class') {\n                // For classes, we keep everything except their class decorators.\n                // We need to keep e.g. the ctor args, method names, method decorators\n                // so that the class can be extended in another compilation unit.\n                // We don't keep the class decorators as\n                // 1) they refer to data\n                //   that should not cause a rebuild of downstream compilation units\n                //   (e.g. inline templates of @Component, or @NgModule.declarations)\n                // 2) their data is already captured in TypeSummaries, e.g. DirectiveSummary.\n                var clone_1 = {};\n                Object.keys(metadata_1).forEach(function (propName) {\n                    if (propName !== 'decorators') {\n                        clone_1[propName] = metadata_1[propName];\n                    }\n                });\n                metadata_1 = clone_1;\n            }\n            else if (isCall(metadata_1)) {\n                if (!isFunctionCall(metadata_1) && !isMethodCallOnVariable(metadata_1)) {\n                    // Don't store complex calls as we won't be able to simplify them anyways later on.\n                    metadata_1 = {\n                        __symbolic: 'error',\n                        message: 'Complex function calls are not supported.',\n                    };\n                }\n            }\n            // Note: We need to keep storing ctor calls for e.g.\n            // `export const x = new InjectionToken(...)`\n            unprocessedSummary.metadata = metadata_1;\n            processedSummary.metadata = this.processValue(metadata_1, 1 /* ResolveValue */);\n            if (metadata_1 instanceof StaticSymbol &&\n                this.summaryResolver.isLibraryFile(metadata_1.filePath)) {\n                var declarationSymbol = this.symbols[this.indexBySymbol.get(metadata_1)];\n                if (!isLoweredSymbol(declarationSymbol.name)) {\n                    // Note: symbols that were introduced during codegen in the user file can have a reexport\n                    // if a user used `export *`. However, we can't rely on this as tsickle will change\n                    // `export *` into named exports, using only the information from the typechecker.\n                    // As we introduce the new symbols after typecheck, Tsickle does not know about them,\n                    // and omits them when expanding `export *`.\n                    // So we have to keep reexporting these symbols manually via .ngfactory files.\n                    this.reexportedBy.set(declarationSymbol, summary.symbol);\n                }\n            }\n        }\n        if (!unprocessedSummary.type && summary.type) {\n            unprocessedSummary.type = summary.type;\n            // Note: We don't add the summaries of all referenced symbols as for the ResolvedSymbols,\n            // as the type summaries already contain the transitive data that they require\n            // (in a minimal way).\n            processedSummary.type = this.processValue(summary.type, 0 /* None */);\n            // except for reexported directives / pipes, so we need to store\n            // their summaries explicitly.\n            if (summary.type.summaryKind === CompileSummaryKind.NgModule) {\n                var ngModuleSummary = summary.type;\n                ngModuleSummary.exportedDirectives.concat(ngModuleSummary.exportedPipes).forEach(function (id) {\n                    var symbol = id.reference;\n                    if (_this.summaryResolver.isLibraryFile(symbol.filePath) &&\n                        !_this.unprocessedSymbolSummariesBySymbol.has(symbol)) {\n                        var summary_1 = _this.summaryResolver.resolveSummary(symbol);\n                        if (summary_1) {\n                            _this.addSummary(summary_1);\n                        }\n                    }\n                });\n            }\n        }\n    };\n    ToJsonSerializer.prototype.serialize = function () {\n        var _this = this;\n        var exportAs = [];\n        var json = JSON.stringify({\n            moduleName: this.moduleName,\n            summaries: this.processedSummaries,\n            symbols: this.symbols.map(function (symbol, index) {\n                symbol.assertNoMembers();\n                var importAs = undefined;\n                if (_this.summaryResolver.isLibraryFile(symbol.filePath)) {\n                    var reexportSymbol = _this.reexportedBy.get(symbol);\n                    if (reexportSymbol) {\n                        importAs = _this.indexBySymbol.get(reexportSymbol);\n                    }\n                    else {\n                        var summary = _this.unprocessedSymbolSummariesBySymbol.get(symbol);\n                        if (!summary || !summary.metadata || summary.metadata.__symbolic !== 'interface') {\n                            importAs = symbol.name + \"_\" + index;\n                            exportAs.push({ symbol: symbol, exportAs: importAs });\n                        }\n                    }\n                }\n                return {\n                    __symbol: index,\n                    name: symbol.name,\n                    filePath: _this.summaryResolver.toSummaryFileName(symbol.filePath, _this.srcFileName),\n                    importAs: importAs\n                };\n            })\n        });\n        return { json: json, exportAs: exportAs };\n    };\n    ToJsonSerializer.prototype.processValue = function (value, flags) {\n        return visitValue(value, this, flags);\n    };\n    ToJsonSerializer.prototype.visitOther = function (value, context) {\n        if (value instanceof StaticSymbol) {\n            var baseSymbol = this.symbolResolver.getStaticSymbol(value.filePath, value.name);\n            var index = this.visitStaticSymbol(baseSymbol, context);\n            return { __symbol: index, members: value.members };\n        }\n    };\n    /**\n     * Strip line and character numbers from ngsummaries.\n     * Emitting them causes white spaces changes to retrigger upstream\n     * recompilations in bazel.\n     * TODO: find out a way to have line and character numbers in errors without\n     * excessive recompilation in bazel.\n     */\n    ToJsonSerializer.prototype.visitStringMap = function (map, context) {\n        if (map['__symbolic'] === 'resolved') {\n            return visitValue(map.symbol, this, context);\n        }\n        if (map['__symbolic'] === 'error') {\n            delete map['line'];\n            delete map['character'];\n        }\n        return _super.prototype.visitStringMap.call(this, map, context);\n    };\n    /**\n     * Returns null if the options.resolveValue is true, and the summary for the symbol\n     * resolved to a type or could not be resolved.\n     */\n    ToJsonSerializer.prototype.visitStaticSymbol = function (baseSymbol, flags) {\n        var index = this.indexBySymbol.get(baseSymbol);\n        var summary = null;\n        if (flags & 1 /* ResolveValue */ &&\n            this.summaryResolver.isLibraryFile(baseSymbol.filePath)) {\n            if (this.unprocessedSymbolSummariesBySymbol.has(baseSymbol)) {\n                // the summary for this symbol was already added\n                // -> nothing to do.\n                return index;\n            }\n            summary = this.loadSummary(baseSymbol);\n            if (summary && summary.metadata instanceof StaticSymbol) {\n                // The summary is a reexport\n                index = this.visitStaticSymbol(summary.metadata, flags);\n                // reset the summary as it is just a reexport, so we don't want to store it.\n                summary = null;\n            }\n        }\n        else if (index != null) {\n            // Note: == on purpose to compare with undefined!\n            // No summary and the symbol is already added -> nothing to do.\n            return index;\n        }\n        // Note: == on purpose to compare with undefined!\n        if (index == null) {\n            index = this.symbols.length;\n            this.symbols.push(baseSymbol);\n        }\n        this.indexBySymbol.set(baseSymbol, index);\n        if (summary) {\n            this.addSummary(summary);\n        }\n        return index;\n    };\n    ToJsonSerializer.prototype.loadSummary = function (symbol) {\n        var summary = this.summaryResolver.resolveSummary(symbol);\n        if (!summary) {\n            // some symbols might originate from a plain typescript library\n            // that just exported .d.ts and .metadata.json files, i.e. where no summary\n            // files were created.\n            var resolvedSymbol = this.symbolResolver.resolveSymbol(symbol);\n            if (resolvedSymbol) {\n                summary = { symbol: resolvedSymbol.symbol, metadata: resolvedSymbol.metadata };\n            }\n        }\n        return summary;\n    };\n    return ToJsonSerializer;\n}(ValueTransformer));\nvar FromJsonDeserializer = /** @class */ (function (_super) {\n    __extends(FromJsonDeserializer, _super);\n    function FromJsonDeserializer(symbolCache, summaryResolver) {\n        var _this = _super.call(this) || this;\n        _this.symbolCache = symbolCache;\n        _this.summaryResolver = summaryResolver;\n        return _this;\n    }\n    FromJsonDeserializer.prototype.deserialize = function (libraryFileName, json) {\n        var _this = this;\n        var data = JSON.parse(json);\n        var allImportAs = [];\n        this.symbols = data.symbols.map(function (serializedSymbol) { return _this.symbolCache.get(_this.summaryResolver.fromSummaryFileName(serializedSymbol.filePath, libraryFileName), serializedSymbol.name); });\n        data.symbols.forEach(function (serializedSymbol, index) {\n            var symbol = _this.symbols[index];\n            var importAs = serializedSymbol.importAs;\n            if (typeof importAs === 'number') {\n                allImportAs.push({ symbol: symbol, importAs: _this.symbols[importAs] });\n            }\n            else if (typeof importAs === 'string') {\n                allImportAs.push({ symbol: symbol, importAs: _this.symbolCache.get(ngfactoryFilePath(libraryFileName), importAs) });\n            }\n        });\n        var summaries = visitValue(data.summaries, this, null);\n        return { moduleName: data.moduleName, summaries: summaries, importAs: allImportAs };\n    };\n    FromJsonDeserializer.prototype.visitStringMap = function (map, context) {\n        if ('__symbol' in map) {\n            var baseSymbol = this.symbols[map['__symbol']];\n            var members = map['members'];\n            return members.length ? this.symbolCache.get(baseSymbol.filePath, baseSymbol.name, members) :\n                baseSymbol;\n        }\n        else {\n            return _super.prototype.visitStringMap.call(this, map, context);\n        }\n    };\n    return FromJsonDeserializer;\n}(ValueTransformer));\nfunction isCall(metadata) {\n    return metadata && metadata.__symbolic === 'call';\n}\nfunction isFunctionCall(metadata) {\n    return isCall(metadata) && unwrapResolvedMetadata(metadata.expression) instanceof StaticSymbol;\n}\nfunction isMethodCallOnVariable(metadata) {\n    return isCall(metadata) && metadata.expression && metadata.expression.__symbolic === 'select' &&\n        unwrapResolvedMetadata(metadata.expression.expression) instanceof StaticSymbol;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar StubEmitFlags;\n(function (StubEmitFlags) {\n    StubEmitFlags[StubEmitFlags[\"Basic\"] = 1] = \"Basic\";\n    StubEmitFlags[StubEmitFlags[\"TypeCheck\"] = 2] = \"TypeCheck\";\n    StubEmitFlags[StubEmitFlags[\"All\"] = 3] = \"All\";\n})(StubEmitFlags || (StubEmitFlags = {}));\nfunction analyzeNgModules(fileNames, host, staticSymbolResolver, metadataResolver) {\n    var files = _analyzeFilesIncludingNonProgramFiles(fileNames, host, staticSymbolResolver, metadataResolver);\n    return mergeAnalyzedFiles(files);\n}\n\n// Analyzes all of the program files,\n// including files that are not part of the program\n// but are referenced by an NgModule.\nfunction _analyzeFilesIncludingNonProgramFiles(fileNames, host, staticSymbolResolver, metadataResolver) {\n    var seenFiles = new Set();\n    var files = [];\n    var visitFile = function (fileName) {\n        if (seenFiles.has(fileName) || !host.isSourceFile(fileName)) {\n            return false;\n        }\n        seenFiles.add(fileName);\n        var analyzedFile = analyzeFile(host, staticSymbolResolver, metadataResolver, fileName);\n        files.push(analyzedFile);\n        analyzedFile.ngModules.forEach(function (ngModule) {\n            ngModule.transitiveModule.modules.forEach(function (modMeta) { return visitFile(modMeta.reference.filePath); });\n        });\n    };\n    fileNames.forEach(function (fileName) { return visitFile(fileName); });\n    return files;\n}\nfunction analyzeFile(host, staticSymbolResolver, metadataResolver, fileName) {\n    var directives = [];\n    var pipes = [];\n    var injectables = [];\n    var ngModules = [];\n    var hasDecorators = staticSymbolResolver.hasDecorators(fileName);\n    var exportsNonSourceFiles = false;\n    // Don't analyze .d.ts files that have no decorators as a shortcut\n    // to speed up the analysis. This prevents us from\n    // resolving the references in these files.\n    // Note: exportsNonSourceFiles is only needed when compiling with summaries,\n    // which is not the case when .d.ts files are treated as input files.\n    if (!fileName.endsWith('.d.ts') || hasDecorators) {\n        staticSymbolResolver.getSymbolsOf(fileName).forEach(function (symbol) {\n            var resolvedSymbol = staticSymbolResolver.resolveSymbol(symbol);\n            var symbolMeta = resolvedSymbol.metadata;\n            if (!symbolMeta || symbolMeta.__symbolic === 'error') {\n                return;\n            }\n            var isNgSymbol = false;\n            if (symbolMeta.__symbolic === 'class') {\n                if (metadataResolver.isDirective(symbol)) {\n                    isNgSymbol = true;\n                    directives.push(symbol);\n                }\n                else if (metadataResolver.isPipe(symbol)) {\n                    isNgSymbol = true;\n                    pipes.push(symbol);\n                }\n                else if (metadataResolver.isNgModule(symbol)) {\n                    var ngModule = metadataResolver.getNgModuleMetadata(symbol, false);\n                    if (ngModule) {\n                        isNgSymbol = true;\n                        ngModules.push(ngModule);\n                    }\n                }\n                else if (metadataResolver.isInjectable(symbol)) {\n                    isNgSymbol = true;\n                    var injectable = metadataResolver.getInjectableMetadata(symbol, null, false);\n                    if (injectable) {\n                        injectables.push(injectable);\n                    }\n                }\n            }\n            if (!isNgSymbol) {\n                exportsNonSourceFiles =\n                    exportsNonSourceFiles || isValueExportingNonSourceFile(host, symbolMeta);\n            }\n        });\n    }\n    return {\n        fileName: fileName, directives: directives, pipes: pipes, ngModules: ngModules, injectables: injectables, exportsNonSourceFiles: exportsNonSourceFiles,\n    };\n}\n\nfunction isValueExportingNonSourceFile(host, metadata) {\n    var exportsNonSourceFiles = false;\n    var Visitor = /** @class */ (function () {\n        function Visitor() {\n        }\n        Visitor.prototype.visitArray = function (arr, context) {\n            var _this = this;\n            arr.forEach(function (v) { return visitValue(v, _this, context); });\n        };\n        Visitor.prototype.visitStringMap = function (map, context) {\n            var _this = this;\n            Object.keys(map).forEach(function (key) { return visitValue(map[key], _this, context); });\n        };\n        Visitor.prototype.visitPrimitive = function (value, context) { };\n        Visitor.prototype.visitOther = function (value, context) {\n            if (value instanceof StaticSymbol && !host.isSourceFile(value.filePath)) {\n                exportsNonSourceFiles = true;\n            }\n        };\n        return Visitor;\n    }());\n    visitValue(metadata, new Visitor(), null);\n    return exportsNonSourceFiles;\n}\nfunction mergeAnalyzedFiles(analyzedFiles) {\n    var allNgModules = [];\n    var ngModuleByPipeOrDirective = new Map();\n    var allPipesAndDirectives = new Set();\n    analyzedFiles.forEach(function (af) {\n        af.ngModules.forEach(function (ngModule) {\n            allNgModules.push(ngModule);\n            ngModule.declaredDirectives.forEach(function (d) { return ngModuleByPipeOrDirective.set(d.reference, ngModule); });\n            ngModule.declaredPipes.forEach(function (p) { return ngModuleByPipeOrDirective.set(p.reference, ngModule); });\n        });\n        af.directives.forEach(function (d) { return allPipesAndDirectives.add(d); });\n        af.pipes.forEach(function (p) { return allPipesAndDirectives.add(p); });\n    });\n    var symbolsMissingModule = [];\n    allPipesAndDirectives.forEach(function (ref) {\n        if (!ngModuleByPipeOrDirective.has(ref)) {\n            symbolsMissingModule.push(ref);\n        }\n    });\n    return {\n        ngModules: allNgModules,\n        ngModuleByPipeOrDirective: ngModuleByPipeOrDirective,\n        symbolsMissingModule: symbolsMissingModule,\n        files: analyzedFiles\n    };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar FORMATTED_MESSAGE = 'ngFormattedMessage';\nfunction indentStr(level) {\n    if (level <= 0)\n        return '';\n    if (level < 6)\n        return ['', ' ', '  ', '   ', '    ', '     '][level];\n    var half = indentStr(Math.floor(level / 2));\n    return half + half + (level % 2 === 1 ? ' ' : '');\n}\nfunction formatChain(chain, indent) {\n    if (indent === void 0) { indent = 0; }\n    if (!chain)\n        return '';\n    var position = chain.position ?\n        chain.position.fileName + \"(\" + (chain.position.line + 1) + \",\" + (chain.position.column + 1) + \")\" :\n        '';\n    var prefix = position && indent === 0 ? position + \": \" : '';\n    var postfix = position && indent !== 0 ? \" at \" + position : '';\n    var message = \"\" + prefix + chain.message + postfix;\n    return \"\" + indentStr(indent) + message + ((chain.next && ('\\n' + formatChain(chain.next, indent + 2))) || '');\n}\nfunction formattedError(chain) {\n    var message = formatChain(chain) + '.';\n    var error$$1 = syntaxError(message);\n    error$$1[FORMATTED_MESSAGE] = true;\n    error$$1.chain = chain;\n    error$$1.position = chain.position;\n    return error$$1;\n}\nfunction isFormattedError(error$$1) {\n    return !!error$$1[FORMATTED_MESSAGE];\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ANGULAR_CORE = '@angular/core';\nvar ANGULAR_ROUTER = '@angular/router';\nvar HIDDEN_KEY = /^\\$.*\\$$/;\nvar IGNORE = {\n    __symbolic: 'ignore'\n};\nvar USE_VALUE = 'useValue';\nvar PROVIDE = 'provide';\nvar REFERENCE_SET = new Set([USE_VALUE, 'useFactory', 'data', 'id', 'loadChildren']);\nvar TYPEGUARD_POSTFIX = 'TypeGuard';\nvar USE_IF = 'UseIf';\nfunction shouldIgnore(value) {\n    return value && value.__symbolic == 'ignore';\n}\n/**\n * A static reflector implements enough of the Reflector API that is necessary to compile\n * templates statically.\n */\nvar StaticReflector = /** @class */ (function () {\n    function StaticReflector(summaryResolver, symbolResolver, knownMetadataClasses, knownMetadataFunctions, errorRecorder) {\n        if (knownMetadataClasses === void 0) { knownMetadataClasses = []; }\n        if (knownMetadataFunctions === void 0) { knownMetadataFunctions = []; }\n        var _this = this;\n        this.summaryResolver = summaryResolver;\n        this.symbolResolver = symbolResolver;\n        this.errorRecorder = errorRecorder;\n        this.annotationCache = new Map();\n        this.shallowAnnotationCache = new Map();\n        this.propertyCache = new Map();\n        this.parameterCache = new Map();\n        this.methodCache = new Map();\n        this.staticCache = new Map();\n        this.conversionMap = new Map();\n        this.resolvedExternalReferences = new Map();\n        this.annotationForParentClassWithSummaryKind = new Map();\n        this.initializeConversionMap();\n        knownMetadataClasses.forEach(function (kc) { return _this._registerDecoratorOrConstructor(_this.getStaticSymbol(kc.filePath, kc.name), kc.ctor); });\n        knownMetadataFunctions.forEach(function (kf) { return _this._registerFunction(_this.getStaticSymbol(kf.filePath, kf.name), kf.fn); });\n        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.Directive, [createDirective, createComponent]);\n        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.Pipe, [createPipe]);\n        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.NgModule, [createNgModule]);\n        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.Injectable, [createInjectable, createPipe, createDirective, createComponent, createNgModule]);\n    }\n    StaticReflector.prototype.componentModuleUrl = function (typeOrFunc) {\n        var staticSymbol = this.findSymbolDeclaration(typeOrFunc);\n        return this.symbolResolver.getResourcePath(staticSymbol);\n    };\n    StaticReflector.prototype.resolveExternalReference = function (ref, containingFile) {\n        var key = undefined;\n        if (!containingFile) {\n            key = ref.moduleName + \":\" + ref.name;\n            var declarationSymbol_1 = this.resolvedExternalReferences.get(key);\n            if (declarationSymbol_1)\n                return declarationSymbol_1;\n        }\n        var refSymbol = this.symbolResolver.getSymbolByModule(ref.moduleName, ref.name, containingFile);\n        var declarationSymbol = this.findSymbolDeclaration(refSymbol);\n        if (!containingFile) {\n            this.symbolResolver.recordModuleNameForFileName(refSymbol.filePath, ref.moduleName);\n            this.symbolResolver.recordImportAs(declarationSymbol, refSymbol);\n        }\n        if (key) {\n            this.resolvedExternalReferences.set(key, declarationSymbol);\n        }\n        return declarationSymbol;\n    };\n    StaticReflector.prototype.findDeclaration = function (moduleUrl, name, containingFile) {\n        return this.findSymbolDeclaration(this.symbolResolver.getSymbolByModule(moduleUrl, name, containingFile));\n    };\n    StaticReflector.prototype.tryFindDeclaration = function (moduleUrl, name, containingFile) {\n        var _this = this;\n        return this.symbolResolver.ignoreErrorsFor(function () { return _this.findDeclaration(moduleUrl, name, containingFile); });\n    };\n    StaticReflector.prototype.findSymbolDeclaration = function (symbol) {\n        var resolvedSymbol = this.symbolResolver.resolveSymbol(symbol);\n        if (resolvedSymbol) {\n            var resolvedMetadata = resolvedSymbol.metadata;\n            if (resolvedMetadata && resolvedMetadata.__symbolic === 'resolved') {\n                resolvedMetadata = resolvedMetadata.symbol;\n            }\n            if (resolvedMetadata instanceof StaticSymbol) {\n                return this.findSymbolDeclaration(resolvedSymbol.metadata);\n            }\n        }\n        return symbol;\n    };\n    StaticReflector.prototype.tryAnnotations = function (type) {\n        var originalRecorder = this.errorRecorder;\n        this.errorRecorder = function (error$$1, fileName) { };\n        try {\n            return this.annotations(type);\n        }\n        finally {\n            this.errorRecorder = originalRecorder;\n        }\n    };\n    StaticReflector.prototype.annotations = function (type) {\n        var _this = this;\n        return this._annotations(type, function (type, decorators) { return _this.simplify(type, decorators); }, this.annotationCache);\n    };\n    StaticReflector.prototype.shallowAnnotations = function (type) {\n        var _this = this;\n        return this._annotations(type, function (type, decorators) { return _this.simplify(type, decorators, true); }, this.shallowAnnotationCache);\n    };\n    StaticReflector.prototype._annotations = function (type, simplify, annotationCache) {\n        var annotations = annotationCache.get(type);\n        if (!annotations) {\n            annotations = [];\n            var classMetadata = this.getTypeMetadata(type);\n            var parentType = this.findParentType(type, classMetadata);\n            if (parentType) {\n                var parentAnnotations = this.annotations(parentType);\n                annotations.push.apply(annotations, __spread(parentAnnotations));\n            }\n            var ownAnnotations_1 = [];\n            if (classMetadata['decorators']) {\n                ownAnnotations_1 = simplify(type, classMetadata['decorators']);\n                if (ownAnnotations_1) {\n                    annotations.push.apply(annotations, __spread(ownAnnotations_1));\n                }\n            }\n            if (parentType && !this.summaryResolver.isLibraryFile(type.filePath) &&\n                this.summaryResolver.isLibraryFile(parentType.filePath)) {\n                var summary = this.summaryResolver.resolveSummary(parentType);\n                if (summary && summary.type) {\n                    var requiredAnnotationTypes = this.annotationForParentClassWithSummaryKind.get(summary.type.summaryKind);\n                    var typeHasRequiredAnnotation = requiredAnnotationTypes.some(function (requiredType) { return ownAnnotations_1.some(function (ann) { return requiredType.isTypeOf(ann); }); });\n                    if (!typeHasRequiredAnnotation) {\n                        this.reportError(formatMetadataError(metadataError(\"Class \" + type.name + \" in \" + type.filePath + \" extends from a \" + CompileSummaryKind[summary.type.summaryKind] + \" in another compilation unit without duplicating the decorator\", \n                        /* summary */ undefined, \"Please add a \" + requiredAnnotationTypes.map(function (type) { return type.ngMetadataName; }).join(' or ') + \" decorator to the class\"), type), type);\n                    }\n                }\n            }\n            annotationCache.set(type, annotations.filter(function (ann) { return !!ann; }));\n        }\n        return annotations;\n    };\n    StaticReflector.prototype.propMetadata = function (type) {\n        var _this = this;\n        var propMetadata = this.propertyCache.get(type);\n        if (!propMetadata) {\n            var classMetadata = this.getTypeMetadata(type);\n            propMetadata = {};\n            var parentType = this.findParentType(type, classMetadata);\n            if (parentType) {\n                var parentPropMetadata_1 = this.propMetadata(parentType);\n                Object.keys(parentPropMetadata_1).forEach(function (parentProp) {\n                    propMetadata[parentProp] = parentPropMetadata_1[parentProp];\n                });\n            }\n            var members_1 = classMetadata['members'] || {};\n            Object.keys(members_1).forEach(function (propName) {\n                var propData = members_1[propName];\n                var prop = propData\n                    .find(function (a) { return a['__symbolic'] == 'property' || a['__symbolic'] == 'method'; });\n                var decorators = [];\n                if (propMetadata[propName]) {\n                    decorators.push.apply(decorators, __spread(propMetadata[propName]));\n                }\n                propMetadata[propName] = decorators;\n                if (prop && prop['decorators']) {\n                    decorators.push.apply(decorators, __spread(_this.simplify(type, prop['decorators'])));\n                }\n            });\n            this.propertyCache.set(type, propMetadata);\n        }\n        return propMetadata;\n    };\n    StaticReflector.prototype.parameters = function (type) {\n        var _this = this;\n        if (!(type instanceof StaticSymbol)) {\n            this.reportError(new Error(\"parameters received \" + JSON.stringify(type) + \" which is not a StaticSymbol\"), type);\n            return [];\n        }\n        try {\n            var parameters_1 = this.parameterCache.get(type);\n            if (!parameters_1) {\n                var classMetadata = this.getTypeMetadata(type);\n                var parentType = this.findParentType(type, classMetadata);\n                var members = classMetadata ? classMetadata['members'] : null;\n                var ctorData = members ? members['__ctor__'] : null;\n                if (ctorData) {\n                    var ctor = ctorData.find(function (a) { return a['__symbolic'] == 'constructor'; });\n                    var rawParameterTypes = ctor['parameters'] || [];\n                    var parameterDecorators_1 = this.simplify(type, ctor['parameterDecorators'] || []);\n                    parameters_1 = [];\n                    rawParameterTypes.forEach(function (rawParamType, index) {\n                        var nestedResult = [];\n                        var paramType = _this.trySimplify(type, rawParamType);\n                        if (paramType)\n                            nestedResult.push(paramType);\n                        var decorators = parameterDecorators_1 ? parameterDecorators_1[index] : null;\n                        if (decorators) {\n                            nestedResult.push.apply(nestedResult, __spread(decorators));\n                        }\n                        parameters_1.push(nestedResult);\n                    });\n                }\n                else if (parentType) {\n                    parameters_1 = this.parameters(parentType);\n                }\n                if (!parameters_1) {\n                    parameters_1 = [];\n                }\n                this.parameterCache.set(type, parameters_1);\n            }\n            return parameters_1;\n        }\n        catch (e) {\n            console.error(\"Failed on type \" + JSON.stringify(type) + \" with error \" + e);\n            throw e;\n        }\n    };\n    StaticReflector.prototype._methodNames = function (type) {\n        var methodNames = this.methodCache.get(type);\n        if (!methodNames) {\n            var classMetadata = this.getTypeMetadata(type);\n            methodNames = {};\n            var parentType = this.findParentType(type, classMetadata);\n            if (parentType) {\n                var parentMethodNames_1 = this._methodNames(parentType);\n                Object.keys(parentMethodNames_1).forEach(function (parentProp) {\n                    methodNames[parentProp] = parentMethodNames_1[parentProp];\n                });\n            }\n            var members_2 = classMetadata['members'] || {};\n            Object.keys(members_2).forEach(function (propName) {\n                var propData = members_2[propName];\n                var isMethod = propData.some(function (a) { return a['__symbolic'] == 'method'; });\n                methodNames[propName] = methodNames[propName] || isMethod;\n            });\n            this.methodCache.set(type, methodNames);\n        }\n        return methodNames;\n    };\n    StaticReflector.prototype._staticMembers = function (type) {\n        var staticMembers = this.staticCache.get(type);\n        if (!staticMembers) {\n            var classMetadata = this.getTypeMetadata(type);\n            var staticMemberData = classMetadata['statics'] || {};\n            staticMembers = Object.keys(staticMemberData);\n            this.staticCache.set(type, staticMembers);\n        }\n        return staticMembers;\n    };\n    StaticReflector.prototype.findParentType = function (type, classMetadata) {\n        var parentType = this.trySimplify(type, classMetadata['extends']);\n        if (parentType instanceof StaticSymbol) {\n            return parentType;\n        }\n    };\n    StaticReflector.prototype.hasLifecycleHook = function (type, lcProperty) {\n        if (!(type instanceof StaticSymbol)) {\n            this.reportError(new Error(\"hasLifecycleHook received \" + JSON.stringify(type) + \" which is not a StaticSymbol\"), type);\n        }\n        try {\n            return !!this._methodNames(type)[lcProperty];\n        }\n        catch (e) {\n            console.error(\"Failed on type \" + JSON.stringify(type) + \" with error \" + e);\n            throw e;\n        }\n    };\n    StaticReflector.prototype.guards = function (type) {\n        if (!(type instanceof StaticSymbol)) {\n            this.reportError(new Error(\"guards received \" + JSON.stringify(type) + \" which is not a StaticSymbol\"), type);\n            return {};\n        }\n        var staticMembers = this._staticMembers(type);\n        var result = {};\n        try {\n            for (var staticMembers_1 = __values(staticMembers), staticMembers_1_1 = staticMembers_1.next(); !staticMembers_1_1.done; staticMembers_1_1 = staticMembers_1.next()) {\n                var name_1 = staticMembers_1_1.value;\n                if (name_1.endsWith(TYPEGUARD_POSTFIX)) {\n                    var property = name_1.substr(0, name_1.length - TYPEGUARD_POSTFIX.length);\n                    var value = void 0;\n                    if (property.endsWith(USE_IF)) {\n                        property = name_1.substr(0, property.length - USE_IF.length);\n                        value = USE_IF;\n                    }\n                    else {\n                        value = this.getStaticSymbol(type.filePath, type.name, [name_1]);\n                    }\n                    result[property] = value;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (staticMembers_1_1 && !staticMembers_1_1.done && (_a = staticMembers_1.return)) _a.call(staticMembers_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return result;\n        var e_1, _a;\n    };\n    StaticReflector.prototype._registerDecoratorOrConstructor = function (type, ctor) {\n        this.conversionMap.set(type, function (context, args) { return new (ctor.bind.apply(ctor, __spread([void 0], args)))(); });\n    };\n    StaticReflector.prototype._registerFunction = function (type, fn) {\n        this.conversionMap.set(type, function (context, args) { return fn.apply(undefined, args); });\n    };\n    StaticReflector.prototype.initializeConversionMap = function () {\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Injectable'), createInjectable);\n        this.injectionToken = this.findDeclaration(ANGULAR_CORE, 'InjectionToken');\n        this.opaqueToken = this.findDeclaration(ANGULAR_CORE, 'OpaqueToken');\n        this.ROUTES = this.tryFindDeclaration(ANGULAR_ROUTER, 'ROUTES');\n        this.ANALYZE_FOR_ENTRY_COMPONENTS =\n            this.findDeclaration(ANGULAR_CORE, 'ANALYZE_FOR_ENTRY_COMPONENTS');\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Host'), createHost);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Self'), createSelf);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'SkipSelf'), createSkipSelf);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Inject'), createInject);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Optional'), createOptional);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Attribute'), createAttribute);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ContentChild'), createContentChild);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ContentChildren'), createContentChildren);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ViewChild'), createViewChild);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ViewChildren'), createViewChildren);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Input'), createInput);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Output'), createOutput);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Pipe'), createPipe);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'HostBinding'), createHostBinding);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'HostListener'), createHostListener);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Directive'), createDirective);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Component'), createComponent);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'NgModule'), createNgModule);\n        // Note: Some metadata classes can be used directly with Provider.deps.\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Host'), createHost);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Self'), createSelf);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'SkipSelf'), createSkipSelf);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Optional'), createOptional);\n    };\n    /**\n     * getStaticSymbol produces a Type whose metadata is known but whose implementation is not loaded.\n     * All types passed to the StaticResolver should be pseudo-types returned by this method.\n     *\n     * @param declarationFile the absolute path of the file where the symbol is declared\n     * @param name the name of the type.\n     */\n    StaticReflector.prototype.getStaticSymbol = function (declarationFile, name, members) {\n        return this.symbolResolver.getStaticSymbol(declarationFile, name, members);\n    };\n    /**\n     * Simplify but discard any errors\n     */\n    StaticReflector.prototype.trySimplify = function (context, value) {\n        var originalRecorder = this.errorRecorder;\n        this.errorRecorder = function (error$$1, fileName) { };\n        var result = this.simplify(context, value);\n        this.errorRecorder = originalRecorder;\n        return result;\n    };\n    /** @internal */\n    StaticReflector.prototype.simplify = function (context, value, lazy) {\n        if (lazy === void 0) { lazy = false; }\n        var self = this;\n        var scope = BindingScope$1.empty;\n        var calling = new Map();\n        function simplifyInContext(context, value, depth, references) {\n            function resolveReferenceValue(staticSymbol) {\n                var resolvedSymbol = self.symbolResolver.resolveSymbol(staticSymbol);\n                return resolvedSymbol ? resolvedSymbol.metadata : null;\n            }\n            function simplifyEagerly(value) {\n                return simplifyInContext(context, value, depth, 0);\n            }\n            function simplifyLazily(value) {\n                return simplifyInContext(context, value, depth, references + 1);\n            }\n            function simplifyNested(nestedContext, value) {\n                if (nestedContext === context) {\n                    // If the context hasn't changed let the exception propagate unmodified.\n                    return simplifyInContext(nestedContext, value, depth + 1, references);\n                }\n                try {\n                    return simplifyInContext(nestedContext, value, depth + 1, references);\n                }\n                catch (e) {\n                    if (isMetadataError(e)) {\n                        // Propagate the message text up but add a message to the chain that explains how we got\n                        // here.\n                        // e.chain implies e.symbol\n                        var summaryMsg = e.chain ? 'references \\'' + e.symbol.name + '\\'' : errorSummary(e);\n                        var summary = \"'\" + nestedContext.name + \"' \" + summaryMsg;\n                        var chain = { message: summary, position: e.position, next: e.chain };\n                        // TODO(chuckj): retrieve the position information indirectly from the collectors node\n                        // map if the metadata is from a .ts file.\n                        self.error({\n                            message: e.message,\n                            advise: e.advise,\n                            context: e.context, chain: chain,\n                            symbol: nestedContext\n                        }, context);\n                    }\n                    else {\n                        // It is probably an internal error.\n                        throw e;\n                    }\n                }\n            }\n            function simplifyCall(functionSymbol, targetFunction, args, targetExpression) {\n                if (targetFunction && targetFunction['__symbolic'] == 'function') {\n                    if (calling.get(functionSymbol)) {\n                        self.error({\n                            message: 'Recursion is not supported',\n                            summary: \"called '\" + functionSymbol.name + \"' recursively\",\n                            value: targetFunction\n                        }, functionSymbol);\n                    }\n                    try {\n                        var value_1 = targetFunction['value'];\n                        if (value_1 && (depth != 0 || value_1.__symbolic != 'error')) {\n                            var parameters = targetFunction['parameters'];\n                            var defaults = targetFunction.defaults;\n                            args = args.map(function (arg) { return simplifyNested(context, arg); })\n                                .map(function (arg) { return shouldIgnore(arg) ? undefined : arg; });\n                            if (defaults && defaults.length > args.length) {\n                                args.push.apply(args, __spread(defaults.slice(args.length).map(function (value) { return simplify(value); })));\n                            }\n                            calling.set(functionSymbol, true);\n                            var functionScope = BindingScope$1.build();\n                            for (var i = 0; i < parameters.length; i++) {\n                                functionScope.define(parameters[i], args[i]);\n                            }\n                            var oldScope = scope;\n                            var result_1;\n                            try {\n                                scope = functionScope.done();\n                                result_1 = simplifyNested(functionSymbol, value_1);\n                            }\n                            finally {\n                                scope = oldScope;\n                            }\n                            return result_1;\n                        }\n                    }\n                    finally {\n                        calling.delete(functionSymbol);\n                    }\n                }\n                if (depth === 0) {\n                    // If depth is 0 we are evaluating the top level expression that is describing element\n                    // decorator. In this case, it is a decorator we don't understand, such as a custom\n                    // non-angular decorator, and we should just ignore it.\n                    return IGNORE;\n                }\n                var position = undefined;\n                if (targetExpression && targetExpression.__symbolic == 'resolved') {\n                    var line = targetExpression.line;\n                    var character = targetExpression.character;\n                    var fileName = targetExpression.fileName;\n                    if (fileName != null && line != null && character != null) {\n                        position = { fileName: fileName, line: line, column: character };\n                    }\n                }\n                self.error({\n                    message: FUNCTION_CALL_NOT_SUPPORTED,\n                    context: functionSymbol,\n                    value: targetFunction, position: position\n                }, context);\n            }\n            function simplify(expression) {\n                if (isPrimitive(expression)) {\n                    return expression;\n                }\n                if (expression instanceof Array) {\n                    var result_2 = [];\n                    try {\n                        for (var _a = __values(expression), _b = _a.next(); !_b.done; _b = _a.next()) {\n                            var item = _b.value;\n                            // Check for a spread expression\n                            if (item && item.__symbolic === 'spread') {\n                                // We call with references as 0 because we require the actual value and cannot\n                                // tolerate a reference here.\n                                var spreadArray = simplifyEagerly(item.expression);\n                                if (Array.isArray(spreadArray)) {\n                                    try {\n                                        for (var spreadArray_1 = __values(spreadArray), spreadArray_1_1 = spreadArray_1.next(); !spreadArray_1_1.done; spreadArray_1_1 = spreadArray_1.next()) {\n                                            var spreadItem = spreadArray_1_1.value;\n                                            result_2.push(spreadItem);\n                                        }\n                                    }\n                                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                                    finally {\n                                        try {\n                                            if (spreadArray_1_1 && !spreadArray_1_1.done && (_c = spreadArray_1.return)) _c.call(spreadArray_1);\n                                        }\n                                        finally { if (e_2) throw e_2.error; }\n                                    }\n                                    continue;\n                                }\n                            }\n                            var value_2 = simplify(item);\n                            if (shouldIgnore(value_2)) {\n                                continue;\n                            }\n                            result_2.push(value_2);\n                        }\n                    }\n                    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                    finally {\n                        try {\n                            if (_b && !_b.done && (_d = _a.return)) _d.call(_a);\n                        }\n                        finally { if (e_3) throw e_3.error; }\n                    }\n                    return result_2;\n                }\n                if (expression instanceof StaticSymbol) {\n                    // Stop simplification at builtin symbols or if we are in a reference context and\n                    // the symbol doesn't have members.\n                    if (expression === self.injectionToken || self.conversionMap.has(expression) ||\n                        (references > 0 && !expression.members.length)) {\n                        return expression;\n                    }\n                    else {\n                        var staticSymbol = expression;\n                        var declarationValue = resolveReferenceValue(staticSymbol);\n                        if (declarationValue != null) {\n                            return simplifyNested(staticSymbol, declarationValue);\n                        }\n                        else {\n                            return staticSymbol;\n                        }\n                    }\n                }\n                if (expression) {\n                    if (expression['__symbolic']) {\n                        var staticSymbol = void 0;\n                        switch (expression['__symbolic']) {\n                            case 'binop':\n                                var left = simplify(expression['left']);\n                                if (shouldIgnore(left))\n                                    return left;\n                                var right = simplify(expression['right']);\n                                if (shouldIgnore(right))\n                                    return right;\n                                switch (expression['operator']) {\n                                    case '&&':\n                                        return left && right;\n                                    case '||':\n                                        return left || right;\n                                    case '|':\n                                        return left | right;\n                                    case '^':\n                                        return left ^ right;\n                                    case '&':\n                                        return left & right;\n                                    case '==':\n                                        return left == right;\n                                    case '!=':\n                                        return left != right;\n                                    case '===':\n                                        return left === right;\n                                    case '!==':\n                                        return left !== right;\n                                    case '<':\n                                        return left < right;\n                                    case '>':\n                                        return left > right;\n                                    case '<=':\n                                        return left <= right;\n                                    case '>=':\n                                        return left >= right;\n                                    case '<<':\n                                        return left << right;\n                                    case '>>':\n                                        return left >> right;\n                                    case '+':\n                                        return left + right;\n                                    case '-':\n                                        return left - right;\n                                    case '*':\n                                        return left * right;\n                                    case '/':\n                                        return left / right;\n                                    case '%':\n                                        return left % right;\n                                }\n                                return null;\n                            case 'if':\n                                var condition = simplify(expression['condition']);\n                                return condition ? simplify(expression['thenExpression']) :\n                                    simplify(expression['elseExpression']);\n                            case 'pre':\n                                var operand = simplify(expression['operand']);\n                                if (shouldIgnore(operand))\n                                    return operand;\n                                switch (expression['operator']) {\n                                    case '+':\n                                        return operand;\n                                    case '-':\n                                        return -operand;\n                                    case '!':\n                                        return !operand;\n                                    case '~':\n                                        return ~operand;\n                                }\n                                return null;\n                            case 'index':\n                                var indexTarget = simplifyEagerly(expression['expression']);\n                                var index = simplifyEagerly(expression['index']);\n                                if (indexTarget && isPrimitive(index))\n                                    return indexTarget[index];\n                                return null;\n                            case 'select':\n                                var member = expression['member'];\n                                var selectContext = context;\n                                var selectTarget = simplify(expression['expression']);\n                                if (selectTarget instanceof StaticSymbol) {\n                                    var members = selectTarget.members.concat(member);\n                                    selectContext =\n                                        self.getStaticSymbol(selectTarget.filePath, selectTarget.name, members);\n                                    var declarationValue = resolveReferenceValue(selectContext);\n                                    if (declarationValue != null) {\n                                        return simplifyNested(selectContext, declarationValue);\n                                    }\n                                    else {\n                                        return selectContext;\n                                    }\n                                }\n                                if (selectTarget && isPrimitive(member))\n                                    return simplifyNested(selectContext, selectTarget[member]);\n                                return null;\n                            case 'reference':\n                                // Note: This only has to deal with variable references, as symbol references have\n                                // been converted into 'resolved'\n                                // in the StaticSymbolResolver.\n                                var name_2 = expression['name'];\n                                var localValue = scope.resolve(name_2);\n                                if (localValue != BindingScope$1.missing) {\n                                    return localValue;\n                                }\n                                break;\n                            case 'resolved':\n                                try {\n                                    return simplify(expression.symbol);\n                                }\n                                catch (e) {\n                                    // If an error is reported evaluating the symbol record the position of the\n                                    // reference in the error so it can\n                                    // be reported in the error message generated from the exception.\n                                    if (isMetadataError(e) && expression.fileName != null &&\n                                        expression.line != null && expression.character != null) {\n                                        e.position = {\n                                            fileName: expression.fileName,\n                                            line: expression.line,\n                                            column: expression.character\n                                        };\n                                    }\n                                    throw e;\n                                }\n                            case 'class':\n                                return context;\n                            case 'function':\n                                return context;\n                            case 'new':\n                            case 'call':\n                                // Determine if the function is a built-in conversion\n                                staticSymbol = simplifyInContext(context, expression['expression'], depth + 1, /* references */ 0);\n                                if (staticSymbol instanceof StaticSymbol) {\n                                    if (staticSymbol === self.injectionToken || staticSymbol === self.opaqueToken) {\n                                        // if somebody calls new InjectionToken, don't create an InjectionToken,\n                                        // but rather return the symbol to which the InjectionToken is assigned to.\n                                        // OpaqueToken is supported too as it is required by the language service to\n                                        // support v4 and prior versions of Angular.\n                                        return context;\n                                    }\n                                    var argExpressions = expression['arguments'] || [];\n                                    var converter = self.conversionMap.get(staticSymbol);\n                                    if (converter) {\n                                        var args = argExpressions.map(function (arg) { return simplifyNested(context, arg); })\n                                            .map(function (arg) { return shouldIgnore(arg) ? undefined : arg; });\n                                        return converter(context, args);\n                                    }\n                                    else {\n                                        // Determine if the function is one we can simplify.\n                                        var targetFunction = resolveReferenceValue(staticSymbol);\n                                        return simplifyCall(staticSymbol, targetFunction, argExpressions, expression['expression']);\n                                    }\n                                }\n                                return IGNORE;\n                            case 'error':\n                                var message = expression.message;\n                                if (expression['line'] != null) {\n                                    self.error({\n                                        message: message,\n                                        context: expression.context,\n                                        value: expression,\n                                        position: {\n                                            fileName: expression['fileName'],\n                                            line: expression['line'],\n                                            column: expression['character']\n                                        }\n                                    }, context);\n                                }\n                                else {\n                                    self.error({ message: message, context: expression.context }, context);\n                                }\n                                return IGNORE;\n                            case 'ignore':\n                                return expression;\n                        }\n                        return null;\n                    }\n                    return mapStringMap(expression, function (value, name) {\n                        if (REFERENCE_SET.has(name)) {\n                            if (name === USE_VALUE && PROVIDE in expression) {\n                                // If this is a provider expression, check for special tokens that need the value\n                                // during analysis.\n                                var provide = simplify(expression.provide);\n                                if (provide === self.ROUTES || provide == self.ANALYZE_FOR_ENTRY_COMPONENTS) {\n                                    return simplify(value);\n                                }\n                            }\n                            return simplifyLazily(value);\n                        }\n                        return simplify(value);\n                    });\n                }\n                return IGNORE;\n                var e_3, _d, e_2, _c;\n            }\n            return simplify(value);\n        }\n        var result;\n        try {\n            result = simplifyInContext(context, value, 0, lazy ? 1 : 0);\n        }\n        catch (e) {\n            if (this.errorRecorder) {\n                this.reportError(e, context);\n            }\n            else {\n                throw formatMetadataError(e, context);\n            }\n        }\n        if (shouldIgnore(result)) {\n            return undefined;\n        }\n        return result;\n    };\n    StaticReflector.prototype.getTypeMetadata = function (type) {\n        var resolvedSymbol = this.symbolResolver.resolveSymbol(type);\n        return resolvedSymbol && resolvedSymbol.metadata ? resolvedSymbol.metadata :\n            { __symbolic: 'class' };\n    };\n    StaticReflector.prototype.reportError = function (error$$1, context, path$$1) {\n        if (this.errorRecorder) {\n            this.errorRecorder(formatMetadataError(error$$1, context), (context && context.filePath) || path$$1);\n        }\n        else {\n            throw error$$1;\n        }\n    };\n    StaticReflector.prototype.error = function (_a, reportingContext) {\n        var message = _a.message, summary = _a.summary, advise = _a.advise, position = _a.position, context = _a.context, value = _a.value, symbol = _a.symbol, chain = _a.chain;\n        this.reportError(metadataError(message, summary, advise, position, symbol, context, chain), reportingContext);\n    };\n    return StaticReflector;\n}());\nvar METADATA_ERROR = 'ngMetadataError';\nfunction metadataError(message, summary, advise, position, symbol, context, chain) {\n    var error$$1 = syntaxError(message);\n    error$$1[METADATA_ERROR] = true;\n    if (advise)\n        error$$1.advise = advise;\n    if (position)\n        error$$1.position = position;\n    if (summary)\n        error$$1.summary = summary;\n    if (context)\n        error$$1.context = context;\n    if (chain)\n        error$$1.chain = chain;\n    if (symbol)\n        error$$1.symbol = symbol;\n    return error$$1;\n}\nfunction isMetadataError(error$$1) {\n    return !!error$$1[METADATA_ERROR];\n}\nvar REFERENCE_TO_NONEXPORTED_CLASS = 'Reference to non-exported class';\nvar VARIABLE_NOT_INITIALIZED = 'Variable not initialized';\nvar DESTRUCTURE_NOT_SUPPORTED = 'Destructuring not supported';\nvar COULD_NOT_RESOLVE_TYPE = 'Could not resolve type';\nvar FUNCTION_CALL_NOT_SUPPORTED = 'Function call not supported';\nvar REFERENCE_TO_LOCAL_SYMBOL = 'Reference to a local symbol';\nvar LAMBDA_NOT_SUPPORTED = 'Lambda not supported';\nfunction expandedMessage(message, context) {\n    switch (message) {\n        case REFERENCE_TO_NONEXPORTED_CLASS:\n            if (context && context.className) {\n                return \"References to a non-exported class are not supported in decorators but \" + context.className + \" was referenced.\";\n            }\n            break;\n        case VARIABLE_NOT_INITIALIZED:\n            return 'Only initialized variables and constants can be referenced in decorators because the value of this variable is needed by the template compiler';\n        case DESTRUCTURE_NOT_SUPPORTED:\n            return 'Referencing an exported destructured variable or constant is not supported in decorators and this value is needed by the template compiler';\n        case COULD_NOT_RESOLVE_TYPE:\n            if (context && context.typeName) {\n                return \"Could not resolve type \" + context.typeName;\n            }\n            break;\n        case FUNCTION_CALL_NOT_SUPPORTED:\n            if (context && context.name) {\n                return \"Function calls are not supported in decorators but '\" + context.name + \"' was called\";\n            }\n            return 'Function calls are not supported in decorators';\n        case REFERENCE_TO_LOCAL_SYMBOL:\n            if (context && context.name) {\n                return \"Reference to a local (non-exported) symbols are not supported in decorators but '\" + context.name + \"' was referenced\";\n            }\n            break;\n        case LAMBDA_NOT_SUPPORTED:\n            return \"Function expressions are not supported in decorators\";\n    }\n    return message;\n}\nfunction messageAdvise(message, context) {\n    switch (message) {\n        case REFERENCE_TO_NONEXPORTED_CLASS:\n            if (context && context.className) {\n                return \"Consider exporting '\" + context.className + \"'\";\n            }\n            break;\n        case DESTRUCTURE_NOT_SUPPORTED:\n            return 'Consider simplifying to avoid destructuring';\n        case REFERENCE_TO_LOCAL_SYMBOL:\n            if (context && context.name) {\n                return \"Consider exporting '\" + context.name + \"'\";\n            }\n            break;\n        case LAMBDA_NOT_SUPPORTED:\n            return \"Consider changing the function expression into an exported function\";\n    }\n    return undefined;\n}\nfunction errorSummary(error$$1) {\n    if (error$$1.summary) {\n        return error$$1.summary;\n    }\n    switch (error$$1.message) {\n        case REFERENCE_TO_NONEXPORTED_CLASS:\n            if (error$$1.context && error$$1.context.className) {\n                return \"references non-exported class \" + error$$1.context.className;\n            }\n            break;\n        case VARIABLE_NOT_INITIALIZED:\n            return 'is not initialized';\n        case DESTRUCTURE_NOT_SUPPORTED:\n            return 'is a destructured variable';\n        case COULD_NOT_RESOLVE_TYPE:\n            return 'could not be resolved';\n        case FUNCTION_CALL_NOT_SUPPORTED:\n            if (error$$1.context && error$$1.context.name) {\n                return \"calls '\" + error$$1.context.name + \"'\";\n            }\n            return \"calls a function\";\n        case REFERENCE_TO_LOCAL_SYMBOL:\n            if (error$$1.context && error$$1.context.name) {\n                return \"references local variable \" + error$$1.context.name;\n            }\n            return \"references a local variable\";\n    }\n    return 'contains the error';\n}\nfunction mapStringMap(input, transform) {\n    if (!input)\n        return {};\n    var result = {};\n    Object.keys(input).forEach(function (key) {\n        var value = transform(input[key], key);\n        if (!shouldIgnore(value)) {\n            if (HIDDEN_KEY.test(key)) {\n                Object.defineProperty(result, key, { enumerable: false, configurable: true, value: value });\n            }\n            else {\n                result[key] = value;\n            }\n        }\n    });\n    return result;\n}\nfunction isPrimitive(o) {\n    return o === null || (typeof o !== 'function' && typeof o !== 'object');\n}\nvar BindingScope$1 = /** @class */ (function () {\n    function BindingScope() {\n    }\n    BindingScope.build = function () {\n        var current = new Map();\n        return {\n            define: function (name, value) {\n                current.set(name, value);\n                return this;\n            },\n            done: function () {\n                return current.size > 0 ? new PopulatedScope(current) : BindingScope.empty;\n            }\n        };\n    };\n    BindingScope.missing = {};\n    BindingScope.empty = { resolve: function (name) { return BindingScope.missing; } };\n    return BindingScope;\n}());\nvar PopulatedScope = /** @class */ (function (_super) {\n    __extends(PopulatedScope, _super);\n    function PopulatedScope(bindings) {\n        var _this = _super.call(this) || this;\n        _this.bindings = bindings;\n        return _this;\n    }\n    PopulatedScope.prototype.resolve = function (name) {\n        return this.bindings.has(name) ? this.bindings.get(name) : BindingScope$1.missing;\n    };\n    return PopulatedScope;\n}(BindingScope$1));\nfunction formatMetadataMessageChain(chain, advise) {\n    var expanded = expandedMessage(chain.message, chain.context);\n    var nesting = chain.symbol ? \" in '\" + chain.symbol.name + \"'\" : '';\n    var message = \"\" + expanded + nesting;\n    var position = chain.position;\n    var next = chain.next ?\n        formatMetadataMessageChain(chain.next, advise) :\n        advise ? { message: advise } : undefined;\n    return { message: message, position: position, next: next };\n}\nfunction formatMetadataError(e, context) {\n    if (isMetadataError(e)) {\n        // Produce a formatted version of the and leaving enough information in the original error\n        // to recover the formatting information to eventually produce a diagnostic error message.\n        var position = e.position;\n        var chain = {\n            message: \"Error during template compile of '\" + context.name + \"'\",\n            position: position,\n            next: { message: e.message, next: e.chain, context: e.context, symbol: e.symbol }\n        };\n        var advise = e.advise || messageAdvise(e.message, e.context);\n        return formattedError(formatMetadataMessageChain(chain, advise));\n    }\n    return e;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar AotSummaryResolver = /** @class */ (function () {\n    function AotSummaryResolver(host, staticSymbolCache) {\n        this.host = host;\n        this.staticSymbolCache = staticSymbolCache;\n        // Note: this will only contain StaticSymbols without members!\n        this.summaryCache = new Map();\n        this.loadedFilePaths = new Map();\n        // Note: this will only contain StaticSymbols without members!\n        this.importAs = new Map();\n        this.knownFileNameToModuleNames = new Map();\n    }\n    AotSummaryResolver.prototype.isLibraryFile = function (filePath) {\n        // Note: We need to strip the .ngfactory. file path,\n        // so this method also works for generated files\n        // (for which host.isSourceFile will always return false).\n        return !this.host.isSourceFile(stripGeneratedFileSuffix(filePath));\n    };\n    AotSummaryResolver.prototype.toSummaryFileName = function (filePath, referringSrcFileName) {\n        return this.host.toSummaryFileName(filePath, referringSrcFileName);\n    };\n    AotSummaryResolver.prototype.fromSummaryFileName = function (fileName, referringLibFileName) {\n        return this.host.fromSummaryFileName(fileName, referringLibFileName);\n    };\n    AotSummaryResolver.prototype.resolveSummary = function (staticSymbol) {\n        var rootSymbol = staticSymbol.members.length ?\n            this.staticSymbolCache.get(staticSymbol.filePath, staticSymbol.name) :\n            staticSymbol;\n        var summary = this.summaryCache.get(rootSymbol);\n        if (!summary) {\n            this._loadSummaryFile(staticSymbol.filePath);\n            summary = this.summaryCache.get(staticSymbol);\n        }\n        return (rootSymbol === staticSymbol && summary) || null;\n    };\n    AotSummaryResolver.prototype.getSymbolsOf = function (filePath) {\n        if (this._loadSummaryFile(filePath)) {\n            return Array.from(this.summaryCache.keys()).filter(function (symbol) { return symbol.filePath === filePath; });\n        }\n        return null;\n    };\n    AotSummaryResolver.prototype.getImportAs = function (staticSymbol) {\n        staticSymbol.assertNoMembers();\n        return this.importAs.get(staticSymbol);\n    };\n    /**\n     * Converts a file path to a module name that can be used as an `import`.\n     */\n    AotSummaryResolver.prototype.getKnownModuleName = function (importedFilePath) {\n        return this.knownFileNameToModuleNames.get(importedFilePath) || null;\n    };\n    AotSummaryResolver.prototype.addSummary = function (summary) { this.summaryCache.set(summary.symbol, summary); };\n    AotSummaryResolver.prototype._loadSummaryFile = function (filePath) {\n        var _this = this;\n        var hasSummary = this.loadedFilePaths.get(filePath);\n        if (hasSummary != null) {\n            return hasSummary;\n        }\n        var json = null;\n        if (this.isLibraryFile(filePath)) {\n            var summaryFilePath = summaryFileName(filePath);\n            try {\n                json = this.host.loadSummary(summaryFilePath);\n            }\n            catch (e) {\n                console.error(\"Error loading summary file \" + summaryFilePath);\n                throw e;\n            }\n        }\n        hasSummary = json != null;\n        this.loadedFilePaths.set(filePath, hasSummary);\n        if (json) {\n            var _a = deserializeSummaries(this.staticSymbolCache, this, filePath, json), moduleName = _a.moduleName, summaries = _a.summaries, importAs = _a.importAs;\n            summaries.forEach(function (summary) { return _this.summaryCache.set(summary.symbol, summary); });\n            if (moduleName) {\n                this.knownFileNameToModuleNames.set(filePath, moduleName);\n            }\n            importAs.forEach(function (importAs) { _this.importAs.set(importAs.symbol, importAs.importAs); });\n        }\n        return hasSummary;\n    };\n    return AotSummaryResolver;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Creates a new AotCompiler based on options and a host.\n */\n\nvar JitSummaryResolver = /** @class */ (function () {\n    function JitSummaryResolver() {\n        this._summaries = new Map();\n    }\n    JitSummaryResolver.prototype.isLibraryFile = function () { return false; };\n    JitSummaryResolver.prototype.toSummaryFileName = function (fileName) { return fileName; };\n    JitSummaryResolver.prototype.fromSummaryFileName = function (fileName) { return fileName; };\n    JitSummaryResolver.prototype.resolveSummary = function (reference) {\n        return this._summaries.get(reference) || null;\n    };\n    JitSummaryResolver.prototype.getSymbolsOf = function () { return []; };\n    JitSummaryResolver.prototype.getImportAs = function (reference) { return reference; };\n    JitSummaryResolver.prototype.getKnownModuleName = function (fileName) { return null; };\n    JitSummaryResolver.prototype.addSummary = function (summary) { this._summaries.set(summary.symbol, summary); };\n    return JitSummaryResolver;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar AbstractJsEmitterVisitor = /** @class */ (function (_super) {\n    __extends(AbstractJsEmitterVisitor, _super);\n    function AbstractJsEmitterVisitor() {\n        return _super.call(this, false) || this;\n    }\n    AbstractJsEmitterVisitor.prototype.visitDeclareClassStmt = function (stmt, ctx) {\n        var _this = this;\n        ctx.pushClass(stmt);\n        this._visitClassConstructor(stmt, ctx);\n        if (stmt.parent != null) {\n            ctx.print(stmt, stmt.name + \".prototype = Object.create(\");\n            stmt.parent.visitExpression(this, ctx);\n            ctx.println(stmt, \".prototype);\");\n        }\n        stmt.getters.forEach(function (getter) { return _this._visitClassGetter(stmt, getter, ctx); });\n        stmt.methods.forEach(function (method) { return _this._visitClassMethod(stmt, method, ctx); });\n        ctx.popClass();\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype._visitClassConstructor = function (stmt, ctx) {\n        ctx.print(stmt, \"function \" + stmt.name + \"(\");\n        if (stmt.constructorMethod != null) {\n            this._visitParams(stmt.constructorMethod.params, ctx);\n        }\n        ctx.println(stmt, \") {\");\n        ctx.incIndent();\n        if (stmt.constructorMethod != null) {\n            if (stmt.constructorMethod.body.length > 0) {\n                ctx.println(stmt, \"var self = this;\");\n                this.visitAllStatements(stmt.constructorMethod.body, ctx);\n            }\n        }\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n    };\n    AbstractJsEmitterVisitor.prototype._visitClassGetter = function (stmt, getter, ctx) {\n        ctx.println(stmt, \"Object.defineProperty(\" + stmt.name + \".prototype, '\" + getter.name + \"', { get: function() {\");\n        ctx.incIndent();\n        if (getter.body.length > 0) {\n            ctx.println(stmt, \"var self = this;\");\n            this.visitAllStatements(getter.body, ctx);\n        }\n        ctx.decIndent();\n        ctx.println(stmt, \"}});\");\n    };\n    AbstractJsEmitterVisitor.prototype._visitClassMethod = function (stmt, method, ctx) {\n        ctx.print(stmt, stmt.name + \".prototype.\" + method.name + \" = function(\");\n        this._visitParams(method.params, ctx);\n        ctx.println(stmt, \") {\");\n        ctx.incIndent();\n        if (method.body.length > 0) {\n            ctx.println(stmt, \"var self = this;\");\n            this.visitAllStatements(method.body, ctx);\n        }\n        ctx.decIndent();\n        ctx.println(stmt, \"};\");\n    };\n    AbstractJsEmitterVisitor.prototype.visitReadVarExpr = function (ast, ctx) {\n        if (ast.builtin === BuiltinVar.This) {\n            ctx.print(ast, 'self');\n        }\n        else if (ast.builtin === BuiltinVar.Super) {\n            throw new Error(\"'super' needs to be handled at a parent ast node, not at the variable level!\");\n        }\n        else {\n            _super.prototype.visitReadVarExpr.call(this, ast, ctx);\n        }\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitDeclareVarStmt = function (stmt, ctx) {\n        ctx.print(stmt, \"var \" + stmt.name);\n        if (stmt.value) {\n            ctx.print(stmt, ' = ');\n            stmt.value.visitExpression(this, ctx);\n        }\n        ctx.println(stmt, \";\");\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitCastExpr = function (ast, ctx) {\n        ast.value.visitExpression(this, ctx);\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitInvokeFunctionExpr = function (expr, ctx) {\n        var fnExpr = expr.fn;\n        if (fnExpr instanceof ReadVarExpr && fnExpr.builtin === BuiltinVar.Super) {\n            ctx.currentClass.parent.visitExpression(this, ctx);\n            ctx.print(expr, \".call(this\");\n            if (expr.args.length > 0) {\n                ctx.print(expr, \", \");\n                this.visitAllExpressions(expr.args, ctx, ',');\n            }\n            ctx.print(expr, \")\");\n        }\n        else {\n            _super.prototype.visitInvokeFunctionExpr.call(this, expr, ctx);\n        }\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitFunctionExpr = function (ast, ctx) {\n        ctx.print(ast, \"function\" + (ast.name ? ' ' + ast.name : '') + \"(\");\n        this._visitParams(ast.params, ctx);\n        ctx.println(ast, \") {\");\n        ctx.incIndent();\n        this.visitAllStatements(ast.statements, ctx);\n        ctx.decIndent();\n        ctx.print(ast, \"}\");\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitDeclareFunctionStmt = function (stmt, ctx) {\n        ctx.print(stmt, \"function \" + stmt.name + \"(\");\n        this._visitParams(stmt.params, ctx);\n        ctx.println(stmt, \") {\");\n        ctx.incIndent();\n        this.visitAllStatements(stmt.statements, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitTryCatchStmt = function (stmt, ctx) {\n        ctx.println(stmt, \"try {\");\n        ctx.incIndent();\n        this.visitAllStatements(stmt.bodyStmts, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"} catch (\" + CATCH_ERROR_VAR$1.name + \") {\");\n        ctx.incIndent();\n        var catchStmts = [CATCH_STACK_VAR$1.set(CATCH_ERROR_VAR$1.prop('stack')).toDeclStmt(null, [\n                StmtModifier.Final\n            ])].concat(stmt.catchStmts);\n        this.visitAllStatements(catchStmts, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype._visitParams = function (params, ctx) {\n        this.visitAllObjects(function (param) { return ctx.print(null, param.name); }, params, ctx, ',');\n    };\n    AbstractJsEmitterVisitor.prototype.getBuiltinMethodName = function (method) {\n        var name;\n        switch (method) {\n            case BuiltinMethod.ConcatArray:\n                name = 'concat';\n                break;\n            case BuiltinMethod.SubscribeObservable:\n                name = 'subscribe';\n                break;\n            case BuiltinMethod.Bind:\n                name = 'bind';\n                break;\n            default:\n                throw new Error(\"Unknown builtin method: \" + method);\n        }\n        return name;\n    };\n    return AbstractJsEmitterVisitor;\n}(AbstractEmitterVisitor));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar JitEmitterVisitor = /** @class */ (function (_super) {\n    __extends(JitEmitterVisitor, _super);\n    function JitEmitterVisitor(reflector) {\n        var _this = _super.call(this) || this;\n        _this.reflector = reflector;\n        _this._evalArgNames = [];\n        _this._evalArgValues = [];\n        _this._evalExportedVars = [];\n        return _this;\n    }\n    JitEmitterVisitor.prototype.createReturnStmt = function (ctx) {\n        var stmt = new ReturnStatement(new LiteralMapExpr(this._evalExportedVars.map(function (resultVar) { return new LiteralMapEntry(resultVar, variable(resultVar), false); })));\n        stmt.visitStatement(this, ctx);\n    };\n    JitEmitterVisitor.prototype.getArgs = function () {\n        var result = {};\n        for (var i = 0; i < this._evalArgNames.length; i++) {\n            result[this._evalArgNames[i]] = this._evalArgValues[i];\n        }\n        return result;\n    };\n    JitEmitterVisitor.prototype.visitExternalExpr = function (ast, ctx) {\n        var value = this.reflector.resolveExternalReference(ast.value);\n        var id = this._evalArgValues.indexOf(value);\n        if (id === -1) {\n            id = this._evalArgValues.length;\n            this._evalArgValues.push(value);\n            var name_1 = identifierName({ reference: value }) || 'val';\n            this._evalArgNames.push(\"jit_\" + name_1 + \"_\" + id);\n        }\n        ctx.print(ast, this._evalArgNames[id]);\n        return null;\n    };\n    JitEmitterVisitor.prototype.visitDeclareVarStmt = function (stmt, ctx) {\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            this._evalExportedVars.push(stmt.name);\n        }\n        return _super.prototype.visitDeclareVarStmt.call(this, stmt, ctx);\n    };\n    JitEmitterVisitor.prototype.visitDeclareFunctionStmt = function (stmt, ctx) {\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            this._evalExportedVars.push(stmt.name);\n        }\n        return _super.prototype.visitDeclareFunctionStmt.call(this, stmt, ctx);\n    };\n    JitEmitterVisitor.prototype.visitDeclareClassStmt = function (stmt, ctx) {\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            this._evalExportedVars.push(stmt.name);\n        }\n        return _super.prototype.visitDeclareClassStmt.call(this, stmt, ctx);\n    };\n    return JitEmitterVisitor;\n}(AbstractJsEmitterVisitor));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Provides access to reflection data about symbols that the compiler needs.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create a {@link UrlResolver} with no package prefix.\n */\n\nfunction createOfflineCompileUrlResolver() {\n    return new UrlResolver('.');\n}\nvar UrlResolver = /** @class */ (function () {\n    function UrlResolverImpl(_packagePrefix) {\n        if (_packagePrefix === void 0) { _packagePrefix = null; }\n        this._packagePrefix = _packagePrefix;\n    }\n    /**\n     * Resolves the `url` given the `baseUrl`:\n     * - when the `url` is null, the `baseUrl` is returned,\n     * - if `url` is relative ('path/to/here', './path/to/here'), the resolved url is a combination of\n     * `baseUrl` and `url`,\n     * - if `url` is absolute (it has a scheme: 'http://', 'https://' or start with '/'), the `url` is\n     * returned as is (ignoring the `baseUrl`)\n     */\n    UrlResolverImpl.prototype.resolve = function (baseUrl, url) {\n        var resolvedUrl = url;\n        if (baseUrl != null && baseUrl.length > 0) {\n            resolvedUrl = _resolveUrl(baseUrl, resolvedUrl);\n        }\n        var resolvedParts = _split(resolvedUrl);\n        var prefix = this._packagePrefix;\n        if (prefix != null && resolvedParts != null &&\n            resolvedParts[_ComponentIndex.Scheme] == 'package') {\n            var path$$1 = resolvedParts[_ComponentIndex.Path];\n            prefix = prefix.replace(/\\/+$/, '');\n            path$$1 = path$$1.replace(/^\\/+/, '');\n            return prefix + \"/\" + path$$1;\n        }\n        return resolvedUrl;\n    };\n    return UrlResolverImpl;\n}());\n/**\n * Extract the scheme of a URL.\n */\n\n// The code below is adapted from Traceur:\n// https://github.com/google/traceur-compiler/blob/9511c1dafa972bf0de1202a8a863bad02f0f95a8/src/runtime/url.js\n/**\n * Builds a URI string from already-encoded parts.\n *\n * No encoding is performed.  Any component may be omitted as either null or\n * undefined.\n *\n * @param opt_scheme The scheme such as 'http'.\n * @param opt_userInfo The user name before the '@'.\n * @param opt_domain The domain such as 'www.google.com', already\n *     URI-encoded.\n * @param opt_port The port number.\n * @param opt_path The path, already URI-encoded.  If it is not\n *     empty, it must begin with a slash.\n * @param opt_queryData The URI-encoded query data.\n * @param opt_fragment The URI-encoded fragment identifier.\n * @return The fully combined URI.\n */\nfunction _buildFromEncodedParts(opt_scheme, opt_userInfo, opt_domain, opt_port, opt_path, opt_queryData, opt_fragment) {\n    var out = [];\n    if (opt_scheme != null) {\n        out.push(opt_scheme + ':');\n    }\n    if (opt_domain != null) {\n        out.push('//');\n        if (opt_userInfo != null) {\n            out.push(opt_userInfo + '@');\n        }\n        out.push(opt_domain);\n        if (opt_port != null) {\n            out.push(':' + opt_port);\n        }\n    }\n    if (opt_path != null) {\n        out.push(opt_path);\n    }\n    if (opt_queryData != null) {\n        out.push('?' + opt_queryData);\n    }\n    if (opt_fragment != null) {\n        out.push('#' + opt_fragment);\n    }\n    return out.join('');\n}\n/**\n * A regular expression for breaking a URI into its component parts.\n *\n * {@link http://www.gbiv.com/protocols/uri/rfc/rfc3986.html#RFC2234} says\n * As the \"first-match-wins\" algorithm is identical to the \"greedy\"\n * disambiguation method used by POSIX regular expressions, it is natural and\n * commonplace to use a regular expression for parsing the potential five\n * components of a URI reference.\n *\n * The following line is the regular expression for breaking-down a\n * well-formed URI reference into its components.\n *\n * <pre>\n * ^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?\n *  12            3  4          5       6  7        8 9\n * </pre>\n *\n * The numbers in the second line above are only to assist readability; they\n * indicate the reference points for each subexpression (i.e., each paired\n * parenthesis). We refer to the value matched for subexpression <n> as $<n>.\n * For example, matching the above expression to\n * <pre>\n *     http://www.ics.uci.edu/pub/ietf/uri/#Related\n * </pre>\n * results in the following subexpression matches:\n * <pre>\n *    $1 = http:\n *    $2 = http\n *    $3 = //www.ics.uci.edu\n *    $4 = www.ics.uci.edu\n *    $5 = /pub/ietf/uri/\n *    $6 = <undefined>\n *    $7 = <undefined>\n *    $8 = #Related\n *    $9 = Related\n * </pre>\n * where <undefined> indicates that the component is not present, as is the\n * case for the query component in the above example. Therefore, we can\n * determine the value of the five components as\n * <pre>\n *    scheme    = $2\n *    authority = $4\n *    path      = $5\n *    query     = $7\n *    fragment  = $9\n * </pre>\n *\n * The regular expression has been modified slightly to expose the\n * userInfo, domain, and port separately from the authority.\n * The modified version yields\n * <pre>\n *    $1 = http              scheme\n *    $2 = <undefined>       userInfo -\\\n *    $3 = www.ics.uci.edu   domain     | authority\n *    $4 = <undefined>       port     -/\n *    $5 = /pub/ietf/uri/    path\n *    $6 = <undefined>       query without ?\n *    $7 = Related           fragment without #\n * </pre>\n * @internal\n */\nvar _splitRe = new RegExp('^' +\n    '(?:' +\n    '([^:/?#.]+)' + // scheme - ignore special characters\n    // used by other URL parts such as :,\n    // ?, /, #, and .\n    ':)?' +\n    '(?://' +\n    '(?:([^/?#]*)@)?' + // userInfo\n    '([\\\\w\\\\d\\\\-\\\\u0100-\\\\uffff.%]*)' + // domain - restrict to letters,\n    // digits, dashes, dots, percent\n    // escapes, and unicode characters.\n    '(?::([0-9]+))?' + // port\n    ')?' +\n    '([^?#]+)?' + // path\n    '(?:\\\\?([^#]*))?' + // query\n    '(?:#(.*))?' + // fragment\n    '$');\n/**\n * The index of each URI component in the return value of goog.uri.utils.split.\n * @enum {number}\n */\nvar _ComponentIndex;\n(function (_ComponentIndex) {\n    _ComponentIndex[_ComponentIndex[\"Scheme\"] = 1] = \"Scheme\";\n    _ComponentIndex[_ComponentIndex[\"UserInfo\"] = 2] = \"UserInfo\";\n    _ComponentIndex[_ComponentIndex[\"Domain\"] = 3] = \"Domain\";\n    _ComponentIndex[_ComponentIndex[\"Port\"] = 4] = \"Port\";\n    _ComponentIndex[_ComponentIndex[\"Path\"] = 5] = \"Path\";\n    _ComponentIndex[_ComponentIndex[\"QueryData\"] = 6] = \"QueryData\";\n    _ComponentIndex[_ComponentIndex[\"Fragment\"] = 7] = \"Fragment\";\n})(_ComponentIndex || (_ComponentIndex = {}));\n/**\n * Splits a URI into its component parts.\n *\n * Each component can be accessed via the component indices; for example:\n * <pre>\n * goog.uri.utils.split(someStr)[goog.uri.utils.CompontentIndex.QUERY_DATA];\n * </pre>\n *\n * @param uri The URI string to examine.\n * @return Each component still URI-encoded.\n *     Each component that is present will contain the encoded value, whereas\n *     components that are not present will be undefined or empty, depending\n *     on the browser's regular expression implementation.  Never null, since\n *     arbitrary strings may still look like path names.\n */\nfunction _split(uri) {\n    return uri.match(_splitRe);\n}\n/**\n  * Removes dot segments in given path component, as described in\n  * RFC 3986, section 5.2.4.\n  *\n  * @param path A non-empty path component.\n  * @return Path component with removed dot segments.\n  */\nfunction _removeDotSegments(path$$1) {\n    if (path$$1 == '/')\n        return '/';\n    var leadingSlash = path$$1[0] == '/' ? '/' : '';\n    var trailingSlash = path$$1[path$$1.length - 1] === '/' ? '/' : '';\n    var segments = path$$1.split('/');\n    var out = [];\n    var up = 0;\n    for (var pos = 0; pos < segments.length; pos++) {\n        var segment = segments[pos];\n        switch (segment) {\n            case '':\n            case '.':\n                break;\n            case '..':\n                if (out.length > 0) {\n                    out.pop();\n                }\n                else {\n                    up++;\n                }\n                break;\n            default:\n                out.push(segment);\n        }\n    }\n    if (leadingSlash == '') {\n        while (up-- > 0) {\n            out.unshift('..');\n        }\n        if (out.length === 0)\n            out.push('.');\n    }\n    return leadingSlash + out.join('/') + trailingSlash;\n}\n/**\n * Takes an array of the parts from split and canonicalizes the path part\n * and then joins all the parts.\n */\nfunction _joinAndCanonicalizePath(parts) {\n    var path$$1 = parts[_ComponentIndex.Path];\n    path$$1 = path$$1 == null ? '' : _removeDotSegments(path$$1);\n    parts[_ComponentIndex.Path] = path$$1;\n    return _buildFromEncodedParts(parts[_ComponentIndex.Scheme], parts[_ComponentIndex.UserInfo], parts[_ComponentIndex.Domain], parts[_ComponentIndex.Port], path$$1, parts[_ComponentIndex.QueryData], parts[_ComponentIndex.Fragment]);\n}\n/**\n * Resolves a URL.\n * @param base The URL acting as the base URL.\n * @param to The URL to resolve.\n */\nfunction _resolveUrl(base, url) {\n    var parts = _split(encodeURI(url));\n    var baseParts = _split(base);\n    if (parts[_ComponentIndex.Scheme] != null) {\n        return _joinAndCanonicalizePath(parts);\n    }\n    else {\n        parts[_ComponentIndex.Scheme] = baseParts[_ComponentIndex.Scheme];\n    }\n    for (var i = _ComponentIndex.Scheme; i <= _ComponentIndex.Port; i++) {\n        if (parts[i] == null) {\n            parts[i] = baseParts[i];\n        }\n    }\n    if (parts[_ComponentIndex.Path][0] == '/') {\n        return _joinAndCanonicalizePath(parts);\n    }\n    var path$$1 = baseParts[_ComponentIndex.Path];\n    if (path$$1 == null)\n        path$$1 = '/';\n    var index = path$$1.lastIndexOf('/');\n    path$$1 = path$$1.substring(0, index + 1) + parts[_ComponentIndex.Path];\n    parts[_ComponentIndex.Path] = path$$1;\n    return _joinAndCanonicalizePath(parts);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An interface for retrieving documents by URL that the compiler uses\n * to load templates.\n */\nvar ResourceLoader = /** @class */ (function () {\n    function ResourceLoader() {\n    }\n    ResourceLoader.prototype.get = function (url) { return ''; };\n    return ResourceLoader;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Extract i18n messages from source code\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all APIs of the compiler package.\n *\n * <div class=\"callout is-critical\">\n *   <header>Unstable APIs</header>\n *   <p>\n *     All compiler apis are currently considered experimental and private!\n *   </p>\n *   <p>\n *     We expect the APIs in this package to keep on changing. Do not rely on them.\n *   </p>\n * </div>\n */\n\n// This file only reexports content of the `src` folder. Keep it that way.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all public APIs of this package.\n */\n\n// This file only reexports content of the `src` folder. Keep it that way.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// This file is not used to build this module. It is only used during editing\n// by the TypeScript language service and during build for verification. `ngc`\n// replaces this file with production index.ts when it rewrites private symbol\n// names.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// This file is not used to build this module. It is only used during editing\n// by the TypeScript language service and during build for verification. `ngc`\n// replaces this file with production index.ts when it rewrites private symbol\n// names.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An enumeration of basic types.\n *\n * @experimental\n */\nvar BuiltinType$1;\n(function (BuiltinType) {\n    /**\n     * The type is a type that can hold any other type.\n     */\n    BuiltinType[BuiltinType[\"Any\"] = 0] = \"Any\";\n    /**\n     * The type of a string literal.\n     */\n    BuiltinType[BuiltinType[\"String\"] = 1] = \"String\";\n    /**\n     * The type of a numeric literal.\n     */\n    BuiltinType[BuiltinType[\"Number\"] = 2] = \"Number\";\n    /**\n     * The type of the `true` and `false` literals.\n     */\n    BuiltinType[BuiltinType[\"Boolean\"] = 3] = \"Boolean\";\n    /**\n     * The type of the `undefined` literal.\n     */\n    BuiltinType[BuiltinType[\"Undefined\"] = 4] = \"Undefined\";\n    /**\n     * the type of the `null` literal.\n     */\n    BuiltinType[BuiltinType[\"Null\"] = 5] = \"Null\";\n    /**\n     * the type is an unbound type parameter.\n     */\n    BuiltinType[BuiltinType[\"Unbound\"] = 6] = \"Unbound\";\n    /**\n     * Not a built-in type.\n     */\n    BuiltinType[BuiltinType[\"Other\"] = 7] = \"Other\";\n})(BuiltinType$1 || (BuiltinType$1 = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar DiagnosticKind;\n(function (DiagnosticKind) {\n    DiagnosticKind[DiagnosticKind[\"Error\"] = 0] = \"Error\";\n    DiagnosticKind[DiagnosticKind[\"Warning\"] = 1] = \"Warning\";\n})(DiagnosticKind || (DiagnosticKind = {}));\nvar TypeDiagnostic = /** @class */ (function () {\n    function TypeDiagnostic(kind, message, ast) {\n        this.kind = kind;\n        this.message = message;\n        this.ast = ast;\n    }\n    return TypeDiagnostic;\n}());\n// AstType calculatetype of the ast given AST element.\nvar AstType = /** @class */ (function () {\n    function AstType(scope, query, context) {\n        this.scope = scope;\n        this.query = query;\n        this.context = context;\n    }\n    AstType.prototype.getType = function (ast) { return ast.visit(this); };\n    AstType.prototype.getDiagnostics = function (ast) {\n        this.diagnostics = [];\n        var type = ast.visit(this);\n        if (this.context.event && type.callable) {\n            this.reportWarning('Unexpected callable expression. Expected a method call', ast);\n        }\n        return this.diagnostics;\n    };\n    AstType.prototype.visitBinary = function (ast) {\n        var _this = this;\n        // Treat undefined and null as other.\n        function normalize$$1(kind, other) {\n            switch (kind) {\n                case BuiltinType$1.Undefined:\n                case BuiltinType$1.Null:\n                    return normalize$$1(other, BuiltinType$1.Other);\n            }\n            return kind;\n        }\n        var getType = function (ast, operation) {\n            var type = _this.getType(ast);\n            if (type.nullable) {\n                switch (operation) {\n                    case '&&':\n                    case '||':\n                    case '==':\n                    case '!=':\n                    case '===':\n                    case '!==':\n                        // Nullable allowed.\n                        break;\n                    default:\n                        _this.reportError(\"The expression might be null\", ast);\n                        break;\n                }\n                return _this.query.getNonNullableType(type);\n            }\n            return type;\n        };\n        var leftType = getType(ast.left, ast.operation);\n        var rightType = getType(ast.right, ast.operation);\n        var leftRawKind = this.query.getTypeKind(leftType);\n        var rightRawKind = this.query.getTypeKind(rightType);\n        var leftKind = normalize$$1(leftRawKind, rightRawKind);\n        var rightKind = normalize$$1(rightRawKind, leftRawKind);\n        // The following swtich implements operator typing similar to the\n        // type production tables in the TypeScript specification.\n        // https://github.com/Microsoft/TypeScript/blob/v1.8.10/doc/spec.md#4.19\n        var operKind = leftKind << 8 | rightKind;\n        switch (ast.operation) {\n            case '*':\n            case '/':\n            case '%':\n            case '-':\n            case '<<':\n            case '>>':\n            case '>>>':\n            case '&':\n            case '^':\n            case '|':\n                switch (operKind) {\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Number:\n                        return this.query.getBuiltinType(BuiltinType$1.Number);\n                    default:\n                        var errorAst = ast.left;\n                        switch (leftKind) {\n                            case BuiltinType$1.Any:\n                            case BuiltinType$1.Number:\n                                errorAst = ast.right;\n                                break;\n                        }\n                        return this.reportError('Expected a numeric type', errorAst);\n                }\n            case '+':\n                switch (operKind) {\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Boolean:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Other:\n                    case BuiltinType$1.Boolean << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Other << 8 | BuiltinType$1.Any:\n                        return this.anyType;\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.Boolean << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.Boolean:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.Other:\n                    case BuiltinType$1.Other << 8 | BuiltinType$1.String:\n                        return this.query.getBuiltinType(BuiltinType$1.String);\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Number:\n                        return this.query.getBuiltinType(BuiltinType$1.Number);\n                    case BuiltinType$1.Boolean << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.Other << 8 | BuiltinType$1.Number:\n                        return this.reportError('Expected a number type', ast.left);\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Boolean:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Other:\n                        return this.reportError('Expected a number type', ast.right);\n                    default:\n                        return this.reportError('Expected operands to be a string or number type', ast);\n                }\n            case '>':\n            case '<':\n            case '<=':\n            case '>=':\n            case '==':\n            case '!=':\n            case '===':\n            case '!==':\n                switch (operKind) {\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Boolean:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Other:\n                    case BuiltinType$1.Boolean << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Boolean << 8 | BuiltinType$1.Boolean:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.Other << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Other << 8 | BuiltinType$1.Other:\n                        return this.query.getBuiltinType(BuiltinType$1.Boolean);\n                    default:\n                        return this.reportError('Expected the operants to be of similar type or any', ast);\n                }\n            case '&&':\n                return rightType;\n            case '||':\n                return this.query.getTypeUnion(leftType, rightType);\n        }\n        return this.reportError(\"Unrecognized operator \" + ast.operation, ast);\n    };\n    AstType.prototype.visitChain = function (ast) {\n        if (this.diagnostics) {\n            // If we are producing diagnostics, visit the children\n            visitAstChildren(ast, this);\n        }\n        // The type of a chain is always undefined.\n        return this.query.getBuiltinType(BuiltinType$1.Undefined);\n    };\n    AstType.prototype.visitConditional = function (ast) {\n        // The type of a conditional is the union of the true and false conditions.\n        if (this.diagnostics) {\n            visitAstChildren(ast, this);\n        }\n        return this.query.getTypeUnion(this.getType(ast.trueExp), this.getType(ast.falseExp));\n    };\n    AstType.prototype.visitFunctionCall = function (ast) {\n        var _this = this;\n        // The type of a function call is the return type of the selected signature.\n        // The signature is selected based on the types of the arguments. Angular doesn't\n        // support contextual typing of arguments so this is simpler than TypeScript's\n        // version.\n        var args = ast.args.map(function (arg) { return _this.getType(arg); });\n        var target = this.getType(ast.target);\n        if (!target || !target.callable)\n            return this.reportError('Call target is not callable', ast);\n        var signature = target.selectSignature(args);\n        if (signature)\n            return signature.result;\n        // TODO: Consider a better error message here.\n        return this.reportError('Unable no compatible signature found for call', ast);\n    };\n    AstType.prototype.visitImplicitReceiver = function (ast) {\n        var _this = this;\n        // Return a pseudo-symbol for the implicit receiver.\n        // The members of the implicit receiver are what is defined by the\n        // scope passed into this class.\n        return {\n            name: '$implict',\n            kind: 'component',\n            language: 'ng-template',\n            type: undefined,\n            container: undefined,\n            callable: false,\n            nullable: false,\n            public: true,\n            definition: undefined,\n            members: function () { return _this.scope; },\n            signatures: function () { return []; },\n            selectSignature: function (types) { return undefined; },\n            indexed: function (argument) { return undefined; }\n        };\n    };\n    AstType.prototype.visitInterpolation = function (ast) {\n        // If we are producing diagnostics, visit the children.\n        if (this.diagnostics) {\n            visitAstChildren(ast, this);\n        }\n        return this.undefinedType;\n    };\n    AstType.prototype.visitKeyedRead = function (ast) {\n        var targetType = this.getType(ast.obj);\n        var keyType = this.getType(ast.key);\n        var result = targetType.indexed(keyType);\n        return result || this.anyType;\n    };\n    AstType.prototype.visitKeyedWrite = function (ast) {\n        // The write of a type is the type of the value being written.\n        return this.getType(ast.value);\n    };\n    AstType.prototype.visitLiteralArray = function (ast) {\n        var _this = this;\n        // A type literal is an array type of the union of the elements\n        return this.query.getArrayType((_a = this.query).getTypeUnion.apply(_a, __spread(ast.expressions.map(function (element) { return _this.getType(element); }))));\n        var _a;\n    };\n    AstType.prototype.visitLiteralMap = function (ast) {\n        // If we are producing diagnostics, visit the children\n        if (this.diagnostics) {\n            visitAstChildren(ast, this);\n        }\n        // TODO: Return a composite type.\n        return this.anyType;\n    };\n    AstType.prototype.visitLiteralPrimitive = function (ast) {\n        // The type of a literal primitive depends on the value of the literal.\n        switch (ast.value) {\n            case true:\n            case false:\n                return this.query.getBuiltinType(BuiltinType$1.Boolean);\n            case null:\n                return this.query.getBuiltinType(BuiltinType$1.Null);\n            case undefined:\n                return this.query.getBuiltinType(BuiltinType$1.Undefined);\n            default:\n                switch (typeof ast.value) {\n                    case 'string':\n                        return this.query.getBuiltinType(BuiltinType$1.String);\n                    case 'number':\n                        return this.query.getBuiltinType(BuiltinType$1.Number);\n                    default:\n                        return this.reportError('Unrecognized primitive', ast);\n                }\n        }\n    };\n    AstType.prototype.visitMethodCall = function (ast) {\n        return this.resolveMethodCall(this.getType(ast.receiver), ast);\n    };\n    AstType.prototype.visitPipe = function (ast) {\n        var _this = this;\n        // The type of a pipe node is the return type of the pipe's transform method. The table returned\n        // by getPipes() is expected to contain symbols with the corresponding transform method type.\n        var pipe = this.query.getPipes().get(ast.name);\n        if (!pipe)\n            return this.reportError(\"No pipe by the name \" + ast.name + \" found\", ast);\n        var expType = this.getType(ast.exp);\n        var signature = pipe.selectSignature([expType].concat(ast.args.map(function (arg) { return _this.getType(arg); })));\n        if (!signature)\n            return this.reportError('Unable to resolve signature for pipe invocation', ast);\n        return signature.result;\n    };\n    AstType.prototype.visitPrefixNot = function (ast) {\n        // The type of a prefix ! is always boolean.\n        return this.query.getBuiltinType(BuiltinType$1.Boolean);\n    };\n    AstType.prototype.visitNonNullAssert = function (ast) {\n        var expressionType = this.getType(ast.expression);\n        return this.query.getNonNullableType(expressionType);\n    };\n    AstType.prototype.visitPropertyRead = function (ast) {\n        return this.resolvePropertyRead(this.getType(ast.receiver), ast);\n    };\n    AstType.prototype.visitPropertyWrite = function (ast) {\n        // The type of a write is the type of the value being written.\n        return this.getType(ast.value);\n    };\n    AstType.prototype.visitQuote = function (ast) {\n        // The type of a quoted expression is any.\n        return this.query.getBuiltinType(BuiltinType$1.Any);\n    };\n    AstType.prototype.visitSafeMethodCall = function (ast) {\n        return this.resolveMethodCall(this.query.getNonNullableType(this.getType(ast.receiver)), ast);\n    };\n    AstType.prototype.visitSafePropertyRead = function (ast) {\n        return this.resolvePropertyRead(this.query.getNonNullableType(this.getType(ast.receiver)), ast);\n    };\n    Object.defineProperty(AstType.prototype, \"anyType\", {\n        get: function () {\n            var result = this._anyType;\n            if (!result) {\n                result = this._anyType = this.query.getBuiltinType(BuiltinType$1.Any);\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AstType.prototype, \"undefinedType\", {\n        get: function () {\n            var result = this._undefinedType;\n            if (!result) {\n                result = this._undefinedType = this.query.getBuiltinType(BuiltinType$1.Undefined);\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AstType.prototype.resolveMethodCall = function (receiverType, ast) {\n        var _this = this;\n        if (this.isAny(receiverType)) {\n            return this.anyType;\n        }\n        // The type of a method is the selected methods result type.\n        var method = receiverType.members().get(ast.name);\n        if (!method)\n            return this.reportError(\"Unknown method '\" + ast.name + \"'\", ast);\n        if (!method.type)\n            return this.reportError(\"Could not find a type for '\" + ast.name + \"'\", ast);\n        if (!method.type.callable)\n            return this.reportError(\"Member '\" + ast.name + \"' is not callable\", ast);\n        var signature = method.type.selectSignature(ast.args.map(function (arg) { return _this.getType(arg); }));\n        if (!signature)\n            return this.reportError(\"Unable to resolve signature for call of method \" + ast.name, ast);\n        return signature.result;\n    };\n    AstType.prototype.resolvePropertyRead = function (receiverType, ast) {\n        if (this.isAny(receiverType)) {\n            return this.anyType;\n        }\n        // The type of a property read is the seelcted member's type.\n        var member = receiverType.members().get(ast.name);\n        if (!member) {\n            var receiverInfo = receiverType.name;\n            if (receiverInfo == '$implict') {\n                receiverInfo =\n                    'The component declaration, template variable declarations, and element references do';\n            }\n            else if (receiverType.nullable) {\n                return this.reportError(\"The expression might be null\", ast.receiver);\n            }\n            else {\n                receiverInfo = \"'\" + receiverInfo + \"' does\";\n            }\n            return this.reportError(\"Identifier '\" + ast.name + \"' is not defined. \" + receiverInfo + \" not contain such a member\", ast);\n        }\n        if (!member.public) {\n            var receiverInfo = receiverType.name;\n            if (receiverInfo == '$implict') {\n                receiverInfo = 'the component';\n            }\n            else {\n                receiverInfo = \"'\" + receiverInfo + \"'\";\n            }\n            this.reportWarning(\"Identifier '\" + ast.name + \"' refers to a private member of \" + receiverInfo, ast);\n        }\n        return member.type;\n    };\n    AstType.prototype.reportError = function (message, ast) {\n        if (this.diagnostics) {\n            this.diagnostics.push(new TypeDiagnostic(DiagnosticKind.Error, message, ast));\n        }\n        return this.anyType;\n    };\n    AstType.prototype.reportWarning = function (message, ast) {\n        if (this.diagnostics) {\n            this.diagnostics.push(new TypeDiagnostic(DiagnosticKind.Warning, message, ast));\n        }\n        return this.anyType;\n    };\n    AstType.prototype.isAny = function (symbol) {\n        return !symbol || this.query.getTypeKind(symbol) == BuiltinType$1.Any ||\n            (!!symbol.type && this.isAny(symbol.type));\n    };\n    return AstType;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction getTemplateExpressionDiagnostics(info) {\n    var visitor = new ExpressionDiagnosticsVisitor(info, function (path$$1, includeEvent) {\n        return getExpressionScope(info, path$$1, includeEvent);\n    });\n    templateVisitAll(visitor, info.templateAst);\n    return visitor.diagnostics;\n}\nfunction getExpressionDiagnostics(scope, ast, query, context) {\n    if (context === void 0) { context = {}; }\n    var analyzer = new AstType(scope, query, context);\n    analyzer.getDiagnostics(ast);\n    return analyzer.diagnostics;\n}\nfunction getReferences(info) {\n    var result = [];\n    function processReferences(references) {\n        var _loop_1 = function (reference) {\n            var type = undefined;\n            if (reference.value) {\n                type = info.query.getTypeSymbol(tokenReference(reference.value));\n            }\n            result.push({\n                name: reference.name,\n                kind: 'reference',\n                type: type || info.query.getBuiltinType(BuiltinType$1.Any),\n                get definition() { return getDefinitionOf(info, reference); }\n            });\n        };\n        try {\n            for (var references_1 = __values(references), references_1_1 = references_1.next(); !references_1_1.done; references_1_1 = references_1.next()) {\n                var reference = references_1_1.value;\n                _loop_1(reference);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (references_1_1 && !references_1_1.done && (_a = references_1.return)) _a.call(references_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var e_1, _a;\n    }\n    var visitor = new /** @class */ (function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.visitEmbeddedTemplate = function (ast, context) {\n            _super.prototype.visitEmbeddedTemplate.call(this, ast, context);\n            processReferences(ast.references);\n        };\n        class_1.prototype.visitElement = function (ast, context) {\n            _super.prototype.visitElement.call(this, ast, context);\n            processReferences(ast.references);\n        };\n        return class_1;\n    }(RecursiveTemplateAstVisitor));\n    templateVisitAll(visitor, info.templateAst);\n    return result;\n}\nfunction getDefinitionOf(info, ast) {\n    if (info.fileName) {\n        var templateOffset = info.offset;\n        return [{\n                fileName: info.fileName,\n                span: {\n                    start: ast.sourceSpan.start.offset + templateOffset,\n                    end: ast.sourceSpan.end.offset + templateOffset\n                }\n            }];\n    }\n}\nfunction getVarDeclarations(info, path$$1) {\n    var result = [];\n    var current = path$$1.tail;\n    while (current) {\n        if (current instanceof EmbeddedTemplateAst) {\n            var _loop_2 = function (variable) {\n                var name = variable.name;\n                // Find the first directive with a context.\n                var context = current.directives.map(function (d) { return info.query.getTemplateContext(d.directive.type.reference); })\n                    .find(function (c) { return !!c; });\n                // Determine the type of the context field referenced by variable.value.\n                var type = undefined;\n                if (context) {\n                    var value = context.get(variable.value);\n                    if (value) {\n                        type = value.type;\n                        var kind = info.query.getTypeKind(type);\n                        if (kind === BuiltinType$1.Any || kind == BuiltinType$1.Unbound) {\n                            // The any type is not very useful here. For special cases, such as ngFor, we can do\n                            // better.\n                            type = refinedVariableType(type, info, current);\n                        }\n                    }\n                }\n                if (!type) {\n                    type = info.query.getBuiltinType(BuiltinType$1.Any);\n                }\n                result.push({\n                    name: name,\n                    kind: 'variable', type: type, get definition() { return getDefinitionOf(info, variable); }\n                });\n            };\n            try {\n                for (var _a = __values(current.variables), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var variable = _b.value;\n                    _loop_2(variable);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n        current = path$$1.parentOf(current);\n    }\n    return result;\n    var e_2, _c;\n}\nfunction refinedVariableType(type, info, templateElement) {\n    // Special case the ngFor directive\n    var ngForDirective = templateElement.directives.find(function (d) {\n        var name = identifierName(d.directive.type);\n        return name == 'NgFor' || name == 'NgForOf';\n    });\n    if (ngForDirective) {\n        var ngForOfBinding = ngForDirective.inputs.find(function (i) { return i.directiveName == 'ngForOf'; });\n        if (ngForOfBinding) {\n            var bindingType = new AstType(info.members, info.query, {}).getType(ngForOfBinding.value);\n            if (bindingType) {\n                var result = info.query.getElementType(bindingType);\n                if (result) {\n                    return result;\n                }\n            }\n        }\n    }\n    // We can't do better, return any\n    return info.query.getBuiltinType(BuiltinType$1.Any);\n}\nfunction getEventDeclaration(info, includeEvent) {\n    var result = [];\n    if (includeEvent) {\n        // TODO: Determine the type of the event parameter based on the Observable<T> or EventEmitter<T>\n        // of the event.\n        result = [{ name: '$event', kind: 'variable', type: info.query.getBuiltinType(BuiltinType$1.Any) }];\n    }\n    return result;\n}\nfunction getExpressionScope(info, path$$1, includeEvent) {\n    var result = info.members;\n    var references = getReferences(info);\n    var variables = getVarDeclarations(info, path$$1);\n    var events = getEventDeclaration(info, includeEvent);\n    if (references.length || variables.length || events.length) {\n        var referenceTable = info.query.createSymbolTable(references);\n        var variableTable = info.query.createSymbolTable(variables);\n        var eventsTable = info.query.createSymbolTable(events);\n        result = info.query.mergeSymbolTable([result, referenceTable, variableTable, eventsTable]);\n    }\n    return result;\n}\nvar ExpressionDiagnosticsVisitor = /** @class */ (function (_super) {\n    __extends(ExpressionDiagnosticsVisitor, _super);\n    function ExpressionDiagnosticsVisitor(info, getExpressionScope) {\n        var _this = _super.call(this) || this;\n        _this.info = info;\n        _this.getExpressionScope = getExpressionScope;\n        _this.diagnostics = [];\n        _this.path = new AstPath([]);\n        return _this;\n    }\n    ExpressionDiagnosticsVisitor.prototype.visitDirective = function (ast, context) {\n        // Override the default child visitor to ignore the host properties of a directive.\n        if (ast.inputs && ast.inputs.length) {\n            templateVisitAll(this, ast.inputs, context);\n        }\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitBoundText = function (ast) {\n        this.push(ast);\n        this.diagnoseExpression(ast.value, ast.sourceSpan.start.offset, false);\n        this.pop();\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitDirectiveProperty = function (ast) {\n        this.push(ast);\n        this.diagnoseExpression(ast.value, this.attributeValueLocation(ast), false);\n        this.pop();\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitElementProperty = function (ast) {\n        this.push(ast);\n        this.diagnoseExpression(ast.value, this.attributeValueLocation(ast), false);\n        this.pop();\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitEvent = function (ast) {\n        this.push(ast);\n        this.diagnoseExpression(ast.handler, this.attributeValueLocation(ast), true);\n        this.pop();\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitVariable = function (ast) {\n        var directive = this.directiveSummary;\n        if (directive && ast.value) {\n            var context = this.info.query.getTemplateContext(directive.type.reference);\n            if (context && !context.has(ast.value)) {\n                if (ast.value === '$implicit') {\n                    this.reportError('The template context does not have an implicit value', spanOf$1(ast.sourceSpan));\n                }\n                else {\n                    this.reportError(\"The template context does not defined a member called '\" + ast.value + \"'\", spanOf$1(ast.sourceSpan));\n                }\n            }\n        }\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitElement = function (ast, context) {\n        this.push(ast);\n        _super.prototype.visitElement.call(this, ast, context);\n        this.pop();\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitEmbeddedTemplate = function (ast, context) {\n        var previousDirectiveSummary = this.directiveSummary;\n        this.push(ast);\n        // Find directive that references this template\n        this.directiveSummary =\n            ast.directives.map(function (d) { return d.directive; }).find(function (d) { return hasTemplateReference(d.type); });\n        // Process children\n        _super.prototype.visitEmbeddedTemplate.call(this, ast, context);\n        this.pop();\n        this.directiveSummary = previousDirectiveSummary;\n    };\n    ExpressionDiagnosticsVisitor.prototype.attributeValueLocation = function (ast) {\n        var path$$1 = findNode(this.info.htmlAst, ast.sourceSpan.start.offset);\n        var last = path$$1.tail;\n        if (last instanceof Attribute && last.valueSpan) {\n            // Add 1 for the quote.\n            return last.valueSpan.start.offset + 1;\n        }\n        return ast.sourceSpan.start.offset;\n    };\n    ExpressionDiagnosticsVisitor.prototype.diagnoseExpression = function (ast, offset, includeEvent) {\n        var _this = this;\n        var scope = this.getExpressionScope(this.path, includeEvent);\n        (_a = this.diagnostics).push.apply(_a, __spread(getExpressionDiagnostics(scope, ast, this.info.query, {\n            event: includeEvent\n        }).map(function (d) { return ({\n            span: offsetSpan(d.ast.span, offset + _this.info.offset),\n            kind: d.kind,\n            message: d.message\n        }); })));\n        var _a;\n    };\n    ExpressionDiagnosticsVisitor.prototype.push = function (ast) { this.path.push(ast); };\n    ExpressionDiagnosticsVisitor.prototype.pop = function () { this.path.pop(); };\n    ExpressionDiagnosticsVisitor.prototype.reportError = function (message, span) {\n        if (span) {\n            this.diagnostics.push({ span: offsetSpan(span, this.info.offset), kind: DiagnosticKind.Error, message: message });\n        }\n    };\n    ExpressionDiagnosticsVisitor.prototype.reportWarning = function (message, span) {\n        this.diagnostics.push({ span: offsetSpan(span, this.info.offset), kind: DiagnosticKind.Warning, message: message });\n    };\n    return ExpressionDiagnosticsVisitor;\n}(RecursiveTemplateAstVisitor));\nfunction hasTemplateReference(type) {\n    if (type.diDeps) {\n        try {\n            for (var _a = __values(type.diDeps), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var diDep = _b.value;\n                if (diDep.token && diDep.token.identifier &&\n                    identifierName(diDep.token.identifier) == 'TemplateRef')\n                    return true;\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    }\n    return false;\n    var e_3, _c;\n}\nfunction offsetSpan(span, amount) {\n    return { start: span.start + amount, end: span.end + amount };\n}\nfunction spanOf$1(sourceSpan) {\n    return { start: sourceSpan.start.offset, end: sourceSpan.end.offset };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Converts a `string` version into an array of numbers\n * @example\n * toNumbers('2.0.1'); // returns [2, 0, 1]\n */\nfunction toNumbers(value) {\n    return value.split('.').map(Number);\n}\n/**\n * Compares two arrays of positive numbers with lexicographical order in mind.\n *\n * However - unlike lexicographical order - for arrays of different length we consider:\n * [1, 2, 3] = [1, 2, 3, 0] instead of [1, 2, 3] < [1, 2, 3, 0]\n *\n * @param a The 'left hand' array in the comparison test\n * @param b The 'right hand' in the comparison test\n * @returns {-1|0|1} The comparison result: 1 if a is greater, -1 if b is greater, 0 is the two\n * arrays are equals\n */\nfunction compareNumbers(a, b) {\n    var max = Math.max(a.length, b.length);\n    var min = Math.min(a.length, b.length);\n    for (var i = 0; i < min; i++) {\n        if (a[i] > b[i])\n            return 1;\n        if (a[i] < b[i])\n            return -1;\n    }\n    if (min !== max) {\n        var longestArray = a.length === max ? a : b;\n        // The result to return in case the to arrays are considered different (1 if a is greater,\n        // -1 if b is greater)\n        var comparisonResult = a.length === max ? 1 : -1;\n        // Check that at least one of the remaining elements is greater than 0 to consider that the two\n        // arrays are different (e.g. [1, 0] and [1] are considered the same but not [1, 0, 1] and [1])\n        for (var i = min; i < max; i++) {\n            if (longestArray[i] > 0) {\n                return comparisonResult;\n            }\n        }\n    }\n    return 0;\n}\n/**\n * Checks if a TypeScript version is:\n * - greater or equal than the provided `low` version,\n * - lower or equal than an optional `high` version.\n *\n * @param version The TypeScript version\n * @param low The minimum version\n * @param high The maximum version\n */\nfunction isVersionBetween(version$$1, low, high) {\n    var tsNumbers = toNumbers(version$$1);\n    if (high !== undefined) {\n        return compareNumbers(toNumbers(low), tsNumbers) <= 0 &&\n            compareNumbers(toNumbers(high), tsNumbers) >= 0;\n    }\n    return compareNumbers(toNumbers(low), tsNumbers) <= 0;\n}\n/**\n * Compares two versions\n *\n * @param v1 The 'left hand' version in the comparison test\n * @param v2 The 'right hand' version in the comparison test\n * @returns {-1|0|1} The comparison result: 1 if v1 is greater, -1 if v2 is greater, 0 is the two\n * versions are equals\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// In TypeScript 2.1 these flags moved\n// These helpers work for both 2.0 and 2.1.\nvar isPrivate = ts.ModifierFlags ?\n    (function (node) {\n        return !!(ts.getCombinedModifierFlags(node) & ts.ModifierFlags.Private);\n    }) :\n    (function (node) { return !!(node.flags & ts.NodeFlags.Private); });\nvar isReferenceType = ts.ObjectFlags ?\n    (function (type) {\n        return !!(type.flags & ts.TypeFlags.Object &&\n            type.objectFlags & ts.ObjectFlags.Reference);\n    }) :\n    (function (type) { return !!(type.flags & ts.TypeFlags.Reference); });\nfunction getSymbolQuery(program, checker, source, fetchPipes) {\n    return new TypeScriptSymbolQuery(program, checker, source, fetchPipes);\n}\n\nfunction getClassMembersFromDeclaration(program, checker, source, declaration) {\n    var type = checker.getTypeAtLocation(declaration);\n    return new TypeWrapper(type, { node: source, program: program, checker: checker }).members();\n}\n\nfunction getPipesTable(source, program, checker, pipes) {\n    return new PipesTable(pipes, { program: program, checker: checker, node: source });\n}\nvar TypeScriptSymbolQuery = /** @class */ (function () {\n    function TypeScriptSymbolQuery(program, checker, source, fetchPipes) {\n        this.program = program;\n        this.checker = checker;\n        this.source = source;\n        this.fetchPipes = fetchPipes;\n        this.typeCache = new Map();\n    }\n    TypeScriptSymbolQuery.prototype.getTypeKind = function (symbol) { return typeKindOf(this.getTsTypeOf(symbol)); };\n    TypeScriptSymbolQuery.prototype.getBuiltinType = function (kind) {\n        var result = this.typeCache.get(kind);\n        if (!result) {\n            var type = getBuiltinTypeFromTs(kind, { checker: this.checker, node: this.source, program: this.program });\n            result =\n                new TypeWrapper(type, { program: this.program, checker: this.checker, node: this.source });\n            this.typeCache.set(kind, result);\n        }\n        return result;\n    };\n    TypeScriptSymbolQuery.prototype.getTypeUnion = function () {\n        var types = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            types[_i] = arguments[_i];\n        }\n        // No API exists so return any if the types are not all the same type.\n        var result = undefined;\n        if (types.length) {\n            result = types[0];\n            for (var i = 1; i < types.length; i++) {\n                if (types[i] != result) {\n                    result = undefined;\n                    break;\n                }\n            }\n        }\n        return result || this.getBuiltinType(BuiltinType$1.Any);\n    };\n    TypeScriptSymbolQuery.prototype.getArrayType = function (type) { return this.getBuiltinType(BuiltinType$1.Any); };\n    TypeScriptSymbolQuery.prototype.getElementType = function (type) {\n        if (type instanceof TypeWrapper) {\n            var elementType = getTypeParameterOf(type.tsType, 'Array');\n            if (elementType) {\n                return new TypeWrapper(elementType, type.context);\n            }\n        }\n    };\n    TypeScriptSymbolQuery.prototype.getNonNullableType = function (symbol) {\n        if (symbol instanceof TypeWrapper && (typeof this.checker.getNonNullableType == 'function')) {\n            var tsType = symbol.tsType;\n            var nonNullableType = this.checker.getNonNullableType(tsType);\n            if (nonNullableType != tsType) {\n                return new TypeWrapper(nonNullableType, symbol.context);\n            }\n            else if (nonNullableType == tsType) {\n                return symbol;\n            }\n        }\n        return this.getBuiltinType(BuiltinType$1.Any);\n    };\n    TypeScriptSymbolQuery.prototype.getPipes = function () {\n        var result = this.pipesCache;\n        if (!result) {\n            result = this.pipesCache = this.fetchPipes();\n        }\n        return result;\n    };\n    TypeScriptSymbolQuery.prototype.getTemplateContext = function (type) {\n        var context = { node: this.source, program: this.program, checker: this.checker };\n        var typeSymbol = findClassSymbolInContext(type, context);\n        if (typeSymbol) {\n            var contextType = this.getTemplateRefContextType(typeSymbol);\n            if (contextType)\n                return new SymbolWrapper(contextType, context).members();\n        }\n    };\n    TypeScriptSymbolQuery.prototype.getTypeSymbol = function (type) {\n        var context = { node: this.source, program: this.program, checker: this.checker };\n        var typeSymbol = findClassSymbolInContext(type, context);\n        return typeSymbol && new SymbolWrapper(typeSymbol, context);\n    };\n    TypeScriptSymbolQuery.prototype.createSymbolTable = function (symbols) {\n        var result = new MapSymbolTable();\n        result.addAll(symbols.map(function (s) { return new DeclaredSymbol(s); }));\n        return result;\n    };\n    TypeScriptSymbolQuery.prototype.mergeSymbolTable = function (symbolTables) {\n        var result = new MapSymbolTable();\n        try {\n            for (var symbolTables_1 = __values(symbolTables), symbolTables_1_1 = symbolTables_1.next(); !symbolTables_1_1.done; symbolTables_1_1 = symbolTables_1.next()) {\n                var symbolTable = symbolTables_1_1.value;\n                result.addAll(symbolTable.values());\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (symbolTables_1_1 && !symbolTables_1_1.done && (_a = symbolTables_1.return)) _a.call(symbolTables_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return result;\n        var e_1, _a;\n    };\n    TypeScriptSymbolQuery.prototype.getSpanAt = function (line, column) {\n        return spanAt(this.source, line, column);\n    };\n    TypeScriptSymbolQuery.prototype.getTemplateRefContextType = function (typeSymbol) {\n        var type = this.checker.getTypeOfSymbolAtLocation(typeSymbol, this.source);\n        var constructor = type.symbol && type.symbol.members &&\n            getFromSymbolTable(type.symbol.members, '__constructor');\n        if (constructor) {\n            var constructorDeclaration = constructor.declarations[0];\n            try {\n                for (var _a = __values(constructorDeclaration.parameters), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var parameter = _b.value;\n                    var type_1 = this.checker.getTypeAtLocation(parameter.type);\n                    if (type_1.symbol.name == 'TemplateRef' && isReferenceType(type_1)) {\n                        var typeReference = type_1;\n                        if (typeReference.typeArguments && typeReference.typeArguments.length === 1) {\n                            return typeReference.typeArguments[0].symbol;\n                        }\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n        var e_2, _c;\n    };\n    TypeScriptSymbolQuery.prototype.getTsTypeOf = function (symbol) {\n        var type = this.getTypeWrapper(symbol);\n        return type && type.tsType;\n    };\n    TypeScriptSymbolQuery.prototype.getTypeWrapper = function (symbol) {\n        var type = undefined;\n        if (symbol instanceof TypeWrapper) {\n            type = symbol;\n        }\n        else if (symbol.type instanceof TypeWrapper) {\n            type = symbol.type;\n        }\n        return type;\n    };\n    return TypeScriptSymbolQuery;\n}());\nfunction typeCallable(type) {\n    var signatures = type.getCallSignatures();\n    return signatures && signatures.length != 0;\n}\nfunction signaturesOf(type, context) {\n    return type.getCallSignatures().map(function (s) { return new SignatureWrapper(s, context); });\n}\nfunction selectSignature(type, context, types) {\n    // TODO: Do a better job of selecting the right signature.\n    var signatures = type.getCallSignatures();\n    return signatures.length ? new SignatureWrapper(signatures[0], context) : undefined;\n}\nvar TypeWrapper = /** @class */ (function () {\n    function TypeWrapper(tsType, context) {\n        this.tsType = tsType;\n        this.context = context;\n        this.kind = 'type';\n        this.language = 'typescript';\n        this.type = undefined;\n        this.container = undefined;\n        this.public = true;\n        if (!tsType) {\n            throw Error('Internal: null type');\n        }\n    }\n    Object.defineProperty(TypeWrapper.prototype, \"name\", {\n        get: function () {\n            var symbol = this.tsType.symbol;\n            return (symbol && symbol.name) || '<anonymous>';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TypeWrapper.prototype, \"callable\", {\n        get: function () { return typeCallable(this.tsType); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TypeWrapper.prototype, \"nullable\", {\n        get: function () {\n            return this.context.checker.getNonNullableType(this.tsType) != this.tsType;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TypeWrapper.prototype, \"definition\", {\n        get: function () {\n            var symbol = this.tsType.getSymbol();\n            return symbol ? definitionFromTsSymbol(symbol) : undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TypeWrapper.prototype.members = function () {\n        return new SymbolTableWrapper(this.tsType.getProperties(), this.context);\n    };\n    TypeWrapper.prototype.signatures = function () { return signaturesOf(this.tsType, this.context); };\n    TypeWrapper.prototype.selectSignature = function (types) {\n        return selectSignature(this.tsType, this.context, types);\n    };\n    TypeWrapper.prototype.indexed = function (argument) { return undefined; };\n    return TypeWrapper;\n}());\nvar SymbolWrapper = /** @class */ (function () {\n    function SymbolWrapper(symbol, context) {\n        this.context = context;\n        this.nullable = false;\n        this.language = 'typescript';\n        this.symbol = symbol && context && (symbol.flags & ts.SymbolFlags.Alias) ?\n            context.checker.getAliasedSymbol(symbol) :\n            symbol;\n    }\n    Object.defineProperty(SymbolWrapper.prototype, \"name\", {\n        get: function () { return this.symbol.name; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"kind\", {\n        get: function () { return this.callable ? 'method' : 'property'; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"type\", {\n        get: function () { return new TypeWrapper(this.tsType, this.context); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"container\", {\n        get: function () { return getContainerOf(this.symbol, this.context); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"public\", {\n        get: function () {\n            // Symbols that are not explicitly made private are public.\n            return !isSymbolPrivate(this.symbol);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"callable\", {\n        get: function () { return typeCallable(this.tsType); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"definition\", {\n        get: function () { return definitionFromTsSymbol(this.symbol); },\n        enumerable: true,\n        configurable: true\n    });\n    SymbolWrapper.prototype.members = function () {\n        if (!this._members) {\n            if ((this.symbol.flags & (ts.SymbolFlags.Class | ts.SymbolFlags.Interface)) != 0) {\n                var declaredType = this.context.checker.getDeclaredTypeOfSymbol(this.symbol);\n                var typeWrapper = new TypeWrapper(declaredType, this.context);\n                this._members = typeWrapper.members();\n            }\n            else {\n                this._members = new SymbolTableWrapper(this.symbol.members, this.context);\n            }\n        }\n        return this._members;\n    };\n    SymbolWrapper.prototype.signatures = function () { return signaturesOf(this.tsType, this.context); };\n    SymbolWrapper.prototype.selectSignature = function (types) {\n        return selectSignature(this.tsType, this.context, types);\n    };\n    SymbolWrapper.prototype.indexed = function (argument) { return undefined; };\n    Object.defineProperty(SymbolWrapper.prototype, \"tsType\", {\n        get: function () {\n            var type = this._tsType;\n            if (!type) {\n                type = this._tsType =\n                    this.context.checker.getTypeOfSymbolAtLocation(this.symbol, this.context.node);\n            }\n            return type;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return SymbolWrapper;\n}());\nvar DeclaredSymbol = /** @class */ (function () {\n    function DeclaredSymbol(declaration) {\n        this.declaration = declaration;\n        this.language = 'ng-template';\n        this.nullable = false;\n        this.public = true;\n    }\n    Object.defineProperty(DeclaredSymbol.prototype, \"name\", {\n        get: function () { return this.declaration.name; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DeclaredSymbol.prototype, \"kind\", {\n        get: function () { return this.declaration.kind; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DeclaredSymbol.prototype, \"container\", {\n        get: function () { return undefined; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DeclaredSymbol.prototype, \"type\", {\n        get: function () { return this.declaration.type; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DeclaredSymbol.prototype, \"callable\", {\n        get: function () { return this.declaration.type.callable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DeclaredSymbol.prototype, \"definition\", {\n        get: function () { return this.declaration.definition; },\n        enumerable: true,\n        configurable: true\n    });\n    DeclaredSymbol.prototype.members = function () { return this.declaration.type.members(); };\n    DeclaredSymbol.prototype.signatures = function () { return this.declaration.type.signatures(); };\n    DeclaredSymbol.prototype.selectSignature = function (types) {\n        return this.declaration.type.selectSignature(types);\n    };\n    DeclaredSymbol.prototype.indexed = function (argument) { return undefined; };\n    return DeclaredSymbol;\n}());\nvar SignatureWrapper = /** @class */ (function () {\n    function SignatureWrapper(signature, context) {\n        this.signature = signature;\n        this.context = context;\n    }\n    Object.defineProperty(SignatureWrapper.prototype, \"arguments\", {\n        get: function () {\n            return new SymbolTableWrapper(this.signature.getParameters(), this.context);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SignatureWrapper.prototype, \"result\", {\n        get: function () { return new TypeWrapper(this.signature.getReturnType(), this.context); },\n        enumerable: true,\n        configurable: true\n    });\n    return SignatureWrapper;\n}());\nvar SignatureResultOverride = /** @class */ (function () {\n    function SignatureResultOverride(signature, resultType) {\n        this.signature = signature;\n        this.resultType = resultType;\n    }\n    Object.defineProperty(SignatureResultOverride.prototype, \"arguments\", {\n        get: function () { return this.signature.arguments; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SignatureResultOverride.prototype, \"result\", {\n        get: function () { return this.resultType; },\n        enumerable: true,\n        configurable: true\n    });\n    return SignatureResultOverride;\n}());\n/**\n * Indicates the lower bound TypeScript version supporting `SymbolTable` as an ES6 `Map`.\n * For lower versions, `SymbolTable` is implemented as a dictionary\n */\nvar MIN_TS_VERSION_SUPPORTING_MAP = '2.2';\nvar toSymbolTableFactory = function (tsVersion) { return function (symbols) {\n    if (isVersionBetween(tsVersion, MIN_TS_VERSION_SUPPORTING_MAP)) {\n        //  Typescript version >= 2.2, `SymbolTable` is implemented as an ES6 `Map`\n        var result_1 = new Map();\n        try {\n            for (var symbols_1 = __values(symbols), symbols_1_1 = symbols_1.next(); !symbols_1_1.done; symbols_1_1 = symbols_1.next()) {\n                var symbol = symbols_1_1.value;\n                result_1.set(symbol.name, symbol);\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (symbols_1_1 && !symbols_1_1.done && (_a = symbols_1.return)) _a.call(symbols_1);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        // First, tell the compiler that `result` is of type `any`. Then, use a second type assertion\n        // to `ts.SymbolTable`.\n        // Otherwise, `Map<string, ts.Symbol>` and `ts.SymbolTable` will be considered as incompatible\n        // types by the compiler\n        return result_1;\n    }\n    //  Typescript version < 2.2, `SymbolTable` is implemented as a dictionary\n    var result = {};\n    try {\n        for (var symbols_2 = __values(symbols), symbols_2_1 = symbols_2.next(); !symbols_2_1.done; symbols_2_1 = symbols_2.next()) {\n            var symbol = symbols_2_1.value;\n            result[symbol.name] = symbol;\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (symbols_2_1 && !symbols_2_1.done && (_b = symbols_2.return)) _b.call(symbols_2);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n    return result;\n    var e_3, _a, e_4, _b;\n}; };\nfunction toSymbols(symbolTable) {\n    if (!symbolTable)\n        return [];\n    var table = symbolTable;\n    if (typeof table.values === 'function') {\n        return Array.from(table.values());\n    }\n    var result = [];\n    var own = typeof table.hasOwnProperty === 'function' ?\n        function (name) { return table.hasOwnProperty(name); } :\n        function (name) { return !!table[name]; };\n    for (var name in table) {\n        if (own(name)) {\n            result.push(table[name]);\n        }\n    }\n    return result;\n}\nvar SymbolTableWrapper = /** @class */ (function () {\n    function SymbolTableWrapper(symbols, context) {\n        this.context = context;\n        symbols = symbols || [];\n        if (Array.isArray(symbols)) {\n            this.symbols = symbols;\n            var toSymbolTable = toSymbolTableFactory(ts.version);\n            this.symbolTable = toSymbolTable(symbols);\n        }\n        else {\n            this.symbols = toSymbols(symbols);\n            this.symbolTable = symbols;\n        }\n    }\n    Object.defineProperty(SymbolTableWrapper.prototype, \"size\", {\n        get: function () { return this.symbols.length; },\n        enumerable: true,\n        configurable: true\n    });\n    SymbolTableWrapper.prototype.get = function (key) {\n        var symbol = getFromSymbolTable(this.symbolTable, key);\n        return symbol ? new SymbolWrapper(symbol, this.context) : undefined;\n    };\n    SymbolTableWrapper.prototype.has = function (key) {\n        var table = this.symbolTable;\n        return (typeof table.has === 'function') ? table.has(key) : table[key] != null;\n    };\n    SymbolTableWrapper.prototype.values = function () {\n        var _this = this;\n        return this.symbols.map(function (s) { return new SymbolWrapper(s, _this.context); });\n    };\n    return SymbolTableWrapper;\n}());\nvar MapSymbolTable = /** @class */ (function () {\n    function MapSymbolTable() {\n        this.map = new Map();\n        this._values = [];\n    }\n    Object.defineProperty(MapSymbolTable.prototype, \"size\", {\n        get: function () { return this.map.size; },\n        enumerable: true,\n        configurable: true\n    });\n    MapSymbolTable.prototype.get = function (key) { return this.map.get(key); };\n    MapSymbolTable.prototype.add = function (symbol) {\n        if (this.map.has(symbol.name)) {\n            var previous = this.map.get(symbol.name);\n            this._values[this._values.indexOf(previous)] = symbol;\n        }\n        this.map.set(symbol.name, symbol);\n        this._values.push(symbol);\n    };\n    MapSymbolTable.prototype.addAll = function (symbols) {\n        try {\n            for (var symbols_3 = __values(symbols), symbols_3_1 = symbols_3.next(); !symbols_3_1.done; symbols_3_1 = symbols_3.next()) {\n                var symbol = symbols_3_1.value;\n                this.add(symbol);\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (symbols_3_1 && !symbols_3_1.done && (_a = symbols_3.return)) _a.call(symbols_3);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n        var e_5, _a;\n    };\n    MapSymbolTable.prototype.has = function (key) { return this.map.has(key); };\n    MapSymbolTable.prototype.values = function () {\n        // Switch to this.map.values once iterables are supported by the target language.\n        return this._values;\n    };\n    return MapSymbolTable;\n}());\nvar PipesTable = /** @class */ (function () {\n    function PipesTable(pipes, context) {\n        this.pipes = pipes;\n        this.context = context;\n    }\n    Object.defineProperty(PipesTable.prototype, \"size\", {\n        get: function () { return this.pipes.length; },\n        enumerable: true,\n        configurable: true\n    });\n    PipesTable.prototype.get = function (key) {\n        var pipe = this.pipes.find(function (pipe) { return pipe.name == key; });\n        if (pipe) {\n            return new PipeSymbol(pipe, this.context);\n        }\n    };\n    PipesTable.prototype.has = function (key) { return this.pipes.find(function (pipe) { return pipe.name == key; }) != null; };\n    PipesTable.prototype.values = function () {\n        var _this = this;\n        return this.pipes.map(function (pipe) { return new PipeSymbol(pipe, _this.context); });\n    };\n    return PipesTable;\n}());\n// This matches .d.ts files that look like \".../<package-name>/<package-name>.d.ts\",\nvar INDEX_PATTERN = /[\\\\/]([^\\\\/]+)[\\\\/]\\1\\.d\\.ts$/;\nvar PipeSymbol = /** @class */ (function () {\n    function PipeSymbol(pipe, context) {\n        this.pipe = pipe;\n        this.context = context;\n        this.kind = 'pipe';\n        this.language = 'typescript';\n        this.container = undefined;\n        this.callable = true;\n        this.nullable = false;\n        this.public = true;\n    }\n    Object.defineProperty(PipeSymbol.prototype, \"name\", {\n        get: function () { return this.pipe.name; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PipeSymbol.prototype, \"type\", {\n        get: function () { return new TypeWrapper(this.tsType, this.context); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PipeSymbol.prototype, \"definition\", {\n        get: function () {\n            var symbol = this.tsType.getSymbol();\n            return symbol ? definitionFromTsSymbol(symbol) : undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PipeSymbol.prototype.members = function () { return EmptyTable.instance; };\n    PipeSymbol.prototype.signatures = function () { return signaturesOf(this.tsType, this.context); };\n    PipeSymbol.prototype.selectSignature = function (types) {\n        var signature = selectSignature(this.tsType, this.context, types);\n        if (types.length == 1) {\n            var parameterType = types[0];\n            if (parameterType instanceof TypeWrapper) {\n                var resultType = undefined;\n                switch (this.name) {\n                    case 'async':\n                        switch (parameterType.name) {\n                            case 'Observable':\n                            case 'Promise':\n                            case 'EventEmitter':\n                                resultType = getTypeParameterOf(parameterType.tsType, parameterType.name);\n                                break;\n                            default:\n                                resultType = getBuiltinTypeFromTs(BuiltinType$1.Any, this.context);\n                                break;\n                        }\n                        break;\n                    case 'slice':\n                        resultType = getTypeParameterOf(parameterType.tsType, 'Array');\n                        break;\n                }\n                if (resultType) {\n                    signature = new SignatureResultOverride(signature, new TypeWrapper(resultType, parameterType.context));\n                }\n            }\n        }\n        return signature;\n    };\n    PipeSymbol.prototype.indexed = function (argument) { return undefined; };\n    Object.defineProperty(PipeSymbol.prototype, \"tsType\", {\n        get: function () {\n            var type = this._tsType;\n            if (!type) {\n                var classSymbol = this.findClassSymbol(this.pipe.type.reference);\n                if (classSymbol) {\n                    type = this._tsType = this.findTransformMethodType(classSymbol);\n                }\n                if (!type) {\n                    type = this._tsType = getBuiltinTypeFromTs(BuiltinType$1.Any, this.context);\n                }\n            }\n            return type;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PipeSymbol.prototype.findClassSymbol = function (type) {\n        return findClassSymbolInContext(type, this.context);\n    };\n    PipeSymbol.prototype.findTransformMethodType = function (classSymbol) {\n        var classType = this.context.checker.getDeclaredTypeOfSymbol(classSymbol);\n        if (classType) {\n            var transform = classType.getProperty('transform');\n            if (transform) {\n                return this.context.checker.getTypeOfSymbolAtLocation(transform, this.context.node);\n            }\n        }\n    };\n    return PipeSymbol;\n}());\nfunction findClassSymbolInContext(type, context) {\n    var sourceFile = context.program.getSourceFile(type.filePath);\n    if (!sourceFile) {\n        // This handles a case where an <packageName>/index.d.ts and a <packageName>/<packageName>.d.ts\n        // are in the same directory. If we are looking for <packageName>/<packageName> and didn't\n        // find it, look for <packageName>/index.d.ts as the program might have found that instead.\n        var p = type.filePath;\n        var m = p.match(INDEX_PATTERN);\n        if (m) {\n            var indexVersion = path.join(path.dirname(p), 'index.d.ts');\n            sourceFile = context.program.getSourceFile(indexVersion);\n        }\n    }\n    if (sourceFile) {\n        var moduleSymbol = sourceFile.module || sourceFile.symbol;\n        var exports_1 = context.checker.getExportsOfModule(moduleSymbol);\n        return (exports_1 || []).find(function (symbol) { return symbol.name == type.name; });\n    }\n}\nvar EmptyTable = /** @class */ (function () {\n    function EmptyTable() {\n        this.size = 0;\n    }\n    EmptyTable.prototype.get = function (key) { return undefined; };\n    EmptyTable.prototype.has = function (key) { return false; };\n    EmptyTable.prototype.values = function () { return []; };\n    EmptyTable.instance = new EmptyTable();\n    return EmptyTable;\n}());\nfunction isSymbolPrivate(s) {\n    return !!s.valueDeclaration && isPrivate(s.valueDeclaration);\n}\nfunction getBuiltinTypeFromTs(kind, context) {\n    var type;\n    var checker = context.checker;\n    var node = context.node;\n    switch (kind) {\n        case BuiltinType$1.Any:\n            type = checker.getTypeAtLocation(setParents({\n                kind: ts.SyntaxKind.AsExpression,\n                expression: { kind: ts.SyntaxKind.TrueKeyword },\n                type: { kind: ts.SyntaxKind.AnyKeyword }\n            }, node));\n            break;\n        case BuiltinType$1.Boolean:\n            type =\n                checker.getTypeAtLocation(setParents({ kind: ts.SyntaxKind.TrueKeyword }, node));\n            break;\n        case BuiltinType$1.Null:\n            type =\n                checker.getTypeAtLocation(setParents({ kind: ts.SyntaxKind.NullKeyword }, node));\n            break;\n        case BuiltinType$1.Number:\n            var numeric = { kind: ts.SyntaxKind.NumericLiteral };\n            setParents({ kind: ts.SyntaxKind.ExpressionStatement, expression: numeric }, node);\n            type = checker.getTypeAtLocation(numeric);\n            break;\n        case BuiltinType$1.String:\n            type = checker.getTypeAtLocation(setParents({ kind: ts.SyntaxKind.NoSubstitutionTemplateLiteral }, node));\n            break;\n        case BuiltinType$1.Undefined:\n            type = checker.getTypeAtLocation(setParents({\n                kind: ts.SyntaxKind.VoidExpression,\n                expression: { kind: ts.SyntaxKind.NumericLiteral }\n            }, node));\n            break;\n        default:\n            throw new Error(\"Internal error, unhandled literal kind \" + kind + \":\" + BuiltinType$1[kind]);\n    }\n    return type;\n}\nfunction setParents(node, parent) {\n    node.parent = parent;\n    ts.forEachChild(node, function (child) { return setParents(child, node); });\n    return node;\n}\nfunction spanAt(sourceFile, line, column) {\n    if (line != null && column != null) {\n        var position_1 = ts.getPositionOfLineAndCharacter(sourceFile, line, column);\n        var findChild = function findChild(node) {\n            if (node.kind > ts.SyntaxKind.LastToken && node.pos <= position_1 && node.end > position_1) {\n                var betterNode = ts.forEachChild(node, findChild);\n                return betterNode || node;\n            }\n        };\n        var node = ts.forEachChild(sourceFile, findChild);\n        if (node) {\n            return { start: node.getStart(), end: node.getEnd() };\n        }\n    }\n}\nfunction definitionFromTsSymbol(symbol) {\n    var declarations = symbol.declarations;\n    if (declarations) {\n        return declarations.map(function (declaration) {\n            var sourceFile = declaration.getSourceFile();\n            return {\n                fileName: sourceFile.fileName,\n                span: { start: declaration.getStart(), end: declaration.getEnd() }\n            };\n        });\n    }\n}\nfunction parentDeclarationOf(node) {\n    while (node) {\n        switch (node.kind) {\n            case ts.SyntaxKind.ClassDeclaration:\n            case ts.SyntaxKind.InterfaceDeclaration:\n                return node;\n            case ts.SyntaxKind.SourceFile:\n                return undefined;\n        }\n        node = node.parent;\n    }\n}\nfunction getContainerOf(symbol, context) {\n    if (symbol.getFlags() & ts.SymbolFlags.ClassMember && symbol.declarations) {\n        try {\n            for (var _a = __values(symbol.declarations), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var declaration = _b.value;\n                var parent = parentDeclarationOf(declaration);\n                if (parent) {\n                    var type = context.checker.getTypeAtLocation(parent);\n                    if (type) {\n                        return new TypeWrapper(type, context);\n                    }\n                }\n            }\n        }\n        catch (e_6_1) { e_6 = { error: e_6_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_6) throw e_6.error; }\n        }\n    }\n    var e_6, _c;\n}\nfunction getTypeParameterOf(type, name) {\n    if (type && type.symbol && type.symbol.name == name) {\n        var typeArguments = type.typeArguments;\n        if (typeArguments && typeArguments.length <= 1) {\n            return typeArguments[0];\n        }\n    }\n}\nfunction typeKindOf(type) {\n    if (type) {\n        if (type.flags & ts.TypeFlags.Any) {\n            return BuiltinType$1.Any;\n        }\n        else if (type.flags & (ts.TypeFlags.String | ts.TypeFlags.StringLike | ts.TypeFlags.StringLiteral)) {\n            return BuiltinType$1.String;\n        }\n        else if (type.flags & (ts.TypeFlags.Number | ts.TypeFlags.NumberLike)) {\n            return BuiltinType$1.Number;\n        }\n        else if (type.flags & (ts.TypeFlags.Undefined)) {\n            return BuiltinType$1.Undefined;\n        }\n        else if (type.flags & (ts.TypeFlags.Null)) {\n            return BuiltinType$1.Null;\n        }\n        else if (type.flags & ts.TypeFlags.Union) {\n            // If all the constituent types of a union are the same kind, it is also that kind.\n            var candidate = null;\n            var unionType = type;\n            if (unionType.types.length > 0) {\n                candidate = typeKindOf(unionType.types[0]);\n                try {\n                    for (var _a = __values(unionType.types), _b = _a.next(); !_b.done; _b = _a.next()) {\n                        var subType = _b.value;\n                        if (candidate != typeKindOf(subType)) {\n                            return BuiltinType$1.Other;\n                        }\n                    }\n                }\n                catch (e_7_1) { e_7 = { error: e_7_1 }; }\n                finally {\n                    try {\n                        if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                    }\n                    finally { if (e_7) throw e_7.error; }\n                }\n            }\n            if (candidate != null) {\n                return candidate;\n            }\n        }\n        else if (type.flags & ts.TypeFlags.TypeParameter) {\n            return BuiltinType$1.Unbound;\n        }\n    }\n    return BuiltinType$1.Other;\n    var e_7, _c;\n}\nfunction getFromSymbolTable(symbolTable, key) {\n    var table = symbolTable;\n    var symbol;\n    if (typeof table.get === 'function') {\n        // TS 2.2 uses a Map\n        symbol = table.get(key);\n    }\n    else {\n        // TS pre-2.2 uses an object\n        symbol = table[key];\n    }\n    return symbol;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Metadata Schema\n// If you make a backwards incompatible change to the schema, increment the METADTA_VERSION number.\n// If you make a backwards compatible change to the metadata (such as adding an option field) then\n// leave METADATA_VERSION the same. If possible, supply as many versions of the metadata that can\n// represent the semantics of the file in an array. For example, when generating a version 2 file,\n// if version 1 can accurately represent the metadata, generate both version 1 and version 2 in\n// an array.\nvar METADATA_VERSION = 4;\n\nfunction isClassMetadata(value) {\n    return value && value.__symbolic === 'class';\n}\n\n\nfunction isMethodMetadata(value) {\n    return value && (value.__symbolic === 'constructor' || value.__symbolic === 'method');\n}\nfunction isConstructorMetadata(value) {\n    return value && value.__symbolic === 'constructor';\n}\nfunction isFunctionMetadata(value) {\n    return value && value.__symbolic === 'function';\n}\nfunction isMetadataSymbolicExpression(value) {\n    if (value) {\n        switch (value.__symbolic) {\n            case 'binary':\n            case 'call':\n            case 'index':\n            case 'new':\n            case 'pre':\n            case 'reference':\n            case 'select':\n            case 'spread':\n            case 'if':\n                return true;\n        }\n    }\n    return false;\n}\n\n\n\n\n\nfunction isMetadataGlobalReferenceExpression(value) {\n    return value && value.name && !value.module && isMetadataSymbolicReferenceExpression(value);\n}\nfunction isMetadataModuleReferenceExpression(value) {\n    return value && value.module && !value.name && !value.default &&\n        isMetadataSymbolicReferenceExpression(value);\n}\nfunction isMetadataImportedSymbolReferenceExpression(value) {\n    return value && value.module && !!value.name && isMetadataSymbolicReferenceExpression(value);\n}\nfunction isMetadataImportDefaultReference(value) {\n    return value && value.module && value.default && isMetadataSymbolicReferenceExpression(value);\n}\nfunction isMetadataSymbolicReferenceExpression(value) {\n    return value && value.__symbolic === 'reference';\n}\nfunction isMetadataSymbolicSelectExpression(value) {\n    return value && value.__symbolic === 'select';\n}\nfunction isMetadataSymbolicSpreadExpression(value) {\n    return value && value.__symbolic === 'spread';\n}\nfunction isMetadataError$1(value) {\n    return value && value.__symbolic === 'error';\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// In TypeScript 2.1 the spread element kind was renamed.\nvar spreadElementSyntaxKind = ts.SyntaxKind.SpreadElement || ts.SyntaxKind.SpreadElementExpression;\nfunction isMethodCallOf(callExpression, memberName) {\n    var expression = callExpression.expression;\n    if (expression.kind === ts.SyntaxKind.PropertyAccessExpression) {\n        var propertyAccessExpression = expression;\n        var name = propertyAccessExpression.name;\n        if (name.kind == ts.SyntaxKind.Identifier) {\n            return name.text === memberName;\n        }\n    }\n    return false;\n}\nfunction isCallOf(callExpression, ident) {\n    var expression = callExpression.expression;\n    if (expression.kind === ts.SyntaxKind.Identifier) {\n        var identifier = expression;\n        return identifier.text === ident;\n    }\n    return false;\n}\n/* @internal */\nfunction recordMapEntry(entry, node, nodeMap, sourceFile) {\n    if (!nodeMap.has(entry)) {\n        nodeMap.set(entry, node);\n        if (node && (isMetadataImportedSymbolReferenceExpression(entry) ||\n            isMetadataImportDefaultReference(entry)) &&\n            entry.line == null) {\n            var info = sourceInfo(node, sourceFile);\n            if (info.line != null)\n                entry.line = info.line;\n            if (info.character != null)\n                entry.character = info.character;\n        }\n    }\n    return entry;\n}\n/**\n * ts.forEachChild stops iterating children when the callback return a truthy value.\n * This method inverts this to implement an `every` style iterator. It will return\n * true if every call to `cb` returns `true`.\n */\nfunction everyNodeChild(node, cb) {\n    return !ts.forEachChild(node, function (node) { return !cb(node); });\n}\nfunction isPrimitive$1(value) {\n    return Object(value) !== value;\n}\nfunction isDefined$1(obj) {\n    return obj !== undefined;\n}\nfunction getSourceFileOfNode(node) {\n    while (node && node.kind != ts.SyntaxKind.SourceFile) {\n        node = node.parent;\n    }\n    return node;\n}\n/* @internal */\nfunction sourceInfo(node, sourceFile) {\n    if (node) {\n        sourceFile = sourceFile || getSourceFileOfNode(node);\n        if (sourceFile) {\n            return ts.getLineAndCharacterOfPosition(sourceFile, node.getStart(sourceFile));\n        }\n    }\n    return {};\n}\n/* @internal */\nfunction errorSymbol(message, node, context, sourceFile) {\n    var result = __assign({ __symbolic: 'error', message: message }, sourceInfo(node, sourceFile));\n    if (context) {\n        result.context = context;\n    }\n    return result;\n}\n/**\n * Produce a symbolic representation of an expression folding values into their final value when\n * possible.\n */\nvar Evaluator = /** @class */ (function () {\n    function Evaluator(symbols, nodeMap, options, recordExport) {\n        if (options === void 0) { options = {}; }\n        this.symbols = symbols;\n        this.nodeMap = nodeMap;\n        this.options = options;\n        this.recordExport = recordExport;\n    }\n    Evaluator.prototype.nameOf = function (node) {\n        if (node && node.kind == ts.SyntaxKind.Identifier) {\n            return node.text;\n        }\n        var result = node && this.evaluateNode(node);\n        if (isMetadataError$1(result) || typeof result === 'string') {\n            return result;\n        }\n        else {\n            return errorSymbol('Name expected', node, { received: (node && node.getText()) || '<missing>' });\n        }\n    };\n    /**\n     * Returns true if the expression represented by `node` can be folded into a literal expression.\n     *\n     * For example, a literal is always foldable. This means that literal expressions such as `1.2`\n     * `\"Some value\"` `true` `false` are foldable.\n     *\n     * - An object literal is foldable if all the properties in the literal are foldable.\n     * - An array literal is foldable if all the elements are foldable.\n     * - A call is foldable if it is a call to a Array.prototype.concat or a call to CONST_EXPR.\n     * - A property access is foldable if the object is foldable.\n     * - A array index is foldable if index expression is foldable and the array is foldable.\n     * - Binary operator expressions are foldable if the left and right expressions are foldable and\n     *   it is one of '+', '-', '*', '/', '%', '||', and '&&'.\n     * - An identifier is foldable if a value can be found for its symbol in the evaluator symbol\n     *   table.\n     */\n    Evaluator.prototype.isFoldable = function (node) {\n        return this.isFoldableWorker(node, new Map());\n    };\n    Evaluator.prototype.isFoldableWorker = function (node, folding) {\n        var _this = this;\n        if (node) {\n            switch (node.kind) {\n                case ts.SyntaxKind.ObjectLiteralExpression:\n                    return everyNodeChild(node, function (child) {\n                        if (child.kind === ts.SyntaxKind.PropertyAssignment) {\n                            var propertyAssignment = child;\n                            return _this.isFoldableWorker(propertyAssignment.initializer, folding);\n                        }\n                        return false;\n                    });\n                case ts.SyntaxKind.ArrayLiteralExpression:\n                    return everyNodeChild(node, function (child) { return _this.isFoldableWorker(child, folding); });\n                case ts.SyntaxKind.CallExpression:\n                    var callExpression = node;\n                    // We can fold a <array>.concat(<v>).\n                    if (isMethodCallOf(callExpression, 'concat') &&\n                        arrayOrEmpty(callExpression.arguments).length === 1) {\n                        var arrayNode = callExpression.expression.expression;\n                        if (this.isFoldableWorker(arrayNode, folding) &&\n                            this.isFoldableWorker(callExpression.arguments[0], folding)) {\n                            // It needs to be an array.\n                            var arrayValue = this.evaluateNode(arrayNode);\n                            if (arrayValue && Array.isArray(arrayValue)) {\n                                return true;\n                            }\n                        }\n                    }\n                    // We can fold a call to CONST_EXPR\n                    if (isCallOf(callExpression, 'CONST_EXPR') &&\n                        arrayOrEmpty(callExpression.arguments).length === 1)\n                        return this.isFoldableWorker(callExpression.arguments[0], folding);\n                    return false;\n                case ts.SyntaxKind.NoSubstitutionTemplateLiteral:\n                case ts.SyntaxKind.StringLiteral:\n                case ts.SyntaxKind.NumericLiteral:\n                case ts.SyntaxKind.NullKeyword:\n                case ts.SyntaxKind.TrueKeyword:\n                case ts.SyntaxKind.FalseKeyword:\n                case ts.SyntaxKind.TemplateHead:\n                case ts.SyntaxKind.TemplateMiddle:\n                case ts.SyntaxKind.TemplateTail:\n                    return true;\n                case ts.SyntaxKind.ParenthesizedExpression:\n                    var parenthesizedExpression = node;\n                    return this.isFoldableWorker(parenthesizedExpression.expression, folding);\n                case ts.SyntaxKind.BinaryExpression:\n                    var binaryExpression = node;\n                    switch (binaryExpression.operatorToken.kind) {\n                        case ts.SyntaxKind.PlusToken:\n                        case ts.SyntaxKind.MinusToken:\n                        case ts.SyntaxKind.AsteriskToken:\n                        case ts.SyntaxKind.SlashToken:\n                        case ts.SyntaxKind.PercentToken:\n                        case ts.SyntaxKind.AmpersandAmpersandToken:\n                        case ts.SyntaxKind.BarBarToken:\n                            return this.isFoldableWorker(binaryExpression.left, folding) &&\n                                this.isFoldableWorker(binaryExpression.right, folding);\n                        default:\n                            return false;\n                    }\n                case ts.SyntaxKind.PropertyAccessExpression:\n                    var propertyAccessExpression = node;\n                    return this.isFoldableWorker(propertyAccessExpression.expression, folding);\n                case ts.SyntaxKind.ElementAccessExpression:\n                    var elementAccessExpression = node;\n                    return this.isFoldableWorker(elementAccessExpression.expression, folding) &&\n                        this.isFoldableWorker(elementAccessExpression.argumentExpression, folding);\n                case ts.SyntaxKind.Identifier:\n                    var identifier = node;\n                    var reference = this.symbols.resolve(identifier.text);\n                    if (reference !== undefined && isPrimitive$1(reference)) {\n                        return true;\n                    }\n                    break;\n                case ts.SyntaxKind.TemplateExpression:\n                    var templateExpression = node;\n                    return templateExpression.templateSpans.every(function (span) { return _this.isFoldableWorker(span.expression, folding); });\n            }\n        }\n        return false;\n    };\n    /**\n     * Produce a JSON serialiable object representing `node`. The foldable values in the expression\n     * tree are folded. For example, a node representing `1 + 2` is folded into `3`.\n     */\n    Evaluator.prototype.evaluateNode = function (node, preferReference) {\n        var _this = this;\n        var t = this;\n        var error;\n        function recordEntry(entry, node) {\n            if (t.options.substituteExpression) {\n                var newEntry = t.options.substituteExpression(entry, node);\n                if (t.recordExport && newEntry != entry && isMetadataGlobalReferenceExpression(newEntry)) {\n                    t.recordExport(newEntry.name, entry);\n                }\n                entry = newEntry;\n            }\n            return recordMapEntry(entry, node, t.nodeMap);\n        }\n        function isFoldableError(value) {\n            return !t.options.verboseInvalidExpression && isMetadataError$1(value);\n        }\n        var resolveName = function (name, preferReference) {\n            var reference = _this.symbols.resolve(name, preferReference);\n            if (reference === undefined) {\n                // Encode as a global reference. StaticReflector will check the reference.\n                return recordEntry({ __symbolic: 'reference', name: name }, node);\n            }\n            if (reference && isMetadataSymbolicReferenceExpression(reference)) {\n                return recordEntry(__assign({}, reference), node);\n            }\n            return reference;\n        };\n        switch (node.kind) {\n            case ts.SyntaxKind.ObjectLiteralExpression:\n                var obj_1 = {};\n                var quoted_1 = [];\n                ts.forEachChild(node, function (child) {\n                    switch (child.kind) {\n                        case ts.SyntaxKind.ShorthandPropertyAssignment:\n                        case ts.SyntaxKind.PropertyAssignment:\n                            var assignment = child;\n                            if (assignment.name.kind == ts.SyntaxKind.StringLiteral) {\n                                var name_1 = assignment.name.text;\n                                quoted_1.push(name_1);\n                            }\n                            var propertyName = _this.nameOf(assignment.name);\n                            if (isFoldableError(propertyName)) {\n                                error = propertyName;\n                                return true;\n                            }\n                            var propertyValue = isPropertyAssignment(assignment) ?\n                                _this.evaluateNode(assignment.initializer, /* preferReference */ true) :\n                                resolveName(propertyName, /* preferReference */ true);\n                            if (isFoldableError(propertyValue)) {\n                                error = propertyValue;\n                                return true; // Stop the forEachChild.\n                            }\n                            else {\n                                obj_1[propertyName] = isPropertyAssignment(assignment) ?\n                                    recordEntry(propertyValue, assignment.initializer) :\n                                    propertyValue;\n                            }\n                    }\n                });\n                if (error)\n                    return error;\n                if (this.options.quotedNames && quoted_1.length) {\n                    obj_1['$quoted$'] = quoted_1;\n                }\n                return recordEntry(obj_1, node);\n            case ts.SyntaxKind.ArrayLiteralExpression:\n                var arr_1 = [];\n                ts.forEachChild(node, function (child) {\n                    var value = _this.evaluateNode(child, /* preferReference */ true);\n                    // Check for error\n                    if (isFoldableError(value)) {\n                        error = value;\n                        return true; // Stop the forEachChild.\n                    }\n                    // Handle spread expressions\n                    if (isMetadataSymbolicSpreadExpression(value)) {\n                        if (Array.isArray(value.expression)) {\n                            try {\n                                for (var _a = __values(value.expression), _b = _a.next(); !_b.done; _b = _a.next()) {\n                                    var spreadValue = _b.value;\n                                    arr_1.push(spreadValue);\n                                }\n                            }\n                            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                            finally {\n                                try {\n                                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                                }\n                                finally { if (e_1) throw e_1.error; }\n                            }\n                            return;\n                        }\n                    }\n                    arr_1.push(value);\n                    var e_1, _c;\n                });\n                if (error)\n                    return error;\n                return recordEntry(arr_1, node);\n            case spreadElementSyntaxKind:\n                var spreadExpression = this.evaluateNode(node.expression);\n                return recordEntry({ __symbolic: 'spread', expression: spreadExpression }, node);\n            case ts.SyntaxKind.CallExpression:\n                var callExpression = node;\n                if (isCallOf(callExpression, 'forwardRef') &&\n                    arrayOrEmpty(callExpression.arguments).length === 1) {\n                    var firstArgument = callExpression.arguments[0];\n                    if (firstArgument.kind == ts.SyntaxKind.ArrowFunction) {\n                        var arrowFunction = firstArgument;\n                        return recordEntry(this.evaluateNode(arrowFunction.body), node);\n                    }\n                }\n                var args = arrayOrEmpty(callExpression.arguments).map(function (arg) { return _this.evaluateNode(arg); });\n                if (this.isFoldable(callExpression)) {\n                    if (isMethodCallOf(callExpression, 'concat')) {\n                        var arrayValue = this.evaluateNode(callExpression.expression.expression);\n                        if (isFoldableError(arrayValue))\n                            return arrayValue;\n                        return arrayValue.concat(args[0]);\n                    }\n                }\n                // Always fold a CONST_EXPR even if the argument is not foldable.\n                if (isCallOf(callExpression, 'CONST_EXPR') &&\n                    arrayOrEmpty(callExpression.arguments).length === 1) {\n                    return recordEntry(args[0], node);\n                }\n                var expression = this.evaluateNode(callExpression.expression);\n                if (isFoldableError(expression)) {\n                    return recordEntry(expression, node);\n                }\n                var result = { __symbolic: 'call', expression: expression };\n                if (args && args.length) {\n                    result.arguments = args;\n                }\n                return recordEntry(result, node);\n            case ts.SyntaxKind.NewExpression:\n                var newExpression = node;\n                var newArgs = arrayOrEmpty(newExpression.arguments).map(function (arg) { return _this.evaluateNode(arg); });\n                var newTarget = this.evaluateNode(newExpression.expression);\n                if (isMetadataError$1(newTarget)) {\n                    return recordEntry(newTarget, node);\n                }\n                var call = { __symbolic: 'new', expression: newTarget };\n                if (newArgs.length) {\n                    call.arguments = newArgs;\n                }\n                return recordEntry(call, node);\n            case ts.SyntaxKind.PropertyAccessExpression: {\n                var propertyAccessExpression = node;\n                var expression_1 = this.evaluateNode(propertyAccessExpression.expression);\n                if (isFoldableError(expression_1)) {\n                    return recordEntry(expression_1, node);\n                }\n                var member = this.nameOf(propertyAccessExpression.name);\n                if (isFoldableError(member)) {\n                    return recordEntry(member, node);\n                }\n                if (expression_1 && this.isFoldable(propertyAccessExpression.expression))\n                    return expression_1[member];\n                if (isMetadataModuleReferenceExpression(expression_1)) {\n                    // A select into a module reference and be converted into a reference to the symbol\n                    // in the module\n                    return recordEntry({ __symbolic: 'reference', module: expression_1.module, name: member }, node);\n                }\n                return recordEntry({ __symbolic: 'select', expression: expression_1, member: member }, node);\n            }\n            case ts.SyntaxKind.ElementAccessExpression: {\n                var elementAccessExpression = node;\n                var expression_2 = this.evaluateNode(elementAccessExpression.expression);\n                if (isFoldableError(expression_2)) {\n                    return recordEntry(expression_2, node);\n                }\n                if (!elementAccessExpression.argumentExpression) {\n                    return recordEntry(errorSymbol('Expression form not supported', node), node);\n                }\n                var index = this.evaluateNode(elementAccessExpression.argumentExpression);\n                if (isFoldableError(expression_2)) {\n                    return recordEntry(expression_2, node);\n                }\n                if (this.isFoldable(elementAccessExpression.expression) &&\n                    this.isFoldable(elementAccessExpression.argumentExpression))\n                    return expression_2[index];\n                return recordEntry({ __symbolic: 'index', expression: expression_2, index: index }, node);\n            }\n            case ts.SyntaxKind.Identifier:\n                var identifier = node;\n                var name = identifier.text;\n                return resolveName(name, preferReference);\n            case ts.SyntaxKind.TypeReference:\n                var typeReferenceNode = node;\n                var typeNameNode_1 = typeReferenceNode.typeName;\n                var getReference = function (node) {\n                    if (typeNameNode_1.kind === ts.SyntaxKind.QualifiedName) {\n                        var qualifiedName = node;\n                        var left_1 = _this.evaluateNode(qualifiedName.left);\n                        if (isMetadataModuleReferenceExpression(left_1)) {\n                            return recordEntry({\n                                __symbolic: 'reference',\n                                module: left_1.module,\n                                name: qualifiedName.right.text\n                            }, node);\n                        }\n                        // Record a type reference to a declared type as a select.\n                        return { __symbolic: 'select', expression: left_1, member: qualifiedName.right.text };\n                    }\n                    else {\n                        var identifier_1 = typeNameNode_1;\n                        var symbol = _this.symbols.resolve(identifier_1.text);\n                        if (isFoldableError(symbol) || isMetadataSymbolicReferenceExpression(symbol)) {\n                            return recordEntry(symbol, node);\n                        }\n                        return recordEntry(errorSymbol('Could not resolve type', node, { typeName: identifier_1.text }), node);\n                    }\n                };\n                var typeReference = getReference(typeNameNode_1);\n                if (isFoldableError(typeReference)) {\n                    return recordEntry(typeReference, node);\n                }\n                if (!isMetadataModuleReferenceExpression(typeReference) &&\n                    typeReferenceNode.typeArguments && typeReferenceNode.typeArguments.length) {\n                    var args_1 = typeReferenceNode.typeArguments.map(function (element) { return _this.evaluateNode(element); });\n                    // TODO: Remove typecast when upgraded to 2.0 as it will be correctly inferred.\n                    // Some versions of 1.9 do not infer this correctly.\n                    typeReference.arguments = args_1;\n                }\n                return recordEntry(typeReference, node);\n            case ts.SyntaxKind.UnionType:\n                var unionType = node;\n                // Remove null and undefined from the list of unions.\n                var references = unionType.types\n                    .filter(function (n) { return n.kind != ts.SyntaxKind.NullKeyword &&\n                    n.kind != ts.SyntaxKind.UndefinedKeyword; })\n                    .map(function (n) { return _this.evaluateNode(n); });\n                // The remmaining reference must be the same. If two have type arguments consider them\n                // different even if the type arguments are the same.\n                var candidate = null;\n                for (var i = 0; i < references.length; i++) {\n                    var reference = references[i];\n                    if (isMetadataSymbolicReferenceExpression(reference)) {\n                        if (candidate) {\n                            if (reference.name == candidate.name &&\n                                reference.module == candidate.module && !reference.arguments) {\n                                candidate = reference;\n                            }\n                        }\n                        else {\n                            candidate = reference;\n                        }\n                    }\n                    else {\n                        return reference;\n                    }\n                }\n                if (candidate)\n                    return candidate;\n                break;\n            case ts.SyntaxKind.NoSubstitutionTemplateLiteral:\n            case ts.SyntaxKind.StringLiteral:\n            case ts.SyntaxKind.TemplateHead:\n            case ts.SyntaxKind.TemplateTail:\n            case ts.SyntaxKind.TemplateMiddle:\n                return node.text;\n            case ts.SyntaxKind.NumericLiteral:\n                return parseFloat(node.text);\n            case ts.SyntaxKind.AnyKeyword:\n                return recordEntry({ __symbolic: 'reference', name: 'any' }, node);\n            case ts.SyntaxKind.StringKeyword:\n                return recordEntry({ __symbolic: 'reference', name: 'string' }, node);\n            case ts.SyntaxKind.NumberKeyword:\n                return recordEntry({ __symbolic: 'reference', name: 'number' }, node);\n            case ts.SyntaxKind.BooleanKeyword:\n                return recordEntry({ __symbolic: 'reference', name: 'boolean' }, node);\n            case ts.SyntaxKind.ArrayType:\n                var arrayTypeNode = node;\n                return recordEntry({\n                    __symbolic: 'reference',\n                    name: 'Array',\n                    arguments: [this.evaluateNode(arrayTypeNode.elementType)]\n                }, node);\n            case ts.SyntaxKind.NullKeyword:\n                return null;\n            case ts.SyntaxKind.TrueKeyword:\n                return true;\n            case ts.SyntaxKind.FalseKeyword:\n                return false;\n            case ts.SyntaxKind.ParenthesizedExpression:\n                var parenthesizedExpression = node;\n                return this.evaluateNode(parenthesizedExpression.expression);\n            case ts.SyntaxKind.TypeAssertionExpression:\n                var typeAssertion = node;\n                return this.evaluateNode(typeAssertion.expression);\n            case ts.SyntaxKind.PrefixUnaryExpression:\n                var prefixUnaryExpression = node;\n                var operand = this.evaluateNode(prefixUnaryExpression.operand);\n                if (isDefined$1(operand) && isPrimitive$1(operand)) {\n                    switch (prefixUnaryExpression.operator) {\n                        case ts.SyntaxKind.PlusToken:\n                            return +operand;\n                        case ts.SyntaxKind.MinusToken:\n                            return -operand;\n                        case ts.SyntaxKind.TildeToken:\n                            return ~operand;\n                        case ts.SyntaxKind.ExclamationToken:\n                            return !operand;\n                    }\n                }\n                var operatorText = void 0;\n                switch (prefixUnaryExpression.operator) {\n                    case ts.SyntaxKind.PlusToken:\n                        operatorText = '+';\n                        break;\n                    case ts.SyntaxKind.MinusToken:\n                        operatorText = '-';\n                        break;\n                    case ts.SyntaxKind.TildeToken:\n                        operatorText = '~';\n                        break;\n                    case ts.SyntaxKind.ExclamationToken:\n                        operatorText = '!';\n                        break;\n                    default:\n                        return undefined;\n                }\n                return recordEntry({ __symbolic: 'pre', operator: operatorText, operand: operand }, node);\n            case ts.SyntaxKind.BinaryExpression:\n                var binaryExpression = node;\n                var left = this.evaluateNode(binaryExpression.left);\n                var right = this.evaluateNode(binaryExpression.right);\n                if (isDefined$1(left) && isDefined$1(right)) {\n                    if (isPrimitive$1(left) && isPrimitive$1(right))\n                        switch (binaryExpression.operatorToken.kind) {\n                            case ts.SyntaxKind.BarBarToken:\n                                return left || right;\n                            case ts.SyntaxKind.AmpersandAmpersandToken:\n                                return left && right;\n                            case ts.SyntaxKind.AmpersandToken:\n                                return left & right;\n                            case ts.SyntaxKind.BarToken:\n                                return left | right;\n                            case ts.SyntaxKind.CaretToken:\n                                return left ^ right;\n                            case ts.SyntaxKind.EqualsEqualsToken:\n                                return left == right;\n                            case ts.SyntaxKind.ExclamationEqualsToken:\n                                return left != right;\n                            case ts.SyntaxKind.EqualsEqualsEqualsToken:\n                                return left === right;\n                            case ts.SyntaxKind.ExclamationEqualsEqualsToken:\n                                return left !== right;\n                            case ts.SyntaxKind.LessThanToken:\n                                return left < right;\n                            case ts.SyntaxKind.GreaterThanToken:\n                                return left > right;\n                            case ts.SyntaxKind.LessThanEqualsToken:\n                                return left <= right;\n                            case ts.SyntaxKind.GreaterThanEqualsToken:\n                                return left >= right;\n                            case ts.SyntaxKind.LessThanLessThanToken:\n                                return left << right;\n                            case ts.SyntaxKind.GreaterThanGreaterThanToken:\n                                return left >> right;\n                            case ts.SyntaxKind.GreaterThanGreaterThanGreaterThanToken:\n                                return left >>> right;\n                            case ts.SyntaxKind.PlusToken:\n                                return left + right;\n                            case ts.SyntaxKind.MinusToken:\n                                return left - right;\n                            case ts.SyntaxKind.AsteriskToken:\n                                return left * right;\n                            case ts.SyntaxKind.SlashToken:\n                                return left / right;\n                            case ts.SyntaxKind.PercentToken:\n                                return left % right;\n                        }\n                    return recordEntry({\n                        __symbolic: 'binop',\n                        operator: binaryExpression.operatorToken.getText(),\n                        left: left,\n                        right: right\n                    }, node);\n                }\n                break;\n            case ts.SyntaxKind.ConditionalExpression:\n                var conditionalExpression = node;\n                var condition = this.evaluateNode(conditionalExpression.condition);\n                var thenExpression = this.evaluateNode(conditionalExpression.whenTrue);\n                var elseExpression = this.evaluateNode(conditionalExpression.whenFalse);\n                if (isPrimitive$1(condition)) {\n                    return condition ? thenExpression : elseExpression;\n                }\n                return recordEntry({ __symbolic: 'if', condition: condition, thenExpression: thenExpression, elseExpression: elseExpression }, node);\n            case ts.SyntaxKind.FunctionExpression:\n            case ts.SyntaxKind.ArrowFunction:\n                return recordEntry(errorSymbol('Lambda not supported', node), node);\n            case ts.SyntaxKind.TaggedTemplateExpression:\n                return recordEntry(errorSymbol('Tagged template expressions are not supported in metadata', node), node);\n            case ts.SyntaxKind.TemplateExpression:\n                var templateExpression = node;\n                if (this.isFoldable(node)) {\n                    return templateExpression.templateSpans.reduce(function (previous, current) { return previous + _this.evaluateNode(current.expression) +\n                        _this.evaluateNode(current.literal); }, this.evaluateNode(templateExpression.head));\n                }\n                else {\n                    return templateExpression.templateSpans.reduce(function (previous, current) {\n                        var expr = _this.evaluateNode(current.expression);\n                        var literal = _this.evaluateNode(current.literal);\n                        if (isFoldableError(expr))\n                            return expr;\n                        if (isFoldableError(literal))\n                            return literal;\n                        if (typeof previous === 'string' && typeof expr === 'string' &&\n                            typeof literal === 'string') {\n                            return previous + expr + literal;\n                        }\n                        var result = expr;\n                        if (previous !== '') {\n                            result = { __symbolic: 'binop', operator: '+', left: previous, right: expr };\n                        }\n                        if (literal != '') {\n                            result = { __symbolic: 'binop', operator: '+', left: result, right: literal };\n                        }\n                        return result;\n                    }, this.evaluateNode(templateExpression.head));\n                }\n            case ts.SyntaxKind.AsExpression:\n                var asExpression = node;\n                return this.evaluateNode(asExpression.expression);\n            case ts.SyntaxKind.ClassExpression:\n                return { __symbolic: 'class' };\n        }\n        return recordEntry(errorSymbol('Expression form not supported', node), node);\n    };\n    return Evaluator;\n}());\nfunction isPropertyAssignment(node) {\n    return node.kind == ts.SyntaxKind.PropertyAssignment;\n}\nvar empty = ts.createNodeArray();\nfunction arrayOrEmpty(v) {\n    return v || empty;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Symbols = /** @class */ (function () {\n    function Symbols(sourceFile) {\n        this.sourceFile = sourceFile;\n        this.references = new Map();\n    }\n    Symbols.prototype.resolve = function (name, preferReference) {\n        return (preferReference && this.references.get(name)) || this.symbols.get(name);\n    };\n    Symbols.prototype.define = function (name, value) { this.symbols.set(name, value); };\n    Symbols.prototype.defineReference = function (name, value) {\n        this.references.set(name, value);\n    };\n    Symbols.prototype.has = function (name) { return this.symbols.has(name); };\n    Object.defineProperty(Symbols.prototype, \"symbols\", {\n        get: function () {\n            var result = this._symbols;\n            if (!result) {\n                result = this._symbols = new Map();\n                populateBuiltins(result);\n                this.buildImports();\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Symbols.prototype.buildImports = function () {\n        var _this = this;\n        var symbols = this._symbols;\n        // Collect the imported symbols into this.symbols\n        var stripQuotes = function (s) { return s.replace(/^['\"]|['\"]$/g, ''); };\n        var visit = function (node) {\n            switch (node.kind) {\n                case ts.SyntaxKind.ImportEqualsDeclaration:\n                    var importEqualsDeclaration = node;\n                    if (importEqualsDeclaration.moduleReference.kind ===\n                        ts.SyntaxKind.ExternalModuleReference) {\n                        var externalReference = importEqualsDeclaration.moduleReference;\n                        if (externalReference.expression) {\n                            // An `import <identifier> = require(<module-specifier>);\n                            if (!externalReference.expression.parent) {\n                                // The `parent` field of a node is set by the TypeScript binder (run as\n                                // part of the type checker). Setting it here allows us to call `getText()`\n                                // even if the `SourceFile` was not type checked (which looks for `SourceFile`\n                                // in the parent chain). This doesn't damage the node as the binder unconditionally\n                                // sets the parent.\n                                externalReference.expression.parent = externalReference;\n                                externalReference.parent = _this.sourceFile;\n                            }\n                            var from_1 = stripQuotes(externalReference.expression.getText());\n                            symbols.set(importEqualsDeclaration.name.text, { __symbolic: 'reference', module: from_1 });\n                            break;\n                        }\n                    }\n                    symbols.set(importEqualsDeclaration.name.text, { __symbolic: 'error', message: \"Unsupported import syntax\" });\n                    break;\n                case ts.SyntaxKind.ImportDeclaration:\n                    var importDecl = node;\n                    if (!importDecl.importClause) {\n                        // An `import <module-specifier>` clause which does not bring symbols into scope.\n                        break;\n                    }\n                    if (!importDecl.moduleSpecifier.parent) {\n                        // See note above in the `ImportEqualDeclaration` case.\n                        importDecl.moduleSpecifier.parent = importDecl;\n                        importDecl.parent = _this.sourceFile;\n                    }\n                    var from = stripQuotes(importDecl.moduleSpecifier.getText());\n                    if (importDecl.importClause.name) {\n                        // An `import <identifier> form <module-specifier>` clause. Record the default symbol.\n                        symbols.set(importDecl.importClause.name.text, { __symbolic: 'reference', module: from, default: true });\n                    }\n                    var bindings = importDecl.importClause.namedBindings;\n                    if (bindings) {\n                        switch (bindings.kind) {\n                            case ts.SyntaxKind.NamedImports:\n                                try {\n                                    // An `import { [<identifier> [, <identifier>] } from <module-specifier>` clause\n                                    for (var _a = __values(bindings.elements), _b = _a.next(); !_b.done; _b = _a.next()) {\n                                        var binding = _b.value;\n                                        symbols.set(binding.name.text, {\n                                            __symbolic: 'reference',\n                                            module: from,\n                                            name: binding.propertyName ? binding.propertyName.text : binding.name.text\n                                        });\n                                    }\n                                }\n                                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                                finally {\n                                    try {\n                                        if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                                    }\n                                    finally { if (e_1) throw e_1.error; }\n                                }\n                                break;\n                            case ts.SyntaxKind.NamespaceImport:\n                                // An `input * as <identifier> from <module-specifier>` clause.\n                                symbols.set(bindings.name.text, { __symbolic: 'reference', module: from });\n                                break;\n                        }\n                    }\n                    break;\n            }\n            ts.forEachChild(node, visit);\n            var e_1, _c;\n        };\n        if (this.sourceFile) {\n            ts.forEachChild(this.sourceFile, visit);\n        }\n    };\n    return Symbols;\n}());\nfunction populateBuiltins(symbols) {\n    // From lib.core.d.ts (all \"define const\")\n    ['Object', 'Function', 'String', 'Number', 'Array', 'Boolean', 'Map', 'NaN', 'Infinity', 'Math',\n        'Date', 'RegExp', 'Error', 'Error', 'EvalError', 'RangeError', 'ReferenceError', 'SyntaxError',\n        'TypeError', 'URIError', 'JSON', 'ArrayBuffer', 'DataView', 'Int8Array', 'Uint8Array',\n        'Uint8ClampedArray', 'Uint16Array', 'Int16Array', 'Int32Array', 'Uint32Array', 'Float32Array',\n        'Float64Array']\n        .forEach(function (name) { return symbols.set(name, { __symbolic: 'reference', name: name }); });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar isStatic = function (node) { return ts.getCombinedModifierFlags(node) & ts.ModifierFlags.Static; };\n/**\n * Collect decorator metadata from a TypeScript module.\n */\nvar MetadataCollector = /** @class */ (function () {\n    function MetadataCollector(options) {\n        if (options === void 0) { options = {}; }\n        this.options = options;\n    }\n    /**\n     * Returns a JSON.stringify friendly form describing the decorators of the exported classes from\n     * the source file that is expected to correspond to a module.\n     */\n    MetadataCollector.prototype.getMetadata = function (sourceFile, strict, substituteExpression) {\n        var _this = this;\n        if (strict === void 0) { strict = false; }\n        var locals = new Symbols(sourceFile);\n        var nodeMap = new Map();\n        var composedSubstituter = substituteExpression && this.options.substituteExpression ?\n            function (value, node) {\n                return _this.options.substituteExpression(substituteExpression(value, node), node);\n            } :\n            substituteExpression;\n        var evaluatorOptions = substituteExpression ? __assign({}, this.options, { substituteExpression: composedSubstituter }) :\n            this.options;\n        var metadata;\n        var evaluator = new Evaluator(locals, nodeMap, evaluatorOptions, function (name, value) {\n            if (!metadata)\n                metadata = {};\n            metadata[name] = value;\n        });\n        var exports = undefined;\n        function objFromDecorator(decoratorNode) {\n            return evaluator.evaluateNode(decoratorNode.expression);\n        }\n        function recordEntry(entry, node) {\n            if (composedSubstituter) {\n                entry = composedSubstituter(entry, node);\n            }\n            return recordMapEntry(entry, node, nodeMap, sourceFile);\n        }\n        function errorSym(message, node, context) {\n            return errorSymbol(message, node, context, sourceFile);\n        }\n        function maybeGetSimpleFunction(functionDeclaration) {\n            if (functionDeclaration.name && functionDeclaration.name.kind == ts.SyntaxKind.Identifier) {\n                var nameNode = functionDeclaration.name;\n                var functionName = nameNode.text;\n                var functionBody = functionDeclaration.body;\n                if (functionBody && functionBody.statements.length == 1) {\n                    var statement = functionBody.statements[0];\n                    if (statement.kind === ts.SyntaxKind.ReturnStatement) {\n                        var returnStatement = statement;\n                        if (returnStatement.expression) {\n                            var func = {\n                                __symbolic: 'function',\n                                parameters: namesOf(functionDeclaration.parameters),\n                                value: evaluator.evaluateNode(returnStatement.expression)\n                            };\n                            if (functionDeclaration.parameters.some(function (p) { return p.initializer != null; })) {\n                                func.defaults = functionDeclaration.parameters.map(function (p) { return p.initializer && evaluator.evaluateNode(p.initializer); });\n                            }\n                            return recordEntry({ func: func, name: functionName }, functionDeclaration);\n                        }\n                    }\n                }\n            }\n        }\n        function classMetadataOf(classDeclaration) {\n            var result = { __symbolic: 'class' };\n            function getDecorators(decorators) {\n                if (decorators && decorators.length)\n                    return decorators.map(function (decorator) { return objFromDecorator(decorator); });\n                return undefined;\n            }\n            function referenceFrom(node) {\n                var result = evaluator.evaluateNode(node);\n                if (isMetadataError$1(result) || isMetadataSymbolicReferenceExpression(result) ||\n                    isMetadataSymbolicSelectExpression(result)) {\n                    return result;\n                }\n                else {\n                    return errorSym('Symbol reference expected', node);\n                }\n            }\n            // Add class parents\n            if (classDeclaration.heritageClauses) {\n                classDeclaration.heritageClauses.forEach(function (hc) {\n                    if (hc.token === ts.SyntaxKind.ExtendsKeyword && hc.types) {\n                        hc.types.forEach(function (type) { return result.extends = referenceFrom(type.expression); });\n                    }\n                });\n            }\n            // Add arity if the type is generic\n            var typeParameters = classDeclaration.typeParameters;\n            if (typeParameters && typeParameters.length) {\n                result.arity = typeParameters.length;\n            }\n            // Add class decorators\n            if (classDeclaration.decorators) {\n                result.decorators = getDecorators(classDeclaration.decorators);\n            }\n            // member decorators\n            var members = null;\n            function recordMember(name, metadata) {\n                if (!members)\n                    members = {};\n                var data = members.hasOwnProperty(name) ? members[name] : [];\n                data.push(metadata);\n                members[name] = data;\n            }\n            // static member\n            var statics = null;\n            function recordStaticMember(name, value) {\n                if (!statics)\n                    statics = {};\n                statics[name] = value;\n            }\n            try {\n                for (var _a = __values(classDeclaration.members), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var member = _b.value;\n                    var isConstructor = false;\n                    switch (member.kind) {\n                        case ts.SyntaxKind.Constructor:\n                        case ts.SyntaxKind.MethodDeclaration:\n                            isConstructor = member.kind === ts.SyntaxKind.Constructor;\n                            var method = member;\n                            if (isStatic(method)) {\n                                var maybeFunc = maybeGetSimpleFunction(method);\n                                if (maybeFunc) {\n                                    recordStaticMember(maybeFunc.name, maybeFunc.func);\n                                }\n                                continue;\n                            }\n                            var methodDecorators = getDecorators(method.decorators);\n                            var parameters = method.parameters;\n                            var parameterDecoratorData = [];\n                            var parametersData = [];\n                            var hasDecoratorData = false;\n                            var hasParameterData = false;\n                            try {\n                                for (var parameters_1 = __values(parameters), parameters_1_1 = parameters_1.next(); !parameters_1_1.done; parameters_1_1 = parameters_1.next()) {\n                                    var parameter = parameters_1_1.value;\n                                    var parameterData = getDecorators(parameter.decorators);\n                                    parameterDecoratorData.push(parameterData);\n                                    hasDecoratorData = hasDecoratorData || !!parameterData;\n                                    if (isConstructor) {\n                                        if (parameter.type) {\n                                            parametersData.push(referenceFrom(parameter.type));\n                                        }\n                                        else {\n                                            parametersData.push(null);\n                                        }\n                                        hasParameterData = true;\n                                    }\n                                }\n                            }\n                            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                            finally {\n                                try {\n                                    if (parameters_1_1 && !parameters_1_1.done && (_c = parameters_1.return)) _c.call(parameters_1);\n                                }\n                                finally { if (e_1) throw e_1.error; }\n                            }\n                            var data = { __symbolic: isConstructor ? 'constructor' : 'method' };\n                            var name = isConstructor ? '__ctor__' : evaluator.nameOf(member.name);\n                            if (methodDecorators) {\n                                data.decorators = methodDecorators;\n                            }\n                            if (hasDecoratorData) {\n                                data.parameterDecorators = parameterDecoratorData;\n                            }\n                            if (hasParameterData) {\n                                data.parameters = parametersData;\n                            }\n                            if (!isMetadataError$1(name)) {\n                                recordMember(name, data);\n                            }\n                            break;\n                        case ts.SyntaxKind.PropertyDeclaration:\n                        case ts.SyntaxKind.GetAccessor:\n                        case ts.SyntaxKind.SetAccessor:\n                            var property = member;\n                            if (isStatic(property)) {\n                                var name_1 = evaluator.nameOf(property.name);\n                                if (!isMetadataError$1(name_1)) {\n                                    if (property.initializer) {\n                                        var value = evaluator.evaluateNode(property.initializer);\n                                        recordStaticMember(name_1, value);\n                                    }\n                                    else {\n                                        recordStaticMember(name_1, errorSym('Variable not initialized', property.name));\n                                    }\n                                }\n                            }\n                            var propertyDecorators = getDecorators(property.decorators);\n                            if (propertyDecorators) {\n                                var name_2 = evaluator.nameOf(property.name);\n                                if (!isMetadataError$1(name_2)) {\n                                    recordMember(name_2, { __symbolic: 'property', decorators: propertyDecorators });\n                                }\n                            }\n                            break;\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_d = _a.return)) _d.call(_a);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            if (members) {\n                result.members = members;\n            }\n            if (statics) {\n                result.statics = statics;\n            }\n            return recordEntry(result, classDeclaration);\n            var e_2, _d, e_1, _c;\n        }\n        // Collect all exported symbols from an exports clause.\n        var exportMap = new Map();\n        ts.forEachChild(sourceFile, function (node) {\n            switch (node.kind) {\n                case ts.SyntaxKind.ExportDeclaration:\n                    var exportDeclaration = node;\n                    var moduleSpecifier = exportDeclaration.moduleSpecifier, exportClause = exportDeclaration.exportClause;\n                    if (!moduleSpecifier) {\n                        // If there is a module specifier there is also an exportClause\n                        exportClause.elements.forEach(function (spec) {\n                            var exportedAs = spec.name.text;\n                            var name = (spec.propertyName || spec.name).text;\n                            exportMap.set(name, exportedAs);\n                        });\n                    }\n            }\n        });\n        var isExport = function (node) {\n            return sourceFile.isDeclarationFile || ts.getCombinedModifierFlags(node) & ts.ModifierFlags.Export;\n        };\n        var isExportedIdentifier = function (identifier) {\n            return identifier && exportMap.has(identifier.text);\n        };\n        var isExported = function (node) {\n            return isExport(node) || isExportedIdentifier(node.name);\n        };\n        var exportedIdentifierName = function (identifier) {\n            return identifier && (exportMap.get(identifier.text) || identifier.text);\n        };\n        var exportedName = function (node) { return exportedIdentifierName(node.name); };\n        // Pre-declare classes and functions\n        ts.forEachChild(sourceFile, function (node) {\n            switch (node.kind) {\n                case ts.SyntaxKind.ClassDeclaration:\n                    var classDeclaration = node;\n                    if (classDeclaration.name) {\n                        var className = classDeclaration.name.text;\n                        if (isExported(classDeclaration)) {\n                            locals.define(className, { __symbolic: 'reference', name: exportedName(classDeclaration) });\n                        }\n                        else {\n                            locals.define(className, errorSym('Reference to non-exported class', node, { className: className }));\n                        }\n                    }\n                    break;\n                case ts.SyntaxKind.InterfaceDeclaration:\n                    var interfaceDeclaration = node;\n                    if (interfaceDeclaration.name) {\n                        var interfaceName = interfaceDeclaration.name.text;\n                        // All references to interfaces should be converted to references to `any`.\n                        locals.define(interfaceName, { __symbolic: 'reference', name: 'any' });\n                    }\n                    break;\n                case ts.SyntaxKind.FunctionDeclaration:\n                    var functionDeclaration = node;\n                    if (!isExported(functionDeclaration)) {\n                        // Report references to this function as an error.\n                        var nameNode = functionDeclaration.name;\n                        if (nameNode && nameNode.text) {\n                            locals.define(nameNode.text, errorSym('Reference to a non-exported function', nameNode, { name: nameNode.text }));\n                        }\n                    }\n                    break;\n            }\n        });\n        ts.forEachChild(sourceFile, function (node) {\n            switch (node.kind) {\n                case ts.SyntaxKind.ExportDeclaration:\n                    // Record export declarations\n                    var exportDeclaration = node;\n                    var moduleSpecifier = exportDeclaration.moduleSpecifier, exportClause = exportDeclaration.exportClause;\n                    if (!moduleSpecifier) {\n                        // no module specifier -> export {propName as name};\n                        if (exportClause) {\n                            exportClause.elements.forEach(function (spec) {\n                                var name = spec.name.text;\n                                // If the symbol was not already exported, export a reference since it is a\n                                // reference to an import\n                                if (!metadata || !metadata[name]) {\n                                    var propNode = spec.propertyName || spec.name;\n                                    var value = evaluator.evaluateNode(propNode);\n                                    if (!metadata)\n                                        metadata = {};\n                                    metadata[name] = recordEntry(value, node);\n                                }\n                            });\n                        }\n                    }\n                    if (moduleSpecifier && moduleSpecifier.kind == ts.SyntaxKind.StringLiteral) {\n                        // Ignore exports that don't have string literals as exports.\n                        // This is allowed by the syntax but will be flagged as an error by the type checker.\n                        var from = moduleSpecifier.text;\n                        var moduleExport = { from: from };\n                        if (exportClause) {\n                            moduleExport.export = exportClause.elements.map(function (spec) { return spec.propertyName ? { name: spec.propertyName.text, as: spec.name.text } :\n                                spec.name.text; });\n                        }\n                        if (!exports)\n                            exports = [];\n                        exports.push(moduleExport);\n                    }\n                    break;\n                case ts.SyntaxKind.ClassDeclaration:\n                    var classDeclaration = node;\n                    if (classDeclaration.name) {\n                        if (isExported(classDeclaration)) {\n                            var name = exportedName(classDeclaration);\n                            if (name) {\n                                if (!metadata)\n                                    metadata = {};\n                                metadata[name] = classMetadataOf(classDeclaration);\n                            }\n                        }\n                    }\n                    // Otherwise don't record metadata for the class.\n                    break;\n                case ts.SyntaxKind.TypeAliasDeclaration:\n                    var typeDeclaration = node;\n                    if (typeDeclaration.name && isExported(typeDeclaration)) {\n                        var name = exportedName(typeDeclaration);\n                        if (name) {\n                            if (!metadata)\n                                metadata = {};\n                            metadata[name] = { __symbolic: 'interface' };\n                        }\n                    }\n                    break;\n                case ts.SyntaxKind.InterfaceDeclaration:\n                    var interfaceDeclaration = node;\n                    if (interfaceDeclaration.name && isExported(interfaceDeclaration)) {\n                        var name = exportedName(interfaceDeclaration);\n                        if (name) {\n                            if (!metadata)\n                                metadata = {};\n                            metadata[name] = { __symbolic: 'interface' };\n                        }\n                    }\n                    break;\n                case ts.SyntaxKind.FunctionDeclaration:\n                    // Record functions that return a single value. Record the parameter\n                    // names substitution will be performed by the StaticReflector.\n                    var functionDeclaration = node;\n                    if (isExported(functionDeclaration) && functionDeclaration.name) {\n                        var name = exportedName(functionDeclaration);\n                        var maybeFunc = maybeGetSimpleFunction(functionDeclaration);\n                        if (name) {\n                            if (!metadata)\n                                metadata = {};\n                            metadata[name] =\n                                maybeFunc ? recordEntry(maybeFunc.func, node) : { __symbolic: 'function' };\n                        }\n                    }\n                    break;\n                case ts.SyntaxKind.EnumDeclaration:\n                    var enumDeclaration = node;\n                    if (isExported(enumDeclaration)) {\n                        var enumValueHolder = {};\n                        var enumName = exportedName(enumDeclaration);\n                        var nextDefaultValue = 0;\n                        var writtenMembers = 0;\n                        try {\n                            for (var _a = __values(enumDeclaration.members), _b = _a.next(); !_b.done; _b = _a.next()) {\n                                var member = _b.value;\n                                var enumValue = void 0;\n                                if (!member.initializer) {\n                                    enumValue = nextDefaultValue;\n                                }\n                                else {\n                                    enumValue = evaluator.evaluateNode(member.initializer);\n                                }\n                                var name = undefined;\n                                if (member.name.kind == ts.SyntaxKind.Identifier) {\n                                    var identifier = member.name;\n                                    name = identifier.text;\n                                    enumValueHolder[name] = enumValue;\n                                    writtenMembers++;\n                                }\n                                if (typeof enumValue === 'number') {\n                                    nextDefaultValue = enumValue + 1;\n                                }\n                                else if (name) {\n                                    nextDefaultValue = {\n                                        __symbolic: 'binary',\n                                        operator: '+',\n                                        left: {\n                                            __symbolic: 'select',\n                                            expression: recordEntry({ __symbolic: 'reference', name: enumName }, node), name: name\n                                        }\n                                    };\n                                }\n                                else {\n                                    nextDefaultValue =\n                                        recordEntry(errorSym('Unsupported enum member name', member.name), node);\n                                }\n                            }\n                        }\n                        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                        finally {\n                            try {\n                                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                            }\n                            finally { if (e_3) throw e_3.error; }\n                        }\n                        if (writtenMembers) {\n                            if (enumName) {\n                                if (!metadata)\n                                    metadata = {};\n                                metadata[enumName] = recordEntry(enumValueHolder, node);\n                            }\n                        }\n                    }\n                    break;\n                case ts.SyntaxKind.VariableStatement:\n                    var variableStatement = node;\n                    var _loop_1 = function (variableDeclaration) {\n                        if (variableDeclaration.name.kind == ts.SyntaxKind.Identifier) {\n                            var nameNode = variableDeclaration.name;\n                            var varValue = void 0;\n                            if (variableDeclaration.initializer) {\n                                varValue = evaluator.evaluateNode(variableDeclaration.initializer);\n                            }\n                            else {\n                                varValue = recordEntry(errorSym('Variable not initialized', nameNode), nameNode);\n                            }\n                            var exported = false;\n                            if (isExport(variableStatement) || isExport(variableDeclaration) ||\n                                isExportedIdentifier(nameNode)) {\n                                var name = exportedIdentifierName(nameNode);\n                                if (name) {\n                                    if (!metadata)\n                                        metadata = {};\n                                    metadata[name] = recordEntry(varValue, node);\n                                }\n                                exported = true;\n                            }\n                            if (typeof varValue == 'string' || typeof varValue == 'number' ||\n                                typeof varValue == 'boolean') {\n                                locals.define(nameNode.text, varValue);\n                                if (exported) {\n                                    locals.defineReference(nameNode.text, { __symbolic: 'reference', name: nameNode.text });\n                                }\n                            }\n                            else if (!exported) {\n                                if (varValue && !isMetadataError$1(varValue)) {\n                                    locals.define(nameNode.text, recordEntry(varValue, node));\n                                }\n                                else {\n                                    locals.define(nameNode.text, recordEntry(errorSym('Reference to a local symbol', nameNode, { name: nameNode.text }), node));\n                                }\n                            }\n                        }\n                        else {\n                            // Destructuring (or binding) declarations are not supported,\n                            // var {<identifier>[, <identifier>]+} = <expression>;\n                            //   or\n                            // var [<identifier>[, <identifier}+] = <expression>;\n                            // are not supported.\n                            var report_1 = function (nameNode) {\n                                switch (nameNode.kind) {\n                                    case ts.SyntaxKind.Identifier:\n                                        var name = nameNode;\n                                        var varValue = errorSym('Destructuring not supported', name);\n                                        locals.define(name.text, varValue);\n                                        if (isExport(node)) {\n                                            if (!metadata)\n                                                metadata = {};\n                                            metadata[name.text] = varValue;\n                                        }\n                                        break;\n                                    case ts.SyntaxKind.BindingElement:\n                                        var bindingElement = nameNode;\n                                        report_1(bindingElement.name);\n                                        break;\n                                    case ts.SyntaxKind.ObjectBindingPattern:\n                                    case ts.SyntaxKind.ArrayBindingPattern:\n                                        var bindings = nameNode;\n                                        bindings.elements.forEach(report_1);\n                                        break;\n                                }\n                            };\n                            report_1(variableDeclaration.name);\n                        }\n                    };\n                    try {\n                        for (var _d = __values(variableStatement.declarationList.declarations), _e = _d.next(); !_e.done; _e = _d.next()) {\n                            var variableDeclaration = _e.value;\n                            _loop_1(variableDeclaration);\n                        }\n                    }\n                    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                    finally {\n                        try {\n                            if (_e && !_e.done && (_f = _d.return)) _f.call(_d);\n                        }\n                        finally { if (e_4) throw e_4.error; }\n                    }\n                    break;\n            }\n            var e_3, _c, e_4, _f;\n        });\n        if (metadata || exports) {\n            if (!metadata)\n                metadata = {};\n            else if (strict) {\n                validateMetadata(sourceFile, nodeMap, metadata);\n            }\n            var result = {\n                __symbolic: 'module',\n                version: this.options.version || METADATA_VERSION, metadata: metadata\n            };\n            if (sourceFile.moduleName)\n                result.importAs = sourceFile.moduleName;\n            if (exports)\n                result.exports = exports;\n            return result;\n        }\n    };\n    return MetadataCollector;\n}());\n// This will throw if the metadata entry given contains an error node.\nfunction validateMetadata(sourceFile, nodeMap, metadata) {\n    var locals = new Set(['Array', 'Object', 'Set', 'Map', 'string', 'number', 'any']);\n    function validateExpression(expression) {\n        if (!expression) {\n            return;\n        }\n        else if (Array.isArray(expression)) {\n            expression.forEach(validateExpression);\n        }\n        else if (typeof expression === 'object' && !expression.hasOwnProperty('__symbolic')) {\n            Object.getOwnPropertyNames(expression).forEach(function (v) { return validateExpression(expression[v]); });\n        }\n        else if (isMetadataError$1(expression)) {\n            reportError(expression);\n        }\n        else if (isMetadataGlobalReferenceExpression(expression)) {\n            if (!locals.has(expression.name)) {\n                var reference = metadata[expression.name];\n                if (reference) {\n                    validateExpression(reference);\n                }\n            }\n        }\n        else if (isFunctionMetadata(expression)) {\n            validateFunction(expression);\n        }\n        else if (isMetadataSymbolicExpression(expression)) {\n            switch (expression.__symbolic) {\n                case 'binary':\n                    var binaryExpression = expression;\n                    validateExpression(binaryExpression.left);\n                    validateExpression(binaryExpression.right);\n                    break;\n                case 'call':\n                case 'new':\n                    var callExpression = expression;\n                    validateExpression(callExpression.expression);\n                    if (callExpression.arguments)\n                        callExpression.arguments.forEach(validateExpression);\n                    break;\n                case 'index':\n                    var indexExpression = expression;\n                    validateExpression(indexExpression.expression);\n                    validateExpression(indexExpression.index);\n                    break;\n                case 'pre':\n                    var prefixExpression = expression;\n                    validateExpression(prefixExpression.operand);\n                    break;\n                case 'select':\n                    var selectExpression = expression;\n                    validateExpression(selectExpression.expression);\n                    break;\n                case 'spread':\n                    var spreadExpression = expression;\n                    validateExpression(spreadExpression.expression);\n                    break;\n                case 'if':\n                    var ifExpression = expression;\n                    validateExpression(ifExpression.condition);\n                    validateExpression(ifExpression.elseExpression);\n                    validateExpression(ifExpression.thenExpression);\n                    break;\n            }\n        }\n    }\n    function validateMember(classData, member) {\n        if (member.decorators) {\n            member.decorators.forEach(validateExpression);\n        }\n        if (isMethodMetadata(member) && member.parameterDecorators) {\n            member.parameterDecorators.forEach(validateExpression);\n        }\n        // Only validate parameters of classes for which we know that are used with our DI\n        if (classData.decorators && isConstructorMetadata(member) && member.parameters) {\n            member.parameters.forEach(validateExpression);\n        }\n    }\n    function validateClass(classData) {\n        if (classData.decorators) {\n            classData.decorators.forEach(validateExpression);\n        }\n        if (classData.members) {\n            Object.getOwnPropertyNames(classData.members)\n                .forEach(function (name) { return classData.members[name].forEach(function (m) { return validateMember(classData, m); }); });\n        }\n        if (classData.statics) {\n            Object.getOwnPropertyNames(classData.statics).forEach(function (name) {\n                var staticMember = classData.statics[name];\n                if (isFunctionMetadata(staticMember)) {\n                    validateExpression(staticMember.value);\n                }\n                else {\n                    validateExpression(staticMember);\n                }\n            });\n        }\n    }\n    function validateFunction(functionDeclaration) {\n        if (functionDeclaration.value) {\n            var oldLocals = locals;\n            if (functionDeclaration.parameters) {\n                locals = new Set(oldLocals.values());\n                if (functionDeclaration.parameters)\n                    functionDeclaration.parameters.forEach(function (n) { return locals.add(n); });\n            }\n            validateExpression(functionDeclaration.value);\n            locals = oldLocals;\n        }\n    }\n    function shouldReportNode(node) {\n        if (node) {\n            var nodeStart = node.getStart();\n            return !(node.pos != nodeStart &&\n                sourceFile.text.substring(node.pos, nodeStart).indexOf('@dynamic') >= 0);\n        }\n        return true;\n    }\n    function reportError(error) {\n        var node = nodeMap.get(error);\n        if (shouldReportNode(node)) {\n            var lineInfo = error.line != undefined ?\n                error.character != undefined ? \":\" + (error.line + 1) + \":\" + (error.character + 1) :\n                    \":\" + (error.line + 1) :\n                '';\n            throw new Error(\"\" + sourceFile.fileName + lineInfo + \": Metadata collected contains an error that will be reported at runtime: \" + expandedMessage$1(error) + \".\\n  \" + JSON.stringify(error));\n        }\n    }\n    Object.getOwnPropertyNames(metadata).forEach(function (name) {\n        var entry = metadata[name];\n        try {\n            if (isClassMetadata(entry)) {\n                validateClass(entry);\n            }\n        }\n        catch (e) {\n            var node = nodeMap.get(entry);\n            if (shouldReportNode(node)) {\n                if (node) {\n                    var _a = sourceFile.getLineAndCharacterOfPosition(node.getStart()), line = _a.line, character = _a.character;\n                    throw new Error(sourceFile.fileName + \":\" + (line + 1) + \":\" + (character + 1) + \": Error encountered in metadata generated for exported symbol '\" + name + \"': \\n \" + e.message);\n                }\n                throw new Error(\"Error encountered in metadata generated for exported symbol \" + name + \": \\n \" + e.message);\n            }\n        }\n    });\n}\n// Collect parameter names from a function.\nfunction namesOf(parameters) {\n    var result = [];\n    function addNamesOf(name) {\n        if (name.kind == ts.SyntaxKind.Identifier) {\n            var identifier = name;\n            result.push(identifier.text);\n        }\n        else {\n            var bindingPattern = name;\n            try {\n                for (var _a = __values(bindingPattern.elements), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var element = _b.value;\n                    var name_3 = element.name;\n                    if (name_3) {\n                        addNamesOf(name_3);\n                    }\n                }\n            }\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_5) throw e_5.error; }\n            }\n        }\n        var e_5, _c;\n    }\n    try {\n        for (var parameters_2 = __values(parameters), parameters_2_1 = parameters_2.next(); !parameters_2_1.done; parameters_2_1 = parameters_2.next()) {\n            var parameter = parameters_2_1.value;\n            addNamesOf(parameter.name);\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (parameters_2_1 && !parameters_2_1.done && (_a = parameters_2.return)) _a.call(parameters_2);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n    return result;\n    var e_6, _a;\n}\nfunction expandedMessage$1(error) {\n    switch (error.message) {\n        case 'Reference to non-exported class':\n            if (error.context && error.context.className) {\n                return \"Reference to a non-exported class \" + error.context.className + \". Consider exporting the class\";\n            }\n            break;\n        case 'Variable not initialized':\n            return 'Only initialized variables and constants can be referenced because the value of this variable is needed by the template compiler';\n        case 'Destructuring not supported':\n            return 'Referencing an exported destructured variable or constant is not supported by the template compiler. Consider simplifying this to avoid destructuring';\n        case 'Could not resolve type':\n            if (error.context && error.context.typeName) {\n                return \"Could not resolve type \" + error.context.typeName;\n            }\n            break;\n        case 'Function call not supported':\n            var prefix = error.context && error.context.name ? \"Calling function '\" + error.context.name + \"', f\" : 'F';\n            return prefix +\n                'unction calls are not supported. Consider replacing the function or lambda with a reference to an exported function';\n        case 'Reference to a local symbol':\n            if (error.context && error.context.name) {\n                return \"Reference to a local (non-exported) symbol '\" + error.context.name + \"'. Consider exporting the symbol\";\n            }\n    }\n    return error.message;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\n\n\n\nvar EmitFlags;\n(function (EmitFlags) {\n    EmitFlags[EmitFlags[\"DTS\"] = 1] = \"DTS\";\n    EmitFlags[EmitFlags[\"JS\"] = 2] = \"JS\";\n    EmitFlags[EmitFlags[\"Metadata\"] = 4] = \"Metadata\";\n    EmitFlags[EmitFlags[\"I18nBundle\"] = 8] = \"I18nBundle\";\n    EmitFlags[EmitFlags[\"Codegen\"] = 16] = \"Codegen\";\n    EmitFlags[EmitFlags[\"Default\"] = 19] = \"Default\";\n    EmitFlags[EmitFlags[\"All\"] = 31] = \"All\";\n})(EmitFlags || (EmitFlags = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar DTS$2 = /\\.d\\.ts$/;\n\n// Note: This is an internal property in TypeScript. Use it only for assertions and tests.\n\n\n\n\n\n\n/**\n * Converts a ng.Diagnostic into a ts.Diagnostic.\n * This looses some information, and also uses an incomplete object as `file`.\n *\n * I.e. only use this where the API allows only a ts.Diagnostic.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction createMetadataReaderCache() {\n    var data = new Map();\n    return { data: data };\n}\nfunction readMetadata(filePath, host, cache) {\n    var metadatas = cache && cache.data.get(filePath);\n    if (metadatas) {\n        return metadatas;\n    }\n    if (host.fileExists(filePath)) {\n        // If the file doesn't exists then we cannot return metadata for the file.\n        // This will occur if the user referenced a declared module for which no file\n        // exists for the module (i.e. jQuery or angularjs).\n        if (DTS$2.test(filePath)) {\n            metadatas = readMetadataFile(host, filePath);\n            if (!metadatas) {\n                // If there is a .d.ts file but no metadata file we need to produce a\n                // metadata from the .d.ts file as metadata files capture reexports\n                // (starting with v3).\n                metadatas = [upgradeMetadataWithDtsData(host, { '__symbolic': 'module', 'version': 1, 'metadata': {} }, filePath)];\n            }\n        }\n        else {\n            var metadata = host.getSourceFileMetadata(filePath);\n            metadatas = metadata ? [metadata] : [];\n        }\n    }\n    if (cache && (!host.cacheMetadata || host.cacheMetadata(filePath))) {\n        cache.data.set(filePath, metadatas);\n    }\n    return metadatas;\n}\nfunction readMetadataFile(host, dtsFilePath) {\n    var metadataPath = dtsFilePath.replace(DTS$2, '.metadata.json');\n    if (!host.fileExists(metadataPath)) {\n        return undefined;\n    }\n    try {\n        var metadataOrMetadatas = JSON.parse(host.readFile(metadataPath));\n        var metadatas = metadataOrMetadatas ?\n            (Array.isArray(metadataOrMetadatas) ? metadataOrMetadatas : [metadataOrMetadatas]) :\n            [];\n        if (metadatas.length) {\n            var maxMetadata = metadatas.reduce(function (p, c) { return p.version > c.version ? p : c; });\n            if (maxMetadata.version < METADATA_VERSION) {\n                metadatas.push(upgradeMetadataWithDtsData(host, maxMetadata, dtsFilePath));\n            }\n        }\n        return metadatas;\n    }\n    catch (e) {\n        console.error(\"Failed to read JSON file \" + metadataPath);\n        throw e;\n    }\n}\nfunction upgradeMetadataWithDtsData(host, oldMetadata, dtsFilePath) {\n    // patch v1 to v3 by adding exports and the `extends` clause.\n    // patch v3 to v4 by adding `interface` symbols for TypeAlias\n    var newMetadata = {\n        '__symbolic': 'module',\n        'version': METADATA_VERSION,\n        'metadata': __assign({}, oldMetadata.metadata),\n    };\n    if (oldMetadata.exports) {\n        newMetadata.exports = oldMetadata.exports;\n    }\n    if (oldMetadata.importAs) {\n        newMetadata.importAs = oldMetadata.importAs;\n    }\n    if (oldMetadata.origins) {\n        newMetadata.origins = oldMetadata.origins;\n    }\n    var dtsMetadata = host.getSourceFileMetadata(dtsFilePath);\n    if (dtsMetadata) {\n        for (var prop in dtsMetadata.metadata) {\n            if (!newMetadata.metadata[prop]) {\n                newMetadata.metadata[prop] = dtsMetadata.metadata[prop];\n            }\n        }\n        if (dtsMetadata['importAs'])\n            newMetadata['importAs'] = dtsMetadata['importAs'];\n        // Only copy exports from exports from metadata prior to version 3.\n        // Starting with version 3 the collector began collecting exports and\n        // this should be redundant. Also, with bundler will rewrite the exports\n        // which will hoist the exports from modules referenced indirectly causing\n        // the imports to be different than the .d.ts files and using the .d.ts file\n        // exports would cause the StaticSymbolResolver to redirect symbols to the\n        // incorrect location.\n        if ((!oldMetadata.version || oldMetadata.version < 3) && dtsMetadata.exports) {\n            newMetadata.exports = dtsMetadata.exports;\n        }\n    }\n    return newMetadata;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/*\n\nThe API from compiler-cli that language-service can see.\nIt is important that none the exported modules require anything other than\nAngular modules and Typescript as this will indirectly add a dependency\nto the language service.\n\n*/\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * The kind of diagnostic message.\n *\n * @experimental\n */\nvar DiagnosticKind$1;\n(function (DiagnosticKind) {\n    DiagnosticKind[DiagnosticKind[\"Error\"] = 0] = \"Error\";\n    DiagnosticKind[DiagnosticKind[\"Warning\"] = 1] = \"Warning\";\n})(DiagnosticKind$1 || (DiagnosticKind$1 = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction isParseSourceSpan(value) {\n    return value && !!value.start;\n}\nfunction spanOf$3(span) {\n    if (!span)\n        return undefined;\n    if (isParseSourceSpan(span)) {\n        return { start: span.start.offset, end: span.end.offset };\n    }\n    else {\n        if (span.endSourceSpan) {\n            return { start: span.sourceSpan.start.offset, end: span.endSourceSpan.end.offset };\n        }\n        else if (span.children && span.children.length) {\n            return {\n                start: span.sourceSpan.start.offset,\n                end: spanOf$3(span.children[span.children.length - 1]).end\n            };\n        }\n        return { start: span.sourceSpan.start.offset, end: span.sourceSpan.end.offset };\n    }\n}\nfunction inSpan(position, span, exclusive) {\n    return span != null && (exclusive ? position >= span.start && position < span.end :\n        position >= span.start && position <= span.end);\n}\nfunction offsetSpan$1(span, amount) {\n    return { start: span.start + amount, end: span.end + amount };\n}\nfunction isNarrower(spanA, spanB) {\n    return spanA.start >= spanB.start && spanA.end <= spanB.end;\n}\nfunction hasTemplateReference$1(type) {\n    if (type.diDeps) {\n        try {\n            for (var _a = __values(type.diDeps), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var diDep = _b.value;\n                if (diDep.token && diDep.token.identifier &&\n                    identifierName(diDep.token.identifier) == 'TemplateRef')\n                    return true;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    return false;\n    var e_1, _c;\n}\nfunction getSelectors(info) {\n    var map = new Map();\n    var selectors = flatten$1(info.directives.map(function (directive) {\n        var selectors = CssSelector.parse(directive.selector);\n        selectors.forEach(function (selector) { return map.set(selector, directive); });\n        return selectors;\n    }));\n    return { selectors: selectors, map: map };\n}\nfunction flatten$1(a) {\n    return (_a = []).concat.apply(_a, __spread(a));\n    var _a;\n}\nfunction removeSuffix(value, suffix) {\n    if (value.endsWith(suffix))\n        return value.substring(0, value.length - suffix.length);\n    return value;\n}\nfunction uniqueByName(elements) {\n    if (elements) {\n        var result = [];\n        var set = new Set();\n        try {\n            for (var elements_1 = __values(elements), elements_1_1 = elements_1.next(); !elements_1_1.done; elements_1_1 = elements_1.next()) {\n                var element = elements_1_1.value;\n                if (!set.has(element.name)) {\n                    set.add(element.name);\n                    result.push(element);\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (elements_1_1 && !elements_1_1.done && (_a = elements_1.return)) _a.call(elements_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return result;\n    }\n    var e_2, _a;\n}\n\nfunction diagnosticInfoFromTemplateInfo(info) {\n    return {\n        fileName: info.fileName,\n        offset: info.template.span.start,\n        query: info.template.query,\n        members: info.template.members,\n        htmlAst: info.htmlAst,\n        templateAst: info.templateAst\n    };\n}\nfunction findTemplateAstAt(ast, position, allowWidening) {\n    if (allowWidening === void 0) { allowWidening = false; }\n    var path$$1 = [];\n    var visitor = new /** @class */ (function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.visit = function (ast, context) {\n            var span = spanOf$3(ast);\n            if (inSpan(position, span)) {\n                var len = path$$1.length;\n                if (!len || allowWidening || isNarrower(span, spanOf$3(path$$1[len - 1]))) {\n                    path$$1.push(ast);\n                }\n            }\n            else {\n                // Returning a value here will result in the children being skipped.\n                return true;\n            }\n        };\n        class_1.prototype.visitEmbeddedTemplate = function (ast, context) {\n            return this.visitChildren(context, function (visit) {\n                // Ignore reference, variable and providers\n                visit(ast.attrs);\n                visit(ast.directives);\n                visit(ast.children);\n            });\n        };\n        class_1.prototype.visitElement = function (ast, context) {\n            return this.visitChildren(context, function (visit) {\n                // Ingnore providers\n                visit(ast.attrs);\n                visit(ast.inputs);\n                visit(ast.outputs);\n                visit(ast.references);\n                visit(ast.directives);\n                visit(ast.children);\n            });\n        };\n        class_1.prototype.visitDirective = function (ast, context) {\n            // Ignore the host properties of a directive\n            var result = this.visitChildren(context, function (visit) { visit(ast.inputs); });\n            // We never care about the diretive itself, just its inputs.\n            if (path$$1[path$$1.length - 1] == ast) {\n                path$$1.pop();\n            }\n            return result;\n        };\n        return class_1;\n    }(RecursiveTemplateAstVisitor));\n    templateVisitAll(visitor, ast);\n    return new AstPath(path$$1, position);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction findAstAt(ast, position, excludeEmpty) {\n    if (excludeEmpty === void 0) { excludeEmpty = false; }\n    var path$$1 = [];\n    var visitor = new /** @class */ (function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.visit = function (ast) {\n            if ((!excludeEmpty || ast.span.start < ast.span.end) && inSpan(position, ast.span)) {\n                path$$1.push(ast);\n                visitAstChildren(ast, this);\n            }\n        };\n        return class_1;\n    }(NullAstVisitor));\n    // We never care about the ASTWithSource node and its visit() method calls its ast's visit so\n    // the visit() method above would never see it.\n    if (ast instanceof ASTWithSource) {\n        ast = ast.ast;\n    }\n    visitor.visit(ast);\n    return new AstPath(path$$1, position);\n}\nfunction getExpressionCompletions(scope, ast, position, query) {\n    var path$$1 = findAstAt(ast, position);\n    if (path$$1.empty)\n        return undefined;\n    var tail = path$$1.tail;\n    var result = scope;\n    function getType(ast) { return new AstType(scope, query, {}).getType(ast); }\n    // If the completion request is in a not in a pipe or property access then the global scope\n    // (that is the scope of the implicit receiver) is the right scope as the user is typing the\n    // beginning of an expression.\n    tail.visit({\n        visitBinary: function (ast) { },\n        visitChain: function (ast) { },\n        visitConditional: function (ast) { },\n        visitFunctionCall: function (ast) { },\n        visitImplicitReceiver: function (ast) { },\n        visitInterpolation: function (ast) { result = undefined; },\n        visitKeyedRead: function (ast) { },\n        visitKeyedWrite: function (ast) { },\n        visitLiteralArray: function (ast) { },\n        visitLiteralMap: function (ast) { },\n        visitLiteralPrimitive: function (ast) { },\n        visitMethodCall: function (ast) { },\n        visitPipe: function (ast) {\n            if (position >= ast.exp.span.end &&\n                (!ast.args || !ast.args.length || position < ast.args[0].span.start)) {\n                // We are in a position a pipe name is expected.\n                result = query.getPipes();\n            }\n        },\n        visitPrefixNot: function (ast) { },\n        visitNonNullAssert: function (ast) { },\n        visitPropertyRead: function (ast) {\n            var receiverType = getType(ast.receiver);\n            result = receiverType ? receiverType.members() : scope;\n        },\n        visitPropertyWrite: function (ast) {\n            var receiverType = getType(ast.receiver);\n            result = receiverType ? receiverType.members() : scope;\n        },\n        visitQuote: function (ast) {\n            // For a quote, return the members of any (if there are any).\n            result = query.getBuiltinType(BuiltinType$1.Any).members();\n        },\n        visitSafeMethodCall: function (ast) {\n            var receiverType = getType(ast.receiver);\n            result = receiverType ? receiverType.members() : scope;\n        },\n        visitSafePropertyRead: function (ast) {\n            var receiverType = getType(ast.receiver);\n            result = receiverType ? receiverType.members() : scope;\n        },\n    });\n    return result && result.values();\n}\nfunction getExpressionSymbol(scope, ast, position, query) {\n    var path$$1 = findAstAt(ast, position, /* excludeEmpty */ true);\n    if (path$$1.empty)\n        return undefined;\n    var tail = path$$1.tail;\n    function getType(ast) { return new AstType(scope, query, {}).getType(ast); }\n    var symbol = undefined;\n    var span = undefined;\n    // If the completion request is in a not in a pipe or property access then the global scope\n    // (that is the scope of the implicit receiver) is the right scope as the user is typing the\n    // beginning of an expression.\n    tail.visit({\n        visitBinary: function (ast) { },\n        visitChain: function (ast) { },\n        visitConditional: function (ast) { },\n        visitFunctionCall: function (ast) { },\n        visitImplicitReceiver: function (ast) { },\n        visitInterpolation: function (ast) { },\n        visitKeyedRead: function (ast) { },\n        visitKeyedWrite: function (ast) { },\n        visitLiteralArray: function (ast) { },\n        visitLiteralMap: function (ast) { },\n        visitLiteralPrimitive: function (ast) { },\n        visitMethodCall: function (ast) {\n            var receiverType = getType(ast.receiver);\n            symbol = receiverType && receiverType.members().get(ast.name);\n            span = ast.span;\n        },\n        visitPipe: function (ast) {\n            if (position >= ast.exp.span.end &&\n                (!ast.args || !ast.args.length || position < ast.args[0].span.start)) {\n                // We are in a position a pipe name is expected.\n                var pipes = query.getPipes();\n                if (pipes) {\n                    symbol = pipes.get(ast.name);\n                    span = ast.span;\n                }\n            }\n        },\n        visitPrefixNot: function (ast) { },\n        visitNonNullAssert: function (ast) { },\n        visitPropertyRead: function (ast) {\n            var receiverType = getType(ast.receiver);\n            symbol = receiverType && receiverType.members().get(ast.name);\n            span = ast.span;\n        },\n        visitPropertyWrite: function (ast) {\n            var receiverType = getType(ast.receiver);\n            symbol = receiverType && receiverType.members().get(ast.name);\n            span = ast.span;\n        },\n        visitQuote: function (ast) { },\n        visitSafeMethodCall: function (ast) {\n            var receiverType = getType(ast.receiver);\n            symbol = receiverType && receiverType.members().get(ast.name);\n            span = ast.span;\n        },\n        visitSafePropertyRead: function (ast) {\n            var receiverType = getType(ast.receiver);\n            symbol = receiverType && receiverType.members().get(ast.name);\n            span = ast.span;\n        },\n    });\n    if (symbol && span) {\n        return { symbol: symbol, span: span };\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar values = [\n    'ID',\n    'CDATA',\n    'NAME',\n    ['ltr', 'rtl'],\n    ['rect', 'circle', 'poly', 'default'],\n    'NUMBER',\n    ['nohref'],\n    ['ismap'],\n    ['declare'],\n    ['DATA', 'REF', 'OBJECT'],\n    ['GET', 'POST'],\n    'IDREF',\n    ['TEXT', 'PASSWORD', 'CHECKBOX', 'RADIO', 'SUBMIT', 'RESET', 'FILE', 'HIDDEN', 'IMAGE', 'BUTTON'],\n    ['checked'],\n    ['disabled'],\n    ['readonly'],\n    ['multiple'],\n    ['selected'],\n    ['button', 'submit', 'reset'],\n    ['void', 'above', 'below', 'hsides', 'lhs', 'rhs', 'vsides', 'box', 'border'],\n    ['none', 'groups', 'rows', 'cols', 'all'],\n    ['left', 'center', 'right', 'justify', 'char'],\n    ['top', 'middle', 'bottom', 'baseline'],\n    'IDREFS',\n    ['row', 'col', 'rowgroup', 'colgroup'],\n    ['defer']\n];\nvar groups = [\n    { id: 0 },\n    {\n        onclick: 1,\n        ondblclick: 1,\n        onmousedown: 1,\n        onmouseup: 1,\n        onmouseover: 1,\n        onmousemove: 1,\n        onmouseout: 1,\n        onkeypress: 1,\n        onkeydown: 1,\n        onkeyup: 1\n    },\n    { lang: 2, dir: 3 },\n    { onload: 1, onunload: 1 },\n    { name: 1 },\n    { href: 1 },\n    { type: 1 },\n    { alt: 1 },\n    { tabindex: 5 },\n    { media: 1 },\n    { nohref: 6 },\n    { usemap: 1 },\n    { src: 1 },\n    { onfocus: 1, onblur: 1 },\n    { charset: 1 },\n    { declare: 8, classid: 1, codebase: 1, data: 1, codetype: 1, archive: 1, standby: 1 },\n    { title: 1 },\n    { value: 1 },\n    { cite: 1 },\n    { datetime: 1 },\n    { accept: 1 },\n    { shape: 4, coords: 1 },\n    { for: 11\n    },\n    { action: 1, method: 10, enctype: 1, onsubmit: 1, onreset: 1, 'accept-charset': 1 },\n    { valuetype: 9 },\n    { longdesc: 1 },\n    { width: 1 },\n    { disabled: 14 },\n    { readonly: 15, onselect: 1 },\n    { accesskey: 1 },\n    { size: 5, multiple: 16 },\n    { onchange: 1 },\n    { label: 1 },\n    { selected: 17 },\n    { type: 12, checked: 13, size: 1, maxlength: 5 },\n    { rows: 5, cols: 5 },\n    { type: 18 },\n    { height: 1 },\n    { summary: 1, border: 1, frame: 19, rules: 20, cellspacing: 1, cellpadding: 1, datapagesize: 1 },\n    { align: 21, char: 1, charoff: 1, valign: 22 },\n    { span: 5 },\n    { abbr: 1, axis: 1, headers: 23, scope: 24, rowspan: 5, colspan: 5 },\n    { profile: 1 },\n    { 'http-equiv': 2, name: 2, content: 1, scheme: 1 },\n    { class: 1, style: 1 },\n    { hreflang: 2, rel: 1, rev: 1 },\n    { ismap: 7 },\n    { defer: 25, event: 1, for: 1 }\n];\nvar elements = {\n    TT: [0, 1, 2, 16, 44],\n    I: [0, 1, 2, 16, 44],\n    B: [0, 1, 2, 16, 44],\n    BIG: [0, 1, 2, 16, 44],\n    SMALL: [0, 1, 2, 16, 44],\n    EM: [0, 1, 2, 16, 44],\n    STRONG: [0, 1, 2, 16, 44],\n    DFN: [0, 1, 2, 16, 44],\n    CODE: [0, 1, 2, 16, 44],\n    SAMP: [0, 1, 2, 16, 44],\n    KBD: [0, 1, 2, 16, 44],\n    VAR: [0, 1, 2, 16, 44],\n    CITE: [0, 1, 2, 16, 44],\n    ABBR: [0, 1, 2, 16, 44],\n    ACRONYM: [0, 1, 2, 16, 44],\n    SUB: [0, 1, 2, 16, 44],\n    SUP: [0, 1, 2, 16, 44],\n    SPAN: [0, 1, 2, 16, 44],\n    BDO: [0, 2, 16, 44],\n    BR: [0, 16, 44],\n    BODY: [0, 1, 2, 3, 16, 44],\n    ADDRESS: [0, 1, 2, 16, 44],\n    DIV: [0, 1, 2, 16, 44],\n    A: [0, 1, 2, 4, 5, 6, 8, 13, 14, 16, 21, 29, 44, 45],\n    MAP: [0, 1, 2, 4, 16, 44],\n    AREA: [0, 1, 2, 5, 7, 8, 10, 13, 16, 21, 29, 44],\n    LINK: [0, 1, 2, 5, 6, 9, 14, 16, 44, 45],\n    IMG: [0, 1, 2, 4, 7, 11, 12, 16, 25, 26, 37, 44, 46],\n    OBJECT: [0, 1, 2, 4, 6, 8, 11, 15, 16, 26, 37, 44],\n    PARAM: [0, 4, 6, 17, 24],\n    HR: [0, 1, 2, 16, 44],\n    P: [0, 1, 2, 16, 44],\n    H1: [0, 1, 2, 16, 44],\n    H2: [0, 1, 2, 16, 44],\n    H3: [0, 1, 2, 16, 44],\n    H4: [0, 1, 2, 16, 44],\n    H5: [0, 1, 2, 16, 44],\n    H6: [0, 1, 2, 16, 44],\n    PRE: [0, 1, 2, 16, 44],\n    Q: [0, 1, 2, 16, 18, 44],\n    BLOCKQUOTE: [0, 1, 2, 16, 18, 44],\n    INS: [0, 1, 2, 16, 18, 19, 44],\n    DEL: [0, 1, 2, 16, 18, 19, 44],\n    DL: [0, 1, 2, 16, 44],\n    DT: [0, 1, 2, 16, 44],\n    DD: [0, 1, 2, 16, 44],\n    OL: [0, 1, 2, 16, 44],\n    UL: [0, 1, 2, 16, 44],\n    LI: [0, 1, 2, 16, 44],\n    FORM: [0, 1, 2, 4, 16, 20, 23, 44],\n    LABEL: [0, 1, 2, 13, 16, 22, 29, 44],\n    INPUT: [0, 1, 2, 4, 7, 8, 11, 12, 13, 16, 17, 20, 27, 28, 29, 31, 34, 44, 46],\n    SELECT: [0, 1, 2, 4, 8, 13, 16, 27, 30, 31, 44],\n    OPTGROUP: [0, 1, 2, 16, 27, 32, 44],\n    OPTION: [0, 1, 2, 16, 17, 27, 32, 33, 44],\n    TEXTAREA: [0, 1, 2, 4, 8, 13, 16, 27, 28, 29, 31, 35, 44],\n    FIELDSET: [0, 1, 2, 16, 44],\n    LEGEND: [0, 1, 2, 16, 29, 44],\n    BUTTON: [0, 1, 2, 4, 8, 13, 16, 17, 27, 29, 36, 44],\n    TABLE: [0, 1, 2, 16, 26, 38, 44],\n    CAPTION: [0, 1, 2, 16, 44],\n    COLGROUP: [0, 1, 2, 16, 26, 39, 40, 44],\n    COL: [0, 1, 2, 16, 26, 39, 40, 44],\n    THEAD: [0, 1, 2, 16, 39, 44],\n    TBODY: [0, 1, 2, 16, 39, 44],\n    TFOOT: [0, 1, 2, 16, 39, 44],\n    TR: [0, 1, 2, 16, 39, 44],\n    TH: [0, 1, 2, 16, 39, 41, 44],\n    TD: [0, 1, 2, 16, 39, 41, 44],\n    HEAD: [2, 42],\n    TITLE: [2],\n    BASE: [5],\n    META: [2, 43],\n    STYLE: [2, 6, 9, 16],\n    SCRIPT: [6, 12, 14, 47],\n    NOSCRIPT: [0, 1, 2, 16, 44],\n    HTML: [2]\n};\nvar defaultAttributes = [0, 1, 2, 4];\nfunction elementNames() {\n    return Object.keys(elements).sort().map(function (v) { return v.toLowerCase(); });\n}\nfunction compose(indexes) {\n    var result = {};\n    if (indexes) {\n        try {\n            for (var indexes_1 = __values(indexes), indexes_1_1 = indexes_1.next(); !indexes_1_1.done; indexes_1_1 = indexes_1.next()) {\n                var index = indexes_1_1.value;\n                var group = groups[index];\n                for (var name_1 in group)\n                    if (group.hasOwnProperty(name_1))\n                        result[name_1] = values[group[name_1]];\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (indexes_1_1 && !indexes_1_1.done && (_a = indexes_1.return)) _a.call(indexes_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    return result;\n    var e_1, _a;\n}\nfunction attributeNames(element) {\n    return Object.keys(compose(elements[element.toUpperCase()] || defaultAttributes)).sort();\n}\n\n// This section is describes the DOM property surface of a DOM element and is derivgulp formated\n// from\n// from the SCHEMA strings from the security context information. SCHEMA is copied here because\n// it would be an unnecessary risk to allow this array to be imported from the security context\n// schema registry.\nvar SCHEMA$1 = [\n    '[Element]|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop,slot' +\n        /* added manually to avoid breaking changes */\n        ',*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored',\n    '[HTMLElement]^[Element]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate',\n    'abbr,address,article,aside,b,bdi,bdo,cite,code,dd,dfn,dt,em,figcaption,figure,footer,header,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate',\n    'media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,src,%srcObject,#volume',\n    ':svg:^[HTMLElement]|*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex',\n    ':svg:graphics^:svg:|',\n    ':svg:animation^:svg:|*begin,*end,*repeat',\n    ':svg:geometry^:svg:|',\n    ':svg:componentTransferFunction^:svg:|',\n    ':svg:gradient^:svg:|',\n    ':svg:textContent^:svg:graphics|',\n    ':svg:textPositioning^:svg:textContent|',\n    'a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,rev,search,shape,target,text,type,username',\n    'area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,search,shape,target,username',\n    'audio^media|',\n    'br^[HTMLElement]|clear',\n    'base^[HTMLElement]|href,target',\n    'body^[HTMLElement]|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink',\n    'button^[HTMLElement]|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value',\n    'canvas^[HTMLElement]|#height,#width',\n    'content^[HTMLElement]|select',\n    'dl^[HTMLElement]|!compact',\n    'datalist^[HTMLElement]|',\n    'details^[HTMLElement]|!open',\n    'dialog^[HTMLElement]|!open,returnValue',\n    'dir^[HTMLElement]|!compact',\n    'div^[HTMLElement]|align',\n    'embed^[HTMLElement]|align,height,name,src,type,width',\n    'fieldset^[HTMLElement]|!disabled,name',\n    'font^[HTMLElement]|color,face,size',\n    'form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target',\n    'frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src',\n    'frameset^[HTMLElement]|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows',\n    'hr^[HTMLElement]|align,color,!noShade,size,width',\n    'head^[HTMLElement]|',\n    'h1,h2,h3,h4,h5,h6^[HTMLElement]|align',\n    'html^[HTMLElement]|version',\n    'iframe^[HTMLElement]|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width',\n    'img^[HTMLElement]|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width',\n    'input^[HTMLElement]|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width',\n    'li^[HTMLElement]|type,#value',\n    'label^[HTMLElement]|htmlFor',\n    'legend^[HTMLElement]|align',\n    'link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type',\n    'map^[HTMLElement]|name',\n    'marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width',\n    'menu^[HTMLElement]|!compact',\n    'meta^[HTMLElement]|content,httpEquiv,name,scheme',\n    'meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value',\n    'ins,del^[HTMLElement]|cite,dateTime',\n    'ol^[HTMLElement]|!compact,!reversed,#start,type',\n    'object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width',\n    'optgroup^[HTMLElement]|!disabled,label',\n    'option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value',\n    'output^[HTMLElement]|defaultValue,%htmlFor,name,value',\n    'p^[HTMLElement]|align',\n    'param^[HTMLElement]|name,type,value,valueType',\n    'picture^[HTMLElement]|',\n    'pre^[HTMLElement]|#width',\n    'progress^[HTMLElement]|#max,#value',\n    'q,blockquote,cite^[HTMLElement]|',\n    'script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type',\n    'select^[HTMLElement]|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value',\n    'shadow^[HTMLElement]|',\n    'slot^[HTMLElement]|name',\n    'source^[HTMLElement]|media,sizes,src,srcset,type',\n    'span^[HTMLElement]|',\n    'style^[HTMLElement]|!disabled,media,type',\n    'caption^[HTMLElement]|align',\n    'th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width',\n    'col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width',\n    'table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width',\n    'tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign',\n    'tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign',\n    'template^[HTMLElement]|',\n    'textarea^[HTMLElement]|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap',\n    'title^[HTMLElement]|text',\n    'track^[HTMLElement]|!default,kind,label,src,srclang',\n    'ul^[HTMLElement]|!compact,type',\n    'unknown^[HTMLElement]|',\n    'video^media|#height,poster,#width',\n    ':svg:a^:svg:graphics|',\n    ':svg:animate^:svg:animation|',\n    ':svg:animateMotion^:svg:animation|',\n    ':svg:animateTransform^:svg:animation|',\n    ':svg:circle^:svg:geometry|',\n    ':svg:clipPath^:svg:graphics|',\n    ':svg:defs^:svg:graphics|',\n    ':svg:desc^:svg:|',\n    ':svg:discard^:svg:|',\n    ':svg:ellipse^:svg:geometry|',\n    ':svg:feBlend^:svg:|',\n    ':svg:feColorMatrix^:svg:|',\n    ':svg:feComponentTransfer^:svg:|',\n    ':svg:feComposite^:svg:|',\n    ':svg:feConvolveMatrix^:svg:|',\n    ':svg:feDiffuseLighting^:svg:|',\n    ':svg:feDisplacementMap^:svg:|',\n    ':svg:feDistantLight^:svg:|',\n    ':svg:feDropShadow^:svg:|',\n    ':svg:feFlood^:svg:|',\n    ':svg:feFuncA^:svg:componentTransferFunction|',\n    ':svg:feFuncB^:svg:componentTransferFunction|',\n    ':svg:feFuncG^:svg:componentTransferFunction|',\n    ':svg:feFuncR^:svg:componentTransferFunction|',\n    ':svg:feGaussianBlur^:svg:|',\n    ':svg:feImage^:svg:|',\n    ':svg:feMerge^:svg:|',\n    ':svg:feMergeNode^:svg:|',\n    ':svg:feMorphology^:svg:|',\n    ':svg:feOffset^:svg:|',\n    ':svg:fePointLight^:svg:|',\n    ':svg:feSpecularLighting^:svg:|',\n    ':svg:feSpotLight^:svg:|',\n    ':svg:feTile^:svg:|',\n    ':svg:feTurbulence^:svg:|',\n    ':svg:filter^:svg:|',\n    ':svg:foreignObject^:svg:graphics|',\n    ':svg:g^:svg:graphics|',\n    ':svg:image^:svg:graphics|',\n    ':svg:line^:svg:geometry|',\n    ':svg:linearGradient^:svg:gradient|',\n    ':svg:mpath^:svg:|',\n    ':svg:marker^:svg:|',\n    ':svg:mask^:svg:|',\n    ':svg:metadata^:svg:|',\n    ':svg:path^:svg:geometry|',\n    ':svg:pattern^:svg:|',\n    ':svg:polygon^:svg:geometry|',\n    ':svg:polyline^:svg:geometry|',\n    ':svg:radialGradient^:svg:gradient|',\n    ':svg:rect^:svg:geometry|',\n    ':svg:svg^:svg:graphics|#currentScale,#zoomAndPan',\n    ':svg:script^:svg:|type',\n    ':svg:set^:svg:animation|',\n    ':svg:stop^:svg:|',\n    ':svg:style^:svg:|!disabled,media,title,type',\n    ':svg:switch^:svg:graphics|',\n    ':svg:symbol^:svg:|',\n    ':svg:tspan^:svg:textPositioning|',\n    ':svg:text^:svg:textPositioning|',\n    ':svg:textPath^:svg:textContent|',\n    ':svg:title^:svg:|',\n    ':svg:use^:svg:graphics|',\n    ':svg:view^:svg:|#zoomAndPan',\n    'data^[HTMLElement]|value',\n    'keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name',\n    'menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default',\n    'summary^[HTMLElement]|',\n    'time^[HTMLElement]|dateTime',\n    ':svg:cursor^:svg:|',\n];\nvar EVENT = 'event';\nvar BOOLEAN$1 = 'boolean';\nvar NUMBER$1 = 'number';\nvar STRING$1 = 'string';\nvar OBJECT$1 = 'object';\nvar SchemaInformation = /** @class */ (function () {\n    function SchemaInformation() {\n        var _this = this;\n        this.schema = {};\n        SCHEMA$1.forEach(function (encodedType) {\n            var parts = encodedType.split('|');\n            var properties = parts[1].split(',');\n            var typeParts = (parts[0] + '^').split('^');\n            var typeName = typeParts[0];\n            var type = {};\n            typeName.split(',').forEach(function (tag) { return _this.schema[tag.toLowerCase()] = type; });\n            var superName = typeParts[1];\n            var superType = superName && _this.schema[superName.toLowerCase()];\n            if (superType) {\n                for (var key in superType) {\n                    type[key] = superType[key];\n                }\n            }\n            properties.forEach(function (property) {\n                if (property == '') {\n                }\n                else if (property.startsWith('*')) {\n                    type[property.substring(1)] = EVENT;\n                }\n                else if (property.startsWith('!')) {\n                    type[property.substring(1)] = BOOLEAN$1;\n                }\n                else if (property.startsWith('#')) {\n                    type[property.substring(1)] = NUMBER$1;\n                }\n                else if (property.startsWith('%')) {\n                    type[property.substring(1)] = OBJECT$1;\n                }\n                else {\n                    type[property] = STRING$1;\n                }\n            });\n        });\n    }\n    SchemaInformation.prototype.allKnownElements = function () { return Object.keys(this.schema); };\n    SchemaInformation.prototype.eventsOf = function (elementName) {\n        var elementType = this.schema[elementName.toLowerCase()] || {};\n        return Object.keys(elementType).filter(function (property) { return elementType[property] === EVENT; });\n    };\n    SchemaInformation.prototype.propertiesOf = function (elementName) {\n        var elementType = this.schema[elementName.toLowerCase()] || {};\n        return Object.keys(elementType).filter(function (property) { return elementType[property] !== EVENT; });\n    };\n    SchemaInformation.prototype.typeOf = function (elementName, property) {\n        return (this.schema[elementName.toLowerCase()] || {})[property];\n    };\n    Object.defineProperty(SchemaInformation, \"instance\", {\n        get: function () {\n            var result = SchemaInformation._instance;\n            if (!result) {\n                result = SchemaInformation._instance = new SchemaInformation();\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return SchemaInformation;\n}());\nfunction eventNames(elementName) {\n    return SchemaInformation.instance.eventsOf(elementName);\n}\nfunction propertyNames(elementName) {\n    return SchemaInformation.instance.propertiesOf(elementName);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TEMPLATE_ATTR_PREFIX$1 = '*';\nvar hiddenHtmlElements = {\n    html: true,\n    script: true,\n    noscript: true,\n    base: true,\n    body: true,\n    title: true,\n    head: true,\n    link: true,\n};\nfunction getTemplateCompletions(templateInfo) {\n    var result = undefined;\n    var htmlAst = templateInfo.htmlAst, templateAst = templateInfo.templateAst, template = templateInfo.template;\n    // The templateNode starts at the delimiter character so we add 1 to skip it.\n    if (templateInfo.position != null) {\n        var templatePosition_1 = templateInfo.position - template.span.start;\n        var path_1 = findNode(htmlAst, templatePosition_1);\n        var mostSpecific = path_1.tail;\n        if (path_1.empty || !mostSpecific) {\n            result = elementCompletions(templateInfo, path_1);\n        }\n        else {\n            var astPosition_1 = templatePosition_1 - mostSpecific.sourceSpan.start.offset;\n            mostSpecific.visit({\n                visitElement: function (ast) {\n                    var startTagSpan = spanOf$3(ast.sourceSpan);\n                    var tagLen = ast.name.length;\n                    if (templatePosition_1 <=\n                        startTagSpan.start + tagLen + 1 /* 1 for the opening angle bracked */) {\n                        // If we are in the tag then return the element completions.\n                        result = elementCompletions(templateInfo, path_1);\n                    }\n                    else if (templatePosition_1 < startTagSpan.end) {\n                        // We are in the attribute section of the element (but not in an attribute).\n                        // Return the attribute completions.\n                        result = attributeCompletions(templateInfo, path_1);\n                    }\n                },\n                visitAttribute: function (ast) {\n                    if (!ast.valueSpan || !inSpan(templatePosition_1, spanOf$3(ast.valueSpan))) {\n                        // We are in the name of an attribute. Show attribute completions.\n                        result = attributeCompletions(templateInfo, path_1);\n                    }\n                    else if (ast.valueSpan && inSpan(templatePosition_1, spanOf$3(ast.valueSpan))) {\n                        result = attributeValueCompletions(templateInfo, templatePosition_1, ast);\n                    }\n                },\n                visitText: function (ast) {\n                    // Check if we are in a entity.\n                    result = entityCompletions(getSourceText(template, spanOf$3(ast)), astPosition_1);\n                    if (result)\n                        return result;\n                    result = interpolationCompletions(templateInfo, templatePosition_1);\n                    if (result)\n                        return result;\n                    var element = path_1.first(Element);\n                    if (element) {\n                        var definition = getHtmlTagDefinition(element.name);\n                        if (definition.contentType === TagContentType.PARSABLE_DATA) {\n                            result = voidElementAttributeCompletions(templateInfo, path_1);\n                            if (!result) {\n                                // If the element can hold content Show element completions.\n                                result = elementCompletions(templateInfo, path_1);\n                            }\n                        }\n                    }\n                    else {\n                        // If no element container, implies parsable data so show elements.\n                        result = voidElementAttributeCompletions(templateInfo, path_1);\n                        if (!result) {\n                            result = elementCompletions(templateInfo, path_1);\n                        }\n                    }\n                },\n                visitComment: function (ast) { },\n                visitExpansion: function (ast) { },\n                visitExpansionCase: function (ast) { }\n            }, null);\n        }\n    }\n    return result;\n}\nfunction attributeCompletions(info, path$$1) {\n    var item = path$$1.tail instanceof Element ? path$$1.tail : path$$1.parentOf(path$$1.tail);\n    if (item instanceof Element) {\n        return attributeCompletionsForElement(info, item.name, item);\n    }\n    return undefined;\n}\nfunction attributeCompletionsForElement(info, elementName, element) {\n    var attributes = getAttributeInfosForElement(info, elementName, element);\n    // Map all the attributes to a completion\n    return attributes.map(function (attr) { return ({\n        kind: attr.fromHtml ? 'html attribute' : 'attribute',\n        name: nameOfAttr(attr),\n        sort: attr.name\n    }); });\n}\nfunction getAttributeInfosForElement(info, elementName, element) {\n    var attributes = [];\n    // Add html attributes\n    var htmlAttributes = attributeNames(elementName) || [];\n    if (htmlAttributes) {\n        attributes.push.apply(attributes, __spread(htmlAttributes.map(function (name) { return ({ name: name, fromHtml: true }); })));\n    }\n    // Add html properties\n    var htmlProperties = propertyNames(elementName);\n    if (htmlProperties) {\n        attributes.push.apply(attributes, __spread(htmlProperties.map(function (name) { return ({ name: name, input: true }); })));\n    }\n    // Add html events\n    var htmlEvents = eventNames(elementName);\n    if (htmlEvents) {\n        attributes.push.apply(attributes, __spread(htmlEvents.map(function (name) { return ({ name: name, output: true }); })));\n    }\n    var _a = getSelectors(info), selectors = _a.selectors, selectorMap = _a.map;\n    if (selectors && selectors.length) {\n        // All the attributes that are selectable should be shown.\n        var applicableSelectors = selectors.filter(function (selector) { return !selector.element || selector.element == elementName; });\n        var selectorAndAttributeNames = applicableSelectors.map(function (selector) { return ({ selector: selector, attrs: selector.attrs.filter(function (a) { return !!a; }) }); });\n        var attrs_1 = flatten$1(selectorAndAttributeNames.map(function (selectorAndAttr) {\n            var directive = selectorMap.get(selectorAndAttr.selector);\n            var result = selectorAndAttr.attrs.map(function (name) { return ({ name: name, input: name in directive.inputs, output: name in directive.outputs }); });\n            return result;\n        }));\n        // Add template attribute if a directive contains a template reference\n        selectorAndAttributeNames.forEach(function (selectorAndAttr) {\n            var selector = selectorAndAttr.selector;\n            var directive = selectorMap.get(selector);\n            if (directive && hasTemplateReference$1(directive.type) && selector.attrs.length &&\n                selector.attrs[0]) {\n                attrs_1.push({ name: selector.attrs[0], template: true });\n            }\n        });\n        // All input and output properties of the matching directives should be added.\n        var elementSelector = element ?\n            createElementCssSelector$1(element) :\n            createElementCssSelector$1(new Element(elementName, [], [], null, null, null));\n        var matcher = new SelectorMatcher();\n        matcher.addSelectables(selectors);\n        matcher.match(elementSelector, function (selector) {\n            var directive = selectorMap.get(selector);\n            if (directive) {\n                attrs_1.push.apply(attrs_1, __spread(Object.keys(directive.inputs).map(function (name) { return ({ name: name, input: true }); })));\n                attrs_1.push.apply(attrs_1, __spread(Object.keys(directive.outputs).map(function (name) { return ({ name: name, output: true }); })));\n            }\n        });\n        // If a name shows up twice, fold it into a single value.\n        attrs_1 = foldAttrs(attrs_1);\n        // Now expand them back out to ensure that input/output shows up as well as input and\n        // output.\n        attributes.push.apply(attributes, __spread(flatten$1(attrs_1.map(expandedAttr))));\n    }\n    return attributes;\n}\nfunction attributeValueCompletions(info, position, attr) {\n    var path$$1 = findTemplateAstAt(info.templateAst, position);\n    var mostSpecific = path$$1.tail;\n    var dinfo = diagnosticInfoFromTemplateInfo(info);\n    if (mostSpecific) {\n        var visitor = new ExpressionVisitor(info, position, attr, function () { return getExpressionScope(dinfo, path$$1, false); });\n        mostSpecific.visit(visitor, null);\n        if (!visitor.result || !visitor.result.length) {\n            // Try allwoing widening the path\n            var widerPath_1 = findTemplateAstAt(info.templateAst, position, /* allowWidening */ true);\n            if (widerPath_1.tail) {\n                var widerVisitor = new ExpressionVisitor(info, position, attr, function () { return getExpressionScope(dinfo, widerPath_1, false); });\n                widerPath_1.tail.visit(widerVisitor, null);\n                return widerVisitor.result;\n            }\n        }\n        return visitor.result;\n    }\n}\nfunction elementCompletions(info, path$$1) {\n    var htmlNames = elementNames().filter(function (name) { return !(name in hiddenHtmlElements); });\n    // Collect the elements referenced by the selectors\n    var directiveElements = getSelectors(info)\n        .selectors.map(function (selector) { return selector.element; })\n        .filter(function (name) { return !!name; });\n    var components = directiveElements.map(function (name) { return ({ kind: 'component', name: name, sort: name }); });\n    var htmlElements = htmlNames.map(function (name) { return ({ kind: 'element', name: name, sort: name }); });\n    // Return components and html elements\n    return uniqueByName(htmlElements.concat(components));\n}\nfunction entityCompletions(value, position) {\n    // Look for entity completions\n    var re = /&[A-Za-z]*;?(?!\\d)/g;\n    var found;\n    var result = undefined;\n    while (found = re.exec(value)) {\n        var len = found[0].length;\n        if (position >= found.index && position < (found.index + len)) {\n            result = Object.keys(NAMED_ENTITIES)\n                .map(function (name) { return ({ kind: 'entity', name: \"&\" + name + \";\", sort: name }); });\n            break;\n        }\n    }\n    return result;\n}\nfunction interpolationCompletions(info, position) {\n    // Look for an interpolation in at the position.\n    var templatePath = findTemplateAstAt(info.templateAst, position);\n    var mostSpecific = templatePath.tail;\n    if (mostSpecific) {\n        var visitor = new ExpressionVisitor(info, position, undefined, function () { return getExpressionScope(diagnosticInfoFromTemplateInfo(info), templatePath, false); });\n        mostSpecific.visit(visitor, null);\n        return uniqueByName(visitor.result);\n    }\n}\n// There is a special case of HTML where text that contains a unclosed tag is treated as\n// text. For exaple '<h1> Some <a text </h1>' produces a text nodes inside of the H1\n// element \"Some <a text\". We, however, want to treat this as if the user was requesting\n// the attributes of an \"a\" element, not requesting completion in the a text element. This\n// code checks for this case and returns element completions if it is detected or undefined\n// if it is not.\nfunction voidElementAttributeCompletions(info, path$$1) {\n    var tail = path$$1.tail;\n    if (tail instanceof Text) {\n        var match = tail.value.match(/<(\\w(\\w|\\d|-)*:)?(\\w(\\w|\\d|-)*)\\s/);\n        // The position must be after the match, otherwise we are still in a place where elements\n        // are expected (such as `<|a` or `<a|`; we only want attributes for `<a |` or after).\n        if (match &&\n            path$$1.position >= (match.index || 0) + match[0].length + tail.sourceSpan.start.offset) {\n            return attributeCompletionsForElement(info, match[3]);\n        }\n    }\n}\nvar ExpressionVisitor = /** @class */ (function (_super) {\n    __extends(ExpressionVisitor, _super);\n    function ExpressionVisitor(info, position, attr, getExpressionScope) {\n        var _this = _super.call(this) || this;\n        _this.info = info;\n        _this.position = position;\n        _this.attr = attr;\n        _this.getExpressionScope = getExpressionScope || (function () { return info.template.members; });\n        return _this;\n    }\n    ExpressionVisitor.prototype.visitDirectiveProperty = function (ast) {\n        this.attributeValueCompletions(ast.value);\n    };\n    ExpressionVisitor.prototype.visitElementProperty = function (ast) {\n        this.attributeValueCompletions(ast.value);\n    };\n    ExpressionVisitor.prototype.visitEvent = function (ast) { this.attributeValueCompletions(ast.handler); };\n    ExpressionVisitor.prototype.visitElement = function (ast) {\n        var _this = this;\n        if (this.attr && getSelectors(this.info) && this.attr.name.startsWith(TEMPLATE_ATTR_PREFIX$1)) {\n            // The value is a template expression but the expression AST was not produced when the\n            // TemplateAst was produce so\n            // do that now.\n            var key_1 = this.attr.name.substr(TEMPLATE_ATTR_PREFIX$1.length);\n            // Find the selector\n            var selectorInfo = getSelectors(this.info);\n            var selectors = selectorInfo.selectors;\n            var selector_1 = selectors.filter(function (s) { return s.attrs.some(function (attr, i) { return i % 2 == 0 && attr == key_1; }); })[0];\n            var templateBindingResult = this.info.expressionParser.parseTemplateBindings(key_1, this.attr.value, null);\n            // find the template binding that contains the position\n            if (!this.attr.valueSpan)\n                return;\n            var valueRelativePosition_1 = this.position - this.attr.valueSpan.start.offset - 1;\n            var bindings = templateBindingResult.templateBindings;\n            var binding = bindings.find(function (binding) { return inSpan(valueRelativePosition_1, binding.span, /* exclusive */ true); }) ||\n                bindings.find(function (binding) { return inSpan(valueRelativePosition_1, binding.span); });\n            var keyCompletions = function () {\n                var keys = [];\n                if (selector_1) {\n                    var attrNames = selector_1.attrs.filter(function (_, i) { return i % 2 == 0; });\n                    keys = attrNames.filter(function (name) { return name.startsWith(key_1) && name != key_1; })\n                        .map(function (name) { return lowerName(name.substr(key_1.length)); });\n                }\n                keys.push('let');\n                _this.result = keys.map(function (key) { return ({ kind: 'key', name: key, sort: key }); });\n            };\n            if (!binding || (binding.key == key_1 && !binding.expression)) {\n                // We are in the root binding. We should return `let` and keys that are left in the\n                // selector.\n                keyCompletions();\n            }\n            else if (binding.keyIsVar) {\n                var equalLocation = this.attr.value.indexOf('=');\n                this.result = [];\n                if (equalLocation >= 0 && valueRelativePosition_1 >= equalLocation) {\n                    // We are after the '=' in a let clause. The valid values here are the members of the\n                    // template reference's type parameter.\n                    var directiveMetadata = selectorInfo.map.get(selector_1);\n                    if (directiveMetadata) {\n                        var contextTable = this.info.template.query.getTemplateContext(directiveMetadata.type.reference);\n                        if (contextTable) {\n                            this.result = this.symbolsToCompletions(contextTable.values());\n                        }\n                    }\n                }\n                else if (binding.key && valueRelativePosition_1 <= (binding.key.length - key_1.length)) {\n                    keyCompletions();\n                }\n            }\n            else {\n                // If the position is in the expression or after the key or there is no key, return the\n                // expression completions\n                if ((binding.expression && inSpan(valueRelativePosition_1, binding.expression.ast.span)) ||\n                    (binding.key &&\n                        valueRelativePosition_1 > binding.span.start + (binding.key.length - key_1.length)) ||\n                    !binding.key) {\n                    var span = new ParseSpan(0, this.attr.value.length);\n                    this.attributeValueCompletions(binding.expression ? binding.expression.ast :\n                        new PropertyRead(span, new ImplicitReceiver(span), ''), valueRelativePosition_1);\n                }\n                else {\n                    keyCompletions();\n                }\n            }\n        }\n    };\n    ExpressionVisitor.prototype.visitBoundText = function (ast) {\n        var expressionPosition = this.position - ast.sourceSpan.start.offset;\n        if (inSpan(expressionPosition, ast.value.span)) {\n            var completions = getExpressionCompletions(this.getExpressionScope(), ast.value, expressionPosition, this.info.template.query);\n            if (completions) {\n                this.result = this.symbolsToCompletions(completions);\n            }\n        }\n    };\n    ExpressionVisitor.prototype.attributeValueCompletions = function (value, position) {\n        var symbols = getExpressionCompletions(this.getExpressionScope(), value, position == null ? this.attributeValuePosition : position, this.info.template.query);\n        if (symbols) {\n            this.result = this.symbolsToCompletions(symbols);\n        }\n    };\n    ExpressionVisitor.prototype.symbolsToCompletions = function (symbols) {\n        return symbols.filter(function (s) { return !s.name.startsWith('__') && s.public; })\n            .map(function (symbol) { return ({ kind: symbol.kind, name: symbol.name, sort: symbol.name }); });\n    };\n    Object.defineProperty(ExpressionVisitor.prototype, \"attributeValuePosition\", {\n        get: function () {\n            if (this.attr && this.attr.valueSpan) {\n                return this.position - this.attr.valueSpan.start.offset - 1;\n            }\n            return 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ExpressionVisitor;\n}(NullTemplateVisitor));\nfunction getSourceText(template, span) {\n    return template.source.substring(span.start, span.end);\n}\nfunction nameOfAttr(attr) {\n    var name = attr.name;\n    if (attr.output) {\n        name = removeSuffix(name, 'Events');\n        name = removeSuffix(name, 'Changed');\n    }\n    var result = [name];\n    if (attr.input) {\n        result.unshift('[');\n        result.push(']');\n    }\n    if (attr.output) {\n        result.unshift('(');\n        result.push(')');\n    }\n    if (attr.template) {\n        result.unshift('*');\n    }\n    return result.join('');\n}\nvar templateAttr = /^(\\w+:)?(template$|^\\*)/;\nfunction createElementCssSelector$1(element) {\n    var cssSelector = new CssSelector();\n    var elNameNoNs = splitNsName(element.name)[1];\n    cssSelector.setElement(elNameNoNs);\n    try {\n        for (var _a = __values(element.attrs), _b = _a.next(); !_b.done; _b = _a.next()) {\n            var attr = _b.value;\n            if (!attr.name.match(templateAttr)) {\n                var _c = __read(splitNsName(attr.name), 2), _ = _c[0], attrNameNoNs = _c[1];\n                cssSelector.addAttribute(attrNameNoNs, attr.value);\n                if (attr.name.toLowerCase() == 'class') {\n                    var classes = attr.value.split(/s+/g);\n                    classes.forEach(function (className) { return cssSelector.addClassName(className); });\n                }\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_b && !_b.done && (_d = _a.return)) _d.call(_a);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return cssSelector;\n    var e_1, _d;\n}\nfunction foldAttrs(attrs) {\n    var inputOutput = new Map();\n    var templates = new Map();\n    var result = [];\n    attrs.forEach(function (attr) {\n        if (attr.fromHtml) {\n            return attr;\n        }\n        if (attr.template) {\n            var duplicate = templates.get(attr.name);\n            if (!duplicate) {\n                result.push({ name: attr.name, template: true });\n                templates.set(attr.name, attr);\n            }\n        }\n        if (attr.input || attr.output) {\n            var duplicate = inputOutput.get(attr.name);\n            if (duplicate) {\n                duplicate.input = duplicate.input || attr.input;\n                duplicate.output = duplicate.output || attr.output;\n            }\n            else {\n                var cloneAttr = { name: attr.name };\n                if (attr.input)\n                    cloneAttr.input = true;\n                if (attr.output)\n                    cloneAttr.output = true;\n                result.push(cloneAttr);\n                inputOutput.set(attr.name, cloneAttr);\n            }\n        }\n    });\n    return result;\n}\nfunction expandedAttr(attr) {\n    if (attr.input && attr.output) {\n        return [\n            attr, { name: attr.name, input: true, output: false },\n            { name: attr.name, input: false, output: true }\n        ];\n    }\n    return [attr];\n}\nfunction lowerName(name) {\n    return name && (name[0].toLowerCase() + name.substr(1));\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction locateSymbol(info) {\n    if (!info.position)\n        return undefined;\n    var templatePosition = info.position - info.template.span.start;\n    var path$$1 = findTemplateAstAt(info.templateAst, templatePosition);\n    if (path$$1.tail) {\n        var symbol_1 = undefined;\n        var span_1 = undefined;\n        var attributeValueSymbol_1 = function (ast, inEvent) {\n            if (inEvent === void 0) { inEvent = false; }\n            var attribute = findAttribute(info);\n            if (attribute) {\n                if (inSpan(templatePosition, spanOf$3(attribute.valueSpan))) {\n                    var dinfo = diagnosticInfoFromTemplateInfo(info);\n                    var scope = getExpressionScope(dinfo, path$$1, inEvent);\n                    if (attribute.valueSpan) {\n                        var expressionOffset = attribute.valueSpan.start.offset + 1;\n                        var result = getExpressionSymbol(scope, ast, templatePosition - expressionOffset, info.template.query);\n                        if (result) {\n                            symbol_1 = result.symbol;\n                            span_1 = offsetSpan$1(result.span, expressionOffset);\n                        }\n                    }\n                    return true;\n                }\n            }\n            return false;\n        };\n        path$$1.tail.visit({\n            visitNgContent: function (ast) { },\n            visitEmbeddedTemplate: function (ast) { },\n            visitElement: function (ast) {\n                var component = ast.directives.find(function (d) { return d.directive.isComponent; });\n                if (component) {\n                    symbol_1 = info.template.query.getTypeSymbol(component.directive.type.reference);\n                    symbol_1 = symbol_1 && new OverrideKindSymbol(symbol_1, 'component');\n                    span_1 = spanOf$3(ast);\n                }\n                else {\n                    // Find a directive that matches the element name\n                    var directive = ast.directives.find(function (d) { return d.directive.selector != null && d.directive.selector.indexOf(ast.name) >= 0; });\n                    if (directive) {\n                        symbol_1 = info.template.query.getTypeSymbol(directive.directive.type.reference);\n                        symbol_1 = symbol_1 && new OverrideKindSymbol(symbol_1, 'directive');\n                        span_1 = spanOf$3(ast);\n                    }\n                }\n            },\n            visitReference: function (ast) {\n                symbol_1 = ast.value && info.template.query.getTypeSymbol(tokenReference(ast.value));\n                span_1 = spanOf$3(ast);\n            },\n            visitVariable: function (ast) { },\n            visitEvent: function (ast) {\n                if (!attributeValueSymbol_1(ast.handler, /* inEvent */ true)) {\n                    symbol_1 = findOutputBinding(info, path$$1, ast);\n                    symbol_1 = symbol_1 && new OverrideKindSymbol(symbol_1, 'event');\n                    span_1 = spanOf$3(ast);\n                }\n            },\n            visitElementProperty: function (ast) { attributeValueSymbol_1(ast.value); },\n            visitAttr: function (ast) { },\n            visitBoundText: function (ast) {\n                var expressionPosition = templatePosition - ast.sourceSpan.start.offset;\n                if (inSpan(expressionPosition, ast.value.span)) {\n                    var dinfo = diagnosticInfoFromTemplateInfo(info);\n                    var scope = getExpressionScope(dinfo, path$$1, /* includeEvent */ false);\n                    var result = getExpressionSymbol(scope, ast.value, expressionPosition, info.template.query);\n                    if (result) {\n                        symbol_1 = result.symbol;\n                        span_1 = offsetSpan$1(result.span, ast.sourceSpan.start.offset);\n                    }\n                }\n            },\n            visitText: function (ast) { },\n            visitDirective: function (ast) {\n                symbol_1 = info.template.query.getTypeSymbol(ast.directive.type.reference);\n                span_1 = spanOf$3(ast);\n            },\n            visitDirectiveProperty: function (ast) {\n                if (!attributeValueSymbol_1(ast.value)) {\n                    symbol_1 = findInputBinding(info, path$$1, ast);\n                    span_1 = spanOf$3(ast);\n                }\n            }\n        }, null);\n        if (symbol_1 && span_1) {\n            return { symbol: symbol_1, span: offsetSpan$1(span_1, info.template.span.start) };\n        }\n    }\n}\nfunction findAttribute(info) {\n    if (info.position) {\n        var templatePosition = info.position - info.template.span.start;\n        var path$$1 = findNode(info.htmlAst, templatePosition);\n        return path$$1.first(Attribute);\n    }\n}\nfunction findInputBinding(info, path$$1, binding) {\n    var element = path$$1.first(ElementAst);\n    if (element) {\n        try {\n            for (var _a = __values(element.directives), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var directive = _b.value;\n                var invertedInput = invertMap(directive.directive.inputs);\n                var fieldName = invertedInput[binding.templateName];\n                if (fieldName) {\n                    var classSymbol = info.template.query.getTypeSymbol(directive.directive.type.reference);\n                    if (classSymbol) {\n                        return classSymbol.members().get(fieldName);\n                    }\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    var e_1, _c;\n}\nfunction findOutputBinding(info, path$$1, binding) {\n    var element = path$$1.first(ElementAst);\n    if (element) {\n        try {\n            for (var _a = __values(element.directives), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var directive = _b.value;\n                var invertedOutputs = invertMap(directive.directive.outputs);\n                var fieldName = invertedOutputs[binding.name];\n                if (fieldName) {\n                    var classSymbol = info.template.query.getTypeSymbol(directive.directive.type.reference);\n                    if (classSymbol) {\n                        return classSymbol.members().get(fieldName);\n                    }\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    }\n    var e_2, _c;\n}\nfunction invertMap(obj) {\n    var result = {};\n    try {\n        for (var _a = __values(Object.keys(obj)), _b = _a.next(); !_b.done; _b = _a.next()) {\n            var name_1 = _b.value;\n            var v = obj[name_1];\n            result[v] = name_1;\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return result;\n    var e_3, _c;\n}\n/**\n * Wrap a symbol and change its kind to component.\n */\nvar OverrideKindSymbol = /** @class */ (function () {\n    function OverrideKindSymbol(sym, kindOverride) {\n        this.sym = sym;\n        this.kind = kindOverride;\n    }\n    Object.defineProperty(OverrideKindSymbol.prototype, \"name\", {\n        get: function () { return this.sym.name; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"language\", {\n        get: function () { return this.sym.language; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"type\", {\n        get: function () { return this.sym.type; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"container\", {\n        get: function () { return this.sym.container; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"public\", {\n        get: function () { return this.sym.public; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"callable\", {\n        get: function () { return this.sym.callable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"nullable\", {\n        get: function () { return this.sym.nullable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"definition\", {\n        get: function () { return this.sym.definition; },\n        enumerable: true,\n        configurable: true\n    });\n    OverrideKindSymbol.prototype.members = function () { return this.sym.members(); };\n    OverrideKindSymbol.prototype.signatures = function () { return this.sym.signatures(); };\n    OverrideKindSymbol.prototype.selectSignature = function (types) { return this.sym.selectSignature(types); };\n    OverrideKindSymbol.prototype.indexed = function (argument) { return this.sym.indexed(argument); };\n    return OverrideKindSymbol;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction getDefinition(info) {\n    var result = locateSymbol(info);\n    return result && result.symbol.definition;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction getTemplateDiagnostics(fileName, astProvider, templates) {\n    var results = [];\n    var _loop_1 = function (template) {\n        var ast = astProvider.getTemplateAst(template, fileName);\n        if (ast) {\n            if (ast.parseErrors && ast.parseErrors.length) {\n                results.push.apply(results, __spread(ast.parseErrors.map(function (e) { return ({\n                    kind: DiagnosticKind$1.Error,\n                    span: offsetSpan$1(spanOf$3(e.span), template.span.start),\n                    message: e.msg\n                }); })));\n            }\n            else if (ast.templateAst && ast.htmlAst) {\n                var info = {\n                    templateAst: ast.templateAst,\n                    htmlAst: ast.htmlAst,\n                    offset: template.span.start,\n                    query: template.query,\n                    members: template.members\n                };\n                var expressionDiagnostics = getTemplateExpressionDiagnostics(info);\n                results.push.apply(results, __spread(expressionDiagnostics));\n            }\n            if (ast.errors) {\n                results.push.apply(results, __spread(ast.errors.map(function (e) { return ({ kind: e.kind, span: e.span || template.span, message: e.message }); })));\n            }\n        }\n    };\n    try {\n        for (var templates_1 = __values(templates), templates_1_1 = templates_1.next(); !templates_1_1.done; templates_1_1 = templates_1.next()) {\n            var template = templates_1_1.value;\n            _loop_1(template);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (templates_1_1 && !templates_1_1.done && (_a = templates_1.return)) _a.call(templates_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return results;\n    var e_1, _a;\n}\nfunction getDeclarationDiagnostics(declarations, modules) {\n    var results = [];\n    var directives = undefined;\n    var _loop_2 = function (declaration) {\n        var report = function (message, span) {\n            results.push({\n                kind: DiagnosticKind$1.Error,\n                span: span || declaration.declarationSpan, message: message\n            });\n        };\n        try {\n            for (var _a = __values(declaration.errors), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var error = _b.value;\n                report(error.message, error.span);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        if (declaration.metadata) {\n            if (declaration.metadata.isComponent) {\n                if (!modules.ngModuleByPipeOrDirective.has(declaration.type)) {\n                    report(\"Component '\" + declaration.type.name + \"' is not included in a module and will not be available inside a template. Consider adding it to a NgModule declaration\");\n                }\n                var _d = declaration.metadata.template, template = _d.template, templateUrl = _d.templateUrl;\n                if (template === null && !templateUrl) {\n                    report(\"Component '\" + declaration.type.name + \"' must have a template or templateUrl\");\n                }\n                else if (template && templateUrl) {\n                    report(\"Component '\" + declaration.type.name + \"' must not have both template and templateUrl\");\n                }\n            }\n            else {\n                if (!directives) {\n                    directives = new Set();\n                    modules.ngModules.forEach(function (module) {\n                        module.declaredDirectives.forEach(function (directive) { directives.add(directive.reference); });\n                    });\n                }\n                if (!directives.has(declaration.type)) {\n                    report(\"Directive '\" + declaration.type.name + \"' is not included in a module and will not be available inside a template. Consider adding it to a NgModule declaration\");\n                }\n            }\n        }\n        var e_2, _c;\n    };\n    try {\n        for (var declarations_1 = __values(declarations), declarations_1_1 = declarations_1.next(); !declarations_1_1.done; declarations_1_1 = declarations_1.next()) {\n            var declaration = declarations_1_1.value;\n            _loop_2(declaration);\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (declarations_1_1 && !declarations_1_1.done && (_a = declarations_1.return)) _a.call(declarations_1);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return results;\n    var e_3, _a;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction getHover(info) {\n    var result = locateSymbol(info);\n    if (result) {\n        return { text: hoverTextOf(result.symbol), span: result.span };\n    }\n}\nfunction hoverTextOf(symbol) {\n    var result = [{ text: symbol.kind }, { text: ' ' }, { text: symbol.name, language: symbol.language }];\n    var container = symbol.container;\n    if (container) {\n        result.push({ text: ' of ' }, { text: container.name, language: container.language });\n    }\n    return result;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create an instance of an Angular `LanguageService`.\n *\n * @experimental\n */\nfunction createLanguageService(host) {\n    return new LanguageServiceImpl(host);\n}\nvar LanguageServiceImpl = /** @class */ (function () {\n    function LanguageServiceImpl(host) {\n        this.host = host;\n    }\n    Object.defineProperty(LanguageServiceImpl.prototype, \"metadataResolver\", {\n        get: function () { return this.host.resolver; },\n        enumerable: true,\n        configurable: true\n    });\n    LanguageServiceImpl.prototype.getTemplateReferences = function () { return this.host.getTemplateReferences(); };\n    LanguageServiceImpl.prototype.getDiagnostics = function (fileName) {\n        var results = [];\n        var templates = this.host.getTemplates(fileName);\n        if (templates && templates.length) {\n            results.push.apply(results, __spread(getTemplateDiagnostics(fileName, this, templates)));\n        }\n        var declarations = this.host.getDeclarations(fileName);\n        if (declarations && declarations.length) {\n            var summary = this.host.getAnalyzedModules();\n            results.push.apply(results, __spread(getDeclarationDiagnostics(declarations, summary)));\n        }\n        return uniqueBySpan(results);\n    };\n    LanguageServiceImpl.prototype.getPipesAt = function (fileName, position) {\n        var templateInfo = this.getTemplateAstAtPosition(fileName, position);\n        if (templateInfo) {\n            return templateInfo.pipes;\n        }\n        return [];\n    };\n    LanguageServiceImpl.prototype.getCompletionsAt = function (fileName, position) {\n        var templateInfo = this.getTemplateAstAtPosition(fileName, position);\n        if (templateInfo) {\n            return getTemplateCompletions(templateInfo);\n        }\n    };\n    LanguageServiceImpl.prototype.getDefinitionAt = function (fileName, position) {\n        var templateInfo = this.getTemplateAstAtPosition(fileName, position);\n        if (templateInfo) {\n            return getDefinition(templateInfo);\n        }\n    };\n    LanguageServiceImpl.prototype.getHoverAt = function (fileName, position) {\n        var templateInfo = this.getTemplateAstAtPosition(fileName, position);\n        if (templateInfo) {\n            return getHover(templateInfo);\n        }\n    };\n    LanguageServiceImpl.prototype.getTemplateAstAtPosition = function (fileName, position) {\n        var template = this.host.getTemplateAt(fileName, position);\n        if (template) {\n            var astResult = this.getTemplateAst(template, fileName);\n            if (astResult && astResult.htmlAst && astResult.templateAst && astResult.directive &&\n                astResult.directives && astResult.pipes && astResult.expressionParser)\n                return {\n                    position: position,\n                    fileName: fileName,\n                    template: template,\n                    htmlAst: astResult.htmlAst,\n                    directive: astResult.directive,\n                    directives: astResult.directives,\n                    pipes: astResult.pipes,\n                    templateAst: astResult.templateAst,\n                    expressionParser: astResult.expressionParser\n                };\n        }\n        return undefined;\n    };\n    LanguageServiceImpl.prototype.getTemplateAst = function (template, contextFile) {\n        var _this = this;\n        var result = undefined;\n        try {\n            var resolvedMetadata = this.metadataResolver.getNonNormalizedDirectiveMetadata(template.type);\n            var metadata = resolvedMetadata && resolvedMetadata.metadata;\n            if (metadata) {\n                var rawHtmlParser = new HtmlParser();\n                var htmlParser = new I18NHtmlParser(rawHtmlParser);\n                var expressionParser = new Parser(new Lexer());\n                var config = new CompilerConfig();\n                var parser = new TemplateParser(config, this.host.resolver.getReflector(), expressionParser, new DomElementSchemaRegistry(), htmlParser, null, []);\n                var htmlResult = htmlParser.parse(template.source, '', true);\n                var analyzedModules = this.host.getAnalyzedModules();\n                var errors = undefined;\n                var ngModule = analyzedModules.ngModuleByPipeOrDirective.get(template.type);\n                if (!ngModule) {\n                    // Reported by the the declaration diagnostics.\n                    ngModule = findSuitableDefaultModule(analyzedModules);\n                }\n                if (ngModule) {\n                    var resolvedDirectives = ngModule.transitiveModule.directives.map(function (d) { return _this.host.resolver.getNonNormalizedDirectiveMetadata(d.reference); });\n                    var directives = removeMissing(resolvedDirectives).map(function (d) { return d.metadata.toSummary(); });\n                    var pipes = ngModule.transitiveModule.pipes.map(function (p) { return _this.host.resolver.getOrLoadPipeMetadata(p.reference).toSummary(); });\n                    var schemas = ngModule.schemas;\n                    var parseResult = parser.tryParseHtml(htmlResult, metadata, directives, pipes, schemas);\n                    result = {\n                        htmlAst: htmlResult.rootNodes,\n                        templateAst: parseResult.templateAst,\n                        directive: metadata, directives: directives, pipes: pipes,\n                        parseErrors: parseResult.errors, expressionParser: expressionParser, errors: errors\n                    };\n                }\n            }\n        }\n        catch (e) {\n            var span = template.span;\n            if (e.fileName == contextFile) {\n                span = template.query.getSpanAt(e.line, e.column) || span;\n            }\n            result = { errors: [{ kind: DiagnosticKind$1.Error, message: e.message, span: span }] };\n        }\n        return result || {};\n    };\n    return LanguageServiceImpl;\n}());\nfunction removeMissing(values) {\n    return values.filter(function (e) { return !!e; });\n}\nfunction uniqueBySpan(elements) {\n    if (elements) {\n        var result = [];\n        var map = new Map();\n        try {\n            for (var elements_1 = __values(elements), elements_1_1 = elements_1.next(); !elements_1_1.done; elements_1_1 = elements_1.next()) {\n                var element = elements_1_1.value;\n                var span = element.span;\n                var set = map.get(span.start);\n                if (!set) {\n                    set = new Set();\n                    map.set(span.start, set);\n                }\n                if (!set.has(span.end)) {\n                    set.add(span.end);\n                    result.push(element);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (elements_1_1 && !elements_1_1.done && (_a = elements_1.return)) _a.call(elements_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return result;\n    }\n    var e_1, _a;\n}\nfunction findSuitableDefaultModule(modules) {\n    var result = undefined;\n    var resultSize = 0;\n    try {\n        for (var _a = __values(modules.ngModules), _b = _a.next(); !_b.done; _b = _a.next()) {\n            var module_1 = _b.value;\n            var moduleSize = module_1.transitiveModule.directives.length;\n            if (moduleSize > resultSize) {\n                result = module_1;\n                resultSize = moduleSize;\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return result;\n    var e_2, _c;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Construct an `InjectableDef` which defines how a token will be constructed by the DI system, and\n * in which injectors (if any) it will be available.\n *\n * This should be assigned to a static `ngInjectableDef` field on a type, which will then be an\n * `InjectableType`.\n *\n * Options:\n * * `providedIn` determines which injectors will include the injectable, by either associating it\n *   with an `@NgModule` or other `InjectorType`, or by specifying that this injectable should be\n *   provided in the `'root'` injector, which will be the application-level injector in most apps.\n * * `factory` gives the zero argument function which will create an instance of the injectable.\n *   The factory can call `inject` to access the `Injector` and request injection of dependencies.\n *\n * @experimental\n */\nfunction defineInjectable(opts) {\n    return {\n        providedIn: opts.providedIn || null, factory: opts.factory, value: undefined,\n    };\n}\n/**\n * Construct an `InjectorDef` which configures an injector.\n *\n * This should be assigned to a static `ngInjectorDef` field on a type, which will then be an\n * `InjectorType`.\n *\n * Options:\n *\n * * `factory`: an `InjectorType` is an instantiable type, so a zero argument `factory` function to\n *   create the type must be provided. If that factory function needs to inject arguments, it can\n *   use the `inject` function.\n * * `providers`: an optional array of providers to add to the injector. Each provider must\n *   either have a factory or point to a type which has an `ngInjectableDef` static property (the\n *   type must be an `InjectableType`).\n * * `imports`: an optional array of imports of other `InjectorType`s or `InjectorTypeWithModule`s\n *   whose providers will also be added to the injector. Locally provided types will override\n *   providers from imports.\n *\n * @experimental\n */\nfunction defineInjector(options) {\n    return {\n        factory: options.factory, providers: options.providers || [], imports: options.imports || [],\n    };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Creates a token that can be used in a DI Provider.\n *\n * Use an `InjectionToken` whenever the type you are injecting is not reified (does not have a\n * runtime representation) such as when injecting an interface, callable type, array or\n * parametrized type.\n *\n * `InjectionToken` is parameterized on `T` which is the type of object which will be returned by\n * the `Injector`. This provides additional level of type safety.\n *\n * ```\n * interface MyInterface {...}\n * var myInterface = injector.get(new InjectionToken<MyInterface>('SomeToken'));\n * // myInterface is inferred to be MyInterface.\n * ```\n *\n * When creating an `InjectionToken`, you can optionally specify a factory function which returns\n * (possibly by creating) a default value of the parameterized type `T`. This sets up the\n * `InjectionToken` using this factory as a provider as if it was defined explicitly in the\n * application's root injector. If the factory function, which takes zero arguments, needs to inject\n * dependencies, it can do so using the `inject` function. See below for an example.\n *\n * Additionally, if a `factory` is specified you can also specify the `providedIn` option, which\n * overrides the above behavior and marks the token as belonging to a particular `@NgModule`. As\n * mentioned above, `'root'` is the default value for `providedIn`.\n *\n * ### Example\n *\n * #### Tree-shakeable InjectionToken\n *\n * {@example core/di/ts/injector_spec.ts region='ShakeableInjectionToken'}\n *\n * #### Plain InjectionToken\n *\n * {@example core/di/ts/injector_spec.ts region='InjectionToken'}\n *\n *\n */\nvar InjectionToken = /** @class */ (function () {\n    function InjectionToken(_desc, options) {\n        this._desc = _desc;\n        /** @internal */\n        this.ngMetadataName = 'InjectionToken';\n        if (options !== undefined) {\n            this.ngInjectableDef = defineInjectable({\n                providedIn: options.providedIn || 'root',\n                factory: options.factory,\n            });\n        }\n        else {\n            this.ngInjectableDef = undefined;\n        }\n    }\n    InjectionToken.prototype.toString = function () { return \"InjectionToken \" + this._desc; };\n    return InjectionToken;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ANNOTATIONS = '__annotations__';\nvar PARAMETERS = '__parameters__';\nvar PROP_METADATA = '__prop__metadata__';\n/**\n * @suppress {globalThis}\n */\nfunction makeDecorator(name, props, parentClass, chainFn, typeFn) {\n    var metaCtor = makeMetadataCtor(props);\n    function DecoratorFactory() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this instanceof DecoratorFactory) {\n            metaCtor.call.apply(metaCtor, __spread([this], args));\n            return this;\n        }\n        var annotationInstance = new ((_a = DecoratorFactory).bind.apply(_a, __spread([void 0], args)))();\n        var TypeDecorator = function TypeDecorator(cls) {\n            typeFn && typeFn.apply(void 0, __spread([cls], args));\n            // Use of Object.defineProperty is important since it creates non-enumerable property which\n            // prevents the property is copied during subclassing.\n            var annotations = cls.hasOwnProperty(ANNOTATIONS) ?\n                cls[ANNOTATIONS] :\n                Object.defineProperty(cls, ANNOTATIONS, { value: [] })[ANNOTATIONS];\n            annotations.push(annotationInstance);\n            return cls;\n        };\n        if (chainFn)\n            chainFn(TypeDecorator);\n        return TypeDecorator;\n        var _a;\n    }\n    if (parentClass) {\n        DecoratorFactory.prototype = Object.create(parentClass.prototype);\n    }\n    DecoratorFactory.prototype.ngMetadataName = name;\n    DecoratorFactory.annotationCls = DecoratorFactory;\n    return DecoratorFactory;\n}\nfunction makeMetadataCtor(props) {\n    return function ctor() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (props) {\n            var values = props.apply(void 0, __spread(args));\n            for (var propName in values) {\n                this[propName] = values[propName];\n            }\n        }\n    };\n}\nfunction makeParamDecorator(name, props, parentClass) {\n    var metaCtor = makeMetadataCtor(props);\n    function ParamDecoratorFactory() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this instanceof ParamDecoratorFactory) {\n            metaCtor.apply(this, args);\n            return this;\n        }\n        var annotationInstance = new ((_a = ParamDecoratorFactory).bind.apply(_a, __spread([void 0], args)))();\n        ParamDecorator.annotation = annotationInstance;\n        return ParamDecorator;\n        function ParamDecorator(cls, unusedKey, index) {\n            // Use of Object.defineProperty is important since it creates non-enumerable property which\n            // prevents the property is copied during subclassing.\n            var parameters = cls.hasOwnProperty(PARAMETERS) ?\n                cls[PARAMETERS] :\n                Object.defineProperty(cls, PARAMETERS, { value: [] })[PARAMETERS];\n            // there might be gaps if some in between parameters do not have annotations.\n            // we pad with nulls.\n            while (parameters.length <= index) {\n                parameters.push(null);\n            }\n            (parameters[index] = parameters[index] || []).push(annotationInstance);\n            return cls;\n        }\n        var _a;\n    }\n    if (parentClass) {\n        ParamDecoratorFactory.prototype = Object.create(parentClass.prototype);\n    }\n    ParamDecoratorFactory.prototype.ngMetadataName = name;\n    ParamDecoratorFactory.annotationCls = ParamDecoratorFactory;\n    return ParamDecoratorFactory;\n}\nfunction makePropDecorator(name, props, parentClass) {\n    var metaCtor = makeMetadataCtor(props);\n    function PropDecoratorFactory() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this instanceof PropDecoratorFactory) {\n            metaCtor.apply(this, args);\n            return this;\n        }\n        var decoratorInstance = new ((_a = PropDecoratorFactory).bind.apply(_a, __spread([void 0], args)))();\n        return function PropDecorator(target, name) {\n            var constructor = target.constructor;\n            // Use of Object.defineProperty is important since it creates non-enumerable property which\n            // prevents the property is copied during subclassing.\n            var meta = constructor.hasOwnProperty(PROP_METADATA) ?\n                constructor[PROP_METADATA] :\n                Object.defineProperty(constructor, PROP_METADATA, { value: {} })[PROP_METADATA];\n            meta[name] = meta.hasOwnProperty(name) && meta[name] || [];\n            meta[name].unshift(decoratorInstance);\n        };\n        var _a;\n    }\n    if (parentClass) {\n        PropDecoratorFactory.prototype = Object.create(parentClass.prototype);\n    }\n    PropDecoratorFactory.prototype.ngMetadataName = name;\n    PropDecoratorFactory.annotationCls = PropDecoratorFactory;\n    return PropDecoratorFactory;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * This token can be used to create a virtual provider that will populate the\n * `entryComponents` fields of components and ng modules based on its `useValue`.\n * All components that are referenced in the `useValue` value (either directly\n * or in a nested array or map) will be added to the `entryComponents` property.\n *\n * ### Example\n * The following example shows how the router can populate the `entryComponents`\n * field of an NgModule based on the router configuration which refers\n * to components.\n *\n * ```typescript\n * // helper function inside the router\n * function provideRoutes(routes) {\n *   return [\n *     {provide: ROUTES, useValue: routes},\n *     {provide: ANALYZE_FOR_ENTRY_COMPONENTS, useValue: routes, multi: true}\n *   ];\n * }\n *\n * // user code\n * let routes = [\n *   {path: '/root', component: RootComp},\n *   {path: '/teams', component: TeamsComp}\n * ];\n *\n * @NgModule({\n *   providers: [provideRoutes(routes)]\n * })\n * class ModuleWithRoutes {}\n * ```\n *\n * @experimental\n */\nvar ANALYZE_FOR_ENTRY_COMPONENTS = new InjectionToken('AnalyzeForEntryComponents');\n/**\n * Attribute decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Attribute$1 = makeParamDecorator('Attribute', function (attributeName) { return ({ attributeName: attributeName }); });\n/**\n * Base class for query metadata.\n *\n * See {@link ContentChildren}, {@link ContentChild}, {@link ViewChildren}, {@link ViewChild} for\n * more information.\n *\n *\n */\nvar Query = /** @class */ (function () {\n    function Query() {\n    }\n    return Query;\n}());\n/**\n * ContentChildren decorator and metadata.\n *\n *\n *  @Annotation\n */\nvar ContentChildren = makePropDecorator('ContentChildren', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: false, isViewQuery: false, descendants: false }, data));\n}, Query);\n/**\n * ContentChild decorator and metadata.\n *\n *\n * @Annotation\n */\nvar ContentChild = makePropDecorator('ContentChild', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: true, isViewQuery: false, descendants: true }, data));\n}, Query);\n/**\n * ViewChildren decorator and metadata.\n *\n *\n * @Annotation\n */\nvar ViewChildren = makePropDecorator('ViewChildren', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: false, isViewQuery: true, descendants: true }, data));\n}, Query);\n/**\n * ViewChild decorator and metadata.\n *\n *\n * @Annotation\n */\nvar ViewChild = makePropDecorator('ViewChild', function (selector, data) {\n    return (__assign({ selector: selector, first: true, isViewQuery: true, descendants: true }, data));\n}, Query);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Describes within the change detector which strategy will be used the next time change\n * detection is triggered.\n *\n */\n/**\n * Describes within the change detector which strategy will be used the next time change\n * detection is triggered.\n *\n */\nvar ChangeDetectionStrategy$1;\n/**\n * Describes within the change detector which strategy will be used the next time change\n * detection is triggered.\n *\n */\n(function (ChangeDetectionStrategy) {\n    /**\n     * `OnPush` means that the change detector's mode will be initially set to `CheckOnce`.\n     */\n    ChangeDetectionStrategy[ChangeDetectionStrategy[\"OnPush\"] = 0] = \"OnPush\";\n    /**\n     * `Default` means that the change detector's mode will be initially set to `CheckAlways`.\n     */\n    ChangeDetectionStrategy[ChangeDetectionStrategy[\"Default\"] = 1] = \"Default\";\n})(ChangeDetectionStrategy$1 || (ChangeDetectionStrategy$1 = {}));\n/**\n * Describes the status of the detector.\n */\n/**\n * Describes the status of the detector.\n */\nvar ChangeDetectorStatus;\n/**\n * Describes the status of the detector.\n */\n(function (ChangeDetectorStatus) {\n    /**\n     * `CheckOnce` means that after calling detectChanges the mode of the change detector\n     * will become `Checked`.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"CheckOnce\"] = 0] = \"CheckOnce\";\n    /**\n     * `Checked` means that the change detector should be skipped until its mode changes to\n     * `CheckOnce`.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"Checked\"] = 1] = \"Checked\";\n    /**\n     * `CheckAlways` means that after calling detectChanges the mode of the change detector\n     * will remain `CheckAlways`.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"CheckAlways\"] = 2] = \"CheckAlways\";\n    /**\n     * `Detached` means that the change detector sub tree is not a part of the main tree and\n     * should be skipped.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"Detached\"] = 3] = \"Detached\";\n    /**\n     * `Errored` means that the change detector encountered an error checking a binding\n     * or calling a directive lifecycle method and is now in an inconsistent state. Change\n     * detectors in this state will no longer detect changes.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"Errored\"] = 4] = \"Errored\";\n    /**\n     * `Destroyed` means that the change detector is destroyed.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"Destroyed\"] = 5] = \"Destroyed\";\n})(ChangeDetectorStatus || (ChangeDetectorStatus = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Directive decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Directive = makeDecorator('Directive', function (dir) {\n    if (dir === void 0) { dir = {}; }\n    return dir;\n});\n/**\n * Component decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Component = makeDecorator('Component', function (c) {\n    if (c === void 0) { c = {}; }\n    return (__assign({ changeDetection: ChangeDetectionStrategy$1.Default }, c));\n}, Directive);\n/**\n * Pipe decorator and metadata.\n *\n * Use the `@Pipe` annotation to declare that a given class is a pipe. A pipe\n * class must also implement {@link PipeTransform} interface.\n *\n * To use the pipe include a reference to the pipe class in\n * {@link NgModule#declarations}.\n *\n *\n * @Annotation\n */\nvar Pipe = makeDecorator('Pipe', function (p) { return (__assign({ pure: true }, p)); });\n/**\n * Input decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Input = makePropDecorator('Input', function (bindingPropertyName) { return ({ bindingPropertyName: bindingPropertyName }); });\n/**\n * Output decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Output = makePropDecorator('Output', function (bindingPropertyName) { return ({ bindingPropertyName: bindingPropertyName }); });\n/**\n * HostBinding decorator and metadata.\n *\n *\n * @Annotation\n */\nvar HostBinding = makePropDecorator('HostBinding', function (hostPropertyName) { return ({ hostPropertyName: hostPropertyName }); });\n/**\n * HostListener decorator and metadata.\n *\n *\n * @Annotation\n */\nvar HostListener = makePropDecorator('HostListener', function (eventName, args) { return ({ eventName: eventName, args: args }); });\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Represents a type that a Component or other object is instances of.\n *\n * An example of a `Type` is `MyCustomComponent` class, which in JavaScript is be represented by\n * the `MyCustomComponent` constructor function.\n *\n *\n */\nvar Type$2 = Function;\nfunction isType(v) {\n    return typeof v === 'function';\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar __window = typeof window !== 'undefined' && window;\nvar __self = typeof self !== 'undefined' && typeof WorkerGlobalScope !== 'undefined' &&\n    self instanceof WorkerGlobalScope && self;\nvar __global = typeof global !== 'undefined' && global;\nvar _global = __window || __global || __self;\nvar promise = Promise.resolve(0);\nvar _symbolIterator = null;\nfunction getSymbolIterator() {\n    if (!_symbolIterator) {\n        var Symbol_1 = _global['Symbol'];\n        if (Symbol_1 && Symbol_1.iterator) {\n            _symbolIterator = Symbol_1.iterator;\n        }\n        else {\n            // es6-shim specific logic\n            var keys = Object.getOwnPropertyNames(Map.prototype);\n            for (var i = 0; i < keys.length; ++i) {\n                var key = keys[i];\n                if (key !== 'entries' && key !== 'size' &&\n                    Map.prototype[key] === Map.prototype['entries']) {\n                    _symbolIterator = key;\n                }\n            }\n        }\n    }\n    return _symbolIterator;\n}\nfunction scheduleMicroTask(fn) {\n    if (typeof Zone === 'undefined') {\n        // use promise to schedule microTask instead of use Zone\n        promise.then(function () { fn && fn.apply(null, null); });\n    }\n    else {\n        Zone.current.scheduleMicroTask('scheduleMicrotask', fn);\n    }\n}\n// JS has NaN !== NaN\nfunction looseIdentical(a, b) {\n    return a === b || typeof a === 'number' && typeof b === 'number' && isNaN(a) && isNaN(b);\n}\nfunction stringify$1(token) {\n    if (typeof token === 'string') {\n        return token;\n    }\n    if (token instanceof Array) {\n        return '[' + token.map(stringify$1).join(', ') + ']';\n    }\n    if (token == null) {\n        return '' + token;\n    }\n    if (token.overriddenName) {\n        return \"\" + token.overriddenName;\n    }\n    if (token.name) {\n        return \"\" + token.name;\n    }\n    var res = token.toString();\n    if (res == null) {\n        return '' + res;\n    }\n    var newLineIndex = res.indexOf('\\n');\n    return newLineIndex === -1 ? res : res.substring(0, newLineIndex);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Attention: These regex has to hold even if the code is minified!\n */\nvar DELEGATE_CTOR = /^function\\s+\\S+\\(\\)\\s*{[\\s\\S]+\\.apply\\(this,\\s*arguments\\)/;\nvar INHERITED_CLASS = /^class\\s+[A-Za-z\\d$_]*\\s*extends\\s+[A-Za-z\\d$_]+\\s*{/;\nvar INHERITED_CLASS_WITH_CTOR = /^class\\s+[A-Za-z\\d$_]*\\s*extends\\s+[A-Za-z\\d$_]+\\s*{[\\s\\S]*constructor\\s*\\(/;\nvar ReflectionCapabilities = /** @class */ (function () {\n    function ReflectionCapabilities(reflect) {\n        this._reflect = reflect || _global['Reflect'];\n    }\n    ReflectionCapabilities.prototype.isReflectionEnabled = function () { return true; };\n    ReflectionCapabilities.prototype.factory = function (t) { return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return new (t.bind.apply(t, __spread([void 0], args)))();\n    }; };\n    /** @internal */\n    /** @internal */\n    ReflectionCapabilities.prototype._zipTypesAndAnnotations = /** @internal */\n    function (paramTypes, paramAnnotations) {\n        var result;\n        if (typeof paramTypes === 'undefined') {\n            result = new Array(paramAnnotations.length);\n        }\n        else {\n            result = new Array(paramTypes.length);\n        }\n        for (var i = 0; i < result.length; i++) {\n            // TS outputs Object for parameters without types, while Traceur omits\n            // the annotations. For now we preserve the Traceur behavior to aid\n            // migration, but this can be revisited.\n            if (typeof paramTypes === 'undefined') {\n                result[i] = [];\n            }\n            else if (paramTypes[i] != Object) {\n                result[i] = [paramTypes[i]];\n            }\n            else {\n                result[i] = [];\n            }\n            if (paramAnnotations && paramAnnotations[i] != null) {\n                result[i] = result[i].concat(paramAnnotations[i]);\n            }\n        }\n        return result;\n    };\n    ReflectionCapabilities.prototype._ownParameters = function (type, parentCtor) {\n        var typeStr = type.toString();\n        // If we have no decorators, we only have function.length as metadata.\n        // In that case, to detect whether a child class declared an own constructor or not,\n        // we need to look inside of that constructor to check whether it is\n        // just calling the parent.\n        // This also helps to work around for https://github.com/Microsoft/TypeScript/issues/12439\n        // that sets 'design:paramtypes' to []\n        // if a class inherits from another class but has no ctor declared itself.\n        if (DELEGATE_CTOR.exec(typeStr) ||\n            (INHERITED_CLASS.exec(typeStr) && !INHERITED_CLASS_WITH_CTOR.exec(typeStr))) {\n            return null;\n        }\n        // Prefer the direct API.\n        if (type.parameters && type.parameters !== parentCtor.parameters) {\n            return type.parameters;\n        }\n        // API of tsickle for lowering decorators to properties on the class.\n        var tsickleCtorParams = type.ctorParameters;\n        if (tsickleCtorParams && tsickleCtorParams !== parentCtor.ctorParameters) {\n            // Newer tsickle uses a function closure\n            // Retain the non-function case for compatibility with older tsickle\n            var ctorParameters = typeof tsickleCtorParams === 'function' ? tsickleCtorParams() : tsickleCtorParams;\n            var paramTypes_1 = ctorParameters.map(function (ctorParam) { return ctorParam && ctorParam.type; });\n            var paramAnnotations_1 = ctorParameters.map(function (ctorParam) {\n                return ctorParam && convertTsickleDecoratorIntoMetadata(ctorParam.decorators);\n            });\n            return this._zipTypesAndAnnotations(paramTypes_1, paramAnnotations_1);\n        }\n        // API for metadata created by invoking the decorators.\n        var paramAnnotations = type.hasOwnProperty(PARAMETERS) && type[PARAMETERS];\n        var paramTypes = this._reflect && this._reflect.getOwnMetadata &&\n            this._reflect.getOwnMetadata('design:paramtypes', type);\n        if (paramTypes || paramAnnotations) {\n            return this._zipTypesAndAnnotations(paramTypes, paramAnnotations);\n        }\n        // If a class has no decorators, at least create metadata\n        // based on function.length.\n        // Note: We know that this is a real constructor as we checked\n        // the content of the constructor above.\n        return new Array(type.length).fill(undefined);\n    };\n    ReflectionCapabilities.prototype.parameters = function (type) {\n        // Note: only report metadata if we have at least one class decorator\n        // to stay in sync with the static reflector.\n        if (!isType(type)) {\n            return [];\n        }\n        var parentCtor = getParentCtor(type);\n        var parameters = this._ownParameters(type, parentCtor);\n        if (!parameters && parentCtor !== Object) {\n            parameters = this.parameters(parentCtor);\n        }\n        return parameters || [];\n    };\n    ReflectionCapabilities.prototype._ownAnnotations = function (typeOrFunc, parentCtor) {\n        // Prefer the direct API.\n        if (typeOrFunc.annotations && typeOrFunc.annotations !== parentCtor.annotations) {\n            var annotations = typeOrFunc.annotations;\n            if (typeof annotations === 'function' && annotations.annotations) {\n                annotations = annotations.annotations;\n            }\n            return annotations;\n        }\n        // API of tsickle for lowering decorators to properties on the class.\n        if (typeOrFunc.decorators && typeOrFunc.decorators !== parentCtor.decorators) {\n            return convertTsickleDecoratorIntoMetadata(typeOrFunc.decorators);\n        }\n        // API for metadata created by invoking the decorators.\n        if (typeOrFunc.hasOwnProperty(ANNOTATIONS)) {\n            return typeOrFunc[ANNOTATIONS];\n        }\n        return null;\n    };\n    ReflectionCapabilities.prototype.annotations = function (typeOrFunc) {\n        if (!isType(typeOrFunc)) {\n            return [];\n        }\n        var parentCtor = getParentCtor(typeOrFunc);\n        var ownAnnotations = this._ownAnnotations(typeOrFunc, parentCtor) || [];\n        var parentAnnotations = parentCtor !== Object ? this.annotations(parentCtor) : [];\n        return parentAnnotations.concat(ownAnnotations);\n    };\n    ReflectionCapabilities.prototype._ownPropMetadata = function (typeOrFunc, parentCtor) {\n        // Prefer the direct API.\n        if (typeOrFunc.propMetadata &&\n            typeOrFunc.propMetadata !== parentCtor.propMetadata) {\n            var propMetadata = typeOrFunc.propMetadata;\n            if (typeof propMetadata === 'function' && propMetadata.propMetadata) {\n                propMetadata = propMetadata.propMetadata;\n            }\n            return propMetadata;\n        }\n        // API of tsickle for lowering decorators to properties on the class.\n        if (typeOrFunc.propDecorators &&\n            typeOrFunc.propDecorators !== parentCtor.propDecorators) {\n            var propDecorators_1 = typeOrFunc.propDecorators;\n            var propMetadata_1 = {};\n            Object.keys(propDecorators_1).forEach(function (prop) {\n                propMetadata_1[prop] = convertTsickleDecoratorIntoMetadata(propDecorators_1[prop]);\n            });\n            return propMetadata_1;\n        }\n        // API for metadata created by invoking the decorators.\n        if (typeOrFunc.hasOwnProperty(PROP_METADATA)) {\n            return typeOrFunc[PROP_METADATA];\n        }\n        return null;\n    };\n    ReflectionCapabilities.prototype.propMetadata = function (typeOrFunc) {\n        if (!isType(typeOrFunc)) {\n            return {};\n        }\n        var parentCtor = getParentCtor(typeOrFunc);\n        var propMetadata = {};\n        if (parentCtor !== Object) {\n            var parentPropMetadata_1 = this.propMetadata(parentCtor);\n            Object.keys(parentPropMetadata_1).forEach(function (propName) {\n                propMetadata[propName] = parentPropMetadata_1[propName];\n            });\n        }\n        var ownPropMetadata = this._ownPropMetadata(typeOrFunc, parentCtor);\n        if (ownPropMetadata) {\n            Object.keys(ownPropMetadata).forEach(function (propName) {\n                var decorators = [];\n                if (propMetadata.hasOwnProperty(propName)) {\n                    decorators.push.apply(decorators, __spread(propMetadata[propName]));\n                }\n                decorators.push.apply(decorators, __spread(ownPropMetadata[propName]));\n                propMetadata[propName] = decorators;\n            });\n        }\n        return propMetadata;\n    };\n    ReflectionCapabilities.prototype.hasLifecycleHook = function (type, lcProperty) {\n        return type instanceof Type$2 && lcProperty in type.prototype;\n    };\n    ReflectionCapabilities.prototype.guards = function (type) { return {}; };\n    ReflectionCapabilities.prototype.getter = function (name) { return new Function('o', 'return o.' + name + ';'); };\n    ReflectionCapabilities.prototype.setter = function (name) {\n        return new Function('o', 'v', 'return o.' + name + ' = v;');\n    };\n    ReflectionCapabilities.prototype.method = function (name) {\n        var functionBody = \"if (!o.\" + name + \") throw new Error('\\\"\" + name + \"\\\" is undefined');\\n        return o.\" + name + \".apply(o, args);\";\n        return new Function('o', 'args', functionBody);\n    };\n    // There is not a concept of import uri in Js, but this is useful in developing Dart applications.\n    // There is not a concept of import uri in Js, but this is useful in developing Dart applications.\n    ReflectionCapabilities.prototype.importUri = \n    // There is not a concept of import uri in Js, but this is useful in developing Dart applications.\n    function (type) {\n        // StaticSymbol\n        if (typeof type === 'object' && type['filePath']) {\n            return type['filePath'];\n        }\n        // Runtime type\n        return \"./\" + stringify$1(type);\n    };\n    ReflectionCapabilities.prototype.resourceUri = function (type) { return \"./\" + stringify$1(type); };\n    ReflectionCapabilities.prototype.resolveIdentifier = function (name, moduleUrl, members, runtime) {\n        return runtime;\n    };\n    ReflectionCapabilities.prototype.resolveEnum = function (enumIdentifier, name) { return enumIdentifier[name]; };\n    return ReflectionCapabilities;\n}());\nfunction convertTsickleDecoratorIntoMetadata(decoratorInvocations) {\n    if (!decoratorInvocations) {\n        return [];\n    }\n    return decoratorInvocations.map(function (decoratorInvocation) {\n        var decoratorType = decoratorInvocation.type;\n        var annotationCls = decoratorType.annotationCls;\n        var annotationArgs = decoratorInvocation.args ? decoratorInvocation.args : [];\n        return new (annotationCls.bind.apply(annotationCls, __spread([void 0], annotationArgs)))();\n    });\n}\nfunction getParentCtor(ctor) {\n    var parentProto = ctor.prototype ? Object.getPrototypeOf(ctor.prototype) : null;\n    var parentCtor = parentProto ? parentProto.constructor : null;\n    // Note: We always use `Object` as the null value\n    // to simplify checking later on.\n    return parentCtor || Object;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction getClosureSafeProperty(objWithPropertyToExtract, target) {\n    for (var key in objWithPropertyToExtract) {\n        if (objWithPropertyToExtract[key] === target) {\n            return key;\n        }\n    }\n    throw Error('Could not find renamed property on target object.');\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Allows to refer to references which are not yet defined.\n *\n * For instance, `forwardRef` is used when the `token` which we need to refer to for the purposes of\n * DI is declared,\n * but not yet defined. It is also used when the `token` which we use when creating a query is not\n * yet defined.\n *\n * ### Example\n * {@example core/di/ts/forward_ref/forward_ref_spec.ts region='forward_ref'}\n * @experimental\n */\nfunction forwardRef(forwardRefFn) {\n    forwardRefFn.__forward_ref__ = forwardRef;\n    forwardRefFn.toString = function () { return stringify$1(this()); };\n    return forwardRefFn;\n}\n/**\n * Lazily retrieves the reference value from a forwardRef.\n *\n * Acts as the identity function when given a non-forward-ref value.\n *\n * ### Example ([live demo](http://plnkr.co/edit/GU72mJrk1fiodChcmiDR?p=preview))\n *\n * {@example core/di/ts/forward_ref/forward_ref_spec.ts region='resolve_forward_ref'}\n *\n * See: {@link forwardRef}\n * @experimental\n */\nfunction resolveForwardRef$1(type) {\n    if (typeof type === 'function' && type.hasOwnProperty('__forward_ref__') &&\n        type.__forward_ref__ === forwardRef) {\n        return type();\n    }\n    else {\n        return type;\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Inject decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Inject = makeParamDecorator('Inject', function (token) { return ({ token: token }); });\n/**\n * Optional decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Optional = makeParamDecorator('Optional');\n/**\n * Self decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Self = makeParamDecorator('Self');\n/**\n * SkipSelf decorator and metadata.\n *\n *\n * @Annotation\n */\nvar SkipSelf = makeParamDecorator('SkipSelf');\n/**\n * Host decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Host = makeParamDecorator('Host');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar SOURCE$1 = '__source';\nvar _THROW_IF_NOT_FOUND = new Object();\nvar THROW_IF_NOT_FOUND = _THROW_IF_NOT_FOUND;\n/**\n * An InjectionToken that gets the current `Injector` for `createInjector()`-style injectors.\n *\n * Requesting this token instead of `Injector` allows `StaticInjector` to be tree-shaken from a\n * project.\n *\n * @experimental\n */\nvar INJECTOR = new InjectionToken('INJECTOR');\nvar NullInjector = /** @class */ (function () {\n    function NullInjector() {\n    }\n    NullInjector.prototype.get = function (token, notFoundValue) {\n        if (notFoundValue === void 0) { notFoundValue = _THROW_IF_NOT_FOUND; }\n        if (notFoundValue === _THROW_IF_NOT_FOUND) {\n            throw new Error(\"NullInjectorError: No provider for \" + stringify$1(token) + \"!\");\n        }\n        return notFoundValue;\n    };\n    return NullInjector;\n}());\n/**\n * @usageNotes\n * ```\n * const injector: Injector = ...;\n * injector.get(...);\n * ```\n *\n * @description\n *\n * Concrete injectors implement this interface.\n *\n * For more details, see the {@linkDocs guide/dependency-injection \"Dependency Injection Guide\"}.\n *\n * ### Example\n *\n * {@example core/di/ts/injector_spec.ts region='Injector'}\n *\n * `Injector` returns itself when given `Injector` as a token:\n * {@example core/di/ts/injector_spec.ts region='injectInjector'}\n *\n *\n */\nvar Injector = /** @class */ (function () {\n    function Injector() {\n    }\n    /**\n     * Create a new Injector which is configure using `StaticProvider`s.\n     *\n     * ### Example\n     *\n     * {@example core/di/ts/provider_spec.ts region='ConstructorProvider'}\n     */\n    /**\n       * Create a new Injector which is configure using `StaticProvider`s.\n       *\n       * ### Example\n       *\n       * {@example core/di/ts/provider_spec.ts region='ConstructorProvider'}\n       */\n    Injector.create = /**\n       * Create a new Injector which is configure using `StaticProvider`s.\n       *\n       * ### Example\n       *\n       * {@example core/di/ts/provider_spec.ts region='ConstructorProvider'}\n       */\n    function (options, parent) {\n        if (Array.isArray(options)) {\n            return new StaticInjector(options, parent);\n        }\n        else {\n            return new StaticInjector(options.providers, options.parent, options.name || null);\n        }\n    };\n    Injector.THROW_IF_NOT_FOUND = _THROW_IF_NOT_FOUND;\n    Injector.NULL = new NullInjector();\n    Injector.ngInjectableDef = defineInjectable({\n        providedIn: 'any',\n        factory: function () { return inject(INJECTOR); },\n    });\n    return Injector;\n}());\nvar IDENT = function (value) {\n    return value;\n};\nvar EMPTY = [];\nvar CIRCULAR = IDENT;\nvar MULTI_PROVIDER_FN = function () {\n    return Array.prototype.slice.call(arguments);\n};\nvar GET_PROPERTY_NAME$1 = {};\nvar USE_VALUE$2 = getClosureSafeProperty$1({ provide: String, useValue: GET_PROPERTY_NAME$1 });\nvar NG_TOKEN_PATH = 'ngTokenPath';\nvar NG_TEMP_TOKEN_PATH = 'ngTempTokenPath';\nvar NULL_INJECTOR = Injector.NULL;\nvar NEW_LINE = /\\n/gm;\nvar NO_NEW_LINE = '';\nvar StaticInjector = /** @class */ (function () {\n    function StaticInjector(providers, parent, source) {\n        if (parent === void 0) { parent = NULL_INJECTOR; }\n        if (source === void 0) { source = null; }\n        this.parent = parent;\n        this.source = source;\n        var records = this._records = new Map();\n        records.set(Injector, { token: Injector, fn: IDENT, deps: EMPTY, value: this, useNew: false });\n        records.set(INJECTOR, { token: INJECTOR, fn: IDENT, deps: EMPTY, value: this, useNew: false });\n        recursivelyProcessProviders(records, providers);\n    }\n    StaticInjector.prototype.get = function (token, notFoundValue, flags) {\n        if (flags === void 0) { flags = 0 /* Default */; }\n        var record = this._records.get(token);\n        try {\n            return tryResolveToken(token, record, this._records, this.parent, notFoundValue, flags);\n        }\n        catch (e) {\n            var tokenPath = e[NG_TEMP_TOKEN_PATH];\n            if (token[SOURCE$1]) {\n                tokenPath.unshift(token[SOURCE$1]);\n            }\n            e.message = formatError('\\n' + e.message, tokenPath, this.source);\n            e[NG_TOKEN_PATH] = tokenPath;\n            e[NG_TEMP_TOKEN_PATH] = null;\n            throw e;\n        }\n    };\n    StaticInjector.prototype.toString = function () {\n        var tokens = [], records = this._records;\n        records.forEach(function (v, token) { return tokens.push(stringify$1(token)); });\n        return \"StaticInjector[\" + tokens.join(', ') + \"]\";\n    };\n    return StaticInjector;\n}());\nfunction resolveProvider(provider) {\n    var deps = computeDeps(provider);\n    var fn = IDENT;\n    var value = EMPTY;\n    var useNew = false;\n    var provide = resolveForwardRef$1(provider.provide);\n    if (USE_VALUE$2 in provider) {\n        // We need to use USE_VALUE in provider since provider.useValue could be defined as undefined.\n        value = provider.useValue;\n    }\n    else if (provider.useFactory) {\n        fn = provider.useFactory;\n    }\n    else if (provider.useExisting) {\n        // Just use IDENT\n    }\n    else if (provider.useClass) {\n        useNew = true;\n        fn = resolveForwardRef$1(provider.useClass);\n    }\n    else if (typeof provide == 'function') {\n        useNew = true;\n        fn = provide;\n    }\n    else {\n        throw staticError('StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable', provider);\n    }\n    return { deps: deps, fn: fn, useNew: useNew, value: value };\n}\nfunction multiProviderMixError(token) {\n    return staticError('Cannot mix multi providers and regular providers', token);\n}\nfunction recursivelyProcessProviders(records, provider) {\n    if (provider) {\n        provider = resolveForwardRef$1(provider);\n        if (provider instanceof Array) {\n            // if we have an array recurse into the array\n            for (var i = 0; i < provider.length; i++) {\n                recursivelyProcessProviders(records, provider[i]);\n            }\n        }\n        else if (typeof provider === 'function') {\n            // Functions were supported in ReflectiveInjector, but are not here. For safety give useful\n            // error messages\n            throw staticError('Function/Class not supported', provider);\n        }\n        else if (provider && typeof provider === 'object' && provider.provide) {\n            // At this point we have what looks like a provider: {provide: ?, ....}\n            var token = resolveForwardRef$1(provider.provide);\n            var resolvedProvider = resolveProvider(provider);\n            if (provider.multi === true) {\n                // This is a multi provider.\n                var multiProvider = records.get(token);\n                if (multiProvider) {\n                    if (multiProvider.fn !== MULTI_PROVIDER_FN) {\n                        throw multiProviderMixError(token);\n                    }\n                }\n                else {\n                    // Create a placeholder factory which will look up the constituents of the multi provider.\n                    records.set(token, multiProvider = {\n                        token: provider.provide,\n                        deps: [],\n                        useNew: false,\n                        fn: MULTI_PROVIDER_FN,\n                        value: EMPTY\n                    });\n                }\n                // Treat the provider as the token.\n                token = provider;\n                multiProvider.deps.push({ token: token, options: 6 /* Default */ });\n            }\n            var record = records.get(token);\n            if (record && record.fn == MULTI_PROVIDER_FN) {\n                throw multiProviderMixError(token);\n            }\n            records.set(token, resolvedProvider);\n        }\n        else {\n            throw staticError('Unexpected provider', provider);\n        }\n    }\n}\nfunction tryResolveToken(token, record, records, parent, notFoundValue, flags) {\n    try {\n        return resolveToken(token, record, records, parent, notFoundValue, flags);\n    }\n    catch (e) {\n        // ensure that 'e' is of type Error.\n        if (!(e instanceof Error)) {\n            e = new Error(e);\n        }\n        var path$$1 = e[NG_TEMP_TOKEN_PATH] = e[NG_TEMP_TOKEN_PATH] || [];\n        path$$1.unshift(token);\n        if (record && record.value == CIRCULAR) {\n            // Reset the Circular flag.\n            record.value = EMPTY;\n        }\n        throw e;\n    }\n}\nfunction resolveToken(token, record, records, parent, notFoundValue, flags) {\n    var value;\n    if (record && !(flags & 4 /* SkipSelf */)) {\n        // If we don't have a record, this implies that we don't own the provider hence don't know how\n        // to resolve it.\n        value = record.value;\n        if (value == CIRCULAR) {\n            throw Error(NO_NEW_LINE + 'Circular dependency');\n        }\n        else if (value === EMPTY) {\n            record.value = CIRCULAR;\n            var obj = undefined;\n            var useNew = record.useNew;\n            var fn = record.fn;\n            var depRecords = record.deps;\n            var deps = EMPTY;\n            if (depRecords.length) {\n                deps = [];\n                for (var i = 0; i < depRecords.length; i++) {\n                    var depRecord = depRecords[i];\n                    var options = depRecord.options;\n                    var childRecord = options & 2 /* CheckSelf */ ? records.get(depRecord.token) : undefined;\n                    deps.push(tryResolveToken(\n                    // Current Token to resolve\n                    depRecord.token, childRecord, records, \n                    // If we don't know how to resolve dependency and we should not check parent for it,\n                    // than pass in Null injector.\n                    !childRecord && !(options & 4 /* CheckParent */) ? NULL_INJECTOR : parent, options & 1 /* Optional */ ? null : Injector.THROW_IF_NOT_FOUND, 0 /* Default */));\n                }\n            }\n            record.value = value = useNew ? new ((_a = fn).bind.apply(_a, __spread([void 0], deps)))() : fn.apply(obj, deps);\n        }\n    }\n    else if (!(flags & 2 /* Self */)) {\n        value = parent.get(token, notFoundValue, 0 /* Default */);\n    }\n    return value;\n    var _a;\n}\nfunction computeDeps(provider) {\n    var deps = EMPTY;\n    var providerDeps = provider.deps;\n    if (providerDeps && providerDeps.length) {\n        deps = [];\n        for (var i = 0; i < providerDeps.length; i++) {\n            var options = 6;\n            var token = resolveForwardRef$1(providerDeps[i]);\n            if (token instanceof Array) {\n                for (var j = 0, annotations = token; j < annotations.length; j++) {\n                    var annotation = annotations[j];\n                    if (annotation instanceof Optional || annotation == Optional) {\n                        options = options | 1 /* Optional */;\n                    }\n                    else if (annotation instanceof SkipSelf || annotation == SkipSelf) {\n                        options = options & ~2 /* CheckSelf */;\n                    }\n                    else if (annotation instanceof Self || annotation == Self) {\n                        options = options & ~4 /* CheckParent */;\n                    }\n                    else if (annotation instanceof Inject) {\n                        token = annotation.token;\n                    }\n                    else {\n                        token = resolveForwardRef$1(annotation);\n                    }\n                }\n            }\n            deps.push({ token: token, options: options });\n        }\n    }\n    else if (provider.useExisting) {\n        var token = resolveForwardRef$1(provider.useExisting);\n        deps = [{ token: token, options: 6 /* Default */ }];\n    }\n    else if (!providerDeps && !(USE_VALUE$2 in provider)) {\n        // useValue & useExisting are the only ones which are exempt from deps all others need it.\n        throw staticError('\\'deps\\' required', provider);\n    }\n    return deps;\n}\nfunction formatError(text, obj, source) {\n    if (source === void 0) { source = null; }\n    text = text && text.charAt(0) === '\\n' && text.charAt(1) == NO_NEW_LINE ? text.substr(2) : text;\n    var context = stringify$1(obj);\n    if (obj instanceof Array) {\n        context = obj.map(stringify$1).join(' -> ');\n    }\n    else if (typeof obj === 'object') {\n        var parts = [];\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                var value = obj[key];\n                parts.push(key + ':' + (typeof value === 'string' ? JSON.stringify(value) : stringify$1(value)));\n            }\n        }\n        context = \"{\" + parts.join(', ') + \"}\";\n    }\n    return \"StaticInjectorError\" + (source ? '(' + source + ')' : '') + \"[\" + context + \"]: \" + text.replace(NEW_LINE, '\\n  ');\n}\nfunction staticError(text, obj) {\n    return new Error(formatError(text, obj));\n}\nfunction getClosureSafeProperty$1(objWithPropertyToExtract) {\n    for (var key in objWithPropertyToExtract) {\n        if (objWithPropertyToExtract[key] === GET_PROPERTY_NAME$1) {\n            return key;\n        }\n    }\n    throw Error('!prop');\n}\n/**\n * Current injector value used by `inject`.\n * - `undefined`: it is an error to call `inject`\n * - `null`: `inject` can be called but there is no injector (limp-mode).\n * - Injector instance: Use the injector for resolution.\n */\nvar _currentInjector = undefined;\nfunction setCurrentInjector(injector) {\n    var former = _currentInjector;\n    _currentInjector = injector;\n    return former;\n}\nfunction inject(token, flags) {\n    if (flags === void 0) { flags = 0 /* Default */; }\n    if (_currentInjector === undefined) {\n        throw new Error(\"inject() must be called from an injection context\");\n    }\n    else if (_currentInjector === null) {\n        var injectableDef = token.ngInjectableDef;\n        if (injectableDef && injectableDef.providedIn == 'root') {\n            return injectableDef.value === undefined ? injectableDef.value = injectableDef.factory() :\n                injectableDef.value;\n        }\n        throw new Error(\"Injector: NOT_FOUND [\" + stringify$1(token) + \"]\");\n    }\n    else {\n        return _currentInjector.get(token, flags & 8 /* Optional */ ? null : undefined, flags);\n    }\n}\nfunction injectArgs(types) {\n    var args = [];\n    for (var i = 0; i < types.length; i++) {\n        var arg = types[i];\n        if (Array.isArray(arg)) {\n            if (arg.length === 0) {\n                throw new Error('Arguments array must have arguments.');\n            }\n            var type = undefined;\n            var flags = 0;\n            for (var j = 0; j < arg.length; j++) {\n                var meta = arg[j];\n                if (meta instanceof Optional || meta.__proto__.ngMetadataName === 'Optional') {\n                    flags |= 8 /* Optional */;\n                }\n                else if (meta instanceof SkipSelf || meta.__proto__.ngMetadataName === 'SkipSelf') {\n                    flags |= 4 /* SkipSelf */;\n                }\n                else if (meta instanceof Self || meta.__proto__.ngMetadataName === 'Self') {\n                    flags |= 2 /* Self */;\n                }\n                else if (meta instanceof Inject) {\n                    type = meta.token;\n                }\n                else {\n                    type = meta;\n                }\n            }\n            args.push(inject((type), flags));\n        }\n        else {\n            args.push(inject(arg));\n        }\n    }\n    return args;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar GET_PROPERTY_NAME = {};\nvar 0 = GET_PROPERTY_NAME;\nvar USE_VALUE$1 = getClosureSafeProperty({ provide: String, useValue: 0 }, GET_PROPERTY_NAME);\nvar EMPTY_ARRAY$1 = [];\nfunction convertInjectableProviderToFactory(type, provider) {\n    if (!provider) {\n        var reflectionCapabilities = new ReflectionCapabilities();\n        var deps_1 = reflectionCapabilities.parameters(type);\n        // TODO - convert to flags.\n        return function () { return new (type.bind.apply(type, __spread([void 0], injectArgs(deps_1))))(); };\n    }\n    if (USE_VALUE$1 in provider) {\n        var valueProvider_1 = provider;\n        return function () { return valueProvider_1.useValue; };\n    }\n    else if (provider.useExisting) {\n        var existingProvider_1 = provider;\n        return function () { return inject(existingProvider_1.useExisting); };\n    }\n    else if (provider.useFactory) {\n        var factoryProvider_1 = provider;\n        return function () { return factoryProvider_1.useFactory.apply(factoryProvider_1, __spread(injectArgs(factoryProvider_1.deps || EMPTY_ARRAY$1))); };\n    }\n    else if (provider.useClass) {\n        var classProvider_1 = provider;\n        var deps_2 = provider.deps;\n        if (!deps_2) {\n            var reflectionCapabilities = new ReflectionCapabilities();\n            deps_2 = reflectionCapabilities.parameters(type);\n        }\n        return function () {\n            return new ((_a = classProvider_1.useClass).bind.apply(_a, __spread([void 0], injectArgs(deps_2))))();\n            var _a;\n        };\n    }\n    else {\n        var deps_3 = provider.deps;\n        if (!deps_3) {\n            var reflectionCapabilities = new ReflectionCapabilities();\n            deps_3 = reflectionCapabilities.parameters(type);\n        }\n        return function () { return new (type.bind.apply(type, __spread([void 0], injectArgs((deps_3)))))(); };\n    }\n}\n/**\n* Injectable decorator and metadata.\n*\n*\n* @Annotation\n*/\nvar Injectable = makeDecorator('Injectable', undefined, undefined, undefined, function (injectableType, options) {\n    if (options && options.providedIn !== undefined &&\n        injectableType.ngInjectableDef === undefined) {\n        injectableType.ngInjectableDef = defineInjectable({\n            providedIn: options.providedIn,\n            factory: convertInjectableProviderToFactory(injectableType, options)\n        });\n    }\n});\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Defines a schema that will allow:\n * - any non-Angular elements with a `-` in their name,\n * - any properties on elements with a `-` in their name which is the common rule for custom\n * elements.\n *\n *\n */\n\n/**\n * Defines a schema that will allow any property on any element.\n *\n * @experimental\n */\n\n/**\n * NgModule decorator and metadata.\n *\n *\n * @Annotation\n */\nvar NgModule = makeDecorator('NgModule', function (ngModule) { return ngModule; }, undefined, undefined, function (moduleType, metadata) {\n    var imports = (metadata && metadata.imports) || [];\n    if (metadata && metadata.exports) {\n        imports = __spread(imports, [metadata.exports]);\n    }\n    moduleType.ngInjectorDef = defineInjector({\n        factory: convertInjectableProviderToFactory(moduleType, { useClass: moduleType }),\n        providers: metadata && metadata.providers,\n        imports: imports,\n    });\n});\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Defines template and style encapsulation options available for Component's {@link Component}.\n *\n * See {@link Component#encapsulation encapsulation}.\n *\n */\n/**\n * Defines template and style encapsulation options available for Component's {@link Component}.\n *\n * See {@link Component#encapsulation encapsulation}.\n *\n */\nvar ViewEncapsulation$1;\n/**\n * Defines template and style encapsulation options available for Component's {@link Component}.\n *\n * See {@link Component#encapsulation encapsulation}.\n *\n */\n(function (ViewEncapsulation) {\n    /**\n     * Emulate `Native` scoping of styles by adding an attribute containing surrogate id to the Host\n     * Element and pre-processing the style rules provided via {@link Component#styles styles} or\n     * {@link Component#styleUrls styleUrls}, and adding the new Host Element attribute to all\n     * selectors.\n     *\n     * This is the default option.\n     */\n    ViewEncapsulation[ViewEncapsulation[\"Emulated\"] = 0] = \"Emulated\";\n    /**\n     * Use the native encapsulation mechanism of the renderer.\n     *\n     * For the DOM this means using [Shadow DOM](https://w3c.github.io/webcomponents/spec/shadow/) and\n     * creating a ShadowRoot for Component's Host Element.\n     */\n    ViewEncapsulation[ViewEncapsulation[\"Native\"] = 1] = \"Native\";\n    /**\n     * Don't provide any template or style encapsulation.\n     */\n    ViewEncapsulation[ViewEncapsulation[\"None\"] = 2] = \"None\";\n})(ViewEncapsulation$1 || (ViewEncapsulation$1 = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description Represents the version of Angular\n *\n *\n */\nvar Version$1 = /** @class */ (function () {\n    function Version(full) {\n        this.full = full;\n        this.major = full.split('.')[0];\n        this.minor = full.split('.')[1];\n        this.patch = full.split('.').slice(2).join('.');\n    }\n    return Version;\n}());\n/**\n *\n */\nvar VERSION$2 = new Version$1('6.0.0');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar ERROR_DEBUG_CONTEXT = 'ngDebugContext';\nvar ERROR_ORIGINAL_ERROR = 'ngOriginalError';\nvar ERROR_LOGGER = 'ngErrorLogger';\n\nfunction getDebugContext(error) {\n    return error[ERROR_DEBUG_CONTEXT];\n}\nfunction getOriginalError(error) {\n    return error[ERROR_ORIGINAL_ERROR];\n}\nfunction getErrorLogger(error) {\n    return error[ERROR_LOGGER] || defaultErrorLogger;\n}\nfunction defaultErrorLogger(console) {\n    var values = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        values[_i - 1] = arguments[_i];\n    }\n    console.error.apply(console, __spread(values));\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n *\n * @description\n * Provides a hook for centralized exception handling.\n *\n * The default implementation of `ErrorHandler` prints error messages to the `console`. To\n * intercept error handling, write a custom exception handler that replaces this default as\n * appropriate for your app.\n *\n * ### Example\n *\n * ```\n * class MyErrorHandler implements ErrorHandler {\n *   handleError(error) {\n *     // do something with the exception\n *   }\n * }\n *\n * @NgModule({\n *   providers: [{provide: ErrorHandler, useClass: MyErrorHandler}]\n * })\n * class MyModule {}\n * ```\n *\n *\n */\nvar ErrorHandler = /** @class */ (function () {\n    function ErrorHandler() {\n        /**\n           * @internal\n           */\n        this._console = console;\n    }\n    ErrorHandler.prototype.handleError = function (error) {\n        var originalError = this._findOriginalError(error);\n        var context = this._findContext(error);\n        // Note: Browser consoles show the place from where console.error was called.\n        // We can use this to give users additional information about the error.\n        var errorLogger = getErrorLogger(error);\n        errorLogger(this._console, \"ERROR\", error);\n        if (originalError) {\n            errorLogger(this._console, \"ORIGINAL ERROR\", originalError);\n        }\n        if (context) {\n            errorLogger(this._console, 'ERROR CONTEXT', context);\n        }\n    };\n    /** @internal */\n    /** @internal */\n    ErrorHandler.prototype._findContext = /** @internal */\n    function (error) {\n        if (error) {\n            return getDebugContext(error) ? getDebugContext(error) :\n                this._findContext(getOriginalError(error));\n        }\n        return null;\n    };\n    /** @internal */\n    /** @internal */\n    ErrorHandler.prototype._findOriginalError = /** @internal */\n    function (error) {\n        var e = getOriginalError(error);\n        while (e && getOriginalError(e)) {\n            e = getOriginalError(e);\n        }\n        return e;\n    };\n    return ErrorHandler;\n}());\nfunction wrappedError(message, originalError) {\n    var msg = message + \" caused by: \" + (originalError instanceof Error ? originalError.message : originalError);\n    var error = Error(msg);\n    error[ERROR_ORIGINAL_ERROR] = originalError;\n    return error;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction findFirstClosedCycle(keys) {\n    var res = [];\n    for (var i = 0; i < keys.length; ++i) {\n        if (res.indexOf(keys[i]) > -1) {\n            res.push(keys[i]);\n            return res;\n        }\n        res.push(keys[i]);\n    }\n    return res;\n}\nfunction constructResolvingPath(keys) {\n    if (keys.length > 1) {\n        var reversed = findFirstClosedCycle(keys.slice().reverse());\n        var tokenStrs = reversed.map(function (k) { return stringify$1(k.token); });\n        return ' (' + tokenStrs.join(' -> ') + ')';\n    }\n    return '';\n}\nfunction injectionError(injector, key, constructResolvingMessage, originalError) {\n    var keys = [key];\n    var errMsg = constructResolvingMessage(keys);\n    var error = (originalError ? wrappedError(errMsg, originalError) : Error(errMsg));\n    error.addKey = addKey;\n    error.keys = keys;\n    error.injectors = [injector];\n    error.constructResolvingMessage = constructResolvingMessage;\n    error[ERROR_ORIGINAL_ERROR] = originalError;\n    return error;\n}\nfunction addKey(injector, key) {\n    this.injectors.push(injector);\n    this.keys.push(key);\n    // Note: This updated message won't be reflected in the `.stack` property\n    this.message = this.constructResolvingMessage(this.keys);\n}\n/**\n * Thrown when trying to retrieve a dependency by key from {@link Injector}, but the\n * {@link Injector} does not have a {@link Provider} for the given key.\n *\n * ### Example ([live demo](http://plnkr.co/edit/vq8D3FRB9aGbnWJqtEPE?p=preview))\n *\n * ```typescript\n * class A {\n *   constructor(b:B) {}\n * }\n *\n * expect(() => Injector.resolveAndCreate([A])).toThrowError();\n * ```\n */\nfunction noProviderError(injector, key) {\n    return injectionError(injector, key, function (keys) {\n        var first = stringify$1(keys[0].token);\n        return \"No provider for \" + first + \"!\" + constructResolvingPath(keys);\n    });\n}\n/**\n * Thrown when dependencies form a cycle.\n *\n * ### Example ([live demo](http://plnkr.co/edit/wYQdNos0Tzql3ei1EV9j?p=info))\n *\n * ```typescript\n * var injector = Injector.resolveAndCreate([\n *   {provide: \"one\", useFactory: (two) => \"two\", deps: [[new Inject(\"two\")]]},\n *   {provide: \"two\", useFactory: (one) => \"one\", deps: [[new Inject(\"one\")]]}\n * ]);\n *\n * expect(() => injector.get(\"one\")).toThrowError();\n * ```\n *\n * Retrieving `A` or `B` throws a `CyclicDependencyError` as the graph above cannot be constructed.\n */\nfunction cyclicDependencyError(injector, key) {\n    return injectionError(injector, key, function (keys) {\n        return \"Cannot instantiate cyclic dependency!\" + constructResolvingPath(keys);\n    });\n}\n/**\n * Thrown when a constructing type returns with an Error.\n *\n * The `InstantiationError` class contains the original error plus the dependency graph which caused\n * this object to be instantiated.\n *\n * ### Example ([live demo](http://plnkr.co/edit/7aWYdcqTQsP0eNqEdUAf?p=preview))\n *\n * ```typescript\n * class A {\n *   constructor() {\n *     throw new Error('message');\n *   }\n * }\n *\n * var injector = Injector.resolveAndCreate([A]);\n\n * try {\n *   injector.get(A);\n * } catch (e) {\n *   expect(e instanceof InstantiationError).toBe(true);\n *   expect(e.originalException.message).toEqual(\"message\");\n *   expect(e.originalStack).toBeDefined();\n * }\n * ```\n */\nfunction instantiationError(injector, originalException, originalStack, key) {\n    return injectionError(injector, key, function (keys) {\n        var first = stringify$1(keys[0].token);\n        return originalException.message + \": Error during instantiation of \" + first + \"!\" + constructResolvingPath(keys) + \".\";\n    }, originalException);\n}\n/**\n * Thrown when an object other then {@link Provider} (or `Type`) is passed to {@link Injector}\n * creation.\n *\n * ### Example ([live demo](http://plnkr.co/edit/YatCFbPAMCL0JSSQ4mvH?p=preview))\n *\n * ```typescript\n * expect(() => Injector.resolveAndCreate([\"not a type\"])).toThrowError();\n * ```\n */\nfunction invalidProviderError(provider) {\n    return Error(\"Invalid provider - only instances of Provider and Type are allowed, got: \" + provider);\n}\n/**\n * Thrown when the class has no annotation information.\n *\n * Lack of annotation information prevents the {@link Injector} from determining which dependencies\n * need to be injected into the constructor.\n *\n * ### Example ([live demo](http://plnkr.co/edit/rHnZtlNS7vJOPQ6pcVkm?p=preview))\n *\n * ```typescript\n * class A {\n *   constructor(b) {}\n * }\n *\n * expect(() => Injector.resolveAndCreate([A])).toThrowError();\n * ```\n *\n * This error is also thrown when the class not marked with {@link Injectable} has parameter types.\n *\n * ```typescript\n * class B {}\n *\n * class A {\n *   constructor(b:B) {} // no information about the parameter types of A is available at runtime.\n * }\n *\n * expect(() => Injector.resolveAndCreate([A,B])).toThrowError();\n * ```\n *\n */\nfunction noAnnotationError(typeOrFunc, params) {\n    var signature = [];\n    for (var i = 0, ii = params.length; i < ii; i++) {\n        var parameter = params[i];\n        if (!parameter || parameter.length == 0) {\n            signature.push('?');\n        }\n        else {\n            signature.push(parameter.map(stringify$1).join(' '));\n        }\n    }\n    return Error('Cannot resolve all parameters for \\'' + stringify$1(typeOrFunc) + '\\'(' +\n        signature.join(', ') + '). ' +\n        'Make sure that all the parameters are decorated with Inject or have valid type annotations and that \\'' +\n        stringify$1(typeOrFunc) + '\\' is decorated with Injectable.');\n}\n/**\n * Thrown when getting an object by index.\n *\n * ### Example ([live demo](http://plnkr.co/edit/bRs0SX2OTQiJzqvjgl8P?p=preview))\n *\n * ```typescript\n * class A {}\n *\n * var injector = Injector.resolveAndCreate([A]);\n *\n * expect(() => injector.getAt(100)).toThrowError();\n * ```\n *\n */\nfunction outOfBoundsError(index) {\n    return Error(\"Index \" + index + \" is out-of-bounds.\");\n}\n// TODO: add a working example after alpha38 is released\n/**\n * Thrown when a multi provider and a regular provider are bound to the same token.\n *\n * ### Example\n *\n * ```typescript\n * expect(() => Injector.resolveAndCreate([\n *   { provide: \"Strings\", useValue: \"string1\", multi: true},\n *   { provide: \"Strings\", useValue: \"string2\", multi: false}\n * ])).toThrowError();\n * ```\n */\nfunction mixingMultiProvidersWithRegularProvidersError(provider1, provider2) {\n    return Error(\"Cannot mix multi providers and regular providers, got: \" + provider1 + \" \" + provider2);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A unique object used for retrieving items from the {@link ReflectiveInjector}.\n *\n * Keys have:\n * - a system-wide unique `id`.\n * - a `token`.\n *\n * `Key` is used internally by {@link ReflectiveInjector} because its system-wide unique `id` allows\n * the\n * injector to store created objects in a more efficient way.\n *\n * `Key` should not be created directly. {@link ReflectiveInjector} creates keys automatically when\n * resolving\n * providers.\n * @deprecated No replacement\n */\nvar ReflectiveKey = /** @class */ (function () {\n    /**\n     * Private\n     */\n    function ReflectiveKey(token, id) {\n        this.token = token;\n        this.id = id;\n        if (!token) {\n            throw new Error('Token must be defined!');\n        }\n        this.displayName = stringify$1(this.token);\n    }\n    /**\n     * Retrieves a `Key` for a token.\n     */\n    /**\n       * Retrieves a `Key` for a token.\n       */\n    ReflectiveKey.get = /**\n       * Retrieves a `Key` for a token.\n       */\n    function (token) {\n        return _globalKeyRegistry.get(resolveForwardRef$1(token));\n    };\n    Object.defineProperty(ReflectiveKey, \"numberOfKeys\", {\n        /**\n         * @returns the number of keys registered in the system.\n         */\n        get: /**\n           * @returns the number of keys registered in the system.\n           */\n        function () { return _globalKeyRegistry.numberOfKeys; },\n        enumerable: true,\n        configurable: true\n    });\n    return ReflectiveKey;\n}());\nvar KeyRegistry = /** @class */ (function () {\n    function KeyRegistry() {\n        this._allKeys = new Map();\n    }\n    KeyRegistry.prototype.get = function (token) {\n        if (token instanceof ReflectiveKey)\n            return token;\n        if (this._allKeys.has(token)) {\n            return this._allKeys.get(token);\n        }\n        var newKey = new ReflectiveKey(token, ReflectiveKey.numberOfKeys);\n        this._allKeys.set(token, newKey);\n        return newKey;\n    };\n    Object.defineProperty(KeyRegistry.prototype, \"numberOfKeys\", {\n        get: function () { return this._allKeys.size; },\n        enumerable: true,\n        configurable: true\n    });\n    return KeyRegistry;\n}());\nvar _globalKeyRegistry = new KeyRegistry();\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Provides access to reflection data about symbols. Used internally by Angular\n * to power dependency injection and compilation.\n */\nvar Reflector = /** @class */ (function () {\n    function Reflector(reflectionCapabilities) {\n        this.reflectionCapabilities = reflectionCapabilities;\n    }\n    Reflector.prototype.updateCapabilities = function (caps) { this.reflectionCapabilities = caps; };\n    Reflector.prototype.factory = function (type) { return this.reflectionCapabilities.factory(type); };\n    Reflector.prototype.parameters = function (typeOrFunc) {\n        return this.reflectionCapabilities.parameters(typeOrFunc);\n    };\n    Reflector.prototype.annotations = function (typeOrFunc) {\n        return this.reflectionCapabilities.annotations(typeOrFunc);\n    };\n    Reflector.prototype.propMetadata = function (typeOrFunc) {\n        return this.reflectionCapabilities.propMetadata(typeOrFunc);\n    };\n    Reflector.prototype.hasLifecycleHook = function (type, lcProperty) {\n        return this.reflectionCapabilities.hasLifecycleHook(type, lcProperty);\n    };\n    Reflector.prototype.getter = function (name) { return this.reflectionCapabilities.getter(name); };\n    Reflector.prototype.setter = function (name) { return this.reflectionCapabilities.setter(name); };\n    Reflector.prototype.method = function (name) { return this.reflectionCapabilities.method(name); };\n    Reflector.prototype.importUri = function (type) { return this.reflectionCapabilities.importUri(type); };\n    Reflector.prototype.resourceUri = function (type) { return this.reflectionCapabilities.resourceUri(type); };\n    Reflector.prototype.resolveIdentifier = function (name, moduleUrl, members, runtime) {\n        return this.reflectionCapabilities.resolveIdentifier(name, moduleUrl, members, runtime);\n    };\n    Reflector.prototype.resolveEnum = function (identifier, name) {\n        return this.reflectionCapabilities.resolveEnum(identifier, name);\n    };\n    return Reflector;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * The {@link Reflector} used internally in Angular to access metadata\n * about symbols.\n */\nvar reflector = new Reflector(new ReflectionCapabilities());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * `Dependency` is used by the framework to extend DI.\n * This is internal to Angular and should not be used directly.\n */\nvar ReflectiveDependency = /** @class */ (function () {\n    function ReflectiveDependency(key, optional, visibility) {\n        this.key = key;\n        this.optional = optional;\n        this.visibility = visibility;\n    }\n    ReflectiveDependency.fromKey = function (key) {\n        return new ReflectiveDependency(key, false, null);\n    };\n    return ReflectiveDependency;\n}());\nvar _EMPTY_LIST = [];\nvar ResolvedReflectiveProvider_ = /** @class */ (function () {\n    function ResolvedReflectiveProvider_(key, resolvedFactories, multiProvider) {\n        this.key = key;\n        this.resolvedFactories = resolvedFactories;\n        this.multiProvider = multiProvider;\n        this.resolvedFactory = this.resolvedFactories[0];\n    }\n    return ResolvedReflectiveProvider_;\n}());\n/**\n * An internal resolved representation of a factory function created by resolving {@link\n * Provider}.\n * @experimental\n */\nvar ResolvedReflectiveFactory = /** @class */ (function () {\n    function ResolvedReflectiveFactory(/**\n           * Factory function which can return an instance of an object represented by a key.\n           */\n    factory, /**\n           * Arguments (dependencies) to the `factory` function.\n           */\n    dependencies) {\n        this.factory = factory;\n        this.dependencies = dependencies;\n    }\n    return ResolvedReflectiveFactory;\n}());\n/**\n * Resolve a single provider.\n */\nfunction resolveReflectiveFactory(provider) {\n    var factoryFn;\n    var resolvedDeps;\n    if (provider.useClass) {\n        var useClass = resolveForwardRef$1(provider.useClass);\n        factoryFn = reflector.factory(useClass);\n        resolvedDeps = _dependenciesFor(useClass);\n    }\n    else if (provider.useExisting) {\n        factoryFn = function (aliasInstance) { return aliasInstance; };\n        resolvedDeps = [ReflectiveDependency.fromKey(ReflectiveKey.get(provider.useExisting))];\n    }\n    else if (provider.useFactory) {\n        factoryFn = provider.useFactory;\n        resolvedDeps = constructDependencies(provider.useFactory, provider.deps);\n    }\n    else {\n        factoryFn = function () { return provider.useValue; };\n        resolvedDeps = _EMPTY_LIST;\n    }\n    return new ResolvedReflectiveFactory(factoryFn, resolvedDeps);\n}\n/**\n * Converts the {@link Provider} into {@link ResolvedProvider}.\n *\n * {@link Injector} internally only uses {@link ResolvedProvider}, {@link Provider} contains\n * convenience provider syntax.\n */\nfunction resolveReflectiveProvider(provider) {\n    return new ResolvedReflectiveProvider_(ReflectiveKey.get(provider.provide), [resolveReflectiveFactory(provider)], provider.multi || false);\n}\n/**\n * Resolve a list of Providers.\n */\nfunction resolveReflectiveProviders(providers) {\n    var normalized = _normalizeProviders(providers, []);\n    var resolved = normalized.map(resolveReflectiveProvider);\n    var resolvedProviderMap = mergeResolvedReflectiveProviders(resolved, new Map());\n    return Array.from(resolvedProviderMap.values());\n}\n/**\n * Merges a list of ResolvedProviders into a list where\n * each key is contained exactly once and multi providers\n * have been merged.\n */\nfunction mergeResolvedReflectiveProviders(providers, normalizedProvidersMap) {\n    for (var i = 0; i < providers.length; i++) {\n        var provider = providers[i];\n        var existing = normalizedProvidersMap.get(provider.key.id);\n        if (existing) {\n            if (provider.multiProvider !== existing.multiProvider) {\n                throw mixingMultiProvidersWithRegularProvidersError(existing, provider);\n            }\n            if (provider.multiProvider) {\n                for (var j = 0; j < provider.resolvedFactories.length; j++) {\n                    existing.resolvedFactories.push(provider.resolvedFactories[j]);\n                }\n            }\n            else {\n                normalizedProvidersMap.set(provider.key.id, provider);\n            }\n        }\n        else {\n            var resolvedProvider = void 0;\n            if (provider.multiProvider) {\n                resolvedProvider = new ResolvedReflectiveProvider_(provider.key, provider.resolvedFactories.slice(), provider.multiProvider);\n            }\n            else {\n                resolvedProvider = provider;\n            }\n            normalizedProvidersMap.set(provider.key.id, resolvedProvider);\n        }\n    }\n    return normalizedProvidersMap;\n}\nfunction _normalizeProviders(providers, res) {\n    providers.forEach(function (b) {\n        if (b instanceof Type$2) {\n            res.push({ provide: b, useClass: b });\n        }\n        else if (b && typeof b == 'object' && b.provide !== undefined) {\n            res.push(b);\n        }\n        else if (b instanceof Array) {\n            _normalizeProviders(b, res);\n        }\n        else {\n            throw invalidProviderError(b);\n        }\n    });\n    return res;\n}\nfunction constructDependencies(typeOrFunc, dependencies) {\n    if (!dependencies) {\n        return _dependenciesFor(typeOrFunc);\n    }\n    else {\n        var params_1 = dependencies.map(function (t) { return [t]; });\n        return dependencies.map(function (t) { return _extractToken(typeOrFunc, t, params_1); });\n    }\n}\nfunction _dependenciesFor(typeOrFunc) {\n    var params = reflector.parameters(typeOrFunc);\n    if (!params)\n        return [];\n    if (params.some(function (p) { return p == null; })) {\n        throw noAnnotationError(typeOrFunc, params);\n    }\n    return params.map(function (p) { return _extractToken(typeOrFunc, p, params); });\n}\nfunction _extractToken(typeOrFunc, metadata, params) {\n    var token = null;\n    var optional = false;\n    if (!Array.isArray(metadata)) {\n        if (metadata instanceof Inject) {\n            return _createDependency(metadata.token, optional, null);\n        }\n        else {\n            return _createDependency(metadata, optional, null);\n        }\n    }\n    var visibility = null;\n    for (var i = 0; i < metadata.length; ++i) {\n        var paramMetadata = metadata[i];\n        if (paramMetadata instanceof Type$2) {\n            token = paramMetadata;\n        }\n        else if (paramMetadata instanceof Inject) {\n            token = paramMetadata.token;\n        }\n        else if (paramMetadata instanceof Optional) {\n            optional = true;\n        }\n        else if (paramMetadata instanceof Self || paramMetadata instanceof SkipSelf) {\n            visibility = paramMetadata;\n        }\n        else if (paramMetadata instanceof InjectionToken) {\n            token = paramMetadata;\n        }\n    }\n    token = resolveForwardRef$1(token);\n    if (token != null) {\n        return _createDependency(token, optional, visibility);\n    }\n    else {\n        throw noAnnotationError(typeOrFunc, params);\n    }\n}\nfunction _createDependency(token, optional, visibility) {\n    return new ReflectiveDependency(ReflectiveKey.get(token), optional, visibility);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Threshold for the dynamic version\nvar UNDEFINED = new Object();\n/**\n * A ReflectiveDependency injection container used for instantiating objects and resolving\n * dependencies.\n *\n * An `Injector` is a replacement for a `new` operator, which can automatically resolve the\n * constructor dependencies.\n *\n * In typical use, application code asks for the dependencies in the constructor and they are\n * resolved by the `Injector`.\n *\n * ### Example ([live demo](http://plnkr.co/edit/jzjec0?p=preview))\n *\n * The following example creates an `Injector` configured to create `Engine` and `Car`.\n *\n * ```typescript\n * @Injectable()\n * class Engine {\n * }\n *\n * @Injectable()\n * class Car {\n *   constructor(public engine:Engine) {}\n * }\n *\n * var injector = ReflectiveInjector.resolveAndCreate([Car, Engine]);\n * var car = injector.get(Car);\n * expect(car instanceof Car).toBe(true);\n * expect(car.engine instanceof Engine).toBe(true);\n * ```\n *\n * Notice, we don't use the `new` operator because we explicitly want to have the `Injector`\n * resolve all of the object's dependencies automatically.\n *\n * @deprecated from v5 - slow and brings in a lot of code, Use `Injector.create` instead.\n */\nvar ReflectiveInjector = /** @class */ (function () {\n    function ReflectiveInjector() {\n    }\n    /**\n     * Turns an array of provider definitions into an array of resolved providers.\n     *\n     * A resolution is a process of flattening multiple nested arrays and converting individual\n     * providers into an array of {@link ResolvedReflectiveProvider}s.\n     *\n     * ### Example ([live demo](http://plnkr.co/edit/AiXTHi?p=preview))\n     *\n     * ```typescript\n     * @Injectable()\n     * class Engine {\n     * }\n     *\n     * @Injectable()\n     * class Car {\n     *   constructor(public engine:Engine) {}\n     * }\n     *\n     * var providers = ReflectiveInjector.resolve([Car, [[Engine]]]);\n     *\n     * expect(providers.length).toEqual(2);\n     *\n     * expect(providers[0] instanceof ResolvedReflectiveProvider).toBe(true);\n     * expect(providers[0].key.displayName).toBe(\"Car\");\n     * expect(providers[0].dependencies.length).toEqual(1);\n     * expect(providers[0].factory).toBeDefined();\n     *\n     * expect(providers[1].key.displayName).toBe(\"Engine\");\n     * });\n     * ```\n     *\n     * See {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders} for more info.\n     */\n    /**\n       * Turns an array of provider definitions into an array of resolved providers.\n       *\n       * A resolution is a process of flattening multiple nested arrays and converting individual\n       * providers into an array of {@link ResolvedReflectiveProvider}s.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/AiXTHi?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var providers = ReflectiveInjector.resolve([Car, [[Engine]]]);\n       *\n       * expect(providers.length).toEqual(2);\n       *\n       * expect(providers[0] instanceof ResolvedReflectiveProvider).toBe(true);\n       * expect(providers[0].key.displayName).toBe(\"Car\");\n       * expect(providers[0].dependencies.length).toEqual(1);\n       * expect(providers[0].factory).toBeDefined();\n       *\n       * expect(providers[1].key.displayName).toBe(\"Engine\");\n       * });\n       * ```\n       *\n       * See {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders} for more info.\n       */\n    ReflectiveInjector.resolve = /**\n       * Turns an array of provider definitions into an array of resolved providers.\n       *\n       * A resolution is a process of flattening multiple nested arrays and converting individual\n       * providers into an array of {@link ResolvedReflectiveProvider}s.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/AiXTHi?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var providers = ReflectiveInjector.resolve([Car, [[Engine]]]);\n       *\n       * expect(providers.length).toEqual(2);\n       *\n       * expect(providers[0] instanceof ResolvedReflectiveProvider).toBe(true);\n       * expect(providers[0].key.displayName).toBe(\"Car\");\n       * expect(providers[0].dependencies.length).toEqual(1);\n       * expect(providers[0].factory).toBeDefined();\n       *\n       * expect(providers[1].key.displayName).toBe(\"Engine\");\n       * });\n       * ```\n       *\n       * See {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders} for more info.\n       */\n    function (providers) {\n        return resolveReflectiveProviders(providers);\n    };\n    /**\n     * Resolves an array of providers and creates an injector from those providers.\n     *\n     * The passed-in providers can be an array of `Type`, {@link Provider},\n     * or a recursive array of more providers.\n     *\n     * ### Example ([live demo](http://plnkr.co/edit/ePOccA?p=preview))\n     *\n     * ```typescript\n     * @Injectable()\n     * class Engine {\n     * }\n     *\n     * @Injectable()\n     * class Car {\n     *   constructor(public engine:Engine) {}\n     * }\n     *\n     * var injector = ReflectiveInjector.resolveAndCreate([Car, Engine]);\n     * expect(injector.get(Car) instanceof Car).toBe(true);\n     * ```\n     *\n     * This function is slower than the corresponding `fromResolvedProviders`\n     * because it needs to resolve the passed-in providers first.\n     * See {@link ReflectiveInjector#resolve resolve} and\n     * {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders}.\n     */\n    /**\n       * Resolves an array of providers and creates an injector from those providers.\n       *\n       * The passed-in providers can be an array of `Type`, {@link Provider},\n       * or a recursive array of more providers.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/ePOccA?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var injector = ReflectiveInjector.resolveAndCreate([Car, Engine]);\n       * expect(injector.get(Car) instanceof Car).toBe(true);\n       * ```\n       *\n       * This function is slower than the corresponding `fromResolvedProviders`\n       * because it needs to resolve the passed-in providers first.\n       * See {@link ReflectiveInjector#resolve resolve} and\n       * {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders}.\n       */\n    ReflectiveInjector.resolveAndCreate = /**\n       * Resolves an array of providers and creates an injector from those providers.\n       *\n       * The passed-in providers can be an array of `Type`, {@link Provider},\n       * or a recursive array of more providers.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/ePOccA?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var injector = ReflectiveInjector.resolveAndCreate([Car, Engine]);\n       * expect(injector.get(Car) instanceof Car).toBe(true);\n       * ```\n       *\n       * This function is slower than the corresponding `fromResolvedProviders`\n       * because it needs to resolve the passed-in providers first.\n       * See {@link ReflectiveInjector#resolve resolve} and\n       * {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders}.\n       */\n    function (providers, parent) {\n        var ResolvedReflectiveProviders = ReflectiveInjector.resolve(providers);\n        return ReflectiveInjector.fromResolvedProviders(ResolvedReflectiveProviders, parent);\n    };\n    /**\n     * Creates an injector from previously resolved providers.\n     *\n     * This API is the recommended way to construct injectors in performance-sensitive parts.\n     *\n     * ### Example ([live demo](http://plnkr.co/edit/KrSMci?p=preview))\n     *\n     * ```typescript\n     * @Injectable()\n     * class Engine {\n     * }\n     *\n     * @Injectable()\n     * class Car {\n     *   constructor(public engine:Engine) {}\n     * }\n     *\n     * var providers = ReflectiveInjector.resolve([Car, Engine]);\n     * var injector = ReflectiveInjector.fromResolvedProviders(providers);\n     * expect(injector.get(Car) instanceof Car).toBe(true);\n     * ```\n     * @experimental\n     */\n    /**\n       * Creates an injector from previously resolved providers.\n       *\n       * This API is the recommended way to construct injectors in performance-sensitive parts.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/KrSMci?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var providers = ReflectiveInjector.resolve([Car, Engine]);\n       * var injector = ReflectiveInjector.fromResolvedProviders(providers);\n       * expect(injector.get(Car) instanceof Car).toBe(true);\n       * ```\n       * @experimental\n       */\n    ReflectiveInjector.fromResolvedProviders = /**\n       * Creates an injector from previously resolved providers.\n       *\n       * This API is the recommended way to construct injectors in performance-sensitive parts.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/KrSMci?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var providers = ReflectiveInjector.resolve([Car, Engine]);\n       * var injector = ReflectiveInjector.fromResolvedProviders(providers);\n       * expect(injector.get(Car) instanceof Car).toBe(true);\n       * ```\n       * @experimental\n       */\n    function (providers, parent) {\n        return new ReflectiveInjector_(providers, parent);\n    };\n    return ReflectiveInjector;\n}());\nvar ReflectiveInjector_ = /** @class */ (function () {\n    /**\n     * Private\n     */\n    function ReflectiveInjector_(_providers, _parent) {\n        /** @internal */\n        this._constructionCounter = 0;\n        this._providers = _providers;\n        this.parent = _parent || null;\n        var len = _providers.length;\n        this.keyIds = new Array(len);\n        this.objs = new Array(len);\n        for (var i = 0; i < len; i++) {\n            this.keyIds[i] = _providers[i].key.id;\n            this.objs[i] = UNDEFINED;\n        }\n    }\n    ReflectiveInjector_.prototype.get = function (token, notFoundValue) {\n        if (notFoundValue === void 0) { notFoundValue = THROW_IF_NOT_FOUND; }\n        return this._getByKey(ReflectiveKey.get(token), null, notFoundValue);\n    };\n    ReflectiveInjector_.prototype.resolveAndCreateChild = function (providers) {\n        var ResolvedReflectiveProviders = ReflectiveInjector.resolve(providers);\n        return this.createChildFromResolved(ResolvedReflectiveProviders);\n    };\n    ReflectiveInjector_.prototype.createChildFromResolved = function (providers) {\n        var inj = new ReflectiveInjector_(providers);\n        inj.parent = this;\n        return inj;\n    };\n    ReflectiveInjector_.prototype.resolveAndInstantiate = function (provider) {\n        return this.instantiateResolved(ReflectiveInjector.resolve([provider])[0]);\n    };\n    ReflectiveInjector_.prototype.instantiateResolved = function (provider) {\n        return this._instantiateProvider(provider);\n    };\n    ReflectiveInjector_.prototype.getProviderAtIndex = function (index) {\n        if (index < 0 || index >= this._providers.length) {\n            throw outOfBoundsError(index);\n        }\n        return this._providers[index];\n    };\n    /** @internal */\n    /** @internal */\n    ReflectiveInjector_.prototype._new = /** @internal */\n    function (provider) {\n        if (this._constructionCounter++ > this._getMaxNumberOfObjects()) {\n            throw cyclicDependencyError(this, provider.key);\n        }\n        return this._instantiateProvider(provider);\n    };\n    ReflectiveInjector_.prototype._getMaxNumberOfObjects = function () { return this.objs.length; };\n    ReflectiveInjector_.prototype._instantiateProvider = function (provider) {\n        if (provider.multiProvider) {\n            var res = new Array(provider.resolvedFactories.length);\n            for (var i = 0; i < provider.resolvedFactories.length; ++i) {\n                res[i] = this._instantiate(provider, provider.resolvedFactories[i]);\n            }\n            return res;\n        }\n        else {\n            return this._instantiate(provider, provider.resolvedFactories[0]);\n        }\n    };\n    ReflectiveInjector_.prototype._instantiate = function (provider, ResolvedReflectiveFactory$$1) {\n        var _this = this;\n        var factory = ResolvedReflectiveFactory$$1.factory;\n        var deps;\n        try {\n            deps =\n                ResolvedReflectiveFactory$$1.dependencies.map(function (dep) { return _this._getByReflectiveDependency(dep); });\n        }\n        catch (e) {\n            if (e.addKey) {\n                e.addKey(this, provider.key);\n            }\n            throw e;\n        }\n        var obj;\n        try {\n            obj = factory.apply(void 0, __spread(deps));\n        }\n        catch (e) {\n            throw instantiationError(this, e, e.stack, provider.key);\n        }\n        return obj;\n    };\n    ReflectiveInjector_.prototype._getByReflectiveDependency = function (dep) {\n        return this._getByKey(dep.key, dep.visibility, dep.optional ? null : THROW_IF_NOT_FOUND);\n    };\n    ReflectiveInjector_.prototype._getByKey = function (key, visibility, notFoundValue) {\n        if (key === ReflectiveInjector_.INJECTOR_KEY) {\n            return this;\n        }\n        if (visibility instanceof Self) {\n            return this._getByKeySelf(key, notFoundValue);\n        }\n        else {\n            return this._getByKeyDefault(key, notFoundValue, visibility);\n        }\n    };\n    ReflectiveInjector_.prototype._getObjByKeyId = function (keyId) {\n        for (var i = 0; i < this.keyIds.length; i++) {\n            if (this.keyIds[i] === keyId) {\n                if (this.objs[i] === UNDEFINED) {\n                    this.objs[i] = this._new(this._providers[i]);\n                }\n                return this.objs[i];\n            }\n        }\n        return UNDEFINED;\n    };\n    /** @internal */\n    /** @internal */\n    ReflectiveInjector_.prototype._throwOrNull = /** @internal */\n    function (key, notFoundValue) {\n        if (notFoundValue !== THROW_IF_NOT_FOUND) {\n            return notFoundValue;\n        }\n        else {\n            throw noProviderError(this, key);\n        }\n    };\n    /** @internal */\n    /** @internal */\n    ReflectiveInjector_.prototype._getByKeySelf = /** @internal */\n    function (key, notFoundValue) {\n        var obj = this._getObjByKeyId(key.id);\n        return (obj !== UNDEFINED) ? obj : this._throwOrNull(key, notFoundValue);\n    };\n    /** @internal */\n    /** @internal */\n    ReflectiveInjector_.prototype._getByKeyDefault = /** @internal */\n    function (key, notFoundValue, visibility) {\n        var inj;\n        if (visibility instanceof SkipSelf) {\n            inj = this.parent;\n        }\n        else {\n            inj = this;\n        }\n        while (inj instanceof ReflectiveInjector_) {\n            var inj_ = inj;\n            var obj = inj_._getObjByKeyId(key.id);\n            if (obj !== UNDEFINED)\n                return obj;\n            inj = inj_.parent;\n        }\n        if (inj !== null) {\n            return inj.get(key.token, notFoundValue);\n        }\n        else {\n            return this._throwOrNull(key, notFoundValue);\n        }\n    };\n    Object.defineProperty(ReflectiveInjector_.prototype, \"displayName\", {\n        get: function () {\n            var providers = _mapProviders(this, function (b) { return ' \"' + b.key.displayName + '\" '; })\n                .join(', ');\n            return \"ReflectiveInjector(providers: [\" + providers + \"])\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ReflectiveInjector_.prototype.toString = function () { return this.displayName; };\n    ReflectiveInjector_.INJECTOR_KEY = ReflectiveKey.get(Injector);\n    return ReflectiveInjector_;\n}());\nfunction _mapProviders(injector, fn) {\n    var res = new Array(injector._providers.length);\n    for (var i = 0; i < injector._providers.length; ++i) {\n        res[i] = fn(injector.getProviderAtIndex(i));\n    }\n    return res;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An internal token whose presence in an injector indicates that the injector should treat itself\n * as a root scoped injector when processing requests for unknown tokens which may indicate\n * they are provided in the root scope.\n */\nvar APP_ROOT = new InjectionToken('The presence of this token marks an injector as being the root injector.');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create a new `Injector` which is configured using `InjectorType`s.\n *\n * @experimental\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction isFunction(x) {\n    return typeof x === 'function';\n}\n\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\n/**\n * The global configuration object for RxJS, used to configure things\n * like what Promise contructor should used to create Promises\n */\nvar config = {\n    /**\n     * The promise constructor used by default for methods such as\n     * {@link toPromise} and {@link forEach}\n     */\n    Promise: undefined,\n    /**\n     * If true, turns on synchronous error rethrowing, which is a deprecated behavior\n     * in v6 and higher. This behavior enables bad patterns like wrapping a subscribe\n     * call in a try/catch block. It also enables producer interference, a nasty bug\n     * where a multicast can be broken for all observers by a downstream consumer with\n     * an unhandled error. DO NOT USE THIS FLAG UNLESS IT'S NEEDED TO BY TIME\n     * FOR MIGRATION REASONS.\n     */\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = new Error();\n            console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n\n/**\n * Throws an error on another job so that it's picked up by the runtime's\n * uncaught error handling mechanism.\n * @param err the error to throw\n */\nfunction hostReportError(err) {\n    setTimeout(function () { throw err; });\n}\n\nvar empty$1 = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n\nvar isArray = Array.isArray || (function (x) { return x && typeof x.length === 'number'; });\n\nfunction isObject(x) {\n    return x != null && typeof x === 'object';\n}\n\n// typeof any so that it we don't have to cast when comparing a result to the error object\nvar errorObject = { e: {} };\n\nvar tryCatchTarget;\nfunction tryCatcher() {\n    try {\n        return tryCatchTarget.apply(this, arguments);\n    }\n    catch (e) {\n        errorObject.e = e;\n        return errorObject;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar __extends$2 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nvar UnsubscriptionError = /** @class */ (function (_super) {\n    __extends$2(UnsubscriptionError, _super);\n    function UnsubscriptionError(errors) {\n        var _this = _super.call(this, errors ?\n            errors.length + \" errors occurred during unsubscription:\\n  \" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '') || this;\n        _this.errors = errors;\n        _this.name = 'UnsubscriptionError';\n        Object.setPrototypeOf(_this, UnsubscriptionError.prototype);\n        return _this;\n    }\n    return UnsubscriptionError;\n}(Error));\n\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nvar Subscription = /** @class */ (function () {\n    /**\n     * @param {function(): void} [unsubscribe] A function describing how to\n     * perform the disposal of resources when the `unsubscribe` method is called.\n     */\n    function Subscription(unsubscribe) {\n        /**\n         * A flag to indicate whether this Subscription has already been unsubscribed.\n         * @type {boolean}\n         */\n        this.closed = false;\n        /** @internal */\n        this._parent = null;\n        /** @internal */\n        this._parents = null;\n        /** @internal */\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    /**\n     * Disposes the resources held by the subscription. May, for instance, cancel\n     * an ongoing Observable execution or cancel any other type of work that\n     * started when the Subscription was created.\n     * @return {void}\n     */\n    Subscription.prototype.unsubscribe = function () {\n        var hasErrors = false;\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parent = _a._parent, _parents = _a._parents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parent = null;\n        this._parents = null;\n        // null out _subscriptions first so any child subscriptions that attempt\n        // to remove themselves from this subscription will noop\n        this._subscriptions = null;\n        var index = -1;\n        var len = _parents ? _parents.length : 0;\n        // if this._parent is null, then so is this._parents, and we\n        // don't have to remove ourselves from any parent subscriptions.\n        while (_parent) {\n            _parent.remove(this);\n            // if this._parents is null or index >= len,\n            // then _parent is set to null, and the loop exits\n            _parent = ++index < len && _parents[index] || null;\n        }\n        if (isFunction(_unsubscribe)) {\n            var trial = tryCatch(_unsubscribe).call(this);\n            if (trial === errorObject) {\n                hasErrors = true;\n                errors = errors || (errorObject.e instanceof UnsubscriptionError ?\n                    flattenUnsubscriptionErrors(errorObject.e.errors) : [errorObject.e]);\n            }\n        }\n        if (isArray(_subscriptions)) {\n            index = -1;\n            len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    var trial = tryCatch(sub.unsubscribe).call(sub);\n                    if (trial === errorObject) {\n                        hasErrors = true;\n                        errors = errors || [];\n                        var err = errorObject.e;\n                        if (err instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(err.errors));\n                        }\n                        else {\n                            errors.push(err);\n                        }\n                    }\n                }\n            }\n        }\n        if (hasErrors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    /**\n     * Adds a tear down to be called during the unsubscribe() of this\n     * Subscription.\n     *\n     * If the tear down being added is a subscription that is already\n     * unsubscribed, is the same reference `add` is being called on, or is\n     * `Subscription.EMPTY`, it will not be added.\n     *\n     * If this subscription is already in an `closed` state, the passed\n     * tear down logic will be executed immediately.\n     *\n     * @param {TeardownLogic} teardown The additional logic to execute on\n     * teardown.\n     * @return {Subscription} Returns the Subscription used or created to be\n     * added to the inner subscriptions list. This Subscription can be used with\n     * `remove()` to remove the passed teardown logic from the inner subscriptions\n     * list.\n     */\n    Subscription.prototype.add = function (teardown) {\n        if (!teardown || (teardown === Subscription.EMPTY)) {\n            return Subscription.EMPTY;\n        }\n        if (teardown === this) {\n            return this;\n        }\n        var subscription = teardown;\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (typeof subscription._addParent !== 'function' /* quack quack */) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default:\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n        }\n        var subscriptions = this._subscriptions || (this._subscriptions = []);\n        subscriptions.push(subscription);\n        subscription._addParent(this);\n        return subscription;\n    };\n    /**\n     * Removes a Subscription from the internal list of subscriptions that will\n     * unsubscribe during the unsubscribe process of this Subscription.\n     * @param {Subscription} subscription The subscription to remove.\n     * @return {void}\n     */\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    /** @internal */\n    Subscription.prototype._addParent = function (parent) {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        if (!_parent || _parent === parent) {\n            // If we don't have a parent, or the new parent is the same as the\n            // current parent, then set this._parent to the new parent.\n            this._parent = parent;\n        }\n        else if (!_parents) {\n            // If there's already one parent, but not multiple, allocate an Array to\n            // store the rest of the parent Subscriptions.\n            this._parents = [parent];\n        }\n        else if (_parents.indexOf(parent) === -1) {\n            // Only add the new parent to the _parents list if it's not already there.\n            _parents.push(parent);\n        }\n    };\n    /** @nocollapse */\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n\nvar rxSubscriber = (typeof Symbol === 'function' && typeof Symbol.for === 'function')\n    ? Symbol.for('rxSubscriber')\n    : '@@rxSubscriber';\n/**\n * @deprecated use rxSubscriber instead\n */\n\nvar __extends$1 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nvar Subscriber = /** @class */ (function (_super) {\n    __extends$1(Subscriber, _super);\n    /**\n     * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n     * defined Observer or a `next` callback function.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     */\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        /** @internal */ _this.syncErrorValue = null;\n        /** @internal */ _this.syncErrorThrown = false;\n        /** @internal */ _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = empty$1;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = empty$1;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    // HACK(benlesh): For situations where Node has multiple copies of rxjs in\n                    // node_modules, we cannot rely on `instanceof` checks\n                    if (isTrustedSubscriber(destinationOrNext)) {\n                        var trustedSubscriber = destinationOrNext[rxSubscriber]();\n                        _this.syncErrorThrowable = trustedSubscriber.syncErrorThrowable;\n                        _this.destination = trustedSubscriber;\n                        trustedSubscriber.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriber] = function () { return this; };\n    /**\n     * A static factory for a Subscriber, given a (potentially partial) definition\n     * of an Observer.\n     * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n     * Observer represented by the given arguments.\n     * @nocollapse\n     */\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `next` from\n     * the Observable, with a value. The Observable may call this method 0 or more\n     * times.\n     * @param {T} [value] The `next` value.\n     * @return {void}\n     */\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `error` from\n     * the Observable, with an attached {@link Error}. Notifies the Observer that\n     * the Observable has experienced an error condition.\n     * @param {any} [err] The `error` exception.\n     * @return {void}\n     */\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive a valueless notification of type\n     * `complete` from the Observable. Notifies the Observer that the Observable\n     * has finished sending push-based notifications.\n     * @return {void}\n     */\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        this._parent = null;\n        this._parents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parent = _parent;\n        this._parents = _parents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SafeSubscriber = /** @class */ (function (_super) {\n    __extends$1(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== empty$1) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nfunction isTrustedSubscriber(obj) {\n    return obj instanceof Subscriber || ('syncErrorThrowable' in obj && obj[rxSubscriber]);\n}\n\nfunction toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriber]) {\n            return nextOrObserver[rxSubscriber]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber(empty$1);\n    }\n    return new Subscriber(nextOrObserver, error, complete);\n}\n\n/** Symbol.observable or a string \"@@observable\". Used for interop */\nvar observable = typeof Symbol === 'function' && Symbol.observable || '@@observable';\n\n/* tslint:disable:no-empty */\nfunction noop$1() { }\n\n/* tslint:enable:max-line-length */\n\n/* @internal */\nfunction pipeFromArray(fns) {\n    if (!fns) {\n        return noop$1;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n\n/**\n * A representation of any set of values over any amount of time. This is the most basic building block\n * of RxJS.\n *\n * @class Observable<T>\n */\nvar Observable = /** @class */ (function () {\n    /**\n     * @constructor\n     * @param {Function} subscribe the function that is called when the Observable is\n     * initially subscribed to. This function is given a Subscriber, to which new values\n     * can be `next`ed, or an `error` method can be called to raise an error, or\n     * `complete` can be called to notify of a successful completion.\n     */\n    function Observable(subscribe) {\n        /** Internal implementation detail, do not use directly. */\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    /**\n     * Creates a new Observable, with this Observable as the source, and the passed\n     * operator defined as the new observable's operator.\n     * @method lift\n     * @param {Operator} operator the operator defining the operation to take on the observable\n     * @return {Observable} a new observable with the Operator applied\n     */\n    Observable.prototype.lift = function (operator) {\n        var observable$$1 = new Observable();\n        observable$$1.source = this;\n        observable$$1.operator = operator;\n        return observable$$1;\n    };\n    /**\n     * Invokes an execution of an Observable and registers Observer handlers for notifications it will emit.\n     *\n     * <span class=\"informal\">Use it when you have all these Observables, but still nothing is happening.</span>\n     *\n     * `subscribe` is not a regular operator, but a method that calls Observable's internal `subscribe` function. It\n     * might be for example a function that you passed to a {@link create} static factory, but most of the time it is\n     * a library implementation, which defines what and when will be emitted by an Observable. This means that calling\n     * `subscribe` is actually the moment when Observable starts its work, not when it is created, as it is often\n     * thought.\n     *\n     * Apart from starting the execution of an Observable, this method allows you to listen for values\n     * that an Observable emits, as well as for when it completes or errors. You can achieve this in two\n     * following ways.\n     *\n     * The first way is creating an object that implements {@link Observer} interface. It should have methods\n     * defined by that interface, but note that it should be just a regular JavaScript object, which you can create\n     * yourself in any way you want (ES6 class, classic function constructor, object literal etc.). In particular do\n     * not attempt to use any RxJS implementation details to create Observers - you don't need them. Remember also\n     * that your object does not have to implement all methods. If you find yourself creating a method that doesn't\n     * do anything, you can simply omit it. Note however, that if `error` method is not provided, all errors will\n     * be left uncaught.\n     *\n     * The second way is to give up on Observer object altogether and simply provide callback functions in place of its methods.\n     * This means you can provide three functions as arguments to `subscribe`, where first function is equivalent\n     * of a `next` method, second of an `error` method and third of a `complete` method. Just as in case of Observer,\n     * if you do not need to listen for something, you can omit a function, preferably by passing `undefined` or `null`,\n     * since `subscribe` recognizes these functions by where they were placed in function call. When it comes\n     * to `error` function, just as before, if not provided, errors emitted by an Observable will be thrown.\n     *\n     * Whatever style of calling `subscribe` you use, in both cases it returns a Subscription object.\n     * This object allows you to call `unsubscribe` on it, which in turn will stop work that an Observable does and will clean\n     * up all resources that an Observable used. Note that cancelling a subscription will not call `complete` callback\n     * provided to `subscribe` function, which is reserved for a regular completion signal that comes from an Observable.\n     *\n     * Remember that callbacks provided to `subscribe` are not guaranteed to be called asynchronously.\n     * It is an Observable itself that decides when these functions will be called. For example {@link of}\n     * by default emits all its values synchronously. Always check documentation for how given Observable\n     * will behave when subscribed and if its default behavior can be modified with a {@link Scheduler}.\n     *\n     * @example <caption>Subscribe with an Observer</caption>\n     * const sumObserver = {\n     *   sum: 0,\n     *   next(value) {\n     *     console.log('Adding: ' + value);\n     *     this.sum = this.sum + value;\n     *   },\n     *   error() { // We actually could just remove this method,\n     *   },        // since we do not really care about errors right now.\n     *   complete() {\n     *     console.log('Sum equals: ' + this.sum);\n     *   }\n     * };\n     *\n     * Rx.Observable.of(1, 2, 3) // Synchronously emits 1, 2, 3 and then completes.\n     * .subscribe(sumObserver);\n     *\n     * // Logs:\n     * // \"Adding: 1\"\n     * // \"Adding: 2\"\n     * // \"Adding: 3\"\n     * // \"Sum equals: 6\"\n     *\n     *\n     * @example <caption>Subscribe with functions</caption>\n     * let sum = 0;\n     *\n     * Rx.Observable.of(1, 2, 3)\n     * .subscribe(\n     *   function(value) {\n     *     console.log('Adding: ' + value);\n     *     sum = sum + value;\n     *   },\n     *   undefined,\n     *   function() {\n     *     console.log('Sum equals: ' + sum);\n     *   }\n     * );\n     *\n     * // Logs:\n     * // \"Adding: 1\"\n     * // \"Adding: 2\"\n     * // \"Adding: 3\"\n     * // \"Sum equals: 6\"\n     *\n     *\n     * @example <caption>Cancel a subscription</caption>\n     * const subscription = Rx.Observable.interval(1000).subscribe(\n     *   num => console.log(num),\n     *   undefined,\n     *   () => console.log('completed!') // Will not be called, even\n     * );                                // when cancelling subscription\n     *\n     *\n     * setTimeout(() => {\n     *   subscription.unsubscribe();\n     *   console.log('unsubscribed!');\n     * }, 2500);\n     *\n     * // Logs:\n     * // 0 after 1s\n     * // 1 after 2s\n     * // \"unsubscribed!\" after 2.5s\n     *\n     *\n     * @param {Observer|Function} observerOrNext (optional) Either an observer with methods to be called,\n     *  or the first of three possible handlers, which is the handler for each value emitted from the subscribed\n     *  Observable.\n     * @param {Function} error (optional) A handler for a terminal event resulting from an error. If no error handler is provided,\n     *  the error will be thrown as unhandled.\n     * @param {Function} complete (optional) A handler for a terminal event resulting from successful completion.\n     * @return {ISubscription} a subscription reference to the registered handlers\n     * @method subscribe\n     */\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            operator.call(sink, this.source);\n        }\n        else {\n            sink.add(this.source || !sink.syncErrorThrowable ? this._subscribe(sink) : this._trySubscribe(sink));\n        }\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            sink.error(err);\n        }\n    };\n    /**\n     * @method forEach\n     * @param {Function} next a handler for each value emitted by the observable\n     * @param {PromiseConstructor} [promiseCtor] a constructor function used to instantiate the Promise\n     * @return {Promise} a promise that either resolves on observable completion or\n     *  rejects with the handled error\n     */\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            // Must be declared in a separate statement to avoid a RefernceError when\n            // accessing subscription below in the closure due to Temporal Dead Zone.\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    /**\n     * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\n     * @method Symbol.observable\n     * @return {Observable} this instance of the observable\n     */\n    Observable.prototype[observable] = function () {\n        return this;\n    };\n    /* tslint:enable:max-line-length */\n    /**\n     * Used to stitch together functional operators into a chain.\n     * @method pipe\n     * @return {Observable} the Observable result of all of the operators having\n     * been called in the order they were passed in.\n     *\n     * @example\n     *\n     * import { map, filter, scan } from 'rxjs/operators';\n     *\n     * Rx.Observable.interval(1000)\n     *   .pipe(\n     *     filter(x => x % 2 === 0),\n     *     map(x => x + x),\n     *     scan((acc, x) => acc + x)\n     *   )\n     *   .subscribe(x => console.log(x))\n     */\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    /* tslint:enable:max-line-length */\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    // HACK: Since TypeScript inherits static properties too, we have to\n    // fight against TypeScript here so Subject can have a different static create signature\n    /**\n     * Creates a new cold Observable by calling the Observable constructor\n     * @static true\n     * @owner Observable\n     * @method create\n     * @param {Function} subscribe? the subscriber function to be passed to the Observable constructor\n     * @return {Observable} a new cold observable\n     * @nocollapse\n     */\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\n/**\n * Decides between a passed promise constructor from consuming code,\n * A default configured promise constructor, and the native promise\n * constructor and returns it. If nothing can be found, it will throw\n * an error.\n * @param promiseCtor The optional promise constructor to passed by consuming code\n */\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n\nvar __extends$5 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * An error thrown when an action is invalid because the object has been\n * unsubscribed.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n *\n * @class ObjectUnsubscribedError\n */\nvar ObjectUnsubscribedError = /** @class */ (function (_super) {\n    __extends$5(ObjectUnsubscribedError, _super);\n    function ObjectUnsubscribedError() {\n        var _this = _super.call(this, 'object unsubscribed') || this;\n        _this.name = 'ObjectUnsubscribedError';\n        Object.setPrototypeOf(_this, ObjectUnsubscribedError.prototype);\n        return _this;\n    }\n    return ObjectUnsubscribedError;\n}(Error));\n\nvar __extends$6 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SubjectSubscription = /** @class */ (function (_super) {\n    __extends$6(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        var _this = _super.call(this) || this;\n        _this.subject = subject;\n        _this.subscriber = subscriber;\n        _this.closed = false;\n        return _this;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription));\n\nvar __extends$4 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @class SubjectSubscriber<T>\n */\nvar SubjectSubscriber = /** @class */ (function (_super) {\n    __extends$4(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        return _this;\n    }\n    return SubjectSubscriber;\n}(Subscriber));\n/**\n * @class Subject<T>\n */\nvar Subject = /** @class */ (function (_super) {\n    __extends$4(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.observers = [];\n        _this.closed = false;\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype[rxSubscriber] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    /**@nocollapse */\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\n/**\n * @class AnonymousSubject<T>\n */\nvar AnonymousSubject = /** @class */ (function (_super) {\n    __extends$4(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\n\nvar __extends$7 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nfunction refCount() {\n    return function refCountOperatorFunction(source) {\n        return source.lift(new RefCountOperator$1(source));\n    };\n}\nvar RefCountOperator$1 = /** @class */ (function () {\n    function RefCountOperator(connectable) {\n        this.connectable = connectable;\n    }\n    RefCountOperator.prototype.call = function (subscriber, source) {\n        var connectable = this.connectable;\n        connectable._refCount++;\n        var refCounter = new RefCountSubscriber$1(subscriber, connectable);\n        var subscription = source.subscribe(refCounter);\n        if (!refCounter.closed) {\n            refCounter.connection = connectable.connect();\n        }\n        return subscription;\n    };\n    return RefCountOperator;\n}());\nvar RefCountSubscriber$1 = /** @class */ (function (_super) {\n    __extends$7(RefCountSubscriber, _super);\n    function RefCountSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    RefCountSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        var refCount = connectable._refCount;\n        if (refCount <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount - 1;\n        if (refCount > 1) {\n            this.connection = null;\n            return;\n        }\n        ///\n        // Compare the local RefCountSubscriber's connection Subscription to the\n        // connection Subscription on the shared ConnectableObservable. In cases\n        // where the ConnectableObservable source synchronously emits values, and\n        // the RefCountSubscriber's downstream Observers synchronously unsubscribe,\n        // execution continues to here before the RefCountOperator has a chance to\n        // supply the RefCountSubscriber with the shared connection Subscription.\n        // For example:\n        // ```\n        // Observable.range(0, 10)\n        //   .publish()\n        //   .refCount()\n        //   .take(5)\n        //   .subscribe();\n        // ```\n        // In order to account for this case, RefCountSubscriber should only dispose\n        // the ConnectableObservable's shared connection Subscription if the\n        // connection Subscription exists, *and* either:\n        //   a. RefCountSubscriber doesn't have a reference to the shared connection\n        //      Subscription yet, or,\n        //   b. RefCountSubscriber's connection Subscription reference is identical\n        //      to the shared connection Subscription\n        ///\n        var connection = this.connection;\n        var sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    };\n    return RefCountSubscriber;\n}(Subscriber));\n\nvar __extends$3 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @class ConnectableObservable<T>\n */\nvar ConnectableObservable = /** @class */ (function (_super) {\n    __extends$3(ConnectableObservable, _super);\n    function ConnectableObservable(source, subjectFactory) {\n        var _this = _super.call(this) || this;\n        _this.source = source;\n        _this.subjectFactory = subjectFactory;\n        _this._refCount = 0;\n        /** @internal */\n        _this._isComplete = false;\n        return _this;\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n    ConnectableObservable.prototype._subscribe = function (subscriber) {\n        return this.getSubject().subscribe(subscriber);\n    };\n    ConnectableObservable.prototype.getSubject = function () {\n        var subject = this._subject;\n        if (!subject || subject.isStopped) {\n            this._subject = this.subjectFactory();\n        }\n        return this._subject;\n    };\n    ConnectableObservable.prototype.connect = function () {\n        var connection = this._connection;\n        if (!connection) {\n            this._isComplete = false;\n            connection = this._connection = new Subscription();\n            connection.add(this.source\n                .subscribe(new ConnectableSubscriber(this.getSubject(), this)));\n            if (connection.closed) {\n                this._connection = null;\n                connection = Subscription.EMPTY;\n            }\n            else {\n                this._connection = connection;\n            }\n        }\n        return connection;\n    };\n    ConnectableObservable.prototype.refCount = function () {\n        return refCount()(this);\n    };\n    return ConnectableObservable;\n}(Observable));\nvar connectableProto = ConnectableObservable.prototype;\nvar connectableObservableDescriptor = {\n    operator: { value: null },\n    _refCount: { value: 0, writable: true },\n    _subject: { value: null, writable: true },\n    _connection: { value: null, writable: true },\n    _subscribe: { value: connectableProto._subscribe },\n    _isComplete: { value: connectableProto._isComplete, writable: true },\n    getSubject: { value: connectableProto.getSubject },\n    connect: { value: connectableProto.connect },\n    refCount: { value: connectableProto.refCount }\n};\nvar ConnectableSubscriber = /** @class */ (function (_super) {\n    __extends$3(ConnectableSubscriber, _super);\n    function ConnectableSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    ConnectableSubscriber.prototype._error = function (err) {\n        this._unsubscribe();\n        _super.prototype._error.call(this, err);\n    };\n    ConnectableSubscriber.prototype._complete = function () {\n        this.connectable._isComplete = true;\n        this._unsubscribe();\n        _super.prototype._complete.call(this);\n    };\n    ConnectableSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (connectable) {\n            this.connectable = null;\n            var connection = connectable._connection;\n            connectable._refCount = 0;\n            connectable._subject = null;\n            connectable._connection = null;\n            if (connection) {\n                connection.unsubscribe();\n            }\n        }\n    };\n    return ConnectableSubscriber;\n}(SubjectSubscriber));\nvar RefCountSubscriber = /** @class */ (function (_super) {\n    __extends$3(RefCountSubscriber, _super);\n    function RefCountSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    RefCountSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        var refCount$$1 = connectable._refCount;\n        if (refCount$$1 <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount$$1 - 1;\n        if (refCount$$1 > 1) {\n            this.connection = null;\n            return;\n        }\n        ///\n        // Compare the local RefCountSubscriber's connection Subscription to the\n        // connection Subscription on the shared ConnectableObservable. In cases\n        // where the ConnectableObservable source synchronously emits values, and\n        // the RefCountSubscriber's downstream Observers synchronously unsubscribe,\n        // execution continues to here before the RefCountOperator has a chance to\n        // supply the RefCountSubscriber with the shared connection Subscription.\n        // For example:\n        // ```\n        // Observable.range(0, 10)\n        //   .publish()\n        //   .refCount()\n        //   .take(5)\n        //   .subscribe();\n        // ```\n        // In order to account for this case, RefCountSubscriber should only dispose\n        // the ConnectableObservable's shared connection Subscription if the\n        // connection Subscription exists, *and* either:\n        //   a. RefCountSubscriber doesn't have a reference to the shared connection\n        //      Subscription yet, or,\n        //   b. RefCountSubscriber's connection Subscription reference is identical\n        //      to the shared connection Subscription\n        ///\n        var connection = this.connection;\n        var sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    };\n    return RefCountSubscriber;\n}(Subscriber));\n\nvar __extends$8 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Groups the items emitted by an Observable according to a specified criterion,\n * and emits these grouped items as `GroupedObservables`, one\n * {@link GroupedObservable} per group.\n *\n * <img src=\"./img/groupBy.png\" width=\"100%\">\n *\n * @example <caption>Group objects by id and return as array</caption>\n * Observable.of<Obj>({id: 1, name: 'aze1'},\n *                    {id: 2, name: 'sf2'},\n *                    {id: 2, name: 'dg2'},\n *                    {id: 1, name: 'erg1'},\n *                    {id: 1, name: 'df1'},\n *                    {id: 2, name: 'sfqfb2'},\n *                    {id: 3, name: 'qfs3'},\n *                    {id: 2, name: 'qsgqsfg2'}\n *     )\n *     .groupBy(p => p.id)\n *     .flatMap( (group$) => group$.reduce((acc, cur) => [...acc, cur], []))\n *     .subscribe(p => console.log(p));\n *\n * // displays:\n * // [ { id: 1, name: 'aze1' },\n * //   { id: 1, name: 'erg1' },\n * //   { id: 1, name: 'df1' } ]\n * //\n * // [ { id: 2, name: 'sf2' },\n * //   { id: 2, name: 'dg2' },\n * //   { id: 2, name: 'sfqfb2' },\n * //   { id: 2, name: 'qsgqsfg2' } ]\n * //\n * // [ { id: 3, name: 'qfs3' } ]\n *\n * @example <caption>Pivot data on the id field</caption>\n * Observable.of<Obj>({id: 1, name: 'aze1'},\n *                    {id: 2, name: 'sf2'},\n *                    {id: 2, name: 'dg2'},\n *                    {id: 1, name: 'erg1'},\n *                    {id: 1, name: 'df1'},\n *                    {id: 2, name: 'sfqfb2'},\n *                    {id: 3, name: 'qfs1'},\n *                    {id: 2, name: 'qsgqsfg2'}\n *                   )\n *     .groupBy(p => p.id, p => p.name)\n *     .flatMap( (group$) => group$.reduce((acc, cur) => [...acc, cur], [\"\" + group$.key]))\n *     .map(arr => ({'id': parseInt(arr[0]), 'values': arr.slice(1)}))\n *     .subscribe(p => console.log(p));\n *\n * // displays:\n * // { id: 1, values: [ 'aze1', 'erg1', 'df1' ] }\n * // { id: 2, values: [ 'sf2', 'dg2', 'sfqfb2', 'qsgqsfg2' ] }\n * // { id: 3, values: [ 'qfs1' ] }\n *\n * @param {function(value: T): K} keySelector A function that extracts the key\n * for each item.\n * @param {function(value: T): R} [elementSelector] A function that extracts the\n * return element for each item.\n * @param {function(grouped: GroupedObservable<K,R>): Observable<any>} [durationSelector]\n * A function that returns an Observable to determine how long each group should\n * exist.\n * @return {Observable<GroupedObservable<K,R>>} An Observable that emits\n * GroupedObservables, each of which corresponds to a unique key value and each\n * of which emits those items from the source Observable that share that key\n * value.\n * @method groupBy\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar GroupBySubscriber = /** @class */ (function (_super) {\n    __extends$8(GroupBySubscriber, _super);\n    function GroupBySubscriber(destination, keySelector, elementSelector, durationSelector, subjectSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.elementSelector = elementSelector;\n        _this.durationSelector = durationSelector;\n        _this.subjectSelector = subjectSelector;\n        _this.groups = null;\n        _this.attemptedToUnsubscribe = false;\n        _this.count = 0;\n        return _this;\n    }\n    GroupBySubscriber.prototype._next = function (value) {\n        var key;\n        try {\n            key = this.keySelector(value);\n        }\n        catch (err) {\n            this.error(err);\n            return;\n        }\n        this._group(value, key);\n    };\n    GroupBySubscriber.prototype._group = function (value, key) {\n        var groups = this.groups;\n        if (!groups) {\n            groups = this.groups = new Map();\n        }\n        var group = groups.get(key);\n        var element;\n        if (this.elementSelector) {\n            try {\n                element = this.elementSelector(value);\n            }\n            catch (err) {\n                this.error(err);\n            }\n        }\n        else {\n            element = value;\n        }\n        if (!group) {\n            group = (this.subjectSelector ? this.subjectSelector() : new Subject());\n            groups.set(key, group);\n            var groupedObservable = new GroupedObservable(key, group, this);\n            this.destination.next(groupedObservable);\n            if (this.durationSelector) {\n                var duration = void 0;\n                try {\n                    duration = this.durationSelector(new GroupedObservable(key, group));\n                }\n                catch (err) {\n                    this.error(err);\n                    return;\n                }\n                this.add(duration.subscribe(new GroupDurationSubscriber(key, group, this)));\n            }\n        }\n        if (!group.closed) {\n            group.next(element);\n        }\n    };\n    GroupBySubscriber.prototype._error = function (err) {\n        var groups = this.groups;\n        if (groups) {\n            groups.forEach(function (group, key) {\n                group.error(err);\n            });\n            groups.clear();\n        }\n        this.destination.error(err);\n    };\n    GroupBySubscriber.prototype._complete = function () {\n        var groups = this.groups;\n        if (groups) {\n            groups.forEach(function (group, key) {\n                group.complete();\n            });\n            groups.clear();\n        }\n        this.destination.complete();\n    };\n    GroupBySubscriber.prototype.removeGroup = function (key) {\n        this.groups.delete(key);\n    };\n    GroupBySubscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.attemptedToUnsubscribe = true;\n            if (this.count === 0) {\n                _super.prototype.unsubscribe.call(this);\n            }\n        }\n    };\n    return GroupBySubscriber;\n}(Subscriber));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar GroupDurationSubscriber = /** @class */ (function (_super) {\n    __extends$8(GroupDurationSubscriber, _super);\n    function GroupDurationSubscriber(key, group, parent) {\n        var _this = _super.call(this, group) || this;\n        _this.key = key;\n        _this.group = group;\n        _this.parent = parent;\n        return _this;\n    }\n    GroupDurationSubscriber.prototype._next = function (value) {\n        this.complete();\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    GroupDurationSubscriber.prototype._unsubscribe = function () {\n        var _a = this, parent = _a.parent, key = _a.key;\n        this.key = this.parent = null;\n        if (parent) {\n            parent.removeGroup(key);\n        }\n    };\n    return GroupDurationSubscriber;\n}(Subscriber));\n/**\n * An Observable representing values belonging to the same group represented by\n * a common key. The values emitted by a GroupedObservable come from the source\n * Observable. The common key is available as the field `key` on a\n * GroupedObservable instance.\n *\n * @class GroupedObservable<K, T>\n */\nvar GroupedObservable = /** @class */ (function (_super) {\n    __extends$8(GroupedObservable, _super);\n    /** @deprecated Do not construct this type. Internal use only */\n    function GroupedObservable(key, groupSubject, refCountSubscription) {\n        var _this = _super.call(this) || this;\n        _this.key = key;\n        _this.groupSubject = groupSubject;\n        _this.refCountSubscription = refCountSubscription;\n        return _this;\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n    GroupedObservable.prototype._subscribe = function (subscriber) {\n        var subscription = new Subscription();\n        var _a = this, refCountSubscription = _a.refCountSubscription, groupSubject = _a.groupSubject;\n        if (refCountSubscription && !refCountSubscription.closed) {\n            subscription.add(new InnerRefCountSubscription(refCountSubscription));\n        }\n        subscription.add(groupSubject.subscribe(subscriber));\n        return subscription;\n    };\n    return GroupedObservable;\n}(Observable));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar InnerRefCountSubscription = /** @class */ (function (_super) {\n    __extends$8(InnerRefCountSubscription, _super);\n    function InnerRefCountSubscription(parent) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        parent.count++;\n        return _this;\n    }\n    InnerRefCountSubscription.prototype.unsubscribe = function () {\n        var parent = this.parent;\n        if (!parent.closed && !this.closed) {\n            _super.prototype.unsubscribe.call(this);\n            parent.count -= 1;\n            if (parent.count === 0 && parent.attemptedToUnsubscribe) {\n                parent.unsubscribe();\n            }\n        }\n    };\n    return InnerRefCountSubscription;\n}(Subscription));\n\nvar __extends$9 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @class BehaviorSubject<T>\n */\nvar BehaviorSubject = /** @class */ (function (_super) {\n    __extends$9(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        var _this = _super.call(this) || this;\n        _this._value = _value;\n        return _this;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @deprecated This is an internal implementation detail, do not use. */\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        if (subscription && !subscription.closed) {\n            subscriber.next(this._value);\n        }\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        if (this.hasError) {\n            throw this.thrownError;\n        }\n        else if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return this._value;\n        }\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, this._value = value);\n    };\n    return BehaviorSubject;\n}(Subject));\n\nvar __extends$13 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * A unit of work to be executed in a {@link Scheduler}. An action is typically\n * created from within a Scheduler and an RxJS user does not need to concern\n * themselves about creating and manipulating an Action.\n *\n * ```ts\n * class Action<T> extends Subscription {\n *   new (scheduler: Scheduler, work: (state?: T) => void);\n *   schedule(state?: T, delay: number = 0): Subscription;\n * }\n * ```\n *\n * @class Action<T>\n */\nvar Action = /** @class */ (function (_super) {\n    __extends$13(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    /**\n     * Schedules this action on its parent Scheduler for execution. May be passed\n     * some context object, `state`. May happen at some point in the future,\n     * according to the `delay` parameter, if specified.\n     * @param {T} [state] Some contextual data that the `work` function uses when\n     * called by the Scheduler.\n     * @param {number} [delay] Time to wait before executing the work, where the\n     * time unit is implicit and defined by the Scheduler.\n     * @return {void}\n     */\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        return this;\n    };\n    return Action;\n}(Subscription));\n\nvar __extends$12 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar AsyncAction = /** @class */ (function (_super) {\n    __extends$12(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (this.closed) {\n            return this;\n        }\n        // Always replace the current state with the new state.\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        //\n        // Important implementation note:\n        //\n        // Actions only execute once by default, unless rescheduled from within the\n        // scheduled callback. This allows us to implement single and repeat\n        // actions via the same code path, without adding API surface area, as well\n        // as mimic traditional recursion but across asynchronous boundaries.\n        //\n        // However, JS runtimes and timers distinguish between intervals achieved by\n        // serial `setTimeout` calls vs. a single `setInterval` call. An interval of\n        // serial `setTimeout` calls can be individually delayed, which delays\n        // scheduling the next `setTimeout`, and so on. `setInterval` attempts to\n        // guarantee the interval callback will be invoked more precisely to the\n        // interval period, regardless of load.\n        //\n        // Therefore, we use `setInterval` to schedule single and repeat actions.\n        // If the action reschedules itself with the same delay, the interval is not\n        // canceled. If the action doesn't reschedule, or reschedules with a\n        // different delay, the interval will be canceled after scheduled callback\n        // execution.\n        //\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        // Set the pending flag indicating that this action has been scheduled, or\n        // has recursively rescheduled itself.\n        this.pending = true;\n        this.delay = delay;\n        // If this action has already an async Id, don't request a new one.\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If this action is rescheduled with the same delay time, don't clear the interval id.\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        // Otherwise, if the action's delay time is different from the current delay,\n        // or the action has been rescheduled before it's executed, clear the interval id\n        return clearInterval(id) && undefined || undefined;\n    };\n    /**\n     * Immediately executes this action and the `work` it contains.\n     * @return {any}\n     */\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            // Dequeue if the action didn't reschedule itself. Don't call\n            // unsubscribe(), because the action could reschedule later.\n            // For example:\n            // ```\n            // scheduler.schedule(function doWork(counter) {\n            //   /* ... I'm a busy worker bee ... */\n            //   var originalAction = this;\n            //   /* wait 100ms before rescheduling the action */\n            //   setTimeout(function () {\n            //     originalAction.schedule(counter + 1);\n            //   }, 100);\n            // }, 1000);\n            // ```\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, delay) {\n        var errored = false;\n        var errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    AsyncAction.prototype._unsubscribe = function () {\n        var id = this.id;\n        var scheduler = this.scheduler;\n        var actions = scheduler.actions;\n        var index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    };\n    return AsyncAction;\n}(Action));\n\nvar __extends$11 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar QueueAction = /** @class */ (function (_super) {\n    __extends$11(QueueAction, _super);\n    function QueueAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    QueueAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (delay > 0) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.delay = delay;\n        this.state = state;\n        this.scheduler.flush(this);\n        return this;\n    };\n    QueueAction.prototype.execute = function (state, delay) {\n        return (delay > 0 || this.closed) ?\n            _super.prototype.execute.call(this, state, delay) :\n            this._execute(state, delay);\n    };\n    QueueAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If delay exists and is greater than 0, or if the delay is null (the\n        // action wasn't rescheduled) but was originally scheduled as an async\n        // action, then recycle as an async action.\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        // Otherwise flush the scheduler starting with this action.\n        return scheduler.flush(this);\n    };\n    return QueueAction;\n}(AsyncAction));\n\n/**\n * An execution context and a data structure to order tasks and schedule their\n * execution. Provides a notion of (potentially virtual) time, through the\n * `now()` getter method.\n *\n * Each unit of work in a Scheduler is called an {@link Action}.\n *\n * ```ts\n * class Scheduler {\n *   now(): number;\n *   schedule(work, delay?, state?): Subscription;\n * }\n * ```\n *\n * @class Scheduler\n * @deprecated Scheduler is an internal implementation detail of RxJS, and\n * should not be used directly. Rather, create your own class and implement\n * {@link SchedulerLike}\n */\nvar Scheduler = /** @class */ (function () {\n    function Scheduler(SchedulerAction, now) {\n        if (now === void 0) { now = Scheduler.now; }\n        this.SchedulerAction = SchedulerAction;\n        this.now = now;\n    }\n    /**\n     * Schedules a function, `work`, for execution. May happen at some point in\n     * the future, according to the `delay` parameter, if specified. May be passed\n     * some context object, `state`, which will be passed to the `work` function.\n     *\n     * The given arguments will be processed an stored as an Action object in a\n     * queue of actions.\n     *\n     * @param {function(state: ?T): ?Subscription} work A function representing a\n     * task, or some unit of work to be executed by the Scheduler.\n     * @param {number} [delay] Time to wait before executing the work, where the\n     * time unit is implicit and defined by the Scheduler itself.\n     * @param {T} [state] Some contextual data that the `work` function uses when\n     * called by the Scheduler.\n     * @return {Subscription} A subscription in order to be able to unsubscribe\n     * the scheduled work.\n     */\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) { delay = 0; }\n        return new this.SchedulerAction(this, work).schedule(state, delay);\n    };\n    /** @nocollapse */\n    Scheduler.now = Date.now ? Date.now : function () { return +new Date(); };\n    return Scheduler;\n}());\n\nvar __extends$15 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar AsyncScheduler = /** @class */ (function (_super) {\n    __extends$15(AsyncScheduler, _super);\n    function AsyncScheduler(SchedulerAction, now) {\n        if (now === void 0) { now = Scheduler.now; }\n        var _this = _super.call(this, SchedulerAction, function () {\n            if (AsyncScheduler.delegate && AsyncScheduler.delegate !== _this) {\n                return AsyncScheduler.delegate.now();\n            }\n            else {\n                return now();\n            }\n        }) || this;\n        _this.actions = [];\n        /**\n         * A flag to indicate whether the Scheduler is currently executing a batch of\n         * queued actions.\n         * @type {boolean}\n         */\n        _this.active = false;\n        /**\n         * An internal ID used to track the latest asynchronous task such as those\n         * coming from `setTimeout`, `setInterval`, `requestAnimationFrame`, and\n         * others.\n         * @type {any}\n         */\n        _this.scheduled = undefined;\n        return _this;\n    }\n    AsyncScheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) { delay = 0; }\n        if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n            return AsyncScheduler.delegate.schedule(work, delay, state);\n        }\n        else {\n            return _super.prototype.schedule.call(this, work, delay, state);\n        }\n    };\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this.active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this.active = true;\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (action = actions.shift()); // exhaust the scheduler queue\n        this.active = false;\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\n\nvar __extends$14 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar QueueScheduler = /** @class */ (function (_super) {\n    __extends$14(QueueScheduler, _super);\n    function QueueScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return QueueScheduler;\n}(AsyncScheduler));\n\n/**\n *\n * Queue Scheduler\n *\n * <span class=\"informal\">Put every next task on a queue, instead of executing it immediately</span>\n *\n * `queue` scheduler, when used with delay, behaves the same as {@link async} scheduler.\n *\n * When used without delay, it schedules given task synchronously - executes it right when\n * it is scheduled. However when called recursively, that is when inside the scheduled task,\n * another task is scheduled with queue scheduler, instead of executing immediately as well,\n * that task will be put on a queue and wait for current one to finish.\n *\n * This means that when you execute task with `queue` scheduler, you are sure it will end\n * before any other task scheduled with that scheduler will start.\n *\n * @examples <caption>Schedule recursively first, then do something</caption>\n *\n * Rx.Scheduler.queue.schedule(() => {\n *   Rx.Scheduler.queue.schedule(() => console.log('second')); // will not happen now, but will be put on a queue\n *\n *   console.log('first');\n * });\n *\n * // Logs:\n * // \"first\"\n * // \"second\"\n *\n *\n * @example <caption>Reschedule itself recursively</caption>\n *\n * Rx.Scheduler.queue.schedule(function(state) {\n *   if (state !== 0) {\n *     console.log('before', state);\n *     this.schedule(state - 1); // `this` references currently executing Action,\n *                               // which we reschedule with new state\n *     console.log('after', state);\n *   }\n * }, 0, 3);\n *\n * // In scheduler that runs recursively, you would expect:\n * // \"before\", 3\n * // \"before\", 2\n * // \"before\", 1\n * // \"after\", 1\n * // \"after\", 2\n * // \"after\", 3\n *\n * // But with queue it logs:\n * // \"before\", 3\n * // \"after\", 3\n * // \"before\", 2\n * // \"after\", 2\n * // \"before\", 1\n * // \"after\", 1\n *\n *\n * @static true\n * @name queue\n * @owner Scheduler\n */\nvar queue = new QueueScheduler(QueueAction);\n\n/**\n * The same Observable instance returned by any call to {@link empty} without a\n * {@link Scheduler}. It is preferrable to use this over `empty()`.\n */\nvar EMPTY$1 = new Observable(function (subscriber) { return subscriber.complete(); });\n/**\n * Creates an Observable that emits no items to the Observer and immediately\n * emits a complete notification.\n *\n * <span class=\"informal\">Just emits 'complete', and nothing else.\n * </span>\n *\n * <img src=\"./img/empty.png\" width=\"100%\">\n *\n * This static operator is useful for creating a simple Observable that only\n * emits the complete notification. It can be used for composing with other\n * Observables, such as in a {@link mergeMap}.\n *\n * @example <caption>Emit the number 7, then complete.</caption>\n * var result = Rx.Observable.empty().startWith(7);\n * result.subscribe(x => console.log(x));\n *\n * @example <caption>Map and flatten only odd numbers to the sequence 'a', 'b', 'c'</caption>\n * var interval = Rx.Observable.interval(1000);\n * var result = interval.mergeMap(x =>\n *   x % 2 === 1 ? Rx.Observable.of('a', 'b', 'c') : Rx.Observable.empty()\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following to the console:\n * // x is equal to the count on the interval eg(0,1,2,3,...)\n * // x will occur every 1000ms\n * // if x % 2 is equal to 1 print abc\n * // if x % 2 is not equal to 1 nothing will be output\n *\n * @see {@link create}\n * @see {@link never}\n * @see {@link of}\n * @see {@link throw}\n *\n * @param {Scheduler} [scheduler] A {@link IScheduler} to use for scheduling\n * the emission of the complete notification.\n * @return {Observable} An \"empty\" Observable: emits only the complete\n * notification.\n * @static true\n * @name empty\n * @owner Observable\n * @deprecated Deprecated in favor of using EMPTY constant.\n */\nfunction empty$2(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY$1;\n}\nfunction emptyScheduled(scheduler) {\n    return new Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n\nfunction isScheduler(value) {\n    return value && typeof value.schedule === 'function';\n}\n\n/**\n * Subscribes to an ArrayLike with a subscriber\n * @param array The array or array-like to subscribe to\n */\nvar subscribeToArray = function (array) { return function (subscriber) {\n    for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n        subscriber.next(array[i]);\n    }\n    if (!subscriber.closed) {\n        subscriber.complete();\n    }\n}; };\n\nfunction fromArray(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToArray(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            var i = 0;\n            sub.add(scheduler.schedule(function () {\n                if (i === input.length) {\n                    subscriber.complete();\n                    return;\n                }\n                subscriber.next(input[i++]);\n                if (!subscriber.closed) {\n                    sub.add(this.schedule());\n                }\n            }));\n            return sub;\n        });\n    }\n}\n\nfunction scalar(value) {\n    var result = new Observable(function (subscriber) {\n        subscriber.next(value);\n        subscriber.complete();\n    });\n    result._isScalar = true;\n    result.value = value;\n    return result;\n}\n\nfunction of() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = args[args.length - 1];\n    if (isScheduler(scheduler)) {\n        args.pop();\n    }\n    else {\n        scheduler = undefined;\n    }\n    switch (args.length) {\n        case 0:\n            return empty$2(scheduler);\n        case 1:\n            return scheduler ? fromArray(args, scheduler) : scalar(args[0]);\n        default:\n            return fromArray(args, scheduler);\n    }\n}\n\n/**\n * Creates an Observable that emits no items to the Observer and immediately\n * emits an error notification.\n *\n * <span class=\"informal\">Just emits 'error', and nothing else.\n * </span>\n *\n * <img src=\"./img/throw.png\" width=\"100%\">\n *\n * This static operator is useful for creating a simple Observable that only\n * emits the error notification. It can be used for composing with other\n * Observables, such as in a {@link mergeMap}.\n *\n * @example <caption>Emit the number 7, then emit an error.</caption>\n * import { throwError, concat, of } from 'rxjs/create';\n *\n * const result = concat(of(7), throwError(new Error('oops!')));\n * result.subscribe(x => console.log(x), e => console.error(e));\n *\n * @example <caption>Map and flatten numbers to the sequence 'a', 'b', 'c', but throw an error for 13</caption>\n * import { throwError, interval, of } from 'rxjs/create';\n * import { mergeMap } from 'rxjs/operators';\n *\n * interval(1000).pipe(\n *   mergeMap(x => x === 13 ?\n *     throwError('Thirteens are bad') :\n *     of('a', 'b', 'c')\n *   )\n * ).subscribe(x => console.log(x), e => console.error(e));\n *\n * @see {@link create}\n * @see {@link empty}\n * @see {@link never}\n * @see {@link of}\n *\n * @param {any} error The particular Error to pass to the error notification.\n * @param {Scheduler} [scheduler] A {@link IScheduler} to use for scheduling\n * the emission of the error notification.\n * @return {Observable} An error Observable: emits only the error notification\n * using the given error argument.\n * @static true\n * @name throw\n * @owner Observable\n */\nfunction throwError(error, scheduler) {\n    if (!scheduler) {\n        return new Observable(function (subscriber) { return subscriber.error(error); });\n    }\n    else {\n        return new Observable(function (subscriber) { return scheduler.schedule(dispatch, 0, { error: error, subscriber: subscriber }); });\n    }\n}\nfunction dispatch(_a) {\n    var error = _a.error, subscriber = _a.subscriber;\n    subscriber.error(error);\n}\n\n/**\n * Represents a push-based event or value that an {@link Observable} can emit.\n * This class is particularly useful for operators that manage notifications,\n * like {@link materialize}, {@link dematerialize}, {@link observeOn}, and\n * others. Besides wrapping the actual delivered value, it also annotates it\n * with metadata of, for instance, what type of push message it is (`next`,\n * `error`, or `complete`).\n *\n * @see {@link materialize}\n * @see {@link dematerialize}\n * @see {@link observeOn}\n *\n * @class Notification<T>\n */\nvar Notification = /** @class */ (function () {\n    function Notification(kind, value, error) {\n        this.kind = kind;\n        this.value = value;\n        this.error = error;\n        this.hasValue = kind === 'N';\n    }\n    /**\n     * Delivers to the given `observer` the value wrapped by this Notification.\n     * @param {Observer} observer\n     * @return\n     */\n    Notification.prototype.observe = function (observer) {\n        switch (this.kind) {\n            case 'N':\n                return observer.next && observer.next(this.value);\n            case 'E':\n                return observer.error && observer.error(this.error);\n            case 'C':\n                return observer.complete && observer.complete();\n        }\n    };\n    /**\n     * Given some {@link Observer} callbacks, deliver the value represented by the\n     * current Notification to the correctly corresponding callback.\n     * @param {function(value: T): void} next An Observer `next` callback.\n     * @param {function(err: any): void} [error] An Observer `error` callback.\n     * @param {function(): void} [complete] An Observer `complete` callback.\n     * @return {any}\n     */\n    Notification.prototype.do = function (next, error, complete) {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return next && next(this.value);\n            case 'E':\n                return error && error(this.error);\n            case 'C':\n                return complete && complete();\n        }\n    };\n    /**\n     * Takes an Observer or its individual callback functions, and calls `observe`\n     * or `do` methods accordingly.\n     * @param {Observer|function(value: T): void} nextOrObserver An Observer or\n     * the `next` callback.\n     * @param {function(err: any): void} [error] An Observer `error` callback.\n     * @param {function(): void} [complete] An Observer `complete` callback.\n     * @return {any}\n     */\n    Notification.prototype.accept = function (nextOrObserver, error, complete) {\n        if (nextOrObserver && typeof nextOrObserver.next === 'function') {\n            return this.observe(nextOrObserver);\n        }\n        else {\n            return this.do(nextOrObserver, error, complete);\n        }\n    };\n    /**\n     * Returns a simple Observable that just delivers the notification represented\n     * by this Notification instance.\n     * @return {any}\n     */\n    Notification.prototype.toObservable = function () {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return of(this.value);\n            case 'E':\n                return throwError(this.error);\n            case 'C':\n                return empty$2();\n        }\n        throw new Error('unexpected notification kind value');\n    };\n    /**\n     * A shortcut to create a Notification instance of the type `next` from a\n     * given value.\n     * @param {T} value The `next` value.\n     * @return {Notification<T>} The \"next\" Notification representing the\n     * argument.\n     * @nocollapse\n     */\n    Notification.createNext = function (value) {\n        if (typeof value !== 'undefined') {\n            return new Notification('N', value);\n        }\n        return Notification.undefinedValueNotification;\n    };\n    /**\n     * A shortcut to create a Notification instance of the type `error` from a\n     * given error.\n     * @param {any} [err] The `error` error.\n     * @return {Notification<T>} The \"error\" Notification representing the\n     * argument.\n     * @nocollapse\n     */\n    Notification.createError = function (err) {\n        return new Notification('E', undefined, err);\n    };\n    /**\n     * A shortcut to create a Notification instance of the type `complete`.\n     * @return {Notification<any>} The valueless \"complete\" Notification.\n     * @nocollapse\n     */\n    Notification.createComplete = function () {\n        return Notification.completeNotification;\n    };\n    Notification.completeNotification = new Notification('C');\n    Notification.undefinedValueNotification = new Notification('N', undefined);\n    return Notification;\n}());\n\nvar __extends$16 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n *\n * Re-emits all notifications from source Observable with specified scheduler.\n *\n * <span class=\"informal\">Ensure a specific scheduler is used, from outside of an Observable.</span>\n *\n * `observeOn` is an operator that accepts a scheduler as a first parameter, which will be used to reschedule\n * notifications emitted by the source Observable. It might be useful, if you do not have control over\n * internal scheduler of a given Observable, but want to control when its values are emitted nevertheless.\n *\n * Returned Observable emits the same notifications (nexted values, complete and error events) as the source Observable,\n * but rescheduled with provided scheduler. Note that this doesn't mean that source Observables internal\n * scheduler will be replaced in any way. Original scheduler still will be used, but when the source Observable emits\n * notification, it will be immediately scheduled again - this time with scheduler passed to `observeOn`.\n * An anti-pattern would be calling `observeOn` on Observable that emits lots of values synchronously, to split\n * that emissions into asynchronous chunks. For this to happen, scheduler would have to be passed into the source\n * Observable directly (usually into the operator that creates it). `observeOn` simply delays notifications a\n * little bit more, to ensure that they are emitted at expected moments.\n *\n * As a matter of fact, `observeOn` accepts second parameter, which specifies in milliseconds with what delay notifications\n * will be emitted. The main difference between {@link delay} operator and `observeOn` is that `observeOn`\n * will delay all notifications - including error notifications - while `delay` will pass through error\n * from source Observable immediately when it is emitted. In general it is highly recommended to use `delay` operator\n * for any kind of delaying of values in the stream, while using `observeOn` to specify which scheduler should be used\n * for notification emissions in general.\n *\n * @example <caption>Ensure values in subscribe are called just before browser repaint.</caption>\n * const intervals = Rx.Observable.interval(10); // Intervals are scheduled\n *                                               // with async scheduler by default...\n *\n * intervals\n * .observeOn(Rx.Scheduler.animationFrame)       // ...but we will observe on animationFrame\n * .subscribe(val => {                           // scheduler to ensure smooth animation.\n *   someDiv.style.height = val + 'px';\n * });\n *\n * @see {@link delay}\n *\n * @param {SchedulerLike} scheduler Scheduler that will be used to reschedule notifications from source Observable.\n * @param {number} [delay] Number of milliseconds that states with what delay every notification should be rescheduled.\n * @return {Observable<T>} Observable that emits the same notifications as the source Observable,\n * but with provided scheduler.\n *\n * @method observeOn\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ObserveOnSubscriber = /** @class */ (function (_super) {\n    __extends$16(ObserveOnSubscriber, _super);\n    function ObserveOnSubscriber(destination, scheduler, delay) {\n        if (delay === void 0) { delay = 0; }\n        var _this = _super.call(this, destination) || this;\n        _this.scheduler = scheduler;\n        _this.delay = delay;\n        return _this;\n    }\n    /** @nocollapse */\n    ObserveOnSubscriber.dispatch = function (arg) {\n        var notification = arg.notification, destination = arg.destination;\n        notification.observe(destination);\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype.scheduleMessage = function (notification) {\n        this.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch, this.delay, new ObserveOnMessage(notification, this.destination)));\n    };\n    ObserveOnSubscriber.prototype._next = function (value) {\n        this.scheduleMessage(Notification.createNext(value));\n    };\n    ObserveOnSubscriber.prototype._error = function (err) {\n        this.scheduleMessage(Notification.createError(err));\n    };\n    ObserveOnSubscriber.prototype._complete = function () {\n        this.scheduleMessage(Notification.createComplete());\n    };\n    return ObserveOnSubscriber;\n}(Subscriber));\nvar ObserveOnMessage = /** @class */ (function () {\n    function ObserveOnMessage(notification, destination) {\n        this.notification = notification;\n        this.destination = destination;\n    }\n    return ObserveOnMessage;\n}());\n\nvar __extends$10 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @class ReplaySubject<T>\n */\nvar ReplaySubject = /** @class */ (function (_super) {\n    __extends$10(ReplaySubject, _super);\n    function ReplaySubject(bufferSize, windowTime, scheduler) {\n        if (bufferSize === void 0) { bufferSize = Number.POSITIVE_INFINITY; }\n        if (windowTime === void 0) { windowTime = Number.POSITIVE_INFINITY; }\n        var _this = _super.call(this) || this;\n        _this.scheduler = scheduler;\n        _this._events = [];\n        _this._infiniteTimeWindow = false;\n        _this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n        _this._windowTime = windowTime < 1 ? 1 : windowTime;\n        if (windowTime === Number.POSITIVE_INFINITY) {\n            _this._infiniteTimeWindow = true;\n            _this.next = _this.nextInfiniteTimeWindow;\n        }\n        else {\n            _this.next = _this.nextTimeWindow;\n        }\n        return _this;\n    }\n    ReplaySubject.prototype.nextInfiniteTimeWindow = function (value) {\n        var _events = this._events;\n        _events.push(value);\n        // Since this method is invoked in every next() call than the buffer\n        // can overgrow the max size only by one item\n        if (_events.length > this._bufferSize) {\n            _events.shift();\n        }\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype.nextTimeWindow = function (value) {\n        this._events.push(new ReplayEvent(this._getNow(), value));\n        this._trimBufferThenGetEvents();\n        _super.prototype.next.call(this, value);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        // When `_infiniteTimeWindow === true` then the buffer is already trimmed\n        var _infiniteTimeWindow = this._infiniteTimeWindow;\n        var _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();\n        var scheduler = this.scheduler;\n        var len = _events.length;\n        var subscription;\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.isStopped || this.hasError) {\n            subscription = Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            subscription = new SubjectSubscription(this, subscriber);\n        }\n        if (scheduler) {\n            subscriber.add(subscriber = new ObserveOnSubscriber(subscriber, scheduler));\n        }\n        if (_infiniteTimeWindow) {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i]);\n            }\n        }\n        else {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i].value);\n            }\n        }\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n        }\n        return subscription;\n    };\n    ReplaySubject.prototype._getNow = function () {\n        return (this.scheduler || queue).now();\n    };\n    ReplaySubject.prototype._trimBufferThenGetEvents = function () {\n        var now = this._getNow();\n        var _bufferSize = this._bufferSize;\n        var _windowTime = this._windowTime;\n        var _events = this._events;\n        var eventsCount = _events.length;\n        var spliceCount = 0;\n        // Trim events that fall out of the time window.\n        // Start at the front of the list. Break early once\n        // we encounter an event that falls within the window.\n        while (spliceCount < eventsCount) {\n            if ((now - _events[spliceCount].time) < _windowTime) {\n                break;\n            }\n            spliceCount++;\n        }\n        if (eventsCount > _bufferSize) {\n            spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n        }\n        if (spliceCount > 0) {\n            _events.splice(0, spliceCount);\n        }\n        return _events;\n    };\n    return ReplaySubject;\n}(Subject));\nvar ReplayEvent = /** @class */ (function () {\n    function ReplayEvent(time, value) {\n        this.time = time;\n        this.value = value;\n    }\n    return ReplayEvent;\n}());\n\nvar __extends$17 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @class AsyncSubject<T>\n */\nvar AsyncSubject = /** @class */ (function (_super) {\n    __extends$17(AsyncSubject, _super);\n    function AsyncSubject() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.value = null;\n        _this.hasNext = false;\n        _this.hasCompleted = false;\n        return _this;\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n    AsyncSubject.prototype._subscribe = function (subscriber) {\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.hasCompleted && this.hasNext) {\n            subscriber.next(this.value);\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        return _super.prototype._subscribe.call(this, subscriber);\n    };\n    AsyncSubject.prototype.next = function (value) {\n        if (!this.hasCompleted) {\n            this.value = value;\n            this.hasNext = true;\n        }\n    };\n    AsyncSubject.prototype.error = function (error) {\n        if (!this.hasCompleted) {\n            _super.prototype.error.call(this, error);\n        }\n    };\n    AsyncSubject.prototype.complete = function () {\n        this.hasCompleted = true;\n        if (this.hasNext) {\n            _super.prototype.next.call(this, this.value);\n        }\n        _super.prototype.complete.call(this);\n    };\n    return AsyncSubject;\n}(Subject));\n\nvar nextHandle = 0;\nvar tasksByHandle = {};\nfunction runIfPresent(handle) {\n    var cb = tasksByHandle[handle];\n    if (cb) {\n        cb();\n    }\n}\nvar Immediate = {\n    setImmediate: function (cb) {\n        var handle = nextHandle++;\n        tasksByHandle[handle] = cb;\n        Promise.resolve().then(function () { return runIfPresent(handle); });\n        return handle;\n    },\n    clearImmediate: function (handle) {\n        delete tasksByHandle[handle];\n    },\n};\n\nvar __extends$18 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar AsapAction = /** @class */ (function (_super) {\n    __extends$18(AsapAction, _super);\n    function AsapAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    AsapAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If delay is greater than 0, request as an async action.\n        if (delay !== null && delay > 0) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        // Push the action to the end of the scheduler queue.\n        scheduler.actions.push(this);\n        // If a microtask has already been scheduled, don't schedule another\n        // one. If a microtask hasn't been scheduled yet, schedule one now. Return\n        // the current scheduled microtask id.\n        return scheduler.scheduled || (scheduler.scheduled = Immediate.setImmediate(scheduler.flush.bind(scheduler, null)));\n    };\n    AsapAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If delay exists and is greater than 0, or if the delay is null (the\n        // action wasn't rescheduled) but was originally scheduled as an async\n        // action, then recycle as an async action.\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);\n        }\n        // If the scheduler queue is empty, cancel the requested microtask and\n        // set the scheduled flag to undefined so the next AsapAction will schedule\n        // its own.\n        if (scheduler.actions.length === 0) {\n            Immediate.clearImmediate(id);\n            scheduler.scheduled = undefined;\n        }\n        // Return undefined so the action knows to request a new async id if it's rescheduled.\n        return undefined;\n    };\n    return AsapAction;\n}(AsyncAction));\n\nvar __extends$19 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar AsapScheduler = /** @class */ (function (_super) {\n    __extends$19(AsapScheduler, _super);\n    function AsapScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AsapScheduler.prototype.flush = function (action) {\n        this.active = true;\n        this.scheduled = undefined;\n        var actions = this.actions;\n        var error;\n        var index = -1;\n        var count = actions.length;\n        action = action || actions.shift();\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (++index < count && (action = actions.shift()));\n        this.active = false;\n        if (error) {\n            while (++index < count && (action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsapScheduler;\n}(AsyncScheduler));\n\n/**\n *\n * Asap Scheduler\n *\n * <span class=\"informal\">Perform task as fast as it can be performed asynchronously</span>\n *\n * `asap` scheduler behaves the same as {@link async} scheduler when you use it to delay task\n * in time. If however you set delay to `0`, `asap` will wait for current synchronously executing\n * code to end and then it will try to execute given task as fast as possible.\n *\n * `asap` scheduler will do its best to minimize time between end of currently executing code\n * and start of scheduled task. This makes it best candidate for performing so called \"deferring\".\n * Traditionally this was achieved by calling `setTimeout(deferredTask, 0)`, but that technique involves\n * some (although minimal) unwanted delay.\n *\n * Note that using `asap` scheduler does not necessarily mean that your task will be first to process\n * after currently executing code. In particular, if some task was also scheduled with `asap` before,\n * that task will execute first. That being said, if you need to schedule task asynchronously, but\n * as soon as possible, `asap` scheduler is your best bet.\n *\n * @example <caption>Compare async and asap scheduler</caption>\n *\n * Rx.Scheduler.async.schedule(() => console.log('async')); // scheduling 'async' first...\n * Rx.Scheduler.asap.schedule(() => console.log('asap'));\n *\n * // Logs:\n * // \"asap\"\n * // \"async\"\n * // ... but 'asap' goes first!\n *\n * @static true\n * @name asap\n * @owner Scheduler\n */\nvar asap = new AsapScheduler(AsapAction);\n\n/**\n *\n * Async Scheduler\n *\n * <span class=\"informal\">Schedule task as if you used setTimeout(task, duration)</span>\n *\n * `async` scheduler schedules tasks asynchronously, by putting them on the JavaScript\n * event loop queue. It is best used to delay tasks in time or to schedule tasks repeating\n * in intervals.\n *\n * If you just want to \"defer\" task, that is to perform it right after currently\n * executing synchronous code ends (commonly achieved by `setTimeout(deferredTask, 0)`),\n * better choice will be the {@link asap} scheduler.\n *\n * @example <caption>Use async scheduler to delay task</caption>\n * const task = () => console.log('it works!');\n *\n * Rx.Scheduler.async.schedule(task, 2000);\n *\n * // After 2 seconds logs:\n * // \"it works!\"\n *\n *\n * @example <caption>Use async scheduler to repeat task in intervals</caption>\n * function task(state) {\n *   console.log(state);\n *   this.schedule(state + 1, 1000); // `this` references currently executing Action,\n *                                   // which we reschedule with new state and delay\n * }\n *\n * Rx.Scheduler.async.schedule(task, 3000, 0);\n *\n * // Logs:\n * // 0 after 3s\n * // 1 after 4s\n * // 2 after 5s\n * // 3 after 6s\n *\n * @static true\n * @name async\n * @owner Scheduler\n */\nvar async = new AsyncScheduler(AsyncAction);\n\nvar __extends$20 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar AnimationFrameAction = /** @class */ (function (_super) {\n    __extends$20(AnimationFrameAction, _super);\n    function AnimationFrameAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    AnimationFrameAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If delay is greater than 0, request as an async action.\n        if (delay !== null && delay > 0) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        // Push the action to the end of the scheduler queue.\n        scheduler.actions.push(this);\n        // If an animation frame has already been requested, don't request another\n        // one. If an animation frame hasn't been requested yet, request one. Return\n        // the current animation frame request id.\n        return scheduler.scheduled || (scheduler.scheduled = requestAnimationFrame(function () { return scheduler.flush(null); }));\n    };\n    AnimationFrameAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If delay exists and is greater than 0, or if the delay is null (the\n        // action wasn't rescheduled) but was originally scheduled as an async\n        // action, then recycle as an async action.\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);\n        }\n        // If the scheduler queue is empty, cancel the requested animation frame and\n        // set the scheduled flag to undefined so the next AnimationFrameAction will\n        // request its own.\n        if (scheduler.actions.length === 0) {\n            cancelAnimationFrame(id);\n            scheduler.scheduled = undefined;\n        }\n        // Return undefined so the action knows to request a new async id if it's rescheduled.\n        return undefined;\n    };\n    return AnimationFrameAction;\n}(AsyncAction));\n\nvar __extends$21 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar AnimationFrameScheduler = /** @class */ (function (_super) {\n    __extends$21(AnimationFrameScheduler, _super);\n    function AnimationFrameScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AnimationFrameScheduler.prototype.flush = function (action) {\n        this.active = true;\n        this.scheduled = undefined;\n        var actions = this.actions;\n        var error;\n        var index = -1;\n        var count = actions.length;\n        action = action || actions.shift();\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (++index < count && (action = actions.shift()));\n        this.active = false;\n        if (error) {\n            while (++index < count && (action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AnimationFrameScheduler;\n}(AsyncScheduler));\n\n/**\n *\n * Animation Frame Scheduler\n *\n * <span class=\"informal\">Perform task when `window.requestAnimationFrame` would fire</span>\n *\n * When `animationFrame` scheduler is used with delay, it will fall back to {@link async} scheduler\n * behaviour.\n *\n * Without delay, `animationFrame` scheduler can be used to create smooth browser animations.\n * It makes sure scheduled task will happen just before next browser content repaint,\n * thus performing animations as efficiently as possible.\n *\n * @example <caption>Schedule div height animation</caption>\n * const div = document.querySelector('.some-div');\n *\n * Rx.Scheduler.animationFrame.schedule(function(height) {\n *   div.style.height = height + \"px\";\n *\n *   this.schedule(height + 1);  // `this` references currently executing Action,\n *                               // which we reschedule with new state\n * }, 0, 0);\n *\n * // You will see .some-div element growing in height\n *\n *\n * @static true\n * @name animationFrame\n * @owner Scheduler\n */\nvar animationFrame = new AnimationFrameScheduler(AnimationFrameAction);\n\nvar __extends$22 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar VirtualTimeScheduler = /** @class */ (function (_super) {\n    __extends$22(VirtualTimeScheduler, _super);\n    function VirtualTimeScheduler(SchedulerAction, maxFrames) {\n        if (SchedulerAction === void 0) { SchedulerAction = VirtualAction; }\n        if (maxFrames === void 0) { maxFrames = Number.POSITIVE_INFINITY; }\n        var _this = _super.call(this, SchedulerAction, function () { return _this.frame; }) || this;\n        _this.maxFrames = maxFrames;\n        _this.frame = 0;\n        _this.index = -1;\n        return _this;\n    }\n    /**\n     * Prompt the Scheduler to execute all of its queued actions, therefore\n     * clearing its queue.\n     * @return {void}\n     */\n    VirtualTimeScheduler.prototype.flush = function () {\n        var _a = this, actions = _a.actions, maxFrames = _a.maxFrames;\n        var error, action;\n        while ((action = actions.shift()) && (this.frame = action.delay) <= maxFrames) {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        }\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    VirtualTimeScheduler.frameTimeFactor = 10;\n    return VirtualTimeScheduler;\n}(AsyncScheduler));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar VirtualAction = /** @class */ (function (_super) {\n    __extends$22(VirtualAction, _super);\n    function VirtualAction(scheduler, work, index) {\n        if (index === void 0) { index = scheduler.index += 1; }\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.index = index;\n        _this.active = true;\n        _this.index = scheduler.index = index;\n        return _this;\n    }\n    VirtualAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (!this.id) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.active = false;\n        // If an action is rescheduled, we save allocations by mutating its state,\n        // pushing it to the end of the scheduler queue, and recycling the action.\n        // But since the VirtualTimeScheduler is used for testing, VirtualActions\n        // must be immutable so they can be inspected later.\n        var action = new VirtualAction(this.scheduler, this.work);\n        this.add(action);\n        return action.schedule(state, delay);\n    };\n    VirtualAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        this.delay = scheduler.frame + delay;\n        var actions = scheduler.actions;\n        actions.push(this);\n        actions.sort(VirtualAction.sortActions);\n        return true;\n    };\n    VirtualAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        return undefined;\n    };\n    VirtualAction.prototype._execute = function (state, delay) {\n        if (this.active === true) {\n            return _super.prototype._execute.call(this, state, delay);\n        }\n    };\n    VirtualAction.sortActions = function (a, b) {\n        if (a.delay === b.delay) {\n            if (a.index === b.index) {\n                return 0;\n            }\n            else if (a.index > b.index) {\n                return 1;\n            }\n            else {\n                return -1;\n            }\n        }\n        else if (a.delay > b.delay) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    };\n    return VirtualAction;\n}(AsyncAction));\n\nfunction identity(x) {\n    return x;\n}\n\nvar __extends$23 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * An error thrown when an element was queried at a certain index of an\n * Observable, but no such index or position exists in that sequence.\n *\n * @see {@link elementAt}\n * @see {@link take}\n * @see {@link takeLast}\n *\n * @class ArgumentOutOfRangeError\n */\nvar ArgumentOutOfRangeError = /** @class */ (function (_super) {\n    __extends$23(ArgumentOutOfRangeError, _super);\n    function ArgumentOutOfRangeError() {\n        var _this = _super.call(this, 'argument out of range') || this;\n        _this.name = 'ArgumentOutOfRangeError';\n        Object.setPrototypeOf(_this, ArgumentOutOfRangeError.prototype);\n        return _this;\n    }\n    return ArgumentOutOfRangeError;\n}(Error));\n\nvar __extends$24 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * An error thrown when an Observable or a sequence was queried but has no\n * elements.\n *\n * @see {@link first}\n * @see {@link last}\n * @see {@link single}\n *\n * @class EmptyError\n */\nvar EmptyError = /** @class */ (function (_super) {\n    __extends$24(EmptyError, _super);\n    function EmptyError() {\n        var _this = _super.call(this, 'no elements in sequence') || this;\n        _this.name = 'EmptyError';\n        Object.setPrototypeOf(_this, EmptyError.prototype);\n        return _this;\n    }\n    return EmptyError;\n}(Error));\n\nvar __extends$25 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * An error thrown when duetime elapses.\n *\n * @see {@link timeout}\n *\n * @class TimeoutError\n */\nvar TimeoutError = /** @class */ (function (_super) {\n    __extends$25(TimeoutError, _super);\n    function TimeoutError() {\n        var _this = _super.call(this, 'Timeout has occurred') || this;\n        Object.setPrototypeOf(_this, TimeoutError.prototype);\n        return _this;\n    }\n    return TimeoutError;\n}(Error));\n\nvar __extends$26 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Applies a given `project` function to each value emitted by the source\n * Observable, and emits the resulting values as an Observable.\n *\n * <span class=\"informal\">Like [Array.prototype.map()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map),\n * it passes each source value through a transformation function to get\n * corresponding output values.</span>\n *\n * <img src=\"./img/map.png\" width=\"100%\">\n *\n * Similar to the well known `Array.prototype.map` function, this operator\n * applies a projection to each value and emits that projection in the output\n * Observable.\n *\n * @example <caption>Map every click to the clientX position of that click</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var positions = clicks.map(ev => ev.clientX);\n * positions.subscribe(x => console.log(x));\n *\n * @see {@link mapTo}\n * @see {@link pluck}\n *\n * @param {function(value: T, index: number): R} project The function to apply\n * to each `value` emitted by the source Observable. The `index` parameter is\n * the number `i` for the i-th emission that has happened since the\n * subscription, starting from the number `0`.\n * @param {any} [thisArg] An optional argument to define what `this` is in the\n * `project` function.\n * @return {Observable<R>} An Observable that emits the values from the source\n * Observable transformed by the given `project` function.\n * @method map\n * @owner Observable\n */\nfunction map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nvar MapOperator = /** @class */ (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MapSubscriber = /** @class */ (function (_super) {\n    __extends$26(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    // NOTE: This looks unoptimized, but it's actually purposefully NOT\n    // using try/catch optimizations.\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber));\n\nvar __read$1 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$1 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$1(arguments[i]));\n    return ar;\n};\n// tslint:enable:max-line-length\n/**\n * Converts a callback API to a function that returns an Observable.\n *\n * <span class=\"informal\">Give it a function `f` of type `f(x, callback)` and\n * it will return a function `g` that when called as `g(x)` will output an\n * Observable.</span>\n *\n * `bindCallback` is not an operator because its input and output are not\n * Observables. The input is a function `func` with some parameters, the\n * last parameter must be a callback function that `func` calls when it is\n * done.\n *\n * The output of `bindCallback` is a function that takes the same parameters\n * as `func`, except the last one (the callback). When the output function\n * is called with arguments it will return an Observable. If function `func`\n * calls its callback with one argument the Observable will emit that value.\n * If on the other hand the callback is called with multiple values the resulting\n * Observable will emit an array with said values as arguments.\n *\n * It is very important to remember that input function `func` is not called\n * when the output function is, but rather when the Observable returned by the output\n * function is subscribed. This means if `func` makes an AJAX request, that request\n * will be made every time someone subscribes to the resulting Observable, but not before.\n *\n * The last optional parameter - {@link Scheduler} - can be used to control when the call\n * to `func` happens after someone subscribes to Observable, as well as when results\n * passed to callback will be emitted. By default, the subscription to  an Observable calls `func`\n * synchronously, but using `Scheduler.async` as the last parameter will defer the call to `func`,\n * just like wrapping the call in `setTimeout` with a timeout of `0` would. If you use the async Scheduler\n * and call `subscribe` on the output Observable all function calls that are currently executing\n * will end before `func` is invoked.\n *\n * By default results passed to the callback are emitted immediately after `func` invokes the callback.\n * In particular, if the callback is called synchronously the subscription of the resulting Observable\n * will call the `next` function synchronously as well.  If you want to defer that call,\n * you may use `Scheduler.async` just as before.  This means that by using `Scheduler.async` you can\n * ensure that `func` always calls its callback asynchronously, thus avoiding terrifying Zalgo.\n *\n * Note that the Observable created by the output function will always emit a single value\n * and then complete immediately. If `func` calls the callback multiple times, values from subsequent\n * calls will not appear in the stream. If you need to listen for multiple calls,\n *  you probably want to use {@link fromEvent} or {@link fromEventPattern} instead.\n *\n * If `func` depends on some context (`this` property) and is not already bound the context of `func`\n * will be the context that the output function has at call time. In particular, if `func`\n * is called as a method of some objec and if `func` is not already bound, in order to preserve the context\n * it is recommended that the context of the output function is set to that object as well.\n *\n * If the input function calls its callback in the \"node style\" (i.e. first argument to callback is\n * optional error parameter signaling whether the call failed or not), {@link bindNodeCallback}\n * provides convenient error handling and probably is a better choice.\n * `bindCallback` will treat such functions the same as any other and error parameters\n * (whether passed or not) will always be interpreted as regular callback argument.\n *\n *\n * @example <caption>Convert jQuery's getJSON to an Observable API</caption>\n * // Suppose we have jQuery.getJSON('/my/url', callback)\n * var getJSONAsObservable = bindCallback(jQuery.getJSON);\n * var result = getJSONAsObservable('/my/url');\n * result.subscribe(x => console.log(x), e => console.error(e));\n *\n *\n * @example <caption>Receive an array of arguments passed to a callback</caption>\n * someFunction((a, b, c) => {\n *   console.log(a); // 5\n *   console.log(b); // 'some string'\n *   console.log(c); // {someProperty: 'someValue'}\n * });\n *\n * const boundSomeFunction = bindCallback(someFunction);\n * boundSomeFunction().subscribe(values => {\n *   console.log(values) // [5, 'some string', {someProperty: 'someValue'}]\n * });\n *\n *\n * @example <caption>Compare behaviour with and without async Scheduler</caption>\n * function iCallMyCallbackSynchronously(cb) {\n *   cb();\n * }\n *\n * const boundSyncFn = bindCallback(iCallMyCallbackSynchronously);\n * const boundAsyncFn = bindCallback(iCallMyCallbackSynchronously, null, Rx.Scheduler.async);\n *\n * boundSyncFn().subscribe(() => console.log('I was sync!'));\n * boundAsyncFn().subscribe(() => console.log('I was async!'));\n * console.log('This happened...');\n *\n * // Logs:\n * // I was sync!\n * // This happened...\n * // I was async!\n *\n *\n * @example <caption>Use bindCallback on an object method</caption>\n * const boundMethod = bindCallback(someObject.methodWithCallback);\n * boundMethod.call(someObject) // make sure methodWithCallback has access to someObject\n * .subscribe(subscriber);\n *\n *\n * @see {@link bindNodeCallback}\n * @see {@link from}\n * @see {@link fromPromise}\n *\n * @param {function} func A function with a callback as the last parameter.\n * @param {Scheduler} [scheduler] The scheduler on which to schedule the\n * callbacks.\n * @return {function(...params: *): Observable} A function which returns the\n * Observable that delivers the same values the callback would deliver.\n * @name bindCallback\n */\n\nvar __read$2 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$2 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$2(arguments[i]));\n    return ar;\n};\n/**\n * Converts a Node.js-style callback API to a function that returns an\n * Observable.\n *\n * <span class=\"informal\">It's just like {@link bindCallback}, but the\n * callback is expected to be of type `callback(error, result)`.</span>\n *\n * `bindNodeCallback` is not an operator because its input and output are not\n * Observables. The input is a function `func` with some parameters, but the\n * last parameter must be a callback function that `func` calls when it is\n * done. The callback function is expected to follow Node.js conventions,\n * where the first argument to the callback is an error object, signaling\n * whether call was successful. If that object is passed to callback, it means\n * something went wrong.\n *\n * The output of `bindNodeCallback` is a function that takes the same\n * parameters as `func`, except the last one (the callback). When the output\n * function is called with arguments, it will return an Observable.\n * If `func` calls its callback with error parameter present, Observable will\n * error with that value as well. If error parameter is not passed, Observable will emit\n * second parameter. If there are more parameters (third and so on),\n * Observable will emit an array with all arguments, except first error argument.\n *\n * Note that `func` will not be called at the same time output function is,\n * but rather whenever resulting Observable is subscribed. By default call to\n * `func` will happen synchronously after subscription, but that can be changed\n * with proper {@link Scheduler} provided as optional third parameter. Scheduler\n * can also control when values from callback will be emitted by Observable.\n * To find out more, check out documentation for {@link bindCallback}, where\n * Scheduler works exactly the same.\n *\n * As in {@link bindCallback}, context (`this` property) of input function will be set to context\n * of returned function, when it is called.\n *\n * After Observable emits value, it will complete immediately. This means\n * even if `func` calls callback again, values from second and consecutive\n * calls will never appear on the stream. If you need to handle functions\n * that call callbacks multiple times, check out {@link fromEvent} or\n * {@link fromEventPattern} instead.\n *\n * Note that `bindNodeCallback` can be used in non-Node.js environments as well.\n * \"Node.js-style\" callbacks are just a convention, so if you write for\n * browsers or any other environment and API you use implements that callback style,\n * `bindNodeCallback` can be safely used on that API functions as well.\n *\n * Remember that Error object passed to callback does not have to be an instance\n * of JavaScript built-in `Error` object. In fact, it does not even have to an object.\n * Error parameter of callback function is interpreted as \"present\", when value\n * of that parameter is truthy. It could be, for example, non-zero number, non-empty\n * string or boolean `true`. In all of these cases resulting Observable would error\n * with that value. This means usually regular style callbacks will fail very often when\n * `bindNodeCallback` is used. If your Observable errors much more often then you\n * would expect, check if callback really is called in Node.js-style and, if not,\n * switch to {@link bindCallback} instead.\n *\n * Note that even if error parameter is technically present in callback, but its value\n * is falsy, it still won't appear in array emitted by Observable.\n *\n *\n * @example <caption>Read a file from the filesystem and get the data as an Observable</caption>\n * import * as fs from 'fs';\n * var readFileAsObservable = bindNodeCallback(fs.readFile);\n * var result = readFileAsObservable('./roadNames.txt', 'utf8');\n * result.subscribe(x => console.log(x), e => console.error(e));\n *\n *\n * @example <caption>Use on function calling callback with multiple arguments</caption>\n * someFunction((err, a, b) => {\n *   console.log(err); // null\n *   console.log(a); // 5\n *   console.log(b); // \"some string\"\n * });\n * var boundSomeFunction = bindNodeCallback(someFunction);\n * boundSomeFunction()\n * .subscribe(value => {\n *   console.log(value); // [5, \"some string\"]\n * });\n *\n * @example <caption>Use on function calling callback in regular style</caption>\n * someFunction(a => {\n *   console.log(a); // 5\n * });\n * var boundSomeFunction = bindNodeCallback(someFunction);\n * boundSomeFunction()\n * .subscribe(\n *   value => {}             // never gets called\n *   err => console.log(err) // 5\n * );\n *\n *\n * @see {@link bindCallback}\n * @see {@link from}\n * @see {@link fromPromise}\n *\n * @param {function} func Function with a Node.js-style callback as the last parameter.\n * @param {Scheduler} [scheduler] The scheduler on which to schedule the\n * callbacks.\n * @return {function(...params: *): Observable} A function which returns the\n * Observable that delivers the same values the Node.js callback would\n * deliver.\n * @name bindNodeCallback\n */\n\nvar __extends$28 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar OuterSubscriber = /** @class */ (function (_super) {\n    __extends$28(OuterSubscriber, _super);\n    function OuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    OuterSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.destination.error(error);\n    };\n    OuterSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.destination.complete();\n    };\n    return OuterSubscriber;\n}(Subscriber));\n\nvar __extends$29 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar InnerSubscriber = /** @class */ (function (_super) {\n    __extends$29(InnerSubscriber, _super);\n    function InnerSubscriber(parent, outerValue, outerIndex) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.outerValue = outerValue;\n        _this.outerIndex = outerIndex;\n        _this.index = 0;\n        return _this;\n    }\n    InnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n    };\n    InnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error, this);\n        this.unsubscribe();\n    };\n    InnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return InnerSubscriber;\n}(Subscriber));\n\nvar subscribeToPromise = function (promise) { return function (subscriber) {\n    promise.then(function (value) {\n        if (!subscriber.closed) {\n            subscriber.next(value);\n            subscriber.complete();\n        }\n    }, function (err) { return subscriber.error(err); })\n        .then(null, hostReportError);\n    return subscriber;\n}; };\n\nfunction getSymbolIterator$1() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nvar iterator = getSymbolIterator$1();\n/**\n * @deprecated use {@link iterator} instead\n */\n\nvar subscribeToIterable = function (iterable) { return function (subscriber) {\n    var iterator$$1 = iterable[iterator]();\n    do {\n        var item = iterator$$1.next();\n        if (item.done) {\n            subscriber.complete();\n            break;\n        }\n        subscriber.next(item.value);\n        if (subscriber.closed) {\n            break;\n        }\n    } while (true);\n    // Finalize the iterator if it happens to be a Generator\n    if (typeof iterator$$1.return === 'function') {\n        subscriber.add(function () {\n            if (iterator$$1.return) {\n                iterator$$1.return();\n            }\n        });\n    }\n    return subscriber;\n}; };\n\n/**\n * Subscribes to an object that implements Symbol.observable with the given\n * Subscriber.\n * @param obj An object that implements Symbol.observable\n */\nvar subscribeToObservable = function (obj) { return function (subscriber) {\n    var obs = obj[observable]();\n    if (typeof obs.subscribe !== 'function') {\n        // Should be caught by observable subscribe function error handling.\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    }\n    else {\n        return obs.subscribe(subscriber);\n    }\n}; };\n\nvar isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n\nfunction isPromise$1(value) {\n    return value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}\n\nvar subscribeTo = function (result) {\n    if (result instanceof Observable) {\n        return function (subscriber) {\n            if (result._isScalar) {\n                subscriber.next(result.value);\n                subscriber.complete();\n                return undefined;\n            }\n            else {\n                return result.subscribe(subscriber);\n            }\n        };\n    }\n    else if (isArrayLike(result)) {\n        return subscribeToArray(result);\n    }\n    else if (isPromise$1(result)) {\n        return subscribeToPromise(result);\n    }\n    else if (result && typeof result[iterator] === 'function') {\n        return subscribeToIterable(result);\n    }\n    else if (result && typeof result[observable] === 'function') {\n        return subscribeToObservable(result);\n    }\n    else {\n        var value = isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n        var msg = \"You provided \" + value + \" where a stream was expected.\"\n            + ' You can provide an Observable, Promise, Array, or Iterable.';\n        throw new TypeError(msg);\n    }\n};\n\nfunction subscribeToResult(outerSubscriber, result, outerValue, outerIndex) {\n    var destination = new InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n    return subscribeTo(result)(destination);\n}\n\nvar __extends$27 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar NONE = {};\n/* tslint:enable:max-line-length */\n/**\n * Combines multiple Observables to create an Observable whose values are\n * calculated from the latest values of each of its input Observables.\n *\n * <span class=\"informal\">Whenever any input Observable emits a value, it\n * computes a formula using the latest values from all the inputs, then emits\n * the output of that formula.</span>\n *\n * <img src=\"./img/combineLatest.png\" width=\"100%\">\n *\n * `combineLatest` combines the values from all the Observables passed as\n * arguments. This is done by subscribing to each Observable in order and,\n * whenever any Observable emits, collecting an array of the most recent\n * values from each Observable. So if you pass `n` Observables to operator,\n * returned Observable will always emit an array of `n` values, in order\n * corresponding to order of passed Observables (value from the first Observable\n * on the first place and so on).\n *\n * Static version of `combineLatest` accepts either an array of Observables\n * or each Observable can be put directly as an argument. Note that array of\n * Observables is good choice, if you don't know beforehand how many Observables\n * you will combine. Passing empty array will result in Observable that\n * completes immediately.\n *\n * To ensure output array has always the same length, `combineLatest` will\n * actually wait for all input Observables to emit at least once,\n * before it starts emitting results. This means if some Observable emits\n * values before other Observables started emitting, all that values but last\n * will be lost. On the other hand, is some Observable does not emit value but\n * completes, resulting Observable will complete at the same moment without\n * emitting anything, since it will be now impossible to include value from\n * completed Observable in resulting array. Also, if some input Observable does\n * not emit any value and never completes, `combineLatest` will also never emit\n * and never complete, since, again, it will wait for all streams to emit some\n * value.\n *\n * If at least one Observable was passed to `combineLatest` and all passed Observables\n * emitted something, resulting Observable will complete when all combined\n * streams complete. So even if some Observable completes, result of\n * `combineLatest` will still emit values when other Observables do. In case\n * of completed Observable, its value from now on will always be the last\n * emitted value. On the other hand, if any Observable errors, `combineLatest`\n * will error immediately as well, and all other Observables will be unsubscribed.\n *\n * `combineLatest` accepts as optional parameter `project` function, which takes\n * as arguments all values that would normally be emitted by resulting Observable.\n * `project` can return any kind of value, which will be then emitted by Observable\n * instead of default array. Note that `project` does not take as argument that array\n * of values, but values themselves. That means default `project` can be imagined\n * as function that takes all its arguments and puts them into an array.\n *\n *\n * @example <caption>Combine two timer Observables</caption>\n * const firstTimer = Rx.Observable.timer(0, 1000); // emit 0, 1, 2... after every second, starting from now\n * const secondTimer = Rx.Observable.timer(500, 1000); // emit 0, 1, 2... after every second, starting 0,5s from now\n * const combinedTimers = Rx.Observable.combineLatest(firstTimer, secondTimer);\n * combinedTimers.subscribe(value => console.log(value));\n * // Logs\n * // [0, 0] after 0.5s\n * // [1, 0] after 1s\n * // [1, 1] after 1.5s\n * // [2, 1] after 2s\n *\n *\n * @example <caption>Combine an array of Observables</caption>\n * const observables = [1, 5, 10].map(\n *   n => Rx.Observable.of(n).delay(n * 1000).startWith(0) // emit 0 and then emit n after n seconds\n * );\n * const combined = Rx.Observable.combineLatest(observables);\n * combined.subscribe(value => console.log(value));\n * // Logs\n * // [0, 0, 0] immediately\n * // [1, 0, 0] after 1s\n * // [1, 5, 0] after 5s\n * // [1, 5, 10] after 10s\n *\n *\n * @example <caption>Use project function to dynamically calculate the Body-Mass Index</caption>\n * var weight = Rx.Observable.of(70, 72, 76, 79, 75);\n * var height = Rx.Observable.of(1.76, 1.77, 1.78);\n * var bmi = Rx.Observable.combineLatest(weight, height, (w, h) => w / (h * h));\n * bmi.subscribe(x => console.log('BMI is ' + x));\n *\n * // With output to console:\n * // BMI is 24.212293388429753\n * // BMI is 23.93948099205209\n * // BMI is 23.671253629592222\n *\n *\n * @see {@link combineAll}\n * @see {@link merge}\n * @see {@link withLatestFrom}\n *\n * @param {ObservableInput} observable1 An input Observable to combine with other Observables.\n * @param {ObservableInput} observable2 An input Observable to combine with other Observables.\n * More than one input Observables may be given as arguments\n * or an array of Observables may be given as the first argument.\n * @param {function} [project] An optional function to project the values from\n * the combined latest values into a new value on the output Observable.\n * @param {Scheduler} [scheduler=null] The IScheduler to use for subscribing to\n * each input Observable.\n * @return {Observable} An Observable of projected values from the most recent\n * values from each input Observable, or an array of the most recent values from\n * each input Observable.\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar CombineLatestSubscriber = /** @class */ (function (_super) {\n    __extends$27(CombineLatestSubscriber, _super);\n    function CombineLatestSubscriber(destination, resultSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.resultSelector = resultSelector;\n        _this.active = 0;\n        _this.values = [];\n        _this.observables = [];\n        return _this;\n    }\n    CombineLatestSubscriber.prototype._next = function (observable) {\n        this.values.push(NONE);\n        this.observables.push(observable);\n    };\n    CombineLatestSubscriber.prototype._complete = function () {\n        var observables = this.observables;\n        var len = observables.length;\n        if (len === 0) {\n            this.destination.complete();\n        }\n        else {\n            this.active = len;\n            this.toRespond = len;\n            for (var i = 0; i < len; i++) {\n                var observable = observables[i];\n                this.add(subscribeToResult(this, observable, observable, i));\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyComplete = function (unused) {\n        if ((this.active -= 1) === 0) {\n            this.destination.complete();\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var values = this.values;\n        var oldVal = values[outerIndex];\n        var toRespond = !this.toRespond\n            ? 0\n            : oldVal === NONE ? --this.toRespond : this.toRespond;\n        values[outerIndex] = innerValue;\n        if (toRespond === 0) {\n            if (this.resultSelector) {\n                this._tryResultSelector(values);\n            }\n            else {\n                this.destination.next(values.slice());\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype._tryResultSelector = function (values) {\n        var result;\n        try {\n            result = this.resultSelector.apply(this, values);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return CombineLatestSubscriber;\n}(OuterSubscriber));\n\n/** Identifies an input as being Observable (but not necessary an Rx Observable) */\nfunction isObservable(input) {\n    return input && typeof input[observable] === 'function';\n}\n\n/** Identifies an input as being an Iterable */\nfunction isIterable(input) {\n    return input && typeof input[iterator] === 'function';\n}\n\nfunction fromPromise(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToPromise(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            sub.add(scheduler.schedule(function () { return input.then(function (value) {\n                sub.add(scheduler.schedule(function () {\n                    subscriber.next(value);\n                    sub.add(scheduler.schedule(function () { return subscriber.complete(); }));\n                }));\n            }, function (err) {\n                sub.add(scheduler.schedule(function () { return subscriber.error(err); }));\n            }); }));\n            return sub;\n        });\n    }\n}\n\nfunction fromIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    if (!scheduler) {\n        return new Observable(subscribeToIterable(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            var iterator$$1;\n            sub.add(function () {\n                // Finalize generators\n                if (iterator$$1 && typeof iterator$$1.return === 'function') {\n                    iterator$$1.return();\n                }\n            });\n            sub.add(scheduler.schedule(function () {\n                iterator$$1 = input[iterator]();\n                sub.add(scheduler.schedule(function () {\n                    if (subscriber.closed) {\n                        return;\n                    }\n                    var value;\n                    var done;\n                    try {\n                        var result = iterator$$1.next();\n                        value = result.value;\n                        done = result.done;\n                    }\n                    catch (err) {\n                        subscriber.error(err);\n                        return;\n                    }\n                    if (done) {\n                        subscriber.complete();\n                    }\n                    else {\n                        subscriber.next(value);\n                        this.schedule();\n                    }\n                }));\n            }));\n            return sub;\n        });\n    }\n}\n\nfunction fromObservable(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToObservable(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            sub.add(scheduler.schedule(function () {\n                var observable$$1 = input[observable]();\n                sub.add(observable$$1.subscribe({\n                    next: function (value) { sub.add(scheduler.schedule(function () { return subscriber.next(value); })); },\n                    error: function (err) { sub.add(scheduler.schedule(function () { return subscriber.error(err); })); },\n                    complete: function () { sub.add(scheduler.schedule(function () { return subscriber.complete(); })); },\n                }));\n            }));\n            return sub;\n        });\n    }\n}\n\nfunction from(input, scheduler) {\n    if (!scheduler) {\n        if (input instanceof Observable) {\n            return input;\n        }\n        return new Observable(subscribeTo(input));\n    }\n    if (input != null) {\n        if (isObservable(input)) {\n            return fromObservable(input, scheduler);\n        }\n        else if (isPromise$1(input)) {\n            return fromPromise(input, scheduler);\n        }\n        else if (isArrayLike(input)) {\n            return fromArray(input, scheduler);\n        }\n        else if (isIterable(input) || typeof input === 'string') {\n            return fromIterable(input, scheduler);\n        }\n    }\n    throw new TypeError((input !== null && typeof input || input) + ' is not observable');\n}\n\nvar __extends$30 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link mergeAll}.</span>\n *\n * <img src=\"./img/mergeMap.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an Observable, and then merging those resulting Observables and\n * emitting the results of this merger.\n *\n * @example <caption>Map and flatten each letter to an Observable ticking every 1 second</caption>\n * var letters = Rx.Observable.of('a', 'b', 'c');\n * var result = letters.mergeMap(x =>\n *   Rx.Observable.interval(1000).map(i => x+i)\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // a0\n * // b0\n * // c0\n * // a1\n * // b1\n * // c1\n * // continues to list a,b,c with respective ascending integers\n *\n * @see {@link concatMap}\n * @see {@link exhaustMap}\n * @see {@link merge}\n * @see {@link mergeAll}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n * @see {@link switchMap}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @return {Observable} An Observable that emits the result of applying the\n * projection function (and the optional `resultSelector`) to each item emitted\n * by the source Observable and merging the results of the Observables obtained\n * from this transformation.\n * @method mergeMap\n * @owner Observable\n */\nfunction mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }\n    if (typeof resultSelector === 'function') {\n        // DEPRECATED PATH\n        return function (source) { return source.pipe(mergeMap(function (a, i) { return from(project(a, i)).pipe(map(function (b, ii) { return resultSelector(a, b, i, ii); })); }, concurrent)); };\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return function (source) { return source.lift(new MergeMapOperator(project, concurrent)); };\n}\nvar MergeMapOperator = /** @class */ (function () {\n    function MergeMapOperator(project, concurrent) {\n        if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }\n        this.project = project;\n        this.concurrent = concurrent;\n    }\n    MergeMapOperator.prototype.call = function (observer, source) {\n        return source.subscribe(new MergeMapSubscriber(observer, this.project, this.concurrent));\n    };\n    return MergeMapOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MergeMapSubscriber = /** @class */ (function (_super) {\n    __extends$30(MergeMapSubscriber, _super);\n    function MergeMapSubscriber(destination, project, concurrent) {\n        if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.concurrent = concurrent;\n        _this.hasCompleted = false;\n        _this.buffer = [];\n        _this.active = 0;\n        _this.index = 0;\n        return _this;\n    }\n    MergeMapSubscriber.prototype._next = function (value) {\n        if (this.active < this.concurrent) {\n            this._tryNext(value);\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    MergeMapSubscriber.prototype._tryNext = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.active++;\n        this._innerSub(result, value, index);\n    };\n    MergeMapSubscriber.prototype._innerSub = function (ish, value, index) {\n        this.add(subscribeToResult(this, ish, value, index));\n    };\n    MergeMapSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            this.destination.complete();\n        }\n    };\n    MergeMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    MergeMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return MergeMapSubscriber;\n}(OuterSubscriber));\n\n/**\n * Converts a higher-order Observable into a first-order Observable which\n * concurrently delivers all values that are emitted on the inner Observables.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables.</span>\n *\n * <img src=\"./img/mergeAll.png\" width=\"100%\">\n *\n * `mergeAll` subscribes to an Observable that emits Observables, also known as\n * a higher-order Observable. Each time it observes one of these emitted inner\n * Observables, it subscribes to that and delivers all the values from the\n * inner Observable on the output Observable. The output Observable only\n * completes once all inner Observables have completed. Any error delivered by\n * a inner Observable will be immediately emitted on the output Observable.\n *\n * @example <caption>Spawn a new interval Observable for each click event, and blend their outputs as one Observable</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var higherOrder = clicks.map((ev) => Rx.Observable.interval(1000));\n * var firstOrder = higherOrder.mergeAll();\n * firstOrder.subscribe(x => console.log(x));\n *\n * @example <caption>Count from 0 to 9 every second for each click, but only allow 2 concurrent timers</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var higherOrder = clicks.map((ev) => Rx.Observable.interval(1000).take(10));\n * var firstOrder = higherOrder.mergeAll(2);\n * firstOrder.subscribe(x => console.log(x));\n *\n * @see {@link combineAll}\n * @see {@link concatAll}\n * @see {@link exhaust}\n * @see {@link merge}\n * @see {@link mergeMap}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n * @see {@link switch}\n * @see {@link zipAll}\n *\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of inner\n * Observables being subscribed to concurrently.\n * @return {Observable} An Observable that emits values coming from all the\n * inner Observables emitted by the source Observable.\n * @method mergeAll\n * @owner Observable\n */\nfunction mergeAll(concurrent) {\n    if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }\n    return mergeMap(identity, concurrent);\n}\n\n/**\n * Converts a higher-order Observable into a first-order Observable by\n * concatenating the inner Observables in order.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables by putting one\n * inner Observable after the other.</span>\n *\n * <img src=\"./img/concatAll.png\" width=\"100%\">\n *\n * Joins every Observable emitted by the source (a higher-order Observable), in\n * a serial fashion. It subscribes to each inner Observable only after the\n * previous inner Observable has completed, and merges all of their values into\n * the returned observable.\n *\n * __Warning:__ If the source Observable emits Observables quickly and\n * endlessly, and the inner Observables it emits generally complete slower than\n * the source emits, you can run into memory issues as the incoming Observables\n * collect in an unbounded buffer.\n *\n * Note: `concatAll` is equivalent to `mergeAll` with concurrency parameter set\n * to `1`.\n *\n * @example <caption>For each click event, tick every second from 0 to 3, with no concurrency</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var higherOrder = clicks.map(ev => Rx.Observable.interval(1000).take(4));\n * var firstOrder = higherOrder.concatAll();\n * firstOrder.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n *\n * @see {@link combineAll}\n * @see {@link concat}\n * @see {@link concatMap}\n * @see {@link concatMapTo}\n * @see {@link exhaust}\n * @see {@link mergeAll}\n * @see {@link switch}\n * @see {@link zipAll}\n *\n * @return {Observable} An Observable emitting values from all the inner\n * Observables concatenated.\n * @method concatAll\n * @owner Observable\n */\n\nvar __read$3 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$3 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$3(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Creates an output Observable which sequentially emits all values from given\n * Observable and then moves on to the next.\n *\n * <span class=\"informal\">Concatenates multiple Observables together by\n * sequentially emitting their values, one Observable after the other.</span>\n *\n * <img src=\"./img/concat.png\" width=\"100%\">\n *\n * `concat` joins multiple Observables together, by subscribing to them one at a time and\n * merging their results into the output Observable. You can pass either an array of\n * Observables, or put them directly as arguments. Passing an empty array will result\n * in Observable that completes immediately.\n *\n * `concat` will subscribe to first input Observable and emit all its values, without\n * changing or affecting them in any way. When that Observable completes, it will\n * subscribe to then next Observable passed and, again, emit its values. This will be\n * repeated, until the operator runs out of Observables. When last input Observable completes,\n * `concat` will complete as well. At any given moment only one Observable passed to operator\n * emits values. If you would like to emit values from passed Observables concurrently, check out\n * {@link merge} instead, especially with optional `concurrent` parameter. As a matter of fact,\n * `concat` is an equivalent of `merge` operator with `concurrent` parameter set to `1`.\n *\n * Note that if some input Observable never completes, `concat` will also never complete\n * and Observables following the one that did not complete will never be subscribed. On the other\n * hand, if some Observable simply completes immediately after it is subscribed, it will be\n * invisible for `concat`, which will just move on to the next Observable.\n *\n * If any Observable in chain errors, instead of passing control to the next Observable,\n * `concat` will error immediately as well. Observables that would be subscribed after\n * the one that emitted error, never will.\n *\n * If you pass to `concat` the same Observable many times, its stream of values\n * will be \"replayed\" on every subscription, which means you can repeat given Observable\n * as many times as you like. If passing the same Observable to `concat` 1000 times becomes tedious,\n * you can always use {@link repeat}.\n *\n * @example <caption>Concatenate a timer counting from 0 to 3 with a synchronous sequence from 1 to 10</caption>\n * var timer = Rx.Observable.interval(1000).take(4);\n * var sequence = Rx.Observable.range(1, 10);\n * var result = Rx.Observable.concat(timer, sequence);\n * result.subscribe(x => console.log(x));\n *\n * // results in:\n * // 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3 -immediate-> 1 ... 10\n *\n *\n * @example <caption>Concatenate an array of 3 Observables</caption>\n * var timer1 = Rx.Observable.interval(1000).take(10);\n * var timer2 = Rx.Observable.interval(2000).take(6);\n * var timer3 = Rx.Observable.interval(500).take(10);\n * var result = Rx.Observable.concat([timer1, timer2, timer3]); // note that array is passed\n * result.subscribe(x => console.log(x));\n *\n * // results in the following:\n * // (Prints to console sequentially)\n * // -1000ms-> 0 -1000ms-> 1 -1000ms-> ... 9\n * // -2000ms-> 0 -2000ms-> 1 -2000ms-> ... 5\n * // -500ms-> 0 -500ms-> 1 -500ms-> ... 9\n *\n *\n * @example <caption>Concatenate the same Observable to repeat it</caption>\n * const timer = Rx.Observable.interval(1000).take(2);\n *\n * Rx.Observable.concat(timer, timer) // concating the same Observable!\n * .subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('...and it is done!')\n * );\n *\n * // Logs:\n * // 0 after 1s\n * // 1 after 2s\n * // 0 after 3s\n * // 1 after 4s\n * // \"...and it is done!\" also after 4s\n *\n * @see {@link concatAll}\n * @see {@link concatMap}\n * @see {@link concatMapTo}\n *\n * @param {ObservableInput} input1 An input Observable to concatenate with others.\n * @param {ObservableInput} input2 An input Observable to concatenate with others.\n * More than one input Observables may be given as argument.\n * @param {Scheduler} [scheduler=null] An optional IScheduler to schedule each\n * Observable subscription on.\n * @return {Observable} All values of each passed Observable merged into a\n * single Observable, in order, in serial fashion.\n * @static true\n * @name concat\n * @owner Observable\n */\n\n/**\n * Creates an Observable that, on subscribe, calls an Observable factory to\n * make an Observable for each new Observer.\n *\n * <span class=\"informal\">Creates the Observable lazily, that is, only when it\n * is subscribed.\n * </span>\n *\n * <img src=\"./img/defer.png\" width=\"100%\">\n *\n * `defer` allows you to create the Observable only when the Observer\n * subscribes, and create a fresh Observable for each Observer. It waits until\n * an Observer subscribes to it, and then it generates an Observable,\n * typically with an Observable factory function. It does this afresh for each\n * subscriber, so although each subscriber may think it is subscribing to the\n * same Observable, in fact each subscriber gets its own individual\n * Observable.\n *\n * @example <caption>Subscribe to either an Observable of clicks or an Observable of interval, at random</caption>\n * var clicksOrInterval = Rx.Observable.defer(function () {\n *   if (Math.random() > 0.5) {\n *     return Rx.Observable.fromEvent(document, 'click');\n *   } else {\n *     return Rx.Observable.interval(1000);\n *   }\n * });\n * clicksOrInterval.subscribe(x => console.log(x));\n *\n * // Results in the following behavior:\n * // If the result of Math.random() is greater than 0.5 it will listen\n * // for clicks anywhere on the \"document\"; when document is clicked it\n * // will log a MouseEvent object to the console. If the result is less\n * // than 0.5 it will emit ascending numbers, one every second(1000ms).\n *\n * @see {@link create}\n *\n * @param {function(): SubscribableOrPromise} observableFactory The Observable\n * factory function to invoke for each Observer that subscribes to the output\n * Observable. May also return a Promise, which will be converted on the fly\n * to an Observable.\n * @return {Observable} An Observable whose Observers' subscriptions trigger\n * an invocation of the given Observable factory function.\n * @static true\n * @name defer\n * @owner Observable\n */\n\nvar __extends$31 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read$4 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$4 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$4(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Joins last values emitted by passed Observables.\n *\n * <span class=\"informal\">Wait for Observables to complete and then combine last values they emitted.</span>\n *\n * <img src=\"./img/forkJoin.png\" width=\"100%\">\n *\n * `forkJoin` is an operator that takes any number of Observables which can be passed either as an array\n * or directly as arguments. If no input Observables are provided, resulting stream will complete\n * immediately.\n *\n * `forkJoin` will wait for all passed Observables to complete and then it will emit an array with last\n * values from corresponding Observables. So if you pass `n` Observables to the operator, resulting\n * array will have `n` values, where first value is the last thing emitted by the first Observable,\n * second value is the last thing emitted by the second Observable and so on. That means `forkJoin` will\n * not emit more than once and it will complete after that. If you need to emit combined values not only\n * at the end of lifecycle of passed Observables, but also throughout it, try out {@link combineLatest}\n * or {@link zip} instead.\n *\n * In order for resulting array to have the same length as the number of input Observables, whenever any of\n * that Observables completes without emitting any value, `forkJoin` will complete at that moment as well\n * and it will not emit anything either, even if it already has some last values from other Observables.\n * Conversely, if there is an Observable that never completes, `forkJoin` will never complete as well,\n * unless at any point some other Observable completes without emitting value, which brings us back to\n * the previous case. Overall, in order for `forkJoin` to emit a value, all Observables passed as arguments\n * have to emit something at least once and complete.\n *\n * If any input Observable errors at some point, `forkJoin` will error as well and all other Observables\n * will be immediately unsubscribed.\n *\n * Optionally `forkJoin` accepts project function, that will be called with values which normally\n * would land in emitted array. Whatever is returned by project function, will appear in output\n * Observable instead. This means that default project can be thought of as a function that takes\n * all its arguments and puts them into an array. Note that project function will be called only\n * when output Observable is supposed to emit a result.\n *\n * @example <caption>Use forkJoin with operator emitting immediately</caption>\n * import { forkJoin, of } from 'rxjs';\n *\n * const observable = forkJoin(\n *   of(1, 2, 3, 4),\n *   of(5, 6, 7, 8)\n * );\n * observable.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('This is how it ends!')\n * );\n *\n * // Logs:\n * // [4, 8]\n * // \"This is how it ends!\"\n *\n *\n * @example <caption>Use forkJoin with operator emitting after some time</caption>\n * import { forkJoin, interval } from 'rxjs';\n * import { take } from 'rxjs/operators';\n *\n * const observable = forkJoin(\n *   interval(1000).pipe(take(3)), // emit 0, 1, 2 every second and complete\n *   interval(500).pipe(take(4)) // emit 0, 1, 2, 3 every half a second and complete\n * );\n * observable.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('This is how it ends!')\n * );\n *\n * // Logs:\n * // [2, 3] after 3 seconds\n * // \"This is how it ends!\" immediately after\n *\n *\n * @example <caption>Use forkJoin with project function</caption>\n * import { jorkJoin, interval } from 'rxjs';\n * import { take } from 'rxjs/operators';\n *\n * const observable = forkJoin(\n *   interval(1000).pipe(take(3)), // emit 0, 1, 2 every second and complete\n *   interval(500).pipe(take(4)), // emit 0, 1, 2, 3 every half a second and complete\n *   (n, m) => n + m\n * );\n * observable.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('This is how it ends!')\n * );\n *\n * // Logs:\n * // 5 after 3 seconds\n * // \"This is how it ends!\" immediately after\n *\n * @see {@link combineLatest}\n * @see {@link zip}\n *\n * @param {...ObservableInput} sources Any number of Observables provided either as an array or as an arguments\n * passed directly to the operator.\n * @param {function} [project] Function that takes values emitted by input Observables and returns value\n * that will appear in resulting Observable instead of default array.\n * @return {Observable} Observable emitting either an array of last values emitted by passed Observables\n * or value from project function.\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ForkJoinSubscriber = /** @class */ (function (_super) {\n    __extends$31(ForkJoinSubscriber, _super);\n    function ForkJoinSubscriber(destination, sources) {\n        var _this = _super.call(this, destination) || this;\n        _this.sources = sources;\n        _this.completed = 0;\n        _this.haveValues = 0;\n        var len = sources.length;\n        _this.values = new Array(len);\n        for (var i = 0; i < len; i++) {\n            var source = sources[i];\n            var innerSubscription = subscribeToResult(_this, source, null, i);\n            if (innerSubscription) {\n                _this.add(innerSubscription);\n            }\n        }\n        return _this;\n    }\n    ForkJoinSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.values[outerIndex] = innerValue;\n        if (!innerSub._hasValue) {\n            innerSub._hasValue = true;\n            this.haveValues++;\n        }\n    };\n    ForkJoinSubscriber.prototype.notifyComplete = function (innerSub) {\n        var _a = this, destination = _a.destination, haveValues = _a.haveValues, values = _a.values;\n        var len = values.length;\n        if (!innerSub._hasValue) {\n            destination.complete();\n            return;\n        }\n        this.completed++;\n        if (this.completed !== len) {\n            return;\n        }\n        if (haveValues === len) {\n            destination.next(values);\n        }\n        destination.complete();\n    };\n    return ForkJoinSubscriber;\n}(OuterSubscriber));\n\nvar __read$5 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$5 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$5(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Creates an Observable that emits events of a specific type coming from the\n * given event target.\n *\n * <span class=\"informal\">Creates an Observable from DOM events, or Node.js\n * EventEmitter events or others.</span>\n *\n * <img src=\"./img/fromEvent.png\" width=\"100%\">\n *\n * `fromEvent` accepts as a first argument event target, which is an object with methods\n * for registering event handler functions. As a second argument it takes string that indicates\n * type of event we want to listen for. `fromEvent` supports selected types of event targets,\n * which are described in detail below. If your event target does not match any of the ones listed,\n * you should use {@link fromEventPattern}, which can be used on arbitrary APIs.\n * When it comes to APIs supported by `fromEvent`, their methods for adding and removing event\n * handler functions have different names, but they all accept a string describing event type\n * and function itself, which will be called whenever said event happens.\n *\n * Every time resulting Observable is subscribed, event handler function will be registered\n * to event target on given event type. When that event fires, value\n * passed as a first argument to registered function will be emitted by output Observable.\n * When Observable is unsubscribed, function will be unregistered from event target.\n *\n * Note that if event target calls registered function with more than one argument, second\n * and following arguments will not appear in resulting stream. In order to get access to them,\n * you can pass to `fromEvent` optional project function, which will be called with all arguments\n * passed to event handler. Output Observable will then emit value returned by project function,\n * instead of the usual value.\n *\n * Remember that event targets listed below are checked via duck typing. It means that\n * no matter what kind of object you have and no matter what environment you work in,\n * you can safely use `fromEvent` on that object if it exposes described methods (provided\n * of course they behave as was described above). So for example if Node.js library exposes\n * event target which has the same method names as DOM EventTarget, `fromEvent` is still\n * a good choice.\n *\n * If the API you use is more callback then event handler oriented (subscribed\n * callback function fires only once and thus there is no need to manually\n * unregister it), you should use {@link bindCallback} or {@link bindNodeCallback}\n * instead.\n *\n * `fromEvent` supports following types of event targets:\n *\n * **DOM EventTarget**\n *\n * This is an object with `addEventListener` and `removeEventListener` methods.\n *\n * In the browser, `addEventListener` accepts - apart from event type string and event\n * handler function arguments - optional third parameter, which is either an object or boolean,\n * both used for additional configuration how and when passed function will be called. When\n * `fromEvent` is used with event target of that type, you can provide this values\n * as third parameter as well.\n *\n * **Node.js EventEmitter**\n *\n * An object with `addListener` and `removeListener` methods.\n *\n * **JQuery-style event target**\n *\n * An object with `on` and `off` methods\n *\n * **DOM NodeList**\n *\n * List of DOM Nodes, returned for example by `document.querySelectorAll` or `Node.childNodes`.\n *\n * Although this collection is not event target in itself, `fromEvent` will iterate over all Nodes\n * it contains and install event handler function in every of them. When returned Observable\n * is unsubscribed, function will be removed from all Nodes.\n *\n * **DOM HtmlCollection**\n *\n * Just as in case of NodeList it is a collection of DOM nodes. Here as well event handler function is\n * installed and removed in each of elements.\n *\n *\n * @example <caption>Emits clicks happening on the DOM document</caption>\n * var clicks = fromEvent(document, 'click');\n * clicks.subscribe(x => console.log(x));\n *\n * // Results in:\n * // MouseEvent object logged to console every time a click\n * // occurs on the document.\n *\n *\n * @example <caption>Use addEventListener with capture option</caption>\n * var clicksInDocument = fromEvent(document, 'click', true); // note optional configuration parameter\n *                                                                          // which will be passed to addEventListener\n * var clicksInDiv = fromEvent(someDivInDocument, 'click');\n *\n * clicksInDocument.subscribe(() => console.log('document'));\n * clicksInDiv.subscribe(() => console.log('div'));\n *\n * // By default events bubble UP in DOM tree, so normally\n * // when we would click on div in document\n * // \"div\" would be logged first and then \"document\".\n * // Since we specified optional `capture` option, document\n * // will catch event when it goes DOWN DOM tree, so console\n * // will log \"document\" and then \"div\".\n *\n * @see {@link bindCallback}\n * @see {@link bindNodeCallback}\n * @see {@link fromEventPattern}\n *\n * @param {FromEventTarget<T>} target The DOM EventTarget, Node.js\n * EventEmitter, JQuery-like event target, NodeList or HTMLCollection to attach the event handler to.\n * @param {string} eventName The event name of interest, being emitted by the\n * `target`.\n * @param {EventListenerOptions} [options] Options to pass through to addEventListener\n * @return {Observable<T>}\n * @name fromEvent\n */\n\nvar __read$6 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$6 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$6(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Creates an Observable from an API based on addHandler/removeHandler\n * functions.\n *\n * <span class=\"informal\">Converts any addHandler/removeHandler API to an\n * Observable.</span>\n *\n * <img src=\"./img/fromEventPattern.png\" width=\"100%\">\n *\n * Creates an Observable by using the `addHandler` and `removeHandler`\n * functions to add and remove the handlers. The `addHandler` is\n * called when the output Observable is subscribed, and `removeHandler` is\n * called when the Subscription is unsubscribed.\n *\n * @example <caption>Emits clicks happening on the DOM document</caption>\n * function addClickHandler(handler) {\n *   document.addEventListener('click', handler);\n * }\n *\n * function removeClickHandler(handler) {\n *   document.removeEventListener('click', handler);\n * }\n *\n * var clicks = fromEventPattern(\n *   addClickHandler,\n *   removeClickHandler\n * );\n * clicks.subscribe(x => console.log(x));\n *\n * @see {@link from}\n * @see {@link fromEvent}\n *\n * @param {function(handler: Function): any} addHandler A function that takes\n * a `handler` function as argument and attaches it somehow to the actual\n * source of events.\n * @param {function(handler: Function, signal?: any): void} [removeHandler] An optional function that\n * takes a `handler` function as argument and removes it in case it was\n * previously attached using `addHandler`. if addHandler returns signal to teardown when remove,\n * removeHandler function will forward it.\n * @return {Observable<T>}\n * @name fromEventPattern\n */\n\n/**\n * Decides at subscription time which Observable will actually be subscribed.\n *\n * <span class=\"informal\">`If` statement for Observables.</span>\n *\n * `if` accepts a condition function and two Observables. When\n * an Observable returned by the operator is subscribed, condition function will be called.\n * Based on what boolean it returns at that moment, consumer will subscribe either to\n * the first Observable (if condition was true) or to the second (if condition was false). Condition\n * function may also not return anything - in that case condition will be evaluated as false and\n * second Observable will be subscribed.\n *\n * Note that Observables for both cases (true and false) are optional. If condition points to an Observable that\n * was left undefined, resulting stream will simply complete immediately. That allows you to, rather\n * then controlling which Observable will be subscribed, decide at runtime if consumer should have access\n * to given Observable or not.\n *\n * If you have more complex logic that requires decision between more than two Observables, {@link defer}\n * will probably be a better choice. Actually `if` can be easily implemented with {@link defer}\n * and exists only for convenience and readability reasons.\n *\n *\n * @example <caption>Change at runtime which Observable will be subscribed</caption>\n * let subscribeToFirst;\n * const firstOrSecond = Rx.Observable.if(\n *   () => subscribeToFirst,\n *   Rx.Observable.of('first'),\n *   Rx.Observable.of('second')\n * );\n *\n * subscribeToFirst = true;\n * firstOrSecond.subscribe(value => console.log(value));\n *\n * // Logs:\n * // \"first\"\n *\n * subscribeToFirst = false;\n * firstOrSecond.subscribe(value => console.log(value));\n *\n * // Logs:\n * // \"second\"\n *\n *\n * @example <caption>Control an access to an Observable</caption>\n * let accessGranted;\n * const observableIfYouHaveAccess = Rx.Observable.if(\n *   () => accessGranted,\n *   Rx.Observable.of('It seems you have an access...') // Note that only one Observable is passed to the operator.\n * );\n *\n * accessGranted = true;\n * observableIfYouHaveAccess.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('The end')\n * );\n *\n * // Logs:\n * // \"It seems you have an access...\"\n * // \"The end\"\n *\n * accessGranted = false;\n * observableIfYouHaveAccess.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('The end')\n * );\n *\n * // Logs:\n * // \"The end\"\n *\n * @see {@link defer}\n *\n * @param {function(): boolean} condition Condition which Observable should be chosen.\n * @param {Observable} [trueObservable] An Observable that will be subscribed if condition is true.\n * @param {Observable} [falseObservable] An Observable that will be subscribed if condition is false.\n * @return {Observable} Either first or second Observable, depending on condition.\n * @static true\n * @name iif\n * @owner Observable\n */\n\nfunction isNumeric(val) {\n    // parseFloat NaNs numeric-cast false positives (null|true|false|\"\")\n    // ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n    // subtraction forces infinities to NaN\n    // adding 1 corrects loss of precision from parseFloat (#15100)\n    return !isArray(val) && (val - parseFloat(val) + 1) >= 0;\n}\n\n/**\n * Creates an Observable that emits sequential numbers every specified\n * interval of time, on a specified IScheduler.\n *\n * <span class=\"informal\">Emits incremental numbers periodically in time.\n * </span>\n *\n * <img src=\"./img/interval.png\" width=\"100%\">\n *\n * `interval` returns an Observable that emits an infinite sequence of\n * ascending integers, with a constant interval of time of your choosing\n * between those emissions. The first emission is not sent immediately, but\n * only after the first period has passed. By default, this operator uses the\n * `async` IScheduler to provide a notion of time, but you may pass any\n * IScheduler to it.\n *\n * @example <caption>Emits ascending numbers, one every second (1000ms)</caption>\n * var numbers = Rx.Observable.interval(1000);\n * numbers.subscribe(x => console.log(x));\n *\n * @see {@link timer}\n * @see {@link delay}\n *\n * @param {number} [period=0] The interval size in milliseconds (by default)\n * or the time unit determined by the scheduler's clock.\n * @param {Scheduler} [scheduler=async] The IScheduler to use for scheduling\n * the emission of values, and providing a notion of \"time\".\n * @return {Observable} An Observable that emits a sequential number each time\n * interval.\n * @static true\n * @name interval\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Creates an output Observable which concurrently emits all values from every\n * given input Observable.\n *\n * <span class=\"informal\">Flattens multiple Observables together by blending\n * their values into one Observable.</span>\n *\n * <img src=\"./img/merge.png\" width=\"100%\">\n *\n * `merge` subscribes to each given input Observable (as arguments), and simply\n * forwards (without doing any transformation) all the values from all the input\n * Observables to the output Observable. The output Observable only completes\n * once all input Observables have completed. Any error delivered by an input\n * Observable will be immediately emitted on the output Observable.\n *\n * @example <caption>Merge together two Observables: 1s interval and clicks</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var timer = Rx.Observable.interval(1000);\n * var clicksOrTimer = Rx.Observable.merge(clicks, timer);\n * clicksOrTimer.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // timer will emit ascending values, one every second(1000ms) to console\n * // clicks logs MouseEvents to console everytime the \"document\" is clicked\n * // Since the two streams are merged you see these happening\n * // as they occur.\n *\n * @example <caption>Merge together 3 Observables, but only 2 run concurrently</caption>\n * var timer1 = Rx.Observable.interval(1000).take(10);\n * var timer2 = Rx.Observable.interval(2000).take(6);\n * var timer3 = Rx.Observable.interval(500).take(10);\n * var concurrent = 2; // the argument\n * var merged = Rx.Observable.merge(timer1, timer2, timer3, concurrent);\n * merged.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // - First timer1 and timer2 will run concurrently\n * // - timer1 will emit a value every 1000ms for 10 iterations\n * // - timer2 will emit a value every 2000ms for 6 iterations\n * // - after timer1 hits it's max iteration, timer2 will\n * //   continue, and timer3 will start to run concurrently with timer2\n * // - when timer2 hits it's max iteration it terminates, and\n * //   timer3 will continue to emit a value every 500ms until it is complete\n *\n * @see {@link mergeAll}\n * @see {@link mergeMap}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n *\n * @param {...ObservableInput} observables Input Observables to merge together.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @param {Scheduler} [scheduler=null] The IScheduler to use for managing\n * concurrency of input Observables.\n * @return {Observable} an Observable that emits items that are the result of\n * every input Observable.\n * @static true\n * @name merge\n * @owner Observable\n */\nfunction merge() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var concurrent = Number.POSITIVE_INFINITY;\n    var scheduler = null;\n    var last = observables[observables.length - 1];\n    if (isScheduler(last)) {\n        scheduler = observables.pop();\n        if (observables.length > 1 && typeof observables[observables.length - 1] === 'number') {\n            concurrent = observables.pop();\n        }\n    }\n    else if (typeof last === 'number') {\n        concurrent = observables.pop();\n    }\n    if (scheduler === null && observables.length === 1 && observables[0] instanceof Observable) {\n        return observables[0];\n    }\n    return mergeAll(concurrent)(fromArray(observables, scheduler));\n}\n\n/**\n * An Observable that emits no items to the Observer and never completes.\n *\n * <img src=\"./img/never.png\" width=\"100%\">\n *\n * A simple Observable that emits neither values nor errors nor the completion\n * notification. It can be used for testing purposes or for composing with other\n * Observables. Please note that by never emitting a complete notification, this\n * Observable keeps the subscription from being disposed automatically.\n * Subscriptions need to be manually disposed.\n *\n * @example <caption>Emit the number 7, then never emit anything else (not even complete).</caption>\n * function info() {\n *   console.log('Will not be called');\n * }\n * var result = NEVER.startWith(7);\n * result.subscribe(x => console.log(x), info, info);\n *\n * @see {@link create}\n * @see {@link EMPTY}\n * @see {@link of}\n * @see {@link throwError}\n */\n\n/**\n * @deprecated Deprecated in favor of using NEVER constant.\n */\n\nvar __read$7 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$7 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$7(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * When any of the provided Observable emits an complete or error notification, it immediately subscribes to the next one\n * that was passed.\n *\n * <span class=\"informal\">Execute series of Observables no matter what, even if it means swallowing errors.</span>\n *\n * <img src=\"./img/onErrorResumeNext.png\" width=\"100%\">\n *\n * `onErrorResumeNext` Will subscribe to each observable source it is provided, in order.\n * If the source it's subscribed to emits an error or completes, it will move to the next source\n * without error.\n *\n * If `onErrorResumeNext` is provided no arguments, or a single, empty array, it will return {@link EMPTY}.\n *\n * `onErrorResumeNext` is basically {@link concat}, only it will continue, even if one of its\n * sources emits an error.\n *\n * Note that there is no way to handle any errors thrown by sources via the resuult of\n * `onErrorResumeNext`. If you want to handle errors thrown in any given source, you can\n * always use the {@link catchError} operator on them before passing them into `onErrorResumeNext`.\n *\n * @example <caption>Subscribe to the next Observable after map fails</caption>\n * import { onErrorResumeNext, of } from 'rxjs/create';\n * import { map } from 'rxjs/operators';\n *\n * onErrorResumeNext(\n *  of(1, 2, 3, 0).pipe(\n *    map(x => {\n *      if (x === 0) throw Error();\n *      return 10 / x;\n *    })\n *  ),\n *  of(1, 2, 3),\n * )\n * .subscribe(\n *   val => console.log(val),\n *   err => console.log(err),          // Will never be called.\n *   () => console.log('done')\n * );\n *\n * // Logs:\n * // 10\n * // 5\n * // 3.3333333333333335\n * // 1\n * // 2\n * // 3\n * // \"done\"\n *\n * @see {@link concat}\n * @see {@link catch}\n *\n * @param {...ObservableInput} sources Observables (or anything that *is* observable) passed either directly or as an array.\n * @return {Observable} An Observable that concatenates all sources, one after the other,\n * ignoring all errors, such that any error causes it to move on to the next source.\n */\n\n/**\n * Convert an object into an observable sequence of [key, value] pairs\n * using an optional IScheduler to enumerate the object.\n *\n * @example <caption>Converts a javascript object to an Observable</caption>\n * var obj = {\n *   foo: 42,\n *   bar: 56,\n *   baz: 78\n * };\n *\n * var source = Rx.Observable.pairs(obj);\n *\n * var subscription = source.subscribe(\n *   function (x) {\n *     console.log('Next: %s', x);\n *   },\n *   function (err) {\n *     console.log('Error: %s', err);\n *   },\n *   function () {\n *     console.log('Completed');\n *   });\n *\n * @param {Object} obj The object to inspect and turn into an\n * Observable sequence.\n * @param {Scheduler} [scheduler] An optional IScheduler to run the\n * enumeration of the input sequence on.\n * @returns {(Observable<[string, T]>)} An observable sequence of\n * [key, value] pairs from the object.\n */\n\n/** @internal */\n\nvar __extends$32 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar RaceSubscriber = /** @class */ (function (_super) {\n    __extends$32(RaceSubscriber, _super);\n    function RaceSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasFirst = false;\n        _this.observables = [];\n        _this.subscriptions = [];\n        return _this;\n    }\n    RaceSubscriber.prototype._next = function (observable) {\n        this.observables.push(observable);\n    };\n    RaceSubscriber.prototype._complete = function () {\n        var observables = this.observables;\n        var len = observables.length;\n        if (len === 0) {\n            this.destination.complete();\n        }\n        else {\n            for (var i = 0; i < len && !this.hasFirst; i++) {\n                var observable = observables[i];\n                var subscription = subscribeToResult(this, observable, observable, i);\n                if (this.subscriptions) {\n                    this.subscriptions.push(subscription);\n                }\n                this.add(subscription);\n            }\n            this.observables = null;\n        }\n    };\n    RaceSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        if (!this.hasFirst) {\n            this.hasFirst = true;\n            for (var i = 0; i < this.subscriptions.length; i++) {\n                if (i !== outerIndex) {\n                    var subscription = this.subscriptions[i];\n                    subscription.unsubscribe();\n                    this.remove(subscription);\n                }\n            }\n            this.subscriptions = null;\n        }\n        this.destination.next(innerValue);\n    };\n    return RaceSubscriber;\n}(OuterSubscriber));\n\n/**\n * Creates an Observable that emits a sequence of numbers within a specified\n * range.\n *\n * <span class=\"informal\">Emits a sequence of numbers in a range.</span>\n *\n * <img src=\"./img/range.png\" width=\"100%\">\n *\n * `range` operator emits a range of sequential integers, in order, where you\n * select the `start` of the range and its `length`. By default, uses no\n * IScheduler and just delivers the notifications synchronously, but may use\n * an optional IScheduler to regulate those deliveries.\n *\n * @example <caption>Emits the numbers 1 to 10</caption>\n * var numbers = Rx.Observable.range(1, 10);\n * numbers.subscribe(x => console.log(x));\n *\n * @see {@link timer}\n * @see {@link interval}\n *\n * @param {number} [start=0] The value of the first integer in the sequence.\n * @param {number} [count=0] The number of sequential integers to generate.\n * @param {Scheduler} [scheduler] A {@link IScheduler} to use for scheduling\n * the emissions of the notifications.\n * @return {Observable} An Observable of numbers that emits a finite range of\n * sequential integers.\n * @static true\n * @name range\n * @owner Observable\n */\n\n/** @internal */\n\n/**\n * Creates an Observable that starts emitting after an `initialDelay` and\n * emits ever increasing numbers after each `period` of time thereafter.\n *\n * <span class=\"informal\">Its like {@link interval}, but you can specify when\n * should the emissions start.</span>\n *\n * <img src=\"./img/timer.png\" width=\"100%\">\n *\n * `timer` returns an Observable that emits an infinite sequence of ascending\n * integers, with a constant interval of time, `period` of your choosing\n * between those emissions. The first emission happens after the specified\n * `initialDelay`. The initial delay may be a {@link Date}. By default, this\n * operator uses the `async` IScheduler to provide a notion of time, but you\n * may pass any IScheduler to it. If `period` is not specified, the output\n * Observable emits only one value, `0`. Otherwise, it emits an infinite\n * sequence.\n *\n * @example <caption>Emits ascending numbers, one every second (1000ms), starting after 3 seconds</caption>\n * var numbers = Rx.Observable.timer(3000, 1000);\n * numbers.subscribe(x => console.log(x));\n *\n * @example <caption>Emits one number after five seconds</caption>\n * var numbers = Rx.Observable.timer(5000);\n * numbers.subscribe(x => console.log(x));\n *\n * @see {@link interval}\n * @see {@link delay}\n *\n * @param {number|Date} [dueTime] The initial delay time to wait before\n * emitting the first value of `0`.\n * @param {number|SchedulerLike} [periodOrScheduler] The period of time between emissions of the\n * subsequent numbers.\n * @param {SchedulerLike} [scheduler=async] The IScheduler to use for scheduling\n * the emission of values, and providing a notion of \"time\".\n * @return {Observable} An Observable that emits a `0` after the\n * `initialDelay` and ever increasing numbers after each `period` of time\n * thereafter.\n * @static true\n * @name timer\n * @owner Observable\n */\n\n/**\n * Creates an Observable that uses a resource which will be disposed at the same time as the Observable.\n *\n * <span class=\"informal\">Use it when you catch yourself cleaning up after an Observable.</span>\n *\n * `using` is a factory operator, which accepts two functions. First function returns a disposable resource.\n * It can be an arbitrary object that implements `unsubscribe` method. Second function will be injected with\n * that object and should return an Observable. That Observable can use resource object during its execution.\n * Both functions passed to `using` will be called every time someone subscribes - neither an Observable nor\n * resource object will be shared in any way between subscriptions.\n *\n * When Observable returned by `using` is subscribed, Observable returned from the second function will be subscribed\n * as well. All its notifications (nexted values, completion and error events) will be emitted unchanged by the output\n * Observable. If however someone unsubscribes from the Observable or source Observable completes or errors by itself,\n * the `unsubscribe` method on resource object will be called. This can be used to do any necessary clean up, which\n * otherwise would have to be handled by hand. Note that complete or error notifications are not emitted when someone\n * cancels subscription to an Observable via `unsubscribe`, so `using` can be used as a hook, allowing you to make\n * sure that all resources which need to exist during an Observable execution will be disposed at appropriate time.\n *\n * @see {@link defer}\n *\n * @param {function(): ISubscription} resourceFactory A function which creates any resource object\n * that implements `unsubscribe` method.\n * @param {function(resource: ISubscription): Observable<T>} observableFactory A function which\n * creates an Observable, that can use injected resource object.\n * @return {Observable<T>} An Observable that behaves the same as Observable returned by `observableFactory`, but\n * which - when completed, errored or unsubscribed - will also call `unsubscribe` on created resource object.\n */\n\nvar __extends$33 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Combines multiple Observables to create an Observable whose values are calculated from the values, in order, of each\n * of its input Observables.\n *\n * If the latest parameter is a function, this function is used to compute the created value from the input values.\n * Otherwise, an array of the input values is returned.\n *\n * @example <caption>Combine age and name from different sources</caption>\n *\n * let age$ = Observable.of<number>(27, 25, 29);\n * let name$ = Observable.of<string>('Foo', 'Bar', 'Beer');\n * let isDev$ = Observable.of<boolean>(true, true, false);\n *\n * Observable\n *     .zip(age$,\n *          name$,\n *          isDev$,\n *          (age: number, name: string, isDev: boolean) => ({ age, name, isDev }))\n *     .subscribe(x => console.log(x));\n *\n * // outputs\n * // { age: 27, name: 'Foo', isDev: true }\n * // { age: 25, name: 'Bar', isDev: true }\n * // { age: 29, name: 'Beer', isDev: false }\n *\n * @param observables\n * @return {Observable<R>}\n * @static true\n * @name zip\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ZipSubscriber = /** @class */ (function (_super) {\n    __extends$33(ZipSubscriber, _super);\n    function ZipSubscriber(destination, resultSelector, values) {\n        if (values === void 0) { values = Object.create(null); }\n        var _this = _super.call(this, destination) || this;\n        _this.iterators = [];\n        _this.active = 0;\n        _this.resultSelector = (typeof resultSelector === 'function') ? resultSelector : null;\n        _this.values = values;\n        return _this;\n    }\n    ZipSubscriber.prototype._next = function (value) {\n        var iterators = this.iterators;\n        if (isArray(value)) {\n            iterators.push(new StaticArrayIterator(value));\n        }\n        else if (typeof value[iterator] === 'function') {\n            iterators.push(new StaticIterator(value[iterator]()));\n        }\n        else {\n            iterators.push(new ZipBufferIterator(this.destination, this, value));\n        }\n    };\n    ZipSubscriber.prototype._complete = function () {\n        var iterators = this.iterators;\n        var len = iterators.length;\n        if (len === 0) {\n            this.destination.complete();\n            return;\n        }\n        this.active = len;\n        for (var i = 0; i < len; i++) {\n            var iterator$$1 = iterators[i];\n            if (iterator$$1.stillUnsubscribed) {\n                this.add(iterator$$1.subscribe(iterator$$1, i));\n            }\n            else {\n                this.active--; // not an observable\n            }\n        }\n    };\n    ZipSubscriber.prototype.notifyInactive = function () {\n        this.active--;\n        if (this.active === 0) {\n            this.destination.complete();\n        }\n    };\n    ZipSubscriber.prototype.checkIterators = function () {\n        var iterators = this.iterators;\n        var len = iterators.length;\n        var destination = this.destination;\n        // abort if not all of them have values\n        for (var i = 0; i < len; i++) {\n            var iterator$$1 = iterators[i];\n            if (typeof iterator$$1.hasValue === 'function' && !iterator$$1.hasValue()) {\n                return;\n            }\n        }\n        var shouldComplete = false;\n        var args = [];\n        for (var i = 0; i < len; i++) {\n            var iterator$$1 = iterators[i];\n            var result = iterator$$1.next();\n            // check to see if it's completed now that you've gotten\n            // the next value.\n            if (iterator$$1.hasCompleted()) {\n                shouldComplete = true;\n            }\n            if (result.done) {\n                destination.complete();\n                return;\n            }\n            args.push(result.value);\n        }\n        if (this.resultSelector) {\n            this._tryresultSelector(args);\n        }\n        else {\n            destination.next(args);\n        }\n        if (shouldComplete) {\n            destination.complete();\n        }\n    };\n    ZipSubscriber.prototype._tryresultSelector = function (args) {\n        var result;\n        try {\n            result = this.resultSelector.apply(this, args);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return ZipSubscriber;\n}(Subscriber));\nvar StaticIterator = /** @class */ (function () {\n    function StaticIterator(iterator$$1) {\n        this.iterator = iterator$$1;\n        this.nextResult = iterator$$1.next();\n    }\n    StaticIterator.prototype.hasValue = function () {\n        return true;\n    };\n    StaticIterator.prototype.next = function () {\n        var result = this.nextResult;\n        this.nextResult = this.iterator.next();\n        return result;\n    };\n    StaticIterator.prototype.hasCompleted = function () {\n        var nextResult = this.nextResult;\n        return nextResult && nextResult.done;\n    };\n    return StaticIterator;\n}());\nvar StaticArrayIterator = /** @class */ (function () {\n    function StaticArrayIterator(array) {\n        this.array = array;\n        this.index = 0;\n        this.length = 0;\n        this.length = array.length;\n    }\n    StaticArrayIterator.prototype[iterator] = function () {\n        return this;\n    };\n    StaticArrayIterator.prototype.next = function (value) {\n        var i = this.index++;\n        var array = this.array;\n        return i < this.length ? { value: array[i], done: false } : { value: null, done: true };\n    };\n    StaticArrayIterator.prototype.hasValue = function () {\n        return this.array.length > this.index;\n    };\n    StaticArrayIterator.prototype.hasCompleted = function () {\n        return this.array.length === this.index;\n    };\n    return StaticArrayIterator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ZipBufferIterator = /** @class */ (function (_super) {\n    __extends$33(ZipBufferIterator, _super);\n    function ZipBufferIterator(destination, parent, observable) {\n        var _this = _super.call(this, destination) || this;\n        _this.parent = parent;\n        _this.observable = observable;\n        _this.stillUnsubscribed = true;\n        _this.buffer = [];\n        _this.isComplete = false;\n        return _this;\n    }\n    ZipBufferIterator.prototype[iterator] = function () {\n        return this;\n    };\n    // NOTE: there is actually a name collision here with Subscriber.next and Iterator.next\n    //    this is legit because `next()` will never be called by a subscription in this case.\n    ZipBufferIterator.prototype.next = function () {\n        var buffer = this.buffer;\n        if (buffer.length === 0 && this.isComplete) {\n            return { value: null, done: true };\n        }\n        else {\n            return { value: buffer.shift(), done: false };\n        }\n    };\n    ZipBufferIterator.prototype.hasValue = function () {\n        return this.buffer.length > 0;\n    };\n    ZipBufferIterator.prototype.hasCompleted = function () {\n        return this.buffer.length === 0 && this.isComplete;\n    };\n    ZipBufferIterator.prototype.notifyComplete = function () {\n        if (this.buffer.length > 0) {\n            this.isComplete = true;\n            this.parent.notifyInactive();\n        }\n        else {\n            this.destination.complete();\n        }\n    };\n    ZipBufferIterator.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.buffer.push(innerValue);\n        this.parent.checkIterators();\n    };\n    ZipBufferIterator.prototype.subscribe = function (value, index) {\n        return subscribeToResult(this, this.observable, this, index);\n    };\n    return ZipBufferIterator;\n}(OuterSubscriber));\n\n/* Observable */\n\nvar __extends$34 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Ignores source values for a duration determined by another Observable, then\n * emits the most recent value from the source Observable, then repeats this\n * process.\n *\n * <span class=\"informal\">It's like {@link auditTime}, but the silencing\n * duration is determined by a second Observable.</span>\n *\n * <img src=\"./img/audit.png\" width=\"100%\">\n *\n * `audit` is similar to `throttle`, but emits the last value from the silenced\n * time window, instead of the first value. `audit` emits the most recent value\n * from the source Observable on the output Observable as soon as its internal\n * timer becomes disabled, and ignores source values while the timer is enabled.\n * Initially, the timer is disabled. As soon as the first source value arrives,\n * the timer is enabled by calling the `durationSelector` function with the\n * source value, which returns the \"duration\" Observable. When the duration\n * Observable emits a value or completes, the timer is disabled, then the most\n * recent source value is emitted on the output Observable, and this process\n * repeats for the next source value.\n *\n * @example <caption>Emit clicks at a rate of at most one click per second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.audit(ev => Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link auditTime}\n * @see {@link debounce}\n * @see {@link delayWhen}\n * @see {@link sample}\n * @see {@link throttle}\n *\n * @param {function(value: T): SubscribableOrPromise} durationSelector A function\n * that receives a value from the source Observable, for computing the silencing\n * duration, returned as an Observable or a Promise.\n * @return {Observable<T>} An Observable that performs rate-limiting of\n * emissions from the source Observable.\n * @method audit\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar AuditSubscriber = /** @class */ (function (_super) {\n    __extends$34(AuditSubscriber, _super);\n    function AuditSubscriber(destination, durationSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.durationSelector = durationSelector;\n        _this.hasValue = false;\n        return _this;\n    }\n    AuditSubscriber.prototype._next = function (value) {\n        this.value = value;\n        this.hasValue = true;\n        if (!this.throttled) {\n            var duration = tryCatch(this.durationSelector)(value);\n            if (duration === errorObject) {\n                this.destination.error(errorObject.e);\n            }\n            else {\n                var innerSubscription = subscribeToResult(this, duration);\n                if (innerSubscription.closed) {\n                    this.clearThrottle();\n                }\n                else {\n                    this.add(this.throttled = innerSubscription);\n                }\n            }\n        }\n    };\n    AuditSubscriber.prototype.clearThrottle = function () {\n        var _a = this, value = _a.value, hasValue = _a.hasValue, throttled = _a.throttled;\n        if (throttled) {\n            this.remove(throttled);\n            this.throttled = null;\n            throttled.unsubscribe();\n        }\n        if (hasValue) {\n            this.value = null;\n            this.hasValue = false;\n            this.destination.next(value);\n        }\n    };\n    AuditSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex) {\n        this.clearThrottle();\n    };\n    AuditSubscriber.prototype.notifyComplete = function () {\n        this.clearThrottle();\n    };\n    return AuditSubscriber;\n}(OuterSubscriber));\n\n/**\n * Ignores source values for `duration` milliseconds, then emits the most recent\n * value from the source Observable, then repeats this process.\n *\n * <span class=\"informal\">When it sees a source values, it ignores that plus\n * the next ones for `duration` milliseconds, and then it emits the most recent\n * value from the source.</span>\n *\n * <img src=\"./img/auditTime.png\" width=\"100%\">\n *\n * `auditTime` is similar to `throttleTime`, but emits the last value from the\n * silenced time window, instead of the first value. `auditTime` emits the most\n * recent value from the source Observable on the output Observable as soon as\n * its internal timer becomes disabled, and ignores source values while the\n * timer is enabled. Initially, the timer is disabled. As soon as the first\n * source value arrives, the timer is enabled. After `duration` milliseconds (or\n * the time unit determined internally by the optional `scheduler`) has passed,\n * the timer is disabled, then the most recent source value is emitted on the\n * output Observable, and this process repeats for the next source value.\n * Optionally takes a {@link IScheduler} for managing timers.\n *\n * @example <caption>Emit clicks at a rate of at most one click per second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.auditTime(1000);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link audit}\n * @see {@link debounceTime}\n * @see {@link delay}\n * @see {@link sampleTime}\n * @see {@link throttleTime}\n *\n * @param {number} duration Time to wait before emitting the most recent source\n * value, measured in milliseconds or the time unit determined internally\n * by the optional `scheduler`.\n * @param {Scheduler} [scheduler=async] The {@link IScheduler} to use for\n * managing the timers that handle the rate-limiting behavior.\n * @return {Observable<T>} An Observable that performs rate-limiting of\n * emissions from the source Observable.\n * @method auditTime\n * @owner Observable\n */\n\nvar __extends$35 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Buffers the source Observable values until `closingNotifier` emits.\n *\n * <span class=\"informal\">Collects values from the past as an array, and emits\n * that array only when another Observable emits.</span>\n *\n * <img src=\"./img/buffer.png\" width=\"100%\">\n *\n * Buffers the incoming Observable values until the given `closingNotifier`\n * Observable emits a value, at which point it emits the buffer on the output\n * Observable and starts a new buffer internally, awaiting the next time\n * `closingNotifier` emits.\n *\n * @example <caption>On every click, emit array of most recent interval events</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var interval = Rx.Observable.interval(1000);\n * var buffered = interval.buffer(clicks);\n * buffered.subscribe(x => console.log(x));\n *\n * @see {@link bufferCount}\n * @see {@link bufferTime}\n * @see {@link bufferToggle}\n * @see {@link bufferWhen}\n * @see {@link window}\n *\n * @param {Observable<any>} closingNotifier An Observable that signals the\n * buffer to be emitted on the output Observable.\n * @return {Observable<T[]>} An Observable of buffers, which are arrays of\n * values.\n * @method buffer\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferSubscriber = /** @class */ (function (_super) {\n    __extends$35(BufferSubscriber, _super);\n    function BufferSubscriber(destination, closingNotifier) {\n        var _this = _super.call(this, destination) || this;\n        _this.buffer = [];\n        _this.add(subscribeToResult(_this, closingNotifier));\n        return _this;\n    }\n    BufferSubscriber.prototype._next = function (value) {\n        this.buffer.push(value);\n    };\n    BufferSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var buffer = this.buffer;\n        this.buffer = [];\n        this.destination.next(buffer);\n    };\n    return BufferSubscriber;\n}(OuterSubscriber));\n\nvar __extends$36 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Buffers the source Observable values until the size hits the maximum\n * `bufferSize` given.\n *\n * <span class=\"informal\">Collects values from the past as an array, and emits\n * that array only when its size reaches `bufferSize`.</span>\n *\n * <img src=\"./img/bufferCount.png\" width=\"100%\">\n *\n * Buffers a number of values from the source Observable by `bufferSize` then\n * emits the buffer and clears it, and starts a new buffer each\n * `startBufferEvery` values. If `startBufferEvery` is not provided or is\n * `null`, then new buffers are started immediately at the start of the source\n * and when each buffer closes and is emitted.\n *\n * @example <caption>Emit the last two click events as an array</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var buffered = clicks.bufferCount(2);\n * buffered.subscribe(x => console.log(x));\n *\n * @example <caption>On every click, emit the last two click events as an array</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var buffered = clicks.bufferCount(2, 1);\n * buffered.subscribe(x => console.log(x));\n *\n * @see {@link buffer}\n * @see {@link bufferTime}\n * @see {@link bufferToggle}\n * @see {@link bufferWhen}\n * @see {@link pairwise}\n * @see {@link windowCount}\n *\n * @param {number} bufferSize The maximum size of the buffer emitted.\n * @param {number} [startBufferEvery] Interval at which to start a new buffer.\n * For example if `startBufferEvery` is `2`, then a new buffer will be started\n * on every other value from the source. A new buffer is started at the\n * beginning of the source by default.\n * @return {Observable<T[]>} An Observable of arrays of buffered values.\n * @method bufferCount\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferCountSubscriber = /** @class */ (function (_super) {\n    __extends$36(BufferCountSubscriber, _super);\n    function BufferCountSubscriber(destination, bufferSize) {\n        var _this = _super.call(this, destination) || this;\n        _this.bufferSize = bufferSize;\n        _this.buffer = [];\n        return _this;\n    }\n    BufferCountSubscriber.prototype._next = function (value) {\n        var buffer = this.buffer;\n        buffer.push(value);\n        if (buffer.length == this.bufferSize) {\n            this.destination.next(buffer);\n            this.buffer = [];\n        }\n    };\n    BufferCountSubscriber.prototype._complete = function () {\n        var buffer = this.buffer;\n        if (buffer.length > 0) {\n            this.destination.next(buffer);\n        }\n        _super.prototype._complete.call(this);\n    };\n    return BufferCountSubscriber;\n}(Subscriber));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferSkipCountSubscriber = /** @class */ (function (_super) {\n    __extends$36(BufferSkipCountSubscriber, _super);\n    function BufferSkipCountSubscriber(destination, bufferSize, startBufferEvery) {\n        var _this = _super.call(this, destination) || this;\n        _this.bufferSize = bufferSize;\n        _this.startBufferEvery = startBufferEvery;\n        _this.buffers = [];\n        _this.count = 0;\n        return _this;\n    }\n    BufferSkipCountSubscriber.prototype._next = function (value) {\n        var _a = this, bufferSize = _a.bufferSize, startBufferEvery = _a.startBufferEvery, buffers = _a.buffers, count = _a.count;\n        this.count++;\n        if (count % startBufferEvery === 0) {\n            buffers.push([]);\n        }\n        for (var i = buffers.length; i--;) {\n            var buffer = buffers[i];\n            buffer.push(value);\n            if (buffer.length === bufferSize) {\n                buffers.splice(i, 1);\n                this.destination.next(buffer);\n            }\n        }\n    };\n    BufferSkipCountSubscriber.prototype._complete = function () {\n        var _a = this, buffers = _a.buffers, destination = _a.destination;\n        while (buffers.length > 0) {\n            var buffer = buffers.shift();\n            if (buffer.length > 0) {\n                destination.next(buffer);\n            }\n        }\n        _super.prototype._complete.call(this);\n    };\n    return BufferSkipCountSubscriber;\n}(Subscriber));\n\nvar __extends$37 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Buffers the source Observable values for a specific time period.\n *\n * <span class=\"informal\">Collects values from the past as an array, and emits\n * those arrays periodically in time.</span>\n *\n * <img src=\"./img/bufferTime.png\" width=\"100%\">\n *\n * Buffers values from the source for a specific time duration `bufferTimeSpan`.\n * Unless the optional argument `bufferCreationInterval` is given, it emits and\n * resets the buffer every `bufferTimeSpan` milliseconds. If\n * `bufferCreationInterval` is given, this operator opens the buffer every\n * `bufferCreationInterval` milliseconds and closes (emits and resets) the\n * buffer every `bufferTimeSpan` milliseconds. When the optional argument\n * `maxBufferSize` is specified, the buffer will be closed either after\n * `bufferTimeSpan` milliseconds or when it contains `maxBufferSize` elements.\n *\n * @example <caption>Every second, emit an array of the recent click events</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var buffered = clicks.bufferTime(1000);\n * buffered.subscribe(x => console.log(x));\n *\n * @example <caption>Every 5 seconds, emit the click events from the next 2 seconds</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var buffered = clicks.bufferTime(2000, 5000);\n * buffered.subscribe(x => console.log(x));\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n * @see {@link bufferToggle}\n * @see {@link bufferWhen}\n * @see {@link windowTime}\n *\n * @param {number} bufferTimeSpan The amount of time to fill each buffer array.\n * @param {number} [bufferCreationInterval] The interval at which to start new\n * buffers.\n * @param {number} [maxBufferSize] The maximum buffer size.\n * @param {Scheduler} [scheduler=async] The scheduler on which to schedule the\n * intervals that determine buffer boundaries.\n * @return {Observable<T[]>} An observable of arrays of buffered values.\n * @method bufferTime\n * @owner Observable\n */\n\nvar Context = /** @class */ (function () {\n    function Context() {\n        this.buffer = [];\n    }\n    return Context;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferTimeSubscriber = /** @class */ (function (_super) {\n    __extends$37(BufferTimeSubscriber, _super);\n    function BufferTimeSubscriber(destination, bufferTimeSpan, bufferCreationInterval, maxBufferSize, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.bufferTimeSpan = bufferTimeSpan;\n        _this.bufferCreationInterval = bufferCreationInterval;\n        _this.maxBufferSize = maxBufferSize;\n        _this.scheduler = scheduler;\n        _this.contexts = [];\n        var context = _this.openContext();\n        _this.timespanOnly = bufferCreationInterval == null || bufferCreationInterval < 0;\n        if (_this.timespanOnly) {\n            var timeSpanOnlyState = { subscriber: _this, context: context, bufferTimeSpan: bufferTimeSpan };\n            _this.add(context.closeAction = scheduler.schedule(dispatchBufferTimeSpanOnly, bufferTimeSpan, timeSpanOnlyState));\n        }\n        else {\n            var closeState = { subscriber: _this, context: context };\n            var creationState = { bufferTimeSpan: bufferTimeSpan, bufferCreationInterval: bufferCreationInterval, subscriber: _this, scheduler: scheduler };\n            _this.add(context.closeAction = scheduler.schedule(dispatchBufferClose, bufferTimeSpan, closeState));\n            _this.add(scheduler.schedule(dispatchBufferCreation, bufferCreationInterval, creationState));\n        }\n        return _this;\n    }\n    BufferTimeSubscriber.prototype._next = function (value) {\n        var contexts = this.contexts;\n        var len = contexts.length;\n        var filledBufferContext;\n        for (var i = 0; i < len; i++) {\n            var context = contexts[i];\n            var buffer = context.buffer;\n            buffer.push(value);\n            if (buffer.length == this.maxBufferSize) {\n                filledBufferContext = context;\n            }\n        }\n        if (filledBufferContext) {\n            this.onBufferFull(filledBufferContext);\n        }\n    };\n    BufferTimeSubscriber.prototype._error = function (err) {\n        this.contexts.length = 0;\n        _super.prototype._error.call(this, err);\n    };\n    BufferTimeSubscriber.prototype._complete = function () {\n        var _a = this, contexts = _a.contexts, destination = _a.destination;\n        while (contexts.length > 0) {\n            var context = contexts.shift();\n            destination.next(context.buffer);\n        }\n        _super.prototype._complete.call(this);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    BufferTimeSubscriber.prototype._unsubscribe = function () {\n        this.contexts = null;\n    };\n    BufferTimeSubscriber.prototype.onBufferFull = function (context) {\n        this.closeContext(context);\n        var closeAction = context.closeAction;\n        closeAction.unsubscribe();\n        this.remove(closeAction);\n        if (!this.closed && this.timespanOnly) {\n            context = this.openContext();\n            var bufferTimeSpan = this.bufferTimeSpan;\n            var timeSpanOnlyState = { subscriber: this, context: context, bufferTimeSpan: bufferTimeSpan };\n            this.add(context.closeAction = this.scheduler.schedule(dispatchBufferTimeSpanOnly, bufferTimeSpan, timeSpanOnlyState));\n        }\n    };\n    BufferTimeSubscriber.prototype.openContext = function () {\n        var context = new Context();\n        this.contexts.push(context);\n        return context;\n    };\n    BufferTimeSubscriber.prototype.closeContext = function (context) {\n        this.destination.next(context.buffer);\n        var contexts = this.contexts;\n        var spliceIndex = contexts ? contexts.indexOf(context) : -1;\n        if (spliceIndex >= 0) {\n            contexts.splice(contexts.indexOf(context), 1);\n        }\n    };\n    return BufferTimeSubscriber;\n}(Subscriber));\nfunction dispatchBufferTimeSpanOnly(state) {\n    var subscriber = state.subscriber;\n    var prevContext = state.context;\n    if (prevContext) {\n        subscriber.closeContext(prevContext);\n    }\n    if (!subscriber.closed) {\n        state.context = subscriber.openContext();\n        state.context.closeAction = this.schedule(state, state.bufferTimeSpan);\n    }\n}\nfunction dispatchBufferCreation(state) {\n    var bufferCreationInterval = state.bufferCreationInterval, bufferTimeSpan = state.bufferTimeSpan, subscriber = state.subscriber, scheduler = state.scheduler;\n    var context = subscriber.openContext();\n    var action = this;\n    if (!subscriber.closed) {\n        subscriber.add(context.closeAction = scheduler.schedule(dispatchBufferClose, bufferTimeSpan, { subscriber: subscriber, context: context }));\n        action.schedule(state, bufferCreationInterval);\n    }\n}\nfunction dispatchBufferClose(arg) {\n    var subscriber = arg.subscriber, context = arg.context;\n    subscriber.closeContext(context);\n}\n\nvar __extends$38 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Buffers the source Observable values starting from an emission from\n * `openings` and ending when the output of `closingSelector` emits.\n *\n * <span class=\"informal\">Collects values from the past as an array. Starts\n * collecting only when `opening` emits, and calls the `closingSelector`\n * function to get an Observable that tells when to close the buffer.</span>\n *\n * <img src=\"./img/bufferToggle.png\" width=\"100%\">\n *\n * Buffers values from the source by opening the buffer via signals from an\n * Observable provided to `openings`, and closing and sending the buffers when\n * a Subscribable or Promise returned by the `closingSelector` function emits.\n *\n * @example <caption>Every other second, emit the click events from the next 500ms</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var openings = Rx.Observable.interval(1000);\n * var buffered = clicks.bufferToggle(openings, i =>\n *   i % 2 ? Rx.Observable.interval(500) : Rx.Observable.empty()\n * );\n * buffered.subscribe(x => console.log(x));\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n * @see {@link bufferTime}\n * @see {@link bufferWhen}\n * @see {@link windowToggle}\n *\n * @param {SubscribableOrPromise<O>} openings A Subscribable or Promise of notifications to start new\n * buffers.\n * @param {function(value: O): SubscribableOrPromise} closingSelector A function that takes\n * the value emitted by the `openings` observable and returns a Subscribable or Promise,\n * which, when it emits, signals that the associated buffer should be emitted\n * and cleared.\n * @return {Observable<T[]>} An observable of arrays of buffered values.\n * @method bufferToggle\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferToggleSubscriber = /** @class */ (function (_super) {\n    __extends$38(BufferToggleSubscriber, _super);\n    function BufferToggleSubscriber(destination, openings, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.openings = openings;\n        _this.closingSelector = closingSelector;\n        _this.contexts = [];\n        _this.add(subscribeToResult(_this, openings));\n        return _this;\n    }\n    BufferToggleSubscriber.prototype._next = function (value) {\n        var contexts = this.contexts;\n        var len = contexts.length;\n        for (var i = 0; i < len; i++) {\n            contexts[i].buffer.push(value);\n        }\n    };\n    BufferToggleSubscriber.prototype._error = function (err) {\n        var contexts = this.contexts;\n        while (contexts.length > 0) {\n            var context = contexts.shift();\n            context.subscription.unsubscribe();\n            context.buffer = null;\n            context.subscription = null;\n        }\n        this.contexts = null;\n        _super.prototype._error.call(this, err);\n    };\n    BufferToggleSubscriber.prototype._complete = function () {\n        var contexts = this.contexts;\n        while (contexts.length > 0) {\n            var context = contexts.shift();\n            this.destination.next(context.buffer);\n            context.subscription.unsubscribe();\n            context.buffer = null;\n            context.subscription = null;\n        }\n        this.contexts = null;\n        _super.prototype._complete.call(this);\n    };\n    BufferToggleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        outerValue ? this.closeBuffer(outerValue) : this.openBuffer(innerValue);\n    };\n    BufferToggleSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.closeBuffer(innerSub.context);\n    };\n    BufferToggleSubscriber.prototype.openBuffer = function (value) {\n        try {\n            var closingSelector = this.closingSelector;\n            var closingNotifier = closingSelector.call(this, value);\n            if (closingNotifier) {\n                this.trySubscribe(closingNotifier);\n            }\n        }\n        catch (err) {\n            this._error(err);\n        }\n    };\n    BufferToggleSubscriber.prototype.closeBuffer = function (context) {\n        var contexts = this.contexts;\n        if (contexts && context) {\n            var buffer = context.buffer, subscription = context.subscription;\n            this.destination.next(buffer);\n            contexts.splice(contexts.indexOf(context), 1);\n            this.remove(subscription);\n            subscription.unsubscribe();\n        }\n    };\n    BufferToggleSubscriber.prototype.trySubscribe = function (closingNotifier) {\n        var contexts = this.contexts;\n        var buffer = [];\n        var subscription = new Subscription();\n        var context = { buffer: buffer, subscription: subscription };\n        contexts.push(context);\n        var innerSubscription = subscribeToResult(this, closingNotifier, context);\n        if (!innerSubscription || innerSubscription.closed) {\n            this.closeBuffer(context);\n        }\n        else {\n            innerSubscription.context = context;\n            this.add(innerSubscription);\n            subscription.add(innerSubscription);\n        }\n    };\n    return BufferToggleSubscriber;\n}(OuterSubscriber));\n\nvar __extends$39 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Buffers the source Observable values, using a factory function of closing\n * Observables to determine when to close, emit, and reset the buffer.\n *\n * <span class=\"informal\">Collects values from the past as an array. When it\n * starts collecting values, it calls a function that returns an Observable that\n * tells when to close the buffer and restart collecting.</span>\n *\n * <img src=\"./img/bufferWhen.png\" width=\"100%\">\n *\n * Opens a buffer immediately, then closes the buffer when the observable\n * returned by calling `closingSelector` function emits a value. When it closes\n * the buffer, it immediately opens a new buffer and repeats the process.\n *\n * @example <caption>Emit an array of the last clicks every [1-5] random seconds</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var buffered = clicks.bufferWhen(() =>\n *   Rx.Observable.interval(1000 + Math.random() * 4000)\n * );\n * buffered.subscribe(x => console.log(x));\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n * @see {@link bufferTime}\n * @see {@link bufferToggle}\n * @see {@link windowWhen}\n *\n * @param {function(): Observable} closingSelector A function that takes no\n * arguments and returns an Observable that signals buffer closure.\n * @return {Observable<T[]>} An observable of arrays of buffered values.\n * @method bufferWhen\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferWhenSubscriber = /** @class */ (function (_super) {\n    __extends$39(BufferWhenSubscriber, _super);\n    function BufferWhenSubscriber(destination, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.closingSelector = closingSelector;\n        _this.subscribing = false;\n        _this.openBuffer();\n        return _this;\n    }\n    BufferWhenSubscriber.prototype._next = function (value) {\n        this.buffer.push(value);\n    };\n    BufferWhenSubscriber.prototype._complete = function () {\n        var buffer = this.buffer;\n        if (buffer) {\n            this.destination.next(buffer);\n        }\n        _super.prototype._complete.call(this);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    BufferWhenSubscriber.prototype._unsubscribe = function () {\n        this.buffer = null;\n        this.subscribing = false;\n    };\n    BufferWhenSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.openBuffer();\n    };\n    BufferWhenSubscriber.prototype.notifyComplete = function () {\n        if (this.subscribing) {\n            this.complete();\n        }\n        else {\n            this.openBuffer();\n        }\n    };\n    BufferWhenSubscriber.prototype.openBuffer = function () {\n        var closingSubscription = this.closingSubscription;\n        if (closingSubscription) {\n            this.remove(closingSubscription);\n            closingSubscription.unsubscribe();\n        }\n        var buffer = this.buffer;\n        if (this.buffer) {\n            this.destination.next(buffer);\n        }\n        this.buffer = [];\n        var closingNotifier = tryCatch(this.closingSelector)();\n        if (closingNotifier === errorObject) {\n            this.error(errorObject.e);\n        }\n        else {\n            closingSubscription = new Subscription();\n            this.closingSubscription = closingSubscription;\n            this.add(closingSubscription);\n            this.subscribing = true;\n            closingSubscription.add(subscribeToResult(this, closingNotifier));\n            this.subscribing = false;\n        }\n    };\n    return BufferWhenSubscriber;\n}(OuterSubscriber));\n\nvar __extends$40 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Catches errors on the observable to be handled by returning a new observable or throwing an error.\n *\n * <img src=\"./img/catch.png\" width=\"100%\">\n *\n * @example <caption>Continues with a different Observable when there's an error</caption>\n *\n * Observable.of(1, 2, 3, 4, 5)\n *   .map(n => {\n * \t   if (n == 4) {\n * \t     throw 'four!';\n *     }\n *\t   return n;\n *   })\n *   .catch(err => Observable.of('I', 'II', 'III', 'IV', 'V'))\n *   .subscribe(x => console.log(x));\n *   // 1, 2, 3, I, II, III, IV, V\n *\n * @example <caption>Retries the caught source Observable again in case of error, similar to retry() operator</caption>\n *\n * Observable.of(1, 2, 3, 4, 5)\n *   .map(n => {\n * \t   if (n === 4) {\n * \t     throw 'four!';\n *     }\n * \t   return n;\n *   })\n *   .catch((err, caught) => caught)\n *   .take(30)\n *   .subscribe(x => console.log(x));\n *   // 1, 2, 3, 1, 2, 3, ...\n *\n * @example <caption>Throws a new error when the source Observable throws an error</caption>\n *\n * Observable.of(1, 2, 3, 4, 5)\n *   .map(n => {\n *     if (n == 4) {\n *       throw 'four!';\n *     }\n *     return n;\n *   })\n *   .catch(err => {\n *     throw 'error in source. Details: ' + err;\n *   })\n *   .subscribe(\n *     x => console.log(x),\n *     err => console.log(err)\n *   );\n *   // 1, 2, 3, error in source. Details: four!\n *\n * @param {function} selector a function that takes as arguments `err`, which is the error, and `caught`, which\n *  is the source observable, in case you'd like to \"retry\" that observable by returning it again. Whatever observable\n *  is returned by the `selector` will be used to continue the observable chain.\n * @return {Observable} An observable that originates from either the source or the observable returned by the\n *  catch `selector` function.\n * @name catchError\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar CatchSubscriber = /** @class */ (function (_super) {\n    __extends$40(CatchSubscriber, _super);\n    function CatchSubscriber(destination, selector, caught) {\n        var _this = _super.call(this, destination) || this;\n        _this.selector = selector;\n        _this.caught = caught;\n        return _this;\n    }\n    // NOTE: overriding `error` instead of `_error` because we don't want\n    // to have this flag this subscriber as `isStopped`. We can mimic the\n    // behavior of the RetrySubscriber (from the `retry` operator), where\n    // we unsubscribe from our source chain, reset our Subscriber flags,\n    // then subscribe to the selector result.\n    CatchSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var result = void 0;\n            try {\n                result = this.selector(err, this.caught);\n            }\n            catch (err2) {\n                _super.prototype.error.call(this, err2);\n                return;\n            }\n            this._unsubscribeAndRecycle();\n            this.add(subscribeToResult(this, result));\n        }\n    };\n    return CatchSubscriber;\n}(OuterSubscriber));\n\nvar __read$8 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$8 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$8(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * @deprecated Deprecated in favor of static combineLatest.\n */\n\nvar __read$9 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$9 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$9(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * @deprecated Deprecated in favor of static concat.\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable, in a serialized fashion waiting for each one to complete before\n * merging the next.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link concatAll}.</span>\n *\n * <img src=\"./img/concatMap.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. Each new inner Observable is\n * concatenated with the previous inner Observable.\n *\n * __Warning:__ if source values arrive endlessly and faster than their\n * corresponding inner Observables can complete, it will result in memory issues\n * as inner Observables amass in an unbounded buffer waiting for their turn to\n * be subscribed to.\n *\n * Note: `concatMap` is equivalent to `mergeMap` with concurrency parameter set\n * to `1`.\n *\n * @example <caption>For each click event, tick every second from 0 to 3, with no concurrency</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.concatMap(ev => Rx.Observable.interval(1000).take(4));\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n *\n * @see {@link concat}\n * @see {@link concatAll}\n * @see {@link concatMapTo}\n * @see {@link exhaustMap}\n * @see {@link mergeMap}\n * @see {@link switchMap}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @return {Observable} An Observable that emits the result of applying the\n * projection function (and the optional `resultSelector`) to each item emitted\n * by the source Observable and taking values from each projected inner\n * Observable sequentially.\n * @method concatMap\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to the same Observable which is merged multiple\n * times in a serialized fashion on the output Observable.\n *\n * <span class=\"informal\">It's like {@link concatMap}, but maps each value\n * always to the same inner Observable.</span>\n *\n * <img src=\"./img/concatMapTo.png\" width=\"100%\">\n *\n * Maps each source value to the given Observable `innerObservable` regardless\n * of the source value, and then flattens those resulting Observables into one\n * single Observable, which is the output Observable. Each new `innerObservable`\n * instance emitted on the output Observable is concatenated with the previous\n * `innerObservable` instance.\n *\n * __Warning:__ if source values arrive endlessly and faster than their\n * corresponding inner Observables can complete, it will result in memory issues\n * as inner Observables amass in an unbounded buffer waiting for their turn to\n * be subscribed to.\n *\n * Note: `concatMapTo` is equivalent to `mergeMapTo` with concurrency parameter\n * set to `1`.\n *\n * @example <caption>For each click event, tick every second from 0 to 3, with no concurrency</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.concatMapTo(Rx.Observable.interval(1000).take(4));\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n *\n * @see {@link concat}\n * @see {@link concatAll}\n * @see {@link concatMap}\n * @see {@link mergeMapTo}\n * @see {@link switchMapTo}\n *\n * @param {ObservableInput} innerObservable An Observable to replace each value from\n * the source Observable.\n * @return {Observable} An observable of values merged together by joining the\n * passed observable with itself, one after the other, for each value emitted\n * from the source.\n * @method concatMapTo\n * @owner Observable\n */\n\nvar __extends$41 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Counts the number of emissions on the source and emits that number when the\n * source completes.\n *\n * <span class=\"informal\">Tells how many values were emitted, when the source\n * completes.</span>\n *\n * <img src=\"./img/count.png\" width=\"100%\">\n *\n * `count` transforms an Observable that emits values into an Observable that\n * emits a single value that represents the number of values emitted by the\n * source Observable. If the source Observable terminates with an error, `count`\n * will pass this error notification along without emitting a value first. If\n * the source Observable does not terminate at all, `count` will neither emit\n * a value nor terminate. This operator takes an optional `predicate` function\n * as argument, in which case the output emission will represent the number of\n * source values that matched `true` with the `predicate`.\n *\n * @example <caption>Counts how many seconds have passed before the first click happened</caption>\n * var seconds = Rx.Observable.interval(1000);\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var secondsBeforeClick = seconds.takeUntil(clicks);\n * var result = secondsBeforeClick.count();\n * result.subscribe(x => console.log(x));\n *\n * @example <caption>Counts how many odd numbers are there between 1 and 7</caption>\n * var numbers = Rx.Observable.range(1, 7);\n * var result = numbers.count(i => i % 2 === 1);\n * result.subscribe(x => console.log(x));\n *\n * // Results in:\n * // 4\n *\n * @see {@link max}\n * @see {@link min}\n * @see {@link reduce}\n *\n * @param {function(value: T, i: number, source: Observable<T>): boolean} [predicate] A\n * boolean function to select what values are to be counted. It is provided with\n * arguments of:\n * - `value`: the value from the source Observable.\n * - `index`: the (zero-based) \"index\" of the value from the source Observable.\n * - `source`: the source Observable instance itself.\n * @return {Observable} An Observable of one number that represents the count as\n * described above.\n * @method count\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar CountSubscriber = /** @class */ (function (_super) {\n    __extends$41(CountSubscriber, _super);\n    function CountSubscriber(destination, predicate, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.source = source;\n        _this.count = 0;\n        _this.index = 0;\n        return _this;\n    }\n    CountSubscriber.prototype._next = function (value) {\n        if (this.predicate) {\n            this._tryPredicate(value);\n        }\n        else {\n            this.count++;\n        }\n    };\n    CountSubscriber.prototype._tryPredicate = function (value) {\n        var result;\n        try {\n            result = this.predicate(value, this.index++, this.source);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.count++;\n        }\n    };\n    CountSubscriber.prototype._complete = function () {\n        this.destination.next(this.count);\n        this.destination.complete();\n    };\n    return CountSubscriber;\n}(Subscriber));\n\nvar __extends$42 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits a value from the source Observable only after a particular time span\n * determined by another Observable has passed without another source emission.\n *\n * <span class=\"informal\">It's like {@link debounceTime}, but the time span of\n * emission silence is determined by a second Observable.</span>\n *\n * <img src=\"./img/debounce.png\" width=\"100%\">\n *\n * `debounce` delays values emitted by the source Observable, but drops previous\n * pending delayed emissions if a new value arrives on the source Observable.\n * This operator keeps track of the most recent value from the source\n * Observable, and spawns a duration Observable by calling the\n * `durationSelector` function. The value is emitted only when the duration\n * Observable emits a value or completes, and if no other value was emitted on\n * the source Observable since the duration Observable was spawned. If a new\n * value appears before the duration Observable emits, the previous value will\n * be dropped and will not be emitted on the output Observable.\n *\n * Like {@link debounceTime}, this is a rate-limiting operator, and also a\n * delay-like operator since output emissions do not necessarily occur at the\n * same time as they did on the source Observable.\n *\n * @example <caption>Emit the most recent click after a burst of clicks</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.debounce(() => Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link audit}\n * @see {@link debounceTime}\n * @see {@link delayWhen}\n * @see {@link throttle}\n *\n * @param {function(value: T): SubscribableOrPromise} durationSelector A function\n * that receives a value from the source Observable, for computing the timeout\n * duration for each source value, returned as an Observable or a Promise.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by the specified duration Observable returned by\n * `durationSelector`, and may drop some values if they occur too frequently.\n * @method debounce\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DebounceSubscriber = /** @class */ (function (_super) {\n    __extends$42(DebounceSubscriber, _super);\n    function DebounceSubscriber(destination, durationSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.durationSelector = durationSelector;\n        _this.hasValue = false;\n        _this.durationSubscription = null;\n        return _this;\n    }\n    DebounceSubscriber.prototype._next = function (value) {\n        try {\n            var result = this.durationSelector.call(this, value);\n            if (result) {\n                this._tryNext(value, result);\n            }\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    DebounceSubscriber.prototype._complete = function () {\n        this.emitValue();\n        this.destination.complete();\n    };\n    DebounceSubscriber.prototype._tryNext = function (value, duration) {\n        var subscription = this.durationSubscription;\n        this.value = value;\n        this.hasValue = true;\n        if (subscription) {\n            subscription.unsubscribe();\n            this.remove(subscription);\n        }\n        subscription = subscribeToResult(this, duration);\n        if (subscription && !subscription.closed) {\n            this.add(this.durationSubscription = subscription);\n        }\n    };\n    DebounceSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.emitValue();\n    };\n    DebounceSubscriber.prototype.notifyComplete = function () {\n        this.emitValue();\n    };\n    DebounceSubscriber.prototype.emitValue = function () {\n        if (this.hasValue) {\n            var value = this.value;\n            var subscription = this.durationSubscription;\n            if (subscription) {\n                this.durationSubscription = null;\n                subscription.unsubscribe();\n                this.remove(subscription);\n            }\n            // This must be done *before* passing the value\n            // along to the destination because it's possible for\n            // the value to synchronously re-enter this operator\n            // recursively if the duration selector Observable\n            // emits synchronously\n            this.value = null;\n            this.hasValue = false;\n            _super.prototype._next.call(this, value);\n        }\n    };\n    return DebounceSubscriber;\n}(OuterSubscriber));\n\nvar __extends$43 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits a value from the source Observable only after a particular time span\n * has passed without another source emission.\n *\n * <span class=\"informal\">It's like {@link delay}, but passes only the most\n * recent value from each burst of emissions.</span>\n *\n * <img src=\"./img/debounceTime.png\" width=\"100%\">\n *\n * `debounceTime` delays values emitted by the source Observable, but drops\n * previous pending delayed emissions if a new value arrives on the source\n * Observable. This operator keeps track of the most recent value from the\n * source Observable, and emits that only when `dueTime` enough time has passed\n * without any other value appearing on the source Observable. If a new value\n * appears before `dueTime` silence occurs, the previous value will be dropped\n * and will not be emitted on the output Observable.\n *\n * This is a rate-limiting operator, because it is impossible for more than one\n * value to be emitted in any time window of duration `dueTime`, but it is also\n * a delay-like operator since output emissions do not occur at the same time as\n * they did on the source Observable. Optionally takes a {@link IScheduler} for\n * managing timers.\n *\n * @example <caption>Emit the most recent click after a burst of clicks</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.debounceTime(1000);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link auditTime}\n * @see {@link debounce}\n * @see {@link delay}\n * @see {@link sampleTime}\n * @see {@link throttleTime}\n *\n * @param {number} dueTime The timeout duration in milliseconds (or the time\n * unit determined internally by the optional `scheduler`) for the window of\n * time required to wait for emission silence before emitting the most recent\n * source value.\n * @param {Scheduler} [scheduler=async] The {@link IScheduler} to use for\n * managing the timers that handle the timeout for each value.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by the specified `dueTime`, and may drop some values if they occur\n * too frequently.\n * @method debounceTime\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DebounceTimeSubscriber = /** @class */ (function (_super) {\n    __extends$43(DebounceTimeSubscriber, _super);\n    function DebounceTimeSubscriber(destination, dueTime, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.dueTime = dueTime;\n        _this.scheduler = scheduler;\n        _this.debouncedSubscription = null;\n        _this.lastValue = null;\n        _this.hasValue = false;\n        return _this;\n    }\n    DebounceTimeSubscriber.prototype._next = function (value) {\n        this.clearDebounce();\n        this.lastValue = value;\n        this.hasValue = true;\n        this.add(this.debouncedSubscription = this.scheduler.schedule(dispatchNext$2, this.dueTime, this));\n    };\n    DebounceTimeSubscriber.prototype._complete = function () {\n        this.debouncedNext();\n        this.destination.complete();\n    };\n    DebounceTimeSubscriber.prototype.debouncedNext = function () {\n        this.clearDebounce();\n        if (this.hasValue) {\n            var lastValue = this.lastValue;\n            // This must be done *before* passing the value\n            // along to the destination because it's possible for\n            // the value to synchronously re-enter this operator\n            // recursively when scheduled with things like\n            // VirtualScheduler/TestScheduler.\n            this.lastValue = null;\n            this.hasValue = false;\n            this.destination.next(lastValue);\n        }\n    };\n    DebounceTimeSubscriber.prototype.clearDebounce = function () {\n        var debouncedSubscription = this.debouncedSubscription;\n        if (debouncedSubscription !== null) {\n            this.remove(debouncedSubscription);\n            debouncedSubscription.unsubscribe();\n            this.debouncedSubscription = null;\n        }\n    };\n    return DebounceTimeSubscriber;\n}(Subscriber));\nfunction dispatchNext$2(subscriber) {\n    subscriber.debouncedNext();\n}\n\nvar __extends$44 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Emits a given value if the source Observable completes without emitting any\n * `next` value, otherwise mirrors the source Observable.\n *\n * <span class=\"informal\">If the source Observable turns out to be empty, then\n * this operator will emit a default value.</span>\n *\n * <img src=\"./img/defaultIfEmpty.png\" width=\"100%\">\n *\n * `defaultIfEmpty` emits the values emitted by the source Observable or a\n * specified default value if the source Observable is empty (completes without\n * having emitted any `next` value).\n *\n * @example <caption>If no clicks happen in 5 seconds, then emit \"no clicks\"</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var clicksBeforeFive = clicks.takeUntil(Rx.Observable.interval(5000));\n * var result = clicksBeforeFive.defaultIfEmpty('no clicks');\n * result.subscribe(x => console.log(x));\n *\n * @see {@link empty}\n * @see {@link last}\n *\n * @param {any} [defaultValue=null] The default value used if the source\n * Observable is empty.\n * @return {Observable} An Observable that emits either the specified\n * `defaultValue` if the source Observable emits no items, or the values emitted\n * by the source Observable.\n * @method defaultIfEmpty\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DefaultIfEmptySubscriber = /** @class */ (function (_super) {\n    __extends$44(DefaultIfEmptySubscriber, _super);\n    function DefaultIfEmptySubscriber(destination, defaultValue) {\n        var _this = _super.call(this, destination) || this;\n        _this.defaultValue = defaultValue;\n        _this.isEmpty = true;\n        return _this;\n    }\n    DefaultIfEmptySubscriber.prototype._next = function (value) {\n        this.isEmpty = false;\n        this.destination.next(value);\n    };\n    DefaultIfEmptySubscriber.prototype._complete = function () {\n        if (this.isEmpty) {\n            this.destination.next(this.defaultValue);\n        }\n        this.destination.complete();\n    };\n    return DefaultIfEmptySubscriber;\n}(Subscriber));\n\nvar __extends$45 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Delays the emission of items from the source Observable by a given timeout or\n * until a given Date.\n *\n * <span class=\"informal\">Time shifts each item by some specified amount of\n * milliseconds.</span>\n *\n * <img src=\"./img/delay.png\" width=\"100%\">\n *\n * If the delay argument is a Number, this operator time shifts the source\n * Observable by that amount of time expressed in milliseconds. The relative\n * time intervals between the values are preserved.\n *\n * If the delay argument is a Date, this operator time shifts the start of the\n * Observable execution until the given date occurs.\n *\n * @example <caption>Delay each click by one second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var delayedClicks = clicks.delay(1000); // each click emitted after 1 second\n * delayedClicks.subscribe(x => console.log(x));\n *\n * @example <caption>Delay all clicks until a future date happens</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var date = new Date('March 15, 2050 12:00:00'); // in the future\n * var delayedClicks = clicks.delay(date); // click emitted only after that date\n * delayedClicks.subscribe(x => console.log(x));\n *\n * @see {@link debounceTime}\n * @see {@link delayWhen}\n *\n * @param {number|Date} delay The delay duration in milliseconds (a `number`) or\n * a `Date` until which the emission of the source items is delayed.\n * @param {Scheduler} [scheduler=async] The IScheduler to use for\n * managing the timers that handle the time-shift for each item.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by the specified timeout or Date.\n * @method delay\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DelaySubscriber = /** @class */ (function (_super) {\n    __extends$45(DelaySubscriber, _super);\n    function DelaySubscriber(destination, delay, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.delay = delay;\n        _this.scheduler = scheduler;\n        _this.queue = [];\n        _this.active = false;\n        _this.errored = false;\n        return _this;\n    }\n    DelaySubscriber.dispatch = function (state) {\n        var source = state.source;\n        var queue = source.queue;\n        var scheduler = state.scheduler;\n        var destination = state.destination;\n        while (queue.length > 0 && (queue[0].time - scheduler.now()) <= 0) {\n            queue.shift().notification.observe(destination);\n        }\n        if (queue.length > 0) {\n            var delay_1 = Math.max(0, queue[0].time - scheduler.now());\n            this.schedule(state, delay_1);\n        }\n        else {\n            source.active = false;\n        }\n    };\n    DelaySubscriber.prototype._schedule = function (scheduler) {\n        this.active = true;\n        this.add(scheduler.schedule(DelaySubscriber.dispatch, this.delay, {\n            source: this, destination: this.destination, scheduler: scheduler\n        }));\n    };\n    DelaySubscriber.prototype.scheduleNotification = function (notification) {\n        if (this.errored === true) {\n            return;\n        }\n        var scheduler = this.scheduler;\n        var message = new DelayMessage(scheduler.now() + this.delay, notification);\n        this.queue.push(message);\n        if (this.active === false) {\n            this._schedule(scheduler);\n        }\n    };\n    DelaySubscriber.prototype._next = function (value) {\n        this.scheduleNotification(Notification.createNext(value));\n    };\n    DelaySubscriber.prototype._error = function (err) {\n        this.errored = true;\n        this.queue = [];\n        this.destination.error(err);\n    };\n    DelaySubscriber.prototype._complete = function () {\n        this.scheduleNotification(Notification.createComplete());\n    };\n    return DelaySubscriber;\n}(Subscriber));\nvar DelayMessage = /** @class */ (function () {\n    function DelayMessage(time, notification) {\n        this.time = time;\n        this.notification = notification;\n    }\n    return DelayMessage;\n}());\n\nvar __extends$46 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Delays the emission of items from the source Observable by a given time span\n * determined by the emissions of another Observable.\n *\n * <span class=\"informal\">It's like {@link delay}, but the time span of the\n * delay duration is determined by a second Observable.</span>\n *\n * <img src=\"./img/delayWhen.png\" width=\"100%\">\n *\n * `delayWhen` time shifts each emitted value from the source Observable by a\n * time span determined by another Observable. When the source emits a value,\n * the `delayDurationSelector` function is called with the source value as\n * argument, and should return an Observable, called the \"duration\" Observable.\n * The source value is emitted on the output Observable only when the duration\n * Observable emits a value or completes.\n *\n * Optionally, `delayWhen` takes a second argument, `subscriptionDelay`, which\n * is an Observable. When `subscriptionDelay` emits its first value or\n * completes, the source Observable is subscribed to and starts behaving like\n * described in the previous paragraph. If `subscriptionDelay` is not provided,\n * `delayWhen` will subscribe to the source Observable as soon as the output\n * Observable is subscribed.\n *\n * @example <caption>Delay each click by a random amount of time, between 0 and 5 seconds</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var delayedClicks = clicks.delayWhen(event =>\n *   Rx.Observable.interval(Math.random() * 5000)\n * );\n * delayedClicks.subscribe(x => console.log(x));\n *\n * @see {@link debounce}\n * @see {@link delay}\n *\n * @param {function(value: T): Observable} delayDurationSelector A function that\n * returns an Observable for each value emitted by the source Observable, which\n * is then used to delay the emission of that item on the output Observable\n * until the Observable returned from this function emits a value.\n * @param {Observable} subscriptionDelay An Observable that triggers the\n * subscription to the source Observable once it emits any value.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by an amount of time specified by the Observable returned by\n * `delayDurationSelector`.\n * @method delayWhen\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DelayWhenSubscriber = /** @class */ (function (_super) {\n    __extends$46(DelayWhenSubscriber, _super);\n    function DelayWhenSubscriber(destination, delayDurationSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.delayDurationSelector = delayDurationSelector;\n        _this.completed = false;\n        _this.delayNotifierSubscriptions = [];\n        _this.values = [];\n        return _this;\n    }\n    DelayWhenSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(outerValue);\n        this.removeSubscription(innerSub);\n        this.tryComplete();\n    };\n    DelayWhenSubscriber.prototype.notifyError = function (error, innerSub) {\n        this._error(error);\n    };\n    DelayWhenSubscriber.prototype.notifyComplete = function (innerSub) {\n        var value = this.removeSubscription(innerSub);\n        if (value) {\n            this.destination.next(value);\n        }\n        this.tryComplete();\n    };\n    DelayWhenSubscriber.prototype._next = function (value) {\n        try {\n            var delayNotifier = this.delayDurationSelector(value);\n            if (delayNotifier) {\n                this.tryDelay(delayNotifier, value);\n            }\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    DelayWhenSubscriber.prototype._complete = function () {\n        this.completed = true;\n        this.tryComplete();\n    };\n    DelayWhenSubscriber.prototype.removeSubscription = function (subscription) {\n        subscription.unsubscribe();\n        var subscriptionIdx = this.delayNotifierSubscriptions.indexOf(subscription);\n        var value = null;\n        if (subscriptionIdx !== -1) {\n            value = this.values[subscriptionIdx];\n            this.delayNotifierSubscriptions.splice(subscriptionIdx, 1);\n            this.values.splice(subscriptionIdx, 1);\n        }\n        return value;\n    };\n    DelayWhenSubscriber.prototype.tryDelay = function (delayNotifier, value) {\n        var notifierSubscription = subscribeToResult(this, delayNotifier, value);\n        if (notifierSubscription && !notifierSubscription.closed) {\n            this.add(notifierSubscription);\n            this.delayNotifierSubscriptions.push(notifierSubscription);\n        }\n        this.values.push(value);\n    };\n    DelayWhenSubscriber.prototype.tryComplete = function () {\n        if (this.completed && this.delayNotifierSubscriptions.length === 0) {\n            this.destination.complete();\n        }\n    };\n    return DelayWhenSubscriber;\n}(OuterSubscriber));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SubscriptionDelayObservable = /** @class */ (function (_super) {\n    __extends$46(SubscriptionDelayObservable, _super);\n    function SubscriptionDelayObservable(source, subscriptionDelay) {\n        var _this = _super.call(this) || this;\n        _this.source = source;\n        _this.subscriptionDelay = subscriptionDelay;\n        return _this;\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n    SubscriptionDelayObservable.prototype._subscribe = function (subscriber) {\n        this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(subscriber, this.source));\n    };\n    return SubscriptionDelayObservable;\n}(Observable));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SubscriptionDelaySubscriber = /** @class */ (function (_super) {\n    __extends$46(SubscriptionDelaySubscriber, _super);\n    function SubscriptionDelaySubscriber(parent, source) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.source = source;\n        _this.sourceSubscribed = false;\n        return _this;\n    }\n    SubscriptionDelaySubscriber.prototype._next = function (unused) {\n        this.subscribeToSource();\n    };\n    SubscriptionDelaySubscriber.prototype._error = function (err) {\n        this.unsubscribe();\n        this.parent.error(err);\n    };\n    SubscriptionDelaySubscriber.prototype._complete = function () {\n        this.subscribeToSource();\n    };\n    SubscriptionDelaySubscriber.prototype.subscribeToSource = function () {\n        if (!this.sourceSubscribed) {\n            this.sourceSubscribed = true;\n            this.unsubscribe();\n            this.source.subscribe(this.parent);\n        }\n    };\n    return SubscriptionDelaySubscriber;\n}(Subscriber));\n\nvar __extends$47 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Converts an Observable of {@link Notification} objects into the emissions\n * that they represent.\n *\n * <span class=\"informal\">Unwraps {@link Notification} objects as actual `next`,\n * `error` and `complete` emissions. The opposite of {@link materialize}.</span>\n *\n * <img src=\"./img/dematerialize.png\" width=\"100%\">\n *\n * `dematerialize` is assumed to operate an Observable that only emits\n * {@link Notification} objects as `next` emissions, and does not emit any\n * `error`. Such Observable is the output of a `materialize` operation. Those\n * notifications are then unwrapped using the metadata they contain, and emitted\n * as `next`, `error`, and `complete` on the output Observable.\n *\n * Use this operator in conjunction with {@link materialize}.\n *\n * @example <caption>Convert an Observable of Notifications to an actual Observable</caption>\n * var notifA = new Rx.Notification('N', 'A');\n * var notifB = new Rx.Notification('N', 'B');\n * var notifE = new Rx.Notification('E', void 0,\n *   new TypeError('x.toUpperCase is not a function')\n * );\n * var materialized = Rx.Observable.of(notifA, notifB, notifE);\n * var upperCase = materialized.dematerialize();\n * upperCase.subscribe(x => console.log(x), e => console.error(e));\n *\n * // Results in:\n * // A\n * // B\n * // TypeError: x.toUpperCase is not a function\n *\n * @see {@link Notification}\n * @see {@link materialize}\n *\n * @return {Observable} An Observable that emits items and notifications\n * embedded in Notification objects emitted by the source Observable.\n * @method dematerialize\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DeMaterializeSubscriber = /** @class */ (function (_super) {\n    __extends$47(DeMaterializeSubscriber, _super);\n    function DeMaterializeSubscriber(destination) {\n        return _super.call(this, destination) || this;\n    }\n    DeMaterializeSubscriber.prototype._next = function (value) {\n        value.observe(this.destination);\n    };\n    return DeMaterializeSubscriber;\n}(Subscriber));\n\nvar __extends$48 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that emits all items emitted by the source Observable that are distinct by comparison from previous items.\n *\n * If a keySelector function is provided, then it will project each value from the source observable into a new value that it will\n * check for equality with previously projected values. If a keySelector function is not provided, it will use each value from the\n * source observable directly with an equality check against previous values.\n *\n * In JavaScript runtimes that support `Set`, this operator will use a `Set` to improve performance of the distinct value checking.\n *\n * In other runtimes, this operator will use a minimal implementation of `Set` that relies on an `Array` and `indexOf` under the\n * hood, so performance will degrade as more values are checked for distinction. Even in newer browsers, a long-running `distinct`\n * use might result in memory leaks. To help alleviate this in some scenarios, an optional `flushes` parameter is also provided so\n * that the internal `Set` can be \"flushed\", basically clearing it of values.\n *\n * @example <caption>A simple example with numbers</caption>\n * Observable.of(1, 1, 2, 2, 2, 1, 2, 3, 4, 3, 2, 1)\n *   .distinct()\n *   .subscribe(x => console.log(x)); // 1, 2, 3, 4\n *\n * @example <caption>An example using a keySelector function</caption>\n * interface Person {\n *    age: number,\n *    name: string\n * }\n *\n * Observable.of<Person>(\n *     { age: 4, name: 'Foo'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo'})\n *     .distinct((p: Person) => p.name)\n *     .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo' }\n * // { age: 7, name: 'Bar' }\n *\n * @see {@link distinctUntilChanged}\n * @see {@link distinctUntilKeyChanged}\n *\n * @param {function} [keySelector] Optional function to select which value you want to check as distinct.\n * @param {Observable} [flushes] Optional Observable for flushing the internal HashSet of the operator.\n * @return {Observable} An Observable that emits items from the source Observable with distinct values.\n * @method distinct\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DistinctSubscriber = /** @class */ (function (_super) {\n    __extends$48(DistinctSubscriber, _super);\n    function DistinctSubscriber(destination, keySelector, flushes) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.values = new Set();\n        if (flushes) {\n            _this.add(subscribeToResult(_this, flushes));\n        }\n        return _this;\n    }\n    DistinctSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.values.clear();\n    };\n    DistinctSubscriber.prototype.notifyError = function (error, innerSub) {\n        this._error(error);\n    };\n    DistinctSubscriber.prototype._next = function (value) {\n        if (this.keySelector) {\n            this._useKeySelector(value);\n        }\n        else {\n            this._finalizeNext(value, value);\n        }\n    };\n    DistinctSubscriber.prototype._useKeySelector = function (value) {\n        var key;\n        var destination = this.destination;\n        try {\n            key = this.keySelector(value);\n        }\n        catch (err) {\n            destination.error(err);\n            return;\n        }\n        this._finalizeNext(key, value);\n    };\n    DistinctSubscriber.prototype._finalizeNext = function (key, value) {\n        var values = this.values;\n        if (!values.has(key)) {\n            values.add(key);\n            this.destination.next(value);\n        }\n    };\n    return DistinctSubscriber;\n}(OuterSubscriber));\n\nvar __extends$49 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Returns an Observable that emits all items emitted by the source Observable that are distinct by comparison from the previous item.\n *\n * If a comparator function is provided, then it will be called for each item to test for whether or not that value should be emitted.\n *\n * If a comparator function is not provided, an equality check is used by default.\n *\n * @example <caption>A simple example with numbers</caption>\n * Observable.of(1, 1, 2, 2, 2, 1, 1, 2, 3, 3, 4)\n *   .distinctUntilChanged()\n *   .subscribe(x => console.log(x)); // 1, 2, 1, 2, 3, 4\n *\n * @example <caption>An example using a compare function</caption>\n * interface Person {\n *    age: number,\n *    name: string\n * }\n *\n * Observable.of<Person>(\n *     { age: 4, name: 'Foo'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo'})\n *     { age: 6, name: 'Foo'})\n *     .distinctUntilChanged((p: Person, q: Person) => p.name === q.name)\n *     .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo' }\n *\n * @see {@link distinct}\n * @see {@link distinctUntilKeyChanged}\n *\n * @param {function} [compare] Optional comparison function called to test if an item is distinct from the previous item in the source.\n * @return {Observable} An Observable that emits items from the source Observable with distinct values.\n * @method distinctUntilChanged\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DistinctUntilChangedSubscriber = /** @class */ (function (_super) {\n    __extends$49(DistinctUntilChangedSubscriber, _super);\n    function DistinctUntilChangedSubscriber(destination, compare, keySelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.hasKey = false;\n        if (typeof compare === 'function') {\n            _this.compare = compare;\n        }\n        return _this;\n    }\n    DistinctUntilChangedSubscriber.prototype.compare = function (x, y) {\n        return x === y;\n    };\n    DistinctUntilChangedSubscriber.prototype._next = function (value) {\n        var keySelector = this.keySelector;\n        var key = value;\n        if (keySelector) {\n            key = tryCatch(this.keySelector)(value);\n            if (key === errorObject) {\n                return this.destination.error(errorObject.e);\n            }\n        }\n        var result = false;\n        if (this.hasKey) {\n            result = tryCatch(this.compare)(this.key, key);\n            if (result === errorObject) {\n                return this.destination.error(errorObject.e);\n            }\n        }\n        else {\n            this.hasKey = true;\n        }\n        if (Boolean(result) === false) {\n            this.key = key;\n            this.destination.next(value);\n        }\n    };\n    return DistinctUntilChangedSubscriber;\n}(Subscriber));\n\n/* tslint:enable:max-line-length */\n/**\n * Returns an Observable that emits all items emitted by the source Observable that are distinct by comparison from the previous item,\n * using a property accessed by using the key provided to check if the two items are distinct.\n *\n * If a comparator function is provided, then it will be called for each item to test for whether or not that value should be emitted.\n *\n * If a comparator function is not provided, an equality check is used by default.\n *\n * @example <caption>An example comparing the name of persons</caption>\n *\n *  interface Person {\n *     age: number,\n *     name: string\n *  }\n *\n * Observable.of<Person>(\n *     { age: 4, name: 'Foo'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo'},\n *     { age: 6, name: 'Foo'})\n *     .distinctUntilKeyChanged('name')\n *     .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo' }\n *\n * @example <caption>An example comparing the first letters of the name</caption>\n *\n * interface Person {\n *     age: number,\n *     name: string\n *  }\n *\n * Observable.of<Person>(\n *     { age: 4, name: 'Foo1'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo2'},\n *     { age: 6, name: 'Foo3'})\n *     .distinctUntilKeyChanged('name', (x: string, y: string) => x.substring(0, 3) === y.substring(0, 3))\n *     .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo1' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo2' }\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n *\n * @param {string} key String key for object property lookup on each item.\n * @param {function} [compare] Optional comparison function called to test if an item is distinct from the previous item in the source.\n * @return {Observable} An Observable that emits items from the source Observable with distinct values based on the key specified.\n * @method distinctUntilKeyChanged\n * @owner Observable\n */\n\nvar __extends$50 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Filter items emitted by the source Observable by only emitting those that\n * satisfy a specified predicate.\n *\n * <span class=\"informal\">Like\n * [Array.prototype.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter),\n * it only emits a value from the source if it passes a criterion function.</span>\n *\n * <img src=\"./img/filter.png\" width=\"100%\">\n *\n * Similar to the well-known `Array.prototype.filter` method, this operator\n * takes values from the source Observable, passes them through a `predicate`\n * function and only emits those values that yielded `true`.\n *\n * @example <caption>Emit only click events whose target was a DIV element</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var clicksOnDivs = clicks.filter(ev => ev.target.tagName === 'DIV');\n * clicksOnDivs.subscribe(x => console.log(x));\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n * @see {@link distinctUntilKeyChanged}\n * @see {@link ignoreElements}\n * @see {@link partition}\n * @see {@link skip}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted, if `false` the value is not passed to the output\n * Observable. The `index` parameter is the number `i` for the i-th source\n * emission that has happened since the subscription, starting from the number\n * `0`.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable} An Observable of values from the source that were\n * allowed by the `predicate` function.\n * @method filter\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar FilterSubscriber = /** @class */ (function (_super) {\n    __extends$50(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    // the try catch block below is left specifically for\n    // optimization and perf reasons. a tryCatcher is not necessary here.\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber));\n\nvar __extends$51 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Perform a side effect for every emission on the source Observable, but return\n * an Observable that is identical to the source.\n *\n * <span class=\"informal\">Intercepts each emission on the source and runs a\n * function, but returns an output which is identical to the source as long as errors don't occur.</span>\n *\n * <img src=\"./img/do.png\" width=\"100%\">\n *\n * Returns a mirrored Observable of the source Observable, but modified so that\n * the provided Observer is called to perform a side effect for every value,\n * error, and completion emitted by the source. Any errors that are thrown in\n * the aforementioned Observer or handlers are safely sent down the error path\n * of the output Observable.\n *\n * This operator is useful for debugging your Observables for the correct values\n * or performing other side effects.\n *\n * Note: this is different to a `subscribe` on the Observable. If the Observable\n * returned by `do` is not subscribed, the side effects specified by the\n * Observer will never happen. `do` therefore simply spies on existing\n * execution, it does not trigger an execution to happen like `subscribe` does.\n *\n * @example <caption>Map every click to the clientX position of that click, while also logging the click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var positions = clicks\n *   .do(ev => console.log(ev))\n *   .map(ev => ev.clientX);\n * positions.subscribe(x => console.log(x));\n *\n * @see {@link map}\n * @see {@link subscribe}\n *\n * @param {Observer|function} [nextOrObserver] A normal Observer object or a\n * callback for `next`.\n * @param {function} [error] Callback for errors in the source.\n * @param {function} [complete] Callback for the completion of the source.\n * @return {Observable} An Observable identical to the source, but runs the\n * specified Observer or callback(s) for each item.\n * @name tap\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TapSubscriber = /** @class */ (function (_super) {\n    __extends$51(TapSubscriber, _super);\n    function TapSubscriber(destination, observerOrNext, error, complete) {\n        var _this = _super.call(this, destination) || this;\n        _this._tapNext = noop$1;\n        _this._tapError = noop$1;\n        _this._tapComplete = noop$1;\n        _this._tapError = error || noop$1;\n        _this._tapComplete = complete || noop$1;\n        if (isFunction(observerOrNext)) {\n            _this._context = _this;\n            _this._tapNext = observerOrNext;\n        }\n        else if (observerOrNext) {\n            _this._context = observerOrNext;\n            _this._tapNext = observerOrNext.next || noop$1;\n            _this._tapError = observerOrNext.error || noop$1;\n            _this._tapComplete = observerOrNext.complete || noop$1;\n        }\n        return _this;\n    }\n    TapSubscriber.prototype._next = function (value) {\n        try {\n            this._tapNext.call(this._context, value);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(value);\n    };\n    TapSubscriber.prototype._error = function (err) {\n        try {\n            this._tapError.call(this._context, err);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.error(err);\n    };\n    TapSubscriber.prototype._complete = function () {\n        try {\n            this._tapComplete.call(this._context);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        return this.destination.complete();\n    };\n    return TapSubscriber;\n}(Subscriber));\n\n/**\n * If the source observable completes without emitting a value, it will emit\n * an error. The error will be created at that time by the optional\n * `errorFactory` argument, otherwise, the error will be {@link ErrorEmpty}.\n *\n * @example\n *\n * const click$ = fromEvent(button, 'click');\n *\n * clicks$.pipe(\n *   takeUntil(timer(1000)),\n *   throwIfEmpty(\n *     () => new Error('the button was not clicked within 1 second')\n *   ),\n * )\n * .subscribe({\n *   next() { console.log('The button was clicked'); },\n *   error(err) { console.error(err); },\n * });\n * @param {Function} [errorFactory] A factory function called to produce the\n * error to be thrown when the source observable completes without emitting a\n * value.\n */\n\nvar __extends$52 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits only the first `count` values emitted by the source Observable.\n *\n * <span class=\"informal\">Takes the first `count` values from the source, then\n * completes.</span>\n *\n * <img src=\"./img/take.png\" width=\"100%\">\n *\n * `take` returns an Observable that emits only the first `count` values emitted\n * by the source Observable. If the source emits fewer than `count` values then\n * all of its values are emitted. After that, it completes, regardless if the\n * source completes.\n *\n * @example <caption>Take the first 5 seconds of an infinite 1-second interval Observable</caption>\n * var interval = Rx.Observable.interval(1000);\n * var five = interval.take(5);\n * five.subscribe(x => console.log(x));\n *\n * @see {@link takeLast}\n * @see {@link takeUntil}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @throws {ArgumentOutOfRangeError} When using `take(i)`, it delivers an\n * ArgumentOutOrRangeError to the Observer's `error` callback if `i < 0`.\n *\n * @param {number} count The maximum number of `next` values to emit.\n * @return {Observable<T>} An Observable that emits only the first `count`\n * values emitted by the source Observable, or all of the values from the source\n * if the source emits fewer than `count` values.\n * @method take\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TakeSubscriber = /** @class */ (function (_super) {\n    __extends$52(TakeSubscriber, _super);\n    function TakeSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.count = 0;\n        return _this;\n    }\n    TakeSubscriber.prototype._next = function (value) {\n        var total = this.total;\n        var count = ++this.count;\n        if (count <= total) {\n            this.destination.next(value);\n            if (count === total) {\n                this.destination.complete();\n                this.unsubscribe();\n            }\n        }\n    };\n    return TakeSubscriber;\n}(Subscriber));\n\n/**\n * Emits the single value at the specified `index` in a sequence of emissions\n * from the source Observable.\n *\n * <span class=\"informal\">Emits only the i-th value, then completes.</span>\n *\n * <img src=\"./img/elementAt.png\" width=\"100%\">\n *\n * `elementAt` returns an Observable that emits the item at the specified\n * `index` in the source Observable, or a default value if that `index` is out\n * of range and the `default` argument is provided. If the `default` argument is\n * not given and the `index` is out of range, the output Observable will emit an\n * `ArgumentOutOfRangeError` error.\n *\n * @example <caption>Emit only the third click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.elementAt(2);\n * result.subscribe(x => console.log(x));\n *\n * // Results in:\n * // click 1 = nothing\n * // click 2 = nothing\n * // click 3 = MouseEvent object logged to console\n *\n * @see {@link first}\n * @see {@link last}\n * @see {@link skip}\n * @see {@link single}\n * @see {@link take}\n *\n * @throws {ArgumentOutOfRangeError} When using `elementAt(i)`, it delivers an\n * ArgumentOutOrRangeError to the Observer's `error` callback if `i < 0` or the\n * Observable has completed before emitting the i-th `next` notification.\n *\n * @param {number} index Is the number `i` for the i-th source emission that has\n * happened since the subscription, starting from the number `0`.\n * @param {T} [defaultValue] The default value returned for missing indices.\n * @return {Observable} An Observable that emits a single item, if it is found.\n * Otherwise, will emit the default value if given. If not, then emits an error.\n * @method elementAt\n * @owner Observable\n */\n\nvar __extends$53 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that emits whether or not every item of the source satisfies the condition specified.\n *\n * @example <caption>A simple example emitting true if all elements are less than 5, false otherwise</caption>\n *  Observable.of(1, 2, 3, 4, 5, 6)\n *     .every(x => x < 5)\n *     .subscribe(x => console.log(x)); // -> false\n *\n * @param {function} predicate A function for determining if an item meets a specified condition.\n * @param {any} [thisArg] Optional object to use for `this` in the callback.\n * @return {Observable} An Observable of booleans that determines if all items of the source Observable meet the condition specified.\n * @method every\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar EverySubscriber = /** @class */ (function (_super) {\n    __extends$53(EverySubscriber, _super);\n    function EverySubscriber(destination, predicate, thisArg, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.source = source;\n        _this.index = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    EverySubscriber.prototype.notifyComplete = function (everyValueMatch) {\n        this.destination.next(everyValueMatch);\n        this.destination.complete();\n    };\n    EverySubscriber.prototype._next = function (value) {\n        var result = false;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.index++, this.source);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (!result) {\n            this.notifyComplete(false);\n        }\n    };\n    EverySubscriber.prototype._complete = function () {\n        this.notifyComplete(true);\n    };\n    return EverySubscriber;\n}(Subscriber));\n\nvar __extends$54 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Converts a higher-order Observable into a first-order Observable by dropping\n * inner Observables while the previous inner Observable has not yet completed.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables by dropping the\n * next inner Observables while the current inner is still executing.</span>\n *\n * <img src=\"./img/exhaust.png\" width=\"100%\">\n *\n * `exhaust` subscribes to an Observable that emits Observables, also known as a\n * higher-order Observable. Each time it observes one of these emitted inner\n * Observables, the output Observable begins emitting the items emitted by that\n * inner Observable. So far, it behaves like {@link mergeAll}. However,\n * `exhaust` ignores every new inner Observable if the previous Observable has\n * not yet completed. Once that one completes, it will accept and flatten the\n * next inner Observable and repeat this process.\n *\n * @example <caption>Run a finite timer for each click, only if there is no currently active timer</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var higherOrder = clicks.map((ev) => Rx.Observable.interval(1000).take(5));\n * var result = higherOrder.exhaust();\n * result.subscribe(x => console.log(x));\n *\n * @see {@link combineAll}\n * @see {@link concatAll}\n * @see {@link switch}\n * @see {@link mergeAll}\n * @see {@link exhaustMap}\n * @see {@link zipAll}\n *\n * @return {Observable} An Observable that takes a source of Observables and propagates the first observable\n * exclusively until it completes before subscribing to the next.\n * @method exhaust\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SwitchFirstSubscriber = /** @class */ (function (_super) {\n    __extends$54(SwitchFirstSubscriber, _super);\n    function SwitchFirstSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasCompleted = false;\n        _this.hasSubscription = false;\n        return _this;\n    }\n    SwitchFirstSubscriber.prototype._next = function (value) {\n        if (!this.hasSubscription) {\n            this.hasSubscription = true;\n            this.add(subscribeToResult(this, value));\n        }\n    };\n    SwitchFirstSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (!this.hasSubscription) {\n            this.destination.complete();\n        }\n    };\n    SwitchFirstSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.remove(innerSub);\n        this.hasSubscription = false;\n        if (this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return SwitchFirstSubscriber;\n}(OuterSubscriber));\n\nvar __extends$55 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable only if the previous projected Observable has completed.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link exhaust}.</span>\n *\n * <img src=\"./img/exhaustMap.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. When it projects a source value to\n * an Observable, the output Observable begins emitting the items emitted by\n * that projected Observable. However, `exhaustMap` ignores every new projected\n * Observable if the previous projected Observable has not yet completed. Once\n * that one completes, it will accept and flatten the next projected Observable\n * and repeat this process.\n *\n * @example <caption>Run a finite timer for each click, only if there is no currently active timer</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.exhaustMap((ev) => Rx.Observable.interval(1000).take(5));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link concatMap}\n * @see {@link exhaust}\n * @see {@link mergeMap}\n * @see {@link switchMap}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @return {Observable} An Observable containing projected Observables\n * of each item of the source, ignoring projected Observables that start before\n * their preceding Observable has completed.\n * @method exhaustMap\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ExhaustMapSubscriber = /** @class */ (function (_super) {\n    __extends$55(ExhaustMapSubscriber, _super);\n    function ExhaustMapSubscriber(destination, project) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.hasSubscription = false;\n        _this.hasCompleted = false;\n        _this.index = 0;\n        return _this;\n    }\n    ExhaustMapSubscriber.prototype._next = function (value) {\n        if (!this.hasSubscription) {\n            this.tryNext(value);\n        }\n    };\n    ExhaustMapSubscriber.prototype.tryNext = function (value) {\n        var index = this.index++;\n        var destination = this.destination;\n        try {\n            var result = this.project(value, index);\n            this.hasSubscription = true;\n            this.add(subscribeToResult(this, result, value, index));\n        }\n        catch (err) {\n            destination.error(err);\n        }\n    };\n    ExhaustMapSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (!this.hasSubscription) {\n            this.destination.complete();\n        }\n    };\n    ExhaustMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    ExhaustMapSubscriber.prototype.notifyError = function (err) {\n        this.destination.error(err);\n    };\n    ExhaustMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.remove(innerSub);\n        this.hasSubscription = false;\n        if (this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return ExhaustMapSubscriber;\n}(OuterSubscriber));\n\nvar __extends$56 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Recursively projects each source value to an Observable which is merged in\n * the output Observable.\n *\n * <span class=\"informal\">It's similar to {@link mergeMap}, but applies the\n * projection function to every source value as well as every output value.\n * It's recursive.</span>\n *\n * <img src=\"./img/expand.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an Observable, and then merging those resulting Observables and\n * emitting the results of this merger. *Expand* will re-emit on the output\n * Observable every source value. Then, each output value is given to the\n * `project` function which returns an inner Observable to be merged on the\n * output Observable. Those output values resulting from the projection are also\n * given to the `project` function to produce new output values. This is how\n * *expand* behaves recursively.\n *\n * @example <caption>Start emitting the powers of two on every click, at most 10 of them</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var powersOfTwo = clicks\n *   .mapTo(1)\n *   .expand(x => Rx.Observable.of(2 * x).delay(1000))\n *   .take(10);\n * powersOfTwo.subscribe(x => console.log(x));\n *\n * @see {@link mergeMap}\n * @see {@link mergeScan}\n *\n * @param {function(value: T, index: number) => Observable} project A function\n * that, when applied to an item emitted by the source or the output Observable,\n * returns an Observable.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @param {Scheduler} [scheduler=null] The IScheduler to use for subscribing to\n * each projected inner Observable.\n * @return {Observable} An Observable that emits the source values and also\n * result of applying the projection function to each value emitted on the\n * output Observable and and merging the results of the Observables obtained\n * from this transformation.\n * @method expand\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ExpandSubscriber = /** @class */ (function (_super) {\n    __extends$56(ExpandSubscriber, _super);\n    function ExpandSubscriber(destination, project, concurrent, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.concurrent = concurrent;\n        _this.scheduler = scheduler;\n        _this.index = 0;\n        _this.active = 0;\n        _this.hasCompleted = false;\n        if (concurrent < Number.POSITIVE_INFINITY) {\n            _this.buffer = [];\n        }\n        return _this;\n    }\n    ExpandSubscriber.dispatch = function (arg) {\n        var subscriber = arg.subscriber, result = arg.result, value = arg.value, index = arg.index;\n        subscriber.subscribeToProjection(result, value, index);\n    };\n    ExpandSubscriber.prototype._next = function (value) {\n        var destination = this.destination;\n        if (destination.closed) {\n            this._complete();\n            return;\n        }\n        var index = this.index++;\n        if (this.active < this.concurrent) {\n            destination.next(value);\n            var result = tryCatch(this.project)(value, index);\n            if (result === errorObject) {\n                destination.error(errorObject.e);\n            }\n            else if (!this.scheduler) {\n                this.subscribeToProjection(result, value, index);\n            }\n            else {\n                var state = { subscriber: this, result: result, value: value, index: index };\n                this.add(this.scheduler.schedule(ExpandSubscriber.dispatch, 0, state));\n            }\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    ExpandSubscriber.prototype.subscribeToProjection = function (result, value, index) {\n        this.active++;\n        this.add(subscribeToResult(this, result, value, index));\n    };\n    ExpandSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.hasCompleted && this.active === 0) {\n            this.destination.complete();\n        }\n    };\n    ExpandSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this._next(innerValue);\n    };\n    ExpandSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer && buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        if (this.hasCompleted && this.active === 0) {\n            this.destination.complete();\n        }\n    };\n    return ExpandSubscriber;\n}(OuterSubscriber));\n\nvar __extends$57 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that mirrors the source Observable, but will call a specified function when\n * the source terminates on complete or error.\n * @param {function} callback Function to be called when source terminates.\n * @return {Observable} An Observable that mirrors the source, but will call the specified function on termination.\n * @method finally\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar FinallySubscriber = /** @class */ (function (_super) {\n    __extends$57(FinallySubscriber, _super);\n    function FinallySubscriber(destination, callback) {\n        var _this = _super.call(this, destination) || this;\n        _this.add(new Subscription(callback));\n        return _this;\n    }\n    return FinallySubscriber;\n}(Subscriber));\n\nvar __extends$58 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits only the first value emitted by the source Observable that meets some\n * condition.\n *\n * <span class=\"informal\">Finds the first value that passes some test and emits\n * that.</span>\n *\n * <img src=\"./img/find.png\" width=\"100%\">\n *\n * `find` searches for the first item in the source Observable that matches the\n * specified condition embodied by the `predicate`, and returns the first\n * occurrence in the source. Unlike {@link first}, the `predicate` is required\n * in `find`, and does not emit an error if a valid value is not found.\n *\n * @example <caption>Find and emit the first click that happens on a DIV element</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.find(ev => ev.target.tagName === 'DIV');\n * result.subscribe(x => console.log(x));\n *\n * @see {@link filter}\n * @see {@link first}\n * @see {@link findIndex}\n * @see {@link take}\n *\n * @param {function(value: T, index: number, source: Observable<T>): boolean} predicate\n * A function called with each item to test for condition matching.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable<T>} An Observable of the first item that matches the\n * condition.\n * @method find\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar FindValueSubscriber = /** @class */ (function (_super) {\n    __extends$58(FindValueSubscriber, _super);\n    function FindValueSubscriber(destination, predicate, source, yieldIndex, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.source = source;\n        _this.yieldIndex = yieldIndex;\n        _this.thisArg = thisArg;\n        _this.index = 0;\n        return _this;\n    }\n    FindValueSubscriber.prototype.notifyComplete = function (value) {\n        var destination = this.destination;\n        destination.next(value);\n        destination.complete();\n    };\n    FindValueSubscriber.prototype._next = function (value) {\n        var _a = this, predicate = _a.predicate, thisArg = _a.thisArg;\n        var index = this.index++;\n        try {\n            var result = predicate.call(thisArg || this, value, index, this.source);\n            if (result) {\n                this.notifyComplete(this.yieldIndex ? index : value);\n            }\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    FindValueSubscriber.prototype._complete = function () {\n        this.notifyComplete(this.yieldIndex ? -1 : undefined);\n    };\n    return FindValueSubscriber;\n}(Subscriber));\n\n/**\n * Emits only the index of the first value emitted by the source Observable that\n * meets some condition.\n *\n * <span class=\"informal\">It's like {@link find}, but emits the index of the\n * found value, not the value itself.</span>\n *\n * <img src=\"./img/findIndex.png\" width=\"100%\">\n *\n * `findIndex` searches for the first item in the source Observable that matches\n * the specified condition embodied by the `predicate`, and returns the\n * (zero-based) index of the first occurrence in the source. Unlike\n * {@link first}, the `predicate` is required in `findIndex`, and does not emit\n * an error if a valid value is not found.\n *\n * @example <caption>Emit the index of first click that happens on a DIV element</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.findIndex(ev => ev.target.tagName === 'DIV');\n * result.subscribe(x => console.log(x));\n *\n * @see {@link filter}\n * @see {@link find}\n * @see {@link first}\n * @see {@link take}\n *\n * @param {function(value: T, index: number, source: Observable<T>): boolean} predicate\n * A function called with each item to test for condition matching.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable} An Observable of the index of the first item that\n * matches the condition.\n * @method find\n * @owner Observable\n */\n\n/**\n * Emits only the first value (or the first value that meets some condition)\n * emitted by the source Observable.\n *\n * <span class=\"informal\">Emits only the first value. Or emits only the first\n * value that passes some test.</span>\n *\n * <img src=\"./img/first.png\" width=\"100%\">\n *\n * If called with no arguments, `first` emits the first value of the source\n * Observable, then completes. If called with a `predicate` function, `first`\n * emits the first value of the source that matches the specified condition. It\n * may also take a `resultSelector` function to produce the output value from\n * the input value, and a `defaultValue` to emit in case the source completes\n * before it is able to emit a valid value. Throws an error if `defaultValue`\n * was not provided and a matching element is not found.\n *\n * @example <caption>Emit only the first click that happens on the DOM</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.first();\n * result.subscribe(x => console.log(x));\n *\n * @example <caption>Emits the first click that happens on a DIV</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.first(ev => ev.target.tagName === 'DIV');\n * result.subscribe(x => console.log(x));\n *\n * @see {@link filter}\n * @see {@link find}\n * @see {@link take}\n *\n * @throws {EmptyError} Delivers an EmptyError to the Observer's `error`\n * callback if the Observable completes before any `next` notification was sent.\n *\n * @param {function(value: T, index: number, source: Observable<T>): boolean} [predicate]\n * An optional function called with each item to test for condition matching.\n * @param {R} [defaultValue] The default value emitted in case no valid value\n * was found on the source.\n * @return {Observable<T|R>} An Observable of the first item that matches the\n * condition.\n * @method first\n * @owner Observable\n */\n\nvar __extends$59 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Ignores all items emitted by the source Observable and only passes calls of `complete` or `error`.\n *\n * <img src=\"./img/ignoreElements.png\" width=\"100%\">\n *\n * @return {Observable} An empty Observable that only calls `complete`\n * or `error`, based on which one is called by the source Observable.\n * @method ignoreElements\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar IgnoreElementsSubscriber = /** @class */ (function (_super) {\n    __extends$59(IgnoreElementsSubscriber, _super);\n    function IgnoreElementsSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    IgnoreElementsSubscriber.prototype._next = function (unused) {\n        // Do nothing\n    };\n    return IgnoreElementsSubscriber;\n}(Subscriber));\n\nvar __extends$60 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar IsEmptySubscriber = /** @class */ (function (_super) {\n    __extends$60(IsEmptySubscriber, _super);\n    function IsEmptySubscriber(destination) {\n        return _super.call(this, destination) || this;\n    }\n    IsEmptySubscriber.prototype.notifyComplete = function (isEmpty) {\n        var destination = this.destination;\n        destination.next(isEmpty);\n        destination.complete();\n    };\n    IsEmptySubscriber.prototype._next = function (value) {\n        this.notifyComplete(false);\n    };\n    IsEmptySubscriber.prototype._complete = function () {\n        this.notifyComplete(true);\n    };\n    return IsEmptySubscriber;\n}(Subscriber));\n\nvar __extends$61 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits only the last `count` values emitted by the source Observable.\n *\n * <span class=\"informal\">Remembers the latest `count` values, then emits those\n * only when the source completes.</span>\n *\n * <img src=\"./img/takeLast.png\" width=\"100%\">\n *\n * `takeLast` returns an Observable that emits at most the last `count` values\n * emitted by the source Observable. If the source emits fewer than `count`\n * values then all of its values are emitted. This operator must wait until the\n * `complete` notification emission from the source in order to emit the `next`\n * values on the output Observable, because otherwise it is impossible to know\n * whether or not more values will be emitted on the source. For this reason,\n * all values are emitted synchronously, followed by the complete notification.\n *\n * @example <caption>Take the last 3 values of an Observable with many values</caption>\n * var many = Rx.Observable.range(1, 100);\n * var lastThree = many.pipe(takeLast(3));\n * lastThree.subscribe(x => console.log(x));\n *\n * @see {@link take}\n * @see {@link takeUntil}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @throws {ArgumentOutOfRangeError} When using `takeLast(i)`, it delivers an\n * ArgumentOutOrRangeError to the Observer's `error` callback if `i < 0`.\n *\n * @param {number} count The maximum number of values to emit from the end of\n * the sequence of values emitted by the source Observable.\n * @return {Observable<T>} An Observable that emits at most the last count\n * values emitted by the source Observable.\n * @method takeLast\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TakeLastSubscriber = /** @class */ (function (_super) {\n    __extends$61(TakeLastSubscriber, _super);\n    function TakeLastSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.ring = new Array();\n        _this.count = 0;\n        return _this;\n    }\n    TakeLastSubscriber.prototype._next = function (value) {\n        var ring = this.ring;\n        var total = this.total;\n        var count = this.count++;\n        if (ring.length < total) {\n            ring.push(value);\n        }\n        else {\n            var index = count % total;\n            ring[index] = value;\n        }\n    };\n    TakeLastSubscriber.prototype._complete = function () {\n        var destination = this.destination;\n        var count = this.count;\n        if (count > 0) {\n            var total = this.count >= this.total ? this.total : this.count;\n            var ring = this.ring;\n            for (var i = 0; i < total; i++) {\n                var idx = (count++) % total;\n                destination.next(ring[idx]);\n            }\n        }\n        destination.complete();\n    };\n    return TakeLastSubscriber;\n}(Subscriber));\n\n/**\n * Returns an Observable that emits only the last item emitted by the source Observable.\n * It optionally takes a predicate function as a parameter, in which case, rather than emitting\n * the last item from the source Observable, the resulting Observable will emit the last item\n * from the source Observable that satisfies the predicate.\n *\n * <img src=\"./img/last.png\" width=\"100%\">\n *\n * @throws {EmptyError} Delivers an EmptyError to the Observer's `error`\n * callback if the Observable completes before any `next` notification was sent.\n * @param {function} [predicate] - The condition any source emitted item has to satisfy.\n * @param {any} [defaultValue] - An optional default value to provide if last\n * predicate isn't met or no values were emitted.\n * @return {Observable} An Observable that emits only the last item satisfying the given condition\n * from the source, or an NoSuchElementException if no such items are emitted.\n * @throws - Throws if no items that match the predicate are emitted by the source Observable.\n */\n\nvar __extends$62 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits the given constant value on the output Observable every time the source\n * Observable emits a value.\n *\n * <span class=\"informal\">Like {@link map}, but it maps every source value to\n * the same output value every time.</span>\n *\n * <img src=\"./img/mapTo.png\" width=\"100%\">\n *\n * Takes a constant `value` as argument, and emits that whenever the source\n * Observable emits a value. In other words, ignores the actual source value,\n * and simply uses the emission moment to know when to emit the given `value`.\n *\n * @example <caption>Map every click to the string 'Hi'</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var greetings = clicks.mapTo('Hi');\n * greetings.subscribe(x => console.log(x));\n *\n * @see {@link map}\n *\n * @param {any} value The value to map each source value to.\n * @return {Observable} An Observable that emits the given `value` every time\n * the source Observable emits something.\n * @method mapTo\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MapToSubscriber = /** @class */ (function (_super) {\n    __extends$62(MapToSubscriber, _super);\n    function MapToSubscriber(destination, value) {\n        var _this = _super.call(this, destination) || this;\n        _this.value = value;\n        return _this;\n    }\n    MapToSubscriber.prototype._next = function (x) {\n        this.destination.next(this.value);\n    };\n    return MapToSubscriber;\n}(Subscriber));\n\nvar __extends$63 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Represents all of the notifications from the source Observable as `next`\n * emissions marked with their original types within {@link Notification}\n * objects.\n *\n * <span class=\"informal\">Wraps `next`, `error` and `complete` emissions in\n * {@link Notification} objects, emitted as `next` on the output Observable.\n * </span>\n *\n * <img src=\"./img/materialize.png\" width=\"100%\">\n *\n * `materialize` returns an Observable that emits a `next` notification for each\n * `next`, `error`, or `complete` emission of the source Observable. When the\n * source Observable emits `complete`, the output Observable will emit `next` as\n * a Notification of type \"complete\", and then it will emit `complete` as well.\n * When the source Observable emits `error`, the output will emit `next` as a\n * Notification of type \"error\", and then `complete`.\n *\n * This operator is useful for producing metadata of the source Observable, to\n * be consumed as `next` emissions. Use it in conjunction with\n * {@link dematerialize}.\n *\n * @example <caption>Convert a faulty Observable to an Observable of Notifications</caption>\n * var letters = Rx.Observable.of('a', 'b', 13, 'd');\n * var upperCase = letters.map(x => x.toUpperCase());\n * var materialized = upperCase.materialize();\n * materialized.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // - Notification {kind: \"N\", value: \"A\", error: undefined, hasValue: true}\n * // - Notification {kind: \"N\", value: \"B\", error: undefined, hasValue: true}\n * // - Notification {kind: \"E\", value: undefined, error: TypeError:\n * //   x.toUpperCase is not a function at MapSubscriber.letters.map.x\n * //   [as project] (http://1, hasValue: false}\n *\n * @see {@link Notification}\n * @see {@link dematerialize}\n *\n * @return {Observable<Notification<T>>} An Observable that emits\n * {@link Notification} objects that wrap the original emissions from the source\n * Observable with metadata.\n * @method materialize\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MaterializeSubscriber = /** @class */ (function (_super) {\n    __extends$63(MaterializeSubscriber, _super);\n    function MaterializeSubscriber(destination) {\n        return _super.call(this, destination) || this;\n    }\n    MaterializeSubscriber.prototype._next = function (value) {\n        this.destination.next(Notification.createNext(value));\n    };\n    MaterializeSubscriber.prototype._error = function (err) {\n        var destination = this.destination;\n        destination.next(Notification.createError(err));\n        destination.complete();\n    };\n    MaterializeSubscriber.prototype._complete = function () {\n        var destination = this.destination;\n        destination.next(Notification.createComplete());\n        destination.complete();\n    };\n    return MaterializeSubscriber;\n}(Subscriber));\n\nvar __extends$64 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Applies an accumulator function over the source Observable, and returns each\n * intermediate result, with an optional seed value.\n *\n * <span class=\"informal\">It's like {@link reduce}, but emits the current\n * accumulation whenever the source emits a value.</span>\n *\n * <img src=\"./img/scan.png\" width=\"100%\">\n *\n * Combines together all values emitted on the source, using an accumulator\n * function that knows how to join a new source value into the accumulation from\n * the past. Is similar to {@link reduce}, but emits the intermediate\n * accumulations.\n *\n * Returns an Observable that applies a specified `accumulator` function to each\n * item emitted by the source Observable. If a `seed` value is specified, then\n * that value will be used as the initial value for the accumulator. If no seed\n * value is specified, the first item of the source is used as the seed.\n *\n * @example <caption>Count the number of click events</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var ones = clicks.mapTo(1);\n * var seed = 0;\n * var count = ones.scan((acc, one) => acc + one, seed);\n * count.subscribe(x => console.log(x));\n *\n * @see {@link expand}\n * @see {@link mergeScan}\n * @see {@link reduce}\n *\n * @param {function(acc: R, value: T, index: number): R} accumulator\n * The accumulator function called on each source value.\n * @param {T|R} [seed] The initial accumulation value.\n * @return {Observable<R>} An observable of the accumulated values.\n * @method scan\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ScanSubscriber = /** @class */ (function (_super) {\n    __extends$64(ScanSubscriber, _super);\n    function ScanSubscriber(destination, accumulator, _seed, hasSeed) {\n        var _this = _super.call(this, destination) || this;\n        _this.accumulator = accumulator;\n        _this._seed = _seed;\n        _this.hasSeed = hasSeed;\n        _this.index = 0;\n        return _this;\n    }\n    Object.defineProperty(ScanSubscriber.prototype, \"seed\", {\n        get: function () {\n            return this._seed;\n        },\n        set: function (value) {\n            this.hasSeed = true;\n            this._seed = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ScanSubscriber.prototype._next = function (value) {\n        if (!this.hasSeed) {\n            this.seed = value;\n            this.destination.next(value);\n        }\n        else {\n            return this._tryNext(value);\n        }\n    };\n    ScanSubscriber.prototype._tryNext = function (value) {\n        var index = this.index++;\n        var result;\n        try {\n            result = this.accumulator(this.seed, value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n        this.seed = result;\n        this.destination.next(result);\n    };\n    return ScanSubscriber;\n}(Subscriber));\n\n/* tslint:enable:max-line-length */\n/**\n * Applies an accumulator function over the source Observable, and returns the\n * accumulated result when the source completes, given an optional seed value.\n *\n * <span class=\"informal\">Combines together all values emitted on the source,\n * using an accumulator function that knows how to join a new source value into\n * the accumulation from the past.</span>\n *\n * <img src=\"./img/reduce.png\" width=\"100%\">\n *\n * Like\n * [Array.prototype.reduce()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce),\n * `reduce` applies an `accumulator` function against an accumulation and each\n * value of the source Observable (from the past) to reduce it to a single\n * value, emitted on the output Observable. Note that `reduce` will only emit\n * one value, only when the source Observable completes. It is equivalent to\n * applying operator {@link scan} followed by operator {@link last}.\n *\n * Returns an Observable that applies a specified `accumulator` function to each\n * item emitted by the source Observable. If a `seed` value is specified, then\n * that value will be used as the initial value for the accumulator. If no seed\n * value is specified, the first item of the source is used as the seed.\n *\n * @example <caption>Count the number of click events that happened in 5 seconds</caption>\n * var clicksInFiveSeconds = Rx.Observable.fromEvent(document, 'click')\n *   .takeUntil(Rx.Observable.interval(5000));\n * var ones = clicksInFiveSeconds.mapTo(1);\n * var seed = 0;\n * var count = ones.reduce((acc, one) => acc + one, seed);\n * count.subscribe(x => console.log(x));\n *\n * @see {@link count}\n * @see {@link expand}\n * @see {@link mergeScan}\n * @see {@link scan}\n *\n * @param {function(acc: R, value: T, index: number): R} accumulator The accumulator function\n * called on each source value.\n * @param {R} [seed] The initial accumulation value.\n * @return {Observable<R>} An Observable that emits a single value that is the\n * result of accumulating the values emitted by the source Observable.\n * @method reduce\n * @owner Observable\n */\n\n/**\n * The Max operator operates on an Observable that emits numbers (or items that can be compared with a provided function),\n * and when source Observable completes it emits a single item: the item with the largest value.\n *\n * <img src=\"./img/max.png\" width=\"100%\">\n *\n * @example <caption>Get the maximal value of a series of numbers</caption>\n * Rx.Observable.of(5, 4, 7, 2, 8)\n *   .max()\n *   .subscribe(x => console.log(x)); // -> 8\n *\n * @example <caption>Use a comparer function to get the maximal item</caption>\n * interface Person {\n *   age: number,\n *   name: string\n * }\n * Observable.of<Person>({age: 7, name: 'Foo'},\n *                       {age: 5, name: 'Bar'},\n *                       {age: 9, name: 'Beer'})\n *           .max<Person>((a: Person, b: Person) => a.age < b.age ? -1 : 1)\n *           .subscribe((x: Person) => console.log(x.name)); // -> 'Beer'\n * }\n *\n * @see {@link min}\n *\n * @param {Function} [comparer] - Optional comparer function that it will use instead of its default to compare the\n * value of two items.\n * @return {Observable} An Observable that emits item with the largest value.\n * @method max\n * @owner Observable\n */\n\nvar __read$10 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$10 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$10(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * @deprecated Deprecated in favor of static merge.\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to the same Observable which is merged multiple\n * times in the output Observable.\n *\n * <span class=\"informal\">It's like {@link mergeMap}, but maps each value always\n * to the same inner Observable.</span>\n *\n * <img src=\"./img/mergeMapTo.png\" width=\"100%\">\n *\n * Maps each source value to the given Observable `innerObservable` regardless\n * of the source value, and then merges those resulting Observables into one\n * single Observable, which is the output Observable.\n *\n * @example <caption>For each click event, start an interval Observable ticking every 1 second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.mergeMapTo(Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link concatMapTo}\n * @see {@link merge}\n * @see {@link mergeAll}\n * @see {@link mergeMap}\n * @see {@link mergeScan}\n * @see {@link switchMapTo}\n *\n * @param {ObservableInput} innerObservable An Observable to replace each value from\n * the source Observable.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @return {Observable} An Observable that emits items from the given\n * `innerObservable`\n * @method mergeMapTo\n * @owner Observable\n */\n\nvar __extends$65 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Applies an accumulator function over the source Observable where the\n * accumulator function itself returns an Observable, then each intermediate\n * Observable returned is merged into the output Observable.\n *\n * <span class=\"informal\">It's like {@link scan}, but the Observables returned\n * by the accumulator are merged into the outer Observable.</span>\n *\n * @example <caption>Count the number of click events</caption>\n * const click$ = Rx.Observable.fromEvent(document, 'click');\n * const one$ = click$.mapTo(1);\n * const seed = 0;\n * const count$ = one$.mergeScan((acc, one) => Rx.Observable.of(acc + one), seed);\n * count$.subscribe(x => console.log(x));\n *\n * // Results:\n * 1\n * 2\n * 3\n * 4\n * // ...and so on for each click\n *\n * @param {function(acc: R, value: T): Observable<R>} accumulator\n * The accumulator function called on each source value.\n * @param seed The initial accumulation value.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of\n * input Observables being subscribed to concurrently.\n * @return {Observable<R>} An observable of the accumulated values.\n * @method mergeScan\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MergeScanSubscriber = /** @class */ (function (_super) {\n    __extends$65(MergeScanSubscriber, _super);\n    function MergeScanSubscriber(destination, accumulator, acc, concurrent) {\n        var _this = _super.call(this, destination) || this;\n        _this.accumulator = accumulator;\n        _this.acc = acc;\n        _this.concurrent = concurrent;\n        _this.hasValue = false;\n        _this.hasCompleted = false;\n        _this.buffer = [];\n        _this.active = 0;\n        _this.index = 0;\n        return _this;\n    }\n    MergeScanSubscriber.prototype._next = function (value) {\n        if (this.active < this.concurrent) {\n            var index = this.index++;\n            var ish = tryCatch(this.accumulator)(this.acc, value);\n            var destination = this.destination;\n            if (ish === errorObject) {\n                destination.error(errorObject.e);\n            }\n            else {\n                this.active++;\n                this._innerSub(ish, value, index);\n            }\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    MergeScanSubscriber.prototype._innerSub = function (ish, value, index) {\n        this.add(subscribeToResult(this, ish, value, index));\n    };\n    MergeScanSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            if (this.hasValue === false) {\n                this.destination.next(this.acc);\n            }\n            this.destination.complete();\n        }\n    };\n    MergeScanSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var destination = this.destination;\n        this.acc = innerValue;\n        this.hasValue = true;\n        destination.next(innerValue);\n    };\n    MergeScanSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            if (this.hasValue === false) {\n                this.destination.next(this.acc);\n            }\n            this.destination.complete();\n        }\n    };\n    return MergeScanSubscriber;\n}(OuterSubscriber));\n\n/**\n * The Min operator operates on an Observable that emits numbers (or items that can be compared with a provided function),\n * and when source Observable completes it emits a single item: the item with the smallest value.\n *\n * <img src=\"./img/min.png\" width=\"100%\">\n *\n * @example <caption>Get the minimal value of a series of numbers</caption>\n * Rx.Observable.of(5, 4, 7, 2, 8)\n *   .min()\n *   .subscribe(x => console.log(x)); // -> 2\n *\n * @example <caption>Use a comparer function to get the minimal item</caption>\n * interface Person {\n *   age: number,\n *   name: string\n * }\n * Observable.of<Person>({age: 7, name: 'Foo'},\n *                       {age: 5, name: 'Bar'},\n *                       {age: 9, name: 'Beer'})\n *           .min<Person>( (a: Person, b: Person) => a.age < b.age ? -1 : 1)\n *           .subscribe((x: Person) => console.log(x.name)); // -> 'Bar'\n * }\n *\n * @see {@link max}\n *\n * @param {Function} [comparer] - Optional comparer function that it will use instead of its default to compare the\n * value of two items.\n * @return {Observable<R>} An Observable that emits item with the smallest value.\n * @method min\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Returns an Observable that emits the results of invoking a specified selector on items\n * emitted by a ConnectableObservable that shares a single subscription to the underlying stream.\n *\n * <img src=\"./img/multicast.png\" width=\"100%\">\n *\n * @param {Function|Subject} subjectOrSubjectFactory - Factory function to create an intermediate subject through\n * which the source sequence's elements will be multicast to the selector function\n * or Subject to push source elements into.\n * @param {Function} [selector] - Optional selector function that can use the multicasted source stream\n * as many times as needed, without causing multiple subscriptions to the source stream.\n * Subscribers to the given source will receive all notifications of the source from the\n * time of the subscription forward.\n * @return {Observable} An Observable that emits the results of invoking the selector\n * on the items emitted by a `ConnectableObservable` that shares a single subscription to\n * the underlying stream.\n * @method multicast\n * @owner Observable\n */\nfunction multicast(subjectOrSubjectFactory, selector) {\n    return function multicastOperatorFunction(source) {\n        var subjectFactory;\n        if (typeof subjectOrSubjectFactory === 'function') {\n            subjectFactory = subjectOrSubjectFactory;\n        }\n        else {\n            subjectFactory = function subjectFactory() {\n                return subjectOrSubjectFactory;\n            };\n        }\n        if (typeof selector === 'function') {\n            return source.lift(new MulticastOperator(subjectFactory, selector));\n        }\n        var connectable = Object.create(source, connectableObservableDescriptor);\n        connectable.source = source;\n        connectable.subjectFactory = subjectFactory;\n        return connectable;\n    };\n}\nvar MulticastOperator = /** @class */ (function () {\n    function MulticastOperator(subjectFactory, selector) {\n        this.subjectFactory = subjectFactory;\n        this.selector = selector;\n    }\n    MulticastOperator.prototype.call = function (subscriber, source) {\n        var selector = this.selector;\n        var subject = this.subjectFactory();\n        var subscription = selector(subject).subscribe(subscriber);\n        subscription.add(source.subscribe(subject));\n        return subscription;\n    };\n    return MulticastOperator;\n}());\n\nvar __extends$66 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * When any of the provided Observable emits an complete or error notification, it immediately subscribes to the next one\n * that was passed.\n *\n * <span class=\"informal\">Execute series of Observables no matter what, even if it means swallowing errors.</span>\n *\n * <img src=\"./img/onErrorResumeNext.png\" width=\"100%\">\n *\n * `onErrorResumeNext` is an operator that accepts a series of Observables, provided either directly as\n * arguments or as an array. If no single Observable is provided, returned Observable will simply behave the same\n * as the source.\n *\n * `onErrorResumeNext` returns an Observable that starts by subscribing and re-emitting values from the source Observable.\n * When its stream of values ends - no matter if Observable completed or emitted an error - `onErrorResumeNext`\n * will subscribe to the first Observable that was passed as an argument to the method. It will start re-emitting\n * its values as well and - again - when that stream ends, `onErrorResumeNext` will proceed to subscribing yet another\n * Observable in provided series, no matter if previous Observable completed or ended with an error. This will\n * be happening until there is no more Observables left in the series, at which point returned Observable will\n * complete - even if the last subscribed stream ended with an error.\n *\n * `onErrorResumeNext` can be therefore thought of as version of {@link concat} operator, which is more permissive\n * when it comes to the errors emitted by its input Observables. While `concat` subscribes to the next Observable\n * in series only if previous one successfully completed, `onErrorResumeNext` subscribes even if it ended with\n * an error.\n *\n * Note that you do not get any access to errors emitted by the Observables. In particular do not\n * expect these errors to appear in error callback passed to {@link subscribe}. If you want to take\n * specific actions based on what error was emitted by an Observable, you should try out {@link catch} instead.\n *\n *\n * @example <caption>Subscribe to the next Observable after map fails</caption>\n * Rx.Observable.of(1, 2, 3, 0)\n *   .map(x => {\n *       if (x === 0) { throw Error(); }\n         return 10 / x;\n *   })\n *   .onErrorResumeNext(Rx.Observable.of(1, 2, 3))\n *   .subscribe(\n *     val => console.log(val),\n *     err => console.log(err),          // Will never be called.\n *     () => console.log('that\\'s it!')\n *   );\n *\n * // Logs:\n * // 10\n * // 5\n * // 3.3333333333333335\n * // 1\n * // 2\n * // 3\n * // \"that's it!\"\n *\n * @see {@link concat}\n * @see {@link catch}\n *\n * @param {...ObservableInput} observables Observables passed either directly or as an array.\n * @return {Observable} An Observable that emits values from source Observable, but - if it errors - subscribes\n * to the next passed Observable and so on, until it completes or runs out of Observables.\n * @method onErrorResumeNext\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n\nvar OnErrorResumeNextSubscriber = /** @class */ (function (_super) {\n    __extends$66(OnErrorResumeNextSubscriber, _super);\n    function OnErrorResumeNextSubscriber(destination, nextSources) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.nextSources = nextSources;\n        return _this;\n    }\n    OnErrorResumeNextSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.subscribeToNextSource();\n    };\n    OnErrorResumeNextSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.subscribeToNextSource();\n    };\n    OnErrorResumeNextSubscriber.prototype._error = function (err) {\n        this.subscribeToNextSource();\n    };\n    OnErrorResumeNextSubscriber.prototype._complete = function () {\n        this.subscribeToNextSource();\n    };\n    OnErrorResumeNextSubscriber.prototype.subscribeToNextSource = function () {\n        var next = this.nextSources.shift();\n        if (next) {\n            this.add(subscribeToResult(this, next));\n        }\n        else {\n            this.destination.complete();\n        }\n    };\n    return OnErrorResumeNextSubscriber;\n}(OuterSubscriber));\n\nvar __extends$67 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Groups pairs of consecutive emissions together and emits them as an array of\n * two values.\n *\n * <span class=\"informal\">Puts the current value and previous value together as\n * an array, and emits that.</span>\n *\n * <img src=\"./img/pairwise.png\" width=\"100%\">\n *\n * The Nth emission from the source Observable will cause the output Observable\n * to emit an array [(N-1)th, Nth] of the previous and the current value, as a\n * pair. For this reason, `pairwise` emits on the second and subsequent\n * emissions from the source Observable, but not on the first emission, because\n * there is no previous value in that case.\n *\n * @example <caption>On every click (starting from the second), emit the relative distance to the previous click</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var pairs = clicks.pairwise();\n * var distance = pairs.map(pair => {\n *   var x0 = pair[0].clientX;\n *   var y0 = pair[0].clientY;\n *   var x1 = pair[1].clientX;\n *   var y1 = pair[1].clientY;\n *   return Math.sqrt(Math.pow(x0 - x1, 2) + Math.pow(y0 - y1, 2));\n * });\n * distance.subscribe(x => console.log(x));\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n *\n * @return {Observable<Array<T>>} An Observable of pairs (as arrays) of\n * consecutive values from the source Observable.\n * @method pairwise\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar PairwiseSubscriber = /** @class */ (function (_super) {\n    __extends$67(PairwiseSubscriber, _super);\n    function PairwiseSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasPrev = false;\n        return _this;\n    }\n    PairwiseSubscriber.prototype._next = function (value) {\n        if (this.hasPrev) {\n            this.destination.next([this.prev, value]);\n        }\n        else {\n            this.hasPrev = true;\n        }\n        this.prev = value;\n    };\n    return PairwiseSubscriber;\n}(Subscriber));\n\n/**\n * Splits the source Observable into two, one with values that satisfy a\n * predicate, and another with values that don't satisfy the predicate.\n *\n * <span class=\"informal\">It's like {@link filter}, but returns two Observables:\n * one like the output of {@link filter}, and the other with values that did not\n * pass the condition.</span>\n *\n * <img src=\"./img/partition.png\" width=\"100%\">\n *\n * `partition` outputs an array with two Observables that partition the values\n * from the source Observable through the given `predicate` function. The first\n * Observable in that array emits source values for which the predicate argument\n * returns true. The second Observable emits source values for which the\n * predicate returns false. The first behaves like {@link filter} and the second\n * behaves like {@link filter} with the predicate negated.\n *\n * @example <caption>Partition click events into those on DIV elements and those elsewhere</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var parts = clicks.partition(ev => ev.target.tagName === 'DIV');\n * var clicksOnDivs = parts[0];\n * var clicksElsewhere = parts[1];\n * clicksOnDivs.subscribe(x => console.log('DIV clicked: ', x));\n * clicksElsewhere.subscribe(x => console.log('Other clicked: ', x));\n *\n * @see {@link filter}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted on the first Observable in the returned array, if\n * `false` the value is emitted on the second Observable in the array. The\n * `index` parameter is the number `i` for the i-th source emission that has\n * happened since the subscription, starting from the number `0`.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {[Observable<T>, Observable<T>]} An array with two Observables: one\n * with values that passed the predicate, and another with values that did not\n * pass the predicate.\n * @method partition\n * @owner Observable\n */\n\n/**\n * Maps each source value (an object) to its specified nested property.\n *\n * <span class=\"informal\">Like {@link map}, but meant only for picking one of\n * the nested properties of every emitted object.</span>\n *\n * <img src=\"./img/pluck.png\" width=\"100%\">\n *\n * Given a list of strings describing a path to an object property, retrieves\n * the value of a specified nested property from all values in the source\n * Observable. If a property can't be resolved, it will return `undefined` for\n * that value.\n *\n * @example <caption>Map every click to the tagName of the clicked target element</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var tagNames = clicks.pluck('target', 'tagName');\n * tagNames.subscribe(x => console.log(x));\n *\n * @see {@link map}\n *\n * @param {...string} properties The nested properties to pluck from each source\n * value (an object).\n * @return {Observable} A new Observable of property values from the source values.\n * @method pluck\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Returns a ConnectableObservable, which is a variety of Observable that waits until its connect method is called\n * before it begins emitting items to those Observers that have subscribed to it.\n *\n * <img src=\"./img/publish.png\" width=\"100%\">\n *\n * @param {Function} [selector] - Optional selector function which can use the multicasted source sequence as many times\n * as needed, without causing multiple subscriptions to the source sequence.\n * Subscribers to the given source will receive all notifications of the source from the time of the subscription on.\n * @return A ConnectableObservable that upon connection causes the source Observable to emit items to its Observers.\n * @method publish\n * @owner Observable\n */\n\n/**\n * @param value\n * @return {ConnectableObservable<T>}\n * @method publishBehavior\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n\nvar __read$11 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$11 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$11(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Returns an Observable that mirrors the first source Observable to emit an item\n * from the combination of this Observable and supplied Observables.\n * @param {...Observables} ...observables Sources used to race for which Observable emits first.\n * @return {Observable} An Observable that mirrors the output of the first Observable to emit an item.\n * @method race\n * @owner Observable\n */\n\nvar __extends$68 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that repeats the stream of items emitted by the source Observable at most count times.\n *\n * <img src=\"./img/repeat.png\" width=\"100%\">\n *\n * @param {number} [count] The number of times the source Observable items are repeated, a count of 0 will yield\n * an empty Observable.\n * @return {Observable} An Observable that repeats the stream of items emitted by the source Observable at most\n * count times.\n * @method repeat\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar RepeatSubscriber = /** @class */ (function (_super) {\n    __extends$68(RepeatSubscriber, _super);\n    function RepeatSubscriber(destination, count, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.count = count;\n        _this.source = source;\n        return _this;\n    }\n    RepeatSubscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            var _a = this, source = _a.source, count = _a.count;\n            if (count === 0) {\n                return _super.prototype.complete.call(this);\n            }\n            else if (count > -1) {\n                this.count = count - 1;\n            }\n            source.subscribe(this._unsubscribeAndRecycle());\n        }\n    };\n    return RepeatSubscriber;\n}(Subscriber));\n\nvar __extends$69 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that mirrors the source Observable with the exception of a `complete`. If the source\n * Observable calls `complete`, this method will emit to the Observable returned from `notifier`. If that Observable\n * calls `complete` or `error`, then this method will call `complete` or `error` on the child subscription. Otherwise\n * this method will resubscribe to the source Observable.\n *\n * <img src=\"./img/repeatWhen.png\" width=\"100%\">\n *\n * @param {function(notifications: Observable): Observable} notifier - Receives an Observable of notifications with\n * which a user can `complete` or `error`, aborting the repetition.\n * @return {Observable} The source Observable modified with repeat logic.\n * @method repeatWhen\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar RepeatWhenSubscriber = /** @class */ (function (_super) {\n    __extends$69(RepeatWhenSubscriber, _super);\n    function RepeatWhenSubscriber(destination, notifier, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.notifier = notifier;\n        _this.source = source;\n        _this.sourceIsBeingSubscribedTo = true;\n        return _this;\n    }\n    RepeatWhenSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.sourceIsBeingSubscribedTo = true;\n        this.source.subscribe(this);\n    };\n    RepeatWhenSubscriber.prototype.notifyComplete = function (innerSub) {\n        if (this.sourceIsBeingSubscribedTo === false) {\n            return _super.prototype.complete.call(this);\n        }\n    };\n    RepeatWhenSubscriber.prototype.complete = function () {\n        this.sourceIsBeingSubscribedTo = false;\n        if (!this.isStopped) {\n            if (!this.retries) {\n                this.subscribeToRetries();\n            }\n            if (!this.retriesSubscription || this.retriesSubscription.closed) {\n                return _super.prototype.complete.call(this);\n            }\n            this._unsubscribeAndRecycle();\n            this.notifications.next();\n        }\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    RepeatWhenSubscriber.prototype._unsubscribe = function () {\n        var _a = this, notifications = _a.notifications, retriesSubscription = _a.retriesSubscription;\n        if (notifications) {\n            notifications.unsubscribe();\n            this.notifications = null;\n        }\n        if (retriesSubscription) {\n            retriesSubscription.unsubscribe();\n            this.retriesSubscription = null;\n        }\n        this.retries = null;\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    RepeatWhenSubscriber.prototype._unsubscribeAndRecycle = function () {\n        var _unsubscribe = this._unsubscribe;\n        this._unsubscribe = null;\n        _super.prototype._unsubscribeAndRecycle.call(this);\n        this._unsubscribe = _unsubscribe;\n        return this;\n    };\n    RepeatWhenSubscriber.prototype.subscribeToRetries = function () {\n        this.notifications = new Subject();\n        var retries = tryCatch(this.notifier)(this.notifications);\n        if (retries === errorObject) {\n            return _super.prototype.complete.call(this);\n        }\n        this.retries = retries;\n        this.retriesSubscription = subscribeToResult(this, retries);\n    };\n    return RepeatWhenSubscriber;\n}(OuterSubscriber));\n\nvar __extends$70 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that mirrors the source Observable with the exception of an `error`. If the source Observable\n * calls `error`, this method will resubscribe to the source Observable for a maximum of `count` resubscriptions (given\n * as a number parameter) rather than propagating the `error` call.\n *\n * <img src=\"./img/retry.png\" width=\"100%\">\n *\n * Any and all items emitted by the source Observable will be emitted by the resulting Observable, even those emitted\n * during failed subscriptions. For example, if an Observable fails at first but emits [1, 2] then succeeds the second\n * time and emits: [1, 2, 3, 4, 5] then the complete stream of emissions and notifications\n * would be: [1, 2, 1, 2, 3, 4, 5, `complete`].\n * @param {number} count - Number of retry attempts before failing.\n * @return {Observable} The source Observable modified with the retry logic.\n * @method retry\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar RetrySubscriber = /** @class */ (function (_super) {\n    __extends$70(RetrySubscriber, _super);\n    function RetrySubscriber(destination, count, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.count = count;\n        _this.source = source;\n        return _this;\n    }\n    RetrySubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _a = this, source = _a.source, count = _a.count;\n            if (count === 0) {\n                return _super.prototype.error.call(this, err);\n            }\n            else if (count > -1) {\n                this.count = count - 1;\n            }\n            source.subscribe(this._unsubscribeAndRecycle());\n        }\n    };\n    return RetrySubscriber;\n}(Subscriber));\n\nvar __extends$71 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that mirrors the source Observable with the exception of an `error`. If the source Observable\n * calls `error`, this method will emit the Throwable that caused the error to the Observable returned from `notifier`.\n * If that Observable calls `complete` or `error` then this method will call `complete` or `error` on the child\n * subscription. Otherwise this method will resubscribe to the source Observable.\n *\n * <img src=\"./img/retryWhen.png\" width=\"100%\">\n *\n * @param {function(errors: Observable): Observable} notifier - Receives an Observable of notifications with which a\n * user can `complete` or `error`, aborting the retry.\n * @return {Observable} The source Observable modified with retry logic.\n * @method retryWhen\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar RetryWhenSubscriber = /** @class */ (function (_super) {\n    __extends$71(RetryWhenSubscriber, _super);\n    function RetryWhenSubscriber(destination, notifier, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.notifier = notifier;\n        _this.source = source;\n        return _this;\n    }\n    RetryWhenSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var errors = this.errors;\n            var retries = this.retries;\n            var retriesSubscription = this.retriesSubscription;\n            if (!retries) {\n                errors = new Subject();\n                retries = tryCatch(this.notifier)(errors);\n                if (retries === errorObject) {\n                    return _super.prototype.error.call(this, errorObject.e);\n                }\n                retriesSubscription = subscribeToResult(this, retries);\n            }\n            else {\n                this.errors = null;\n                this.retriesSubscription = null;\n            }\n            this._unsubscribeAndRecycle();\n            this.errors = errors;\n            this.retries = retries;\n            this.retriesSubscription = retriesSubscription;\n            errors.next(err);\n        }\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    RetryWhenSubscriber.prototype._unsubscribe = function () {\n        var _a = this, errors = _a.errors, retriesSubscription = _a.retriesSubscription;\n        if (errors) {\n            errors.unsubscribe();\n            this.errors = null;\n        }\n        if (retriesSubscription) {\n            retriesSubscription.unsubscribe();\n            this.retriesSubscription = null;\n        }\n        this.retries = null;\n    };\n    RetryWhenSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var _unsubscribe = this._unsubscribe;\n        this._unsubscribe = null;\n        this._unsubscribeAndRecycle();\n        this._unsubscribe = _unsubscribe;\n        this.source.subscribe(this);\n    };\n    return RetryWhenSubscriber;\n}(OuterSubscriber));\n\nvar __extends$72 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits the most recently emitted value from the source Observable whenever\n * another Observable, the `notifier`, emits.\n *\n * <span class=\"informal\">It's like {@link sampleTime}, but samples whenever\n * the `notifier` Observable emits something.</span>\n *\n * <img src=\"./img/sample.png\" width=\"100%\">\n *\n * Whenever the `notifier` Observable emits a value or completes, `sample`\n * looks at the source Observable and emits whichever value it has most recently\n * emitted since the previous sampling, unless the source has not emitted\n * anything since the previous sampling. The `notifier` is subscribed to as soon\n * as the output Observable is subscribed.\n *\n * @example <caption>On every click, sample the most recent \"seconds\" timer</caption>\n * var seconds = Rx.Observable.interval(1000);\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = seconds.sample(clicks);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link audit}\n * @see {@link debounce}\n * @see {@link sampleTime}\n * @see {@link throttle}\n *\n * @param {Observable<any>} notifier The Observable to use for sampling the\n * source Observable.\n * @return {Observable<T>} An Observable that emits the results of sampling the\n * values emitted by the source Observable whenever the notifier Observable\n * emits value or completes.\n * @method sample\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SampleSubscriber = /** @class */ (function (_super) {\n    __extends$72(SampleSubscriber, _super);\n    function SampleSubscriber() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.hasValue = false;\n        return _this;\n    }\n    SampleSubscriber.prototype._next = function (value) {\n        this.value = value;\n        this.hasValue = true;\n    };\n    SampleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.emitValue();\n    };\n    SampleSubscriber.prototype.notifyComplete = function () {\n        this.emitValue();\n    };\n    SampleSubscriber.prototype.emitValue = function () {\n        if (this.hasValue) {\n            this.hasValue = false;\n            this.destination.next(this.value);\n        }\n    };\n    return SampleSubscriber;\n}(OuterSubscriber));\n\nvar __extends$73 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits the most recently emitted value from the source Observable within\n * periodic time intervals.\n *\n * <span class=\"informal\">Samples the source Observable at periodic time\n * intervals, emitting what it samples.</span>\n *\n * <img src=\"./img/sampleTime.png\" width=\"100%\">\n *\n * `sampleTime` periodically looks at the source Observable and emits whichever\n * value it has most recently emitted since the previous sampling, unless the\n * source has not emitted anything since the previous sampling. The sampling\n * happens periodically in time every `period` milliseconds (or the time unit\n * defined by the optional `scheduler` argument). The sampling starts as soon as\n * the output Observable is subscribed.\n *\n * @example <caption>Every second, emit the most recent click at most once</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.sampleTime(1000);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link auditTime}\n * @see {@link debounceTime}\n * @see {@link delay}\n * @see {@link sample}\n * @see {@link throttleTime}\n *\n * @param {number} period The sampling period expressed in milliseconds or the\n * time unit determined internally by the optional `scheduler`.\n * @param {Scheduler} [scheduler=async] The {@link IScheduler} to use for\n * managing the timers that handle the sampling.\n * @return {Observable<T>} An Observable that emits the results of sampling the\n * values emitted by the source Observable at the specified time interval.\n * @method sampleTime\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SampleTimeSubscriber = /** @class */ (function (_super) {\n    __extends$73(SampleTimeSubscriber, _super);\n    function SampleTimeSubscriber(destination, period, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.period = period;\n        _this.scheduler = scheduler;\n        _this.hasValue = false;\n        _this.add(scheduler.schedule(dispatchNotification, period, { subscriber: _this, period: period }));\n        return _this;\n    }\n    SampleTimeSubscriber.prototype._next = function (value) {\n        this.lastValue = value;\n        this.hasValue = true;\n    };\n    SampleTimeSubscriber.prototype.notifyNext = function () {\n        if (this.hasValue) {\n            this.hasValue = false;\n            this.destination.next(this.lastValue);\n        }\n    };\n    return SampleTimeSubscriber;\n}(Subscriber));\nfunction dispatchNotification(state) {\n    var subscriber = state.subscriber, period = state.period;\n    subscriber.notifyNext();\n    this.schedule(state, period);\n}\n\nvar __extends$74 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Compares all values of two observables in sequence using an optional comparor function\n * and returns an observable of a single boolean value representing whether or not the two sequences\n * are equal.\n *\n * <span class=\"informal\">Checks to see of all values emitted by both observables are equal, in order.</span>\n *\n * <img src=\"./img/sequenceEqual.png\" width=\"100%\">\n *\n * `sequenceEqual` subscribes to two observables and buffers incoming values from each observable. Whenever either\n * observable emits a value, the value is buffered and the buffers are shifted and compared from the bottom\n * up; If any value pair doesn't match, the returned observable will emit `false` and complete. If one of the\n * observables completes, the operator will wait for the other observable to complete; If the other\n * observable emits before completing, the returned observable will emit `false` and complete. If one observable never\n * completes or emits after the other complets, the returned observable will never complete.\n *\n * @example <caption>figure out if the Konami code matches</caption>\n * var code = Rx.Observable.from([\n *  \"ArrowUp\",\n *  \"ArrowUp\",\n *  \"ArrowDown\",\n *  \"ArrowDown\",\n *  \"ArrowLeft\",\n *  \"ArrowRight\",\n *  \"ArrowLeft\",\n *  \"ArrowRight\",\n *  \"KeyB\",\n *  \"KeyA\",\n *  \"Enter\" // no start key, clearly.\n * ]);\n *\n * var keys = Rx.Observable.fromEvent(document, 'keyup')\n *  .map(e => e.code);\n * var matches = keys.bufferCount(11, 1)\n *  .mergeMap(\n *    last11 =>\n *      Rx.Observable.from(last11)\n *        .sequenceEqual(code)\n *   );\n * matches.subscribe(matched => console.log('Successful cheat at Contra? ', matched));\n *\n * @see {@link combineLatest}\n * @see {@link zip}\n * @see {@link withLatestFrom}\n *\n * @param {Observable} compareTo The observable sequence to compare the source sequence to.\n * @param {function} [comparor] An optional function to compare each value pair\n * @return {Observable} An Observable of a single boolean value representing whether or not\n * the values emitted by both observables were equal in sequence.\n * @method sequenceEqual\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SequenceEqualSubscriber = /** @class */ (function (_super) {\n    __extends$74(SequenceEqualSubscriber, _super);\n    function SequenceEqualSubscriber(destination, compareTo, comparor) {\n        var _this = _super.call(this, destination) || this;\n        _this.compareTo = compareTo;\n        _this.comparor = comparor;\n        _this._a = [];\n        _this._b = [];\n        _this._oneComplete = false;\n        _this.add(compareTo.subscribe(new SequenceEqualCompareToSubscriber(destination, _this)));\n        return _this;\n    }\n    SequenceEqualSubscriber.prototype._next = function (value) {\n        if (this._oneComplete && this._b.length === 0) {\n            this.emit(false);\n        }\n        else {\n            this._a.push(value);\n            this.checkValues();\n        }\n    };\n    SequenceEqualSubscriber.prototype._complete = function () {\n        if (this._oneComplete) {\n            this.emit(this._a.length === 0 && this._b.length === 0);\n        }\n        else {\n            this._oneComplete = true;\n        }\n    };\n    SequenceEqualSubscriber.prototype.checkValues = function () {\n        var _c = this, _a = _c._a, _b = _c._b, comparor = _c.comparor;\n        while (_a.length > 0 && _b.length > 0) {\n            var a = _a.shift();\n            var b = _b.shift();\n            var areEqual = false;\n            if (comparor) {\n                areEqual = tryCatch(comparor)(a, b);\n                if (areEqual === errorObject) {\n                    this.destination.error(errorObject.e);\n                }\n            }\n            else {\n                areEqual = a === b;\n            }\n            if (!areEqual) {\n                this.emit(false);\n            }\n        }\n    };\n    SequenceEqualSubscriber.prototype.emit = function (value) {\n        var destination = this.destination;\n        destination.next(value);\n        destination.complete();\n    };\n    SequenceEqualSubscriber.prototype.nextB = function (value) {\n        if (this._oneComplete && this._a.length === 0) {\n            this.emit(false);\n        }\n        else {\n            this._b.push(value);\n            this.checkValues();\n        }\n    };\n    return SequenceEqualSubscriber;\n}(Subscriber));\nvar SequenceEqualCompareToSubscriber = /** @class */ (function (_super) {\n    __extends$74(SequenceEqualCompareToSubscriber, _super);\n    function SequenceEqualCompareToSubscriber(destination, parent) {\n        var _this = _super.call(this, destination) || this;\n        _this.parent = parent;\n        return _this;\n    }\n    SequenceEqualCompareToSubscriber.prototype._next = function (value) {\n        this.parent.nextB(value);\n    };\n    SequenceEqualCompareToSubscriber.prototype._error = function (err) {\n        this.parent.error(err);\n    };\n    SequenceEqualCompareToSubscriber.prototype._complete = function () {\n        this.parent._complete();\n    };\n    return SequenceEqualCompareToSubscriber;\n}(Subscriber));\n\nfunction shareSubjectFactory() {\n    return new Subject();\n}\n/**\n * Returns a new Observable that multicasts (shares) the original Observable. As long as there is at least one\n * Subscriber this Observable will be subscribed and emitting data. When all subscribers have unsubscribed it will\n * unsubscribe from the source Observable. Because the Observable is multicasting it makes the stream `hot`.\n * This is an alias for .multicast(() => new Subject()).refCount().\n *\n * <img src=\"./img/share.png\" width=\"100%\">\n *\n * @return {Observable<T>} An Observable that upon connection causes the source Observable to emit items to its Observers.\n * @method share\n * @owner Observable\n */\nfunction share() {\n    return function (source) { return refCount()(multicast(shareSubjectFactory)(source)); };\n}\n\n/**\n * @method shareReplay\n * @owner Observable\n */\n\nvar __extends$75 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that emits the single item emitted by the source Observable that matches a specified\n * predicate, if that Observable emits one such item. If the source Observable emits more than one such item or no\n * items, notify of an IllegalArgumentException or NoSuchElementException respectively. If the source Observable\n * emits items but none match the specified predicate then `undefined` is emiited.\n *\n * <img src=\"./img/single.png\" width=\"100%\">\n *\n * @throws {EmptyError} Delivers an EmptyError to the Observer's `error`\n * callback if the Observable completes before any `next` notification was sent.\n * @param {Function} predicate - A predicate function to evaluate items emitted by the source Observable.\n * @return {Observable<T>} An Observable that emits the single item emitted by the source Observable that matches\n * the predicate or `undefined` when no items match.\n *\n * @method single\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SingleSubscriber = /** @class */ (function (_super) {\n    __extends$75(SingleSubscriber, _super);\n    function SingleSubscriber(destination, predicate, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.source = source;\n        _this.seenValue = false;\n        _this.index = 0;\n        return _this;\n    }\n    SingleSubscriber.prototype.applySingleValue = function (value) {\n        if (this.seenValue) {\n            this.destination.error('Sequence contains more than one element');\n        }\n        else {\n            this.seenValue = true;\n            this.singleValue = value;\n        }\n    };\n    SingleSubscriber.prototype._next = function (value) {\n        var index = this.index++;\n        if (this.predicate) {\n            this.tryNext(value, index);\n        }\n        else {\n            this.applySingleValue(value);\n        }\n    };\n    SingleSubscriber.prototype.tryNext = function (value, index) {\n        try {\n            if (this.predicate(value, index, this.source)) {\n                this.applySingleValue(value);\n            }\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    SingleSubscriber.prototype._complete = function () {\n        var destination = this.destination;\n        if (this.index > 0) {\n            destination.next(this.seenValue ? this.singleValue : undefined);\n            destination.complete();\n        }\n        else {\n            destination.error(new EmptyError);\n        }\n    };\n    return SingleSubscriber;\n}(Subscriber));\n\nvar __extends$76 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that skips the first `count` items emitted by the source Observable.\n *\n * <img src=\"./img/skip.png\" width=\"100%\">\n *\n * @param {Number} count - The number of times, items emitted by source Observable should be skipped.\n * @return {Observable} An Observable that skips values emitted by the source Observable.\n *\n * @method skip\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SkipSubscriber = /** @class */ (function (_super) {\n    __extends$76(SkipSubscriber, _super);\n    function SkipSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.count = 0;\n        return _this;\n    }\n    SkipSubscriber.prototype._next = function (x) {\n        if (++this.count > this.total) {\n            this.destination.next(x);\n        }\n    };\n    return SkipSubscriber;\n}(Subscriber));\n\nvar __extends$77 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Skip the last `count` values emitted by the source Observable.\n *\n * <img src=\"./img/skipLast.png\" width=\"100%\">\n *\n * `skipLast` returns an Observable that accumulates a queue with a length\n * enough to store the first `count` values. As more values are received,\n * values are taken from the front of the queue and produced on the result\n * sequence. This causes values to be delayed.\n *\n * @example <caption>Skip the last 2 values of an Observable with many values</caption>\n * var many = Rx.Observable.range(1, 5);\n * var skipLastTwo = many.skipLast(2);\n * skipLastTwo.subscribe(x => console.log(x));\n *\n * // Results in:\n * // 1 2 3\n *\n * @see {@link skip}\n * @see {@link skipUntil}\n * @see {@link skipWhile}\n * @see {@link take}\n *\n * @throws {ArgumentOutOfRangeError} When using `skipLast(i)`, it throws\n * ArgumentOutOrRangeError if `i < 0`.\n *\n * @param {number} count Number of elements to skip from the end of the source Observable.\n * @returns {Observable<T>} An Observable that skips the last count values\n * emitted by the source Observable.\n * @method skipLast\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SkipLastSubscriber = /** @class */ (function (_super) {\n    __extends$77(SkipLastSubscriber, _super);\n    function SkipLastSubscriber(destination, _skipCount) {\n        var _this = _super.call(this, destination) || this;\n        _this._skipCount = _skipCount;\n        _this._count = 0;\n        _this._ring = new Array(_skipCount);\n        return _this;\n    }\n    SkipLastSubscriber.prototype._next = function (value) {\n        var skipCount = this._skipCount;\n        var count = this._count++;\n        if (count < skipCount) {\n            this._ring[count] = value;\n        }\n        else {\n            var currentIndex = count % skipCount;\n            var ring = this._ring;\n            var oldValue = ring[currentIndex];\n            ring[currentIndex] = value;\n            this.destination.next(oldValue);\n        }\n    };\n    return SkipLastSubscriber;\n}(Subscriber));\n\nvar __extends$78 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that skips items emitted by the source Observable until a second Observable emits an item.\n *\n * <img src=\"./img/skipUntil.png\" width=\"100%\">\n *\n * @param {Observable} notifier - The second Observable that has to emit an item before the source Observable's elements begin to\n * be mirrored by the resulting Observable.\n * @return {Observable<T>} An Observable that skips items from the source Observable until the second Observable emits\n * an item, then emits the remaining items.\n * @method skipUntil\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SkipUntilSubscriber = /** @class */ (function (_super) {\n    __extends$78(SkipUntilSubscriber, _super);\n    function SkipUntilSubscriber(destination, notifier) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasValue = false;\n        _this.add(_this.innerSubscription = subscribeToResult(_this, notifier));\n        return _this;\n    }\n    SkipUntilSubscriber.prototype._next = function (value) {\n        if (this.hasValue) {\n            _super.prototype._next.call(this, value);\n        }\n    };\n    SkipUntilSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.hasValue = true;\n        this.innerSubscription.unsubscribe();\n    };\n    SkipUntilSubscriber.prototype.notifyComplete = function () {\n        /* do nothing */\n    };\n    return SkipUntilSubscriber;\n}(OuterSubscriber));\n\nvar __extends$79 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that skips all items emitted by the source Observable as long as a specified condition holds\n * true, but emits all further source items as soon as the condition becomes false.\n *\n * <img src=\"./img/skipWhile.png\" width=\"100%\">\n *\n * @param {Function} predicate - A function to test each item emitted from the source Observable.\n * @return {Observable<T>} An Observable that begins emitting items emitted by the source Observable when the\n * specified predicate becomes false.\n * @method skipWhile\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SkipWhileSubscriber = /** @class */ (function (_super) {\n    __extends$79(SkipWhileSubscriber, _super);\n    function SkipWhileSubscriber(destination, predicate) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.skipping = true;\n        _this.index = 0;\n        return _this;\n    }\n    SkipWhileSubscriber.prototype._next = function (value) {\n        var destination = this.destination;\n        if (this.skipping) {\n            this.tryCallPredicate(value);\n        }\n        if (!this.skipping) {\n            destination.next(value);\n        }\n    };\n    SkipWhileSubscriber.prototype.tryCallPredicate = function (value) {\n        try {\n            var result = this.predicate(value, this.index++);\n            this.skipping = Boolean(result);\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    return SkipWhileSubscriber;\n}(Subscriber));\n\n/* tslint:enable:max-line-length */\n/**\n * Returns an Observable that emits the items you specify as arguments before it begins to emit\n * items emitted by the source Observable.\n *\n * <img src=\"./img/startWith.png\" width=\"100%\">\n *\n * @param {...T} values - Items you want the modified Observable to emit first.\n * @param {Scheduler} [scheduler] - A {@link IScheduler} to use for scheduling\n * the emissions of the `next` notifications.\n * @return {Observable} An Observable that emits the items in the specified Iterable and then emits the items\n * emitted by the source Observable.\n * @method startWith\n * @owner Observable\n */\n\nvar __extends$80 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @extends {Ignored}\n * @hide true\n */\nvar SubscribeOnObservable = /** @class */ (function (_super) {\n    __extends$80(SubscribeOnObservable, _super);\n    function SubscribeOnObservable(source, delayTime, scheduler) {\n        if (delayTime === void 0) { delayTime = 0; }\n        if (scheduler === void 0) { scheduler = asap; }\n        var _this = _super.call(this) || this;\n        _this.source = source;\n        _this.delayTime = delayTime;\n        _this.scheduler = scheduler;\n        if (!isNumeric(delayTime) || delayTime < 0) {\n            _this.delayTime = 0;\n        }\n        if (!scheduler || typeof scheduler.schedule !== 'function') {\n            _this.scheduler = asap;\n        }\n        return _this;\n    }\n    /** @nocollapse */\n    SubscribeOnObservable.create = function (source, delay, scheduler) {\n        if (delay === void 0) { delay = 0; }\n        if (scheduler === void 0) { scheduler = asap; }\n        return new SubscribeOnObservable(source, delay, scheduler);\n    };\n    /** @nocollapse */\n    SubscribeOnObservable.dispatch = function (arg) {\n        var source = arg.source, subscriber = arg.subscriber;\n        return this.add(source.subscribe(subscriber));\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    SubscribeOnObservable.prototype._subscribe = function (subscriber) {\n        var delay = this.delayTime;\n        var source = this.source;\n        var scheduler = this.scheduler;\n        return scheduler.schedule(SubscribeOnObservable.dispatch, delay, {\n            source: source, subscriber: subscriber\n        });\n    };\n    return SubscribeOnObservable;\n}(Observable));\n\n/**\n * Asynchronously subscribes Observers to this Observable on the specified IScheduler.\n *\n * <img src=\"./img/subscribeOn.png\" width=\"100%\">\n *\n * @param {Scheduler} scheduler - The IScheduler to perform subscription actions on.\n * @return {Observable<T>} The source Observable modified so that its subscriptions happen on the specified IScheduler.\n .\n * @method subscribeOn\n * @owner Observable\n */\n\nvar __extends$81 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable, emitting values only from the most recently projected Observable.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link switch}.</span>\n *\n * <img src=\"./img/switchMap.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. Each time it observes one of these\n * inner Observables, the output Observable begins emitting the items emitted by\n * that inner Observable. When a new inner Observable is emitted, `switchMap`\n * stops emitting items from the earlier-emitted inner Observable and begins\n * emitting items from the new one. It continues to behave like this for\n * subsequent inner Observables.\n *\n * @example <caption>Rerun an interval Observable on every click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.switchMap((ev) => Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link concatMap}\n * @see {@link exhaustMap}\n * @see {@link mergeMap}\n * @see {@link switch}\n * @see {@link switchMapTo}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @return {Observable} An Observable that emits the result of applying the\n * projection function (and the optional `resultSelector`) to each item emitted\n * by the source Observable and taking only the values from the most recently\n * projected inner Observable.\n * @method switchMap\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SwitchMapSubscriber = /** @class */ (function (_super) {\n    __extends$81(SwitchMapSubscriber, _super);\n    function SwitchMapSubscriber(destination, project) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.index = 0;\n        return _this;\n    }\n    SwitchMapSubscriber.prototype._next = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (error) {\n            this.destination.error(error);\n            return;\n        }\n        this._innerSub(result, value, index);\n    };\n    SwitchMapSubscriber.prototype._innerSub = function (result, value, index) {\n        var innerSubscription = this.innerSubscription;\n        if (innerSubscription) {\n            innerSubscription.unsubscribe();\n        }\n        this.add(this.innerSubscription = subscribeToResult(this, result, value, index));\n    };\n    SwitchMapSubscriber.prototype._complete = function () {\n        var innerSubscription = this.innerSubscription;\n        if (!innerSubscription || innerSubscription.closed) {\n            _super.prototype._complete.call(this);\n        }\n    };\n    SwitchMapSubscriber.prototype._unsubscribe = function () {\n        this.innerSubscription = null;\n    };\n    SwitchMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.remove(innerSub);\n        this.innerSubscription = null;\n        if (this.isStopped) {\n            _super.prototype._complete.call(this);\n        }\n    };\n    SwitchMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    return SwitchMapSubscriber;\n}(OuterSubscriber));\n\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to the same Observable which is flattened multiple\n * times with {@link switch} in the output Observable.\n *\n * <span class=\"informal\">It's like {@link switchMap}, but maps each value\n * always to the same inner Observable.</span>\n *\n * <img src=\"./img/switchMapTo.png\" width=\"100%\">\n *\n * Maps each source value to the given Observable `innerObservable` regardless\n * of the source value, and then flattens those resulting Observables into one\n * single Observable, which is the output Observable. The output Observables\n * emits values only from the most recently emitted instance of\n * `innerObservable`.\n *\n * @example <caption>Rerun an interval Observable on every click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.switchMapTo(Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link concatMapTo}\n * @see {@link switch}\n * @see {@link switchMap}\n * @see {@link mergeMapTo}\n *\n * @param {ObservableInput} innerObservable An Observable to replace each value from\n * the source Observable.\n * @return {Observable} An Observable that emits items from the given\n * `innerObservable` (and optionally transformed through `resultSelector`) every\n * time a value is emitted on the source Observable, and taking only the values\n * from the most recently projected inner Observable.\n * @method switchMapTo\n * @owner Observable\n */\n\nvar __extends$82 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits the values emitted by the source Observable until a `notifier`\n * Observable emits a value.\n *\n * <span class=\"informal\">Lets values pass until a second Observable,\n * `notifier`, emits a value. Then, it completes.</span>\n *\n * <img src=\"./img/takeUntil.png\" width=\"100%\">\n *\n * `takeUntil` subscribes and begins mirroring the source Observable. It also\n * monitors a second Observable, `notifier` that you provide. If the `notifier`\n * emits a value, the output Observable stops mirroring the source Observable\n * and completes. If the `notifier` doesn't emit any value and completes\n * then `takeUntil` will pass all values.\n *\n * @example <caption>Tick every second until the first click happens</caption>\n * var interval = Rx.Observable.interval(1000);\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = interval.takeUntil(clicks);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link take}\n * @see {@link takeLast}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @param {Observable} notifier The Observable whose first emitted value will\n * cause the output Observable of `takeUntil` to stop emitting values from the\n * source Observable.\n * @return {Observable<T>} An Observable that emits the values from the source\n * Observable until such time as `notifier` emits its first value.\n * @method takeUntil\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TakeUntilSubscriber = /** @class */ (function (_super) {\n    __extends$82(TakeUntilSubscriber, _super);\n    function TakeUntilSubscriber(destination) {\n        return _super.call(this, destination) || this;\n    }\n    TakeUntilSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.complete();\n    };\n    TakeUntilSubscriber.prototype.notifyComplete = function () {\n        // noop\n    };\n    return TakeUntilSubscriber;\n}(OuterSubscriber));\n\nvar __extends$83 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits values emitted by the source Observable so long as each value satisfies\n * the given `predicate`, and then completes as soon as this `predicate` is not\n * satisfied.\n *\n * <span class=\"informal\">Takes values from the source only while they pass the\n * condition given. When the first value does not satisfy, it completes.</span>\n *\n * <img src=\"./img/takeWhile.png\" width=\"100%\">\n *\n * `takeWhile` subscribes and begins mirroring the source Observable. Each value\n * emitted on the source is given to the `predicate` function which returns a\n * boolean, representing a condition to be satisfied by the source values. The\n * output Observable emits the source values until such time as the `predicate`\n * returns false, at which point `takeWhile` stops mirroring the source\n * Observable and completes the output Observable.\n *\n * @example <caption>Emit click events only while the clientX property is greater than 200</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.takeWhile(ev => ev.clientX > 200);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link take}\n * @see {@link takeLast}\n * @see {@link takeUntil}\n * @see {@link skip}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates a value emitted by the source Observable and returns a boolean.\n * Also takes the (zero-based) index as the second argument.\n * @return {Observable<T>} An Observable that emits the values from the source\n * Observable so long as each value satisfies the condition defined by the\n * `predicate`, then completes.\n * @method takeWhile\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TakeWhileSubscriber = /** @class */ (function (_super) {\n    __extends$83(TakeWhileSubscriber, _super);\n    function TakeWhileSubscriber(destination, predicate) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.index = 0;\n        return _this;\n    }\n    TakeWhileSubscriber.prototype._next = function (value) {\n        var destination = this.destination;\n        var result;\n        try {\n            result = this.predicate(value, this.index++);\n        }\n        catch (err) {\n            destination.error(err);\n            return;\n        }\n        this.nextOrComplete(value, result);\n    };\n    TakeWhileSubscriber.prototype.nextOrComplete = function (value, predicateResult) {\n        var destination = this.destination;\n        if (Boolean(predicateResult)) {\n            destination.next(value);\n        }\n        else {\n            destination.complete();\n        }\n    };\n    return TakeWhileSubscriber;\n}(Subscriber));\n\nvar __extends$84 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n/**\n * Emits a value from the source Observable, then ignores subsequent source\n * values for a duration determined by another Observable, then repeats this\n * process.\n *\n * <span class=\"informal\">It's like {@link throttleTime}, but the silencing\n * duration is determined by a second Observable.</span>\n *\n * <img src=\"./img/throttle.png\" width=\"100%\">\n *\n * `throttle` emits the source Observable values on the output Observable\n * when its internal timer is disabled, and ignores source values when the timer\n * is enabled. Initially, the timer is disabled. As soon as the first source\n * value arrives, it is forwarded to the output Observable, and then the timer\n * is enabled by calling the `durationSelector` function with the source value,\n * which returns the \"duration\" Observable. When the duration Observable emits a\n * value or completes, the timer is disabled, and this process repeats for the\n * next source value.\n *\n * @example <caption>Emit clicks at a rate of at most one click per second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.throttle(ev => Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link audit}\n * @see {@link debounce}\n * @see {@link delayWhen}\n * @see {@link sample}\n * @see {@link throttleTime}\n *\n * @param {function(value: T): SubscribableOrPromise} durationSelector A function\n * that receives a value from the source Observable, for computing the silencing\n * duration for each source value, returned as an Observable or a Promise.\n * @param {Object} config a configuration object to define `leading` and `trailing` behavior. Defaults\n * to `{ leading: true, trailing: false }`.\n * @return {Observable<T>} An Observable that performs the throttle operation to\n * limit the rate of emissions from the source.\n * @method throttle\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc\n * @ignore\n * @extends {Ignored}\n */\nvar ThrottleSubscriber = /** @class */ (function (_super) {\n    __extends$84(ThrottleSubscriber, _super);\n    function ThrottleSubscriber(destination, durationSelector, _leading, _trailing) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.durationSelector = durationSelector;\n        _this._leading = _leading;\n        _this._trailing = _trailing;\n        _this._hasValue = false;\n        return _this;\n    }\n    ThrottleSubscriber.prototype._next = function (value) {\n        this._hasValue = true;\n        this._sendValue = value;\n        if (!this._throttled) {\n            if (this._leading) {\n                this.send();\n            }\n            else {\n                this.throttle(value);\n            }\n        }\n    };\n    ThrottleSubscriber.prototype.send = function () {\n        var _a = this, _hasValue = _a._hasValue, _sendValue = _a._sendValue;\n        if (_hasValue) {\n            this.destination.next(_sendValue);\n            this.throttle(_sendValue);\n        }\n        this._hasValue = false;\n        this._sendValue = null;\n    };\n    ThrottleSubscriber.prototype.throttle = function (value) {\n        var duration = this.tryDurationSelector(value);\n        if (duration) {\n            this.add(this._throttled = subscribeToResult(this, duration));\n        }\n    };\n    ThrottleSubscriber.prototype.tryDurationSelector = function (value) {\n        try {\n            return this.durationSelector(value);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return null;\n        }\n    };\n    ThrottleSubscriber.prototype.throttlingDone = function () {\n        var _a = this, _throttled = _a._throttled, _trailing = _a._trailing;\n        if (_throttled) {\n            _throttled.unsubscribe();\n        }\n        this._throttled = null;\n        if (_trailing) {\n            this.send();\n        }\n    };\n    ThrottleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.throttlingDone();\n    };\n    ThrottleSubscriber.prototype.notifyComplete = function () {\n        this.throttlingDone();\n    };\n    return ThrottleSubscriber;\n}(OuterSubscriber));\n\nvar __extends$85 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits a value from the source Observable, then ignores subsequent source\n * values for `duration` milliseconds, then repeats this process.\n *\n * <span class=\"informal\">Lets a value pass, then ignores source values for the\n * next `duration` milliseconds.</span>\n *\n * <img src=\"./img/throttleTime.png\" width=\"100%\">\n *\n * `throttleTime` emits the source Observable values on the output Observable\n * when its internal timer is disabled, and ignores source values when the timer\n * is enabled. Initially, the timer is disabled. As soon as the first source\n * value arrives, it is forwarded to the output Observable, and then the timer\n * is enabled. After `duration` milliseconds (or the time unit determined\n * internally by the optional `scheduler`) has passed, the timer is disabled,\n * and this process repeats for the next source value. Optionally takes a\n * {@link IScheduler} for managing timers.\n *\n * @example <caption>Emit clicks at a rate of at most one click per second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.throttleTime(1000);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link auditTime}\n * @see {@link debounceTime}\n * @see {@link delay}\n * @see {@link sampleTime}\n * @see {@link throttle}\n *\n * @param {number} duration Time to wait before emitting another value after\n * emitting the last value, measured in milliseconds or the time unit determined\n * internally by the optional `scheduler`.\n * @param {Scheduler} [scheduler=async] The {@link IScheduler} to use for\n * managing the timers that handle the throttling.\n * @param {Object} config a configuration object to define `leading` and\n * `trailing` behavior. Defaults to `{ leading: true, trailing: false }`.\n * @return {Observable<T>} An Observable that performs the throttle operation to\n * limit the rate of emissions from the source.\n * @method throttleTime\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ThrottleTimeSubscriber = /** @class */ (function (_super) {\n    __extends$85(ThrottleTimeSubscriber, _super);\n    function ThrottleTimeSubscriber(destination, duration, scheduler, leading, trailing) {\n        var _this = _super.call(this, destination) || this;\n        _this.duration = duration;\n        _this.scheduler = scheduler;\n        _this.leading = leading;\n        _this.trailing = trailing;\n        _this._hasTrailingValue = false;\n        _this._trailingValue = null;\n        return _this;\n    }\n    ThrottleTimeSubscriber.prototype._next = function (value) {\n        if (this.throttled) {\n            if (this.trailing) {\n                this._trailingValue = value;\n                this._hasTrailingValue = true;\n            }\n        }\n        else {\n            this.add(this.throttled = this.scheduler.schedule(dispatchNext$3, this.duration, { subscriber: this }));\n            if (this.leading) {\n                this.destination.next(value);\n            }\n        }\n    };\n    ThrottleTimeSubscriber.prototype._complete = function () {\n        if (this._hasTrailingValue) {\n            this.destination.next(this._trailingValue);\n            this.destination.complete();\n        }\n        else {\n            this.destination.complete();\n        }\n    };\n    ThrottleTimeSubscriber.prototype.clearThrottle = function () {\n        var throttled = this.throttled;\n        if (throttled) {\n            if (this.trailing && this._hasTrailingValue) {\n                this.destination.next(this._trailingValue);\n                this._trailingValue = null;\n                this._hasTrailingValue = false;\n            }\n            throttled.unsubscribe();\n            this.remove(throttled);\n            this.throttled = null;\n        }\n    };\n    return ThrottleTimeSubscriber;\n}(Subscriber));\nfunction dispatchNext$3(arg) {\n    var subscriber = arg.subscriber;\n    subscriber.clearThrottle();\n}\n\nvar __extends$86 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n *\n * Errors if Observable does not emit a value in given time span, in case of which\n * subscribes to the second Observable.\n *\n * <span class=\"informal\">It's a version of `timeout` operator that let's you specify fallback Observable.</span>\n *\n * <img src=\"./img/timeoutWith.png\" width=\"100%\">\n *\n * `timeoutWith` is a variation of `timeout` operator. It behaves exactly the same,\n * still accepting as a first argument either a number or a Date, which control - respectively -\n * when values of source Observable should be emitted or when it should complete.\n *\n * The only difference is that it accepts a second, required parameter. This parameter\n * should be an Observable which will be subscribed when source Observable fails any timeout check.\n * So whenever regular `timeout` would emit an error, `timeoutWith` will instead start re-emitting\n * values from second Observable. Note that this fallback Observable is not checked for timeouts\n * itself, so it can emit values and complete at arbitrary points in time. From the moment of a second\n * subscription, Observable returned from `timeoutWith` simply mirrors fallback stream. When that\n * stream completes, it completes as well.\n *\n * Scheduler, which in case of `timeout` is provided as as second argument, can be still provided\n * here - as a third, optional parameter. It still is used to schedule timeout checks and -\n * as a consequence - when second Observable will be subscribed, since subscription happens\n * immediately after failing check.\n *\n * @example <caption>Add fallback observable</caption>\n * const seconds = Rx.Observable.interval(1000);\n * const minutes = Rx.Observable.interval(60 * 1000);\n *\n * seconds.timeoutWith(900, minutes)\n *     .subscribe(\n *         value => console.log(value), // After 900ms, will start emitting `minutes`,\n *                                      // since first value of `seconds` will not arrive fast enough.\n *         err => console.log(err) // Would be called after 900ms in case of `timeout`,\n *                                 // but here will never be called.\n *     );\n *\n * @param {number|Date} due Number specifying period within which Observable must emit values\n *                          or Date specifying before when Observable should complete\n * @param {Observable<T>} withObservable Observable which will be subscribed if source fails timeout check.\n * @param {Scheduler} [scheduler] Scheduler controlling when timeout checks occur.\n * @return {Observable<T>} Observable that mirrors behaviour of source or, when timeout check fails, of an Observable\n *                          passed as a second parameter.\n * @method timeoutWith\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TimeoutWithSubscriber = /** @class */ (function (_super) {\n    __extends$86(TimeoutWithSubscriber, _super);\n    function TimeoutWithSubscriber(destination, absoluteTimeout, waitFor, withObservable, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.absoluteTimeout = absoluteTimeout;\n        _this.waitFor = waitFor;\n        _this.withObservable = withObservable;\n        _this.scheduler = scheduler;\n        _this.action = null;\n        _this.scheduleTimeout();\n        return _this;\n    }\n    TimeoutWithSubscriber.dispatchTimeout = function (subscriber) {\n        var withObservable = subscriber.withObservable;\n        subscriber._unsubscribeAndRecycle();\n        subscriber.add(subscribeToResult(subscriber, withObservable));\n    };\n    TimeoutWithSubscriber.prototype.scheduleTimeout = function () {\n        var action = this.action;\n        if (action) {\n            // Recycle the action if we've already scheduled one. All the production\n            // Scheduler Actions mutate their state/delay time and return themeselves.\n            // VirtualActions are immutable, so they create and return a clone. In this\n            // case, we need to set the action reference to the most recent VirtualAction,\n            // to ensure that's the one we clone from next time.\n            this.action = action.schedule(this, this.waitFor);\n        }\n        else {\n            this.add(this.action = this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout, this.waitFor, this));\n        }\n    };\n    TimeoutWithSubscriber.prototype._next = function (value) {\n        if (!this.absoluteTimeout) {\n            this.scheduleTimeout();\n        }\n        _super.prototype._next.call(this, value);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    TimeoutWithSubscriber.prototype._unsubscribe = function () {\n        this.action = null;\n        this.scheduler = null;\n        this.withObservable = null;\n    };\n    return TimeoutWithSubscriber;\n}(OuterSubscriber));\n\n/**\n *\n * Errors if Observable does not emit a value in given time span.\n *\n * <span class=\"informal\">Timeouts on Observable that doesn't emit values fast enough.</span>\n *\n * <img src=\"./img/timeout.png\" width=\"100%\">\n *\n * `timeout` operator accepts as an argument either a number or a Date.\n *\n * If number was provided, it returns an Observable that behaves like a source\n * Observable, unless there is a period of time where there is no value emitted.\n * So if you provide `100` as argument and first value comes after 50ms from\n * the moment of subscription, this value will be simply re-emitted by the resulting\n * Observable. If however after that 100ms passes without a second value being emitted,\n * stream will end with an error and source Observable will be unsubscribed.\n * These checks are performed throughout whole lifecycle of Observable - from the moment\n * it was subscribed to, until it completes or errors itself. Thus every value must be\n * emitted within specified period since previous value.\n *\n * If provided argument was Date, returned Observable behaves differently. It throws\n * if Observable did not complete before provided Date. This means that periods between\n * emission of particular values do not matter in this case. If Observable did not complete\n * before provided Date, source Observable will be unsubscribed. Other than that, resulting\n * stream behaves just as source Observable.\n *\n * `timeout` accepts also a Scheduler as a second parameter. It is used to schedule moment (or moments)\n * when returned Observable will check if source stream emitted value or completed.\n *\n * @example <caption>Check if ticks are emitted within certain timespan</caption>\n * const seconds = Rx.Observable.interval(1000);\n *\n * seconds.timeout(1100) // Let's use bigger timespan to be safe,\n *                       // since `interval` might fire a bit later then scheduled.\n * .subscribe(\n *     value => console.log(value), // Will emit numbers just as regular `interval` would.\n *     err => console.log(err) // Will never be called.\n * );\n *\n * seconds.timeout(900).subscribe(\n *     value => console.log(value), // Will never be called.\n *     err => console.log(err) // Will emit error before even first value is emitted,\n *                             // since it did not arrive within 900ms period.\n * );\n *\n * @example <caption>Use Date to check if Observable completed</caption>\n * const seconds = Rx.Observable.interval(1000);\n *\n * seconds.timeout(new Date(\"December 17, 2020 03:24:00\"))\n * .subscribe(\n *     value => console.log(value), // Will emit values as regular `interval` would\n *                                  // until December 17, 2020 at 03:24:00.\n *     err => console.log(err) // On December 17, 2020 at 03:24:00 it will emit an error,\n *                             // since Observable did not complete by then.\n * );\n *\n * @see {@link timeoutWith}\n *\n * @param {number|Date} due Number specifying period within which Observable must emit values\n *                          or Date specifying before when Observable should complete\n * @param {Scheduler} [scheduler] Scheduler controlling when timeout checks occur.\n * @return {Observable<T>} Observable that mirrors behaviour of source, unless timeout checks fail.\n * @method timeout\n * @owner Observable\n */\n\n/**\n * @param scheduler\n * @return {Observable<Timestamp<any>>|WebSocketSubject<T>|Observable<T>}\n * @method timestamp\n * @owner Observable\n */\n\nvar __extends$87 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Branch out the source Observable values as a nested Observable whenever\n * `windowBoundaries` emits.\n *\n * <span class=\"informal\">It's like {@link buffer}, but emits a nested Observable\n * instead of an array.</span>\n *\n * <img src=\"./img/window.png\" width=\"100%\">\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits connected, non-overlapping\n * windows. It emits the current window and opens a new one whenever the\n * Observable `windowBoundaries` emits an item. Because each window is an\n * Observable, the output is a higher-order Observable.\n *\n * @example <caption>In every window of 1 second each, emit at most 2 click events</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var interval = Rx.Observable.interval(1000);\n * var result = clicks.window(interval)\n *   .map(win => win.take(2)) // each window has at most 2 emissions\n *   .mergeAll(); // flatten the Observable-of-Observables\n * result.subscribe(x => console.log(x));\n *\n * @see {@link windowCount}\n * @see {@link windowTime}\n * @see {@link windowToggle}\n * @see {@link windowWhen}\n * @see {@link buffer}\n *\n * @param {Observable<any>} windowBoundaries An Observable that completes the\n * previous window and starts a new window.\n * @return {Observable<Observable<T>>} An Observable of windows, which are\n * Observables emitting values of the source Observable.\n * @method window\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowSubscriber = /** @class */ (function (_super) {\n    __extends$87(WindowSubscriber, _super);\n    function WindowSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.window = new Subject();\n        destination.next(_this.window);\n        return _this;\n    }\n    WindowSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.openWindow();\n    };\n    WindowSubscriber.prototype.notifyError = function (error, innerSub) {\n        this._error(error);\n    };\n    WindowSubscriber.prototype.notifyComplete = function (innerSub) {\n        this._complete();\n    };\n    WindowSubscriber.prototype._next = function (value) {\n        this.window.next(value);\n    };\n    WindowSubscriber.prototype._error = function (err) {\n        this.window.error(err);\n        this.destination.error(err);\n    };\n    WindowSubscriber.prototype._complete = function () {\n        this.window.complete();\n        this.destination.complete();\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    WindowSubscriber.prototype._unsubscribe = function () {\n        this.window = null;\n    };\n    WindowSubscriber.prototype.openWindow = function () {\n        var prevWindow = this.window;\n        if (prevWindow) {\n            prevWindow.complete();\n        }\n        var destination = this.destination;\n        var newWindow = this.window = new Subject();\n        destination.next(newWindow);\n    };\n    return WindowSubscriber;\n}(OuterSubscriber));\n\nvar __extends$88 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Branch out the source Observable values as a nested Observable with each\n * nested Observable emitting at most `windowSize` values.\n *\n * <span class=\"informal\">It's like {@link bufferCount}, but emits a nested\n * Observable instead of an array.</span>\n *\n * <img src=\"./img/windowCount.png\" width=\"100%\">\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits windows every `startWindowEvery`\n * items, each containing no more than `windowSize` items. When the source\n * Observable completes or encounters an error, the output Observable emits\n * the current window and propagates the notification from the source\n * Observable. If `startWindowEvery` is not provided, then new windows are\n * started immediately at the start of the source and when each window completes\n * with size `windowSize`.\n *\n * @example <caption>Ignore every 3rd click event, starting from the first one</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.windowCount(3)\n *   .map(win => win.skip(1)) // skip first of every 3 clicks\n *   .mergeAll(); // flatten the Observable-of-Observables\n * result.subscribe(x => console.log(x));\n *\n * @example <caption>Ignore every 3rd click event, starting from the third one</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.windowCount(2, 3)\n *   .mergeAll(); // flatten the Observable-of-Observables\n * result.subscribe(x => console.log(x));\n *\n * @see {@link window}\n * @see {@link windowTime}\n * @see {@link windowToggle}\n * @see {@link windowWhen}\n * @see {@link bufferCount}\n *\n * @param {number} windowSize The maximum number of values emitted by each\n * window.\n * @param {number} [startWindowEvery] Interval at which to start a new window.\n * For example if `startWindowEvery` is `2`, then a new window will be started\n * on every other value from the source. A new window is started at the\n * beginning of the source by default.\n * @return {Observable<Observable<T>>} An Observable of windows, which in turn\n * are Observable of values.\n * @method windowCount\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowCountSubscriber = /** @class */ (function (_super) {\n    __extends$88(WindowCountSubscriber, _super);\n    function WindowCountSubscriber(destination, windowSize, startWindowEvery) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.windowSize = windowSize;\n        _this.startWindowEvery = startWindowEvery;\n        _this.windows = [new Subject()];\n        _this.count = 0;\n        destination.next(_this.windows[0]);\n        return _this;\n    }\n    WindowCountSubscriber.prototype._next = function (value) {\n        var startWindowEvery = (this.startWindowEvery > 0) ? this.startWindowEvery : this.windowSize;\n        var destination = this.destination;\n        var windowSize = this.windowSize;\n        var windows = this.windows;\n        var len = windows.length;\n        for (var i = 0; i < len && !this.closed; i++) {\n            windows[i].next(value);\n        }\n        var c = this.count - windowSize + 1;\n        if (c >= 0 && c % startWindowEvery === 0 && !this.closed) {\n            windows.shift().complete();\n        }\n        if (++this.count % startWindowEvery === 0 && !this.closed) {\n            var window_1 = new Subject();\n            windows.push(window_1);\n            destination.next(window_1);\n        }\n    };\n    WindowCountSubscriber.prototype._error = function (err) {\n        var windows = this.windows;\n        if (windows) {\n            while (windows.length > 0 && !this.closed) {\n                windows.shift().error(err);\n            }\n        }\n        this.destination.error(err);\n    };\n    WindowCountSubscriber.prototype._complete = function () {\n        var windows = this.windows;\n        if (windows) {\n            while (windows.length > 0 && !this.closed) {\n                windows.shift().complete();\n            }\n        }\n        this.destination.complete();\n    };\n    WindowCountSubscriber.prototype._unsubscribe = function () {\n        this.count = 0;\n        this.windows = null;\n    };\n    return WindowCountSubscriber;\n}(Subscriber));\n\nvar __extends$89 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar CountedSubject = /** @class */ (function (_super) {\n    __extends$89(CountedSubject, _super);\n    function CountedSubject() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._numberOfNextedValues = 0;\n        return _this;\n    }\n    CountedSubject.prototype.next = function (value) {\n        this._numberOfNextedValues++;\n        _super.prototype.next.call(this, value);\n    };\n    Object.defineProperty(CountedSubject.prototype, \"numberOfNextedValues\", {\n        get: function () {\n            return this._numberOfNextedValues;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return CountedSubject;\n}(Subject));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowTimeSubscriber = /** @class */ (function (_super) {\n    __extends$89(WindowTimeSubscriber, _super);\n    function WindowTimeSubscriber(destination, windowTimeSpan, windowCreationInterval, maxWindowSize, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.windowTimeSpan = windowTimeSpan;\n        _this.windowCreationInterval = windowCreationInterval;\n        _this.maxWindowSize = maxWindowSize;\n        _this.scheduler = scheduler;\n        _this.windows = [];\n        var window = _this.openWindow();\n        if (windowCreationInterval !== null && windowCreationInterval >= 0) {\n            var closeState = { subscriber: _this, window: window, context: null };\n            var creationState = { windowTimeSpan: windowTimeSpan, windowCreationInterval: windowCreationInterval, subscriber: _this, scheduler: scheduler };\n            _this.add(scheduler.schedule(dispatchWindowClose, windowTimeSpan, closeState));\n            _this.add(scheduler.schedule(dispatchWindowCreation, windowCreationInterval, creationState));\n        }\n        else {\n            var timeSpanOnlyState = { subscriber: _this, window: window, windowTimeSpan: windowTimeSpan };\n            _this.add(scheduler.schedule(dispatchWindowTimeSpanOnly, windowTimeSpan, timeSpanOnlyState));\n        }\n        return _this;\n    }\n    WindowTimeSubscriber.prototype._next = function (value) {\n        var windows = this.windows;\n        var len = windows.length;\n        for (var i = 0; i < len; i++) {\n            var window_1 = windows[i];\n            if (!window_1.closed) {\n                window_1.next(value);\n                if (window_1.numberOfNextedValues >= this.maxWindowSize) {\n                    this.closeWindow(window_1);\n                }\n            }\n        }\n    };\n    WindowTimeSubscriber.prototype._error = function (err) {\n        var windows = this.windows;\n        while (windows.length > 0) {\n            windows.shift().error(err);\n        }\n        this.destination.error(err);\n    };\n    WindowTimeSubscriber.prototype._complete = function () {\n        var windows = this.windows;\n        while (windows.length > 0) {\n            var window_2 = windows.shift();\n            if (!window_2.closed) {\n                window_2.complete();\n            }\n        }\n        this.destination.complete();\n    };\n    WindowTimeSubscriber.prototype.openWindow = function () {\n        var window = new CountedSubject();\n        this.windows.push(window);\n        var destination = this.destination;\n        destination.next(window);\n        return window;\n    };\n    WindowTimeSubscriber.prototype.closeWindow = function (window) {\n        window.complete();\n        var windows = this.windows;\n        windows.splice(windows.indexOf(window), 1);\n    };\n    return WindowTimeSubscriber;\n}(Subscriber));\nfunction dispatchWindowTimeSpanOnly(state) {\n    var subscriber = state.subscriber, windowTimeSpan = state.windowTimeSpan, window = state.window;\n    if (window) {\n        subscriber.closeWindow(window);\n    }\n    state.window = subscriber.openWindow();\n    this.schedule(state, windowTimeSpan);\n}\nfunction dispatchWindowCreation(state) {\n    var windowTimeSpan = state.windowTimeSpan, subscriber = state.subscriber, scheduler = state.scheduler, windowCreationInterval = state.windowCreationInterval;\n    var window = subscriber.openWindow();\n    var action = this;\n    var context = { action: action, subscription: null };\n    var timeSpanState = { subscriber: subscriber, window: window, context: context };\n    context.subscription = scheduler.schedule(dispatchWindowClose, windowTimeSpan, timeSpanState);\n    action.add(context.subscription);\n    action.schedule(state, windowCreationInterval);\n}\nfunction dispatchWindowClose(state) {\n    var subscriber = state.subscriber, window = state.window, context = state.context;\n    if (context && context.action && context.subscription) {\n        context.action.remove(context.subscription);\n    }\n    subscriber.closeWindow(window);\n}\n\nvar __extends$90 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Branch out the source Observable values as a nested Observable starting from\n * an emission from `openings` and ending when the output of `closingSelector`\n * emits.\n *\n * <span class=\"informal\">It's like {@link bufferToggle}, but emits a nested\n * Observable instead of an array.</span>\n *\n * <img src=\"./img/windowToggle.png\" width=\"100%\">\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits windows that contain those items\n * emitted by the source Observable between the time when the `openings`\n * Observable emits an item and when the Observable returned by\n * `closingSelector` emits an item.\n *\n * @example <caption>Every other second, emit the click events from the next 500ms</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var openings = Rx.Observable.interval(1000);\n * var result = clicks.windowToggle(openings, i =>\n *   i % 2 ? Rx.Observable.interval(500) : Rx.Observable.empty()\n * ).mergeAll();\n * result.subscribe(x => console.log(x));\n *\n * @see {@link window}\n * @see {@link windowCount}\n * @see {@link windowTime}\n * @see {@link windowWhen}\n * @see {@link bufferToggle}\n *\n * @param {Observable<O>} openings An observable of notifications to start new\n * windows.\n * @param {function(value: O): Observable} closingSelector A function that takes\n * the value emitted by the `openings` observable and returns an Observable,\n * which, when it emits (either `next` or `complete`), signals that the\n * associated window should complete.\n * @return {Observable<Observable<T>>} An observable of windows, which in turn\n * are Observables.\n * @method windowToggle\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowToggleSubscriber = /** @class */ (function (_super) {\n    __extends$90(WindowToggleSubscriber, _super);\n    function WindowToggleSubscriber(destination, openings, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.openings = openings;\n        _this.closingSelector = closingSelector;\n        _this.contexts = [];\n        _this.add(_this.openSubscription = subscribeToResult(_this, openings, openings));\n        return _this;\n    }\n    WindowToggleSubscriber.prototype._next = function (value) {\n        var contexts = this.contexts;\n        if (contexts) {\n            var len = contexts.length;\n            for (var i = 0; i < len; i++) {\n                contexts[i].window.next(value);\n            }\n        }\n    };\n    WindowToggleSubscriber.prototype._error = function (err) {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context = contexts[index];\n                context.window.error(err);\n                context.subscription.unsubscribe();\n            }\n        }\n        _super.prototype._error.call(this, err);\n    };\n    WindowToggleSubscriber.prototype._complete = function () {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context = contexts[index];\n                context.window.complete();\n                context.subscription.unsubscribe();\n            }\n        }\n        _super.prototype._complete.call(this);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    WindowToggleSubscriber.prototype._unsubscribe = function () {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context = contexts[index];\n                context.window.unsubscribe();\n                context.subscription.unsubscribe();\n            }\n        }\n    };\n    WindowToggleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        if (outerValue === this.openings) {\n            var closingSelector = this.closingSelector;\n            var closingNotifier = tryCatch(closingSelector)(innerValue);\n            if (closingNotifier === errorObject) {\n                return this.error(errorObject.e);\n            }\n            else {\n                var window_1 = new Subject();\n                var subscription = new Subscription();\n                var context = { window: window_1, subscription: subscription };\n                this.contexts.push(context);\n                var innerSubscription = subscribeToResult(this, closingNotifier, context);\n                if (innerSubscription.closed) {\n                    this.closeWindow(this.contexts.length - 1);\n                }\n                else {\n                    innerSubscription.context = context;\n                    subscription.add(innerSubscription);\n                }\n                this.destination.next(window_1);\n            }\n        }\n        else {\n            this.closeWindow(this.contexts.indexOf(outerValue));\n        }\n    };\n    WindowToggleSubscriber.prototype.notifyError = function (err) {\n        this.error(err);\n    };\n    WindowToggleSubscriber.prototype.notifyComplete = function (inner) {\n        if (inner !== this.openSubscription) {\n            this.closeWindow(this.contexts.indexOf(inner.context));\n        }\n    };\n    WindowToggleSubscriber.prototype.closeWindow = function (index) {\n        if (index === -1) {\n            return;\n        }\n        var contexts = this.contexts;\n        var context = contexts[index];\n        var window = context.window, subscription = context.subscription;\n        contexts.splice(index, 1);\n        window.complete();\n        subscription.unsubscribe();\n    };\n    return WindowToggleSubscriber;\n}(OuterSubscriber));\n\nvar __extends$91 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Branch out the source Observable values as a nested Observable using a\n * factory function of closing Observables to determine when to start a new\n * window.\n *\n * <span class=\"informal\">It's like {@link bufferWhen}, but emits a nested\n * Observable instead of an array.</span>\n *\n * <img src=\"./img/windowWhen.png\" width=\"100%\">\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits connected, non-overlapping windows.\n * It emits the current window and opens a new one whenever the Observable\n * produced by the specified `closingSelector` function emits an item. The first\n * window is opened immediately when subscribing to the output Observable.\n *\n * @example <caption>Emit only the first two clicks events in every window of [1-5] random seconds</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks\n *   .windowWhen(() => Rx.Observable.interval(1000 + Math.random() * 4000))\n *   .map(win => win.take(2)) // each window has at most 2 emissions\n *   .mergeAll(); // flatten the Observable-of-Observables\n * result.subscribe(x => console.log(x));\n *\n * @see {@link window}\n * @see {@link windowCount}\n * @see {@link windowTime}\n * @see {@link windowToggle}\n * @see {@link bufferWhen}\n *\n * @param {function(): Observable} closingSelector A function that takes no\n * arguments and returns an Observable that signals (on either `next` or\n * `complete`) when to close the previous window and start a new one.\n * @return {Observable<Observable<T>>} An observable of windows, which in turn\n * are Observables.\n * @method windowWhen\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowSubscriber$1 = /** @class */ (function (_super) {\n    __extends$91(WindowSubscriber, _super);\n    function WindowSubscriber(destination, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.closingSelector = closingSelector;\n        _this.openWindow();\n        return _this;\n    }\n    WindowSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.openWindow(innerSub);\n    };\n    WindowSubscriber.prototype.notifyError = function (error, innerSub) {\n        this._error(error);\n    };\n    WindowSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.openWindow(innerSub);\n    };\n    WindowSubscriber.prototype._next = function (value) {\n        this.window.next(value);\n    };\n    WindowSubscriber.prototype._error = function (err) {\n        this.window.error(err);\n        this.destination.error(err);\n        this.unsubscribeClosingNotification();\n    };\n    WindowSubscriber.prototype._complete = function () {\n        this.window.complete();\n        this.destination.complete();\n        this.unsubscribeClosingNotification();\n    };\n    WindowSubscriber.prototype.unsubscribeClosingNotification = function () {\n        if (this.closingNotification) {\n            this.closingNotification.unsubscribe();\n        }\n    };\n    WindowSubscriber.prototype.openWindow = function (innerSub) {\n        if (innerSub === void 0) { innerSub = null; }\n        if (innerSub) {\n            this.remove(innerSub);\n            innerSub.unsubscribe();\n        }\n        var prevWindow = this.window;\n        if (prevWindow) {\n            prevWindow.complete();\n        }\n        var window = this.window = new Subject();\n        this.destination.next(window);\n        var closingNotifier = tryCatch(this.closingSelector)();\n        if (closingNotifier === errorObject) {\n            var err = errorObject.e;\n            this.destination.error(err);\n            this.window.error(err);\n        }\n        else {\n            this.add(this.closingNotification = subscribeToResult(this, closingNotifier));\n        }\n    };\n    return WindowSubscriber;\n}(OuterSubscriber));\n\nvar __extends$92 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read$12 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$12 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$12(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Combines the source Observable with other Observables to create an Observable\n * whose values are calculated from the latest values of each, only when the\n * source emits.\n *\n * <span class=\"informal\">Whenever the source Observable emits a value, it\n * computes a formula using that value plus the latest values from other input\n * Observables, then emits the output of that formula.</span>\n *\n * <img src=\"./img/withLatestFrom.png\" width=\"100%\">\n *\n * `withLatestFrom` combines each value from the source Observable (the\n * instance) with the latest values from the other input Observables only when\n * the source emits a value, optionally using a `project` function to determine\n * the value to be emitted on the output Observable. All input Observables must\n * emit at least one value before the output Observable will emit a value.\n *\n * @example <caption>On every click event, emit an array with the latest timer event plus the click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var timer = Rx.Observable.interval(1000);\n * var result = clicks.withLatestFrom(timer);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link combineLatest}\n *\n * @param {ObservableInput} other An input Observable to combine with the source\n * Observable. More than one input Observables may be given as argument.\n * @param {Function} [project] Projection function for combining values\n * together. Receives all values in order of the Observables passed, where the\n * first parameter is a value from the source Observable. (e.g.\n * `a.withLatestFrom(b, c, (a1, b1, c1) => a1 + b1 + c1)`). If this is not\n * passed, arrays will be emitted on the output Observable.\n * @return {Observable} An Observable of projected values from the most recent\n * values from each input Observable, or an array of the most recent values from\n * each input Observable.\n * @method withLatestFrom\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WithLatestFromSubscriber = /** @class */ (function (_super) {\n    __extends$92(WithLatestFromSubscriber, _super);\n    function WithLatestFromSubscriber(destination, observables, project) {\n        var _this = _super.call(this, destination) || this;\n        _this.observables = observables;\n        _this.project = project;\n        _this.toRespond = [];\n        var len = observables.length;\n        _this.values = new Array(len);\n        for (var i = 0; i < len; i++) {\n            _this.toRespond.push(i);\n        }\n        for (var i = 0; i < len; i++) {\n            var observable = observables[i];\n            _this.add(subscribeToResult(_this, observable, observable, i));\n        }\n        return _this;\n    }\n    WithLatestFromSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.values[outerIndex] = innerValue;\n        var toRespond = this.toRespond;\n        if (toRespond.length > 0) {\n            var found = toRespond.indexOf(outerIndex);\n            if (found !== -1) {\n                toRespond.splice(found, 1);\n            }\n        }\n    };\n    WithLatestFromSubscriber.prototype.notifyComplete = function () {\n        // noop\n    };\n    WithLatestFromSubscriber.prototype._next = function (value) {\n        if (this.toRespond.length === 0) {\n            var args = __spread$12([value], this.values);\n            if (this.project) {\n                this._tryProject(args);\n            }\n            else {\n                this.destination.next(args);\n            }\n        }\n    };\n    WithLatestFromSubscriber.prototype._tryProject = function (args) {\n        var result;\n        try {\n            result = this.project.apply(this, args);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return WithLatestFromSubscriber;\n}(OuterSubscriber));\n\nvar __read$13 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$13 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$13(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * @deprecated Deprecated in favor of static zip.\n */\n\n/* Operator exports */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Determine if the argument is shaped like a Promise\n */\nfunction isPromise$2(obj) {\n    // allow any Promise/A+ compliant thenable.\n    // It's up to the caller to ensure that obj.then conforms to the spec\n    return !!obj && typeof obj.then === 'function';\n}\n/**\n * Determine if the argument is an Observable\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A function that will be executed when an application is initialized.\n * @experimental\n */\nvar APP_INITIALIZER = new InjectionToken('Application Initializer');\n/**\n * A class that reflects the state of running {@link APP_INITIALIZER}s.\n *\n * @experimental\n */\nvar ApplicationInitStatus = /** @class */ (function () {\n    function ApplicationInitStatus(appInits) {\n        var _this = this;\n        this.appInits = appInits;\n        this.initialized = false;\n        this.done = false;\n        this.donePromise = new Promise(function (res, rej) {\n            _this.resolve = res;\n            _this.reject = rej;\n        });\n    }\n    /** @internal */\n    /** @internal */\n    ApplicationInitStatus.prototype.runInitializers = /** @internal */\n    function () {\n        var _this = this;\n        if (this.initialized) {\n            return;\n        }\n        var asyncInitPromises = [];\n        var complete = function () {\n            _this.done = true;\n            _this.resolve();\n        };\n        if (this.appInits) {\n            for (var i = 0; i < this.appInits.length; i++) {\n                var initResult = this.appInits[i]();\n                if (isPromise$2(initResult)) {\n                    asyncInitPromises.push(initResult);\n                }\n            }\n        }\n        Promise.all(asyncInitPromises).then(function () { complete(); }).catch(function (e) { _this.reject(e); });\n        if (asyncInitPromises.length === 0) {\n            complete();\n        }\n        this.initialized = true;\n    };\n    ApplicationInitStatus.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    ApplicationInitStatus.ctorParameters = function () { return [\n        { type: Array, decorators: [{ type: Inject, args: [APP_INITIALIZER,] }, { type: Optional },] },\n    ]; };\n    return ApplicationInitStatus;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A DI Token representing a unique string id assigned to the application by Angular and used\n * primarily for prefixing application attributes and CSS styles when\n * {@link ViewEncapsulation#Emulated ViewEncapsulation.Emulated} is being used.\n *\n * If you need to avoid randomly generated value to be used as an application id, you can provide\n * a custom value via a DI provider <!-- TODO: provider --> configuring the root {@link Injector}\n * using this token.\n * @experimental\n */\nvar APP_ID = new InjectionToken('AppId');\nfunction _appIdRandomProviderFactory() {\n    return \"\" + _randomChar() + _randomChar() + _randomChar();\n}\n/**\n * Providers that will generate a random APP_ID_TOKEN.\n * @experimental\n */\nvar APP_ID_RANDOM_PROVIDER = {\n    provide: APP_ID,\n    useFactory: _appIdRandomProviderFactory,\n    deps: [],\n};\nfunction _randomChar() {\n    return String.fromCharCode(97 + Math.floor(Math.random() * 25));\n}\n/**\n * A function that will be executed when a platform is initialized.\n * @experimental\n */\nvar PLATFORM_INITIALIZER = new InjectionToken('Platform Initializer');\n/**\n * A token that indicates an opaque platform id.\n * @experimental\n */\nvar PLATFORM_ID = new InjectionToken('Platform ID');\n/**\n * All callbacks provided via this token will be called for every component that is bootstrapped.\n * Signature of the callback:\n *\n * `(componentRef: ComponentRef) => void`.\n *\n * @experimental\n */\nvar APP_BOOTSTRAP_LISTENER = new InjectionToken('appBootstrapListener');\n/**\n * A token which indicates the root directory of the application\n * @experimental\n */\nvar PACKAGE_ROOT_URL = new InjectionToken('Application Packages Root URL');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Console = /** @class */ (function () {\n    function Console() {\n    }\n    Console.prototype.log = function (message) {\n        // tslint:disable-next-line:no-console\n        console.log(message);\n    };\n    // Note: for reporting errors use `DOM.logError()` as it is platform specific\n    // Note: for reporting errors use `DOM.logError()` as it is platform specific\n    Console.prototype.warn = \n    // Note: for reporting errors use `DOM.logError()` as it is platform specific\n    function (message) {\n        // tslint:disable-next-line:no-console\n        console.warn(message);\n    };\n    Console.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    Console.ctorParameters = function () { return []; };\n    return Console;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction _throwError() {\n    throw new Error(\"Runtime compiler is not loaded\");\n}\n/**\n * Low-level service for running the angular compiler during runtime\n * to create {@link ComponentFactory}s, which\n * can later be used to create and render a Component instance.\n *\n * Each `@NgModule` provides an own `Compiler` to its injector,\n * that will use the directives/pipes of the ng module for compilation\n * of components.\n *\n */\nvar Compiler = /** @class */ (function () {\n    function Compiler() {\n    }\n    /**\n     * Compiles the given NgModule and all of its components. All templates of the components listed\n     * in `entryComponents` have to be inlined.\n     */\n    /**\n       * Compiles the given NgModule and all of its components. All templates of the components listed\n       * in `entryComponents` have to be inlined.\n       */\n    Compiler.prototype.compileModuleSync = /**\n       * Compiles the given NgModule and all of its components. All templates of the components listed\n       * in `entryComponents` have to be inlined.\n       */\n    function (moduleType) { throw _throwError(); };\n    /**\n     * Compiles the given NgModule and all of its components\n     */\n    /**\n       * Compiles the given NgModule and all of its components\n       */\n    Compiler.prototype.compileModuleAsync = /**\n       * Compiles the given NgModule and all of its components\n       */\n    function (moduleType) { throw _throwError(); };\n    /**\n     * Same as {@link #compileModuleSync} but also creates ComponentFactories for all components.\n     */\n    /**\n       * Same as {@link #compileModuleSync} but also creates ComponentFactories for all components.\n       */\n    Compiler.prototype.compileModuleAndAllComponentsSync = /**\n       * Same as {@link #compileModuleSync} but also creates ComponentFactories for all components.\n       */\n    function (moduleType) {\n        throw _throwError();\n    };\n    /**\n     * Same as {@link #compileModuleAsync} but also creates ComponentFactories for all components.\n     */\n    /**\n       * Same as {@link #compileModuleAsync} but also creates ComponentFactories for all components.\n       */\n    Compiler.prototype.compileModuleAndAllComponentsAsync = /**\n       * Same as {@link #compileModuleAsync} but also creates ComponentFactories for all components.\n       */\n    function (moduleType) {\n        throw _throwError();\n    };\n    /**\n     * Clears all caches.\n     */\n    /**\n       * Clears all caches.\n       */\n    Compiler.prototype.clearCache = /**\n       * Clears all caches.\n       */\n    function () { };\n    /**\n     * Clears the cache for the given component/ngModule.\n     */\n    /**\n       * Clears the cache for the given component/ngModule.\n       */\n    Compiler.prototype.clearCacheFor = /**\n       * Clears the cache for the given component/ngModule.\n       */\n    function (type) { };\n    Compiler.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    Compiler.ctorParameters = function () { return []; };\n    return Compiler;\n}());\n/**\n * Token to provide CompilerOptions in the platform injector.\n *\n * @experimental\n */\nvar COMPILER_OPTIONS = new InjectionToken('compilerOptions');\n/**\n * A factory for creating a Compiler\n *\n * @experimental\n */\nvar CompilerFactory = /** @class */ (function () {\n    function CompilerFactory() {\n    }\n    return CompilerFactory;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Represents an instance of a Component created via a {@link ComponentFactory}.\n *\n * `ComponentRef` provides access to the Component Instance as well other objects related to this\n * Component Instance and allows you to destroy the Component Instance via the {@link #destroy}\n * method.\n *\n */\nvar ComponentRef = /** @class */ (function () {\n    function ComponentRef() {\n    }\n    return ComponentRef;\n}());\n/**\n *\n */\nvar ComponentFactory = /** @class */ (function () {\n    function ComponentFactory() {\n    }\n    return ComponentFactory;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction noComponentFactoryError(component) {\n    var error = Error(\"No component factory found for \" + stringify$1(component) + \". Did you add it to @NgModule.entryComponents?\");\n    error[ERROR_COMPONENT] = component;\n    return error;\n}\nvar ERROR_COMPONENT = 'ngComponent';\n\nvar _NullComponentFactoryResolver = /** @class */ (function () {\n    function _NullComponentFactoryResolver() {\n    }\n    _NullComponentFactoryResolver.prototype.resolveComponentFactory = function (component) {\n        throw noComponentFactoryError(component);\n    };\n    return _NullComponentFactoryResolver;\n}());\n/**\n *\n */\nvar ComponentFactoryResolver = /** @class */ (function () {\n    function ComponentFactoryResolver() {\n    }\n    ComponentFactoryResolver.NULL = new _NullComponentFactoryResolver();\n    return ComponentFactoryResolver;\n}());\nvar ComponentFactoryBoundToModule = /** @class */ (function (_super) {\n    __extends(ComponentFactoryBoundToModule, _super);\n    function ComponentFactoryBoundToModule(factory, ngModule) {\n        var _this = _super.call(this) || this;\n        _this.factory = factory;\n        _this.ngModule = ngModule;\n        _this.selector = factory.selector;\n        _this.componentType = factory.componentType;\n        _this.ngContentSelectors = factory.ngContentSelectors;\n        _this.inputs = factory.inputs;\n        _this.outputs = factory.outputs;\n        return _this;\n    }\n    ComponentFactoryBoundToModule.prototype.create = function (injector, projectableNodes, rootSelectorOrNode, ngModule) {\n        return this.factory.create(injector, projectableNodes, rootSelectorOrNode, ngModule || this.ngModule);\n    };\n    return ComponentFactoryBoundToModule;\n}(ComponentFactory));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Represents an instance of an NgModule created via a {@link NgModuleFactory}.\n *\n * `NgModuleRef` provides access to the NgModule Instance as well other objects related to this\n * NgModule Instance.\n *\n *\n */\nvar NgModuleRef = /** @class */ (function () {\n    function NgModuleRef() {\n    }\n    return NgModuleRef;\n}());\n/**\n * @experimental\n */\nvar NgModuleFactory = /** @class */ (function () {\n    function NgModuleFactory() {\n    }\n    return NgModuleFactory;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar trace;\nvar events;\nfunction detectWTF() {\n    var wtf = _global /** TODO #9100 */['wtf'];\n    if (wtf) {\n        trace = wtf['trace'];\n        if (trace) {\n            events = trace['events'];\n            return true;\n        }\n    }\n    return false;\n}\nfunction createScope(signature, flags) {\n    if (flags === void 0) { flags = null; }\n    return events.createScope(signature, flags);\n}\nfunction leave(scope, returnValue) {\n    trace.leaveScope(scope, returnValue);\n    return returnValue;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * True if WTF is enabled.\n */\nvar wtfEnabled = detectWTF();\nfunction noopScope(arg0, arg1) {\n    return null;\n}\n/**\n * Create trace scope.\n *\n * Scopes must be strictly nested and are analogous to stack frames, but\n * do not have to follow the stack frames. Instead it is recommended that they follow logical\n * nesting. You may want to use\n * [Event\n * Signatures](http://google.github.io/tracing-framework/instrumenting-code.html#custom-events)\n * as they are defined in WTF.\n *\n * Used to mark scope entry. The return value is used to leave the scope.\n *\n *     var myScope = wtfCreateScope('MyClass#myMethod(ascii someVal)');\n *\n *     someMethod() {\n *        var s = myScope('Foo'); // 'Foo' gets stored in tracing UI\n *        // DO SOME WORK HERE\n *        return wtfLeave(s, 123); // Return value 123\n *     }\n *\n * Note, adding try-finally block around the work to ensure that `wtfLeave` gets called can\n * negatively impact the performance of your application. For this reason we recommend that\n * you don't add them to ensure that `wtfLeave` gets called. In production `wtfLeave` is a noop and\n * so try-finally block has no value. When debugging perf issues, skipping `wtfLeave`, do to\n * exception, will produce incorrect trace, but presence of exception signifies logic error which\n * needs to be fixed before the app should be profiled. Add try-finally only when you expect that\n * an exception is expected during normal execution while profiling.\n *\n * @experimental\n */\nvar wtfCreateScope = wtfEnabled ? createScope : function (signature, flags) { return noopScope; };\n/**\n * Used to mark end of Scope.\n *\n * - `scope` to end.\n * - `returnValue` (optional) to be passed to the WTF.\n *\n * Returns the `returnValue for easy chaining.\n * @experimental\n */\nvar wtfLeave = wtfEnabled ? leave : function (s, r) { return r; };\n/**\n * Used to mark Async start. Async are similar to scope but they don't have to be strictly nested.\n * The return value is used in the call to [endAsync]. Async ranges only work if WTF has been\n * enabled.\n *\n *     someMethod() {\n *        var s = wtfStartTimeRange('HTTP:GET', 'some.url');\n *        var future = new Future.delay(5).then((_) {\n *          wtfEndTimeRange(s);\n *        });\n *     }\n * @experimental\n */\n\n/**\n * Ends a async time range operation.\n * [range] is the return value from [wtfStartTimeRange] Async ranges only work if WTF has been\n * enabled.\n * @experimental\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Use by directives and components to emit custom Events.\n *\n * ### Examples\n *\n * In the following example, `Zippy` alternatively emits `open` and `close` events when its\n * title gets clicked:\n *\n * ```\n * @Component({\n *   selector: 'zippy',\n *   template: `\n *   <div class=\"zippy\">\n *     <div (click)=\"toggle()\">Toggle</div>\n *     <div [hidden]=\"!visible\">\n *       <ng-content></ng-content>\n *     </div>\n *  </div>`})\n * export class Zippy {\n *   visible: boolean = true;\n *   @Output() open: EventEmitter<any> = new EventEmitter();\n *   @Output() close: EventEmitter<any> = new EventEmitter();\n *\n *   toggle() {\n *     this.visible = !this.visible;\n *     if (this.visible) {\n *       this.open.emit(null);\n *     } else {\n *       this.close.emit(null);\n *     }\n *   }\n * }\n * ```\n *\n * The events payload can be accessed by the parameter `$event` on the components output event\n * handler:\n *\n * ```\n * <zippy (open)=\"onOpen($event)\" (close)=\"onClose($event)\"></zippy>\n * ```\n *\n * Uses Rx.Observable but provides an adapter to make it work as specified here:\n * https://github.com/jhusain/observable-spec\n *\n * Once a reference implementation of the spec is available, switch to it.\n *\n */\nvar EventEmitter = /** @class */ (function (_super) {\n    __extends(EventEmitter, _super);\n    /**\n     * Creates an instance of {@link EventEmitter}, which depending on `isAsync`,\n     * delivers events synchronously or asynchronously.\n     *\n     * @param isAsync By default, events are delivered synchronously (default value: `false`).\n     * Set to `true` for asynchronous event delivery.\n     */\n    function EventEmitter(isAsync) {\n        if (isAsync === void 0) { isAsync = false; }\n        var _this = _super.call(this) || this;\n        _this.__isAsync = isAsync;\n        return _this;\n    }\n    EventEmitter.prototype.emit = function (value) { _super.prototype.next.call(this, value); };\n    EventEmitter.prototype.subscribe = function (generatorOrNext, error, complete) {\n        var schedulerFn;\n        var errorFn = function (err) { return null; };\n        var completeFn = function () { return null; };\n        if (generatorOrNext && typeof generatorOrNext === 'object') {\n            schedulerFn = this.__isAsync ? function (value) {\n                setTimeout(function () { return generatorOrNext.next(value); });\n            } : function (value) { generatorOrNext.next(value); };\n            if (generatorOrNext.error) {\n                errorFn = this.__isAsync ? function (err) { setTimeout(function () { return generatorOrNext.error(err); }); } :\n                    function (err) { generatorOrNext.error(err); };\n            }\n            if (generatorOrNext.complete) {\n                completeFn = this.__isAsync ? function () { setTimeout(function () { return generatorOrNext.complete(); }); } :\n                    function () { generatorOrNext.complete(); };\n            }\n        }\n        else {\n            schedulerFn = this.__isAsync ? function (value) { setTimeout(function () { return generatorOrNext(value); }); } :\n                function (value) { generatorOrNext(value); };\n            if (error) {\n                errorFn =\n                    this.__isAsync ? function (err) { setTimeout(function () { return error(err); }); } : function (err) { error(err); };\n            }\n            if (complete) {\n                completeFn =\n                    this.__isAsync ? function () { setTimeout(function () { return complete(); }); } : function () { complete(); };\n            }\n        }\n        var sink = _super.prototype.subscribe.call(this, schedulerFn, errorFn, completeFn);\n        if (generatorOrNext instanceof Subscription) {\n            generatorOrNext.add(sink);\n        }\n        return sink;\n    };\n    return EventEmitter;\n}(Subject));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An injectable service for executing work inside or outside of the Angular zone.\n *\n * The most common use of this service is to optimize performance when starting a work consisting of\n * one or more asynchronous tasks that don't require UI updates or error handling to be handled by\n * Angular. Such tasks can be kicked off via {@link #runOutsideAngular} and if needed, these tasks\n * can reenter the Angular zone via {@link #run}.\n *\n * <!-- TODO: add/fix links to:\n *   - docs explaining zones and the use of zones in Angular and change-detection\n *   - link to runOutsideAngular/run (throughout this file!)\n *   -->\n *\n * ### Example\n *\n * ```\n * import {Component, NgZone} from '@angular/core';\n * import {NgIf} from '@angular/common';\n *\n * @Component({\n *   selector: 'ng-zone-demo',\n *   template: `\n *     <h2>Demo: NgZone</h2>\n *\n *     <p>Progress: {{progress}}%</p>\n *     <p *ngIf=\"progress >= 100\">Done processing {{label}} of Angular zone!</p>\n *\n *     <button (click)=\"processWithinAngularZone()\">Process within Angular zone</button>\n *     <button (click)=\"processOutsideOfAngularZone()\">Process outside of Angular zone</button>\n *   `,\n * })\n * export class NgZoneDemo {\n *   progress: number = 0;\n *   label: string;\n *\n *   constructor(private _ngZone: NgZone) {}\n *\n *   // Loop inside the Angular zone\n *   // so the UI DOES refresh after each setTimeout cycle\n *   processWithinAngularZone() {\n *     this.label = 'inside';\n *     this.progress = 0;\n *     this._increaseProgress(() => console.log('Inside Done!'));\n *   }\n *\n *   // Loop outside of the Angular zone\n *   // so the UI DOES NOT refresh after each setTimeout cycle\n *   processOutsideOfAngularZone() {\n *     this.label = 'outside';\n *     this.progress = 0;\n *     this._ngZone.runOutsideAngular(() => {\n *       this._increaseProgress(() => {\n *         // reenter the Angular zone and display done\n *         this._ngZone.run(() => { console.log('Outside Done!'); });\n *       });\n *     });\n *   }\n *\n *   _increaseProgress(doneCallback: () => void) {\n *     this.progress += 1;\n *     console.log(`Current progress: ${this.progress}%`);\n *\n *     if (this.progress < 100) {\n *       window.setTimeout(() => this._increaseProgress(doneCallback), 10);\n *     } else {\n *       doneCallback();\n *     }\n *   }\n * }\n * ```\n *\n * @experimental\n */\nvar NgZone = /** @class */ (function () {\n    function NgZone(_a) {\n        var _b = _a.enableLongStackTrace, enableLongStackTrace = _b === void 0 ? false : _b;\n        this.hasPendingMicrotasks = false;\n        this.hasPendingMacrotasks = false;\n        /**\n           * Whether there are no outstanding microtasks or macrotasks.\n           */\n        this.isStable = true;\n        /**\n           * Notifies when code enters Angular Zone. This gets fired first on VM Turn.\n           */\n        this.onUnstable = new EventEmitter(false);\n        /**\n           * Notifies when there is no more microtasks enqueued in the current VM Turn.\n           * This is a hint for Angular to do change detection, which may enqueue more microtasks.\n           * For this reason this event can fire multiple times per VM Turn.\n           */\n        this.onMicrotaskEmpty = new EventEmitter(false);\n        /**\n           * Notifies when the last `onMicrotaskEmpty` has run and there are no more microtasks, which\n           * implies we are about to relinquish VM turn.\n           * This event gets called just once.\n           */\n        this.onStable = new EventEmitter(false);\n        /**\n           * Notifies that an error has been delivered.\n           */\n        this.onError = new EventEmitter(false);\n        if (typeof Zone == 'undefined') {\n            throw new Error(\"In this configuration Angular requires Zone.js\");\n        }\n        Zone.assertZonePatched();\n        var self = this;\n        self._nesting = 0;\n        self._outer = self._inner = Zone.current;\n        if (Zone['wtfZoneSpec']) {\n            self._inner = self._inner.fork(Zone['wtfZoneSpec']);\n        }\n        if (Zone['TaskTrackingZoneSpec']) {\n            self._inner = self._inner.fork(new Zone['TaskTrackingZoneSpec']);\n        }\n        if (enableLongStackTrace && Zone['longStackTraceZoneSpec']) {\n            self._inner = self._inner.fork(Zone['longStackTraceZoneSpec']);\n        }\n        forkInnerZoneWithAngularBehavior(self);\n    }\n    NgZone.isInAngularZone = function () { return Zone.current.get('isAngularZone') === true; };\n    NgZone.assertInAngularZone = function () {\n        if (!NgZone.isInAngularZone()) {\n            throw new Error('Expected to be in Angular Zone, but it is not!');\n        }\n    };\n    NgZone.assertNotInAngularZone = function () {\n        if (NgZone.isInAngularZone()) {\n            throw new Error('Expected to not be in Angular Zone, but it is!');\n        }\n    };\n    /**\n     * Executes the `fn` function synchronously within the Angular zone and returns value returned by\n     * the function.\n     *\n     * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n     * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n     *\n     * Any future tasks or microtasks scheduled from within this function will continue executing from\n     * within the Angular zone.\n     *\n     * If a synchronous error happens it will be rethrown and not reported via `onError`.\n     */\n    /**\n       * Executes the `fn` function synchronously within the Angular zone and returns value returned by\n       * the function.\n       *\n       * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n       * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * within the Angular zone.\n       *\n       * If a synchronous error happens it will be rethrown and not reported via `onError`.\n       */\n    NgZone.prototype.run = /**\n       * Executes the `fn` function synchronously within the Angular zone and returns value returned by\n       * the function.\n       *\n       * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n       * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * within the Angular zone.\n       *\n       * If a synchronous error happens it will be rethrown and not reported via `onError`.\n       */\n    function (fn, applyThis, applyArgs) {\n        return this._inner.run(fn, applyThis, applyArgs);\n    };\n    /**\n     * Executes the `fn` function synchronously within the Angular zone as a task and returns value\n     * returned by the function.\n     *\n     * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n     * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n     *\n     * Any future tasks or microtasks scheduled from within this function will continue executing from\n     * within the Angular zone.\n     *\n     * If a synchronous error happens it will be rethrown and not reported via `onError`.\n     */\n    /**\n       * Executes the `fn` function synchronously within the Angular zone as a task and returns value\n       * returned by the function.\n       *\n       * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n       * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * within the Angular zone.\n       *\n       * If a synchronous error happens it will be rethrown and not reported via `onError`.\n       */\n    NgZone.prototype.runTask = /**\n       * Executes the `fn` function synchronously within the Angular zone as a task and returns value\n       * returned by the function.\n       *\n       * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n       * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * within the Angular zone.\n       *\n       * If a synchronous error happens it will be rethrown and not reported via `onError`.\n       */\n    function (fn, applyThis, applyArgs, name) {\n        var zone = this._inner;\n        var task = zone.scheduleEventTask('NgZoneEvent: ' + name, fn, EMPTY_PAYLOAD, noop$2, noop$2);\n        try {\n            return zone.runTask(task, applyThis, applyArgs);\n        }\n        finally {\n            zone.cancelTask(task);\n        }\n    };\n    /**\n     * Same as `run`, except that synchronous errors are caught and forwarded via `onError` and not\n     * rethrown.\n     */\n    /**\n       * Same as `run`, except that synchronous errors are caught and forwarded via `onError` and not\n       * rethrown.\n       */\n    NgZone.prototype.runGuarded = /**\n       * Same as `run`, except that synchronous errors are caught and forwarded via `onError` and not\n       * rethrown.\n       */\n    function (fn, applyThis, applyArgs) {\n        return this._inner.runGuarded(fn, applyThis, applyArgs);\n    };\n    /**\n     * Executes the `fn` function synchronously in Angular's parent zone and returns value returned by\n     * the function.\n     *\n     * Running functions via {@link #runOutsideAngular} allows you to escape Angular's zone and do\n     * work that\n     * doesn't trigger Angular change-detection or is subject to Angular's error handling.\n     *\n     * Any future tasks or microtasks scheduled from within this function will continue executing from\n     * outside of the Angular zone.\n     *\n     * Use {@link #run} to reenter the Angular zone and do work that updates the application model.\n     */\n    /**\n       * Executes the `fn` function synchronously in Angular's parent zone and returns value returned by\n       * the function.\n       *\n       * Running functions via {@link #runOutsideAngular} allows you to escape Angular's zone and do\n       * work that\n       * doesn't trigger Angular change-detection or is subject to Angular's error handling.\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * outside of the Angular zone.\n       *\n       * Use {@link #run} to reenter the Angular zone and do work that updates the application model.\n       */\n    NgZone.prototype.runOutsideAngular = /**\n       * Executes the `fn` function synchronously in Angular's parent zone and returns value returned by\n       * the function.\n       *\n       * Running functions via {@link #runOutsideAngular} allows you to escape Angular's zone and do\n       * work that\n       * doesn't trigger Angular change-detection or is subject to Angular's error handling.\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * outside of the Angular zone.\n       *\n       * Use {@link #run} to reenter the Angular zone and do work that updates the application model.\n       */\n    function (fn) {\n        return this._outer.run(fn);\n    };\n    return NgZone;\n}());\nfunction noop$2() { }\nvar EMPTY_PAYLOAD = {};\nfunction checkStable(zone) {\n    if (zone._nesting == 0 && !zone.hasPendingMicrotasks && !zone.isStable) {\n        try {\n            zone._nesting++;\n            zone.onMicrotaskEmpty.emit(null);\n        }\n        finally {\n            zone._nesting--;\n            if (!zone.hasPendingMicrotasks) {\n                try {\n                    zone.runOutsideAngular(function () { return zone.onStable.emit(null); });\n                }\n                finally {\n                    zone.isStable = true;\n                }\n            }\n        }\n    }\n}\nfunction forkInnerZoneWithAngularBehavior(zone) {\n    zone._inner = zone._inner.fork({\n        name: 'angular',\n        properties: { 'isAngularZone': true },\n        onInvokeTask: function (delegate, current, target, task, applyThis, applyArgs) {\n            try {\n                onEnter(zone);\n                return delegate.invokeTask(target, task, applyThis, applyArgs);\n            }\n            finally {\n                onLeave(zone);\n            }\n        },\n        onInvoke: function (delegate, current, target, callback, applyThis, applyArgs, source) {\n            try {\n                onEnter(zone);\n                return delegate.invoke(target, callback, applyThis, applyArgs, source);\n            }\n            finally {\n                onLeave(zone);\n            }\n        },\n        onHasTask: function (delegate, current, target, hasTaskState) {\n            delegate.hasTask(target, hasTaskState);\n            if (current === target) {\n                // We are only interested in hasTask events which originate from our zone\n                // (A child hasTask event is not interesting to us)\n                if (hasTaskState.change == 'microTask') {\n                    zone.hasPendingMicrotasks = hasTaskState.microTask;\n                    checkStable(zone);\n                }\n                else if (hasTaskState.change == 'macroTask') {\n                    zone.hasPendingMacrotasks = hasTaskState.macroTask;\n                }\n            }\n        },\n        onHandleError: function (delegate, current, target, error) {\n            delegate.handleError(target, error);\n            zone.runOutsideAngular(function () { return zone.onError.emit(error); });\n            return false;\n        }\n    });\n}\nfunction onEnter(zone) {\n    zone._nesting++;\n    if (zone.isStable) {\n        zone.isStable = false;\n        zone.onUnstable.emit(null);\n    }\n}\nfunction onLeave(zone) {\n    zone._nesting--;\n    checkStable(zone);\n}\n/**\n * Provides a noop implementation of `NgZone` which does nothing. This zone requires explicit calls\n * to framework to perform rendering.\n */\nvar NoopNgZone = /** @class */ (function () {\n    function NoopNgZone() {\n        this.hasPendingMicrotasks = false;\n        this.hasPendingMacrotasks = false;\n        this.isStable = true;\n        this.onUnstable = new EventEmitter();\n        this.onMicrotaskEmpty = new EventEmitter();\n        this.onStable = new EventEmitter();\n        this.onError = new EventEmitter();\n    }\n    NoopNgZone.prototype.run = function (fn) { return fn(); };\n    NoopNgZone.prototype.runGuarded = function (fn) { return fn(); };\n    NoopNgZone.prototype.runOutsideAngular = function (fn) { return fn(); };\n    NoopNgZone.prototype.runTask = function (fn) { return fn(); };\n    return NoopNgZone;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * The Testability service provides testing hooks that can be accessed from\n * the browser and by services such as Protractor. Each bootstrapped Angular\n * application on the page will have an instance of Testability.\n * @experimental\n */\nvar Testability = /** @class */ (function () {\n    function Testability(_ngZone) {\n        var _this = this;\n        this._ngZone = _ngZone;\n        this._pendingCount = 0;\n        this._isZoneStable = true;\n        /**\n           * Whether any work was done since the last 'whenStable' callback. This is\n           * useful to detect if this could have potentially destabilized another\n           * component while it is stabilizing.\n           * @internal\n           */\n        this._didWork = false;\n        this._callbacks = [];\n        this._watchAngularEvents();\n        _ngZone.run(function () { _this.taskTrackingZone = Zone.current.get('TaskTrackingZone'); });\n    }\n    Testability.prototype._watchAngularEvents = function () {\n        var _this = this;\n        this._ngZone.onUnstable.subscribe({\n            next: function () {\n                _this._didWork = true;\n                _this._isZoneStable = false;\n            }\n        });\n        this._ngZone.runOutsideAngular(function () {\n            _this._ngZone.onStable.subscribe({\n                next: function () {\n                    NgZone.assertNotInAngularZone();\n                    scheduleMicroTask(function () {\n                        _this._isZoneStable = true;\n                        _this._runCallbacksIfReady();\n                    });\n                }\n            });\n        });\n    };\n    /**\n     * Increases the number of pending request\n     * @deprecated pending requests are now tracked with zones.\n     */\n    /**\n       * Increases the number of pending request\n       * @deprecated pending requests are now tracked with zones.\n       */\n    Testability.prototype.increasePendingRequestCount = /**\n       * Increases the number of pending request\n       * @deprecated pending requests are now tracked with zones.\n       */\n    function () {\n        this._pendingCount += 1;\n        this._didWork = true;\n        return this._pendingCount;\n    };\n    /**\n     * Decreases the number of pending request\n     * @deprecated pending requests are now tracked with zones\n     */\n    /**\n       * Decreases the number of pending request\n       * @deprecated pending requests are now tracked with zones\n       */\n    Testability.prototype.decreasePendingRequestCount = /**\n       * Decreases the number of pending request\n       * @deprecated pending requests are now tracked with zones\n       */\n    function () {\n        this._pendingCount -= 1;\n        if (this._pendingCount < 0) {\n            throw new Error('pending async requests below zero');\n        }\n        this._runCallbacksIfReady();\n        return this._pendingCount;\n    };\n    /**\n     * Whether an associated application is stable\n     */\n    /**\n       * Whether an associated application is stable\n       */\n    Testability.prototype.isStable = /**\n       * Whether an associated application is stable\n       */\n    function () {\n        return this._isZoneStable && this._pendingCount === 0 && !this._ngZone.hasPendingMacrotasks;\n    };\n    Testability.prototype._runCallbacksIfReady = function () {\n        var _this = this;\n        if (this.isStable()) {\n            // Schedules the call backs in a new frame so that it is always async.\n            scheduleMicroTask(function () {\n                while (_this._callbacks.length !== 0) {\n                    var cb = (_this._callbacks.pop());\n                    clearTimeout(cb.timeoutId);\n                    cb.doneCb(_this._didWork);\n                }\n                _this._didWork = false;\n            });\n        }\n        else {\n            // Still not stable, send updates.\n            var pending_1 = this.getPendingTasks();\n            this._callbacks = this._callbacks.filter(function (cb) {\n                if (cb.updateCb && cb.updateCb(pending_1)) {\n                    clearTimeout(cb.timeoutId);\n                    return false;\n                }\n                return true;\n            });\n            this._didWork = true;\n        }\n    };\n    Testability.prototype.getPendingTasks = function () {\n        if (!this.taskTrackingZone) {\n            return [];\n        }\n        return this.taskTrackingZone.macroTasks.map(function (t) {\n            return {\n                source: t.source,\n                isPeriodic: t.data.isPeriodic,\n                delay: t.data.delay,\n                // From TaskTrackingZone:\n                // https://github.com/angular/zone.js/blob/master/lib/zone-spec/task-tracking.ts#L40\n                creationLocation: t.creationLocation,\n                // Added by Zones for XHRs\n                // https://github.com/angular/zone.js/blob/master/lib/browser/browser.ts#L133\n                xhr: t.data.target\n            };\n        });\n    };\n    Testability.prototype.addCallback = function (cb, timeout, updateCb) {\n        var _this = this;\n        var timeoutId = -1;\n        if (timeout && timeout > 0) {\n            timeoutId = setTimeout(function () {\n                _this._callbacks = _this._callbacks.filter(function (cb) { return cb.timeoutId !== timeoutId; });\n                cb(_this._didWork, _this.getPendingTasks());\n            }, timeout);\n        }\n        this._callbacks.push({ doneCb: cb, timeoutId: timeoutId, updateCb: updateCb });\n    };\n    /**\n     * Wait for the application to be stable with a timeout. If the timeout is reached before that\n     * happens, the callback receives a list of the macro tasks that were pending, otherwise null.\n     *\n     * @param doneCb The callback to invoke when Angular is stable or the timeout expires\n     *    whichever comes first.\n     * @param timeout Optional. The maximum time to wait for Angular to become stable. If not\n     *    specified, whenStable() will wait forever.\n     * @param updateCb Optional. If specified, this callback will be invoked whenever the set of\n     *    pending macrotasks changes. If this callback returns true doneCb will not be invoked\n     *    and no further updates will be issued.\n     */\n    /**\n       * Wait for the application to be stable with a timeout. If the timeout is reached before that\n       * happens, the callback receives a list of the macro tasks that were pending, otherwise null.\n       *\n       * @param doneCb The callback to invoke when Angular is stable or the timeout expires\n       *    whichever comes first.\n       * @param timeout Optional. The maximum time to wait for Angular to become stable. If not\n       *    specified, whenStable() will wait forever.\n       * @param updateCb Optional. If specified, this callback will be invoked whenever the set of\n       *    pending macrotasks changes. If this callback returns true doneCb will not be invoked\n       *    and no further updates will be issued.\n       */\n    Testability.prototype.whenStable = /**\n       * Wait for the application to be stable with a timeout. If the timeout is reached before that\n       * happens, the callback receives a list of the macro tasks that were pending, otherwise null.\n       *\n       * @param doneCb The callback to invoke when Angular is stable or the timeout expires\n       *    whichever comes first.\n       * @param timeout Optional. The maximum time to wait for Angular to become stable. If not\n       *    specified, whenStable() will wait forever.\n       * @param updateCb Optional. If specified, this callback will be invoked whenever the set of\n       *    pending macrotasks changes. If this callback returns true doneCb will not be invoked\n       *    and no further updates will be issued.\n       */\n    function (doneCb, timeout, updateCb) {\n        if (updateCb && !this.taskTrackingZone) {\n            throw new Error('Task tracking zone is required when passing an update callback to ' +\n                'whenStable(). Is \"zone.js/dist/task-tracking.js\" loaded?');\n        }\n        // These arguments are 'Function' above to keep the public API simple.\n        this.addCallback(doneCb, timeout, updateCb);\n        this._runCallbacksIfReady();\n    };\n    /**\n     * Get the number of pending requests\n     * @deprecated pending requests are now tracked with zones\n     */\n    /**\n       * Get the number of pending requests\n       * @deprecated pending requests are now tracked with zones\n       */\n    Testability.prototype.getPendingRequestCount = /**\n       * Get the number of pending requests\n       * @deprecated pending requests are now tracked with zones\n       */\n    function () { return this._pendingCount; };\n    /**\n     * Find providers by name\n     * @param using The root element to search from\n     * @param provider The name of binding variable\n     * @param exactMatch Whether using exactMatch\n     */\n    /**\n       * Find providers by name\n       * @param using The root element to search from\n       * @param provider The name of binding variable\n       * @param exactMatch Whether using exactMatch\n       */\n    Testability.prototype.findProviders = /**\n       * Find providers by name\n       * @param using The root element to search from\n       * @param provider The name of binding variable\n       * @param exactMatch Whether using exactMatch\n       */\n    function (using, provider, exactMatch) {\n        // TODO(juliemr): implement.\n        return [];\n    };\n    Testability.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    Testability.ctorParameters = function () { return [\n        { type: NgZone, },\n    ]; };\n    return Testability;\n}());\n/**\n * A global registry of {@link Testability} instances for specific elements.\n * @experimental\n */\nvar TestabilityRegistry = /** @class */ (function () {\n    function TestabilityRegistry() {\n        /** @internal */\n        this._applications = new Map();\n        _testabilityGetter.addToWindow(this);\n    }\n    /**\n     * Registers an application with a testability hook so that it can be tracked\n     * @param token token of application, root element\n     * @param testability Testability hook\n     */\n    /**\n       * Registers an application with a testability hook so that it can be tracked\n       * @param token token of application, root element\n       * @param testability Testability hook\n       */\n    TestabilityRegistry.prototype.registerApplication = /**\n       * Registers an application with a testability hook so that it can be tracked\n       * @param token token of application, root element\n       * @param testability Testability hook\n       */\n    function (token, testability) {\n        this._applications.set(token, testability);\n    };\n    /**\n     * Unregisters an application.\n     * @param token token of application, root element\n     */\n    /**\n       * Unregisters an application.\n       * @param token token of application, root element\n       */\n    TestabilityRegistry.prototype.unregisterApplication = /**\n       * Unregisters an application.\n       * @param token token of application, root element\n       */\n    function (token) { this._applications.delete(token); };\n    /**\n     * Unregisters all applications\n     */\n    /**\n       * Unregisters all applications\n       */\n    TestabilityRegistry.prototype.unregisterAllApplications = /**\n       * Unregisters all applications\n       */\n    function () { this._applications.clear(); };\n    /**\n     * Get a testability hook associated with the application\n     * @param elem root element\n     */\n    /**\n       * Get a testability hook associated with the application\n       * @param elem root element\n       */\n    TestabilityRegistry.prototype.getTestability = /**\n       * Get a testability hook associated with the application\n       * @param elem root element\n       */\n    function (elem) { return this._applications.get(elem) || null; };\n    /**\n     * Get all registered testabilities\n     */\n    /**\n       * Get all registered testabilities\n       */\n    TestabilityRegistry.prototype.getAllTestabilities = /**\n       * Get all registered testabilities\n       */\n    function () { return Array.from(this._applications.values()); };\n    /**\n     * Get all registered applications(root elements)\n     */\n    /**\n       * Get all registered applications(root elements)\n       */\n    TestabilityRegistry.prototype.getAllRootElements = /**\n       * Get all registered applications(root elements)\n       */\n    function () { return Array.from(this._applications.keys()); };\n    /**\n     * Find testability of a node in the Tree\n     * @param elem node\n     * @param findInAncestors whether finding testability in ancestors if testability was not found in\n     * current node\n     */\n    /**\n       * Find testability of a node in the Tree\n       * @param elem node\n       * @param findInAncestors whether finding testability in ancestors if testability was not found in\n       * current node\n       */\n    TestabilityRegistry.prototype.findTestabilityInTree = /**\n       * Find testability of a node in the Tree\n       * @param elem node\n       * @param findInAncestors whether finding testability in ancestors if testability was not found in\n       * current node\n       */\n    function (elem, findInAncestors) {\n        if (findInAncestors === void 0) { findInAncestors = true; }\n        return _testabilityGetter.findTestabilityInTree(this, elem, findInAncestors);\n    };\n    TestabilityRegistry.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    TestabilityRegistry.ctorParameters = function () { return []; };\n    return TestabilityRegistry;\n}());\nvar _NoopGetTestability = /** @class */ (function () {\n    function _NoopGetTestability() {\n    }\n    _NoopGetTestability.prototype.addToWindow = function (registry) { };\n    _NoopGetTestability.prototype.findTestabilityInTree = function (registry, elem, findInAncestors) {\n        return null;\n    };\n    return _NoopGetTestability;\n}());\n/**\n * Set the {@link GetTestability} implementation used by the Angular testing framework.\n * @experimental\n */\n\nvar _testabilityGetter = new _NoopGetTestability();\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _devMode = true;\nvar _platform;\nvar ALLOW_MULTIPLE_PLATFORMS = new InjectionToken('AllowMultipleToken');\n/**\n * Disable Angular's development mode, which turns off assertions and other\n * checks within the framework.\n *\n * One important assertion this disables verifies that a change detection pass\n * does not result in additional changes to any bindings (also known as\n * unidirectional data flow).\n *\n *\n */\n\n/**\n * Returns whether Angular is in development mode. After called once,\n * the value is locked and won't change any more.\n *\n * By default, this is true, unless a user calls `enableProdMode` before calling this.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nfunction isDevMode() {\n    return _devMode;\n}\n/**\n * Creates a platform.\n * Platforms have to be eagerly created via this function.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nfunction createPlatform(injector) {\n    if (_platform && !_platform.destroyed &&\n        !_platform.injector.get(ALLOW_MULTIPLE_PLATFORMS, false)) {\n        throw new Error('There can be only one platform. Destroy the previous one to create a new one.');\n    }\n    _platform = injector.get(PlatformRef);\n    var inits = injector.get(PLATFORM_INITIALIZER, null);\n    if (inits)\n        inits.forEach(function (init) { return init(); });\n    return _platform;\n}\n/**\n * Creates a factory for a platform\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nfunction createPlatformFactory(parentPlatformFactory, name, providers) {\n    if (providers === void 0) { providers = []; }\n    var desc = \"Platform: \" + name;\n    var marker = new InjectionToken(desc);\n    return function (extraProviders) {\n        if (extraProviders === void 0) { extraProviders = []; }\n        var platform = getPlatform();\n        if (!platform || platform.injector.get(ALLOW_MULTIPLE_PLATFORMS, false)) {\n            if (parentPlatformFactory) {\n                parentPlatformFactory(providers.concat(extraProviders).concat({ provide: marker, useValue: true }));\n            }\n            else {\n                var injectedProviders = providers.concat(extraProviders).concat({ provide: marker, useValue: true });\n                createPlatform(Injector.create({ providers: injectedProviders, name: desc }));\n            }\n        }\n        return assertPlatform(marker);\n    };\n}\n/**\n * Checks that there currently is a platform which contains the given token as a provider.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nfunction assertPlatform(requiredToken) {\n    var platform = getPlatform();\n    if (!platform) {\n        throw new Error('No platform exists!');\n    }\n    if (!platform.injector.get(requiredToken, null)) {\n        throw new Error('A platform with a different configuration has been created. Please destroy it first.');\n    }\n    return platform;\n}\n/**\n * Destroy the existing platform.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\n\n/**\n * Returns the current platform.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nfunction getPlatform() {\n    return _platform && !_platform.destroyed ? _platform : null;\n}\n/**\n * The Angular platform is the entry point for Angular on a web page. Each page\n * has exactly one platform, and services (such as reflection) which are common\n * to every Angular application running on the page are bound in its scope.\n *\n * A page's platform is initialized implicitly when a platform is created via a platform factory\n * (e.g. {@link platformBrowser}), or explicitly by calling the {@link createPlatform} function.\n *\n *\n */\nvar PlatformRef = /** @class */ (function () {\n    /** @internal */\n    function PlatformRef(_injector) {\n        this._injector = _injector;\n        this._modules = [];\n        this._destroyListeners = [];\n        this._destroyed = false;\n    }\n    /**\n     * Creates an instance of an `@NgModule` for the given platform\n     * for offline compilation.\n     *\n     * ## Simple Example\n     *\n     * ```typescript\n     * my_module.ts:\n     *\n     * @NgModule({\n     *   imports: [BrowserModule]\n     * })\n     * class MyModule {}\n     *\n     * main.ts:\n     * import {MyModuleNgFactory} from './my_module.ngfactory';\n     * import {platformBrowser} from '@angular/platform-browser';\n     *\n     * let moduleRef = platformBrowser().bootstrapModuleFactory(MyModuleNgFactory);\n     * ```\n     *\n     * @experimental APIs related to application bootstrap are currently under review.\n     */\n    /**\n       * Creates an instance of an `@NgModule` for the given platform\n       * for offline compilation.\n       *\n       * ## Simple Example\n       *\n       * ```typescript\n       * my_module.ts:\n       *\n       * @NgModule({\n       *   imports: [BrowserModule]\n       * })\n       * class MyModule {}\n       *\n       * main.ts:\n       * import {MyModuleNgFactory} from './my_module.ngfactory';\n       * import {platformBrowser} from '@angular/platform-browser';\n       *\n       * let moduleRef = platformBrowser().bootstrapModuleFactory(MyModuleNgFactory);\n       * ```\n       *\n       * @experimental APIs related to application bootstrap are currently under review.\n       */\n    PlatformRef.prototype.bootstrapModuleFactory = /**\n       * Creates an instance of an `@NgModule` for the given platform\n       * for offline compilation.\n       *\n       * ## Simple Example\n       *\n       * ```typescript\n       * my_module.ts:\n       *\n       * @NgModule({\n       *   imports: [BrowserModule]\n       * })\n       * class MyModule {}\n       *\n       * main.ts:\n       * import {MyModuleNgFactory} from './my_module.ngfactory';\n       * import {platformBrowser} from '@angular/platform-browser';\n       *\n       * let moduleRef = platformBrowser().bootstrapModuleFactory(MyModuleNgFactory);\n       * ```\n       *\n       * @experimental APIs related to application bootstrap are currently under review.\n       */\n    function (moduleFactory, options) {\n        var _this = this;\n        // Note: We need to create the NgZone _before_ we instantiate the module,\n        // as instantiating the module creates some providers eagerly.\n        // So we create a mini parent injector that just contains the new NgZone and\n        // pass that as parent to the NgModuleFactory.\n        var ngZoneOption = options ? options.ngZone : undefined;\n        var ngZone = getNgZone(ngZoneOption);\n        var providers = [{ provide: NgZone, useValue: ngZone }];\n        // Attention: Don't use ApplicationRef.run here,\n        // as we want to be sure that all possible constructor calls are inside `ngZone.run`!\n        return ngZone.run(function () {\n            var ngZoneInjector = Injector.create({ providers: providers, parent: _this.injector, name: moduleFactory.moduleType.name });\n            var moduleRef = moduleFactory.create(ngZoneInjector);\n            var exceptionHandler = moduleRef.injector.get(ErrorHandler, null);\n            if (!exceptionHandler) {\n                throw new Error('No ErrorHandler. Is platform module (BrowserModule) included?');\n            }\n            moduleRef.onDestroy(function () { return remove(_this._modules, moduleRef); });\n            ngZone.runOutsideAngular(function () {\n                return ngZone.onError.subscribe({ next: function (error) { exceptionHandler.handleError(error); } });\n            });\n            return _callAndReportToErrorHandler(exceptionHandler, (ngZone), function () {\n                var initStatus = moduleRef.injector.get(ApplicationInitStatus);\n                initStatus.runInitializers();\n                return initStatus.donePromise.then(function () {\n                    _this._moduleDoBootstrap(moduleRef);\n                    return moduleRef;\n                });\n            });\n        });\n    };\n    /**\n     * Creates an instance of an `@NgModule` for a given platform using the given runtime compiler.\n     *\n     * ## Simple Example\n     *\n     * ```typescript\n     * @NgModule({\n     *   imports: [BrowserModule]\n     * })\n     * class MyModule {}\n     *\n     * let moduleRef = platformBrowser().bootstrapModule(MyModule);\n     * ```\n     *\n     */\n    /**\n       * Creates an instance of an `@NgModule` for a given platform using the given runtime compiler.\n       *\n       * ## Simple Example\n       *\n       * ```typescript\n       * @NgModule({\n       *   imports: [BrowserModule]\n       * })\n       * class MyModule {}\n       *\n       * let moduleRef = platformBrowser().bootstrapModule(MyModule);\n       * ```\n       *\n       */\n    PlatformRef.prototype.bootstrapModule = /**\n       * Creates an instance of an `@NgModule` for a given platform using the given runtime compiler.\n       *\n       * ## Simple Example\n       *\n       * ```typescript\n       * @NgModule({\n       *   imports: [BrowserModule]\n       * })\n       * class MyModule {}\n       *\n       * let moduleRef = platformBrowser().bootstrapModule(MyModule);\n       * ```\n       *\n       */\n    function (moduleType, compilerOptions) {\n        var _this = this;\n        if (compilerOptions === void 0) { compilerOptions = []; }\n        var compilerFactory = this.injector.get(CompilerFactory);\n        var options = optionsReducer({}, compilerOptions);\n        var compiler = compilerFactory.createCompiler([options]);\n        return compiler.compileModuleAsync(moduleType)\n            .then(function (moduleFactory) { return _this.bootstrapModuleFactory(moduleFactory, options); });\n    };\n    PlatformRef.prototype._moduleDoBootstrap = function (moduleRef) {\n        var appRef = moduleRef.injector.get(ApplicationRef);\n        if (moduleRef._bootstrapComponents.length > 0) {\n            moduleRef._bootstrapComponents.forEach(function (f) { return appRef.bootstrap(f); });\n        }\n        else if (moduleRef.instance.ngDoBootstrap) {\n            moduleRef.instance.ngDoBootstrap(appRef);\n        }\n        else {\n            throw new Error(\"The module \" + stringify$1(moduleRef.instance.constructor) + \" was bootstrapped, but it does not declare \\\"@NgModule.bootstrap\\\" components nor a \\\"ngDoBootstrap\\\" method. \" +\n                \"Please define one of these.\");\n        }\n        this._modules.push(moduleRef);\n    };\n    /**\n     * Register a listener to be called when the platform is disposed.\n     */\n    /**\n       * Register a listener to be called when the platform is disposed.\n       */\n    PlatformRef.prototype.onDestroy = /**\n       * Register a listener to be called when the platform is disposed.\n       */\n    function (callback) { this._destroyListeners.push(callback); };\n    Object.defineProperty(PlatformRef.prototype, \"injector\", {\n        /**\n         * Retrieve the platform {@link Injector}, which is the parent injector for\n         * every Angular application on the page and provides singleton providers.\n         */\n        get: /**\n           * Retrieve the platform {@link Injector}, which is the parent injector for\n           * every Angular application on the page and provides singleton providers.\n           */\n        function () { return this._injector; },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Destroy the Angular platform and all Angular applications on the page.\n     */\n    /**\n       * Destroy the Angular platform and all Angular applications on the page.\n       */\n    PlatformRef.prototype.destroy = /**\n       * Destroy the Angular platform and all Angular applications on the page.\n       */\n    function () {\n        if (this._destroyed) {\n            throw new Error('The platform has already been destroyed!');\n        }\n        this._modules.slice().forEach(function (module) { return module.destroy(); });\n        this._destroyListeners.forEach(function (listener) { return listener(); });\n        this._destroyed = true;\n    };\n    Object.defineProperty(PlatformRef.prototype, \"destroyed\", {\n        get: function () { return this._destroyed; },\n        enumerable: true,\n        configurable: true\n    });\n    PlatformRef.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    PlatformRef.ctorParameters = function () { return [\n        { type: Injector, },\n    ]; };\n    return PlatformRef;\n}());\nfunction getNgZone(ngZoneOption) {\n    var ngZone;\n    if (ngZoneOption === 'noop') {\n        ngZone = new NoopNgZone();\n    }\n    else {\n        ngZone = (ngZoneOption === 'zone.js' ? undefined : ngZoneOption) ||\n            new NgZone({ enableLongStackTrace: isDevMode() });\n    }\n    return ngZone;\n}\nfunction _callAndReportToErrorHandler(errorHandler, ngZone, callback) {\n    try {\n        var result = callback();\n        if (isPromise$2(result)) {\n            return result.catch(function (e) {\n                ngZone.runOutsideAngular(function () { return errorHandler.handleError(e); });\n                // rethrow as the exception handler might not do it\n                throw e;\n            });\n        }\n        return result;\n    }\n    catch (e) {\n        ngZone.runOutsideAngular(function () { return errorHandler.handleError(e); });\n        // rethrow as the exception handler might not do it\n        throw e;\n    }\n}\nfunction optionsReducer(dst, objs) {\n    if (Array.isArray(objs)) {\n        dst = objs.reduce(optionsReducer, dst);\n    }\n    else {\n        dst = __assign({}, dst, objs);\n    }\n    return dst;\n}\n/**\n * A reference to an Angular application running on a page.\n *\n *\n */\nvar ApplicationRef = /** @class */ (function () {\n    /** @internal */\n    function ApplicationRef(_zone, _console, _injector, _exceptionHandler, _componentFactoryResolver, _initStatus) {\n        var _this = this;\n        this._zone = _zone;\n        this._console = _console;\n        this._injector = _injector;\n        this._exceptionHandler = _exceptionHandler;\n        this._componentFactoryResolver = _componentFactoryResolver;\n        this._initStatus = _initStatus;\n        this._bootstrapListeners = [];\n        this._views = [];\n        this._runningTick = false;\n        this._enforceNoNewChanges = false;\n        this._stable = true;\n        /**\n           * Get a list of component types registered to this application.\n           * This list is populated even before the component is created.\n           */\n        this.componentTypes = [];\n        /**\n           * Get a list of components registered to this application.\n           */\n        this.components = [];\n        this._enforceNoNewChanges = isDevMode();\n        this._zone.onMicrotaskEmpty.subscribe({ next: function () { _this._zone.run(function () { _this.tick(); }); } });\n        var isCurrentlyStable = new Observable(function (observer) {\n            _this._stable = _this._zone.isStable && !_this._zone.hasPendingMacrotasks &&\n                !_this._zone.hasPendingMicrotasks;\n            _this._zone.runOutsideAngular(function () {\n                observer.next(_this._stable);\n                observer.complete();\n            });\n        });\n        var isStable = new Observable(function (observer) {\n            // Create the subscription to onStable outside the Angular Zone so that\n            // the callback is run outside the Angular Zone.\n            var stableSub;\n            _this._zone.runOutsideAngular(function () {\n                stableSub = _this._zone.onStable.subscribe(function () {\n                    NgZone.assertNotInAngularZone();\n                    // Check whether there are no pending macro/micro tasks in the next tick\n                    // to allow for NgZone to update the state.\n                    scheduleMicroTask(function () {\n                        if (!_this._stable && !_this._zone.hasPendingMacrotasks &&\n                            !_this._zone.hasPendingMicrotasks) {\n                            _this._stable = true;\n                            observer.next(true);\n                        }\n                    });\n                });\n            });\n            var unstableSub = _this._zone.onUnstable.subscribe(function () {\n                NgZone.assertInAngularZone();\n                if (_this._stable) {\n                    _this._stable = false;\n                    _this._zone.runOutsideAngular(function () { observer.next(false); });\n                }\n            });\n            return function () {\n                stableSub.unsubscribe();\n                unstableSub.unsubscribe();\n            };\n        });\n        this.isStable =\n            merge(isCurrentlyStable, isStable.pipe(share()));\n    }\n    /**\n     * Bootstrap a new component at the root level of the application.\n     *\n     * ### Bootstrap process\n     *\n     * When bootstrapping a new root component into an application, Angular mounts the\n     * specified application component onto DOM elements identified by the [componentType]'s\n     * selector and kicks off automatic change detection to finish initializing the component.\n     *\n     * Optionally, a component can be mounted onto a DOM element that does not match the\n     * [componentType]'s selector.\n     *\n     * ### Example\n     * {@example core/ts/platform/platform.ts region='longform'}\n     */\n    /**\n       * Bootstrap a new component at the root level of the application.\n       *\n       * ### Bootstrap process\n       *\n       * When bootstrapping a new root component into an application, Angular mounts the\n       * specified application component onto DOM elements identified by the [componentType]'s\n       * selector and kicks off automatic change detection to finish initializing the component.\n       *\n       * Optionally, a component can be mounted onto a DOM element that does not match the\n       * [componentType]'s selector.\n       *\n       * ### Example\n       * {@example core/ts/platform/platform.ts region='longform'}\n       */\n    ApplicationRef.prototype.bootstrap = /**\n       * Bootstrap a new component at the root level of the application.\n       *\n       * ### Bootstrap process\n       *\n       * When bootstrapping a new root component into an application, Angular mounts the\n       * specified application component onto DOM elements identified by the [componentType]'s\n       * selector and kicks off automatic change detection to finish initializing the component.\n       *\n       * Optionally, a component can be mounted onto a DOM element that does not match the\n       * [componentType]'s selector.\n       *\n       * ### Example\n       * {@example core/ts/platform/platform.ts region='longform'}\n       */\n    function (componentOrFactory, rootSelectorOrNode) {\n        var _this = this;\n        if (!this._initStatus.done) {\n            throw new Error('Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.');\n        }\n        var componentFactory;\n        if (componentOrFactory instanceof ComponentFactory) {\n            componentFactory = componentOrFactory;\n        }\n        else {\n            componentFactory =\n                (this._componentFactoryResolver.resolveComponentFactory(componentOrFactory));\n        }\n        this.componentTypes.push(componentFactory.componentType);\n        // Create a factory associated with the current module if it's not bound to some other\n        var ngModule = componentFactory instanceof ComponentFactoryBoundToModule ?\n            null :\n            this._injector.get(NgModuleRef);\n        var selectorOrNode = rootSelectorOrNode || componentFactory.selector;\n        var compRef = componentFactory.create(Injector.NULL, [], selectorOrNode, ngModule);\n        compRef.onDestroy(function () { _this._unloadComponent(compRef); });\n        var testability = compRef.injector.get(Testability, null);\n        if (testability) {\n            compRef.injector.get(TestabilityRegistry)\n                .registerApplication(compRef.location.nativeElement, testability);\n        }\n        this._loadComponent(compRef);\n        if (isDevMode()) {\n            this._console.log(\"Angular is running in the development mode. Call enableProdMode() to enable the production mode.\");\n        }\n        return compRef;\n    };\n    /**\n     * Invoke this method to explicitly process change detection and its side-effects.\n     *\n     * In development mode, `tick()` also performs a second change detection cycle to ensure that no\n     * further changes are detected. If additional changes are picked up during this second cycle,\n     * bindings in the app have side-effects that cannot be resolved in a single change detection\n     * pass.\n     * In this case, Angular throws an error, since an Angular application can only have one change\n     * detection pass during which all change detection must complete.\n     */\n    /**\n       * Invoke this method to explicitly process change detection and its side-effects.\n       *\n       * In development mode, `tick()` also performs a second change detection cycle to ensure that no\n       * further changes are detected. If additional changes are picked up during this second cycle,\n       * bindings in the app have side-effects that cannot be resolved in a single change detection\n       * pass.\n       * In this case, Angular throws an error, since an Angular application can only have one change\n       * detection pass during which all change detection must complete.\n       */\n    ApplicationRef.prototype.tick = /**\n       * Invoke this method to explicitly process change detection and its side-effects.\n       *\n       * In development mode, `tick()` also performs a second change detection cycle to ensure that no\n       * further changes are detected. If additional changes are picked up during this second cycle,\n       * bindings in the app have side-effects that cannot be resolved in a single change detection\n       * pass.\n       * In this case, Angular throws an error, since an Angular application can only have one change\n       * detection pass during which all change detection must complete.\n       */\n    function () {\n        var _this = this;\n        if (this._runningTick) {\n            throw new Error('ApplicationRef.tick is called recursively');\n        }\n        var scope = ApplicationRef._tickScope();\n        try {\n            this._runningTick = true;\n            this._views.forEach(function (view) { return view.detectChanges(); });\n            if (this._enforceNoNewChanges) {\n                this._views.forEach(function (view) { return view.checkNoChanges(); });\n            }\n        }\n        catch (e) {\n            // Attention: Don't rethrow as it could cancel subscriptions to Observables!\n            this._zone.runOutsideAngular(function () { return _this._exceptionHandler.handleError(e); });\n        }\n        finally {\n            this._runningTick = false;\n            wtfLeave(scope);\n        }\n    };\n    /**\n     * Attaches a view so that it will be dirty checked.\n     * The view will be automatically detached when it is destroyed.\n     * This will throw if the view is already attached to a ViewContainer.\n     */\n    /**\n       * Attaches a view so that it will be dirty checked.\n       * The view will be automatically detached when it is destroyed.\n       * This will throw if the view is already attached to a ViewContainer.\n       */\n    ApplicationRef.prototype.attachView = /**\n       * Attaches a view so that it will be dirty checked.\n       * The view will be automatically detached when it is destroyed.\n       * This will throw if the view is already attached to a ViewContainer.\n       */\n    function (viewRef) {\n        var view = viewRef;\n        this._views.push(view);\n        view.attachToAppRef(this);\n    };\n    /**\n     * Detaches a view from dirty checking again.\n     */\n    /**\n       * Detaches a view from dirty checking again.\n       */\n    ApplicationRef.prototype.detachView = /**\n       * Detaches a view from dirty checking again.\n       */\n    function (viewRef) {\n        var view = viewRef;\n        remove(this._views, view);\n        view.detachFromAppRef();\n    };\n    ApplicationRef.prototype._loadComponent = function (componentRef) {\n        this.attachView(componentRef.hostView);\n        this.tick();\n        this.components.push(componentRef);\n        // Get the listeners lazily to prevent DI cycles.\n        var listeners = this._injector.get(APP_BOOTSTRAP_LISTENER, []).concat(this._bootstrapListeners);\n        listeners.forEach(function (listener) { return listener(componentRef); });\n    };\n    ApplicationRef.prototype._unloadComponent = function (componentRef) {\n        this.detachView(componentRef.hostView);\n        remove(this.components, componentRef);\n    };\n    /** @internal */\n    /** @internal */\n    ApplicationRef.prototype.ngOnDestroy = /** @internal */\n    function () {\n        // TODO(alxhub): Dispose of the NgZone.\n        this._views.slice().forEach(function (view) { return view.destroy(); });\n    };\n    Object.defineProperty(ApplicationRef.prototype, \"viewCount\", {\n        /**\n         * Returns the number of attached views.\n         */\n        get: /**\n           * Returns the number of attached views.\n           */\n        function () { return this._views.length; },\n        enumerable: true,\n        configurable: true\n    });\n    /** @internal */\n    ApplicationRef._tickScope = wtfCreateScope('ApplicationRef#tick()');\n    ApplicationRef.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    ApplicationRef.ctorParameters = function () { return [\n        { type: NgZone, },\n        { type: Console, },\n        { type: Injector, },\n        { type: ErrorHandler, },\n        { type: ComponentFactoryResolver, },\n        { type: ApplicationInitStatus, },\n    ]; };\n    return ApplicationRef;\n}());\nfunction remove(list, el) {\n    var index = list.indexOf(el);\n    if (index > -1) {\n        list.splice(index, 1);\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @deprecated Use the `Renderer2` instead.\n */\nvar Renderer = /** @class */ (function () {\n    function Renderer() {\n    }\n    return Renderer;\n}());\nvar Renderer2Interceptor = new InjectionToken('Renderer2Interceptor');\n/**\n * @experimental\n */\nvar RendererFactory2 = /** @class */ (function () {\n    function RendererFactory2() {\n    }\n    return RendererFactory2;\n}());\n/**\n * @experimental\n */\n/**\n * @experimental\n */\nvar RendererStyleFlags2;\n/**\n * @experimental\n */\n(function (RendererStyleFlags2) {\n    RendererStyleFlags2[RendererStyleFlags2[\"Important\"] = 1] = \"Important\";\n    RendererStyleFlags2[RendererStyleFlags2[\"DashCase\"] = 2] = \"DashCase\";\n})(RendererStyleFlags2 || (RendererStyleFlags2 = {}));\n/**\n * @experimental\n */\nvar Renderer2 = /** @class */ (function () {\n    function Renderer2() {\n    }\n    return Renderer2;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A wrapper around a native element inside of a View.\n *\n * An `ElementRef` is backed by a render-specific element. In the browser, this is usually a DOM\n * element.\n *\n * @security Permitting direct access to the DOM can make your application more vulnerable to\n * XSS attacks. Carefully review any use of `ElementRef` in your code. For more detail, see the\n * [Security Guide](http://g.co/ng/security).\n *\n *\n */\n// Note: We don't expose things like `Injector`, `ViewContainer`, ... here,\n// i.e. users have to ask for what they need. With that, we can build better analysis tools\n// and could do better codegen in the future.\nvar ElementRef = /** @class */ (function () {\n    function ElementRef(nativeElement) {\n        this.nativeElement = nativeElement;\n    }\n    return ElementRef;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Used to load ng module factories.\n *\n */\n/**\n * Registers a loaded module. Should only be called from generated NgModuleFactory code.\n * @experimental\n */\n\n\n/**\n * Returns the NgModuleFactory with the given id, if it exists and has been loaded.\n * Factories for modules that do not specify an `id` cannot be retrieved. Throws if the module\n * cannot be found.\n * @experimental\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An unmodifiable list of items that Angular keeps up to date when the state\n * of the application changes.\n *\n * The type of object that {@link ViewChildren}, {@link ContentChildren}, and {@link QueryList}\n * provide.\n *\n * Implements an iterable interface, therefore it can be used in both ES6\n * javascript `for (var i of items)` loops as well as in Angular templates with\n * `*ngFor=\"let i of myList\"`.\n *\n * Changes can be observed by subscribing to the changes `Observable`.\n *\n * NOTE: In the future this class will implement an `Observable` interface.\n *\n * ### Example ([live demo](http://plnkr.co/edit/RX8sJnQYl9FWuSCWme5z?p=preview))\n * ```typescript\n * @Component({...})\n * class Container {\n *   @ViewChildren(Item) items:QueryList<Item>;\n * }\n * ```\n *\n */\nvar QueryList = /** @class */ (function () {\n    function QueryList() {\n        this.dirty = true;\n        this._results = [];\n        this.changes = new EventEmitter();\n        this.length = 0;\n    }\n    /**\n     * See\n     * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n     */\n    /**\n       * See\n       * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n       */\n    QueryList.prototype.map = /**\n       * See\n       * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n       */\n    function (fn) { return this._results.map(fn); };\n    /**\n     * See\n     * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n     */\n    /**\n       * See\n       * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n       */\n    QueryList.prototype.filter = /**\n       * See\n       * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n       */\n    function (fn) {\n        return this._results.filter(fn);\n    };\n    /**\n     * See\n     * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n     */\n    /**\n       * See\n       * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n       */\n    QueryList.prototype.find = /**\n       * See\n       * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n       */\n    function (fn) {\n        return this._results.find(fn);\n    };\n    /**\n     * See\n     * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n     */\n    /**\n       * See\n       * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n       */\n    QueryList.prototype.reduce = /**\n       * See\n       * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n       */\n    function (fn, init) {\n        return this._results.reduce(fn, init);\n    };\n    /**\n     * See\n     * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n     */\n    /**\n       * See\n       * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n       */\n    QueryList.prototype.forEach = /**\n       * See\n       * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n       */\n    function (fn) { this._results.forEach(fn); };\n    /**\n     * See\n     * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n     */\n    /**\n       * See\n       * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n       */\n    QueryList.prototype.some = /**\n       * See\n       * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n       */\n    function (fn) {\n        return this._results.some(fn);\n    };\n    QueryList.prototype.toArray = function () { return this._results.slice(); };\n    QueryList.prototype[getSymbolIterator()] = function () { return this._results[getSymbolIterator()](); };\n    QueryList.prototype.toString = function () { return this._results.toString(); };\n    QueryList.prototype.reset = function (res) {\n        this._results = flatten$2(res);\n        this.dirty = false;\n        this.length = this._results.length;\n        this.last = this._results[this.length - 1];\n        this.first = this._results[0];\n    };\n    QueryList.prototype.notifyOnChanges = function () { this.changes.emit(this); };\n    /** internal */\n    /** internal */\n    QueryList.prototype.setDirty = /** internal */\n    function () { this.dirty = true; };\n    /** internal */\n    /** internal */\n    QueryList.prototype.destroy = /** internal */\n    function () {\n        this.changes.complete();\n        this.changes.unsubscribe();\n    };\n    return QueryList;\n}());\nfunction flatten$2(list) {\n    return list.reduce(function (flat, item) {\n        var flatItem = Array.isArray(item) ? flatten$2(item) : item;\n        return flat.concat(flatItem);\n    }, []);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Represents an Embedded Template that can be used to instantiate Embedded Views.\n *\n * You can access a `TemplateRef`, in two ways. Via a directive placed on a `<ng-template>` element\n * (or directive prefixed with `*`) and have the `TemplateRef` for this Embedded View injected into\n * the constructor of the directive using the `TemplateRef` Token. Alternatively you can query for\n * the `TemplateRef` from a Component or a Directive via {@link Query}.\n *\n * To instantiate Embedded Views based on a Template, use {@link ViewContainerRef#\n * createEmbeddedView}, which will create the View and attach it to the View Container.\n *\n */\nvar TemplateRef = /** @class */ (function () {\n    function TemplateRef() {\n    }\n    return TemplateRef;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Represents a container where one or more Views can be attached.\n *\n * The container can contain two kinds of Views. Host Views, created by instantiating a\n * {@link Component} via {@link #createComponent}, and Embedded Views, created by instantiating an\n * {@link TemplateRef Embedded Template} via {@link #createEmbeddedView}.\n *\n * The location of the View Container within the containing View is specified by the Anchor\n * `element`. Each View Container can have only one Anchor Element and each Anchor Element can only\n * have a single View Container.\n *\n * Root elements of Views attached to this container become siblings of the Anchor Element in\n * the Rendered View.\n *\n * To access a `ViewContainerRef` of an Element, you can either place a {@link Directive} injected\n * with `ViewContainerRef` on the Element, or you obtain it via a {@link ViewChild} query.\n *\n */\nvar ViewContainerRef = /** @class */ (function () {\n    function ViewContainerRef() {\n    }\n    return ViewContainerRef;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n *\n */\nvar ChangeDetectorRef = /** @class */ (function () {\n    function ChangeDetectorRef() {\n    }\n    return ChangeDetectorRef;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n *\n */\nvar ViewRef = /** @class */ (function (_super) {\n    __extends(ViewRef, _super);\n    function ViewRef() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return ViewRef;\n}(ChangeDetectorRef));\n/**\n * Represents an Angular View.\n *\n * <!-- TODO: move the next two paragraphs to the dev guide -->\n * A View is a fundamental building block of the application UI. It is the smallest grouping of\n * Elements which are created and destroyed together.\n *\n * Properties of elements in a View can change, but the structure (number and order) of elements in\n * a View cannot. Changing the structure of Elements can only be done by inserting, moving or\n * removing nested Views via a {@link ViewContainerRef}. Each View can contain many View Containers.\n * <!-- /TODO -->\n *\n * ### Example\n *\n * Given this template...\n *\n * ```\n * Count: {{items.length}}\n * <ul>\n *   <li *ngFor=\"let  item of items\">{{item}}</li>\n * </ul>\n * ```\n *\n * We have two {@link TemplateRef}s:\n *\n * Outer {@link TemplateRef}:\n * ```\n * Count: {{items.length}}\n * <ul>\n *   <ng-template ngFor let-item [ngForOf]=\"items\"></ng-template>\n * </ul>\n * ```\n *\n * Inner {@link TemplateRef}:\n * ```\n *   <li>{{item}}</li>\n * ```\n *\n * Notice that the original template is broken down into two separate {@link TemplateRef}s.\n *\n * The outer/inner {@link TemplateRef}s are then assembled into views like so:\n *\n * ```\n * <!-- ViewRef: outer-0 -->\n * Count: 2\n * <ul>\n *   <ng-template view-container-ref></ng-template>\n *   <!-- ViewRef: inner-1 --><li>first</li><!-- /ViewRef: inner-1 -->\n *   <!-- ViewRef: inner-2 --><li>second</li><!-- /ViewRef: inner-2 -->\n * </ul>\n * <!-- /ViewRef: outer-0 -->\n * ```\n * @experimental\n */\nvar EmbeddedViewRef = /** @class */ (function (_super) {\n    __extends(EmbeddedViewRef, _super);\n    function EmbeddedViewRef() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return EmbeddedViewRef;\n}(ViewRef));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar EventListener = /** @class */ (function () {\n    function EventListener(name, callback) {\n        this.name = name;\n        this.callback = callback;\n    }\n    return EventListener;\n}());\n/**\n * @experimental All debugging apis are currently experimental.\n */\nvar DebugNode = /** @class */ (function () {\n    function DebugNode(nativeNode, parent, _debugContext) {\n        this._debugContext = _debugContext;\n        this.nativeNode = nativeNode;\n        if (parent && parent instanceof DebugElement) {\n            parent.addChild(this);\n        }\n        else {\n            this.parent = null;\n        }\n        this.listeners = [];\n    }\n    Object.defineProperty(DebugNode.prototype, \"injector\", {\n        get: function () { return this._debugContext.injector; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugNode.prototype, \"componentInstance\", {\n        get: function () { return this._debugContext.component; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugNode.prototype, \"context\", {\n        get: function () { return this._debugContext.context; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugNode.prototype, \"references\", {\n        get: function () { return this._debugContext.references; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugNode.prototype, \"providerTokens\", {\n        get: function () { return this._debugContext.providerTokens; },\n        enumerable: true,\n        configurable: true\n    });\n    return DebugNode;\n}());\n/**\n * @experimental All debugging apis are currently experimental.\n */\nvar DebugElement = /** @class */ (function (_super) {\n    __extends(DebugElement, _super);\n    function DebugElement(nativeNode, parent, _debugContext) {\n        var _this = _super.call(this, nativeNode, parent, _debugContext) || this;\n        _this.properties = {};\n        _this.attributes = {};\n        _this.classes = {};\n        _this.styles = {};\n        _this.childNodes = [];\n        _this.nativeElement = nativeNode;\n        return _this;\n    }\n    DebugElement.prototype.addChild = function (child) {\n        if (child) {\n            this.childNodes.push(child);\n            child.parent = this;\n        }\n    };\n    DebugElement.prototype.removeChild = function (child) {\n        var childIndex = this.childNodes.indexOf(child);\n        if (childIndex !== -1) {\n            child.parent = null;\n            this.childNodes.splice(childIndex, 1);\n        }\n    };\n    DebugElement.prototype.insertChildrenAfter = function (child, newChildren) {\n        var _this = this;\n        var siblingIndex = this.childNodes.indexOf(child);\n        if (siblingIndex !== -1) {\n            (_a = this.childNodes).splice.apply(_a, __spread([siblingIndex + 1, 0], newChildren));\n            newChildren.forEach(function (c) {\n                if (c.parent) {\n                    c.parent.removeChild(c);\n                }\n                c.parent = _this;\n            });\n        }\n        var _a;\n    };\n    DebugElement.prototype.insertBefore = function (refChild, newChild) {\n        var refIndex = this.childNodes.indexOf(refChild);\n        if (refIndex === -1) {\n            this.addChild(newChild);\n        }\n        else {\n            if (newChild.parent) {\n                newChild.parent.removeChild(newChild);\n            }\n            newChild.parent = this;\n            this.childNodes.splice(refIndex, 0, newChild);\n        }\n    };\n    DebugElement.prototype.query = function (predicate) {\n        var results = this.queryAll(predicate);\n        return results[0] || null;\n    };\n    DebugElement.prototype.queryAll = function (predicate) {\n        var matches = [];\n        _queryElementChildren(this, predicate, matches);\n        return matches;\n    };\n    DebugElement.prototype.queryAllNodes = function (predicate) {\n        var matches = [];\n        _queryNodeChildren(this, predicate, matches);\n        return matches;\n    };\n    Object.defineProperty(DebugElement.prototype, \"children\", {\n        get: function () {\n            return this.childNodes.filter(function (node) { return node instanceof DebugElement; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DebugElement.prototype.triggerEventHandler = function (eventName, eventObj) {\n        this.listeners.forEach(function (listener) {\n            if (listener.name == eventName) {\n                listener.callback(eventObj);\n            }\n        });\n    };\n    return DebugElement;\n}(DebugNode));\n/**\n * @experimental\n */\n\nfunction _queryElementChildren(element, predicate, matches) {\n    element.childNodes.forEach(function (node) {\n        if (node instanceof DebugElement) {\n            if (predicate(node)) {\n                matches.push(node);\n            }\n            _queryElementChildren(node, predicate, matches);\n        }\n    });\n}\nfunction _queryNodeChildren(parentNode, predicate, matches) {\n    if (parentNode instanceof DebugElement) {\n        parentNode.childNodes.forEach(function (node) {\n            if (predicate(node)) {\n                matches.push(node);\n            }\n            if (node instanceof DebugElement) {\n                _queryNodeChildren(node, predicate, matches);\n            }\n        });\n    }\n}\n// Need to keep the nodes in a global Map so that multiple angular apps are supported.\nvar _nativeNodeToDebugNode = new Map();\n/**\n * @experimental\n */\nfunction getDebugNode(nativeNode) {\n    return _nativeNodeToDebugNode.get(nativeNode) || null;\n}\n\nfunction indexDebugNode(node) {\n    _nativeNodeToDebugNode.set(node.nativeNode, node);\n}\nfunction removeDebugNodeFromIndex(node) {\n    _nativeNodeToDebugNode.delete(node.nativeNode);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction devModeEqual(a, b) {\n    var isListLikeIterableA = isListLikeIterable(a);\n    var isListLikeIterableB = isListLikeIterable(b);\n    if (isListLikeIterableA && isListLikeIterableB) {\n        return areIterablesEqual(a, b, devModeEqual);\n    }\n    else {\n        var isAObject = a && (typeof a === 'object' || typeof a === 'function');\n        var isBObject = b && (typeof b === 'object' || typeof b === 'function');\n        if (!isListLikeIterableA && isAObject && !isListLikeIterableB && isBObject) {\n            return true;\n        }\n        else {\n            return looseIdentical(a, b);\n        }\n    }\n}\n/**\n * Indicates that the result of a {@link Pipe} transformation has changed even though the\n * reference has not changed.\n *\n * Wrapped values are unwrapped automatically during the change detection, and the unwrapped value\n * is stored.\n *\n * Example:\n *\n * ```\n * if (this._latestValue === this._latestReturnedValue) {\n *    return this._latestReturnedValue;\n *  } else {\n *    this._latestReturnedValue = this._latestValue;\n *    return WrappedValue.wrap(this._latestValue); // this will force update\n *  }\n * ```\n *\n */\nvar WrappedValue = /** @class */ (function () {\n    function WrappedValue(value) {\n        this.wrapped = value;\n    }\n    /** Creates a wrapped value. */\n    /** Creates a wrapped value. */\n    WrappedValue.wrap = /** Creates a wrapped value. */\n    function (value) { return new WrappedValue(value); };\n    /**\n     * Returns the underlying value of a wrapped value.\n     * Returns the given `value` when it is not wrapped.\n     **/\n    /**\n       * Returns the underlying value of a wrapped value.\n       * Returns the given `value` when it is not wrapped.\n       **/\n    WrappedValue.unwrap = /**\n       * Returns the underlying value of a wrapped value.\n       * Returns the given `value` when it is not wrapped.\n       **/\n    function (value) { return WrappedValue.isWrapped(value) ? value.wrapped : value; };\n    /** Returns true if `value` is a wrapped value. */\n    /** Returns true if `value` is a wrapped value. */\n    WrappedValue.isWrapped = /** Returns true if `value` is a wrapped value. */\n    function (value) { return value instanceof WrappedValue; };\n    return WrappedValue;\n}());\n/**\n * Represents a basic change from a previous to a new value.\n *\n */\nvar SimpleChange = /** @class */ (function () {\n    function SimpleChange(previousValue, currentValue, firstChange) {\n        this.previousValue = previousValue;\n        this.currentValue = currentValue;\n        this.firstChange = firstChange;\n    }\n    /**\n     * Check whether the new value is the first value assigned.\n     */\n    /**\n       * Check whether the new value is the first value assigned.\n       */\n    SimpleChange.prototype.isFirstChange = /**\n       * Check whether the new value is the first value assigned.\n       */\n    function () { return this.firstChange; };\n    return SimpleChange;\n}());\nfunction isListLikeIterable(obj) {\n    if (!isJsObject(obj))\n        return false;\n    return Array.isArray(obj) ||\n        (!(obj instanceof Map) && // JS Map are iterables but return entries as [k, v]\n            // JS Map are iterables but return entries as [k, v]\n            getSymbolIterator() in obj); // JS Iterable have a Symbol.iterator prop\n}\nfunction areIterablesEqual(a, b, comparator) {\n    var iterator1 = a[getSymbolIterator()]();\n    var iterator2 = b[getSymbolIterator()]();\n    while (true) {\n        var item1 = iterator1.next();\n        var item2 = iterator2.next();\n        if (item1.done && item2.done)\n            return true;\n        if (item1.done || item2.done)\n            return false;\n        if (!comparator(item1.value, item2.value))\n            return false;\n    }\n}\nfunction iterateListLike(obj, fn) {\n    if (Array.isArray(obj)) {\n        for (var i = 0; i < obj.length; i++) {\n            fn(obj[i]);\n        }\n    }\n    else {\n        var iterator = obj[getSymbolIterator()]();\n        var item = void 0;\n        while (!((item = iterator.next()).done)) {\n            fn(item.value);\n        }\n    }\n}\nfunction isJsObject(o) {\n    return o !== null && (typeof o === 'function' || typeof o === 'object');\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar DefaultIterableDifferFactory = /** @class */ (function () {\n    function DefaultIterableDifferFactory() {\n    }\n    DefaultIterableDifferFactory.prototype.supports = function (obj) { return isListLikeIterable(obj); };\n    DefaultIterableDifferFactory.prototype.create = function (trackByFn) {\n        return new DefaultIterableDiffer(trackByFn);\n    };\n    return DefaultIterableDifferFactory;\n}());\nvar trackByIdentity = function (index, item) { return item; };\n/**\n * @deprecated v4.0.0 - Should not be part of public API.\n */\nvar DefaultIterableDiffer = /** @class */ (function () {\n    function DefaultIterableDiffer(trackByFn) {\n        this.length = 0;\n        // Keeps track of the used records at any point in time (during & across `_check()` calls)\n        this._linkedRecords = null;\n        // Keeps track of the removed records at any point in time during `_check()` calls.\n        this._unlinkedRecords = null;\n        this._previousItHead = null;\n        this._itHead = null;\n        this._itTail = null;\n        this._additionsHead = null;\n        this._additionsTail = null;\n        this._movesHead = null;\n        this._movesTail = null;\n        this._removalsHead = null;\n        this._removalsTail = null;\n        // Keeps track of records where custom track by is the same, but item identity has changed\n        this._identityChangesHead = null;\n        this._identityChangesTail = null;\n        this._trackByFn = trackByFn || trackByIdentity;\n    }\n    DefaultIterableDiffer.prototype.forEachItem = function (fn) {\n        var record;\n        for (record = this._itHead; record !== null; record = record._next) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachOperation = function (fn) {\n        var nextIt = this._itHead;\n        var nextRemove = this._removalsHead;\n        var addRemoveOffset = 0;\n        var moveOffsets = null;\n        while (nextIt || nextRemove) {\n            // Figure out which is the next record to process\n            // Order: remove, add, move\n            var record = !nextRemove ||\n                nextIt &&\n                    (nextIt.currentIndex) <\n                        getPreviousIndex(nextRemove, addRemoveOffset, moveOffsets) ?\n                nextIt :\n                nextRemove;\n            var adjPreviousIndex = getPreviousIndex(record, addRemoveOffset, moveOffsets);\n            var currentIndex = record.currentIndex;\n            // consume the item, and adjust the addRemoveOffset and update moveDistance if necessary\n            if (record === nextRemove) {\n                addRemoveOffset--;\n                nextRemove = nextRemove._nextRemoved;\n            }\n            else {\n                nextIt = nextIt._next;\n                if (record.previousIndex == null) {\n                    addRemoveOffset++;\n                }\n                else {\n                    // INVARIANT:  currentIndex < previousIndex\n                    if (!moveOffsets)\n                        moveOffsets = [];\n                    var localMovePreviousIndex = adjPreviousIndex - addRemoveOffset;\n                    var localCurrentIndex = (currentIndex) - addRemoveOffset;\n                    if (localMovePreviousIndex != localCurrentIndex) {\n                        for (var i = 0; i < localMovePreviousIndex; i++) {\n                            var offset = i < moveOffsets.length ? moveOffsets[i] : (moveOffsets[i] = 0);\n                            var index = offset + i;\n                            if (localCurrentIndex <= index && index < localMovePreviousIndex) {\n                                moveOffsets[i] = offset + 1;\n                            }\n                        }\n                        var previousIndex = record.previousIndex;\n                        moveOffsets[previousIndex] = localCurrentIndex - localMovePreviousIndex;\n                    }\n                }\n            }\n            if (adjPreviousIndex !== currentIndex) {\n                fn(record, adjPreviousIndex, currentIndex);\n            }\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachPreviousItem = function (fn) {\n        var record;\n        for (record = this._previousItHead; record !== null; record = record._nextPrevious) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachAddedItem = function (fn) {\n        var record;\n        for (record = this._additionsHead; record !== null; record = record._nextAdded) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachMovedItem = function (fn) {\n        var record;\n        for (record = this._movesHead; record !== null; record = record._nextMoved) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachRemovedItem = function (fn) {\n        var record;\n        for (record = this._removalsHead; record !== null; record = record._nextRemoved) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachIdentityChange = function (fn) {\n        var record;\n        for (record = this._identityChangesHead; record !== null; record = record._nextIdentityChange) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.diff = function (collection) {\n        if (collection == null)\n            collection = [];\n        if (!isListLikeIterable(collection)) {\n            throw new Error(\"Error trying to diff '\" + stringify$1(collection) + \"'. Only arrays and iterables are allowed\");\n        }\n        if (this.check(collection)) {\n            return this;\n        }\n        else {\n            return null;\n        }\n    };\n    DefaultIterableDiffer.prototype.onDestroy = function () { };\n    DefaultIterableDiffer.prototype.check = function (collection) {\n        var _this = this;\n        this._reset();\n        var record = this._itHead;\n        var mayBeDirty = false;\n        var index;\n        var item;\n        var itemTrackBy;\n        if (Array.isArray(collection)) {\n            this.length = collection.length;\n            for (var index_1 = 0; index_1 < this.length; index_1++) {\n                item = collection[index_1];\n                itemTrackBy = this._trackByFn(index_1, item);\n                if (record === null || !looseIdentical(record.trackById, itemTrackBy)) {\n                    record = this._mismatch(record, item, itemTrackBy, index_1);\n                    mayBeDirty = true;\n                }\n                else {\n                    if (mayBeDirty) {\n                        // TODO(misko): can we limit this to duplicates only?\n                        record = this._verifyReinsertion(record, item, itemTrackBy, index_1);\n                    }\n                    if (!looseIdentical(record.item, item))\n                        this._addIdentityChange(record, item);\n                }\n                record = record._next;\n            }\n        }\n        else {\n            index = 0;\n            iterateListLike(collection, function (item) {\n                itemTrackBy = _this._trackByFn(index, item);\n                if (record === null || !looseIdentical(record.trackById, itemTrackBy)) {\n                    record = _this._mismatch(record, item, itemTrackBy, index);\n                    mayBeDirty = true;\n                }\n                else {\n                    if (mayBeDirty) {\n                        // TODO(misko): can we limit this to duplicates only?\n                        record = _this._verifyReinsertion(record, item, itemTrackBy, index);\n                    }\n                    if (!looseIdentical(record.item, item))\n                        _this._addIdentityChange(record, item);\n                }\n                record = record._next;\n                index++;\n            });\n            this.length = index;\n        }\n        this._truncate(record);\n        this.collection = collection;\n        return this.isDirty;\n    };\n    Object.defineProperty(DefaultIterableDiffer.prototype, \"isDirty\", {\n        /* CollectionChanges is considered dirty if it has any additions, moves, removals, or identity\n         * changes.\n         */\n        get: /* CollectionChanges is considered dirty if it has any additions, moves, removals, or identity\n           * changes.\n           */\n        function () {\n            return this._additionsHead !== null || this._movesHead !== null ||\n                this._removalsHead !== null || this._identityChangesHead !== null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Reset the state of the change objects to show no changes. This means set previousKey to\n     * currentKey, and clear all of the queues (additions, moves, removals).\n     * Set the previousIndexes of moved and added items to their currentIndexes\n     * Reset the list of additions, moves and removals\n     *\n     * @internal\n     */\n    /**\n       * Reset the state of the change objects to show no changes. This means set previousKey to\n       * currentKey, and clear all of the queues (additions, moves, removals).\n       * Set the previousIndexes of moved and added items to their currentIndexes\n       * Reset the list of additions, moves and removals\n       *\n       * @internal\n       */\n    DefaultIterableDiffer.prototype._reset = /**\n       * Reset the state of the change objects to show no changes. This means set previousKey to\n       * currentKey, and clear all of the queues (additions, moves, removals).\n       * Set the previousIndexes of moved and added items to their currentIndexes\n       * Reset the list of additions, moves and removals\n       *\n       * @internal\n       */\n    function () {\n        if (this.isDirty) {\n            var record = void 0;\n            var nextRecord = void 0;\n            for (record = this._previousItHead = this._itHead; record !== null; record = record._next) {\n                record._nextPrevious = record._next;\n            }\n            for (record = this._additionsHead; record !== null; record = record._nextAdded) {\n                record.previousIndex = record.currentIndex;\n            }\n            this._additionsHead = this._additionsTail = null;\n            for (record = this._movesHead; record !== null; record = nextRecord) {\n                record.previousIndex = record.currentIndex;\n                nextRecord = record._nextMoved;\n            }\n            this._movesHead = this._movesTail = null;\n            this._removalsHead = this._removalsTail = null;\n            this._identityChangesHead = this._identityChangesTail = null;\n            // TODO(vicb): when assert gets supported\n            // assert(!this.isDirty);\n        }\n    };\n    /**\n     * This is the core function which handles differences between collections.\n     *\n     * - `record` is the record which we saw at this position last time. If null then it is a new\n     *   item.\n     * - `item` is the current item in the collection\n     * - `index` is the position of the item in the collection\n     *\n     * @internal\n     */\n    /**\n       * This is the core function which handles differences between collections.\n       *\n       * - `record` is the record which we saw at this position last time. If null then it is a new\n       *   item.\n       * - `item` is the current item in the collection\n       * - `index` is the position of the item in the collection\n       *\n       * @internal\n       */\n    DefaultIterableDiffer.prototype._mismatch = /**\n       * This is the core function which handles differences between collections.\n       *\n       * - `record` is the record which we saw at this position last time. If null then it is a new\n       *   item.\n       * - `item` is the current item in the collection\n       * - `index` is the position of the item in the collection\n       *\n       * @internal\n       */\n    function (record, item, itemTrackBy, index) {\n        // The previous record after which we will append the current one.\n        var previousRecord;\n        if (record === null) {\n            previousRecord = this._itTail;\n        }\n        else {\n            previousRecord = record._prev;\n            // Remove the record from the collection since we know it does not match the item.\n            this._remove(record);\n        }\n        // Attempt to see if we have seen the item before.\n        record = this._linkedRecords === null ? null : this._linkedRecords.get(itemTrackBy, index);\n        if (record !== null) {\n            // We have seen this before, we need to move it forward in the collection.\n            // But first we need to check if identity changed, so we can update in view if necessary\n            if (!looseIdentical(record.item, item))\n                this._addIdentityChange(record, item);\n            this._moveAfter(record, previousRecord, index);\n        }\n        else {\n            // Never seen it, check evicted list.\n            record = this._unlinkedRecords === null ? null : this._unlinkedRecords.get(itemTrackBy, null);\n            if (record !== null) {\n                // It is an item which we have evicted earlier: reinsert it back into the list.\n                // But first we need to check if identity changed, so we can update in view if necessary\n                if (!looseIdentical(record.item, item))\n                    this._addIdentityChange(record, item);\n                this._reinsertAfter(record, previousRecord, index);\n            }\n            else {\n                // It is a new item: add it.\n                record =\n                    this._addAfter(new IterableChangeRecord_(item, itemTrackBy), previousRecord, index);\n            }\n        }\n        return record;\n    };\n    /**\n     * This check is only needed if an array contains duplicates. (Short circuit of nothing dirty)\n     *\n     * Use case: `[a, a]` => `[b, a, a]`\n     *\n     * If we did not have this check then the insertion of `b` would:\n     *   1) evict first `a`\n     *   2) insert `b` at `0` index.\n     *   3) leave `a` at index `1` as is. <-- this is wrong!\n     *   3) reinsert `a` at index 2. <-- this is wrong!\n     *\n     * The correct behavior is:\n     *   1) evict first `a`\n     *   2) insert `b` at `0` index.\n     *   3) reinsert `a` at index 1.\n     *   3) move `a` at from `1` to `2`.\n     *\n     *\n     * Double check that we have not evicted a duplicate item. We need to check if the item type may\n     * have already been removed:\n     * The insertion of b will evict the first 'a'. If we don't reinsert it now it will be reinserted\n     * at the end. Which will show up as the two 'a's switching position. This is incorrect, since a\n     * better way to think of it is as insert of 'b' rather then switch 'a' with 'b' and then add 'a'\n     * at the end.\n     *\n     * @internal\n     */\n    /**\n       * This check is only needed if an array contains duplicates. (Short circuit of nothing dirty)\n       *\n       * Use case: `[a, a]` => `[b, a, a]`\n       *\n       * If we did not have this check then the insertion of `b` would:\n       *   1) evict first `a`\n       *   2) insert `b` at `0` index.\n       *   3) leave `a` at index `1` as is. <-- this is wrong!\n       *   3) reinsert `a` at index 2. <-- this is wrong!\n       *\n       * The correct behavior is:\n       *   1) evict first `a`\n       *   2) insert `b` at `0` index.\n       *   3) reinsert `a` at index 1.\n       *   3) move `a` at from `1` to `2`.\n       *\n       *\n       * Double check that we have not evicted a duplicate item. We need to check if the item type may\n       * have already been removed:\n       * The insertion of b will evict the first 'a'. If we don't reinsert it now it will be reinserted\n       * at the end. Which will show up as the two 'a's switching position. This is incorrect, since a\n       * better way to think of it is as insert of 'b' rather then switch 'a' with 'b' and then add 'a'\n       * at the end.\n       *\n       * @internal\n       */\n    DefaultIterableDiffer.prototype._verifyReinsertion = /**\n       * This check is only needed if an array contains duplicates. (Short circuit of nothing dirty)\n       *\n       * Use case: `[a, a]` => `[b, a, a]`\n       *\n       * If we did not have this check then the insertion of `b` would:\n       *   1) evict first `a`\n       *   2) insert `b` at `0` index.\n       *   3) leave `a` at index `1` as is. <-- this is wrong!\n       *   3) reinsert `a` at index 2. <-- this is wrong!\n       *\n       * The correct behavior is:\n       *   1) evict first `a`\n       *   2) insert `b` at `0` index.\n       *   3) reinsert `a` at index 1.\n       *   3) move `a` at from `1` to `2`.\n       *\n       *\n       * Double check that we have not evicted a duplicate item. We need to check if the item type may\n       * have already been removed:\n       * The insertion of b will evict the first 'a'. If we don't reinsert it now it will be reinserted\n       * at the end. Which will show up as the two 'a's switching position. This is incorrect, since a\n       * better way to think of it is as insert of 'b' rather then switch 'a' with 'b' and then add 'a'\n       * at the end.\n       *\n       * @internal\n       */\n    function (record, item, itemTrackBy, index) {\n        var reinsertRecord = this._unlinkedRecords === null ? null : this._unlinkedRecords.get(itemTrackBy, null);\n        if (reinsertRecord !== null) {\n            record = this._reinsertAfter(reinsertRecord, (record._prev), index);\n        }\n        else if (record.currentIndex != index) {\n            record.currentIndex = index;\n            this._addToMoves(record, index);\n        }\n        return record;\n    };\n    /**\n     * Get rid of any excess {@link IterableChangeRecord_}s from the previous collection\n     *\n     * - `record` The first excess {@link IterableChangeRecord_}.\n     *\n     * @internal\n     */\n    /**\n       * Get rid of any excess {@link IterableChangeRecord_}s from the previous collection\n       *\n       * - `record` The first excess {@link IterableChangeRecord_}.\n       *\n       * @internal\n       */\n    DefaultIterableDiffer.prototype._truncate = /**\n       * Get rid of any excess {@link IterableChangeRecord_}s from the previous collection\n       *\n       * - `record` The first excess {@link IterableChangeRecord_}.\n       *\n       * @internal\n       */\n    function (record) {\n        // Anything after that needs to be removed;\n        while (record !== null) {\n            var nextRecord = record._next;\n            this._addToRemovals(this._unlink(record));\n            record = nextRecord;\n        }\n        if (this._unlinkedRecords !== null) {\n            this._unlinkedRecords.clear();\n        }\n        if (this._additionsTail !== null) {\n            this._additionsTail._nextAdded = null;\n        }\n        if (this._movesTail !== null) {\n            this._movesTail._nextMoved = null;\n        }\n        if (this._itTail !== null) {\n            this._itTail._next = null;\n        }\n        if (this._removalsTail !== null) {\n            this._removalsTail._nextRemoved = null;\n        }\n        if (this._identityChangesTail !== null) {\n            this._identityChangesTail._nextIdentityChange = null;\n        }\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._reinsertAfter = /** @internal */\n    function (record, prevRecord, index) {\n        if (this._unlinkedRecords !== null) {\n            this._unlinkedRecords.remove(record);\n        }\n        var prev = record._prevRemoved;\n        var next = record._nextRemoved;\n        if (prev === null) {\n            this._removalsHead = next;\n        }\n        else {\n            prev._nextRemoved = next;\n        }\n        if (next === null) {\n            this._removalsTail = prev;\n        }\n        else {\n            next._prevRemoved = prev;\n        }\n        this._insertAfter(record, prevRecord, index);\n        this._addToMoves(record, index);\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._moveAfter = /** @internal */\n    function (record, prevRecord, index) {\n        this._unlink(record);\n        this._insertAfter(record, prevRecord, index);\n        this._addToMoves(record, index);\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._addAfter = /** @internal */\n    function (record, prevRecord, index) {\n        this._insertAfter(record, prevRecord, index);\n        if (this._additionsTail === null) {\n            // TODO(vicb):\n            // assert(this._additionsHead === null);\n            this._additionsTail = this._additionsHead = record;\n        }\n        else {\n            // TODO(vicb):\n            // assert(_additionsTail._nextAdded === null);\n            // assert(record._nextAdded === null);\n            this._additionsTail = this._additionsTail._nextAdded = record;\n        }\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._insertAfter = /** @internal */\n    function (record, prevRecord, index) {\n        // TODO(vicb):\n        // assert(record != prevRecord);\n        // assert(record._next === null);\n        // assert(record._prev === null);\n        var next = prevRecord === null ? this._itHead : prevRecord._next;\n        // TODO(vicb):\n        // assert(next != record);\n        // assert(prevRecord != record);\n        record._next = next;\n        record._prev = prevRecord;\n        if (next === null) {\n            this._itTail = record;\n        }\n        else {\n            next._prev = record;\n        }\n        if (prevRecord === null) {\n            this._itHead = record;\n        }\n        else {\n            prevRecord._next = record;\n        }\n        if (this._linkedRecords === null) {\n            this._linkedRecords = new _DuplicateMap();\n        }\n        this._linkedRecords.put(record);\n        record.currentIndex = index;\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._remove = /** @internal */\n    function (record) {\n        return this._addToRemovals(this._unlink(record));\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._unlink = /** @internal */\n    function (record) {\n        if (this._linkedRecords !== null) {\n            this._linkedRecords.remove(record);\n        }\n        var prev = record._prev;\n        var next = record._next;\n        // TODO(vicb):\n        // assert((record._prev = null) === null);\n        // assert((record._next = null) === null);\n        if (prev === null) {\n            this._itHead = next;\n        }\n        else {\n            prev._next = next;\n        }\n        if (next === null) {\n            this._itTail = prev;\n        }\n        else {\n            next._prev = prev;\n        }\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._addToMoves = /** @internal */\n    function (record, toIndex) {\n        // TODO(vicb):\n        // assert(record._nextMoved === null);\n        if (record.previousIndex === toIndex) {\n            return record;\n        }\n        if (this._movesTail === null) {\n            // TODO(vicb):\n            // assert(_movesHead === null);\n            this._movesTail = this._movesHead = record;\n        }\n        else {\n            // TODO(vicb):\n            // assert(_movesTail._nextMoved === null);\n            this._movesTail = this._movesTail._nextMoved = record;\n        }\n        return record;\n    };\n    DefaultIterableDiffer.prototype._addToRemovals = function (record) {\n        if (this._unlinkedRecords === null) {\n            this._unlinkedRecords = new _DuplicateMap();\n        }\n        this._unlinkedRecords.put(record);\n        record.currentIndex = null;\n        record._nextRemoved = null;\n        if (this._removalsTail === null) {\n            // TODO(vicb):\n            // assert(_removalsHead === null);\n            this._removalsTail = this._removalsHead = record;\n            record._prevRemoved = null;\n        }\n        else {\n            // TODO(vicb):\n            // assert(_removalsTail._nextRemoved === null);\n            // assert(record._nextRemoved === null);\n            record._prevRemoved = this._removalsTail;\n            this._removalsTail = this._removalsTail._nextRemoved = record;\n        }\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._addIdentityChange = /** @internal */\n    function (record, item) {\n        record.item = item;\n        if (this._identityChangesTail === null) {\n            this._identityChangesTail = this._identityChangesHead = record;\n        }\n        else {\n            this._identityChangesTail = this._identityChangesTail._nextIdentityChange = record;\n        }\n        return record;\n    };\n    return DefaultIterableDiffer;\n}());\n/**\n *\n */\nvar IterableChangeRecord_ = /** @class */ (function () {\n    function IterableChangeRecord_(item, trackById) {\n        this.item = item;\n        this.trackById = trackById;\n        this.currentIndex = null;\n        this.previousIndex = null;\n        /** @internal */\n        this._nextPrevious = null;\n        /** @internal */\n        this._prev = null;\n        /** @internal */\n        this._next = null;\n        /** @internal */\n        this._prevDup = null;\n        /** @internal */\n        this._nextDup = null;\n        /** @internal */\n        this._prevRemoved = null;\n        /** @internal */\n        this._nextRemoved = null;\n        /** @internal */\n        this._nextAdded = null;\n        /** @internal */\n        this._nextMoved = null;\n        /** @internal */\n        this._nextIdentityChange = null;\n    }\n    return IterableChangeRecord_;\n}());\n// A linked list of CollectionChangeRecords with the same IterableChangeRecord_.item\nvar _DuplicateItemRecordList = /** @class */ (function () {\n    function _DuplicateItemRecordList() {\n        /** @internal */\n        this._head = null;\n        /** @internal */\n        this._tail = null;\n    }\n    /**\n     * Append the record to the list of duplicates.\n     *\n     * Note: by design all records in the list of duplicates hold the same value in record.item.\n     */\n    /**\n       * Append the record to the list of duplicates.\n       *\n       * Note: by design all records in the list of duplicates hold the same value in record.item.\n       */\n    _DuplicateItemRecordList.prototype.add = /**\n       * Append the record to the list of duplicates.\n       *\n       * Note: by design all records in the list of duplicates hold the same value in record.item.\n       */\n    function (record) {\n        if (this._head === null) {\n            this._head = this._tail = record;\n            record._nextDup = null;\n            record._prevDup = null;\n        }\n        else {\n            // TODO(vicb):\n            // assert(record.item ==  _head.item ||\n            //       record.item is num && record.item.isNaN && _head.item is num && _head.item.isNaN);\n            // TODO(vicb):\n            // assert(record.item ==  _head.item ||\n            //       record.item is num && record.item.isNaN && _head.item is num && _head.item.isNaN);\n            this._tail._nextDup = record;\n            record._prevDup = this._tail;\n            record._nextDup = null;\n            this._tail = record;\n        }\n    };\n    // Returns a IterableChangeRecord_ having IterableChangeRecord_.trackById == trackById and\n    // IterableChangeRecord_.currentIndex >= atOrAfterIndex\n    // Returns a IterableChangeRecord_ having IterableChangeRecord_.trackById == trackById and\n    // IterableChangeRecord_.currentIndex >= atOrAfterIndex\n    _DuplicateItemRecordList.prototype.get = \n    // Returns a IterableChangeRecord_ having IterableChangeRecord_.trackById == trackById and\n    // IterableChangeRecord_.currentIndex >= atOrAfterIndex\n    function (trackById, atOrAfterIndex) {\n        var record;\n        for (record = this._head; record !== null; record = record._nextDup) {\n            if ((atOrAfterIndex === null || atOrAfterIndex <= (record.currentIndex)) &&\n                looseIdentical(record.trackById, trackById)) {\n                return record;\n            }\n        }\n        return null;\n    };\n    /**\n     * Remove one {@link IterableChangeRecord_} from the list of duplicates.\n     *\n     * Returns whether the list of duplicates is empty.\n     */\n    /**\n       * Remove one {@link IterableChangeRecord_} from the list of duplicates.\n       *\n       * Returns whether the list of duplicates is empty.\n       */\n    _DuplicateItemRecordList.prototype.remove = /**\n       * Remove one {@link IterableChangeRecord_} from the list of duplicates.\n       *\n       * Returns whether the list of duplicates is empty.\n       */\n    function (record) {\n        // TODO(vicb):\n        // assert(() {\n        //  // verify that the record being removed is in the list.\n        //  for (IterableChangeRecord_ cursor = _head; cursor != null; cursor = cursor._nextDup) {\n        //    if (identical(cursor, record)) return true;\n        //  }\n        //  return false;\n        //});\n        var prev = record._prevDup;\n        var next = record._nextDup;\n        if (prev === null) {\n            this._head = next;\n        }\n        else {\n            prev._nextDup = next;\n        }\n        if (next === null) {\n            this._tail = prev;\n        }\n        else {\n            next._prevDup = prev;\n        }\n        return this._head === null;\n    };\n    return _DuplicateItemRecordList;\n}());\nvar _DuplicateMap = /** @class */ (function () {\n    function _DuplicateMap() {\n        this.map = new Map();\n    }\n    _DuplicateMap.prototype.put = function (record) {\n        var key = record.trackById;\n        var duplicates = this.map.get(key);\n        if (!duplicates) {\n            duplicates = new _DuplicateItemRecordList();\n            this.map.set(key, duplicates);\n        }\n        duplicates.add(record);\n    };\n    /**\n     * Retrieve the `value` using key. Because the IterableChangeRecord_ value may be one which we\n     * have already iterated over, we use the `atOrAfterIndex` to pretend it is not there.\n     *\n     * Use case: `[a, b, c, a, a]` if we are at index `3` which is the second `a` then asking if we\n     * have any more `a`s needs to return the second `a`.\n     */\n    /**\n       * Retrieve the `value` using key. Because the IterableChangeRecord_ value may be one which we\n       * have already iterated over, we use the `atOrAfterIndex` to pretend it is not there.\n       *\n       * Use case: `[a, b, c, a, a]` if we are at index `3` which is the second `a` then asking if we\n       * have any more `a`s needs to return the second `a`.\n       */\n    _DuplicateMap.prototype.get = /**\n       * Retrieve the `value` using key. Because the IterableChangeRecord_ value may be one which we\n       * have already iterated over, we use the `atOrAfterIndex` to pretend it is not there.\n       *\n       * Use case: `[a, b, c, a, a]` if we are at index `3` which is the second `a` then asking if we\n       * have any more `a`s needs to return the second `a`.\n       */\n    function (trackById, atOrAfterIndex) {\n        var key = trackById;\n        var recordList = this.map.get(key);\n        return recordList ? recordList.get(trackById, atOrAfterIndex) : null;\n    };\n    /**\n     * Removes a {@link IterableChangeRecord_} from the list of duplicates.\n     *\n     * The list of duplicates also is removed from the map if it gets empty.\n     */\n    /**\n       * Removes a {@link IterableChangeRecord_} from the list of duplicates.\n       *\n       * The list of duplicates also is removed from the map if it gets empty.\n       */\n    _DuplicateMap.prototype.remove = /**\n       * Removes a {@link IterableChangeRecord_} from the list of duplicates.\n       *\n       * The list of duplicates also is removed from the map if it gets empty.\n       */\n    function (record) {\n        var key = record.trackById;\n        var recordList = (this.map.get(key));\n        // Remove the list of duplicates when it gets empty\n        if (recordList.remove(record)) {\n            this.map.delete(key);\n        }\n        return record;\n    };\n    Object.defineProperty(_DuplicateMap.prototype, \"isEmpty\", {\n        get: function () { return this.map.size === 0; },\n        enumerable: true,\n        configurable: true\n    });\n    _DuplicateMap.prototype.clear = function () { this.map.clear(); };\n    return _DuplicateMap;\n}());\nfunction getPreviousIndex(item, addRemoveOffset, moveOffsets) {\n    var previousIndex = item.previousIndex;\n    if (previousIndex === null)\n        return previousIndex;\n    var moveOffset = 0;\n    if (moveOffsets && previousIndex < moveOffsets.length) {\n        moveOffset = moveOffsets[previousIndex];\n    }\n    return previousIndex + addRemoveOffset + moveOffset;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar DefaultKeyValueDifferFactory = /** @class */ (function () {\n    function DefaultKeyValueDifferFactory() {\n    }\n    DefaultKeyValueDifferFactory.prototype.supports = function (obj) { return obj instanceof Map || isJsObject(obj); };\n    DefaultKeyValueDifferFactory.prototype.create = function () { return new DefaultKeyValueDiffer(); };\n    return DefaultKeyValueDifferFactory;\n}());\nvar DefaultKeyValueDiffer = /** @class */ (function () {\n    function DefaultKeyValueDiffer() {\n        this._records = new Map();\n        this._mapHead = null;\n        // _appendAfter is used in the check loop\n        this._appendAfter = null;\n        this._previousMapHead = null;\n        this._changesHead = null;\n        this._changesTail = null;\n        this._additionsHead = null;\n        this._additionsTail = null;\n        this._removalsHead = null;\n        this._removalsTail = null;\n    }\n    Object.defineProperty(DefaultKeyValueDiffer.prototype, \"isDirty\", {\n        get: function () {\n            return this._additionsHead !== null || this._changesHead !== null ||\n                this._removalsHead !== null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DefaultKeyValueDiffer.prototype.forEachItem = function (fn) {\n        var record;\n        for (record = this._mapHead; record !== null; record = record._next) {\n            fn(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype.forEachPreviousItem = function (fn) {\n        var record;\n        for (record = this._previousMapHead; record !== null; record = record._nextPrevious) {\n            fn(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype.forEachChangedItem = function (fn) {\n        var record;\n        for (record = this._changesHead; record !== null; record = record._nextChanged) {\n            fn(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype.forEachAddedItem = function (fn) {\n        var record;\n        for (record = this._additionsHead; record !== null; record = record._nextAdded) {\n            fn(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype.forEachRemovedItem = function (fn) {\n        var record;\n        for (record = this._removalsHead; record !== null; record = record._nextRemoved) {\n            fn(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype.diff = function (map) {\n        if (!map) {\n            map = new Map();\n        }\n        else if (!(map instanceof Map || isJsObject(map))) {\n            throw new Error(\"Error trying to diff '\" + stringify$1(map) + \"'. Only maps and objects are allowed\");\n        }\n        return this.check(map) ? this : null;\n    };\n    DefaultKeyValueDiffer.prototype.onDestroy = function () { };\n    /**\n     * Check the current state of the map vs the previous.\n     * The algorithm is optimised for when the keys do no change.\n     */\n    /**\n       * Check the current state of the map vs the previous.\n       * The algorithm is optimised for when the keys do no change.\n       */\n    DefaultKeyValueDiffer.prototype.check = /**\n       * Check the current state of the map vs the previous.\n       * The algorithm is optimised for when the keys do no change.\n       */\n    function (map) {\n        var _this = this;\n        this._reset();\n        var insertBefore = this._mapHead;\n        this._appendAfter = null;\n        this._forEach(map, function (value, key) {\n            if (insertBefore && insertBefore.key === key) {\n                _this._maybeAddToChanges(insertBefore, value);\n                _this._appendAfter = insertBefore;\n                insertBefore = insertBefore._next;\n            }\n            else {\n                var record = _this._getOrCreateRecordForKey(key, value);\n                insertBefore = _this._insertBeforeOrAppend(insertBefore, record);\n            }\n        });\n        // Items remaining at the end of the list have been deleted\n        if (insertBefore) {\n            if (insertBefore._prev) {\n                insertBefore._prev._next = null;\n            }\n            this._removalsHead = insertBefore;\n            for (var record = insertBefore; record !== null; record = record._nextRemoved) {\n                if (record === this._mapHead) {\n                    this._mapHead = null;\n                }\n                this._records.delete(record.key);\n                record._nextRemoved = record._next;\n                record.previousValue = record.currentValue;\n                record.currentValue = null;\n                record._prev = null;\n                record._next = null;\n            }\n        }\n        // Make sure tails have no next records from previous runs\n        if (this._changesTail)\n            this._changesTail._nextChanged = null;\n        if (this._additionsTail)\n            this._additionsTail._nextAdded = null;\n        return this.isDirty;\n    };\n    /**\n     * Inserts a record before `before` or append at the end of the list when `before` is null.\n     *\n     * Notes:\n     * - This method appends at `this._appendAfter`,\n     * - This method updates `this._appendAfter`,\n     * - The return value is the new value for the insertion pointer.\n     */\n    /**\n       * Inserts a record before `before` or append at the end of the list when `before` is null.\n       *\n       * Notes:\n       * - This method appends at `this._appendAfter`,\n       * - This method updates `this._appendAfter`,\n       * - The return value is the new value for the insertion pointer.\n       */\n    DefaultKeyValueDiffer.prototype._insertBeforeOrAppend = /**\n       * Inserts a record before `before` or append at the end of the list when `before` is null.\n       *\n       * Notes:\n       * - This method appends at `this._appendAfter`,\n       * - This method updates `this._appendAfter`,\n       * - The return value is the new value for the insertion pointer.\n       */\n    function (before, record) {\n        if (before) {\n            var prev = before._prev;\n            record._next = before;\n            record._prev = prev;\n            before._prev = record;\n            if (prev) {\n                prev._next = record;\n            }\n            if (before === this._mapHead) {\n                this._mapHead = record;\n            }\n            this._appendAfter = before;\n            return before;\n        }\n        if (this._appendAfter) {\n            this._appendAfter._next = record;\n            record._prev = this._appendAfter;\n        }\n        else {\n            this._mapHead = record;\n        }\n        this._appendAfter = record;\n        return null;\n    };\n    DefaultKeyValueDiffer.prototype._getOrCreateRecordForKey = function (key, value) {\n        if (this._records.has(key)) {\n            var record_1 = (this._records.get(key));\n            this._maybeAddToChanges(record_1, value);\n            var prev = record_1._prev;\n            var next = record_1._next;\n            if (prev) {\n                prev._next = next;\n            }\n            if (next) {\n                next._prev = prev;\n            }\n            record_1._next = null;\n            record_1._prev = null;\n            return record_1;\n        }\n        var record = new KeyValueChangeRecord_(key);\n        this._records.set(key, record);\n        record.currentValue = value;\n        this._addToAdditions(record);\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultKeyValueDiffer.prototype._reset = /** @internal */\n    function () {\n        if (this.isDirty) {\n            var record = void 0;\n            // let `_previousMapHead` contain the state of the map before the changes\n            this._previousMapHead = this._mapHead;\n            for (record = this._previousMapHead; record !== null; record = record._next) {\n                record._nextPrevious = record._next;\n            }\n            // Update `record.previousValue` with the value of the item before the changes\n            // We need to update all changed items (that's those which have been added and changed)\n            for (record = this._changesHead; record !== null; record = record._nextChanged) {\n                record.previousValue = record.currentValue;\n            }\n            for (record = this._additionsHead; record != null; record = record._nextAdded) {\n                record.previousValue = record.currentValue;\n            }\n            this._changesHead = this._changesTail = null;\n            this._additionsHead = this._additionsTail = null;\n            this._removalsHead = null;\n        }\n    };\n    // Add the record or a given key to the list of changes only when the value has actually changed\n    // Add the record or a given key to the list of changes only when the value has actually changed\n    DefaultKeyValueDiffer.prototype._maybeAddToChanges = \n    // Add the record or a given key to the list of changes only when the value has actually changed\n    function (record, newValue) {\n        if (!looseIdentical(newValue, record.currentValue)) {\n            record.previousValue = record.currentValue;\n            record.currentValue = newValue;\n            this._addToChanges(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype._addToAdditions = function (record) {\n        if (this._additionsHead === null) {\n            this._additionsHead = this._additionsTail = record;\n        }\n        else {\n            this._additionsTail._nextAdded = record;\n            this._additionsTail = record;\n        }\n    };\n    DefaultKeyValueDiffer.prototype._addToChanges = function (record) {\n        if (this._changesHead === null) {\n            this._changesHead = this._changesTail = record;\n        }\n        else {\n            this._changesTail._nextChanged = record;\n            this._changesTail = record;\n        }\n    };\n    /** @internal */\n    /** @internal */\n    DefaultKeyValueDiffer.prototype._forEach = /** @internal */\n    function (obj, fn) {\n        if (obj instanceof Map) {\n            obj.forEach(fn);\n        }\n        else {\n            Object.keys(obj).forEach(function (k) { return fn(obj[k], k); });\n        }\n    };\n    return DefaultKeyValueDiffer;\n}());\n/**\n *\n */\nvar KeyValueChangeRecord_ = /** @class */ (function () {\n    function KeyValueChangeRecord_(key) {\n        this.key = key;\n        this.previousValue = null;\n        this.currentValue = null;\n        /** @internal */\n        this._nextPrevious = null;\n        /** @internal */\n        this._next = null;\n        /** @internal */\n        this._prev = null;\n        /** @internal */\n        this._nextAdded = null;\n        /** @internal */\n        this._nextRemoved = null;\n        /** @internal */\n        this._nextChanged = null;\n    }\n    return KeyValueChangeRecord_;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A repository of different iterable diffing strategies used by NgFor, NgClass, and others.\n *\n */\nvar IterableDiffers = /** @class */ (function () {\n    function IterableDiffers(factories) {\n        this.factories = factories;\n    }\n    IterableDiffers.create = function (factories, parent) {\n        if (parent != null) {\n            var copied = parent.factories.slice();\n            factories = factories.concat(copied);\n        }\n        return new IterableDiffers(factories);\n    };\n    /**\n     * Takes an array of {@link IterableDifferFactory} and returns a provider used to extend the\n     * inherited {@link IterableDiffers} instance with the provided factories and return a new\n     * {@link IterableDiffers} instance.\n     *\n     * The following example shows how to extend an existing list of factories,\n     * which will only be applied to the injector for this component and its children.\n     * This step is all that's required to make a new {@link IterableDiffer} available.\n     *\n     * ### Example\n     *\n     * ```\n     * @Component({\n     *   viewProviders: [\n     *     IterableDiffers.extend([new ImmutableListDiffer()])\n     *   ]\n     * })\n     * ```\n     */\n    /**\n       * Takes an array of {@link IterableDifferFactory} and returns a provider used to extend the\n       * inherited {@link IterableDiffers} instance with the provided factories and return a new\n       * {@link IterableDiffers} instance.\n       *\n       * The following example shows how to extend an existing list of factories,\n       * which will only be applied to the injector for this component and its children.\n       * This step is all that's required to make a new {@link IterableDiffer} available.\n       *\n       * ### Example\n       *\n       * ```\n       * @Component({\n       *   viewProviders: [\n       *     IterableDiffers.extend([new ImmutableListDiffer()])\n       *   ]\n       * })\n       * ```\n       */\n    IterableDiffers.extend = /**\n       * Takes an array of {@link IterableDifferFactory} and returns a provider used to extend the\n       * inherited {@link IterableDiffers} instance with the provided factories and return a new\n       * {@link IterableDiffers} instance.\n       *\n       * The following example shows how to extend an existing list of factories,\n       * which will only be applied to the injector for this component and its children.\n       * This step is all that's required to make a new {@link IterableDiffer} available.\n       *\n       * ### Example\n       *\n       * ```\n       * @Component({\n       *   viewProviders: [\n       *     IterableDiffers.extend([new ImmutableListDiffer()])\n       *   ]\n       * })\n       * ```\n       */\n    function (factories) {\n        return {\n            provide: IterableDiffers,\n            useFactory: function (parent) {\n                if (!parent) {\n                    // Typically would occur when calling IterableDiffers.extend inside of dependencies passed\n                    // to\n                    // bootstrap(), which would override default pipes instead of extending them.\n                    throw new Error('Cannot extend IterableDiffers without a parent injector');\n                }\n                return IterableDiffers.create(factories, parent);\n            },\n            // Dependency technically isn't optional, but we can provide a better error message this way.\n            deps: [[IterableDiffers, new SkipSelf(), new Optional()]]\n        };\n    };\n    IterableDiffers.prototype.find = function (iterable) {\n        var factory = this.factories.find(function (f) { return f.supports(iterable); });\n        if (factory != null) {\n            return factory;\n        }\n        else {\n            throw new Error(\"Cannot find a differ supporting object '\" + iterable + \"' of type '\" + getTypeNameForDebugging(iterable) + \"'\");\n        }\n    };\n    IterableDiffers.ngInjectableDef = defineInjectable({\n        providedIn: 'root',\n        factory: function () { return new IterableDiffers([new DefaultIterableDifferFactory()]); }\n    });\n    return IterableDiffers;\n}());\nfunction getTypeNameForDebugging(type) {\n    return type['name'] || typeof type;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A repository of different Map diffing strategies used by NgClass, NgStyle, and others.\n *\n */\nvar KeyValueDiffers = /** @class */ (function () {\n    function KeyValueDiffers(factories) {\n        this.factories = factories;\n    }\n    KeyValueDiffers.create = function (factories, parent) {\n        if (parent) {\n            var copied = parent.factories.slice();\n            factories = factories.concat(copied);\n        }\n        return new KeyValueDiffers(factories);\n    };\n    /**\n     * Takes an array of {@link KeyValueDifferFactory} and returns a provider used to extend the\n     * inherited {@link KeyValueDiffers} instance with the provided factories and return a new\n     * {@link KeyValueDiffers} instance.\n     *\n     * The following example shows how to extend an existing list of factories,\n     * which will only be applied to the injector for this component and its children.\n     * This step is all that's required to make a new {@link KeyValueDiffer} available.\n     *\n     * ### Example\n     *\n     * ```\n     * @Component({\n     *   viewProviders: [\n     *     KeyValueDiffers.extend([new ImmutableMapDiffer()])\n     *   ]\n     * })\n     * ```\n     */\n    /**\n       * Takes an array of {@link KeyValueDifferFactory} and returns a provider used to extend the\n       * inherited {@link KeyValueDiffers} instance with the provided factories and return a new\n       * {@link KeyValueDiffers} instance.\n       *\n       * The following example shows how to extend an existing list of factories,\n       * which will only be applied to the injector for this component and its children.\n       * This step is all that's required to make a new {@link KeyValueDiffer} available.\n       *\n       * ### Example\n       *\n       * ```\n       * @Component({\n       *   viewProviders: [\n       *     KeyValueDiffers.extend([new ImmutableMapDiffer()])\n       *   ]\n       * })\n       * ```\n       */\n    KeyValueDiffers.extend = /**\n       * Takes an array of {@link KeyValueDifferFactory} and returns a provider used to extend the\n       * inherited {@link KeyValueDiffers} instance with the provided factories and return a new\n       * {@link KeyValueDiffers} instance.\n       *\n       * The following example shows how to extend an existing list of factories,\n       * which will only be applied to the injector for this component and its children.\n       * This step is all that's required to make a new {@link KeyValueDiffer} available.\n       *\n       * ### Example\n       *\n       * ```\n       * @Component({\n       *   viewProviders: [\n       *     KeyValueDiffers.extend([new ImmutableMapDiffer()])\n       *   ]\n       * })\n       * ```\n       */\n    function (factories) {\n        return {\n            provide: KeyValueDiffers,\n            useFactory: function (parent) {\n                if (!parent) {\n                    // Typically would occur when calling KeyValueDiffers.extend inside of dependencies passed\n                    // to bootstrap(), which would override default pipes instead of extending them.\n                    throw new Error('Cannot extend KeyValueDiffers without a parent injector');\n                }\n                return KeyValueDiffers.create(factories, parent);\n            },\n            // Dependency technically isn't optional, but we can provide a better error message this way.\n            deps: [[KeyValueDiffers, new SkipSelf(), new Optional()]]\n        };\n    };\n    KeyValueDiffers.prototype.find = function (kv) {\n        var factory = this.factories.find(function (f) { return f.supports(kv); });\n        if (factory) {\n            return factory;\n        }\n        throw new Error(\"Cannot find a differ supporting object '\" + kv + \"'\");\n    };\n    return KeyValueDiffers;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Structural diffing for `Object`s and `Map`s.\n */\nvar keyValDiff = [new DefaultKeyValueDifferFactory()];\n/**\n * Structural diffing for `Iterable` types such as `Array`s.\n */\nvar iterableDiff = [new DefaultIterableDifferFactory()];\nvar defaultIterableDiffers = new IterableDiffers(iterableDiff);\nvar defaultKeyValueDiffers = new KeyValueDiffers(keyValDiff);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _CORE_PLATFORM_PROVIDERS = [\n    // Set a default platform name for platforms that don't set it explicitly.\n    { provide: PLATFORM_ID, useValue: 'unknown' },\n    { provide: PlatformRef, deps: [Injector] },\n    { provide: TestabilityRegistry, deps: [] },\n    { provide: Console, deps: [] },\n];\n/**\n * This platform has to be included in any other platform\n *\n * @experimental\n */\nvar platformCore = createPlatformFactory(null, 'core', _CORE_PLATFORM_PROVIDERS);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Provide this token to set the locale of your application.\n * It is used for i18n extraction, by i18n pipes (DatePipe, I18nPluralPipe, CurrencyPipe,\n * DecimalPipe and PercentPipe) and by ICU expressions.\n *\n * See the {@linkDocs guide/i18n#setting-up-locale i18n guide} for more information.\n *\n * ### Example\n *\n * ```typescript\n * import { LOCALE_ID } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   providers: [{provide: LOCALE_ID, useValue: 'en-US' }]\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\nvar LOCALE_ID = new InjectionToken('LocaleId');\n/**\n * Use this token at bootstrap to provide the content of your translation file (`xtb`,\n * `xlf` or `xlf2`) when you want to translate your application in another language.\n *\n * See the {@linkDocs guide/i18n#merge i18n guide} for more information.\n *\n * ### Example\n *\n * ```typescript\n * import { TRANSLATIONS } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * // content of your translation file\n * const translations = '....';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   providers: [{provide: TRANSLATIONS, useValue: translations }]\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\nvar TRANSLATIONS = new InjectionToken('Translations');\n/**\n * Provide this token at bootstrap to set the format of your {@link TRANSLATIONS}: `xtb`,\n * `xlf` or `xlf2`.\n *\n * See the {@linkDocs guide/i18n#merge i18n guide} for more information.\n *\n * ### Example\n *\n * ```typescript\n * import { TRANSLATIONS_FORMAT } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   providers: [{provide: TRANSLATIONS_FORMAT, useValue: 'xlf' }]\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\nvar TRANSLATIONS_FORMAT = new InjectionToken('TranslationsFormat');\n/**\n * Use this enum at bootstrap as an option of `bootstrapModule` to define the strategy\n * that the compiler should use in case of missing translations:\n * - Error: throw if you have missing translations.\n * - Warning (default): show a warning in the console and/or shell.\n * - Ignore: do nothing.\n *\n * See the {@linkDocs guide/i18n#missing-translation i18n guide} for more information.\n *\n * ### Example\n * ```typescript\n * import { MissingTranslationStrategy } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   missingTranslation: MissingTranslationStrategy.Error\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\n/**\n * Use this enum at bootstrap as an option of `bootstrapModule` to define the strategy\n * that the compiler should use in case of missing translations:\n * - Error: throw if you have missing translations.\n * - Warning (default): show a warning in the console and/or shell.\n * - Ignore: do nothing.\n *\n * See the {@linkDocs guide/i18n#missing-translation i18n guide} for more information.\n *\n * ### Example\n * ```typescript\n * import { MissingTranslationStrategy } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   missingTranslation: MissingTranslationStrategy.Error\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\nvar MissingTranslationStrategy$1;\n/**\n * Use this enum at bootstrap as an option of `bootstrapModule` to define the strategy\n * that the compiler should use in case of missing translations:\n * - Error: throw if you have missing translations.\n * - Warning (default): show a warning in the console and/or shell.\n * - Ignore: do nothing.\n *\n * See the {@linkDocs guide/i18n#missing-translation i18n guide} for more information.\n *\n * ### Example\n * ```typescript\n * import { MissingTranslationStrategy } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   missingTranslation: MissingTranslationStrategy.Error\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\n(function (MissingTranslationStrategy) {\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Error\"] = 0] = \"Error\";\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Warning\"] = 1] = \"Warning\";\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Ignore\"] = 2] = \"Ignore\";\n})(MissingTranslationStrategy$1 || (MissingTranslationStrategy$1 = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction _iterableDiffersFactory() {\n    return defaultIterableDiffers;\n}\nfunction _keyValueDiffersFactory() {\n    return defaultKeyValueDiffers;\n}\nfunction _localeFactory(locale) {\n    return locale || 'en-US';\n}\n/**\n * This module includes the providers of @angular/core that are needed\n * to bootstrap components via `ApplicationRef`.\n *\n * @experimental\n */\nvar ApplicationModule = /** @class */ (function () {\n    // Inject ApplicationRef to make it eager...\n    function ApplicationModule(appRef) {\n    }\n    ApplicationModule.decorators = [\n        { type: NgModule, args: [{\n                    providers: [\n                        ApplicationRef,\n                        ApplicationInitStatus,\n                        Compiler,\n                        APP_ID_RANDOM_PROVIDER,\n                        { provide: IterableDiffers, useFactory: _iterableDiffersFactory },\n                        { provide: KeyValueDiffers, useFactory: _keyValueDiffersFactory },\n                        {\n                            provide: LOCALE_ID,\n                            useFactory: _localeFactory,\n                            deps: [[new Inject(LOCALE_ID), new Optional(), new SkipSelf()]]\n                        },\n                    ]\n                },] }\n    ];\n    /** @nocollapse */\n    ApplicationModule.ctorParameters = function () { return [\n        { type: ApplicationRef, },\n    ]; };\n    return ApplicationModule;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * This helper class is used to get hold of an inert tree of DOM elements containing dirty HTML\n * that needs sanitizing.\n * Depending upon browser support we must use one of three strategies for doing this.\n * Support: Safari 10.x -> XHR strategy\n * Support: Firefox -> DomParser strategy\n * Default: InertDocument strategy\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction tagSet(tags) {\n    var res = {};\n    try {\n        for (var _a = __values(tags.split(',')), _b = _a.next(); !_b.done; _b = _a.next()) {\n            var t = _b.value;\n            res[t] = true;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return res;\n    var e_1, _c;\n}\nfunction merge$2() {\n    var sets = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sets[_i] = arguments[_i];\n    }\n    var res = {};\n    try {\n        for (var sets_1 = __values(sets), sets_1_1 = sets_1.next(); !sets_1_1.done; sets_1_1 = sets_1.next()) {\n            var s = sets_1_1.value;\n            for (var v in s) {\n                if (s.hasOwnProperty(v))\n                    res[v] = true;\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (sets_1_1 && !sets_1_1.done && (_a = sets_1.return)) _a.call(sets_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return res;\n    var e_2, _a;\n}\n// Good source of info about elements and attributes\n// http://dev.w3.org/html5/spec/Overview.html#semantics\n// http://simon.html5.org/html-elements\n// Safe Void Elements - HTML5\n// http://dev.w3.org/html5/spec/Overview.html#void-elements\nvar VOID_ELEMENTS = tagSet('area,br,col,hr,img,wbr');\n// Elements that you can, intentionally, leave open (and which close themselves)\n// http://dev.w3.org/html5/spec/Overview.html#optional-tags\nvar OPTIONAL_END_TAG_BLOCK_ELEMENTS = tagSet('colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr');\nvar OPTIONAL_END_TAG_INLINE_ELEMENTS = tagSet('rp,rt');\nvar OPTIONAL_END_TAG_ELEMENTS = merge$2(OPTIONAL_END_TAG_INLINE_ELEMENTS, OPTIONAL_END_TAG_BLOCK_ELEMENTS);\n// Safe Block Elements - HTML5\nvar BLOCK_ELEMENTS = merge$2(OPTIONAL_END_TAG_BLOCK_ELEMENTS, tagSet('address,article,' +\n    'aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,' +\n    'h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul'));\n// Inline Elements - HTML5\nvar INLINE_ELEMENTS = merge$2(OPTIONAL_END_TAG_INLINE_ELEMENTS, tagSet('a,abbr,acronym,audio,b,' +\n    'bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,' +\n    'samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video'));\nvar VALID_ELEMENTS = merge$2(VOID_ELEMENTS, BLOCK_ELEMENTS, INLINE_ELEMENTS, OPTIONAL_END_TAG_ELEMENTS);\n// Attributes that have href and hence need to be sanitized\nvar URI_ATTRS = tagSet('background,cite,href,itemtype,longdesc,poster,src,xlink:href');\n// Attributes that have special href set hence need to be sanitized\nvar SRCSET_ATTRS = tagSet('srcset');\nvar HTML_ATTRS = tagSet('abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,' +\n    'compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,' +\n    'ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,' +\n    'scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,' +\n    'valign,value,vspace,width');\n// NB: This currently consciously doesn't support SVG. SVG sanitization has had several security\n// issues in the past, so it seems safer to leave it out if possible. If support for binding SVG via\n// innerHTML is required, SVG attributes should be added here.\n// NB: Sanitization does not allow <form> elements or other active elements (<button> etc). Those\n// can be sanitized, but they increase security surface area without a legitimate use case, so they\n// are left out here.\nvar VALID_ATTRS = merge$2(URI_ATTRS, SRCSET_ATTRS, HTML_ATTRS);\n/**\n * Sanitizes the given unsafe, untrusted HTML fragment, and returns HTML text that is safe to add to\n * the DOM in a browser environment.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Sanitizes the given untrusted CSS style property value (i.e. not an entire object, just a single\n * value) and returns a value that is safe to use in a browser environment.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A SecurityContext marks a location that has dangerous security implications, e.g. a DOM property\n * like `innerHTML` that could cause Cross Site Scripting (XSS) security bugs when improperly\n * handled.\n *\n * See DomSanitizer for more details on security in Angular applications.\n *\n *\n */\n/**\n * A SecurityContext marks a location that has dangerous security implications, e.g. a DOM property\n * like `innerHTML` that could cause Cross Site Scripting (XSS) security bugs when improperly\n * handled.\n *\n * See DomSanitizer for more details on security in Angular applications.\n *\n *\n */\nvar SecurityContext$1;\n/**\n * A SecurityContext marks a location that has dangerous security implications, e.g. a DOM property\n * like `innerHTML` that could cause Cross Site Scripting (XSS) security bugs when improperly\n * handled.\n *\n * See DomSanitizer for more details on security in Angular applications.\n *\n *\n */\n(function (SecurityContext) {\n    SecurityContext[SecurityContext[\"NONE\"] = 0] = \"NONE\";\n    SecurityContext[SecurityContext[\"HTML\"] = 1] = \"HTML\";\n    SecurityContext[SecurityContext[\"STYLE\"] = 2] = \"STYLE\";\n    SecurityContext[SecurityContext[\"SCRIPT\"] = 3] = \"SCRIPT\";\n    SecurityContext[SecurityContext[\"URL\"] = 4] = \"URL\";\n    SecurityContext[SecurityContext[\"RESOURCE_URL\"] = 5] = \"RESOURCE_URL\";\n})(SecurityContext$1 || (SecurityContext$1 = {}));\n/**\n * Sanitizer is used by the views to sanitize potentially dangerous values.\n *\n *\n */\nvar Sanitizer = /** @class */ (function () {\n    function Sanitizer() {\n    }\n    return Sanitizer;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Called before each cycle of a view's check to detect whether this is in the\n// initState for which we need to call ngOnInit, ngAfterContentInit or ngAfterViewInit\n// lifecycle methods. Returns true if this check cycle should call lifecycle\n// methods.\nfunction shiftInitState(view, priorInitState, newInitState) {\n    // Only update the InitState if we are currently in the prior state.\n    // For example, only move into CallingInit if we are in BeforeInit. Only\n    // move into CallingContentInit if we are in CallingInit. Normally this will\n    // always be true because of how checkCycle is called in checkAndUpdateView.\n    // However, if checkAndUpdateView is called recursively or if an exception is\n    // thrown while checkAndUpdateView is running, checkAndUpdateView starts over\n    // from the beginning. This ensures the state is monotonically increasing,\n    // terminating in the AfterInit state, which ensures the Init methods are called\n    // at least once and only once.\n    var state = view.state;\n    var initState = state & 1792;\n    if (initState === priorInitState) {\n        view.state = (state & ~1792 /* InitState_Mask */) | newInitState;\n        view.initIndex = -1;\n        return true;\n    }\n    return initState === newInitState;\n}\n// Returns true if the lifecycle init method should be called for the node with\n// the given init index.\nfunction shouldCallLifecycleInitHook(view, initState, index) {\n    if ((view.state & 1792 /* InitState_Mask */) === initState && view.initIndex <= index) {\n        view.initIndex = index + 1;\n        return true;\n    }\n    return false;\n}\n/**\n * Accessor for view.nodes, enforcing that every usage site stays monomorphic.\n */\nfunction asTextData(view, index) {\n    return view.nodes[index];\n}\n/**\n * Accessor for view.nodes, enforcing that every usage site stays monomorphic.\n */\nfunction asElementData(view, index) {\n    return view.nodes[index];\n}\n/**\n * Accessor for view.nodes, enforcing that every usage site stays monomorphic.\n */\nfunction asProviderData(view, index) {\n    return view.nodes[index];\n}\n/**\n * Accessor for view.nodes, enforcing that every usage site stays monomorphic.\n */\nfunction asPureExpressionData(view, index) {\n    return view.nodes[index];\n}\n/**\n * Accessor for view.nodes, enforcing that every usage site stays monomorphic.\n */\nfunction asQueryList(view, index) {\n    return view.nodes[index];\n}\n/**\n * This object is used to prevent cycles in the source files and to have a place where\n * debug mode can hook it. It is lazily filled when `isDevMode` is known.\n */\nvar Services = {\n    setCurrentNode: (undefined),\n    createRootView: (undefined),\n    createEmbeddedView: (undefined),\n    createComponentView: (undefined),\n    createNgModuleRef: (undefined),\n    overrideProvider: (undefined),\n    overrideComponentView: (undefined),\n    clearOverrides: (undefined),\n    checkAndUpdateView: (undefined),\n    checkNoChangesView: (undefined),\n    destroyView: (undefined),\n    resolveDep: (undefined),\n    createDebugContext: (undefined),\n    handleEvent: (undefined),\n    updateDirectives: (undefined),\n    updateRenderer: (undefined),\n    dirtyParentQueries: (undefined),\n};\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction expressionChangedAfterItHasBeenCheckedError(context, oldValue, currValue, isFirstCheck) {\n    var msg = \"ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '\" + oldValue + \"'. Current value: '\" + currValue + \"'.\";\n    if (isFirstCheck) {\n        msg +=\n            \" It seems like the view has been created after its parent and its children have been dirty checked.\" +\n                \" Has it been created in a change detection hook ?\";\n    }\n    return viewDebugError(msg, context);\n}\nfunction viewWrappedDebugError(err, context) {\n    if (!(err instanceof Error)) {\n        // errors that are not Error instances don't have a stack,\n        // so it is ok to wrap them into a new Error object...\n        err = new Error(err.toString());\n    }\n    _addDebugContext(err, context);\n    return err;\n}\nfunction viewDebugError(msg, context) {\n    var err = new Error(msg);\n    _addDebugContext(err, context);\n    return err;\n}\nfunction _addDebugContext(err, context) {\n    err[ERROR_DEBUG_CONTEXT] = context;\n    err[ERROR_LOGGER] = context.logError.bind(context);\n}\nfunction isViewDebugError(err) {\n    return !!getDebugContext(err);\n}\nfunction viewDestroyedError(action) {\n    return new Error(\"ViewDestroyedError: Attempt to use a destroyed view: \" + action);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar NOOP = function () { };\nvar _tokenKeyCache = new Map();\nfunction tokenKey(token) {\n    var key = _tokenKeyCache.get(token);\n    if (!key) {\n        key = stringify$1(token) + '_' + _tokenKeyCache.size;\n        _tokenKeyCache.set(token, key);\n    }\n    return key;\n}\n\n// Attention: this function is called as top level function.\n// Putting any logic in here will destroy closure tree shaking!\n\n\nfunction checkBinding(view, def, bindingIdx, value) {\n    var oldValues = view.oldValues;\n    if ((view.state & 2 /* FirstCheck */) ||\n        !looseIdentical(oldValues[def.bindingIndex + bindingIdx], value)) {\n        return true;\n    }\n    return false;\n}\nfunction checkAndUpdateBinding(view, def, bindingIdx, value) {\n    if (checkBinding(view, def, bindingIdx, value)) {\n        view.oldValues[def.bindingIndex + bindingIdx] = value;\n        return true;\n    }\n    return false;\n}\nfunction checkBindingNoChanges(view, def, bindingIdx, value) {\n    var oldValue = view.oldValues[def.bindingIndex + bindingIdx];\n    if ((view.state & 1 /* BeforeFirstCheck */) || !devModeEqual(oldValue, value)) {\n        var bindingName = def.bindings[bindingIdx].name;\n        throw expressionChangedAfterItHasBeenCheckedError(Services.createDebugContext(view, def.nodeIndex), bindingName + \": \" + oldValue, bindingName + \": \" + value, (view.state & 1 /* BeforeFirstCheck */) !== 0);\n    }\n}\nfunction markParentViewsForCheck(view) {\n    var currView = view;\n    while (currView) {\n        if (currView.def.flags & 2 /* OnPush */) {\n            currView.state |= 8 /* ChecksEnabled */;\n        }\n        currView = currView.viewContainerParent || currView.parent;\n    }\n}\nfunction markParentViewsForCheckProjectedViews(view, endView) {\n    var currView = view;\n    while (currView && currView !== endView) {\n        currView.state |= 64 /* CheckProjectedViews */;\n        currView = currView.viewContainerParent || currView.parent;\n    }\n}\nfunction dispatchEvent(view, nodeIndex, eventName, event) {\n    try {\n        var nodeDef = view.def.nodes[nodeIndex];\n        var startView = nodeDef.flags & 33554432 /* ComponentView */ ?\n            asElementData(view, nodeIndex).componentView :\n            view;\n        markParentViewsForCheck(startView);\n        return Services.handleEvent(view, nodeIndex, eventName, event);\n    }\n    catch (e) {\n        // Attention: Don't rethrow, as it would cancel Observable subscriptions!\n        view.root.errorHandler.handleError(e);\n    }\n}\nfunction declaredViewContainer(view) {\n    if (view.parent) {\n        var parentView = view.parent;\n        return asElementData(parentView, view.parentNodeDef.nodeIndex);\n    }\n    return null;\n}\n/**\n * for component views, this is the host element.\n * for embedded views, this is the index of the parent node\n * that contains the view container.\n */\nfunction viewParentEl(view) {\n    var parentView = view.parent;\n    if (parentView) {\n        return view.parentNodeDef.parent;\n    }\n    else {\n        return null;\n    }\n}\nfunction renderNode(view, def) {\n    switch (def.flags & 201347067 /* Types */) {\n        case 1 /* TypeElement */:\n            return asElementData(view, def.nodeIndex).renderElement;\n        case 2 /* TypeText */:\n            return asTextData(view, def.nodeIndex).renderText;\n    }\n}\nfunction elementEventFullName$1(target, name) {\n    return target ? target + \":\" + name : name;\n}\nfunction isComponentView(view) {\n    return !!view.parent && !!(view.parentNodeDef.flags & 32768 /* Component */);\n}\nfunction isEmbeddedView(view) {\n    return !!view.parent && !(view.parentNodeDef.flags & 32768 /* Component */);\n}\n\n\nfunction splitDepsDsl(deps, sourceName) {\n    return deps.map(function (value) {\n        var token;\n        var flags;\n        if (Array.isArray(value)) {\n            _a = __read(value, 2), flags = _a[0], token = _a[1];\n        }\n        else {\n            flags = 0 /* None */;\n            token = value;\n        }\n        if (token && (typeof token === 'function' || typeof token === 'object') && sourceName) {\n            Object.defineProperty(token, SOURCE$1, { value: sourceName, configurable: true });\n        }\n        return { flags: flags, token: token, tokenKey: tokenKey(token) };\n        var _a;\n    });\n}\nfunction getParentRenderElement(view, renderHost, def) {\n    var renderParent = def.renderParent;\n    if (renderParent) {\n        if ((renderParent.flags & 1 /* TypeElement */) === 0 ||\n            (renderParent.flags & 33554432 /* ComponentView */) === 0 ||\n            (renderParent.element.componentRendererType &&\n                renderParent.element.componentRendererType.encapsulation ===\n                    ViewEncapsulation$1.Native)) {\n            // only children of non components, or children of components with native encapsulation should\n            // be attached.\n            return asElementData(view, def.renderParent.nodeIndex).renderElement;\n        }\n    }\n    else {\n        return renderHost;\n    }\n}\nvar DEFINITION_CACHE = new WeakMap();\nfunction resolveDefinition(factory) {\n    var value = DEFINITION_CACHE.get(factory);\n    if (!value) {\n        value = factory(function () { return NOOP; });\n        value.factory = factory;\n        DEFINITION_CACHE.set(factory, value);\n    }\n    return value;\n}\nfunction rootRenderNodes(view) {\n    var renderNodes = [];\n    visitRootRenderNodes(view, 0 /* Collect */, undefined, undefined, renderNodes);\n    return renderNodes;\n}\nfunction visitRootRenderNodes(view, action, parentNode, nextSibling, target) {\n    // We need to re-compute the parent node in case the nodes have been moved around manually\n    if (action === 3 /* RemoveChild */) {\n        parentNode = view.renderer.parentNode(renderNode(view, (view.def.lastRenderRootNode)));\n    }\n    visitSiblingRenderNodes(view, action, 0, view.def.nodes.length - 1, parentNode, nextSibling, target);\n}\nfunction visitSiblingRenderNodes(view, action, startIndex, endIndex, parentNode, nextSibling, target) {\n    for (var i = startIndex; i <= endIndex; i++) {\n        var nodeDef = view.def.nodes[i];\n        if (nodeDef.flags & (1 /* TypeElement */ | 2 /* TypeText */ | 8 /* TypeNgContent */)) {\n            visitRenderNode(view, nodeDef, action, parentNode, nextSibling, target);\n        }\n        // jump to next sibling\n        i += nodeDef.childCount;\n    }\n}\nfunction visitProjectedRenderNodes(view, ngContentIndex, action, parentNode, nextSibling, target) {\n    var compView = view;\n    while (compView && !isComponentView(compView)) {\n        compView = compView.parent;\n    }\n    var hostView = compView.parent;\n    var hostElDef = viewParentEl((compView));\n    var startIndex = hostElDef.nodeIndex + 1;\n    var endIndex = hostElDef.nodeIndex + hostElDef.childCount;\n    for (var i = startIndex; i <= endIndex; i++) {\n        var nodeDef = hostView.def.nodes[i];\n        if (nodeDef.ngContentIndex === ngContentIndex) {\n            visitRenderNode((hostView), nodeDef, action, parentNode, nextSibling, target);\n        }\n        // jump to next sibling\n        i += nodeDef.childCount;\n    }\n    if (!hostView.parent) {\n        // a root view\n        var projectedNodes = view.root.projectableNodes[ngContentIndex];\n        if (projectedNodes) {\n            for (var i = 0; i < projectedNodes.length; i++) {\n                execRenderNodeAction(view, projectedNodes[i], action, parentNode, nextSibling, target);\n            }\n        }\n    }\n}\nfunction visitRenderNode(view, nodeDef, action, parentNode, nextSibling, target) {\n    if (nodeDef.flags & 8 /* TypeNgContent */) {\n        visitProjectedRenderNodes(view, nodeDef.ngContent.index, action, parentNode, nextSibling, target);\n    }\n    else {\n        var rn = renderNode(view, nodeDef);\n        if (action === 3 /* RemoveChild */ && (nodeDef.flags & 33554432 /* ComponentView */) &&\n            (nodeDef.bindingFlags & 48 /* CatSyntheticProperty */)) {\n            // Note: we might need to do both actions.\n            if (nodeDef.bindingFlags & (16 /* SyntheticProperty */)) {\n                execRenderNodeAction(view, rn, action, parentNode, nextSibling, target);\n            }\n            if (nodeDef.bindingFlags & (32 /* SyntheticHostProperty */)) {\n                var compView = asElementData(view, nodeDef.nodeIndex).componentView;\n                execRenderNodeAction(compView, rn, action, parentNode, nextSibling, target);\n            }\n        }\n        else {\n            execRenderNodeAction(view, rn, action, parentNode, nextSibling, target);\n        }\n        if (nodeDef.flags & 16777216 /* EmbeddedViews */) {\n            var embeddedViews = asElementData(view, nodeDef.nodeIndex).viewContainer._embeddedViews;\n            for (var k = 0; k < embeddedViews.length; k++) {\n                visitRootRenderNodes(embeddedViews[k], action, parentNode, nextSibling, target);\n            }\n        }\n        if (nodeDef.flags & 1 /* TypeElement */ && !nodeDef.element.name) {\n            visitSiblingRenderNodes(view, action, nodeDef.nodeIndex + 1, nodeDef.nodeIndex + nodeDef.childCount, parentNode, nextSibling, target);\n        }\n    }\n}\nfunction execRenderNodeAction(view, renderNode, action, parentNode, nextSibling, target) {\n    var renderer = view.renderer;\n    switch (action) {\n        case 1 /* AppendChild */:\n            renderer.appendChild(parentNode, renderNode);\n            break;\n        case 2 /* InsertBefore */:\n            renderer.insertBefore(parentNode, renderNode, nextSibling);\n            break;\n        case 3 /* RemoveChild */:\n            renderer.removeChild(parentNode, renderNode);\n            break;\n        case 0 /* Collect */:\n            target.push(renderNode);\n            break;\n    }\n}\nvar NS_PREFIX_RE = /^:([^:]+):(.+)$/;\nfunction splitNamespace(name) {\n    if (name[0] === ':') {\n        var match = (name.match(NS_PREFIX_RE));\n        return [match[1], match[2]];\n    }\n    return ['', name];\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nfunction createElement(view, renderHost, def) {\n    var elDef = (def.element);\n    var rootSelectorOrNode = view.root.selectorOrNode;\n    var renderer = view.renderer;\n    var el;\n    if (view.parent || !rootSelectorOrNode) {\n        if (elDef.name) {\n            el = renderer.createElement(elDef.name, elDef.ns);\n        }\n        else {\n            el = renderer.createComment('');\n        }\n        var parentEl = getParentRenderElement(view, renderHost, def);\n        if (parentEl) {\n            renderer.appendChild(parentEl, el);\n        }\n    }\n    else {\n        el = renderer.selectRootElement(rootSelectorOrNode);\n    }\n    if (elDef.attrs) {\n        for (var i = 0; i < elDef.attrs.length; i++) {\n            var _a = __read(elDef.attrs[i], 3), ns = _a[0], name_2 = _a[1], value = _a[2];\n            renderer.setAttribute(el, name_2, value, ns);\n        }\n    }\n    return el;\n}\nfunction listenToElementOutputs(view, compView, def, el) {\n    for (var i = 0; i < def.outputs.length; i++) {\n        var output = def.outputs[i];\n        var handleEventClosure = renderEventHandlerClosure(view, def.nodeIndex, elementEventFullName$1(output.target, output.eventName));\n        var listenTarget = output.target;\n        var listenerView = view;\n        if (output.target === 'component') {\n            listenTarget = null;\n            listenerView = compView;\n        }\n        var disposable = listenerView.renderer.listen(listenTarget || el, output.eventName, handleEventClosure);\n        view.disposables[def.outputIndex + i] = disposable;\n    }\n}\nfunction renderEventHandlerClosure(view, index, eventName) {\n    return function (event) { return dispatchEvent(view, index, eventName, event); };\n}\nfunction checkAndUpdateElementInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var bindLen = def.bindings.length;\n    var changed = false;\n    if (bindLen > 0 && checkAndUpdateElementValue(view, def, 0, v0))\n        changed = true;\n    if (bindLen > 1 && checkAndUpdateElementValue(view, def, 1, v1))\n        changed = true;\n    if (bindLen > 2 && checkAndUpdateElementValue(view, def, 2, v2))\n        changed = true;\n    if (bindLen > 3 && checkAndUpdateElementValue(view, def, 3, v3))\n        changed = true;\n    if (bindLen > 4 && checkAndUpdateElementValue(view, def, 4, v4))\n        changed = true;\n    if (bindLen > 5 && checkAndUpdateElementValue(view, def, 5, v5))\n        changed = true;\n    if (bindLen > 6 && checkAndUpdateElementValue(view, def, 6, v6))\n        changed = true;\n    if (bindLen > 7 && checkAndUpdateElementValue(view, def, 7, v7))\n        changed = true;\n    if (bindLen > 8 && checkAndUpdateElementValue(view, def, 8, v8))\n        changed = true;\n    if (bindLen > 9 && checkAndUpdateElementValue(view, def, 9, v9))\n        changed = true;\n    return changed;\n}\nfunction checkAndUpdateElementDynamic(view, def, values) {\n    var changed = false;\n    for (var i = 0; i < values.length; i++) {\n        if (checkAndUpdateElementValue(view, def, i, values[i]))\n            changed = true;\n    }\n    return changed;\n}\nfunction checkAndUpdateElementValue(view, def, bindingIdx, value) {\n    if (!checkAndUpdateBinding(view, def, bindingIdx, value)) {\n        return false;\n    }\n    var binding = def.bindings[bindingIdx];\n    var elData = asElementData(view, def.nodeIndex);\n    var renderNode$$1 = elData.renderElement;\n    var name = (binding.name);\n    switch (binding.flags & 15 /* Types */) {\n        case 1 /* TypeElementAttribute */:\n            setElementAttribute(view, binding, renderNode$$1, binding.ns, name, value);\n            break;\n        case 2 /* TypeElementClass */:\n            setElementClass(view, renderNode$$1, name, value);\n            break;\n        case 4 /* TypeElementStyle */:\n            setElementStyle(view, binding, renderNode$$1, name, value);\n            break;\n        case 8 /* TypeProperty */:\n            var bindView = (def.flags & 33554432 /* ComponentView */ &&\n                binding.flags & 32 /* SyntheticHostProperty */) ?\n                elData.componentView :\n                view;\n            setElementProperty(bindView, binding, renderNode$$1, name, value);\n            break;\n    }\n    return true;\n}\nfunction setElementAttribute(view, binding, renderNode$$1, ns, name, value) {\n    var securityContext = binding.securityContext;\n    var renderValue = securityContext ? view.root.sanitizer.sanitize(securityContext, value) : value;\n    renderValue = renderValue != null ? renderValue.toString() : null;\n    var renderer = view.renderer;\n    if (value != null) {\n        renderer.setAttribute(renderNode$$1, name, renderValue, ns);\n    }\n    else {\n        renderer.removeAttribute(renderNode$$1, name, ns);\n    }\n}\nfunction setElementClass(view, renderNode$$1, name, value) {\n    var renderer = view.renderer;\n    if (value) {\n        renderer.addClass(renderNode$$1, name);\n    }\n    else {\n        renderer.removeClass(renderNode$$1, name);\n    }\n}\nfunction setElementStyle(view, binding, renderNode$$1, name, value) {\n    var renderValue = view.root.sanitizer.sanitize(SecurityContext$1.STYLE, value);\n    if (renderValue != null) {\n        renderValue = renderValue.toString();\n        var unit = binding.suffix;\n        if (unit != null) {\n            renderValue = renderValue + unit;\n        }\n    }\n    else {\n        renderValue = null;\n    }\n    var renderer = view.renderer;\n    if (renderValue != null) {\n        renderer.setStyle(renderNode$$1, name, renderValue);\n    }\n    else {\n        renderer.removeStyle(renderNode$$1, name);\n    }\n}\nfunction setElementProperty(view, binding, renderNode$$1, name, value) {\n    var securityContext = binding.securityContext;\n    var renderValue = securityContext ? view.root.sanitizer.sanitize(securityContext, value) : value;\n    view.renderer.setProperty(renderNode$$1, name, renderValue);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar UNDEFINED_VALUE = new Object();\nvar InjectorRefTokenKey$1 = tokenKey(Injector);\nvar INJECTORRefTokenKey$1 = tokenKey(INJECTOR);\nvar NgModuleRefTokenKey = tokenKey(NgModuleRef);\n\n\nfunction initNgModule(data) {\n    var def = data._def;\n    var providers = data._providers = new Array(def.providers.length);\n    for (var i = 0; i < def.providers.length; i++) {\n        var provDef = def.providers[i];\n        if (!(provDef.flags & 4096 /* LazyProvider */)) {\n            // Make sure the provider has not been already initialized outside this loop.\n            if (providers[i] === undefined) {\n                providers[i] = _createProviderInstance$1(data, provDef);\n            }\n        }\n    }\n}\nfunction resolveNgModuleDep(data, depDef, notFoundValue) {\n    if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }\n    var former = setCurrentInjector(data);\n    try {\n        if (depDef.flags & 8 /* Value */) {\n            return depDef.token;\n        }\n        if (depDef.flags & 2 /* Optional */) {\n            notFoundValue = null;\n        }\n        if (depDef.flags & 1 /* SkipSelf */) {\n            return data._parent.get(depDef.token, notFoundValue);\n        }\n        var tokenKey_1 = depDef.tokenKey;\n        switch (tokenKey_1) {\n            case InjectorRefTokenKey$1:\n            case INJECTORRefTokenKey$1:\n            case NgModuleRefTokenKey:\n                return data;\n        }\n        var providerDef = data._def.providersByKey[tokenKey_1];\n        if (providerDef) {\n            var providerInstance = data._providers[providerDef.index];\n            if (providerInstance === undefined) {\n                providerInstance = data._providers[providerDef.index] =\n                    _createProviderInstance$1(data, providerDef);\n            }\n            return providerInstance === UNDEFINED_VALUE ? undefined : providerInstance;\n        }\n        else if (depDef.token.ngInjectableDef && targetsModule(data, depDef.token.ngInjectableDef)) {\n            var injectableDef = depDef.token.ngInjectableDef;\n            var index = data._providers.length;\n            data._def.providersByKey[depDef.tokenKey] = {\n                flags: 1024 /* TypeFactoryProvider */ | 4096 /* LazyProvider */,\n                value: injectableDef.factory,\n                deps: [], index: index,\n                token: depDef.token,\n            };\n            data._providers[index] = UNDEFINED_VALUE;\n            return (data._providers[index] =\n                _createProviderInstance$1(data, data._def.providersByKey[depDef.tokenKey]));\n        }\n        return data._parent.get(depDef.token, notFoundValue);\n    }\n    finally {\n        setCurrentInjector(former);\n    }\n}\nfunction moduleTransitivelyPresent(ngModule, scope) {\n    return ngModule._def.modules.indexOf(scope) > -1;\n}\nfunction targetsModule(ngModule, def) {\n    return def.providedIn != null && (moduleTransitivelyPresent(ngModule, def.providedIn) ||\n        def.providedIn === 'root' && ngModule._def.isRoot);\n}\nfunction _createProviderInstance$1(ngModule, providerDef) {\n    var injectable;\n    switch (providerDef.flags & 201347067 /* Types */) {\n        case 512 /* TypeClassProvider */:\n            injectable = _createClass(ngModule, providerDef.value, providerDef.deps);\n            break;\n        case 1024 /* TypeFactoryProvider */:\n            injectable = _callFactory(ngModule, providerDef.value, providerDef.deps);\n            break;\n        case 2048 /* TypeUseExistingProvider */:\n            injectable = resolveNgModuleDep(ngModule, providerDef.deps[0]);\n            break;\n        case 256 /* TypeValueProvider */:\n            injectable = providerDef.value;\n            break;\n    }\n    return injectable === undefined ? UNDEFINED_VALUE : injectable;\n}\nfunction _createClass(ngModule, ctor, deps) {\n    var len = deps.length;\n    switch (len) {\n        case 0:\n            return new ctor();\n        case 1:\n            return new ctor(resolveNgModuleDep(ngModule, deps[0]));\n        case 2:\n            return new ctor(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]));\n        case 3:\n            return new ctor(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]), resolveNgModuleDep(ngModule, deps[2]));\n        default:\n            var depValues = new Array(len);\n            for (var i = 0; i < len; i++) {\n                depValues[i] = resolveNgModuleDep(ngModule, deps[i]);\n            }\n            return new (ctor.bind.apply(ctor, __spread([void 0], depValues)))();\n    }\n}\nfunction _callFactory(ngModule, factory, deps) {\n    var len = deps.length;\n    switch (len) {\n        case 0:\n            return factory();\n        case 1:\n            return factory(resolveNgModuleDep(ngModule, deps[0]));\n        case 2:\n            return factory(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]));\n        case 3:\n            return factory(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]), resolveNgModuleDep(ngModule, deps[2]));\n        default:\n            var depValues = Array(len);\n            for (var i = 0; i < len; i++) {\n                depValues[i] = resolveNgModuleDep(ngModule, deps[i]);\n            }\n            return factory.apply(void 0, __spread(depValues));\n    }\n}\nfunction callNgModuleLifecycle(ngModule, lifecycles) {\n    var def = ngModule._def;\n    for (var i = 0; i < def.providers.length; i++) {\n        var provDef = def.providers[i];\n        if (provDef.flags & 131072 /* OnDestroy */) {\n            var instance = ngModule._providers[i];\n            if (instance && instance !== UNDEFINED_VALUE) {\n                instance.ngOnDestroy();\n            }\n        }\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction attachEmbeddedView(parentView, elementData, viewIndex, view) {\n    var embeddedViews = elementData.viewContainer._embeddedViews;\n    if (viewIndex === null || viewIndex === undefined) {\n        viewIndex = embeddedViews.length;\n    }\n    view.viewContainerParent = parentView;\n    addToArray(embeddedViews, (viewIndex), view);\n    attachProjectedView(elementData, view);\n    Services.dirtyParentQueries(view);\n    var prevView = (viewIndex) > 0 ? embeddedViews[(viewIndex) - 1] : null;\n    renderAttachEmbeddedView(elementData, prevView, view);\n}\nfunction attachProjectedView(vcElementData, view) {\n    var dvcElementData = declaredViewContainer(view);\n    if (!dvcElementData || dvcElementData === vcElementData ||\n        view.state & 16 /* IsProjectedView */) {\n        return;\n    }\n    // Note: For performance reasons, we\n    // - add a view to template._projectedViews only 1x throughout its lifetime,\n    //   and remove it not until the view is destroyed.\n    //   (hard, as when a parent view is attached/detached we would need to attach/detach all\n    //    nested projected views as well, even across component boundaries).\n    // - don't track the insertion order of views in the projected views array\n    //   (hard, as when the views of the same template are inserted different view containers)\n    view.state |= 16 /* IsProjectedView */;\n    var projectedViews = dvcElementData.template._projectedViews;\n    if (!projectedViews) {\n        projectedViews = dvcElementData.template._projectedViews = [];\n    }\n    projectedViews.push(view);\n    // Note: we are changing the NodeDef here as we cannot calculate\n    // the fact whether a template is used for projection during compilation.\n    markNodeAsProjectedTemplate(view.parent.def, (view.parentNodeDef));\n}\nfunction markNodeAsProjectedTemplate(viewDef, nodeDef) {\n    if (nodeDef.flags & 4 /* ProjectedTemplate */) {\n        return;\n    }\n    viewDef.nodeFlags |= 4 /* ProjectedTemplate */;\n    nodeDef.flags |= 4 /* ProjectedTemplate */;\n    var parentNodeDef = nodeDef.parent;\n    while (parentNodeDef) {\n        parentNodeDef.childFlags |= 4 /* ProjectedTemplate */;\n        parentNodeDef = parentNodeDef.parent;\n    }\n}\nfunction detachEmbeddedView(elementData, viewIndex) {\n    var embeddedViews = elementData.viewContainer._embeddedViews;\n    if (viewIndex == null || viewIndex >= embeddedViews.length) {\n        viewIndex = embeddedViews.length - 1;\n    }\n    if (viewIndex < 0) {\n        return null;\n    }\n    var view = embeddedViews[viewIndex];\n    view.viewContainerParent = null;\n    removeFromArray(embeddedViews, viewIndex);\n    // See attachProjectedView for why we don't update projectedViews here.\n    Services.dirtyParentQueries(view);\n    renderDetachView(view);\n    return view;\n}\nfunction detachProjectedView(view) {\n    if (!(view.state & 16 /* IsProjectedView */)) {\n        return;\n    }\n    var dvcElementData = declaredViewContainer(view);\n    if (dvcElementData) {\n        var projectedViews = dvcElementData.template._projectedViews;\n        if (projectedViews) {\n            removeFromArray(projectedViews, projectedViews.indexOf(view));\n            Services.dirtyParentQueries(view);\n        }\n    }\n}\nfunction moveEmbeddedView(elementData, oldViewIndex, newViewIndex) {\n    var embeddedViews = elementData.viewContainer._embeddedViews;\n    var view = embeddedViews[oldViewIndex];\n    removeFromArray(embeddedViews, oldViewIndex);\n    if (newViewIndex == null) {\n        newViewIndex = embeddedViews.length;\n    }\n    addToArray(embeddedViews, newViewIndex, view);\n    // Note: Don't need to change projectedViews as the order in there\n    // as always invalid...\n    Services.dirtyParentQueries(view);\n    renderDetachView(view);\n    var prevView = newViewIndex > 0 ? embeddedViews[newViewIndex - 1] : null;\n    renderAttachEmbeddedView(elementData, prevView, view);\n    return view;\n}\nfunction renderAttachEmbeddedView(elementData, prevView, view) {\n    var prevRenderNode = prevView ? renderNode(prevView, (prevView.def.lastRenderRootNode)) :\n        elementData.renderElement;\n    var parentNode = view.renderer.parentNode(prevRenderNode);\n    var nextSibling = view.renderer.nextSibling(prevRenderNode);\n    // Note: We can't check if `nextSibling` is present, as on WebWorkers it will always be!\n    // However, browsers automatically do `appendChild` when there is no `nextSibling`.\n    visitRootRenderNodes(view, 2 /* InsertBefore */, parentNode, nextSibling, undefined);\n}\nfunction renderDetachView(view) {\n    visitRootRenderNodes(view, 3 /* RemoveChild */, null, null, undefined);\n}\nfunction addToArray(arr, index, value) {\n    // perf: array.push is faster than array.splice!\n    if (index >= arr.length) {\n        arr.push(value);\n    }\n    else {\n        arr.splice(index, 0, value);\n    }\n}\nfunction removeFromArray(arr, index) {\n    // perf: array.pop is faster than array.splice!\n    if (index >= arr.length - 1) {\n        arr.pop();\n    }\n    else {\n        arr.splice(index, 1);\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar EMPTY_CONTEXT = new Object();\n// Attention: this function is called as top level function.\n// Putting any logic in here will destroy closure tree shaking!\n\nfunction getComponentViewDefinitionFactory(componentFactory) {\n    return componentFactory.viewDefFactory;\n}\nvar ComponentFactory_ = /** @class */ (function (_super) {\n    __extends(ComponentFactory_, _super);\n    function ComponentFactory_(selector, componentType, viewDefFactory, _inputs, _outputs, ngContentSelectors) {\n        var _this = \n        // Attention: this ctor is called as top level function.\n        // Putting any logic in here will destroy closure tree shaking!\n        _super.call(this) || this;\n        _this.selector = selector;\n        _this.componentType = componentType;\n        _this._inputs = _inputs;\n        _this._outputs = _outputs;\n        _this.ngContentSelectors = ngContentSelectors;\n        _this.viewDefFactory = viewDefFactory;\n        return _this;\n    }\n    Object.defineProperty(ComponentFactory_.prototype, \"inputs\", {\n        get: function () {\n            var inputsArr = [];\n            var inputs = (this._inputs);\n            for (var propName in inputs) {\n                var templateName = inputs[propName];\n                inputsArr.push({ propName: propName, templateName: templateName });\n            }\n            return inputsArr;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComponentFactory_.prototype, \"outputs\", {\n        get: function () {\n            var outputsArr = [];\n            for (var propName in this._outputs) {\n                var templateName = this._outputs[propName];\n                outputsArr.push({ propName: propName, templateName: templateName });\n            }\n            return outputsArr;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Creates a new component.\n     */\n    /**\n       * Creates a new component.\n       */\n    ComponentFactory_.prototype.create = /**\n       * Creates a new component.\n       */\n    function (injector, projectableNodes, rootSelectorOrNode, ngModule) {\n        if (!ngModule) {\n            throw new Error('ngModule should be provided');\n        }\n        var viewDef = resolveDefinition(this.viewDefFactory);\n        var componentNodeIndex = viewDef.nodes[0].element.componentProvider.nodeIndex;\n        var view = Services.createRootView(injector, projectableNodes || [], rootSelectorOrNode, viewDef, ngModule, EMPTY_CONTEXT);\n        var component = asProviderData(view, componentNodeIndex).instance;\n        if (rootSelectorOrNode) {\n            view.renderer.setAttribute(asElementData(view, 0).renderElement, 'ng-version', VERSION$2.full);\n        }\n        return new ComponentRef_(view, new ViewRef_(view), component);\n    };\n    return ComponentFactory_;\n}(ComponentFactory));\nvar ComponentRef_ = /** @class */ (function (_super) {\n    __extends(ComponentRef_, _super);\n    function ComponentRef_(_view, _viewRef, _component) {\n        var _this = _super.call(this) || this;\n        _this._view = _view;\n        _this._viewRef = _viewRef;\n        _this._component = _component;\n        _this._elDef = _this._view.def.nodes[0];\n        _this.hostView = _viewRef;\n        _this.changeDetectorRef = _viewRef;\n        _this.instance = _component;\n        return _this;\n    }\n    Object.defineProperty(ComponentRef_.prototype, \"location\", {\n        get: function () {\n            return new ElementRef(asElementData(this._view, this._elDef.nodeIndex).renderElement);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComponentRef_.prototype, \"injector\", {\n        get: function () { return new Injector_(this._view, this._elDef); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComponentRef_.prototype, \"componentType\", {\n        get: function () { return this._component.constructor; },\n        enumerable: true,\n        configurable: true\n    });\n    ComponentRef_.prototype.destroy = function () { this._viewRef.destroy(); };\n    ComponentRef_.prototype.onDestroy = function (callback) { this._viewRef.onDestroy(callback); };\n    return ComponentRef_;\n}(ComponentRef));\nfunction createViewContainerData(view, elDef, elData) {\n    return new ViewContainerRef_(view, elDef, elData);\n}\nvar ViewContainerRef_ = /** @class */ (function () {\n    function ViewContainerRef_(_view, _elDef, _data) {\n        this._view = _view;\n        this._elDef = _elDef;\n        this._data = _data;\n        /**\n           * @internal\n           */\n        this._embeddedViews = [];\n    }\n    Object.defineProperty(ViewContainerRef_.prototype, \"element\", {\n        get: function () { return new ElementRef(this._data.renderElement); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ViewContainerRef_.prototype, \"injector\", {\n        get: function () { return new Injector_(this._view, this._elDef); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ViewContainerRef_.prototype, \"parentInjector\", {\n        get: function () {\n            var view = this._view;\n            var elDef = this._elDef.parent;\n            while (!elDef && view) {\n                elDef = viewParentEl(view);\n                view = (view.parent);\n            }\n            return view ? new Injector_(view, elDef) : new Injector_(this._view, null);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ViewContainerRef_.prototype.clear = function () {\n        var len = this._embeddedViews.length;\n        for (var i = len - 1; i >= 0; i--) {\n            var view = (detachEmbeddedView(this._data, i));\n            Services.destroyView(view);\n        }\n    };\n    ViewContainerRef_.prototype.get = function (index) {\n        var view = this._embeddedViews[index];\n        if (view) {\n            var ref = new ViewRef_(view);\n            ref.attachToViewContainerRef(this);\n            return ref;\n        }\n        return null;\n    };\n    Object.defineProperty(ViewContainerRef_.prototype, \"length\", {\n        get: function () { return this._embeddedViews.length; },\n        enumerable: true,\n        configurable: true\n    });\n    ViewContainerRef_.prototype.createEmbeddedView = function (templateRef, context, index) {\n        var viewRef = templateRef.createEmbeddedView(context || {});\n        this.insert(viewRef, index);\n        return viewRef;\n    };\n    ViewContainerRef_.prototype.createComponent = function (componentFactory, index, injector, projectableNodes, ngModuleRef) {\n        var contextInjector = injector || this.parentInjector;\n        if (!ngModuleRef && !(componentFactory instanceof ComponentFactoryBoundToModule)) {\n            ngModuleRef = contextInjector.get(NgModuleRef);\n        }\n        var componentRef = componentFactory.create(contextInjector, projectableNodes, undefined, ngModuleRef);\n        this.insert(componentRef.hostView, index);\n        return componentRef;\n    };\n    ViewContainerRef_.prototype.insert = function (viewRef, index) {\n        if (viewRef.destroyed) {\n            throw new Error('Cannot insert a destroyed View in a ViewContainer!');\n        }\n        var viewRef_ = viewRef;\n        var viewData = viewRef_._view;\n        attachEmbeddedView(this._view, this._data, index, viewData);\n        viewRef_.attachToViewContainerRef(this);\n        return viewRef;\n    };\n    ViewContainerRef_.prototype.move = function (viewRef, currentIndex) {\n        if (viewRef.destroyed) {\n            throw new Error('Cannot move a destroyed View in a ViewContainer!');\n        }\n        var previousIndex = this._embeddedViews.indexOf(viewRef._view);\n        moveEmbeddedView(this._data, previousIndex, currentIndex);\n        return viewRef;\n    };\n    ViewContainerRef_.prototype.indexOf = function (viewRef) {\n        return this._embeddedViews.indexOf(viewRef._view);\n    };\n    ViewContainerRef_.prototype.remove = function (index) {\n        var viewData = detachEmbeddedView(this._data, index);\n        if (viewData) {\n            Services.destroyView(viewData);\n        }\n    };\n    ViewContainerRef_.prototype.detach = function (index) {\n        var view = detachEmbeddedView(this._data, index);\n        return view ? new ViewRef_(view) : null;\n    };\n    return ViewContainerRef_;\n}());\nfunction createChangeDetectorRef(view) {\n    return new ViewRef_(view);\n}\nvar ViewRef_ = /** @class */ (function () {\n    function ViewRef_(_view) {\n        this._view = _view;\n        this._viewContainerRef = null;\n        this._appRef = null;\n    }\n    Object.defineProperty(ViewRef_.prototype, \"rootNodes\", {\n        get: function () { return rootRenderNodes(this._view); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ViewRef_.prototype, \"context\", {\n        get: function () { return this._view.context; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ViewRef_.prototype, \"destroyed\", {\n        get: function () { return (this._view.state & 128 /* Destroyed */) !== 0; },\n        enumerable: true,\n        configurable: true\n    });\n    ViewRef_.prototype.markForCheck = function () { markParentViewsForCheck(this._view); };\n    ViewRef_.prototype.detach = function () { this._view.state &= ~4 /* Attached */; };\n    ViewRef_.prototype.detectChanges = function () {\n        var fs$$1 = this._view.root.rendererFactory;\n        if (fs$$1.begin) {\n            fs$$1.begin();\n        }\n        try {\n            Services.checkAndUpdateView(this._view);\n        }\n        finally {\n            if (fs$$1.end) {\n                fs$$1.end();\n            }\n        }\n    };\n    ViewRef_.prototype.checkNoChanges = function () { Services.checkNoChangesView(this._view); };\n    ViewRef_.prototype.reattach = function () { this._view.state |= 4 /* Attached */; };\n    ViewRef_.prototype.onDestroy = function (callback) {\n        if (!this._view.disposables) {\n            this._view.disposables = [];\n        }\n        this._view.disposables.push(callback);\n    };\n    ViewRef_.prototype.destroy = function () {\n        if (this._appRef) {\n            this._appRef.detachView(this);\n        }\n        else if (this._viewContainerRef) {\n            this._viewContainerRef.detach(this._viewContainerRef.indexOf(this));\n        }\n        Services.destroyView(this._view);\n    };\n    ViewRef_.prototype.detachFromAppRef = function () {\n        this._appRef = null;\n        renderDetachView(this._view);\n        Services.dirtyParentQueries(this._view);\n    };\n    ViewRef_.prototype.attachToAppRef = function (appRef) {\n        if (this._viewContainerRef) {\n            throw new Error('This view is already attached to a ViewContainer!');\n        }\n        this._appRef = appRef;\n    };\n    ViewRef_.prototype.attachToViewContainerRef = function (vcRef) {\n        if (this._appRef) {\n            throw new Error('This view is already attached directly to the ApplicationRef!');\n        }\n        this._viewContainerRef = vcRef;\n    };\n    return ViewRef_;\n}());\nfunction createTemplateData(view, def) {\n    return new TemplateRef_(view, def);\n}\nvar TemplateRef_ = /** @class */ (function (_super) {\n    __extends(TemplateRef_, _super);\n    function TemplateRef_(_parentView, _def) {\n        var _this = _super.call(this) || this;\n        _this._parentView = _parentView;\n        _this._def = _def;\n        return _this;\n    }\n    TemplateRef_.prototype.createEmbeddedView = function (context) {\n        return new ViewRef_(Services.createEmbeddedView(this._parentView, this._def, (this._def.element.template), context));\n    };\n    Object.defineProperty(TemplateRef_.prototype, \"elementRef\", {\n        get: function () {\n            return new ElementRef(asElementData(this._parentView, this._def.nodeIndex).renderElement);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return TemplateRef_;\n}(TemplateRef));\nfunction createInjector$1(view, elDef) {\n    return new Injector_(view, elDef);\n}\nvar Injector_ = /** @class */ (function () {\n    function Injector_(view, elDef) {\n        this.view = view;\n        this.elDef = elDef;\n    }\n    Injector_.prototype.get = function (token, notFoundValue) {\n        if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }\n        var allowPrivateServices = this.elDef ? (this.elDef.flags & 33554432 /* ComponentView */) !== 0 : false;\n        return Services.resolveDep(this.view, this.elDef, allowPrivateServices, { flags: 0 /* None */, token: token, tokenKey: tokenKey(token) }, notFoundValue);\n    };\n    return Injector_;\n}());\n\nfunction createRendererV1(view) {\n    return new RendererAdapter(view.renderer);\n}\nvar RendererAdapter = /** @class */ (function () {\n    function RendererAdapter(delegate) {\n        this.delegate = delegate;\n    }\n    RendererAdapter.prototype.selectRootElement = function (selectorOrNode) {\n        return this.delegate.selectRootElement(selectorOrNode);\n    };\n    RendererAdapter.prototype.createElement = function (parent, namespaceAndName) {\n        var _a = __read(splitNamespace(namespaceAndName), 2), ns = _a[0], name = _a[1];\n        var el = this.delegate.createElement(name, ns);\n        if (parent) {\n            this.delegate.appendChild(parent, el);\n        }\n        return el;\n    };\n    RendererAdapter.prototype.createViewRoot = function (hostElement) { return hostElement; };\n    RendererAdapter.prototype.createTemplateAnchor = function (parentElement) {\n        var comment = this.delegate.createComment('');\n        if (parentElement) {\n            this.delegate.appendChild(parentElement, comment);\n        }\n        return comment;\n    };\n    RendererAdapter.prototype.createText = function (parentElement, value) {\n        var node = this.delegate.createText(value);\n        if (parentElement) {\n            this.delegate.appendChild(parentElement, node);\n        }\n        return node;\n    };\n    RendererAdapter.prototype.projectNodes = function (parentElement, nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n            this.delegate.appendChild(parentElement, nodes[i]);\n        }\n    };\n    RendererAdapter.prototype.attachViewAfter = function (node, viewRootNodes) {\n        var parentElement = this.delegate.parentNode(node);\n        var nextSibling = this.delegate.nextSibling(node);\n        for (var i = 0; i < viewRootNodes.length; i++) {\n            this.delegate.insertBefore(parentElement, viewRootNodes[i], nextSibling);\n        }\n    };\n    RendererAdapter.prototype.detachView = function (viewRootNodes) {\n        for (var i = 0; i < viewRootNodes.length; i++) {\n            var node = viewRootNodes[i];\n            var parentElement = this.delegate.parentNode(node);\n            this.delegate.removeChild(parentElement, node);\n        }\n    };\n    RendererAdapter.prototype.destroyView = function (hostElement, viewAllNodes) {\n        for (var i = 0; i < viewAllNodes.length; i++) {\n            this.delegate.destroyNode(viewAllNodes[i]);\n        }\n    };\n    RendererAdapter.prototype.listen = function (renderElement, name, callback) {\n        return this.delegate.listen(renderElement, name, callback);\n    };\n    RendererAdapter.prototype.listenGlobal = function (target, name, callback) {\n        return this.delegate.listen(target, name, callback);\n    };\n    RendererAdapter.prototype.setElementProperty = function (renderElement, propertyName, propertyValue) {\n        this.delegate.setProperty(renderElement, propertyName, propertyValue);\n    };\n    RendererAdapter.prototype.setElementAttribute = function (renderElement, namespaceAndName, attributeValue) {\n        var _a = __read(splitNamespace(namespaceAndName), 2), ns = _a[0], name = _a[1];\n        if (attributeValue != null) {\n            this.delegate.setAttribute(renderElement, name, attributeValue, ns);\n        }\n        else {\n            this.delegate.removeAttribute(renderElement, name, ns);\n        }\n    };\n    RendererAdapter.prototype.setBindingDebugInfo = function (renderElement, propertyName, propertyValue) { };\n    RendererAdapter.prototype.setElementClass = function (renderElement, className, isAdd) {\n        if (isAdd) {\n            this.delegate.addClass(renderElement, className);\n        }\n        else {\n            this.delegate.removeClass(renderElement, className);\n        }\n    };\n    RendererAdapter.prototype.setElementStyle = function (renderElement, styleName, styleValue) {\n        if (styleValue != null) {\n            this.delegate.setStyle(renderElement, styleName, styleValue);\n        }\n        else {\n            this.delegate.removeStyle(renderElement, styleName);\n        }\n    };\n    RendererAdapter.prototype.invokeElementMethod = function (renderElement, methodName, args) {\n        renderElement[methodName].apply(renderElement, args);\n    };\n    RendererAdapter.prototype.setText = function (renderNode$$1, text) { this.delegate.setValue(renderNode$$1, text); };\n    RendererAdapter.prototype.animate = function () { throw new Error('Renderer.animate is no longer supported!'); };\n    return RendererAdapter;\n}());\nfunction createNgModuleRef(moduleType, parent, bootstrapComponents, def) {\n    return new NgModuleRef_(moduleType, parent, bootstrapComponents, def);\n}\nvar NgModuleRef_ = /** @class */ (function () {\n    function NgModuleRef_(_moduleType, _parent, _bootstrapComponents, _def) {\n        this._moduleType = _moduleType;\n        this._parent = _parent;\n        this._bootstrapComponents = _bootstrapComponents;\n        this._def = _def;\n        this._destroyListeners = [];\n        this._destroyed = false;\n        this.injector = this;\n        initNgModule(this);\n    }\n    NgModuleRef_.prototype.get = function (token, notFoundValue, injectFlags) {\n        if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }\n        if (injectFlags === void 0) { injectFlags = 0 /* Default */; }\n        var flags = 0;\n        if (injectFlags & 4 /* SkipSelf */) {\n            flags |= 1 /* SkipSelf */;\n        }\n        else if (injectFlags & 2 /* Self */) {\n            flags |= 4 /* Self */;\n        }\n        return resolveNgModuleDep(this, { token: token, tokenKey: tokenKey(token), flags: flags }, notFoundValue);\n    };\n    Object.defineProperty(NgModuleRef_.prototype, \"instance\", {\n        get: function () { return this.get(this._moduleType); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NgModuleRef_.prototype, \"componentFactoryResolver\", {\n        get: function () { return this.get(ComponentFactoryResolver); },\n        enumerable: true,\n        configurable: true\n    });\n    NgModuleRef_.prototype.destroy = function () {\n        if (this._destroyed) {\n            throw new Error(\"The ng module \" + stringify$1(this.instance.constructor) + \" has already been destroyed.\");\n        }\n        this._destroyed = true;\n        callNgModuleLifecycle(this, 131072 /* OnDestroy */);\n        this._destroyListeners.forEach(function (listener) { return listener(); });\n    };\n    NgModuleRef_.prototype.onDestroy = function (callback) { this._destroyListeners.push(callback); };\n    return NgModuleRef_;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar RendererV1TokenKey = tokenKey(Renderer);\nvar Renderer2TokenKey = tokenKey(Renderer2);\nvar ElementRefTokenKey = tokenKey(ElementRef);\nvar ViewContainerRefTokenKey = tokenKey(ViewContainerRef);\nvar TemplateRefTokenKey = tokenKey(TemplateRef);\nvar ChangeDetectorRefTokenKey = tokenKey(ChangeDetectorRef);\nvar InjectorRefTokenKey = tokenKey(Injector);\nvar INJECTORRefTokenKey = tokenKey(INJECTOR);\n\n\n\n\nfunction createProviderInstance(view, def) {\n    return _createProviderInstance(view, def);\n}\nfunction createPipeInstance(view, def) {\n    // deps are looked up from component.\n    var compView = view;\n    while (compView.parent && !isComponentView(compView)) {\n        compView = compView.parent;\n    }\n    // pipes can see the private services of the component\n    var allowPrivateServices = true;\n    // pipes are always eager and classes!\n    return createClass((compView.parent), (viewParentEl(compView)), allowPrivateServices, def.provider.value, def.provider.deps);\n}\nfunction createDirectiveInstance(view, def) {\n    // components can see other private services, other directives can't.\n    var allowPrivateServices = (def.flags & 32768 /* Component */) > 0;\n    // directives are always eager and classes!\n    var instance = createClass(view, (def.parent), allowPrivateServices, def.provider.value, def.provider.deps);\n    if (def.outputs.length) {\n        for (var i = 0; i < def.outputs.length; i++) {\n            var output = def.outputs[i];\n            var subscription = instance[output.propName].subscribe(eventHandlerClosure(view, def.parent.nodeIndex, output.eventName));\n            view.disposables[def.outputIndex + i] = subscription.unsubscribe.bind(subscription);\n        }\n    }\n    return instance;\n}\nfunction eventHandlerClosure(view, index, eventName) {\n    return function (event) { return dispatchEvent(view, index, eventName, event); };\n}\nfunction checkAndUpdateDirectiveInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var providerData = asProviderData(view, def.nodeIndex);\n    var directive = providerData.instance;\n    var changed = false;\n    var changes = (undefined);\n    var bindLen = def.bindings.length;\n    if (bindLen > 0 && checkBinding(view, def, 0, v0)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 0, v0, changes);\n    }\n    if (bindLen > 1 && checkBinding(view, def, 1, v1)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 1, v1, changes);\n    }\n    if (bindLen > 2 && checkBinding(view, def, 2, v2)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 2, v2, changes);\n    }\n    if (bindLen > 3 && checkBinding(view, def, 3, v3)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 3, v3, changes);\n    }\n    if (bindLen > 4 && checkBinding(view, def, 4, v4)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 4, v4, changes);\n    }\n    if (bindLen > 5 && checkBinding(view, def, 5, v5)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 5, v5, changes);\n    }\n    if (bindLen > 6 && checkBinding(view, def, 6, v6)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 6, v6, changes);\n    }\n    if (bindLen > 7 && checkBinding(view, def, 7, v7)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 7, v7, changes);\n    }\n    if (bindLen > 8 && checkBinding(view, def, 8, v8)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 8, v8, changes);\n    }\n    if (bindLen > 9 && checkBinding(view, def, 9, v9)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 9, v9, changes);\n    }\n    if (changes) {\n        directive.ngOnChanges(changes);\n    }\n    if ((def.flags & 65536 /* OnInit */) &&\n        shouldCallLifecycleInitHook(view, 256 /* InitState_CallingOnInit */, def.nodeIndex)) {\n        directive.ngOnInit();\n    }\n    if (def.flags & 262144 /* DoCheck */) {\n        directive.ngDoCheck();\n    }\n    return changed;\n}\nfunction checkAndUpdateDirectiveDynamic(view, def, values) {\n    var providerData = asProviderData(view, def.nodeIndex);\n    var directive = providerData.instance;\n    var changed = false;\n    var changes = (undefined);\n    for (var i = 0; i < values.length; i++) {\n        if (checkBinding(view, def, i, values[i])) {\n            changed = true;\n            changes = updateProp(view, providerData, def, i, values[i], changes);\n        }\n    }\n    if (changes) {\n        directive.ngOnChanges(changes);\n    }\n    if ((def.flags & 65536 /* OnInit */) &&\n        shouldCallLifecycleInitHook(view, 256 /* InitState_CallingOnInit */, def.nodeIndex)) {\n        directive.ngOnInit();\n    }\n    if (def.flags & 262144 /* DoCheck */) {\n        directive.ngDoCheck();\n    }\n    return changed;\n}\nfunction _createProviderInstance(view, def) {\n    // private services can see other private services\n    var allowPrivateServices = (def.flags & 8192 /* PrivateProvider */) > 0;\n    var providerDef = def.provider;\n    switch (def.flags & 201347067 /* Types */) {\n        case 512 /* TypeClassProvider */:\n            return createClass(view, (def.parent), allowPrivateServices, providerDef.value, providerDef.deps);\n        case 1024 /* TypeFactoryProvider */:\n            return callFactory(view, (def.parent), allowPrivateServices, providerDef.value, providerDef.deps);\n        case 2048 /* TypeUseExistingProvider */:\n            return resolveDep(view, (def.parent), allowPrivateServices, providerDef.deps[0]);\n        case 256 /* TypeValueProvider */:\n            return providerDef.value;\n    }\n}\nfunction createClass(view, elDef, allowPrivateServices, ctor, deps) {\n    var len = deps.length;\n    switch (len) {\n        case 0:\n            return new ctor();\n        case 1:\n            return new ctor(resolveDep(view, elDef, allowPrivateServices, deps[0]));\n        case 2:\n            return new ctor(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]));\n        case 3:\n            return new ctor(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]), resolveDep(view, elDef, allowPrivateServices, deps[2]));\n        default:\n            var depValues = new Array(len);\n            for (var i = 0; i < len; i++) {\n                depValues[i] = resolveDep(view, elDef, allowPrivateServices, deps[i]);\n            }\n            return new (ctor.bind.apply(ctor, __spread([void 0], depValues)))();\n    }\n}\nfunction callFactory(view, elDef, allowPrivateServices, factory, deps) {\n    var len = deps.length;\n    switch (len) {\n        case 0:\n            return factory();\n        case 1:\n            return factory(resolveDep(view, elDef, allowPrivateServices, deps[0]));\n        case 2:\n            return factory(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]));\n        case 3:\n            return factory(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]), resolveDep(view, elDef, allowPrivateServices, deps[2]));\n        default:\n            var depValues = Array(len);\n            for (var i = 0; i < len; i++) {\n                depValues[i] = resolveDep(view, elDef, allowPrivateServices, deps[i]);\n            }\n            return factory.apply(void 0, __spread(depValues));\n    }\n}\n// This default value is when checking the hierarchy for a token.\n//\n// It means both:\n// - the token is not provided by the current injector,\n// - only the element injectors should be checked (ie do not check module injectors\n//\n//          mod1\n//         /\n//       el1   mod2\n//         \\  /\n//         el2\n//\n// When requesting el2.injector.get(token), we should check in the following order and return the\n// first found value:\n// - el2.injector.get(token, default)\n// - el1.injector.get(token, NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR) -> do not check the module\n// - mod2.injector.get(token, default)\nvar NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR = {};\nfunction resolveDep(view, elDef, allowPrivateServices, depDef, notFoundValue) {\n    if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }\n    if (depDef.flags & 8 /* Value */) {\n        return depDef.token;\n    }\n    var startView = view;\n    if (depDef.flags & 2 /* Optional */) {\n        notFoundValue = null;\n    }\n    var tokenKey$$1 = depDef.tokenKey;\n    if (tokenKey$$1 === ChangeDetectorRefTokenKey) {\n        // directives on the same element as a component should be able to control the change detector\n        // of that component as well.\n        allowPrivateServices = !!(elDef && elDef.element.componentView);\n    }\n    if (elDef && (depDef.flags & 1 /* SkipSelf */)) {\n        allowPrivateServices = false;\n        elDef = (elDef.parent);\n    }\n    var searchView = view;\n    while (searchView) {\n        if (elDef) {\n            switch (tokenKey$$1) {\n                case RendererV1TokenKey: {\n                    var compView = findCompView(searchView, elDef, allowPrivateServices);\n                    return createRendererV1(compView);\n                }\n                case Renderer2TokenKey: {\n                    var compView = findCompView(searchView, elDef, allowPrivateServices);\n                    return compView.renderer;\n                }\n                case ElementRefTokenKey:\n                    return new ElementRef(asElementData(searchView, elDef.nodeIndex).renderElement);\n                case ViewContainerRefTokenKey:\n                    return asElementData(searchView, elDef.nodeIndex).viewContainer;\n                case TemplateRefTokenKey: {\n                    if (elDef.element.template) {\n                        return asElementData(searchView, elDef.nodeIndex).template;\n                    }\n                    break;\n                }\n                case ChangeDetectorRefTokenKey: {\n                    var cdView = findCompView(searchView, elDef, allowPrivateServices);\n                    return createChangeDetectorRef(cdView);\n                }\n                case InjectorRefTokenKey:\n                case INJECTORRefTokenKey:\n                    return createInjector$1(searchView, elDef);\n                default:\n                    var providerDef_1 = (allowPrivateServices ? elDef.element.allProviders :\n                        elDef.element.publicProviders)[tokenKey$$1];\n                    if (providerDef_1) {\n                        var providerData = asProviderData(searchView, providerDef_1.nodeIndex);\n                        if (!providerData) {\n                            providerData = { instance: _createProviderInstance(searchView, providerDef_1) };\n                            searchView.nodes[providerDef_1.nodeIndex] = providerData;\n                        }\n                        return providerData.instance;\n                    }\n            }\n        }\n        allowPrivateServices = isComponentView(searchView);\n        elDef = (viewParentEl(searchView));\n        searchView = (searchView.parent);\n        if (depDef.flags & 4 /* Self */) {\n            searchView = null;\n        }\n    }\n    var value = startView.root.injector.get(depDef.token, NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR);\n    if (value !== NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR ||\n        notFoundValue === NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR) {\n        // Return the value from the root element injector when\n        // - it provides it\n        //   (value !== NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR)\n        // - the module injector should not be checked\n        //   (notFoundValue === NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR)\n        return value;\n    }\n    return startView.root.ngModule.injector.get(depDef.token, notFoundValue);\n}\nfunction findCompView(view, elDef, allowPrivateServices) {\n    var compView;\n    if (allowPrivateServices) {\n        compView = asElementData(view, elDef.nodeIndex).componentView;\n    }\n    else {\n        compView = view;\n        while (compView.parent && !isComponentView(compView)) {\n            compView = compView.parent;\n        }\n    }\n    return compView;\n}\nfunction updateProp(view, providerData, def, bindingIdx, value, changes) {\n    if (def.flags & 32768 /* Component */) {\n        var compView = asElementData(view, def.parent.nodeIndex).componentView;\n        if (compView.def.flags & 2 /* OnPush */) {\n            compView.state |= 8 /* ChecksEnabled */;\n        }\n    }\n    var binding = def.bindings[bindingIdx];\n    var propName = (binding.name);\n    // Note: This is still safe with Closure Compiler as\n    // the user passed in the property name as an object has to `providerDef`,\n    // so Closure Compiler will have renamed the property correctly already.\n    providerData.instance[propName] = value;\n    if (def.flags & 524288 /* OnChanges */) {\n        changes = changes || {};\n        var oldValue = WrappedValue.unwrap(view.oldValues[def.bindingIndex + bindingIdx]);\n        var binding_1 = def.bindings[bindingIdx];\n        changes[binding_1.nonMinifiedName] =\n            new SimpleChange(oldValue, value, (view.state & 2 /* FirstCheck */) !== 0);\n    }\n    view.oldValues[def.bindingIndex + bindingIdx] = value;\n    return changes;\n}\n// This function calls the ngAfterContentCheck, ngAfterContentInit,\n// ngAfterViewCheck, and ngAfterViewInit lifecycle hooks (depending on the node\n// flags in lifecycle). Unlike ngDoCheck, ngOnChanges and ngOnInit, which are\n// called during a pre-order traversal of the view tree (that is calling the\n// parent hooks before the child hooks) these events are sent in using a\n// post-order traversal of the tree (children before parents). This changes the\n// meaning of initIndex in the view state. For ngOnInit, initIndex tracks the\n// expected nodeIndex which a ngOnInit should be called. When sending\n// ngAfterContentInit and ngAfterViewInit it is the expected count of\n// ngAfterContentInit or ngAfterViewInit methods that have been called. This\n// ensure that despite being called recursively or after picking up after an\n// exception, the ngAfterContentInit or ngAfterViewInit will be called on the\n// correct nodes. Consider for example, the following (where E is an element\n// and D is a directive)\n//  Tree:       pre-order index  post-order index\n//    E1        0                6\n//      E2      1                1\n//       D3     2                0\n//      E4      3                5\n//       E5     4                4\n//        E6    5                2\n//        E7    6                3\n// As can be seen, the post-order index has an unclear relationship to the\n// pre-order index (postOrderIndex === preOrderIndex - parentCount +\n// childCount). Since number of calls to ngAfterContentInit and ngAfterViewInit\n// are stable (will be the same for the same view regardless of exceptions or\n// recursion) we just need to count them which will roughly correspond to the\n// post-order index (it skips elements and directives that do not have\n// lifecycle hooks).\n//\n// For example, if an exception is raised in the E6.onAfterViewInit() the\n// initIndex is left at 3 (by shouldCallLifecycleInitHook() which set it to\n// initIndex + 1). When checkAndUpdateView() is called again D3, E2 and E6 will\n// not have their ngAfterViewInit() called but, starting with E7, the rest of\n// the view will begin getting ngAfterViewInit() called until a check and\n// pass is complete.\n//\n// This algorthim also handles recursion. Consider if E4's ngAfterViewInit()\n// indirectly calls E1's ChangeDetectorRef.detectChanges(). The expected\n// initIndex is set to 6, the recusive checkAndUpdateView() starts walk again.\n// D3, E2, E6, E7, E5 and E4 are skipped, ngAfterViewInit() is called on E1.\n// When the recursion returns the initIndex will be 7 so E1 is skipped as it\n// has already been called in the recursively called checkAnUpdateView().\nfunction callLifecycleHooksChildrenFirst(view, lifecycles) {\n    if (!(view.def.nodeFlags & lifecycles)) {\n        return;\n    }\n    var nodes = view.def.nodes;\n    var initIndex = 0;\n    for (var i = 0; i < nodes.length; i++) {\n        var nodeDef = nodes[i];\n        var parent_1 = nodeDef.parent;\n        if (!parent_1 && nodeDef.flags & lifecycles) {\n            // matching root node (e.g. a pipe)\n            callProviderLifecycles(view, i, nodeDef.flags & lifecycles, initIndex++);\n        }\n        if ((nodeDef.childFlags & lifecycles) === 0) {\n            // no child matches one of the lifecycles\n            i += nodeDef.childCount;\n        }\n        while (parent_1 && (parent_1.flags & 1 /* TypeElement */) &&\n            i === parent_1.nodeIndex + parent_1.childCount) {\n            // last child of an element\n            if (parent_1.directChildFlags & lifecycles) {\n                initIndex = callElementProvidersLifecycles(view, parent_1, lifecycles, initIndex);\n            }\n            parent_1 = parent_1.parent;\n        }\n    }\n}\nfunction callElementProvidersLifecycles(view, elDef, lifecycles, initIndex) {\n    for (var i = elDef.nodeIndex + 1; i <= elDef.nodeIndex + elDef.childCount; i++) {\n        var nodeDef = view.def.nodes[i];\n        if (nodeDef.flags & lifecycles) {\n            callProviderLifecycles(view, i, nodeDef.flags & lifecycles, initIndex++);\n        }\n        // only visit direct children\n        i += nodeDef.childCount;\n    }\n    return initIndex;\n}\nfunction callProviderLifecycles(view, index, lifecycles, initIndex) {\n    var providerData = asProviderData(view, index);\n    if (!providerData) {\n        return;\n    }\n    var provider = providerData.instance;\n    if (!provider) {\n        return;\n    }\n    Services.setCurrentNode(view, index);\n    if (lifecycles & 1048576 /* AfterContentInit */ &&\n        shouldCallLifecycleInitHook(view, 512 /* InitState_CallingAfterContentInit */, initIndex)) {\n        provider.ngAfterContentInit();\n    }\n    if (lifecycles & 2097152 /* AfterContentChecked */) {\n        provider.ngAfterContentChecked();\n    }\n    if (lifecycles & 4194304 /* AfterViewInit */ &&\n        shouldCallLifecycleInitHook(view, 768 /* InitState_CallingAfterViewInit */, initIndex)) {\n        provider.ngAfterViewInit();\n    }\n    if (lifecycles & 8388608 /* AfterViewChecked */) {\n        provider.ngAfterViewChecked();\n    }\n    if (lifecycles & 131072 /* OnDestroy */) {\n        provider.ngOnDestroy();\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction createQuery() {\n    return new QueryList();\n}\nfunction dirtyParentQueries(view) {\n    var queryIds = view.def.nodeMatchedQueries;\n    while (view.parent && isEmbeddedView(view)) {\n        var tplDef = (view.parentNodeDef);\n        view = view.parent;\n        // content queries\n        var end = tplDef.nodeIndex + tplDef.childCount;\n        for (var i = 0; i <= end; i++) {\n            var nodeDef = view.def.nodes[i];\n            if ((nodeDef.flags & 67108864 /* TypeContentQuery */) &&\n                (nodeDef.flags & 536870912 /* DynamicQuery */) &&\n                (nodeDef.query.filterId & queryIds) === nodeDef.query.filterId) {\n                asQueryList(view, i).setDirty();\n            }\n            if ((nodeDef.flags & 1 /* TypeElement */ && i + nodeDef.childCount < tplDef.nodeIndex) ||\n                !(nodeDef.childFlags & 67108864 /* TypeContentQuery */) ||\n                !(nodeDef.childFlags & 536870912 /* DynamicQuery */)) {\n                // skip elements that don't contain the template element or no query.\n                i += nodeDef.childCount;\n            }\n        }\n    }\n    // view queries\n    if (view.def.nodeFlags & 134217728 /* TypeViewQuery */) {\n        for (var i = 0; i < view.def.nodes.length; i++) {\n            var nodeDef = view.def.nodes[i];\n            if ((nodeDef.flags & 134217728 /* TypeViewQuery */) && (nodeDef.flags & 536870912 /* DynamicQuery */)) {\n                asQueryList(view, i).setDirty();\n            }\n            // only visit the root nodes\n            i += nodeDef.childCount;\n        }\n    }\n}\nfunction checkAndUpdateQuery(view, nodeDef) {\n    var queryList = asQueryList(view, nodeDef.nodeIndex);\n    if (!queryList.dirty) {\n        return;\n    }\n    var directiveInstance;\n    var newValues = (undefined);\n    if (nodeDef.flags & 67108864 /* TypeContentQuery */) {\n        var elementDef = (nodeDef.parent.parent);\n        newValues = calcQueryValues(view, elementDef.nodeIndex, elementDef.nodeIndex + elementDef.childCount, (nodeDef.query), []);\n        directiveInstance = asProviderData(view, nodeDef.parent.nodeIndex).instance;\n    }\n    else if (nodeDef.flags & 134217728 /* TypeViewQuery */) {\n        newValues = calcQueryValues(view, 0, view.def.nodes.length - 1, (nodeDef.query), []);\n        directiveInstance = view.component;\n    }\n    queryList.reset(newValues);\n    var bindings = nodeDef.query.bindings;\n    var notify = false;\n    for (var i = 0; i < bindings.length; i++) {\n        var binding = bindings[i];\n        var boundValue = void 0;\n        switch (binding.bindingType) {\n            case 0 /* First */:\n                boundValue = queryList.first;\n                break;\n            case 1 /* All */:\n                boundValue = queryList;\n                notify = true;\n                break;\n        }\n        directiveInstance[binding.propName] = boundValue;\n    }\n    if (notify) {\n        queryList.notifyOnChanges();\n    }\n}\nfunction calcQueryValues(view, startIndex, endIndex, queryDef, values) {\n    for (var i = startIndex; i <= endIndex; i++) {\n        var nodeDef = view.def.nodes[i];\n        var valueType = nodeDef.matchedQueries[queryDef.id];\n        if (valueType != null) {\n            values.push(getQueryValue(view, nodeDef, valueType));\n        }\n        if (nodeDef.flags & 1 /* TypeElement */ && nodeDef.element.template &&\n            (nodeDef.element.template.nodeMatchedQueries & queryDef.filterId) ===\n                queryDef.filterId) {\n            var elementData = asElementData(view, i);\n            // check embedded views that were attached at the place of their template,\n            // but process child nodes first if some match the query (see issue #16568)\n            if ((nodeDef.childMatchedQueries & queryDef.filterId) === queryDef.filterId) {\n                calcQueryValues(view, i + 1, i + nodeDef.childCount, queryDef, values);\n                i += nodeDef.childCount;\n            }\n            if (nodeDef.flags & 16777216 /* EmbeddedViews */) {\n                var embeddedViews = elementData.viewContainer._embeddedViews;\n                for (var k = 0; k < embeddedViews.length; k++) {\n                    var embeddedView = embeddedViews[k];\n                    var dvc = declaredViewContainer(embeddedView);\n                    if (dvc && dvc === elementData) {\n                        calcQueryValues(embeddedView, 0, embeddedView.def.nodes.length - 1, queryDef, values);\n                    }\n                }\n            }\n            var projectedViews = elementData.template._projectedViews;\n            if (projectedViews) {\n                for (var k = 0; k < projectedViews.length; k++) {\n                    var projectedView = projectedViews[k];\n                    calcQueryValues(projectedView, 0, projectedView.def.nodes.length - 1, queryDef, values);\n                }\n            }\n        }\n        if ((nodeDef.childMatchedQueries & queryDef.filterId) !== queryDef.filterId) {\n            // if no child matches the query, skip the children.\n            i += nodeDef.childCount;\n        }\n    }\n    return values;\n}\nfunction getQueryValue(view, nodeDef, queryValueType) {\n    if (queryValueType != null) {\n        // a match\n        switch (queryValueType) {\n            case 1 /* RenderElement */:\n                return asElementData(view, nodeDef.nodeIndex).renderElement;\n            case 0 /* ElementRef */:\n                return new ElementRef(asElementData(view, nodeDef.nodeIndex).renderElement);\n            case 2 /* TemplateRef */:\n                return asElementData(view, nodeDef.nodeIndex).template;\n            case 3 /* ViewContainerRef */:\n                return asElementData(view, nodeDef.nodeIndex).viewContainer;\n            case 4 /* Provider */:\n                return asProviderData(view, nodeDef.nodeIndex).instance;\n        }\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction appendNgContent(view, renderHost, def) {\n    var parentEl = getParentRenderElement(view, renderHost, def);\n    if (!parentEl) {\n        // Nothing to do if there is no parent element.\n        return;\n    }\n    var ngContentIndex = def.ngContent.index;\n    visitProjectedRenderNodes(view, ngContentIndex, 1 /* AppendChild */, parentEl, null, undefined);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\n\nfunction createPureExpression(view, def) {\n    return { value: undefined };\n}\nfunction checkAndUpdatePureExpressionInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var bindings = def.bindings;\n    var changed = false;\n    var bindLen = bindings.length;\n    if (bindLen > 0 && checkAndUpdateBinding(view, def, 0, v0))\n        changed = true;\n    if (bindLen > 1 && checkAndUpdateBinding(view, def, 1, v1))\n        changed = true;\n    if (bindLen > 2 && checkAndUpdateBinding(view, def, 2, v2))\n        changed = true;\n    if (bindLen > 3 && checkAndUpdateBinding(view, def, 3, v3))\n        changed = true;\n    if (bindLen > 4 && checkAndUpdateBinding(view, def, 4, v4))\n        changed = true;\n    if (bindLen > 5 && checkAndUpdateBinding(view, def, 5, v5))\n        changed = true;\n    if (bindLen > 6 && checkAndUpdateBinding(view, def, 6, v6))\n        changed = true;\n    if (bindLen > 7 && checkAndUpdateBinding(view, def, 7, v7))\n        changed = true;\n    if (bindLen > 8 && checkAndUpdateBinding(view, def, 8, v8))\n        changed = true;\n    if (bindLen > 9 && checkAndUpdateBinding(view, def, 9, v9))\n        changed = true;\n    if (changed) {\n        var data = asPureExpressionData(view, def.nodeIndex);\n        var value = void 0;\n        switch (def.flags & 201347067 /* Types */) {\n            case 32 /* TypePureArray */:\n                value = new Array(bindings.length);\n                if (bindLen > 0)\n                    value[0] = v0;\n                if (bindLen > 1)\n                    value[1] = v1;\n                if (bindLen > 2)\n                    value[2] = v2;\n                if (bindLen > 3)\n                    value[3] = v3;\n                if (bindLen > 4)\n                    value[4] = v4;\n                if (bindLen > 5)\n                    value[5] = v5;\n                if (bindLen > 6)\n                    value[6] = v6;\n                if (bindLen > 7)\n                    value[7] = v7;\n                if (bindLen > 8)\n                    value[8] = v8;\n                if (bindLen > 9)\n                    value[9] = v9;\n                break;\n            case 64 /* TypePureObject */:\n                value = {};\n                if (bindLen > 0)\n                    value[bindings[0].name] = v0;\n                if (bindLen > 1)\n                    value[bindings[1].name] = v1;\n                if (bindLen > 2)\n                    value[bindings[2].name] = v2;\n                if (bindLen > 3)\n                    value[bindings[3].name] = v3;\n                if (bindLen > 4)\n                    value[bindings[4].name] = v4;\n                if (bindLen > 5)\n                    value[bindings[5].name] = v5;\n                if (bindLen > 6)\n                    value[bindings[6].name] = v6;\n                if (bindLen > 7)\n                    value[bindings[7].name] = v7;\n                if (bindLen > 8)\n                    value[bindings[8].name] = v8;\n                if (bindLen > 9)\n                    value[bindings[9].name] = v9;\n                break;\n            case 128 /* TypePurePipe */:\n                var pipe = v0;\n                switch (bindLen) {\n                    case 1:\n                        value = pipe.transform(v0);\n                        break;\n                    case 2:\n                        value = pipe.transform(v1);\n                        break;\n                    case 3:\n                        value = pipe.transform(v1, v2);\n                        break;\n                    case 4:\n                        value = pipe.transform(v1, v2, v3);\n                        break;\n                    case 5:\n                        value = pipe.transform(v1, v2, v3, v4);\n                        break;\n                    case 6:\n                        value = pipe.transform(v1, v2, v3, v4, v5);\n                        break;\n                    case 7:\n                        value = pipe.transform(v1, v2, v3, v4, v5, v6);\n                        break;\n                    case 8:\n                        value = pipe.transform(v1, v2, v3, v4, v5, v6, v7);\n                        break;\n                    case 9:\n                        value = pipe.transform(v1, v2, v3, v4, v5, v6, v7, v8);\n                        break;\n                    case 10:\n                        value = pipe.transform(v1, v2, v3, v4, v5, v6, v7, v8, v9);\n                        break;\n                }\n                break;\n        }\n        data.value = value;\n    }\n    return changed;\n}\nfunction checkAndUpdatePureExpressionDynamic(view, def, values) {\n    var bindings = def.bindings;\n    var changed = false;\n    for (var i = 0; i < values.length; i++) {\n        // Note: We need to loop over all values, so that\n        // the old values are updates as well!\n        if (checkAndUpdateBinding(view, def, i, values[i])) {\n            changed = true;\n        }\n    }\n    if (changed) {\n        var data = asPureExpressionData(view, def.nodeIndex);\n        var value = void 0;\n        switch (def.flags & 201347067 /* Types */) {\n            case 32 /* TypePureArray */:\n                value = values;\n                break;\n            case 64 /* TypePureObject */:\n                value = {};\n                for (var i = 0; i < values.length; i++) {\n                    value[bindings[i].name] = values[i];\n                }\n                break;\n            case 128 /* TypePurePipe */:\n                var pipe = values[0];\n                var params = values.slice(1);\n                value = pipe.transform.apply(pipe, __spread(params));\n                break;\n        }\n        data.value = value;\n    }\n    return changed;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction createText(view, renderHost, def) {\n    var renderNode$$1;\n    var renderer = view.renderer;\n    renderNode$$1 = renderer.createText(def.text.prefix);\n    var parentEl = getParentRenderElement(view, renderHost, def);\n    if (parentEl) {\n        renderer.appendChild(parentEl, renderNode$$1);\n    }\n    return { renderText: renderNode$$1 };\n}\nfunction checkAndUpdateTextInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var changed = false;\n    var bindings = def.bindings;\n    var bindLen = bindings.length;\n    if (bindLen > 0 && checkAndUpdateBinding(view, def, 0, v0))\n        changed = true;\n    if (bindLen > 1 && checkAndUpdateBinding(view, def, 1, v1))\n        changed = true;\n    if (bindLen > 2 && checkAndUpdateBinding(view, def, 2, v2))\n        changed = true;\n    if (bindLen > 3 && checkAndUpdateBinding(view, def, 3, v3))\n        changed = true;\n    if (bindLen > 4 && checkAndUpdateBinding(view, def, 4, v4))\n        changed = true;\n    if (bindLen > 5 && checkAndUpdateBinding(view, def, 5, v5))\n        changed = true;\n    if (bindLen > 6 && checkAndUpdateBinding(view, def, 6, v6))\n        changed = true;\n    if (bindLen > 7 && checkAndUpdateBinding(view, def, 7, v7))\n        changed = true;\n    if (bindLen > 8 && checkAndUpdateBinding(view, def, 8, v8))\n        changed = true;\n    if (bindLen > 9 && checkAndUpdateBinding(view, def, 9, v9))\n        changed = true;\n    if (changed) {\n        var value = def.text.prefix;\n        if (bindLen > 0)\n            value += _addInterpolationPart(v0, bindings[0]);\n        if (bindLen > 1)\n            value += _addInterpolationPart(v1, bindings[1]);\n        if (bindLen > 2)\n            value += _addInterpolationPart(v2, bindings[2]);\n        if (bindLen > 3)\n            value += _addInterpolationPart(v3, bindings[3]);\n        if (bindLen > 4)\n            value += _addInterpolationPart(v4, bindings[4]);\n        if (bindLen > 5)\n            value += _addInterpolationPart(v5, bindings[5]);\n        if (bindLen > 6)\n            value += _addInterpolationPart(v6, bindings[6]);\n        if (bindLen > 7)\n            value += _addInterpolationPart(v7, bindings[7]);\n        if (bindLen > 8)\n            value += _addInterpolationPart(v8, bindings[8]);\n        if (bindLen > 9)\n            value += _addInterpolationPart(v9, bindings[9]);\n        var renderNode$$1 = asTextData(view, def.nodeIndex).renderText;\n        view.renderer.setValue(renderNode$$1, value);\n    }\n    return changed;\n}\nfunction checkAndUpdateTextDynamic(view, def, values) {\n    var bindings = def.bindings;\n    var changed = false;\n    for (var i = 0; i < values.length; i++) {\n        // Note: We need to loop over all values, so that\n        // the old values are updates as well!\n        if (checkAndUpdateBinding(view, def, i, values[i])) {\n            changed = true;\n        }\n    }\n    if (changed) {\n        var value = '';\n        for (var i = 0; i < values.length; i++) {\n            value = value + _addInterpolationPart(values[i], bindings[i]);\n        }\n        value = def.text.prefix + value;\n        var renderNode$$1 = asTextData(view, def.nodeIndex).renderText;\n        view.renderer.setValue(renderNode$$1, value);\n    }\n    return changed;\n}\nfunction _addInterpolationPart(value, binding) {\n    var valueStr = value != null ? value.toString() : '';\n    return valueStr + binding.suffix;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction createEmbeddedView(parent, anchorDef$$1, viewDef, context) {\n    // embedded views are seen as siblings to the anchor, so we need\n    // to get the parent of the anchor and use it as parentIndex.\n    var view = createView(parent.root, parent.renderer, parent, anchorDef$$1, viewDef);\n    initView(view, parent.component, context);\n    createViewNodes(view);\n    return view;\n}\nfunction createRootView(root, def, context) {\n    var view = createView(root, root.renderer, null, null, def);\n    initView(view, context, context);\n    createViewNodes(view);\n    return view;\n}\nfunction createComponentView(parentView, nodeDef, viewDef, hostElement) {\n    var rendererType = nodeDef.element.componentRendererType;\n    var compRenderer;\n    if (!rendererType) {\n        compRenderer = parentView.root.renderer;\n    }\n    else {\n        compRenderer = parentView.root.rendererFactory.createRenderer(hostElement, rendererType);\n    }\n    return createView(parentView.root, compRenderer, parentView, nodeDef.element.componentProvider, viewDef);\n}\nfunction createView(root, renderer, parent, parentNodeDef, def) {\n    var nodes = new Array(def.nodes.length);\n    var disposables = def.outputCount ? new Array(def.outputCount) : null;\n    var view = {\n        def: def,\n        parent: parent,\n        viewContainerParent: null, parentNodeDef: parentNodeDef,\n        context: null,\n        component: null, nodes: nodes,\n        state: 13 /* CatInit */, root: root, renderer: renderer,\n        oldValues: new Array(def.bindingCount), disposables: disposables,\n        initIndex: -1\n    };\n    return view;\n}\nfunction initView(view, component, context) {\n    view.component = component;\n    view.context = context;\n}\nfunction createViewNodes(view) {\n    var renderHost;\n    if (isComponentView(view)) {\n        var hostDef = view.parentNodeDef;\n        renderHost = asElementData((view.parent), hostDef.parent.nodeIndex).renderElement;\n    }\n    var def = view.def;\n    var nodes = view.nodes;\n    for (var i = 0; i < def.nodes.length; i++) {\n        var nodeDef = def.nodes[i];\n        Services.setCurrentNode(view, i);\n        var nodeData = void 0;\n        switch (nodeDef.flags & 201347067 /* Types */) {\n            case 1 /* TypeElement */:\n                var el = createElement(view, renderHost, nodeDef);\n                var componentView = (undefined);\n                if (nodeDef.flags & 33554432 /* ComponentView */) {\n                    var compViewDef = resolveDefinition((nodeDef.element.componentView));\n                    componentView = Services.createComponentView(view, nodeDef, compViewDef, el);\n                }\n                listenToElementOutputs(view, componentView, nodeDef, el);\n                nodeData = {\n                    renderElement: el,\n                    componentView: componentView,\n                    viewContainer: null,\n                    template: nodeDef.element.template ? createTemplateData(view, nodeDef) : undefined\n                };\n                if (nodeDef.flags & 16777216 /* EmbeddedViews */) {\n                    nodeData.viewContainer = createViewContainerData(view, nodeDef, nodeData);\n                }\n                break;\n            case 2 /* TypeText */:\n                nodeData = createText(view, renderHost, nodeDef);\n                break;\n            case 512 /* TypeClassProvider */:\n            case 1024 /* TypeFactoryProvider */:\n            case 2048 /* TypeUseExistingProvider */:\n            case 256 /* TypeValueProvider */: {\n                nodeData = nodes[i];\n                if (!nodeData && !(nodeDef.flags & 4096 /* LazyProvider */)) {\n                    var instance = createProviderInstance(view, nodeDef);\n                    nodeData = { instance: instance };\n                }\n                break;\n            }\n            case 16 /* TypePipe */: {\n                var instance = createPipeInstance(view, nodeDef);\n                nodeData = { instance: instance };\n                break;\n            }\n            case 16384 /* TypeDirective */: {\n                nodeData = nodes[i];\n                if (!nodeData) {\n                    var instance = createDirectiveInstance(view, nodeDef);\n                    nodeData = { instance: instance };\n                }\n                if (nodeDef.flags & 32768 /* Component */) {\n                    var compView = asElementData(view, nodeDef.parent.nodeIndex).componentView;\n                    initView(compView, nodeData.instance, nodeData.instance);\n                }\n                break;\n            }\n            case 32 /* TypePureArray */:\n            case 64 /* TypePureObject */:\n            case 128 /* TypePurePipe */:\n                nodeData = createPureExpression(view, nodeDef);\n                break;\n            case 67108864 /* TypeContentQuery */:\n            case 134217728 /* TypeViewQuery */:\n                nodeData = createQuery();\n                break;\n            case 8 /* TypeNgContent */:\n                appendNgContent(view, renderHost, nodeDef);\n                // no runtime data needed for NgContent...\n                nodeData = undefined;\n                break;\n        }\n        nodes[i] = nodeData;\n    }\n    // Create the ViewData.nodes of component views after we created everything else,\n    // so that e.g. ng-content works\n    execComponentViewsAction(view, ViewAction.CreateViewNodes);\n    // fill static content and view queries\n    execQueriesAction(view, 67108864 /* TypeContentQuery */ | 134217728 /* TypeViewQuery */, 268435456 /* StaticQuery */, 0 /* CheckAndUpdate */);\n}\nfunction checkNoChangesView(view) {\n    markProjectedViewsForCheck(view);\n    Services.updateDirectives(view, 1 /* CheckNoChanges */);\n    execEmbeddedViewsAction(view, ViewAction.CheckNoChanges);\n    Services.updateRenderer(view, 1 /* CheckNoChanges */);\n    execComponentViewsAction(view, ViewAction.CheckNoChanges);\n    // Note: We don't check queries for changes as we didn't do this in v2.x.\n    // TODO(tbosch): investigate if we can enable the check again in v5.x with a nicer error message.\n    view.state &= ~(64 /* CheckProjectedViews */ | 32 /* CheckProjectedView */);\n}\nfunction checkAndUpdateView(view) {\n    if (view.state & 1 /* BeforeFirstCheck */) {\n        view.state &= ~1 /* BeforeFirstCheck */;\n        view.state |= 2 /* FirstCheck */;\n    }\n    else {\n        view.state &= ~2 /* FirstCheck */;\n    }\n    shiftInitState(view, 0 /* InitState_BeforeInit */, 256 /* InitState_CallingOnInit */);\n    markProjectedViewsForCheck(view);\n    Services.updateDirectives(view, 0 /* CheckAndUpdate */);\n    execEmbeddedViewsAction(view, ViewAction.CheckAndUpdate);\n    execQueriesAction(view, 67108864 /* TypeContentQuery */, 536870912 /* DynamicQuery */, 0 /* CheckAndUpdate */);\n    var callInit = shiftInitState(view, 256 /* InitState_CallingOnInit */, 512 /* InitState_CallingAfterContentInit */);\n    callLifecycleHooksChildrenFirst(view, 2097152 /* AfterContentChecked */ | (callInit ? 1048576 /* AfterContentInit */ : 0));\n    Services.updateRenderer(view, 0 /* CheckAndUpdate */);\n    execComponentViewsAction(view, ViewAction.CheckAndUpdate);\n    execQueriesAction(view, 134217728 /* TypeViewQuery */, 536870912 /* DynamicQuery */, 0 /* CheckAndUpdate */);\n    callInit = shiftInitState(view, 512 /* InitState_CallingAfterContentInit */, 768 /* InitState_CallingAfterViewInit */);\n    callLifecycleHooksChildrenFirst(view, 8388608 /* AfterViewChecked */ | (callInit ? 4194304 /* AfterViewInit */ : 0));\n    if (view.def.flags & 2 /* OnPush */) {\n        view.state &= ~8 /* ChecksEnabled */;\n    }\n    view.state &= ~(64 /* CheckProjectedViews */ | 32 /* CheckProjectedView */);\n    shiftInitState(view, 768 /* InitState_CallingAfterViewInit */, 1024 /* InitState_AfterInit */);\n}\nfunction checkAndUpdateNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    if (argStyle === 0 /* Inline */) {\n        return checkAndUpdateNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    }\n    else {\n        return checkAndUpdateNodeDynamic(view, nodeDef, v0);\n    }\n}\nfunction markProjectedViewsForCheck(view) {\n    var def = view.def;\n    if (!(def.nodeFlags & 4 /* ProjectedTemplate */)) {\n        return;\n    }\n    for (var i = 0; i < def.nodes.length; i++) {\n        var nodeDef = def.nodes[i];\n        if (nodeDef.flags & 4 /* ProjectedTemplate */) {\n            var projectedViews = asElementData(view, i).template._projectedViews;\n            if (projectedViews) {\n                for (var i_1 = 0; i_1 < projectedViews.length; i_1++) {\n                    var projectedView = projectedViews[i_1];\n                    projectedView.state |= 32 /* CheckProjectedView */;\n                    markParentViewsForCheckProjectedViews(projectedView, view);\n                }\n            }\n        }\n        else if ((nodeDef.childFlags & 4 /* ProjectedTemplate */) === 0) {\n            // a parent with leafs\n            // no child is a component,\n            // then skip the children\n            i += nodeDef.childCount;\n        }\n    }\n}\nfunction checkAndUpdateNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    switch (nodeDef.flags & 201347067 /* Types */) {\n        case 1 /* TypeElement */:\n            return checkAndUpdateElementInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n        case 2 /* TypeText */:\n            return checkAndUpdateTextInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n        case 16384 /* TypeDirective */:\n            return checkAndUpdateDirectiveInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n        case 32 /* TypePureArray */:\n        case 64 /* TypePureObject */:\n        case 128 /* TypePurePipe */:\n            return checkAndUpdatePureExpressionInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n        default:\n            throw 'unreachable';\n    }\n}\nfunction checkAndUpdateNodeDynamic(view, nodeDef, values) {\n    switch (nodeDef.flags & 201347067 /* Types */) {\n        case 1 /* TypeElement */:\n            return checkAndUpdateElementDynamic(view, nodeDef, values);\n        case 2 /* TypeText */:\n            return checkAndUpdateTextDynamic(view, nodeDef, values);\n        case 16384 /* TypeDirective */:\n            return checkAndUpdateDirectiveDynamic(view, nodeDef, values);\n        case 32 /* TypePureArray */:\n        case 64 /* TypePureObject */:\n        case 128 /* TypePurePipe */:\n            return checkAndUpdatePureExpressionDynamic(view, nodeDef, values);\n        default:\n            throw 'unreachable';\n    }\n}\nfunction checkNoChangesNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    if (argStyle === 0 /* Inline */) {\n        checkNoChangesNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    }\n    else {\n        checkNoChangesNodeDynamic(view, nodeDef, v0);\n    }\n    // Returning false is ok here as we would have thrown in case of a change.\n    return false;\n}\nfunction checkNoChangesNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var bindLen = nodeDef.bindings.length;\n    if (bindLen > 0)\n        checkBindingNoChanges(view, nodeDef, 0, v0);\n    if (bindLen > 1)\n        checkBindingNoChanges(view, nodeDef, 1, v1);\n    if (bindLen > 2)\n        checkBindingNoChanges(view, nodeDef, 2, v2);\n    if (bindLen > 3)\n        checkBindingNoChanges(view, nodeDef, 3, v3);\n    if (bindLen > 4)\n        checkBindingNoChanges(view, nodeDef, 4, v4);\n    if (bindLen > 5)\n        checkBindingNoChanges(view, nodeDef, 5, v5);\n    if (bindLen > 6)\n        checkBindingNoChanges(view, nodeDef, 6, v6);\n    if (bindLen > 7)\n        checkBindingNoChanges(view, nodeDef, 7, v7);\n    if (bindLen > 8)\n        checkBindingNoChanges(view, nodeDef, 8, v8);\n    if (bindLen > 9)\n        checkBindingNoChanges(view, nodeDef, 9, v9);\n}\nfunction checkNoChangesNodeDynamic(view, nodeDef, values) {\n    for (var i = 0; i < values.length; i++) {\n        checkBindingNoChanges(view, nodeDef, i, values[i]);\n    }\n}\n/**\n * Workaround https://github.com/angular/tsickle/issues/497\n * @suppress {misplacedTypeAnnotation}\n */\nfunction checkNoChangesQuery(view, nodeDef) {\n    var queryList = asQueryList(view, nodeDef.nodeIndex);\n    if (queryList.dirty) {\n        throw expressionChangedAfterItHasBeenCheckedError(Services.createDebugContext(view, nodeDef.nodeIndex), \"Query \" + nodeDef.query.id + \" not dirty\", \"Query \" + nodeDef.query.id + \" dirty\", (view.state & 1 /* BeforeFirstCheck */) !== 0);\n    }\n}\nfunction destroyView(view) {\n    if (view.state & 128 /* Destroyed */) {\n        return;\n    }\n    execEmbeddedViewsAction(view, ViewAction.Destroy);\n    execComponentViewsAction(view, ViewAction.Destroy);\n    callLifecycleHooksChildrenFirst(view, 131072 /* OnDestroy */);\n    if (view.disposables) {\n        for (var i = 0; i < view.disposables.length; i++) {\n            view.disposables[i]();\n        }\n    }\n    detachProjectedView(view);\n    if (view.renderer.destroyNode) {\n        destroyViewNodes(view);\n    }\n    if (isComponentView(view)) {\n        view.renderer.destroy();\n    }\n    view.state |= 128 /* Destroyed */;\n}\nfunction destroyViewNodes(view) {\n    var len = view.def.nodes.length;\n    for (var i = 0; i < len; i++) {\n        var def = view.def.nodes[i];\n        if (def.flags & 1 /* TypeElement */) {\n            view.renderer.destroyNode(asElementData(view, i).renderElement);\n        }\n        else if (def.flags & 2 /* TypeText */) {\n            view.renderer.destroyNode(asTextData(view, i).renderText);\n        }\n        else if (def.flags & 67108864 /* TypeContentQuery */ || def.flags & 134217728 /* TypeViewQuery */) {\n            asQueryList(view, i).destroy();\n        }\n    }\n}\nvar ViewAction;\n(function (ViewAction) {\n    ViewAction[ViewAction[\"CreateViewNodes\"] = 0] = \"CreateViewNodes\";\n    ViewAction[ViewAction[\"CheckNoChanges\"] = 1] = \"CheckNoChanges\";\n    ViewAction[ViewAction[\"CheckNoChangesProjectedViews\"] = 2] = \"CheckNoChangesProjectedViews\";\n    ViewAction[ViewAction[\"CheckAndUpdate\"] = 3] = \"CheckAndUpdate\";\n    ViewAction[ViewAction[\"CheckAndUpdateProjectedViews\"] = 4] = \"CheckAndUpdateProjectedViews\";\n    ViewAction[ViewAction[\"Destroy\"] = 5] = \"Destroy\";\n})(ViewAction || (ViewAction = {}));\nfunction execComponentViewsAction(view, action) {\n    var def = view.def;\n    if (!(def.nodeFlags & 33554432 /* ComponentView */)) {\n        return;\n    }\n    for (var i = 0; i < def.nodes.length; i++) {\n        var nodeDef = def.nodes[i];\n        if (nodeDef.flags & 33554432 /* ComponentView */) {\n            // a leaf\n            callViewAction(asElementData(view, i).componentView, action);\n        }\n        else if ((nodeDef.childFlags & 33554432 /* ComponentView */) === 0) {\n            // a parent with leafs\n            // no child is a component,\n            // then skip the children\n            i += nodeDef.childCount;\n        }\n    }\n}\nfunction execEmbeddedViewsAction(view, action) {\n    var def = view.def;\n    if (!(def.nodeFlags & 16777216 /* EmbeddedViews */)) {\n        return;\n    }\n    for (var i = 0; i < def.nodes.length; i++) {\n        var nodeDef = def.nodes[i];\n        if (nodeDef.flags & 16777216 /* EmbeddedViews */) {\n            // a leaf\n            var embeddedViews = asElementData(view, i).viewContainer._embeddedViews;\n            for (var k = 0; k < embeddedViews.length; k++) {\n                callViewAction(embeddedViews[k], action);\n            }\n        }\n        else if ((nodeDef.childFlags & 16777216 /* EmbeddedViews */) === 0) {\n            // a parent with leafs\n            // no child is a component,\n            // then skip the children\n            i += nodeDef.childCount;\n        }\n    }\n}\nfunction callViewAction(view, action) {\n    var viewState = view.state;\n    switch (action) {\n        case ViewAction.CheckNoChanges:\n            if ((viewState & 128 /* Destroyed */) === 0) {\n                if ((viewState & 12 /* CatDetectChanges */) === 12 /* CatDetectChanges */) {\n                    checkNoChangesView(view);\n                }\n                else if (viewState & 64 /* CheckProjectedViews */) {\n                    execProjectedViewsAction(view, ViewAction.CheckNoChangesProjectedViews);\n                }\n            }\n            break;\n        case ViewAction.CheckNoChangesProjectedViews:\n            if ((viewState & 128 /* Destroyed */) === 0) {\n                if (viewState & 32 /* CheckProjectedView */) {\n                    checkNoChangesView(view);\n                }\n                else if (viewState & 64 /* CheckProjectedViews */) {\n                    execProjectedViewsAction(view, action);\n                }\n            }\n            break;\n        case ViewAction.CheckAndUpdate:\n            if ((viewState & 128 /* Destroyed */) === 0) {\n                if ((viewState & 12 /* CatDetectChanges */) === 12 /* CatDetectChanges */) {\n                    checkAndUpdateView(view);\n                }\n                else if (viewState & 64 /* CheckProjectedViews */) {\n                    execProjectedViewsAction(view, ViewAction.CheckAndUpdateProjectedViews);\n                }\n            }\n            break;\n        case ViewAction.CheckAndUpdateProjectedViews:\n            if ((viewState & 128 /* Destroyed */) === 0) {\n                if (viewState & 32 /* CheckProjectedView */) {\n                    checkAndUpdateView(view);\n                }\n                else if (viewState & 64 /* CheckProjectedViews */) {\n                    execProjectedViewsAction(view, action);\n                }\n            }\n            break;\n        case ViewAction.Destroy:\n            // Note: destroyView recurses over all views,\n            // so we don't need to special case projected views here.\n            destroyView(view);\n            break;\n        case ViewAction.CreateViewNodes:\n            createViewNodes(view);\n            break;\n    }\n}\nfunction execProjectedViewsAction(view, action) {\n    execEmbeddedViewsAction(view, action);\n    execComponentViewsAction(view, action);\n}\nfunction execQueriesAction(view, queryFlags, staticDynamicQueryFlag, checkType) {\n    if (!(view.def.nodeFlags & queryFlags) || !(view.def.nodeFlags & staticDynamicQueryFlag)) {\n        return;\n    }\n    var nodeCount = view.def.nodes.length;\n    for (var i = 0; i < nodeCount; i++) {\n        var nodeDef = view.def.nodes[i];\n        if ((nodeDef.flags & queryFlags) && (nodeDef.flags & staticDynamicQueryFlag)) {\n            Services.setCurrentNode(view, nodeDef.nodeIndex);\n            switch (checkType) {\n                case 0 /* CheckAndUpdate */:\n                    checkAndUpdateQuery(view, nodeDef);\n                    break;\n                case 1 /* CheckNoChanges */:\n                    checkNoChangesQuery(view, nodeDef);\n                    break;\n            }\n        }\n        if (!(nodeDef.childFlags & queryFlags) || !(nodeDef.childFlags & staticDynamicQueryFlag)) {\n            // no child has a matching query\n            // then skip the children\n            i += nodeDef.childCount;\n        }\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar initialized = false;\nfunction initServicesIfNeeded() {\n    if (initialized) {\n        return;\n    }\n    initialized = true;\n    var services = isDevMode() ? createDebugServices() : createProdServices();\n    Services.setCurrentNode = services.setCurrentNode;\n    Services.createRootView = services.createRootView;\n    Services.createEmbeddedView = services.createEmbeddedView;\n    Services.createComponentView = services.createComponentView;\n    Services.createNgModuleRef = services.createNgModuleRef;\n    Services.overrideProvider = services.overrideProvider;\n    Services.overrideComponentView = services.overrideComponentView;\n    Services.clearOverrides = services.clearOverrides;\n    Services.checkAndUpdateView = services.checkAndUpdateView;\n    Services.checkNoChangesView = services.checkNoChangesView;\n    Services.destroyView = services.destroyView;\n    Services.resolveDep = resolveDep;\n    Services.createDebugContext = services.createDebugContext;\n    Services.handleEvent = services.handleEvent;\n    Services.updateDirectives = services.updateDirectives;\n    Services.updateRenderer = services.updateRenderer;\n    Services.dirtyParentQueries = dirtyParentQueries;\n}\nfunction createProdServices() {\n    return {\n        setCurrentNode: function () { },\n        createRootView: createProdRootView,\n        createEmbeddedView: createEmbeddedView,\n        createComponentView: createComponentView,\n        createNgModuleRef: createNgModuleRef,\n        overrideProvider: NOOP,\n        overrideComponentView: NOOP,\n        clearOverrides: NOOP,\n        checkAndUpdateView: checkAndUpdateView,\n        checkNoChangesView: checkNoChangesView,\n        destroyView: destroyView,\n        createDebugContext: function (view, nodeIndex) { return new DebugContext_(view, nodeIndex); },\n        handleEvent: function (view, nodeIndex, eventName, event) {\n            return view.def.handleEvent(view, nodeIndex, eventName, event);\n        },\n        updateDirectives: function (view, checkType) {\n            return view.def.updateDirectives(checkType === 0 /* CheckAndUpdate */ ? prodCheckAndUpdateNode :\n                prodCheckNoChangesNode, view);\n        },\n        updateRenderer: function (view, checkType) {\n            return view.def.updateRenderer(checkType === 0 /* CheckAndUpdate */ ? prodCheckAndUpdateNode :\n                prodCheckNoChangesNode, view);\n        },\n    };\n}\nfunction createDebugServices() {\n    return {\n        setCurrentNode: debugSetCurrentNode,\n        createRootView: debugCreateRootView,\n        createEmbeddedView: debugCreateEmbeddedView,\n        createComponentView: debugCreateComponentView,\n        createNgModuleRef: debugCreateNgModuleRef,\n        overrideProvider: debugOverrideProvider,\n        overrideComponentView: debugOverrideComponentView,\n        clearOverrides: debugClearOverrides,\n        checkAndUpdateView: debugCheckAndUpdateView,\n        checkNoChangesView: debugCheckNoChangesView,\n        destroyView: debugDestroyView,\n        createDebugContext: function (view, nodeIndex) { return new DebugContext_(view, nodeIndex); },\n        handleEvent: debugHandleEvent,\n        updateDirectives: debugUpdateDirectives,\n        updateRenderer: debugUpdateRenderer,\n    };\n}\nfunction createProdRootView(elInjector, projectableNodes, rootSelectorOrNode, def, ngModule, context) {\n    var rendererFactory = ngModule.injector.get(RendererFactory2);\n    return createRootView(createRootData(elInjector, ngModule, rendererFactory, projectableNodes, rootSelectorOrNode), def, context);\n}\nfunction debugCreateRootView(elInjector, projectableNodes, rootSelectorOrNode, def, ngModule, context) {\n    var rendererFactory = ngModule.injector.get(RendererFactory2);\n    var root = createRootData(elInjector, ngModule, new DebugRendererFactory2(rendererFactory), projectableNodes, rootSelectorOrNode);\n    var defWithOverride = applyProviderOverridesToView(def);\n    return callWithDebugContext(DebugAction.create, createRootView, null, [root, defWithOverride, context]);\n}\nfunction createRootData(elInjector, ngModule, rendererFactory, projectableNodes, rootSelectorOrNode) {\n    var sanitizer = ngModule.injector.get(Sanitizer);\n    var errorHandler = ngModule.injector.get(ErrorHandler);\n    var renderer = rendererFactory.createRenderer(null, null);\n    return {\n        ngModule: ngModule,\n        injector: elInjector, projectableNodes: projectableNodes,\n        selectorOrNode: rootSelectorOrNode, sanitizer: sanitizer, rendererFactory: rendererFactory, renderer: renderer, errorHandler: errorHandler\n    };\n}\nfunction debugCreateEmbeddedView(parentView, anchorDef, viewDef$$1, context) {\n    var defWithOverride = applyProviderOverridesToView(viewDef$$1);\n    return callWithDebugContext(DebugAction.create, createEmbeddedView, null, [parentView, anchorDef, defWithOverride, context]);\n}\nfunction debugCreateComponentView(parentView, nodeDef, viewDef$$1, hostElement) {\n    var overrideComponentView = viewDefOverrides.get(nodeDef.element.componentProvider.provider.token);\n    if (overrideComponentView) {\n        viewDef$$1 = overrideComponentView;\n    }\n    else {\n        viewDef$$1 = applyProviderOverridesToView(viewDef$$1);\n    }\n    return callWithDebugContext(DebugAction.create, createComponentView, null, [parentView, nodeDef, viewDef$$1, hostElement]);\n}\nfunction debugCreateNgModuleRef(moduleType, parentInjector, bootstrapComponents, def) {\n    var defWithOverride = applyProviderOverridesToNgModule(def);\n    return createNgModuleRef(moduleType, parentInjector, bootstrapComponents, defWithOverride);\n}\nvar providerOverrides = new Map();\nvar providerOverridesWithScope = new Map();\nvar viewDefOverrides = new Map();\nfunction debugOverrideProvider(override) {\n    providerOverrides.set(override.token, override);\n    if (typeof override.token === 'function' && override.token.ngInjectableDef &&\n        typeof override.token.ngInjectableDef.providedIn === 'function') {\n        providerOverridesWithScope.set(override.token, override);\n    }\n}\nfunction debugOverrideComponentView(comp, compFactory) {\n    var hostViewDef = resolveDefinition(getComponentViewDefinitionFactory(compFactory));\n    var compViewDef = resolveDefinition((hostViewDef.nodes[0].element.componentView));\n    viewDefOverrides.set(comp, compViewDef);\n}\nfunction debugClearOverrides() {\n    providerOverrides.clear();\n    providerOverridesWithScope.clear();\n    viewDefOverrides.clear();\n}\n// Notes about the algorithm:\n// 1) Locate the providers of an element and check if one of them was overwritten\n// 2) Change the providers of that element\n//\n// We only create new datastructures if we need to, to keep perf impact\n// reasonable.\nfunction applyProviderOverridesToView(def) {\n    if (providerOverrides.size === 0) {\n        return def;\n    }\n    var elementIndicesWithOverwrittenProviders = findElementIndicesWithOverwrittenProviders(def);\n    if (elementIndicesWithOverwrittenProviders.length === 0) {\n        return def;\n    }\n    // clone the whole view definition,\n    // as it maintains references between the nodes that are hard to update.\n    def = def.factory(function () { return NOOP; });\n    for (var i = 0; i < elementIndicesWithOverwrittenProviders.length; i++) {\n        applyProviderOverridesToElement(def, elementIndicesWithOverwrittenProviders[i]);\n    }\n    return def;\n    function findElementIndicesWithOverwrittenProviders(def) {\n        var elIndicesWithOverwrittenProviders = [];\n        var lastElementDef = null;\n        for (var i = 0; i < def.nodes.length; i++) {\n            var nodeDef = def.nodes[i];\n            if (nodeDef.flags & 1 /* TypeElement */) {\n                lastElementDef = nodeDef;\n            }\n            if (lastElementDef && nodeDef.flags & 3840 /* CatProviderNoDirective */ &&\n                providerOverrides.has(nodeDef.provider.token)) {\n                elIndicesWithOverwrittenProviders.push(lastElementDef.nodeIndex);\n                lastElementDef = null;\n            }\n        }\n        return elIndicesWithOverwrittenProviders;\n    }\n    function applyProviderOverridesToElement(viewDef$$1, elIndex) {\n        for (var i = elIndex + 1; i < viewDef$$1.nodes.length; i++) {\n            var nodeDef = viewDef$$1.nodes[i];\n            if (nodeDef.flags & 1 /* TypeElement */) {\n                // stop at the next element\n                return;\n            }\n            if (nodeDef.flags & 3840 /* CatProviderNoDirective */) {\n                var provider = (nodeDef.provider);\n                var override = providerOverrides.get(provider.token);\n                if (override) {\n                    nodeDef.flags = (nodeDef.flags & ~3840 /* CatProviderNoDirective */) | override.flags;\n                    provider.deps = splitDepsDsl(override.deps);\n                    provider.value = override.value;\n                }\n            }\n        }\n    }\n}\n// Notes about the algorithm:\n// We only create new datastructures if we need to, to keep perf impact\n// reasonable.\nfunction applyProviderOverridesToNgModule(def) {\n    var _a = calcHasOverrides(def), hasOverrides = _a.hasOverrides, hasDeprecatedOverrides = _a.hasDeprecatedOverrides;\n    if (!hasOverrides) {\n        return def;\n    }\n    // clone the whole view definition,\n    // as it maintains references between the nodes that are hard to update.\n    def = def.factory(function () { return NOOP; });\n    applyProviderOverrides(def);\n    return def;\n    function calcHasOverrides(def) {\n        var hasOverrides = false;\n        var hasDeprecatedOverrides = false;\n        if (providerOverrides.size === 0) {\n            return { hasOverrides: hasOverrides, hasDeprecatedOverrides: hasDeprecatedOverrides };\n        }\n        def.providers.forEach(function (node) {\n            var override = providerOverrides.get(node.token);\n            if ((node.flags & 3840 /* CatProviderNoDirective */) && override) {\n                hasOverrides = true;\n                hasDeprecatedOverrides = hasDeprecatedOverrides || override.deprecatedBehavior;\n            }\n        });\n        def.modules.forEach(function (module) {\n            providerOverridesWithScope.forEach(function (override, token) {\n                if (token.ngInjectableDef.providedIn === module) {\n                    hasOverrides = true;\n                    hasDeprecatedOverrides = hasDeprecatedOverrides || override.deprecatedBehavior;\n                }\n            });\n        });\n        return { hasOverrides: hasOverrides, hasDeprecatedOverrides: hasDeprecatedOverrides };\n    }\n    function applyProviderOverrides(def) {\n        for (var i = 0; i < def.providers.length; i++) {\n            var provider = def.providers[i];\n            if (hasDeprecatedOverrides) {\n                // We had a bug where me made\n                // all providers lazy. Keep this logic behind a flag\n                // for migrating existing users.\n                provider.flags |= 4096 /* LazyProvider */;\n            }\n            var override = providerOverrides.get(provider.token);\n            if (override) {\n                provider.flags = (provider.flags & ~3840 /* CatProviderNoDirective */) | override.flags;\n                provider.deps = splitDepsDsl(override.deps);\n                provider.value = override.value;\n            }\n        }\n        if (providerOverridesWithScope.size > 0) {\n            var moduleSet_1 = new Set(def.modules);\n            providerOverridesWithScope.forEach(function (override, token) {\n                if (moduleSet_1.has(token.ngInjectableDef.providedIn)) {\n                    var provider = {\n                        token: token,\n                        flags: override.flags | (hasDeprecatedOverrides ? 4096 /* LazyProvider */ : 0 /* None */),\n                        deps: splitDepsDsl(override.deps),\n                        value: override.value,\n                        index: def.providers.length,\n                    };\n                    def.providers.push(provider);\n                    def.providersByKey[tokenKey(token)] = provider;\n                }\n            });\n        }\n    }\n}\nfunction prodCheckAndUpdateNode(view, checkIndex, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var nodeDef = view.def.nodes[checkIndex];\n    checkAndUpdateNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    return (nodeDef.flags & 224 /* CatPureExpression */) ?\n        asPureExpressionData(view, checkIndex).value :\n        undefined;\n}\nfunction prodCheckNoChangesNode(view, checkIndex, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var nodeDef = view.def.nodes[checkIndex];\n    checkNoChangesNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    return (nodeDef.flags & 224 /* CatPureExpression */) ?\n        asPureExpressionData(view, checkIndex).value :\n        undefined;\n}\nfunction debugCheckAndUpdateView(view) {\n    return callWithDebugContext(DebugAction.detectChanges, checkAndUpdateView, null, [view]);\n}\nfunction debugCheckNoChangesView(view) {\n    return callWithDebugContext(DebugAction.checkNoChanges, checkNoChangesView, null, [view]);\n}\nfunction debugDestroyView(view) {\n    return callWithDebugContext(DebugAction.destroy, destroyView, null, [view]);\n}\nvar DebugAction;\n(function (DebugAction) {\n    DebugAction[DebugAction[\"create\"] = 0] = \"create\";\n    DebugAction[DebugAction[\"detectChanges\"] = 1] = \"detectChanges\";\n    DebugAction[DebugAction[\"checkNoChanges\"] = 2] = \"checkNoChanges\";\n    DebugAction[DebugAction[\"destroy\"] = 3] = \"destroy\";\n    DebugAction[DebugAction[\"handleEvent\"] = 4] = \"handleEvent\";\n})(DebugAction || (DebugAction = {}));\nvar _currentAction;\nvar _currentView;\nvar _currentNodeIndex;\nfunction debugSetCurrentNode(view, nodeIndex) {\n    _currentView = view;\n    _currentNodeIndex = nodeIndex;\n}\nfunction debugHandleEvent(view, nodeIndex, eventName, event) {\n    debugSetCurrentNode(view, nodeIndex);\n    return callWithDebugContext(DebugAction.handleEvent, view.def.handleEvent, null, [view, nodeIndex, eventName, event]);\n}\nfunction debugUpdateDirectives(view, checkType) {\n    if (view.state & 128 /* Destroyed */) {\n        throw viewDestroyedError(DebugAction[_currentAction]);\n    }\n    debugSetCurrentNode(view, nextDirectiveWithBinding(view, 0));\n    return view.def.updateDirectives(debugCheckDirectivesFn, view);\n    function debugCheckDirectivesFn(view, nodeIndex, argStyle) {\n        var values = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            values[_i - 3] = arguments[_i];\n        }\n        var nodeDef = view.def.nodes[nodeIndex];\n        if (checkType === 0 /* CheckAndUpdate */) {\n            debugCheckAndUpdateNode(view, nodeDef, argStyle, values);\n        }\n        else {\n            debugCheckNoChangesNode(view, nodeDef, argStyle, values);\n        }\n        if (nodeDef.flags & 16384 /* TypeDirective */) {\n            debugSetCurrentNode(view, nextDirectiveWithBinding(view, nodeIndex));\n        }\n        return (nodeDef.flags & 224 /* CatPureExpression */) ?\n            asPureExpressionData(view, nodeDef.nodeIndex).value :\n            undefined;\n    }\n}\nfunction debugUpdateRenderer(view, checkType) {\n    if (view.state & 128 /* Destroyed */) {\n        throw viewDestroyedError(DebugAction[_currentAction]);\n    }\n    debugSetCurrentNode(view, nextRenderNodeWithBinding(view, 0));\n    return view.def.updateRenderer(debugCheckRenderNodeFn, view);\n    function debugCheckRenderNodeFn(view, nodeIndex, argStyle) {\n        var values = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            values[_i - 3] = arguments[_i];\n        }\n        var nodeDef = view.def.nodes[nodeIndex];\n        if (checkType === 0 /* CheckAndUpdate */) {\n            debugCheckAndUpdateNode(view, nodeDef, argStyle, values);\n        }\n        else {\n            debugCheckNoChangesNode(view, nodeDef, argStyle, values);\n        }\n        if (nodeDef.flags & 3 /* CatRenderNode */) {\n            debugSetCurrentNode(view, nextRenderNodeWithBinding(view, nodeIndex));\n        }\n        return (nodeDef.flags & 224 /* CatPureExpression */) ?\n            asPureExpressionData(view, nodeDef.nodeIndex).value :\n            undefined;\n    }\n}\nfunction debugCheckAndUpdateNode(view, nodeDef, argStyle, givenValues) {\n    var changed = checkAndUpdateNode.apply(void 0, __spread([view, nodeDef, argStyle], givenValues));\n    if (changed) {\n        var values = argStyle === 1 /* Dynamic */ ? givenValues[0] : givenValues;\n        if (nodeDef.flags & 16384 /* TypeDirective */) {\n            var bindingValues = {};\n            for (var i = 0; i < nodeDef.bindings.length; i++) {\n                var binding = nodeDef.bindings[i];\n                var value = values[i];\n                if (binding.flags & 8 /* TypeProperty */) {\n                    bindingValues[normalizeDebugBindingName((binding.nonMinifiedName))] =\n                        normalizeDebugBindingValue(value);\n                }\n            }\n            var elDef = (nodeDef.parent);\n            var el = asElementData(view, elDef.nodeIndex).renderElement;\n            if (!elDef.element.name) {\n                // a comment.\n                view.renderer.setValue(el, \"bindings=\" + JSON.stringify(bindingValues, null, 2));\n            }\n            else {\n                // a regular element.\n                for (var attr in bindingValues) {\n                    var value = bindingValues[attr];\n                    if (value != null) {\n                        view.renderer.setAttribute(el, attr, value);\n                    }\n                    else {\n                        view.renderer.removeAttribute(el, attr);\n                    }\n                }\n            }\n        }\n    }\n}\nfunction debugCheckNoChangesNode(view, nodeDef, argStyle, values) {\n    checkNoChangesNode.apply(void 0, __spread([view, nodeDef, argStyle], values));\n}\nfunction normalizeDebugBindingName(name) {\n    // Attribute names with `$` (eg `x-y$`) are valid per spec, but unsupported by some browsers\n    name = camelCaseToDashCase(name.replace(/[$@]/g, '_'));\n    return \"ng-reflect-\" + name;\n}\nvar CAMEL_CASE_REGEXP = /([A-Z])/g;\nfunction camelCaseToDashCase(input) {\n    return input.replace(CAMEL_CASE_REGEXP, function () {\n        var m = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            m[_i] = arguments[_i];\n        }\n        return '-' + m[1].toLowerCase();\n    });\n}\nfunction normalizeDebugBindingValue(value) {\n    try {\n        // Limit the size of the value as otherwise the DOM just gets polluted.\n        return value != null ? value.toString().slice(0, 30) : value;\n    }\n    catch (e) {\n        return '[ERROR] Exception while trying to serialize the value';\n    }\n}\nfunction nextDirectiveWithBinding(view, nodeIndex) {\n    for (var i = nodeIndex; i < view.def.nodes.length; i++) {\n        var nodeDef = view.def.nodes[i];\n        if (nodeDef.flags & 16384 /* TypeDirective */ && nodeDef.bindings && nodeDef.bindings.length) {\n            return i;\n        }\n    }\n    return null;\n}\nfunction nextRenderNodeWithBinding(view, nodeIndex) {\n    for (var i = nodeIndex; i < view.def.nodes.length; i++) {\n        var nodeDef = view.def.nodes[i];\n        if ((nodeDef.flags & 3 /* CatRenderNode */) && nodeDef.bindings && nodeDef.bindings.length) {\n            return i;\n        }\n    }\n    return null;\n}\nvar DebugContext_ = /** @class */ (function () {\n    function DebugContext_(view, nodeIndex) {\n        this.view = view;\n        this.nodeIndex = nodeIndex;\n        if (nodeIndex == null) {\n            this.nodeIndex = nodeIndex = 0;\n        }\n        this.nodeDef = view.def.nodes[nodeIndex];\n        var elDef = this.nodeDef;\n        var elView = view;\n        while (elDef && (elDef.flags & 1 /* TypeElement */) === 0) {\n            elDef = (elDef.parent);\n        }\n        if (!elDef) {\n            while (!elDef && elView) {\n                elDef = (viewParentEl(elView));\n                elView = (elView.parent);\n            }\n        }\n        this.elDef = elDef;\n        this.elView = elView;\n    }\n    Object.defineProperty(DebugContext_.prototype, \"elOrCompView\", {\n        get: function () {\n            // Has to be done lazily as we use the DebugContext also during creation of elements...\n            return asElementData(this.elView, this.elDef.nodeIndex).componentView || this.view;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"injector\", {\n        get: function () { return createInjector$1(this.elView, this.elDef); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"component\", {\n        get: function () { return this.elOrCompView.component; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"context\", {\n        get: function () { return this.elOrCompView.context; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"providerTokens\", {\n        get: function () {\n            var tokens = [];\n            if (this.elDef) {\n                for (var i = this.elDef.nodeIndex + 1; i <= this.elDef.nodeIndex + this.elDef.childCount; i++) {\n                    var childDef = this.elView.def.nodes[i];\n                    if (childDef.flags & 20224 /* CatProvider */) {\n                        tokens.push(childDef.provider.token);\n                    }\n                    i += childDef.childCount;\n                }\n            }\n            return tokens;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"references\", {\n        get: function () {\n            var references = {};\n            if (this.elDef) {\n                collectReferences(this.elView, this.elDef, references);\n                for (var i = this.elDef.nodeIndex + 1; i <= this.elDef.nodeIndex + this.elDef.childCount; i++) {\n                    var childDef = this.elView.def.nodes[i];\n                    if (childDef.flags & 20224 /* CatProvider */) {\n                        collectReferences(this.elView, childDef, references);\n                    }\n                    i += childDef.childCount;\n                }\n            }\n            return references;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"componentRenderElement\", {\n        get: function () {\n            var elData = findHostElement(this.elOrCompView);\n            return elData ? elData.renderElement : undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"renderNode\", {\n        get: function () {\n            return this.nodeDef.flags & 2 /* TypeText */ ? renderNode(this.view, this.nodeDef) :\n                renderNode(this.elView, this.elDef);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DebugContext_.prototype.logError = function (console) {\n        var values = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            values[_i - 1] = arguments[_i];\n        }\n        var logViewDef;\n        var logNodeIndex;\n        if (this.nodeDef.flags & 2 /* TypeText */) {\n            logViewDef = this.view.def;\n            logNodeIndex = this.nodeDef.nodeIndex;\n        }\n        else {\n            logViewDef = this.elView.def;\n            logNodeIndex = this.elDef.nodeIndex;\n        }\n        // Note: we only generate a log function for text and element nodes\n        // to make the generated code as small as possible.\n        var renderNodeIndex = getRenderNodeIndex(logViewDef, logNodeIndex);\n        var currRenderNodeIndex = -1;\n        var nodeLogger = function () {\n            currRenderNodeIndex++;\n            if (currRenderNodeIndex === renderNodeIndex) {\n                return (_a = console.error).bind.apply(_a, __spread([console], values));\n            }\n            else {\n                return NOOP;\n            }\n            var _a;\n        };\n        logViewDef.factory(nodeLogger);\n        if (currRenderNodeIndex < renderNodeIndex) {\n            console.error('Illegal state: the ViewDefinitionFactory did not call the logger!');\n            console.error.apply(console, __spread(values));\n        }\n    };\n    return DebugContext_;\n}());\nfunction getRenderNodeIndex(viewDef$$1, nodeIndex) {\n    var renderNodeIndex = -1;\n    for (var i = 0; i <= nodeIndex; i++) {\n        var nodeDef = viewDef$$1.nodes[i];\n        if (nodeDef.flags & 3 /* CatRenderNode */) {\n            renderNodeIndex++;\n        }\n    }\n    return renderNodeIndex;\n}\nfunction findHostElement(view) {\n    while (view && !isComponentView(view)) {\n        view = (view.parent);\n    }\n    if (view.parent) {\n        return asElementData(view.parent, viewParentEl(view).nodeIndex);\n    }\n    return null;\n}\nfunction collectReferences(view, nodeDef, references) {\n    for (var refName in nodeDef.references) {\n        references[refName] = getQueryValue(view, nodeDef, nodeDef.references[refName]);\n    }\n}\nfunction callWithDebugContext(action, fn, self, args) {\n    var oldAction = _currentAction;\n    var oldView = _currentView;\n    var oldNodeIndex = _currentNodeIndex;\n    try {\n        _currentAction = action;\n        var result = fn.apply(self, args);\n        _currentView = oldView;\n        _currentNodeIndex = oldNodeIndex;\n        _currentAction = oldAction;\n        return result;\n    }\n    catch (e) {\n        if (isViewDebugError(e) || !_currentView) {\n            throw e;\n        }\n        throw viewWrappedDebugError(e, (getCurrentDebugContext()));\n    }\n}\nfunction getCurrentDebugContext() {\n    return _currentView ? new DebugContext_(_currentView, _currentNodeIndex) : null;\n}\nvar DebugRendererFactory2 = /** @class */ (function () {\n    function DebugRendererFactory2(delegate) {\n        this.delegate = delegate;\n    }\n    DebugRendererFactory2.prototype.createRenderer = function (element, renderData) {\n        return new DebugRenderer2(this.delegate.createRenderer(element, renderData));\n    };\n    DebugRendererFactory2.prototype.begin = function () {\n        if (this.delegate.begin) {\n            this.delegate.begin();\n        }\n    };\n    DebugRendererFactory2.prototype.end = function () {\n        if (this.delegate.end) {\n            this.delegate.end();\n        }\n    };\n    DebugRendererFactory2.prototype.whenRenderingDone = function () {\n        if (this.delegate.whenRenderingDone) {\n            return this.delegate.whenRenderingDone();\n        }\n        return Promise.resolve(null);\n    };\n    return DebugRendererFactory2;\n}());\nvar DebugRenderer2 = /** @class */ (function () {\n    function DebugRenderer2(delegate) {\n        this.delegate = delegate;\n        this.data = this.delegate.data;\n    }\n    DebugRenderer2.prototype.destroyNode = function (node) {\n        removeDebugNodeFromIndex((getDebugNode(node)));\n        if (this.delegate.destroyNode) {\n            this.delegate.destroyNode(node);\n        }\n    };\n    DebugRenderer2.prototype.destroy = function () { this.delegate.destroy(); };\n    DebugRenderer2.prototype.createElement = function (name, namespace) {\n        var el = this.delegate.createElement(name, namespace);\n        var debugCtx = getCurrentDebugContext();\n        if (debugCtx) {\n            var debugEl = new DebugElement(el, null, debugCtx);\n            debugEl.name = name;\n            indexDebugNode(debugEl);\n        }\n        return el;\n    };\n    DebugRenderer2.prototype.createComment = function (value) {\n        var comment = this.delegate.createComment(value);\n        var debugCtx = getCurrentDebugContext();\n        if (debugCtx) {\n            indexDebugNode(new DebugNode(comment, null, debugCtx));\n        }\n        return comment;\n    };\n    DebugRenderer2.prototype.createText = function (value) {\n        var text = this.delegate.createText(value);\n        var debugCtx = getCurrentDebugContext();\n        if (debugCtx) {\n            indexDebugNode(new DebugNode(text, null, debugCtx));\n        }\n        return text;\n    };\n    DebugRenderer2.prototype.appendChild = function (parent, newChild) {\n        var debugEl = getDebugNode(parent);\n        var debugChildEl = getDebugNode(newChild);\n        if (debugEl && debugChildEl && debugEl instanceof DebugElement) {\n            debugEl.addChild(debugChildEl);\n        }\n        this.delegate.appendChild(parent, newChild);\n    };\n    DebugRenderer2.prototype.insertBefore = function (parent, newChild, refChild) {\n        var debugEl = getDebugNode(parent);\n        var debugChildEl = getDebugNode(newChild);\n        var debugRefEl = (getDebugNode(refChild));\n        if (debugEl && debugChildEl && debugEl instanceof DebugElement) {\n            debugEl.insertBefore(debugRefEl, debugChildEl);\n        }\n        this.delegate.insertBefore(parent, newChild, refChild);\n    };\n    DebugRenderer2.prototype.removeChild = function (parent, oldChild) {\n        var debugEl = getDebugNode(parent);\n        var debugChildEl = getDebugNode(oldChild);\n        if (debugEl && debugChildEl && debugEl instanceof DebugElement) {\n            debugEl.removeChild(debugChildEl);\n        }\n        this.delegate.removeChild(parent, oldChild);\n    };\n    DebugRenderer2.prototype.selectRootElement = function (selectorOrNode) {\n        var el = this.delegate.selectRootElement(selectorOrNode);\n        var debugCtx = getCurrentDebugContext();\n        if (debugCtx) {\n            indexDebugNode(new DebugElement(el, null, debugCtx));\n        }\n        return el;\n    };\n    DebugRenderer2.prototype.setAttribute = function (el, name, value, namespace) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            var fullName = namespace ? namespace + ':' + name : name;\n            debugEl.attributes[fullName] = value;\n        }\n        this.delegate.setAttribute(el, name, value, namespace);\n    };\n    DebugRenderer2.prototype.removeAttribute = function (el, name, namespace) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            var fullName = namespace ? namespace + ':' + name : name;\n            debugEl.attributes[fullName] = null;\n        }\n        this.delegate.removeAttribute(el, name, namespace);\n    };\n    DebugRenderer2.prototype.addClass = function (el, name) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            debugEl.classes[name] = true;\n        }\n        this.delegate.addClass(el, name);\n    };\n    DebugRenderer2.prototype.removeClass = function (el, name) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            debugEl.classes[name] = false;\n        }\n        this.delegate.removeClass(el, name);\n    };\n    DebugRenderer2.prototype.setStyle = function (el, style, value, flags) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            debugEl.styles[style] = value;\n        }\n        this.delegate.setStyle(el, style, value, flags);\n    };\n    DebugRenderer2.prototype.removeStyle = function (el, style, flags) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            debugEl.styles[style] = null;\n        }\n        this.delegate.removeStyle(el, style, flags);\n    };\n    DebugRenderer2.prototype.setProperty = function (el, name, value) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            debugEl.properties[name] = value;\n        }\n        this.delegate.setProperty(el, name, value);\n    };\n    DebugRenderer2.prototype.listen = function (target, eventName, callback) {\n        if (typeof target !== 'string') {\n            var debugEl = getDebugNode(target);\n            if (debugEl) {\n                debugEl.listeners.push(new EventListener(eventName, callback));\n            }\n        }\n        return this.delegate.listen(target, eventName, callback);\n    };\n    DebugRenderer2.prototype.parentNode = function (node) { return this.delegate.parentNode(node); };\n    DebugRenderer2.prototype.nextSibling = function (node) { return this.delegate.nextSibling(node); };\n    DebugRenderer2.prototype.setValue = function (node, value) { return this.delegate.setValue(node, value); };\n    return DebugRenderer2;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\n\n// Attention: this function is called as top level function.\n// Putting any logic in here will destroy closure tree shaking!\n\nvar NgModuleFactory_ = /** @class */ (function (_super) {\n    __extends(NgModuleFactory_, _super);\n    function NgModuleFactory_(moduleType, _bootstrapComponents, _ngModuleDefFactory) {\n        var _this = \n        // Attention: this ctor is called as top level function.\n        // Putting any logic in here will destroy closure tree shaking!\n        _super.call(this) || this;\n        _this.moduleType = moduleType;\n        _this._bootstrapComponents = _bootstrapComponents;\n        _this._ngModuleDefFactory = _ngModuleDefFactory;\n        return _this;\n    }\n    NgModuleFactory_.prototype.create = function (parentInjector) {\n        initServicesIfNeeded();\n        var def = resolveDefinition(this._ngModuleDefFactory);\n        return Services.createNgModuleRef(this.moduleType, parentInjector || Injector.NULL, this._bootstrapComponents, def);\n    };\n    return NgModuleFactory_;\n}(NgModuleFactory));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// The functions in this file verify that the assumptions we are making\n// about state in an instruction are correct before implementing any logic.\n// They are meant only to be called in dev mode as sanity checks.\n\nfunction assertEqual(actual, expected, msg) {\n    if (actual != expected) {\n        throwError$1(msg);\n    }\n}\n\n\nfunction assertLessThan(actual, expected, msg) {\n    if (actual >= expected) {\n        throwError$1(msg);\n    }\n}\nfunction assertGreaterThan(actual, expected, msg) {\n    if (actual <= expected) {\n        throwError$1(msg);\n    }\n}\nfunction assertNull(actual, msg) {\n    if (actual != null) {\n        throwError$1(msg);\n    }\n}\nfunction assertNotNull$1(actual, msg) {\n    if (actual == null) {\n        throwError$1(msg);\n    }\n}\n\nfunction throwError$1(msg) {\n    debugger; // Left intentionally for better debugger experience.\n    throw new Error(\"ASSERTION ERROR: \" + msg);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * If this is the first template pass, any ngOnInit or ngDoCheck hooks will be queued into\n * TView.initHooks during directiveCreate.\n *\n * The directive index and hook type are encoded into one number (1st bit: type, remaining bits:\n * directive index), then saved in the even indices of the initHooks array. The odd indices\n * hold the hook functions themselves.\n *\n * @param index The index of the directive in LView.data\n * @param hooks The static hooks map on the directive def\n * @param tView The current TView\n */\n\n/**\n * Loops through the directives on a node and queues all their hooks except ngOnInit\n * and ngDoCheck, which are queued separately in directiveCreate.\n */\n\n/**\n * Calls onInit and doCheck calls if they haven't already been called.\n *\n * @param currentView The current view\n */\nfunction executeInitHooks(currentView, tView, creationMode) {\n    if (currentView.lifecycleStage === 1 /* Init */) {\n        executeHooks((currentView.directives), tView.initHooks, tView.checkHooks, creationMode);\n        currentView.lifecycleStage = 2 /* AfterInit */;\n    }\n}\n/**\n * Iterates over afterViewInit and afterViewChecked functions and calls them.\n *\n * @param currentView The current view\n */\nfunction executeHooks(data, allHooks, checkHooks, creationMode) {\n    var hooksToCall = creationMode ? allHooks : checkHooks;\n    if (hooksToCall) {\n        callHooks(data, hooksToCall);\n    }\n}\n/**\n * Calls lifecycle hooks with their contexts, skipping init hooks if it's not\n * creation mode.\n *\n * @param currentView The current view\n * @param arr The array in which the hooks are found\n */\nfunction callHooks(data, arr) {\n    for (var i = 0; i < arr.length; i += 2) {\n        arr[i + 1].call(data[arr[i]]);\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nif (typeof ngDevMode == 'undefined') {\n    if (typeof window != 'undefined')\n        window.ngDevMode = true;\n    if (typeof self != 'undefined')\n        self.ngDevMode = true;\n    if (typeof global != 'undefined')\n        global.ngDevMode = true;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction assertNodeType(node, type) {\n    assertNotNull$1(node, 'should be called with a node');\n    assertEqual(node.type, type, \"should be a \" + typeName(type));\n}\nfunction assertNodeOfPossibleTypes(node) {\n    var types = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        types[_i - 1] = arguments[_i];\n    }\n    assertNotNull$1(node, 'should be called with a node');\n    var found = types.some(function (type) { return node.type === type; });\n    assertEqual(found, true, \"Should be one of \" + types.map(typeName).join(', '));\n}\nfunction typeName(type) {\n    if (type == 1 /* Projection */)\n        return 'Projection';\n    if (type == 0 /* Container */)\n        return 'Container';\n    if (type == 2 /* View */)\n        return 'View';\n    if (type == 3 /* Element */)\n        return 'Element';\n    return '<unknown>';\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// TODO: cleanup once the code is merged in angular/angular\n// TODO: cleanup once the code is merged in angular/angular\nvar RendererStyleFlags3;\n// TODO: cleanup once the code is merged in angular/angular\n(function (RendererStyleFlags3) {\n    RendererStyleFlags3[RendererStyleFlags3[\"Important\"] = 1] = \"Important\";\n    RendererStyleFlags3[RendererStyleFlags3[\"DashCase\"] = 2] = \"DashCase\";\n})(RendererStyleFlags3 || (RendererStyleFlags3 = {}));\n/** Returns whether the `renderer` is a `ProceduralRenderer3` */\nfunction isProceduralRenderer(renderer) {\n    return !!(renderer.listen);\n}\n\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n* Must use this method for CD (instead of === ) since NaN !== NaN\n*/\n\nfunction stringify$2(value) {\n    if (typeof value == 'function')\n        return value.name || value;\n    if (typeof value == 'string')\n        return value;\n    if (value == null)\n        return '';\n    return '' + value;\n}\n/**\n *  Function that throws a \"not implemented\" error so it's clear certain\n *  behaviors/methods aren't yet ready.\n *\n * @returns Not implemented error\n */\nfunction notImplemented() {\n    return new Error('NotImplemented');\n}\n/**\n * Flattens an array in non-recursive way. Input arrays are not modified.\n */\nfunction flatten$3(list) {\n    var result = [];\n    var i = 0;\n    while (i < list.length) {\n        var item = list[i];\n        if (Array.isArray(item)) {\n            if (item.length > 0) {\n                list = item.concat(list.slice(i + 1));\n                i = 0;\n            }\n            else {\n                i++;\n            }\n        }\n        else {\n            result.push(item);\n            i++;\n        }\n    }\n    return result;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Returns the first RNode following the given LNode in the same parent DOM element.\n *\n * This is needed in order to insert the given node with insertBefore.\n *\n * @param node The node whose following DOM node must be found.\n * @param stopNode A parent node at which the lookup in the tree should be stopped, or null if the\n * lookup should not be stopped until the result is found.\n * @returns RNode before which the provided node should be inserted or null if the lookup was\n * stopped\n * or if there is no native node after the given logical node in the same native parent.\n */\nfunction findNextRNodeSibling(node, stopNode) {\n    var currentNode = node;\n    while (currentNode && currentNode !== stopNode) {\n        var pNextOrParent = currentNode.pNextOrParent;\n        if (pNextOrParent) {\n            while (pNextOrParent.type !== 1 /* Projection */) {\n                var nativeNode = findFirstRNode(pNextOrParent);\n                if (nativeNode) {\n                    return nativeNode;\n                }\n                pNextOrParent = (pNextOrParent.pNextOrParent);\n            }\n            currentNode = pNextOrParent;\n        }\n        else {\n            var currentSibling = currentNode.next;\n            while (currentSibling) {\n                var nativeNode = findFirstRNode(currentSibling);\n                if (nativeNode) {\n                    return nativeNode;\n                }\n                currentSibling = currentSibling.next;\n            }\n            var parentNode = currentNode.parent;\n            currentNode = null;\n            if (parentNode) {\n                var parentType = parentNode.type;\n                if (parentType === 0 /* Container */ || parentType === 2 /* View */) {\n                    currentNode = parentNode;\n                }\n            }\n        }\n    }\n    return null;\n}\n/**\n * Get the next node in the LNode tree, taking into account the place where a node is\n * projected (in the shadow DOM) rather than where it comes from (in the light DOM).\n *\n * @param node The node whose next node in the LNode tree must be found.\n * @return LNode|null The next sibling in the LNode tree.\n */\nfunction getNextLNodeWithProjection(node) {\n    var pNextOrParent = node.pNextOrParent;\n    if (pNextOrParent) {\n        // The node is projected\n        var isLastProjectedNode = pNextOrParent.type === 1;\n        // returns pNextOrParent if we are not at the end of the list, null otherwise\n        return isLastProjectedNode ? null : pNextOrParent;\n    }\n    // returns node.next because the the node is not projected\n    return node.next;\n}\n/**\n * Find the next node in the LNode tree, taking into account the place where a node is\n * projected (in the shadow DOM) rather than where it comes from (in the light DOM).\n *\n * If there is no sibling node, this function goes to the next sibling of the parent node...\n * until it reaches rootNode (at which point null is returned).\n *\n * @param initialNode The node whose following node in the LNode tree must be found.\n * @param rootNode The root node at which the lookup should stop.\n * @return LNode|null The following node in the LNode tree.\n */\nfunction getNextOrParentSiblingNode(initialNode, rootNode) {\n    var node = initialNode;\n    var nextNode = getNextLNodeWithProjection(node);\n    while (node && !nextNode) {\n        // if node.pNextOrParent is not null here, it is not the next node\n        // (because, at this point, nextNode is null, so it is the parent)\n        node = node.pNextOrParent || node.parent;\n        if (node === rootNode) {\n            return null;\n        }\n        nextNode = node && getNextLNodeWithProjection(node);\n    }\n    return nextNode;\n}\n/**\n * Returns the first RNode inside the given LNode.\n *\n * @param node The node whose first DOM node must be found\n * @returns RNode The first RNode of the given LNode or null if there is none.\n */\nfunction findFirstRNode(rootNode) {\n    var node = rootNode;\n    while (node) {\n        var nextNode = null;\n        if (node.type === 3 /* Element */) {\n            // A LElementNode has a matching RNode in LElementNode.native\n            return node.native;\n        }\n        else if (node.type === 0 /* Container */) {\n            var lContainerNode = node;\n            var childContainerData = lContainerNode.dynamicLContainerNode ?\n                lContainerNode.dynamicLContainerNode.data :\n                lContainerNode.data;\n            nextNode = childContainerData.views.length ? childContainerData.views[0].child : null;\n        }\n        else if (node.type === 1 /* Projection */) {\n            // For Projection look at the first projected node\n            nextNode = node.data.head;\n        }\n        else {\n            // Otherwise look at the first child\n            nextNode = node.child;\n        }\n        node = nextNode === null ? getNextOrParentSiblingNode(node, rootNode) : nextNode;\n    }\n    return null;\n}\nfunction createTextNode(value, renderer) {\n    return isProceduralRenderer(renderer) ? renderer.createText(stringify$2(value)) :\n        renderer.createTextNode(stringify$2(value));\n}\nfunction addRemoveViewFromContainer(container, rootNode, insertMode, beforeNode) {\n    ngDevMode && assertNodeType(container, 0 /* Container */);\n    ngDevMode && assertNodeType(rootNode, 2 /* View */);\n    var parentNode = container.data.renderParent;\n    var parent = parentNode ? parentNode.native : null;\n    var node = rootNode.child;\n    if (parent) {\n        while (node) {\n            var nextNode = null;\n            var renderer = container.view.renderer;\n            if (node.type === 3 /* Element */) {\n                if (insertMode) {\n                    if (!node.native) {\n                        // If the native element doesn't exist, this is a bound text node that hasn't yet been\n                        // created because update mode has not run (occurs when a bound text node is a root\n                        // node of a dynamically created view). See textBinding() in instructions for ctx.\n                        // If the native element doesn't exist, this is a bound text node that hasn't yet been\n                        // created because update mode has not run (occurs when a bound text node is a root\n                        // node of a dynamically created view). See textBinding() in instructions for ctx.\n                        node.native = createTextNode('', renderer);\n                    }\n                    isProceduralRenderer(renderer) ?\n                        renderer.insertBefore(parent, (node.native), beforeNode) :\n                        parent.insertBefore((node.native), beforeNode, true);\n                }\n                else {\n                    isProceduralRenderer(renderer) ? renderer.removeChild(parent, (node.native)) :\n                        parent.removeChild((node.native));\n                }\n                nextNode = node.next;\n            }\n            else if (node.type === 0 /* Container */) {\n                // if we get to a container, it must be a root node of a view because we are only\n                // propagating down into child views / containers and not child elements\n                var childContainerData = node.data;\n                childContainerData.renderParent = parentNode;\n                nextNode = childContainerData.views.length ? childContainerData.views[0].child : null;\n            }\n            else if (node.type === 1 /* Projection */) {\n                nextNode = node.data.head;\n            }\n            else {\n                nextNode = node.child;\n            }\n            if (nextNode === null) {\n                node = getNextOrParentSiblingNode(node, rootNode);\n            }\n            else {\n                node = nextNode;\n            }\n        }\n    }\n}\n/**\n * Traverses the tree of component views and containers to remove listeners and\n * call onDestroy callbacks.\n *\n * Notes:\n *  - Because it's used for onDestroy calls, it needs to be bottom-up.\n *  - Must process containers instead of their views to avoid splicing\n *  when views are destroyed and re-added.\n *  - Using a while loop because it's faster than recursion\n *  - Destroy only called on movement to sibling or movement to parent (laterally or up)\n *\n *  @param rootView The view to destroy\n */\nfunction destroyViewTree(rootView) {\n    var viewOrContainer = rootView;\n    while (viewOrContainer) {\n        var next = null;\n        if (viewOrContainer.views && viewOrContainer.views.length) {\n            next = viewOrContainer.views[0].data;\n        }\n        else if (viewOrContainer.child) {\n            next = viewOrContainer.child;\n        }\n        else if (viewOrContainer.next) {\n            cleanUpView(viewOrContainer);\n            next = viewOrContainer.next;\n        }\n        if (next == null) {\n            // If the viewOrContainer is the rootView, then the cleanup is done twice.\n            // Without this check, ngOnDestroy would be called twice for a directive on an element.\n            while (viewOrContainer && !viewOrContainer.next && viewOrContainer !== rootView) {\n                cleanUpView(viewOrContainer);\n                viewOrContainer = getParentState(viewOrContainer, rootView);\n            }\n            cleanUpView(viewOrContainer || rootView);\n            next = viewOrContainer && viewOrContainer.next;\n        }\n        viewOrContainer = next;\n    }\n}\n/**\n * Inserts a view into a container.\n *\n * This adds the view to the container's array of active views in the correct\n * position. It also adds the view's elements to the DOM if the container isn't a\n * root node of another view (in that case, the view's elements will be added when\n * the container's parent view is added later).\n *\n * @param container The container into which the view should be inserted\n * @param newView The view to insert\n * @param index The index at which to insert the view\n * @returns The inserted view\n */\nfunction insertView(container, newView, index) {\n    var state = container.data;\n    var views = state.views;\n    if (index > 0) {\n        // This is a new view, we need to add it to the children.\n        setViewNext(views[index - 1], newView);\n    }\n    if (index < views.length) {\n        setViewNext(newView, views[index]);\n        views.splice(index, 0, newView);\n    }\n    else {\n        views.push(newView);\n    }\n    // If the container's renderParent is null, we know that it is a root node of its own parent view\n    // and we should wait until that parent processes its nodes (otherwise, we will insert this view's\n    // nodes twice - once now and once when its parent inserts its views).\n    if (container.data.renderParent !== null) {\n        var beforeNode = findNextRNodeSibling(newView, container);\n        if (!beforeNode) {\n            var containerNextNativeNode = container.native;\n            if (containerNextNativeNode === undefined) {\n                containerNextNativeNode = container.native = findNextRNodeSibling(container, null);\n            }\n            beforeNode = containerNextNativeNode;\n        }\n        addRemoveViewFromContainer(container, newView, true, beforeNode);\n    }\n    return newView;\n}\n/**\n * Removes a view from a container.\n *\n * This method splices the view from the container's array of active views. It also\n * removes the view's elements from the DOM and conducts cleanup (e.g. removing\n * listeners, calling onDestroys).\n *\n * @param container The container from which to remove a view\n * @param removeIndex The index of the view to remove\n * @returns The removed view\n */\nfunction removeView(container, removeIndex) {\n    var views = container.data.views;\n    var viewNode = views[removeIndex];\n    if (removeIndex > 0) {\n        setViewNext(views[removeIndex - 1], viewNode.next);\n    }\n    views.splice(removeIndex, 1);\n    viewNode.next = null;\n    destroyViewTree(viewNode.data);\n    addRemoveViewFromContainer(container, viewNode, false);\n    // Notify query that view has been removed\n    container.data.queries && container.data.queries.removeView(removeIndex);\n    return viewNode;\n}\n/**\n * Sets a next on the view node, so views in for loops can easily jump from\n * one view to the next to add/remove elements. Also adds the LView (view.data)\n * to the view tree for easy traversal when cleaning up the view.\n *\n * @param view The view to set up\n * @param next The view's new next\n */\nfunction setViewNext(view, next) {\n    view.next = next;\n    view.data.next = next ? next.data : null;\n}\n/**\n * Determines which LViewOrLContainer to jump to when traversing back up the\n * tree in destroyViewTree.\n *\n * Normally, the view's parent LView should be checked, but in the case of\n * embedded views, the container (which is the view node's parent, but not the\n * LView's parent) needs to be checked for a possible next property.\n *\n * @param state The LViewOrLContainer for which we need a parent state\n * @param rootView The rootView, so we don't propagate too far up the view tree\n * @returns The correct parent LViewOrLContainer\n */\nfunction getParentState(state, rootView) {\n    var node;\n    if ((node = state.node) && node.type === 2 /* View */) {\n        // if it's an embedded view, the state needs to go up to the container, in case the\n        // container has a next\n        return node.parent.data;\n    }\n    else {\n        // otherwise, use parent view for containers or component views\n        return state.parent === rootView ? null : state.parent;\n    }\n}\n/**\n * Removes all listeners and call all onDestroys in a given view.\n *\n * @param view The LView to clean up\n */\nfunction cleanUpView(view) {\n    removeListeners(view);\n    executeOnDestroys(view);\n    executePipeOnDestroys(view);\n}\n/** Removes listeners and unsubscribes from output subscriptions */\nfunction removeListeners(view) {\n    var cleanup = (view.cleanup);\n    if (cleanup != null) {\n        for (var i = 0; i < cleanup.length - 1; i += 2) {\n            if (typeof cleanup[i] === 'string') {\n                cleanup[i + 1].removeEventListener(cleanup[i], cleanup[i + 2], cleanup[i + 3]);\n                i += 2;\n            }\n            else {\n                cleanup[i].call(cleanup[i + 1]);\n            }\n        }\n        view.cleanup = null;\n    }\n}\n/** Calls onDestroy hooks for this view */\nfunction executeOnDestroys(view) {\n    var tView = view.tView;\n    var destroyHooks;\n    if (tView != null && (destroyHooks = tView.destroyHooks) != null) {\n        callHooks((view.directives), destroyHooks);\n    }\n}\n/** Calls pipe destroy hooks for this view */\nfunction executePipeOnDestroys(view) {\n    var pipeDestroyHooks = view.tView && view.tView.pipeDestroyHooks;\n    if (pipeDestroyHooks) {\n        callHooks((view.data), pipeDestroyHooks);\n    }\n}\n/**\n * Returns whether a native element should be inserted in the given parent.\n *\n * The native node can be inserted when its parent is:\n * - A regular element => Yes\n * - A component host element =>\n *    - if the `currentView` === the parent `view`: The element is in the content (vs the\n *      template)\n *      => don't add as the parent component will project if needed.\n *    - `currentView` !== the parent `view` => The element is in the template (vs the content),\n *      add it\n * - View element => delay insertion, will be done on `viewEnd()`\n *\n * @param parent The parent in which to insert the child\n * @param currentView The LView being processed\n * @return boolean Whether the child element should be inserted.\n */\n\n/**\n * Appends the `child` element to the `parent`.\n *\n * The element insertion might be delayed {@link canInsertNativeNode}\n *\n * @param parent The parent to which to append the child\n * @param child The child that should be appended\n * @param currentView The current LView\n * @returns Whether or not the child was appended\n */\n\n/**\n * Inserts the provided node before the correct element in the DOM.\n *\n * The element insertion might be delayed {@link canInsertNativeNode}\n *\n * @param node Node to insert\n * @param currentView Current LView\n */\n\n/**\n * Appends a projected node to the DOM, or in the case of a projected container,\n * appends the nodes from all of the container's active views to the DOM.\n *\n * @param node The node to process\n * @param currentParent The last parent element to be processed\n * @param currentView Current LView\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A utility function to match an Ivy node static data against a simple CSS selector\n *\n * @param node static data to match\n * @param selector\n * @returns true if node matches the selector.\n */\n\n\n\n/**\n * Checks a given node against matching selectors and returns\n * selector index (or 0 if none matched).\n *\n * This function takes into account the ngProjectAs attribute: if present its value will be compared\n * to the raw (un-parsed) CSS selector instead of using standard selector matching logic.\n */\n\n/** Called when directives inject each other (creating a circular dependency) */\n\n/** Called when there are multiple component selectors that match a given node */\n\n/** Throws an ExpressionChangedAfterChecked error if checkNoChanges mode is on. */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Directive (D) sets a property on all component instances using this constant as a key and the\n * component's host node (LElement) as the value. This is used in methods like detectChanges to\n * facilitate jumping from an instance to the host node.\n */\nvar NG_HOST_SYMBOL = '__ngHostLNode__';\n/**\n * A permanent marker promise which signifies that the current CD tree is\n * clean.\n */\nvar _CLEAN_PROMISE = Promise.resolve(null);\n/**\n * Directive and element indices for top-level directive.\n *\n * Saved here to avoid re-instantiating an array on every change detection run.\n */\nvar _ROOT_DIRECTIVE_INDICES = [0, 0];\n/**\n * Token set in currentMatches while dependencies are being resolved.\n *\n * If we visit a directive that has a value set to CIRCULAR, we know we've\n * already seen it, and thus have a circular dependency.\n */\n\n/**\n * This property gets set before entering a template.\n *\n * This renderer can be one of two varieties of Renderer3:\n *\n * - ObjectedOrientedRenderer3\n *\n * This is the native browser API style, e.g. operations are methods on individual objects\n * like HTMLElement. With this style, no additional code is needed as a facade (reducing payload\n * size).\n *\n * - ProceduralRenderer3\n *\n * In non-native browser environments (e.g. platforms such as web-workers), this is the facade\n * that enables element manipulation. This also facilitates backwards compatibility with\n * Renderer2.\n */\nvar renderer;\nvar rendererFactory;\n\n/** Used to set the parent property when nodes are created. */\nvar previousOrParentNode;\n\n/**\n * If `isParent` is:\n *  - `true`: then `previousOrParentNode` points to a parent node.\n *  - `false`: then `previousOrParentNode` points to previous node (sibling).\n */\nvar isParent;\n/**\n * Static data that corresponds to the instance-specific data array on an LView.\n *\n * Each node's static data is stored in tData at the same index that it's stored\n * in the data array. Any nodes that do not have static data store a null value in\n * tData to avoid a sparse array.\n */\nvar tData;\n/**\n * State of the current view being processed.\n *\n * NOTE: we cheat here and initialize it to `null` even thought the type does not\n * contain `null`. This is because we expect this value to be not `null` as soon\n * as we enter the view. Declaring the type as `null` would require us to place `!`\n * in most instructions since they all assume that `currentView` is defined.\n */\nvar currentView = (null);\nvar currentQueries;\n\n/**\n * This property gets set before entering a template.\n */\nvar creationMode;\n\n/**\n * An array of nodes (text, element, container, etc), pipes, their bindings, and\n * any local variables that need to be stored between invocations.\n */\nvar data;\n/**\n * An array of directive instances in the current view.\n *\n * These must be stored separately from LNodes because their presence is\n * unknown at compile-time and thus space cannot be reserved in data[].\n */\nvar directives;\n/**\n * When a view is destroyed, listeners need to be released and outputs need to be\n * unsubscribed. This cleanup array stores both listener data (in chunks of 4)\n * and output data (in chunks of 2) for a particular view. Combining the arrays\n * saves on memory (70 bytes per array) and on a few bytes of code size (for two\n * separate for loops).\n *\n * If it's a listener being stored:\n * 1st index is: event name to remove\n * 2nd index is: native element\n * 3rd index is: listener function\n * 4th index is: useCapture boolean\n *\n * If it's an output subscription:\n * 1st index is: unsubscribe function\n * 2nd index is: context for function\n */\nvar cleanup;\n/**\n * In this mode, any changes in bindings will throw an ExpressionChangedAfterChecked error.\n *\n * Necessary to support ChangeDetectorRef.checkNoChanges().\n */\nvar checkNoChangesMode = false;\n/** Whether or not this is the first time the current view has been processed. */\nvar firstTemplatePass = true;\n/**\n * Swap the current state with a new state.\n *\n * For performance reasons we store the state in the top level of the module.\n * This way we minimize the number of properties to read. Whenever a new view\n * is entered we have to store the state for later, and when the view is\n * exited the state has to be restored\n *\n * @param newView New state to become active\n * @param host Element to which the View is a child of\n * @returns the previous state;\n */\nfunction enterView(newView, host) {\n    var oldView = currentView;\n    data = newView && newView.data;\n    directives = newView && newView.directives;\n    tData = newView && newView.tView.data;\n    creationMode = newView && (newView.flags & 1 /* CreationMode */) === 1 /* CreationMode */;\n    firstTemplatePass = newView && newView.tView.firstTemplatePass;\n    cleanup = newView && newView.cleanup;\n    renderer = newView && newView.renderer;\n    if (newView && newView.bindingIndex < 0) {\n        newView.bindingIndex = newView.bindingStartIndex;\n    }\n    if (host != null) {\n        previousOrParentNode = host;\n        isParent = true;\n    }\n    currentView = newView;\n    currentQueries = newView && newView.queries;\n    return oldView;\n}\n/**\n * Used in lieu of enterView to make it clear when we are exiting a child view. This makes\n * the direction of traversal (up or down the view tree) a bit clearer.\n */\nfunction leaveView(newView) {\n    if (!checkNoChangesMode) {\n        executeHooks((directives), currentView.tView.viewHooks, currentView.tView.viewCheckHooks, creationMode);\n    }\n    // Views should be clean and in update mode after being checked, so these bits are cleared\n    currentView.flags &= ~(1 /* CreationMode */ | 4 /* Dirty */);\n    currentView.lifecycleStage = 1 /* Init */;\n    currentView.bindingIndex = -1;\n    enterView(newView, null);\n}\n/**  Refreshes directives in this view and triggers any init/content hooks.  */\nfunction refreshDirectives() {\n    executeInitAndContentHooks();\n    var tView = currentView.tView;\n    // This needs to be set before children are processed to support recursive components\n    tView.firstTemplatePass = firstTemplatePass = false;\n    setHostBindings(tView.hostBindings);\n    refreshChildComponents(tView.components);\n}\n/** Sets the host bindings for the current view. */\nfunction setHostBindings(bindings) {\n    if (bindings != null) {\n        var defs = (currentView.tView.directives);\n        for (var i = 0; i < bindings.length; i += 2) {\n            var dirIndex = bindings[i];\n            var def = defs[dirIndex];\n            def.hostBindings && def.hostBindings(dirIndex, bindings[i + 1]);\n        }\n    }\n}\n/** Refreshes child components in the current view. */\nfunction refreshChildComponents(components) {\n    if (components != null) {\n        for (var i = 0; i < components.length; i += 2) {\n            componentRefresh(components[i], components[i + 1]);\n        }\n    }\n}\nfunction executeInitAndContentHooks() {\n    if (!checkNoChangesMode) {\n        var tView = currentView.tView;\n        executeInitHooks(currentView, tView, creationMode);\n        executeHooks((directives), tView.contentHooks, tView.contentCheckHooks, creationMode);\n    }\n}\nfunction createLView(viewId, renderer, tView, template, context, flags) {\n    var newView = {\n        parent: currentView,\n        id: viewId,\n        // -1 for component views\n        flags: flags | 1 /* CreationMode */ | 8 /* Attached */,\n        node: (null),\n        // until we initialize it in createNode.\n        data: [],\n        directives: null,\n        tView: tView,\n        cleanup: null,\n        renderer: renderer,\n        child: null,\n        tail: null,\n        next: null,\n        bindingStartIndex: -1,\n        bindingIndex: -1,\n        template: template,\n        context: context,\n        dynamicViewCount: 0,\n        lifecycleStage: 1 /* Init */,\n        queries: null,\n        injector: currentView && currentView.injector,\n    };\n    return newView;\n}\n/**\n * Creation of LNode object is extracted to a separate function so we always create LNode object\n * with the same shape\n * (same properties assigned in the same order).\n */\nfunction createLNodeObject(type, currentView, parent, native, state, queries) {\n    return {\n        type: type,\n        native: native,\n        view: currentView,\n        parent: parent,\n        child: null,\n        next: null,\n        nodeInjector: parent ? parent.nodeInjector : null,\n        data: state,\n        queries: queries,\n        tNode: null,\n        pNextOrParent: null,\n        dynamicLContainerNode: null\n    };\n}\nfunction createLNode(index, type, native, state) {\n    var parent = isParent ? previousOrParentNode :\n        previousOrParentNode && previousOrParentNode.parent;\n    var queries = (isParent ? currentQueries : previousOrParentNode && previousOrParentNode.queries) ||\n        parent && parent.queries && parent.queries.child();\n    var isState = state != null;\n    var node = createLNodeObject(type, currentView, parent, native, isState ? state : null, queries);\n    if ((type & 2 /* ViewOrElement */) === 2 /* ViewOrElement */ && isState) {\n        // Bit of a hack to bust through the readonly because there is a circular dep between\n        // LView and LNode.\n        ngDevMode && assertNull(state.node, 'LView.node should not have been initialized');\n        state.node = node;\n    }\n    if (index != null) {\n        // We are Element or Container\n        ngDevMode && assertDataNext(index);\n        data[index] = node;\n        // Every node adds a value to the static data array to avoid a sparse array\n        if (index >= tData.length) {\n            tData[index] = null;\n        }\n        else {\n            node.tNode = tData[index];\n        }\n        // Now link ourselves into the tree.\n        if (isParent) {\n            currentQueries = null;\n            if (previousOrParentNode.view === currentView ||\n                previousOrParentNode.type === 2 /* View */) {\n                // We are in the same view, which means we are adding content node to the parent View.\n                ngDevMode && assertNull(previousOrParentNode.child, \"previousOrParentNode's child should not have been set.\");\n                previousOrParentNode.child = node;\n            }\n            else {\n                // We are adding component view, so we don't link parent node child to this node.\n            }\n        }\n        else if (previousOrParentNode) {\n            ngDevMode && assertNull(previousOrParentNode.next, \"previousOrParentNode's next property should not have been set \" + index + \".\");\n            previousOrParentNode.next = node;\n            if (previousOrParentNode.dynamicLContainerNode) {\n                previousOrParentNode.dynamicLContainerNode.next = node;\n            }\n        }\n    }\n    previousOrParentNode = node;\n    isParent = true;\n    return node;\n}\n/**\n *\n * @param hostNode Existing node to render into.\n * @param template Template function with the instructions.\n * @param context to pass into the template.\n * @param providedRendererFactory renderer factory to use\n * @param host The host element node to use\n * @param directives Directive defs that should be used for matching\n * @param pipes Pipe defs that should be used for matching\n */\n\nfunction renderEmbeddedTemplate(viewNode, template, context, renderer, directives, pipes) {\n    var _isParent = isParent;\n    var _previousOrParentNode = previousOrParentNode;\n    var oldView;\n    try {\n        isParent = true;\n        previousOrParentNode = (null);\n        var rf = 2;\n        if (viewNode == null) {\n            var tView = getOrCreateTView(template, directives || null, pipes || null);\n            var lView = createLView(-1, renderer, tView, template, context, 2 /* CheckAlways */);\n            viewNode = createLNode(null, 2 /* View */, null, lView);\n            rf = 1 /* Create */;\n        }\n        oldView = enterView(viewNode.data, viewNode);\n        template(rf, context);\n        refreshDirectives();\n        refreshDynamicChildren();\n    }\n    finally {\n        leaveView((oldView));\n        isParent = _isParent;\n        previousOrParentNode = _previousOrParentNode;\n    }\n    return viewNode;\n}\nfunction renderComponentOrTemplate(node, hostView, componentOrContext, template) {\n    var oldView = enterView(hostView, node);\n    try {\n        if (rendererFactory.begin) {\n            rendererFactory.begin();\n        }\n        if (template) {\n            template(getRenderFlags(hostView), (componentOrContext));\n            refreshDynamicChildren();\n            refreshDirectives();\n        }\n        else {\n            executeInitAndContentHooks();\n            // Element was stored at 0 in data and directive was stored at 0 in directives\n            // in renderComponent()\n            setHostBindings(_ROOT_DIRECTIVE_INDICES);\n            componentRefresh(0, 0);\n        }\n    }\n    finally {\n        if (rendererFactory.end) {\n            rendererFactory.end();\n        }\n        leaveView(oldView);\n    }\n}\n/**\n * This function returns the default configuration of rendering flags depending on when the\n * template is in creation mode or update mode. By default, the update block is run with the\n * creation block when the view is in creation mode. Otherwise, the update block is run\n * alone.\n *\n * Dynamically created views do NOT use this configuration (update block and create block are\n * always run separately).\n */\nfunction getRenderFlags(view) {\n    return view.flags & 1 /* CreationMode */ ? 1 /* Create */ | 2 /* Update */ :\n        2 /* Update */;\n}\n/**\n * Create DOM element. The instruction must later be followed by `elementEnd()` call.\n *\n * @param index Index of the element in the data array\n * @param name Name of the DOM Node\n * @param attrs Statically bound set of attributes to be written into the DOM element on creation.\n * @param localRefs A set of local reference bindings on the element.\n *\n * Attributes and localRefs are passed as an array of strings where elements with an even index\n * hold an attribute name and elements with an odd index hold an attribute value, ex.:\n * ['id', 'warning5', 'class', 'alert']\n */\n\n\n/** Sets the context for a ChangeDetectorRef to the given instance. */\n\n\n/**\n * Gets TView from a template function or creates a new TView\n * if it doesn't already exist.\n *\n * @param template The template from which to get static data\n * @param directives Directive defs that should be saved on TView\n * @param pipes Pipe defs that should be saved on TView\n * @returns TView\n */\nfunction getOrCreateTView(template, directives, pipes) {\n    return template.ngPrivateData ||\n        (template.ngPrivateData = createTView(directives, pipes));\n}\n/** Creates a TView instance */\nfunction createTView(defs, pipes) {\n    return {\n        data: [],\n        directives: null,\n        firstTemplatePass: true,\n        initHooks: null,\n        checkHooks: null,\n        contentHooks: null,\n        contentCheckHooks: null,\n        viewHooks: null,\n        viewCheckHooks: null,\n        destroyHooks: null,\n        pipeDestroyHooks: null,\n        hostBindings: null,\n        components: null,\n        directiveRegistry: typeof defs === 'function' ? defs() : defs,\n        pipeRegistry: typeof pipes === 'function' ? pipes() : pipes,\n        currentMatches: null\n    };\n}\n\n/**\n * Locates the host native element, used for bootstrapping existing nodes into rendering pipeline.\n *\n * @param elementOrSelector Render element or CSS selector to locate the element.\n */\n\n/**\n * Creates the host LNode.\n *\n * @param rNode Render host element.\n * @param def ComponentDef\n *\n * @returns LElementNode created\n */\n\n/**\n * Adds an event listener to the current node.\n *\n * If an output exists on one of the node's directives, it also subscribes to the output\n * and saves the subscription for later cleanup.\n *\n * @param eventName Name of the event\n * @param listenerFn The function to be called when event emits\n * @param useCapture Whether or not to use capture in event listener.\n */\n\n/** Mark the end of the element. */\n\n/**\n * Updates the value of removes an attribute on an Element.\n *\n * @param number index The index of the element in the data array\n * @param name name The name of the attribute.\n * @param value value The attribute is removed when value is `null` or `undefined`.\n *                  Otherwise the attribute value is set to the stringified value.\n * @param sanitizer An optional function used to sanitize the value.\n */\n\n/**\n * Update a property on an Element.\n *\n * If the property name also exists as an input property on one of the element's directives,\n * the component property will be set instead of the element property. This check must\n * be conducted at runtime so child components that add new @Inputs don't have to be re-compiled.\n *\n * @param index The index of the element to update in the data array\n * @param propName Name of property. Because it is going to DOM, this is not subject to\n *        renaming as part of minification.\n * @param value New value to write.\n * @param sanitizer An optional function used to sanitize the value.\n */\n\n/**\n * Add or remove a class in a `classList` on a DOM element.\n *\n * This instruction is meant to handle the [class.foo]=\"exp\" case\n *\n * @param index The index of the element to update in the data array\n * @param className Name of class to toggle. Because it is going to DOM, this is not subject to\n *        renaming as part of minification.\n * @param value A value indicating if a given class should be added or removed.\n */\n\n/**\n * Set the `className` property on a DOM element.\n *\n * This instruction is meant to handle the `[class]=\"exp\"` usage.\n *\n * `elementClass` instruction writes the value to the \"element's\" `className` property.\n *\n * @param index The index of the element to update in the data array\n * @param value A value indicating a set of classes which should be applied. The method overrides\n *   any existing classes. The value is stringified (`toString`) before it is applied to the\n *   element.\n */\n\n\n/**\n * Set the `style` property on a DOM element.\n *\n * This instruction is meant to handle the `[style]=\"exp\"` usage.\n *\n *\n * @param index The index of the element to update in the data array\n * @param value A value indicating if a given style should be added or removed.\n *   The expected shape of `value` is an object where keys are style names and the values\n *   are their corresponding values to set. If value is falsy than the style is remove. An absence\n *   of style does not cause that style to be removed. `NO_CHANGE` implies that no update should be\n *   performed.\n */\n\n/**\n * Create static text node\n *\n * @param index Index of the node in the data array.\n * @param value Value to write. This value will be stringified.\n *   If value is not provided than the actual creation of the text node is delayed.\n */\n\n/**\n * Create text node with binding\n * Bindings should be handled externally with the proper bind(1-8) method\n *\n * @param index Index of the node in the data array.\n * @param value Stringified value to write.\n */\n\n/**\n * Create a directive.\n *\n * NOTE: directives can be created in order other than the index order. They can also\n *       be retrieved before they are created in which case the value will be null.\n *\n * @param directive The directive instance.\n * @param directiveDef DirectiveDef object which contains information about the template.\n */\n\n/**\n * A lighter version of directiveCreate() that is used for the root component\n *\n * This version does not contain features that we don't already support at root in\n * current Angular. Example: local refs and inputs on root component.\n */\n\n\n/**\n * Creates an LContainerNode.\n *\n * Only `LViewNodes` can go into `LContainerNodes`.\n *\n * @param index The index of the container in the data array\n * @param template Optional inline template\n * @param tagName The name of the container element, if applicable\n * @param attrs The attrs attached to the container, if applicable\n * @param localRefs A set of local reference bindings on the element.\n */\n\n/**\n * Sets a container up to receive views.\n *\n * @param index The index of the container in the data array\n */\n\n/**\n * Marks the end of the LContainerNode.\n *\n * Marking the end of LContainerNode is the time when to child Views get inserted or removed.\n */\n\nfunction refreshDynamicChildren() {\n    for (var current = currentView.child; current !== null; current = current.next) {\n        if (current.dynamicViewCount !== 0 && current.views) {\n            var container_1 = current;\n            for (var i = 0; i < container_1.views.length; i++) {\n                var view = container_1.views[i];\n                // The directives and pipes are not needed here as an existing view is only being refreshed.\n                renderEmbeddedTemplate(view, (view.data.template), (view.data.context), renderer);\n            }\n        }\n    }\n}\n/**\n * Marks the start of an embedded view.\n *\n * @param viewBlockId The ID of this view\n * @return boolean Whether or not this view is in creation mode\n */\n\n/** Marks the end of an embedded view. */\n\n/**\n * Refreshes components by entering the component view and processing its bindings, queries, etc.\n *\n * @param directiveIndex\n * @param elementIndex\n */\nfunction componentRefresh(directiveIndex, elementIndex) {\n    ngDevMode && assertDataInRange(elementIndex);\n    var element = data[elementIndex];\n    ngDevMode && assertNodeType(element, 3 /* Element */);\n    ngDevMode && assertNotNull$1(element.data, \"Component's host node should have an LView attached.\");\n    var hostView = (element.data);\n    // Only attached CheckAlways components or attached, dirty OnPush components should be checked\n    if (viewAttached(hostView) && hostView.flags & (2 /* CheckAlways */ | 4 /* Dirty */)) {\n        ngDevMode && assertDataInRange(directiveIndex, (directives));\n        var def = currentView.tView.directives[directiveIndex];\n        detectChangesInternal(hostView, element, def, getDirectiveInstance(directives[directiveIndex]));\n    }\n}\n/** Returns a boolean for whether the view is attached */\nfunction viewAttached(view) {\n    return (view.flags & 8 /* Attached */) === 8 /* Attached */;\n}\n/**\n * Instruction to distribute projectable nodes among <ng-content> occurrences in a given template.\n * It takes all the selectors from the entire component's template and decides where\n * each projected node belongs (it re-distributes nodes among \"buckets\" where each \"bucket\" is\n * backed by a selector).\n *\n * This function requires CSS selectors to be provided in 2 forms: parsed (by a compiler) and text,\n * un-parsed form.\n *\n * The parsed form is needed for efficient matching of a node against a given CSS selector.\n * The un-parsed, textual form is needed for support of the ngProjectAs attribute.\n *\n * Having a CSS selector in 2 different formats is not ideal, but alternatives have even more\n * drawbacks:\n * - having only a textual form would require runtime parsing of CSS selectors;\n * - we can't have only a parsed as we can't re-construct textual form from it (as entered by a\n * template author).\n *\n * @param selectors A collection of parsed CSS selectors\n * @param rawSelectors A collection of CSS selectors in the raw, un-parsed form\n */\n\n/**\n * Inserts previously re-distributed projected nodes. This instruction must be preceded by a call\n * to the projectionDef instruction.\n *\n * @param nodeIndex\n * @param localIndex - index under which distribution of projected nodes was memorized\n * @param selectorIndex - 0 means <ng-content> without any selector\n * @param attrs - attributes attached to the ng-content node, if present\n */\n\n/**\n * Adds a LView or a LContainer to the end of the current view tree.\n *\n * This structure will be used to traverse through nested views to remove listeners\n * and call onDestroy callbacks.\n *\n * @param currentView The view where LView or LContainer should be added\n * @param state The LView or LContainer to add to the view tree\n * @returns The state passed in\n */\n\n/** If node is an OnPush component, marks its LView dirty. */\n\n/**\n * Wraps an event listener so its host view and its ancestor views will be marked dirty\n * whenever the event fires. Necessary to support OnPush components.\n */\n\n/**\n * Wraps an event listener so its host view and its ancestor views will be marked dirty\n * whenever the event fires. Also wraps with preventDefault behavior.\n */\n\n/** Marks current view and all ancestors dirty */\nfunction markViewDirty(view) {\n    var currentView = view;\n    while (currentView.parent != null) {\n        currentView.flags |= 4 /* Dirty */;\n        currentView = currentView.parent;\n    }\n    currentView.flags |= 4 /* Dirty */;\n    ngDevMode && assertNotNull$1(currentView.context, 'rootContext');\n    scheduleTick(currentView.context);\n}\n/**\n * Used to schedule change detection on the whole application.\n *\n * Unlike `tick`, `scheduleTick` coalesces multiple calls into one change detection run.\n * It is usually called indirectly by calling `markDirty` when the view needs to be\n * re-rendered.\n *\n * Typically `scheduleTick` uses `requestAnimationFrame` to coalesce multiple\n * `scheduleTick` requests. The scheduling function can be overridden in\n * `renderComponent`'s `scheduler` option.\n */\nfunction scheduleTick(rootContext) {\n    if (rootContext.clean == _CLEAN_PROMISE) {\n        var res_1;\n        rootContext.clean = new Promise(function (r) { return res_1 = r; });\n        rootContext.scheduler(function () {\n            tick(rootContext.component);\n            res_1(null);\n            rootContext.clean = _CLEAN_PROMISE;\n        });\n    }\n}\n/**\n * Used to perform change detection on the whole application.\n *\n * This is equivalent to `detectChanges`, but invoked on root component. Additionally, `tick`\n * executes lifecycle hooks and conditionally checks components based on their\n * `ChangeDetectionStrategy` and dirtiness.\n *\n * The preferred way to trigger change detection is to call `markDirty`. `markDirty` internally\n * schedules `tick` using a scheduler in order to coalesce multiple `markDirty` calls into a\n * single change detection run. By default, the scheduler is `requestAnimationFrame`, but can\n * be changed when calling `renderComponent` and providing the `scheduler` option.\n */\nfunction tick(component) {\n    var rootView = getRootView(component);\n    var rootComponent = rootView.context.component;\n    var hostNode = _getComponentHostLElementNode(rootComponent);\n    ngDevMode && assertNotNull$1(hostNode.data, 'Component host node should be attached to an LView');\n    renderComponentOrTemplate(hostNode, rootView, rootComponent);\n}\n/**\n * Retrieve the root view from any component by walking the parent `LView` until\n * reaching the root `LView`.\n *\n * @param component any component\n */\nfunction getRootView(component) {\n    ngDevMode && assertNotNull$1(component, 'component');\n    var lElementNode = _getComponentHostLElementNode(component);\n    var lView = lElementNode.view;\n    while (lView.parent) {\n        lView = lView.parent;\n    }\n    return lView;\n}\n/**\n * Synchronously perform change detection on a component (and possibly its sub-components).\n *\n * This function triggers change detection in a synchronous way on a component. There should\n * be very little reason to call this function directly since a preferred way to do change\n * detection is to {@link markDirty} the component and wait for the scheduler to call this method\n * at some future point in time. This is because a single user action often results in many\n * components being invalidated and calling change detection on each component synchronously\n * would be inefficient. It is better to wait until all components are marked as dirty and\n * then perform single change detection across all of the components\n *\n * @param component The component which the change detection should be performed on.\n */\nfunction detectChanges(component) {\n    var hostNode = _getComponentHostLElementNode(component);\n    ngDevMode && assertNotNull$1(hostNode.data, 'Component host node should be attached to an LView');\n    var componentIndex = hostNode.tNode.flags >> 13;\n    var def = hostNode.view.tView.directives[componentIndex];\n    detectChangesInternal(hostNode.data, hostNode, def, component);\n}\n/**\n * Checks the change detector and its children, and throws if any changes are detected.\n *\n * This is used in development mode to verify that running change detection doesn't\n * introduce other changes.\n */\nfunction checkNoChanges(component) {\n    checkNoChangesMode = true;\n    try {\n        detectChanges(component);\n    }\n    finally {\n        checkNoChangesMode = false;\n    }\n}\n/** Checks the view of the component provided. Does not gate on dirty checks or execute doCheck. */\nfunction detectChangesInternal(hostView, hostNode, def, component) {\n    var oldView = enterView(hostView, hostNode);\n    var template = def.template;\n    try {\n        template(getRenderFlags(hostView), component);\n        refreshDirectives();\n        refreshDynamicChildren();\n    }\n    finally {\n        leaveView(oldView);\n    }\n}\n/**\n * Mark the component as dirty (needing change detection).\n *\n * Marking a component dirty will schedule a change detection on this\n * component at some point in the future. Marking an already dirty\n * component as dirty is a noop. Only one outstanding change detection\n * can be scheduled per component tree. (Two components bootstrapped with\n * separate `renderComponent` will have separate schedulers)\n *\n * When the root component is bootstrapped with `renderComponent`, a scheduler\n * can be provided.\n *\n * @param component Component to mark as dirty.\n */\n\n/** A special value which designates that a value has not changed. */\n\n/**\n * Creates a single value binding.\n *\n * @param value Value to diff\n */\n\n/**\n * Create interpolation bindings with a variable number of expressions.\n *\n * If there are 1 to 8 expressions `interpolation1()` to `interpolation8()` should be used instead.\n * Those are faster because there is no need to create an array of expressions and iterate over it.\n *\n * `values`:\n * - has static text at even indexes,\n * - has evaluated expressions at odd indexes.\n *\n * Returns the concatenated string when any of the arguments changes, `NO_CHANGE` otherwise.\n */\n\n/**\n * Creates an interpolation binding with 1 expression.\n *\n * @param prefix static value used for concatenation only.\n * @param v0 value checked for change.\n * @param suffix static value used for concatenation only.\n */\n\n/** Creates an interpolation binding with 2 expressions. */\n\n/** Creates an interpolation bindings with 3 expressions. */\n\n/** Create an interpolation binding with 4 expressions. */\n\n/** Creates an interpolation binding with 5 expressions. */\n\n/** Creates an interpolation binding with 6 expressions. */\n\n/** Creates an interpolation binding with 7 expressions. */\n\n/** Creates an interpolation binding with 8 expressions. */\n\n/** Store a value in the `data` at a given `index`. */\n\n/** Retrieves a value from the `data`. */\n\n/** Retrieves a value from the `directives` array. */\n\n/** Gets the current binding value and increments the binding index. */\n\n/** Updates binding if changed, then returns whether it was updated. */\n\n/** Updates binding if changed, then returns the latest value. */\n\n/** Updates 2 bindings if changed, then returns whether either was updated. */\n\n/** Updates 4 bindings if changed, then returns whether any was updated. */\n\n\nfunction getDirectiveInstance(instanceOrArray) {\n    // Directives with content queries store an array in directives[directiveIndex]\n    // with the instance as the first index\n    return Array.isArray(instanceOrArray) ? instanceOrArray[0] : instanceOrArray;\n}\n\nfunction assertDataInRange(index, arr) {\n    if (arr == null)\n        arr = data;\n    assertLessThan(index, arr ? arr.length : 0, 'index expected to be a valid data index');\n}\nfunction assertDataNext(index, arr) {\n    if (arr == null)\n        arr = data;\n    assertEqual(arr.length, index, \"index \" + index + \" expected to be at the end of arr (length \" + arr.length + \")\");\n}\nfunction _getComponentHostLElementNode(component) {\n    ngDevMode && assertNotNull$1(component, 'expecting component got null');\n    var lElementNode = component[NG_HOST_SYMBOL];\n    ngDevMode && assertNotNull$1(component, 'object is not a component');\n    return lElementNode;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ViewRef$1 = /** @class */ (function () {\n    function ViewRef(_view, context) {\n        this._view = _view;\n        this.context = (context);\n    }\n    /** @internal */\n    /** @internal */\n    ViewRef.prototype._setComponentContext = /** @internal */\n    function (view, context) {\n        this._view = view;\n        this.context = context;\n    };\n    ViewRef.prototype.destroy = function () {  };\n    ViewRef.prototype.onDestroy = function (callback) {  };\n    /**\n     * Marks a view and all of its ancestors dirty.\n     *\n     * It also triggers change detection by calling `scheduleTick` internally, which coalesces\n     * multiple `markForCheck` calls to into one change detection run.\n     *\n     * This can be used to ensure an {@link ChangeDetectionStrategy#OnPush OnPush} component is\n     * checked when it needs to be re-rendered but the two normal triggers haven't marked it\n     * dirty (i.e. inputs haven't changed and events haven't fired in the view).\n     *\n     * <!-- TODO: Add a link to a chapter on OnPush components -->\n     *\n     * ### Example ([live demo](https://stackblitz.com/edit/angular-kx7rrw))\n     *\n     * ```typescript\n     * @Component({\n     *   selector: 'my-app',\n     *   template: `Number of ticks: {{numberOfTicks}}`\n     *   changeDetection: ChangeDetectionStrategy.OnPush,\n     * })\n     * class AppComponent {\n     *   numberOfTicks = 0;\n     *\n     *   constructor(private ref: ChangeDetectorRef) {\n     *     setInterval(() => {\n     *       this.numberOfTicks++;\n     *       // the following is required, otherwise the view will not be updated\n     *       this.ref.markForCheck();\n     *     }, 1000);\n     *   }\n     * }\n     * ```\n     */\n    /**\n       * Marks a view and all of its ancestors dirty.\n       *\n       * It also triggers change detection by calling `scheduleTick` internally, which coalesces\n       * multiple `markForCheck` calls to into one change detection run.\n       *\n       * This can be used to ensure an {@link ChangeDetectionStrategy#OnPush OnPush} component is\n       * checked when it needs to be re-rendered but the two normal triggers haven't marked it\n       * dirty (i.e. inputs haven't changed and events haven't fired in the view).\n       *\n       * <!-- TODO: Add a link to a chapter on OnPush components -->\n       *\n       * ### Example ([live demo](https://stackblitz.com/edit/angular-kx7rrw))\n       *\n       * ```typescript\n       * @Component({\n       *   selector: 'my-app',\n       *   template: `Number of ticks: {{numberOfTicks}}`\n       *   changeDetection: ChangeDetectionStrategy.OnPush,\n       * })\n       * class AppComponent {\n       *   numberOfTicks = 0;\n       *\n       *   constructor(private ref: ChangeDetectorRef) {\n       *     setInterval(() => {\n       *       this.numberOfTicks++;\n       *       // the following is required, otherwise the view will not be updated\n       *       this.ref.markForCheck();\n       *     }, 1000);\n       *   }\n       * }\n       * ```\n       */\n    ViewRef.prototype.markForCheck = /**\n       * Marks a view and all of its ancestors dirty.\n       *\n       * It also triggers change detection by calling `scheduleTick` internally, which coalesces\n       * multiple `markForCheck` calls to into one change detection run.\n       *\n       * This can be used to ensure an {@link ChangeDetectionStrategy#OnPush OnPush} component is\n       * checked when it needs to be re-rendered but the two normal triggers haven't marked it\n       * dirty (i.e. inputs haven't changed and events haven't fired in the view).\n       *\n       * <!-- TODO: Add a link to a chapter on OnPush components -->\n       *\n       * ### Example ([live demo](https://stackblitz.com/edit/angular-kx7rrw))\n       *\n       * ```typescript\n       * @Component({\n       *   selector: 'my-app',\n       *   template: `Number of ticks: {{numberOfTicks}}`\n       *   changeDetection: ChangeDetectionStrategy.OnPush,\n       * })\n       * class AppComponent {\n       *   numberOfTicks = 0;\n       *\n       *   constructor(private ref: ChangeDetectorRef) {\n       *     setInterval(() => {\n       *       this.numberOfTicks++;\n       *       // the following is required, otherwise the view will not be updated\n       *       this.ref.markForCheck();\n       *     }, 1000);\n       *   }\n       * }\n       * ```\n       */\n    function () { markViewDirty(this._view); };\n    /**\n     * Detaches the view from the change detection tree.\n     *\n     * Detached views will not be checked during change detection runs until they are\n     * re-attached, even if they are dirty. `detach` can be used in combination with\n     * {@link ChangeDetectorRef#detectChanges detectChanges} to implement local change\n     * detection checks.\n     *\n     * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n     * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n     *\n     * ### Example\n     *\n     * The following example defines a component with a large list of readonly data.\n     * Imagine the data changes constantly, many times per second. For performance reasons,\n     * we want to check and update the list every five seconds. We can do that by detaching\n     * the component's change detector and doing a local check every five seconds.\n     *\n     * ```typescript\n     * class DataProvider {\n     *   // in a real application the returned data will be different every time\n     *   get data() {\n     *     return [1,2,3,4,5];\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'giant-list',\n     *   template: `\n     *     <li *ngFor=\"let d of dataProvider.data\">Data {{d}}</li>\n     *   `,\n     * })\n     * class GiantList {\n     *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {\n     *     ref.detach();\n     *     setInterval(() => {\n     *       this.ref.detectChanges();\n     *     }, 5000);\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'app',\n     *   providers: [DataProvider],\n     *   template: `\n     *     <giant-list><giant-list>\n     *   `,\n     * })\n     * class App {\n     * }\n     * ```\n     */\n    /**\n       * Detaches the view from the change detection tree.\n       *\n       * Detached views will not be checked during change detection runs until they are\n       * re-attached, even if they are dirty. `detach` can be used in combination with\n       * {@link ChangeDetectorRef#detectChanges detectChanges} to implement local change\n       * detection checks.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n       *\n       * ### Example\n       *\n       * The following example defines a component with a large list of readonly data.\n       * Imagine the data changes constantly, many times per second. For performance reasons,\n       * we want to check and update the list every five seconds. We can do that by detaching\n       * the component's change detector and doing a local check every five seconds.\n       *\n       * ```typescript\n       * class DataProvider {\n       *   // in a real application the returned data will be different every time\n       *   get data() {\n       *     return [1,2,3,4,5];\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'giant-list',\n       *   template: `\n       *     <li *ngFor=\"let d of dataProvider.data\">Data {{d}}</li>\n       *   `,\n       * })\n       * class GiantList {\n       *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {\n       *     ref.detach();\n       *     setInterval(() => {\n       *       this.ref.detectChanges();\n       *     }, 5000);\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'app',\n       *   providers: [DataProvider],\n       *   template: `\n       *     <giant-list><giant-list>\n       *   `,\n       * })\n       * class App {\n       * }\n       * ```\n       */\n    ViewRef.prototype.detach = /**\n       * Detaches the view from the change detection tree.\n       *\n       * Detached views will not be checked during change detection runs until they are\n       * re-attached, even if they are dirty. `detach` can be used in combination with\n       * {@link ChangeDetectorRef#detectChanges detectChanges} to implement local change\n       * detection checks.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n       *\n       * ### Example\n       *\n       * The following example defines a component with a large list of readonly data.\n       * Imagine the data changes constantly, many times per second. For performance reasons,\n       * we want to check and update the list every five seconds. We can do that by detaching\n       * the component's change detector and doing a local check every five seconds.\n       *\n       * ```typescript\n       * class DataProvider {\n       *   // in a real application the returned data will be different every time\n       *   get data() {\n       *     return [1,2,3,4,5];\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'giant-list',\n       *   template: `\n       *     <li *ngFor=\"let d of dataProvider.data\">Data {{d}}</li>\n       *   `,\n       * })\n       * class GiantList {\n       *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {\n       *     ref.detach();\n       *     setInterval(() => {\n       *       this.ref.detectChanges();\n       *     }, 5000);\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'app',\n       *   providers: [DataProvider],\n       *   template: `\n       *     <giant-list><giant-list>\n       *   `,\n       * })\n       * class App {\n       * }\n       * ```\n       */\n    function () { this._view.flags &= ~8 /* Attached */; };\n    /**\n     * Re-attaches a view to the change detection tree.\n     *\n     * This can be used to re-attach views that were previously detached from the tree\n     * using {@link ChangeDetectorRef#detach detach}. Views are attached to the tree by default.\n     *\n     * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n     *\n     * ### Example ([live demo](https://stackblitz.com/edit/angular-ymgsxw))\n     *\n     * The following example creates a component displaying `live` data. The component will detach\n     * its change detector from the main change detector tree when the component's live property\n     * is set to false.\n     *\n     * ```typescript\n     * class DataProvider {\n     *   data = 1;\n     *\n     *   constructor() {\n     *     setInterval(() => {\n     *       this.data = this.data * 2;\n     *     }, 500);\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'live-data',\n     *   inputs: ['live'],\n     *   template: 'Data: {{dataProvider.data}}'\n     * })\n     * class LiveData {\n     *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {}\n     *\n     *   set live(value) {\n     *     if (value) {\n     *       this.ref.reattach();\n     *     } else {\n     *       this.ref.detach();\n     *     }\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'my-app',\n     *   providers: [DataProvider],\n     *   template: `\n     *     Live Update: <input type=\"checkbox\" [(ngModel)]=\"live\">\n     *     <live-data [live]=\"live\"><live-data>\n     *   `,\n     * })\n     * class AppComponent {\n     *   live = true;\n     * }\n     * ```\n     */\n    /**\n       * Re-attaches a view to the change detection tree.\n       *\n       * This can be used to re-attach views that were previously detached from the tree\n       * using {@link ChangeDetectorRef#detach detach}. Views are attached to the tree by default.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       *\n       * ### Example ([live demo](https://stackblitz.com/edit/angular-ymgsxw))\n       *\n       * The following example creates a component displaying `live` data. The component will detach\n       * its change detector from the main change detector tree when the component's live property\n       * is set to false.\n       *\n       * ```typescript\n       * class DataProvider {\n       *   data = 1;\n       *\n       *   constructor() {\n       *     setInterval(() => {\n       *       this.data = this.data * 2;\n       *     }, 500);\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'live-data',\n       *   inputs: ['live'],\n       *   template: 'Data: {{dataProvider.data}}'\n       * })\n       * class LiveData {\n       *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {}\n       *\n       *   set live(value) {\n       *     if (value) {\n       *       this.ref.reattach();\n       *     } else {\n       *       this.ref.detach();\n       *     }\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'my-app',\n       *   providers: [DataProvider],\n       *   template: `\n       *     Live Update: <input type=\"checkbox\" [(ngModel)]=\"live\">\n       *     <live-data [live]=\"live\"><live-data>\n       *   `,\n       * })\n       * class AppComponent {\n       *   live = true;\n       * }\n       * ```\n       */\n    ViewRef.prototype.reattach = /**\n       * Re-attaches a view to the change detection tree.\n       *\n       * This can be used to re-attach views that were previously detached from the tree\n       * using {@link ChangeDetectorRef#detach detach}. Views are attached to the tree by default.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       *\n       * ### Example ([live demo](https://stackblitz.com/edit/angular-ymgsxw))\n       *\n       * The following example creates a component displaying `live` data. The component will detach\n       * its change detector from the main change detector tree when the component's live property\n       * is set to false.\n       *\n       * ```typescript\n       * class DataProvider {\n       *   data = 1;\n       *\n       *   constructor() {\n       *     setInterval(() => {\n       *       this.data = this.data * 2;\n       *     }, 500);\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'live-data',\n       *   inputs: ['live'],\n       *   template: 'Data: {{dataProvider.data}}'\n       * })\n       * class LiveData {\n       *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {}\n       *\n       *   set live(value) {\n       *     if (value) {\n       *       this.ref.reattach();\n       *     } else {\n       *       this.ref.detach();\n       *     }\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'my-app',\n       *   providers: [DataProvider],\n       *   template: `\n       *     Live Update: <input type=\"checkbox\" [(ngModel)]=\"live\">\n       *     <live-data [live]=\"live\"><live-data>\n       *   `,\n       * })\n       * class AppComponent {\n       *   live = true;\n       * }\n       * ```\n       */\n    function () { this._view.flags |= 8 /* Attached */; };\n    /**\n     * Checks the view and its children.\n     *\n     * This can also be used in combination with {@link ChangeDetectorRef#detach detach} to implement\n     * local change detection checks.\n     *\n     * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n     * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n     *\n     * ### Example\n     *\n     * The following example defines a component with a large list of readonly data.\n     * Imagine, the data changes constantly, many times per second. For performance reasons,\n     * we want to check and update the list every five seconds.\n     *\n     * We can do that by detaching the component's change detector and doing a local change detection\n     * check every five seconds.\n     *\n     * See {@link ChangeDetectorRef#detach detach} for more information.\n     */\n    /**\n       * Checks the view and its children.\n       *\n       * This can also be used in combination with {@link ChangeDetectorRef#detach detach} to implement\n       * local change detection checks.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n       *\n       * ### Example\n       *\n       * The following example defines a component with a large list of readonly data.\n       * Imagine, the data changes constantly, many times per second. For performance reasons,\n       * we want to check and update the list every five seconds.\n       *\n       * We can do that by detaching the component's change detector and doing a local change detection\n       * check every five seconds.\n       *\n       * See {@link ChangeDetectorRef#detach detach} for more information.\n       */\n    ViewRef.prototype.detectChanges = /**\n       * Checks the view and its children.\n       *\n       * This can also be used in combination with {@link ChangeDetectorRef#detach detach} to implement\n       * local change detection checks.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n       *\n       * ### Example\n       *\n       * The following example defines a component with a large list of readonly data.\n       * Imagine, the data changes constantly, many times per second. For performance reasons,\n       * we want to check and update the list every five seconds.\n       *\n       * We can do that by detaching the component's change detector and doing a local change detection\n       * check every five seconds.\n       *\n       * See {@link ChangeDetectorRef#detach detach} for more information.\n       */\n    function () { detectChanges(this.context); };\n    /**\n     * Checks the change detector and its children, and throws if any changes are detected.\n     *\n     * This is used in development mode to verify that running change detection doesn't\n     * introduce other changes.\n     */\n    /**\n       * Checks the change detector and its children, and throws if any changes are detected.\n       *\n       * This is used in development mode to verify that running change detection doesn't\n       * introduce other changes.\n       */\n    ViewRef.prototype.checkNoChanges = /**\n       * Checks the change detector and its children, and throws if any changes are detected.\n       *\n       * This is used in development mode to verify that running change detection doesn't\n       * introduce other changes.\n       */\n    function () { checkNoChanges(this.context); };\n    return ViewRef;\n}());\nvar EmbeddedViewRef$1 = /** @class */ (function (_super) {\n    __extends(EmbeddedViewRef, _super);\n    function EmbeddedViewRef(viewNode, template, context) {\n        var _this = _super.call(this, viewNode.data, context) || this;\n        _this._lViewNode = viewNode;\n        return _this;\n    }\n    return EmbeddedViewRef;\n}(ViewRef$1));\n/**\n * Creates a ViewRef bundled with destroy functionality.\n *\n * @param context The context for this view\n * @returns The ViewRef\n */\n\n/**\n * Decorates an object with destroy logic (implementing the DestroyRef interface)\n * and returns the enhanced object.\n *\n * @param obj The object to decorate\n * @returns The object with destroy logic\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Bootstraps a component, then creates and returns a `ComponentRef` for that component.\n *\n * @param componentType Component to bootstrap\n * @param options Optional parameters which control bootstrapping\n */\n\n// TODO: A hack to not pull in the NullInjector from @angular/core.\n\n/**\n * Bootstraps a Component into an existing host element and returns an instance\n * of the component.\n *\n * Use this function to bootstrap a component into the DOM tree. Each invocation\n * of this function will create a separate tree of components, injectors and\n * change detection cycles and lifetimes. To dynamically insert a new component\n * into an existing tree such that it shares the same injection, change detection\n * and object lifetime, use {@link ViewContainer#createComponent}.\n *\n * @param componentType Component to bootstrap\n * @param options Optional parameters which control bootstrapping\n */\n\n/**\n * Used to enable lifecycle hooks on the root component.\n *\n * Include this feature when calling `renderComponent` if the root component\n * you are rendering has lifecycle hooks defined. Otherwise, the hooks won't\n * be called properly.\n *\n * Example:\n *\n * ```\n * renderComponent(AppComponent, {features: [RootLifecycleHooks]});\n * ```\n */\n\n/**\n * Retrieve the host element of the component.\n *\n * Use this function to retrieve the host element of the component. The host\n * element is the element which the component is associated with.\n *\n * @param component Component for which the host element should be retrieved.\n */\n\n/**\n * Retrieves the rendered text for a given component.\n *\n * This function retrieves the host element of a component and\n * and then returns the `textContent` for that element. This implies\n * that the text returned will include re-projected content of\n * the component as well.\n *\n * @param component The component to return the content text for.\n */\n\n/**\n * Wait on component until it is rendered.\n *\n * This function returns a `Promise` which is resolved when the component's\n * change detection is executed. This is determined by finding the scheduler\n * associated with the `component`'s render tree and waiting until the scheduler\n * flushes. If nothing is scheduled, the function returns a resolved promise.\n *\n * Example:\n * ```\n * await whenRendered(myComponent);\n * ```\n *\n * @param component Component to wait upon\n * @returns Promise which resolves when the component is rendered.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Registers this directive as present in its node's injector by flipping the directive's\n * corresponding bit in the injector's bloom filter.\n *\n * @param injector The node injector in which the directive should be registered\n * @param type The directive to register\n */\n\n\n/**\n * Creates (or gets an existing) injector for a given element or container.\n *\n * @param node for which an injector should be retrieved / created.\n * @returns Node injector\n */\n\n/**\n * Makes a directive public to the DI system by adding it to an injector's bloom filter.\n *\n * @param di The node injector in which a directive will be added\n * @param def The definition of the directive to be made public\n */\n\n/**\n * Makes a directive public to the DI system by adding it to an injector's bloom filter.\n *\n * @param def The definition of the directive to be made public\n */\n\n\n/**\n * Creates an ElementRef and stores it on the injector.\n * Or, if the ElementRef already exists, retrieves the existing ElementRef.\n *\n * @returns The ElementRef instance to use\n */\n\n/**\n * Creates a TemplateRef and stores it on the injector. Or, if the TemplateRef already\n * exists, retrieves the existing TemplateRef.\n *\n * @returns The TemplateRef instance to use\n */\n\n/**\n * Creates a ViewContainerRef and stores it on the injector. Or, if the ViewContainerRef\n * already exists, retrieves the existing ViewContainerRef.\n *\n * @returns The ViewContainerRef instance to use\n */\n\n/** Returns a ChangeDetectorRef (a.k.a. a ViewRef) */\n\n/**\n * Inject static attribute value into directive constructor.\n *\n * This method is used with `factory` functions which are generated as part of\n * `defineDirective` or `defineComponent`. The method retrieves the static value\n * of an attribute. (Dynamic attributes are not supported since they are not resolved\n *  at the time of injection and can change over time.)\n *\n * # Example\n * Given:\n * ```\n * @Component(...)\n * class MyComponent {\n *   constructor(@Attribute('title') title: string) { ... }\n * }\n * ```\n * When instantiated with\n * ```\n * <my-component title=\"Hello\"></my-component>\n * ```\n *\n * Then factory method generated is:\n * ```\n * MyComponent.ngComponentDef = defineComponent({\n *   factory: () => new MyComponent(injectAttribute('title'))\n *   ...\n * })\n * ```\n *\n * @experimental\n */\n\n/**\n * Creates a ViewRef and stores it on the injector as ChangeDetectorRef (public alias).\n * Or, if it already exists, retrieves the existing instance.\n *\n * @returns The ChangeDetectorRef to use\n */\n\n/**\n * Searches for an instance of the given directive type up the injector tree and returns\n * that instance if found.\n *\n * Specifically, it gets the bloom filter bit associated with the directive (see bloomHashBit),\n * checks that bit against the bloom filter structure to identify an injector that might have\n * the directive (see bloomFindPossibleInjector), then searches the directives on that injector\n * for a match.\n *\n * If not found, it will propagate up to the next parent injector until the token\n * is found or the top is reached.\n *\n * @param di Node injector where the search should start\n * @param token The directive type to search for\n * @param flags Injection flags (e.g. CheckParent)\n * @returns The instance found\n */\n\n/**\n * Finds the closest injector that might have a certain directive.\n *\n * Each directive corresponds to a bit in an injector's bloom filter. Given the bloom bit to\n * check and a starting injector, this function traverses up injectors until it finds an\n * injector that contains a 1 for that bit in its bloom filter. A 1 indicates that the\n * injector may have that directive. It only *may* have the directive because directives begin\n * to share bloom filter bits after the BLOOM_SIZE is reached, and it could correspond to a\n * different directive sharing the bit.\n *\n * Note: We can skip checking further injectors up the tree if an injector's cbf structure\n * has a 0 for that bloom bit. Since cbf contains the merged value of all the parent\n * injectors, a 0 in the bloom bit indicates that the parents definitely do not contain\n * the directive and do not need to be checked.\n *\n * @param injector The starting node injector to check\n * @param  bloomBit The bit to check in each injector's bloom filter\n * @returns An injector that might have the directive\n */\n\n/**\n * Creates an ElementRef for a given node injector and stores it on the injector.\n * Or, if the ElementRef already exists, retrieves the existing ElementRef.\n *\n * @param di The node injector where we should store a created ElementRef\n * @returns The ElementRef instance to use\n */\n\n\n\n\n\n/**\n * Creates a ViewContainerRef and stores it on the injector. Or, if the ViewContainerRef\n * already exists, retrieves the existing ViewContainerRef.\n *\n * @returns The ViewContainerRef instance to use\n */\n\n/**\n * A ref to a container that enables adding and removing views from that container\n * imperatively.\n */\nvar ViewContainerRef$1 = /** @class */ (function () {\n    function ViewContainerRef(_lContainerNode) {\n        this._lContainerNode = _lContainerNode;\n        this._viewRefs = [];\n    }\n    ViewContainerRef.prototype.clear = function () {\n        var lContainer = this._lContainerNode.data;\n        while (lContainer.views.length) {\n            this.remove(0);\n        }\n    };\n    ViewContainerRef.prototype.get = function (index) { return this._viewRefs[index] || null; };\n    Object.defineProperty(ViewContainerRef.prototype, \"length\", {\n        get: function () {\n            var lContainer = this._lContainerNode.data;\n            return lContainer.views.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ViewContainerRef.prototype.createEmbeddedView = function (templateRef, context, index) {\n        var viewRef = templateRef.createEmbeddedView(context || {});\n        this.insert(viewRef, index);\n        return viewRef;\n    };\n    ViewContainerRef.prototype.createComponent = function (componentFactory, index, injector, projectableNodes, ngModule) {\n        throw notImplemented();\n    };\n    ViewContainerRef.prototype.insert = function (viewRef, index) {\n        var lViewNode = viewRef._lViewNode;\n        var adjustedIdx = this._adjustIndex(index);\n        insertView(this._lContainerNode, lViewNode, adjustedIdx);\n        // invalidate cache of next sibling RNode (we do similar operation in the containerRefreshEnd\n        // instruction)\n        this._lContainerNode.native = undefined;\n        this._viewRefs.splice(adjustedIdx, 0, viewRef);\n        lViewNode.parent = this._lContainerNode;\n        // If the view is dynamic (has a template), it needs to be counted both at the container\n        // level and at the node above the container.\n        if (lViewNode.data.template !== null) {\n            // Increment the container view count.\n            this._lContainerNode.data.dynamicViewCount++;\n            // Look for the parent node and increment its dynamic view count.\n            if (this._lContainerNode.parent !== null && this._lContainerNode.parent.data !== null) {\n                ngDevMode && assertNodeOfPossibleTypes(this._lContainerNode.parent, 2 /* View */, 3 /* Element */);\n                this._lContainerNode.parent.data.dynamicViewCount++;\n            }\n        }\n        return viewRef;\n    };\n    ViewContainerRef.prototype.move = function (viewRef, newIndex) {\n        var index = this.indexOf(viewRef);\n        this.detach(index);\n        this.insert(viewRef, this._adjustIndex(newIndex));\n        return viewRef;\n    };\n    ViewContainerRef.prototype.indexOf = function (viewRef) { return this._viewRefs.indexOf(viewRef); };\n    ViewContainerRef.prototype.remove = function (index) {\n        this.detach(index);\n        // TODO(ml): proper destroy of the ViewRef, i.e. recursively destroy the LviewNode and its\n        // children, delete DOM nodes and QueryList, trigger hooks (onDestroy), destroy the renderer,\n        // detach projected nodes\n    };\n    ViewContainerRef.prototype.detach = function (index) {\n        var adjustedIdx = this._adjustIndex(index, -1);\n        removeView(this._lContainerNode, adjustedIdx);\n        return this._viewRefs.splice(adjustedIdx, 1)[0] || null;\n    };\n    ViewContainerRef.prototype._adjustIndex = function (index, shift) {\n        if (shift === void 0) { shift = 0; }\n        if (index == null) {\n            return this._lContainerNode.data.views.length + shift;\n        }\n        if (ngDevMode) {\n            assertGreaterThan(index, -1, 'index must be positive');\n            // +1 because it's legal to insert at the end.\n            assertLessThan(index, this._lContainerNode.data.views.length + 1 + shift, 'index');\n        }\n        return index;\n    };\n    return ViewContainerRef;\n}());\n/**\n * Creates a TemplateRef and stores it on the injector. Or, if the TemplateRef already\n * exists, retrieves the existing TemplateRef.\n *\n * @param di The node injector where we should store a created TemplateRef\n * @returns The TemplateRef instance to use\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create a component definition object.\n *\n *\n * # Example\n * ```\n * class MyDirective {\n *   // Generated by Angular Template Compiler\n *   // [Symbol] syntax will not be supported by TypeScript until v2.7\n *   static ngComponentDef = defineComponent({\n *     ...\n *   });\n * }\n * ```\n */\n\n\n\n/**\n * Creates an NgOnChangesFeature function for a component's features list.\n *\n * It accepts an optional map of minified input property names to original property names,\n * if any input properties have a public alias.\n *\n * The NgOnChangesFeature function that is returned decorates a component with support for\n * the ngOnChanges lifecycle hook, so it should be included in any component that implements\n * that hook.\n *\n * Example usage:\n *\n * ```\n * static ngComponentDef = defineComponent({\n *   ...\n *   inputs: {name: 'publicName'},\n *   features: [NgOnChangesFeature({name: 'name'})]\n * });\n * ```\n *\n * @param inputPropertyNames Map of input property names, if they are aliased\n * @returns DirectiveDefFeature\n */\n\n\n/**\n * Create a directive definition object.\n *\n * # Example\n * ```\n * class MyDirective {\n *   // Generated by Angular Template Compiler\n *   // [Symbol] syntax will not be supported by TypeScript until v2.7\n *   static ngDirectiveDef = defineDirective({\n *     ...\n *   });\n * }\n * ```\n */\n\n/**\n * Create a pipe definition object.\n *\n * # Example\n * ```\n * class MyPipe implements PipeTransform {\n *   // Generated by Angular Template Compiler\n *   static ngPipeDef = definePipe({\n *     ...\n *   });\n * }\n * ```\n * @param pipeDef Pipe definition generated by the compiler\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * If the value hasn't been saved, calls the pure function to store and return the\n * value. If it has been saved, returns the saved value.\n *\n * @param pureFn Function that returns a value\n * @returns value\n */\n\n/**\n * If the value of the provided exp has changed, calls the pure function to return\n * an updated value. Or if the value has not changed, returns cached value.\n *\n * @param pureFn Function that returns an updated value\n * @param exp Updated expression value\n * @returns Updated value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn\n * @param exp1\n * @param exp2\n * @returns Updated value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @returns Updated value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param exp4\n * @returns Updated value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param exp4\n * @param exp5\n * @returns Updated value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param exp4\n * @param exp5\n * @param exp6\n * @returns Updated value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param exp4\n * @param exp5\n * @param exp6\n * @param exp7\n * @returns Updated value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param exp4\n * @param exp5\n * @param exp6\n * @param exp7\n * @param exp8\n * @returns Updated value\n */\n\n/**\n * pureFunction instruction that can support any number of bindings.\n *\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn A pure function that takes binding values and builds an object or array\n * containing those values.\n * @param exp An array of binding values\n * @returns Updated value\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create a pipe.\n *\n * @param index Pipe index where the pipe will be stored.\n * @param pipeName The name of the pipe\n * @returns T the instance of the pipe.\n */\n\n/**\n * Invokes a pipe with 1 arguments.\n *\n * This instruction acts as a guard to {@link PipeTransform#transform} invoking\n * the pipe only when an input to the pipe changes.\n *\n * @param index Pipe index where the pipe was stored on creation.\n * @param v1 1st argument to {@link PipeTransform#transform}.\n */\n\n/**\n * Invokes a pipe with 2 arguments.\n *\n * This instruction acts as a guard to {@link PipeTransform#transform} invoking\n * the pipe only when an input to the pipe changes.\n *\n * @param index Pipe index where the pipe was stored on creation.\n * @param v1 1st argument to {@link PipeTransform#transform}.\n * @param v2 2nd argument to {@link PipeTransform#transform}.\n */\n\n/**\n * Invokes a pipe with 3 arguments.\n *\n * This instruction acts as a guard to {@link PipeTransform#transform} invoking\n * the pipe only when an input to the pipe changes.\n *\n * @param index Pipe index where the pipe was stored on creation.\n * @param v1 1st argument to {@link PipeTransform#transform}.\n * @param v2 2nd argument to {@link PipeTransform#transform}.\n * @param v3 4rd argument to {@link PipeTransform#transform}.\n */\n\n/**\n * Invokes a pipe with 4 arguments.\n *\n * This instruction acts as a guard to {@link PipeTransform#transform} invoking\n * the pipe only when an input to the pipe changes.\n *\n * @param index Pipe index where the pipe was stored on creation.\n * @param v1 1st argument to {@link PipeTransform#transform}.\n * @param v2 2nd argument to {@link PipeTransform#transform}.\n * @param v3 3rd argument to {@link PipeTransform#transform}.\n * @param v4 4th argument to {@link PipeTransform#transform}.\n */\n\n/**\n * Invokes a pipe with variable number of arguments.\n *\n * This instruction acts as a guard to {@link PipeTransform#transform} invoking\n * the pipe only when an input to the pipe changes.\n *\n * @param index Pipe index where the pipe was stored on creation.\n * @param values Array of arguments to pass to {@link PipeTransform#transform} method.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar QueryList_ = /** @class */ (function () {\n    function QueryList_() {\n        this.dirty = true;\n        this.changes = new EventEmitter();\n        this._values = [];\n        /** @internal */\n        this._valuesTree = [];\n    }\n    Object.defineProperty(QueryList_.prototype, \"length\", {\n        get: function () { return this._values.length; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QueryList_.prototype, \"first\", {\n        get: function () {\n            var values = this._values;\n            return values.length ? values[0] : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QueryList_.prototype, \"last\", {\n        get: function () {\n            var values = this._values;\n            return values.length ? values[values.length - 1] : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * See\n     * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n     */\n    /**\n       * See\n       * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n       */\n    QueryList_.prototype.map = /**\n       * See\n       * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n       */\n    function (fn) { return this._values.map(fn); };\n    /**\n     * See\n     * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n     */\n    /**\n       * See\n       * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n       */\n    QueryList_.prototype.filter = /**\n       * See\n       * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n       */\n    function (fn) {\n        return this._values.filter(fn);\n    };\n    /**\n     * See\n     * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n     */\n    /**\n       * See\n       * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n       */\n    QueryList_.prototype.find = /**\n       * See\n       * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n       */\n    function (fn) {\n        return this._values.find(fn);\n    };\n    /**\n     * See\n     * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n     */\n    /**\n       * See\n       * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n       */\n    QueryList_.prototype.reduce = /**\n       * See\n       * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n       */\n    function (fn, init) {\n        return this._values.reduce(fn, init);\n    };\n    /**\n     * See\n     * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n     */\n    /**\n       * See\n       * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n       */\n    QueryList_.prototype.forEach = /**\n       * See\n       * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n       */\n    function (fn) { this._values.forEach(fn); };\n    /**\n     * See\n     * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n     */\n    /**\n       * See\n       * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n       */\n    QueryList_.prototype.some = /**\n       * See\n       * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n       */\n    function (fn) {\n        return this._values.some(fn);\n    };\n    QueryList_.prototype.toArray = function () { return this._values.slice(0); };\n    QueryList_.prototype[getSymbolIterator()] = function () { return this._values[getSymbolIterator()](); };\n    QueryList_.prototype.toString = function () { return this._values.toString(); };\n    QueryList_.prototype.reset = function (res) {\n        this._values = flatten$3(res);\n        this.dirty = false;\n    };\n    QueryList_.prototype.notifyOnChanges = function () { this.changes.emit(this); };\n    QueryList_.prototype.setDirty = function () { this.dirty = true; };\n    QueryList_.prototype.destroy = function () {\n        this.changes.complete();\n        this.changes.unsubscribe();\n    };\n    return QueryList_;\n}());\n\n/**\n * Creates and returns a QueryList.\n *\n * @param memoryIndex The index in memory where the QueryList should be saved. If null,\n * this is is a content query and the QueryList will be saved later through directiveCreate.\n * @param predicate The type for which the query will search\n * @param descend Whether or not to descend into children\n * @param read What to save in the query\n * @returns QueryList<T>\n */\n\n/**\n * Refreshes a query by combining matches from all active views and removing matches from deleted\n * views.\n * Returns true if a query got dirty during change detection, false otherwise.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An `html` sanitizer which converts untrusted `html` **string** into trusted string by removing\n * dangerous content.\n *\n * This method parses the `html` and locates potentially dangerous content (such as urls and\n * javascript) and removes it.\n *\n * It is possible to mark a string as trusted by calling {@link bypassSanitizationTrustHtml}.\n *\n * @param unsafeHtml untrusted `html`, typically from the user.\n * @returns `html` string which is safe to display to user, because all of the dangerous javascript\n * and urls have been removed.\n */\n\n/**\n * A `style` sanitizer which converts untrusted `style` **string** into trusted string by removing\n * dangerous content.\n *\n * This method parses the `style` and locates potentially dangerous content (such as urls and\n * javascript) and removes it.\n *\n * It is possible to mark a string as trusted by calling {@link bypassSanitizationTrustStyle}.\n *\n * @param unsafeStyle untrusted `style`, typically from the user.\n * @returns `style` string which is safe to bind to the `style` properties, because all of the\n * dangerous javascript and urls have been removed.\n */\n\n/**\n * A `url` sanitizer which converts untrusted `url` **string** into trusted string by removing\n * dangerous\n * content.\n *\n * This method parses the `url` and locates potentially dangerous content (such as javascript) and\n * removes it.\n *\n * It is possible to mark a string as trusted by calling {@link bypassSanitizationTrustUrl}.\n *\n * @param unsafeUrl untrusted `url`, typically from the user.\n * @returns `url` string which is safe to bind to the `src` properties such as `<img src>`, because\n * all of the dangerous javascript has been removed.\n */\n\n/**\n * A `url` sanitizer which only lets trusted `url`s through.\n *\n * This passes only `url`s marked trusted by calling {@link bypassSanitizationTrustResourceUrl}.\n *\n * @param unsafeResourceUrl untrusted `url`, typically from the user.\n * @returns `url` string which is safe to bind to the `src` properties such as `<img src>`, because\n * only trusted `url`s have been allowed to pass.\n */\n\n/**\n * A `script` sanitizer which only lets trusted javascript through.\n *\n * This passes only `script`s marked trusted by calling {@link bypassSanitizationTrustScript}.\n *\n * @param unsafeScript untrusted `script`, typically from the user.\n * @returns `url` string which is safe to bind to the `<script>` element such as `<img src>`,\n * because only trusted `scripts`s have been allowed to pass.\n */\n\n/**\n * Mark `html` string as trusted.\n *\n * This function wraps the trusted string in `String` and brands it in a way which makes it\n * recognizable to {@link htmlSanitizer} to be trusted implicitly.\n *\n * @param trustedHtml `html` string which needs to be implicitly trusted.\n * @returns a `html` `String` which has been branded to be implicitly trusted.\n */\n\n/**\n * Mark `style` string as trusted.\n *\n * This function wraps the trusted string in `String` and brands it in a way which makes it\n * recognizable to {@link styleSanitizer} to be trusted implicitly.\n *\n * @param trustedStyle `style` string which needs to be implicitly trusted.\n * @returns a `style` `String` which has been branded to be implicitly trusted.\n */\n\n/**\n * Mark `script` string as trusted.\n *\n * This function wraps the trusted string in `String` and brands it in a way which makes it\n * recognizable to {@link scriptSanitizer} to be trusted implicitly.\n *\n * @param trustedScript `script` string which needs to be implicitly trusted.\n * @returns a `script` `String` which has been branded to be implicitly trusted.\n */\n\n/**\n * Mark `url` string as trusted.\n *\n * This function wraps the trusted string in `String` and brands it in a way which makes it\n * recognizable to {@link urlSanitizer} to be trusted implicitly.\n *\n * @param trustedUrl `url` string which needs to be implicitly trusted.\n * @returns a `url` `String` which has been branded to be implicitly trusted.\n */\n\n/**\n * Mark `url` string as trusted.\n *\n * This function wraps the trusted string in `String` and brands it in a way which makes it\n * recognizable to {@link resourceUrlSanitizer} to be trusted implicitly.\n *\n * @param trustedResourceUrl `url` string which needs to be implicitly trusted.\n * @returns a `url` `String` which has been branded to be implicitly trusted.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n// clang-format on\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n// This file only reexports content of the `src` folder. Keep it that way.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ReflectorModuleModuleResolutionHost = /** @class */ (function () {\n    function ReflectorModuleModuleResolutionHost(host, getProgram) {\n        var _this = this;\n        this.host = host;\n        this.getProgram = getProgram;\n        // Note: verboseInvalidExpressions is important so that\n        // the collector will collect errors instead of throwing\n        this.metadataCollector = new MetadataCollector({ verboseInvalidExpression: true });\n        if (host.directoryExists)\n            this.directoryExists = function (directoryName) { return _this.host.directoryExists(directoryName); };\n    }\n    ReflectorModuleModuleResolutionHost.prototype.fileExists = function (fileName) { return !!this.host.getScriptSnapshot(fileName); };\n    ReflectorModuleModuleResolutionHost.prototype.readFile = function (fileName) {\n        var snapshot = this.host.getScriptSnapshot(fileName);\n        if (snapshot) {\n            return snapshot.getText(0, snapshot.getLength());\n        }\n        // Typescript readFile() declaration should be `readFile(fileName: string): string | undefined\n        return undefined;\n    };\n    ReflectorModuleModuleResolutionHost.prototype.getSourceFileMetadata = function (fileName) {\n        var sf = this.getProgram().getSourceFile(fileName);\n        return sf ? this.metadataCollector.getMetadata(sf) : undefined;\n    };\n    ReflectorModuleModuleResolutionHost.prototype.cacheMetadata = function (fileName) {\n        // Don't cache the metadata for .ts files as they might change in the editor!\n        return fileName.endsWith('.d.ts');\n    };\n    return ReflectorModuleModuleResolutionHost;\n}());\nvar ReflectorHost = /** @class */ (function () {\n    function ReflectorHost(getProgram, serviceHost, options) {\n        this.options = options;\n        this.metadataReaderCache = createMetadataReaderCache();\n        this.hostAdapter = new ReflectorModuleModuleResolutionHost(serviceHost, getProgram);\n        this.moduleResolutionCache =\n            ts.createModuleResolutionCache(serviceHost.getCurrentDirectory(), function (s) { return s; });\n    }\n    ReflectorHost.prototype.getMetadataFor = function (modulePath) {\n        return readMetadata(modulePath, this.hostAdapter, this.metadataReaderCache);\n    };\n    ReflectorHost.prototype.moduleNameToFileName = function (moduleName, containingFile) {\n        if (!containingFile) {\n            if (moduleName.indexOf('.') === 0) {\n                throw new Error('Resolution of relative paths requires a containing file.');\n            }\n            // Any containing file gives the same result for absolute imports\n            containingFile = path.join(this.options.basePath, 'index.ts').replace(/\\\\/g, '/');\n        }\n        var resolved = ts.resolveModuleName(moduleName, containingFile, this.options, this.hostAdapter)\n            .resolvedModule;\n        return resolved ? resolved.resolvedFileName : null;\n    };\n    ReflectorHost.prototype.getOutputName = function (filePath) { return filePath; };\n    return ReflectorHost;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create a `LanguageServiceHost`\n */\nfunction createLanguageServiceFromTypescript(host, service) {\n    var ngHost = new TypeScriptServiceHost(host, service);\n    var ngServer = createLanguageService(ngHost);\n    ngHost.setSite(ngServer);\n    return ngServer;\n}\n/**\n * The language service never needs the normalized versions of the metadata. To avoid parsing\n * the content and resolving references, return an empty file. This also allows normalizing\n * template that are syntatically incorrect which is required to provide completions in\n * syntactically incorrect templates.\n */\nvar DummyHtmlParser = /** @class */ (function (_super) {\n    __extends(DummyHtmlParser, _super);\n    function DummyHtmlParser() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DummyHtmlParser.prototype.parse = function (source, url, parseExpansionForms, interpolationConfig) {\n        if (parseExpansionForms === void 0) { parseExpansionForms = false; }\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        return new ParseTreeResult([], []);\n    };\n    return DummyHtmlParser;\n}(HtmlParser));\n/**\n * Avoid loading resources in the language servcie by using a dummy loader.\n */\nvar DummyResourceLoader = /** @class */ (function (_super) {\n    __extends(DummyResourceLoader, _super);\n    function DummyResourceLoader() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DummyResourceLoader.prototype.get = function (url) { return Promise.resolve(''); };\n    return DummyResourceLoader;\n}(ResourceLoader));\n/**\n * An implementation of a `LanguageServiceHost` for a TypeScript project.\n *\n * The `TypeScriptServiceHost` implements the Angular `LanguageServiceHost` using\n * the TypeScript language services.\n *\n * @experimental\n */\nvar TypeScriptServiceHost = /** @class */ (function () {\n    function TypeScriptServiceHost(host, tsService) {\n        this.host = host;\n        this.tsService = tsService;\n        this._staticSymbolCache = new StaticSymbolCache();\n        this._typeCache = [];\n        this.modulesOutOfDate = true;\n        this.fileVersions = new Map();\n    }\n    TypeScriptServiceHost.prototype.setSite = function (service) { this.service = service; };\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"resolver\", {\n        /**\n         * Angular LanguageServiceHost implementation\n         */\n        get: function () {\n            var _this = this;\n            this.validate();\n            var result = this._resolver;\n            if (!result) {\n                var moduleResolver = new NgModuleResolver(this.reflector);\n                var directiveResolver = new DirectiveResolver(this.reflector);\n                var pipeResolver = new PipeResolver(this.reflector);\n                var elementSchemaRegistry = new DomElementSchemaRegistry();\n                var resourceLoader = new DummyResourceLoader();\n                var urlResolver = createOfflineCompileUrlResolver();\n                var htmlParser = new DummyHtmlParser();\n                // This tracks the CompileConfig in codegen.ts. Currently these options\n                // are hard-coded.\n                var config = new CompilerConfig({ defaultEncapsulation: ViewEncapsulation$1.Emulated, useJit: false });\n                var directiveNormalizer = new DirectiveNormalizer(resourceLoader, urlResolver, htmlParser, config);\n                result = this._resolver = new CompileMetadataResolver(config, htmlParser, moduleResolver, directiveResolver, pipeResolver, new JitSummaryResolver(), elementSchemaRegistry, directiveNormalizer, new Console(), this._staticSymbolCache, this.reflector, function (error, type) { return _this.collectError(error, type && type.filePath); });\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TypeScriptServiceHost.prototype.getTemplateReferences = function () {\n        this.ensureTemplateMap();\n        return this.templateReferences || [];\n    };\n    TypeScriptServiceHost.prototype.getTemplateAt = function (fileName, position) {\n        var sourceFile = this.getSourceFile(fileName);\n        if (sourceFile) {\n            this.context = sourceFile.fileName;\n            var node = this.findNode(sourceFile, position);\n            if (node) {\n                return this.getSourceFromNode(fileName, this.host.getScriptVersion(sourceFile.fileName), node);\n            }\n        }\n        else {\n            this.ensureTemplateMap();\n            // TODO: Cannocalize the file?\n            var componentType = this.fileToComponent.get(fileName);\n            if (componentType) {\n                return this.getSourceFromType(fileName, this.host.getScriptVersion(fileName), componentType);\n            }\n        }\n        return undefined;\n    };\n    TypeScriptServiceHost.prototype.getAnalyzedModules = function () {\n        this.updateAnalyzedModules();\n        return this.ensureAnalyzedModules();\n    };\n    TypeScriptServiceHost.prototype.ensureAnalyzedModules = function () {\n        var analyzedModules = this.analyzedModules;\n        if (!analyzedModules) {\n            if (this.host.getScriptFileNames().length === 0) {\n                analyzedModules = {\n                    files: [],\n                    ngModuleByPipeOrDirective: new Map(),\n                    ngModules: [],\n                };\n            }\n            else {\n                var analyzeHost = { isSourceFile: function (filePath) { return true; } };\n                var programFiles = this.program.getSourceFiles().map(function (sf) { return sf.fileName; });\n                analyzedModules =\n                    analyzeNgModules(programFiles, analyzeHost, this.staticSymbolResolver, this.resolver);\n            }\n            this.analyzedModules = analyzedModules;\n        }\n        return analyzedModules;\n    };\n    TypeScriptServiceHost.prototype.getTemplates = function (fileName) {\n        var _this = this;\n        this.ensureTemplateMap();\n        var componentType = this.fileToComponent.get(fileName);\n        if (componentType) {\n            var templateSource = this.getTemplateAt(fileName, 0);\n            if (templateSource) {\n                return [templateSource];\n            }\n        }\n        else {\n            var version_1 = this.host.getScriptVersion(fileName);\n            var result_1 = [];\n            // Find each template string in the file\n            var visit_1 = function (child) {\n                var templateSource = _this.getSourceFromNode(fileName, version_1, child);\n                if (templateSource) {\n                    result_1.push(templateSource);\n                }\n                else {\n                    ts.forEachChild(child, visit_1);\n                }\n            };\n            var sourceFile = this.getSourceFile(fileName);\n            if (sourceFile) {\n                this.context = sourceFile.path || sourceFile.fileName;\n                ts.forEachChild(sourceFile, visit_1);\n            }\n            return result_1.length ? result_1 : undefined;\n        }\n    };\n    TypeScriptServiceHost.prototype.getDeclarations = function (fileName) {\n        var _this = this;\n        var result = [];\n        var sourceFile = this.getSourceFile(fileName);\n        if (sourceFile) {\n            var visit_2 = function (child) {\n                var declaration = _this.getDeclarationFromNode(sourceFile, child);\n                if (declaration) {\n                    result.push(declaration);\n                }\n                else {\n                    ts.forEachChild(child, visit_2);\n                }\n            };\n            ts.forEachChild(sourceFile, visit_2);\n        }\n        return result;\n    };\n    TypeScriptServiceHost.prototype.getSourceFile = function (fileName) {\n        return this.tsService.getProgram().getSourceFile(fileName);\n    };\n    TypeScriptServiceHost.prototype.updateAnalyzedModules = function () {\n        this.validate();\n        if (this.modulesOutOfDate) {\n            this.analyzedModules = null;\n            this._reflector = null;\n            this.templateReferences = null;\n            this.fileToComponent = null;\n            this.ensureAnalyzedModules();\n            this.modulesOutOfDate = false;\n        }\n    };\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"program\", {\n        get: function () { return this.tsService.getProgram(); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"checker\", {\n        get: function () {\n            var checker = this._checker;\n            if (!checker) {\n                checker = this._checker = this.program.getTypeChecker();\n            }\n            return checker;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TypeScriptServiceHost.prototype.validate = function () {\n        var _this = this;\n        var program = this.program;\n        if (this.lastProgram !== program) {\n            // Invalidate file that have changed in the static symbol resolver\n            var invalidateFile = function (fileName) {\n                return _this._staticSymbolResolver.invalidateFile(fileName);\n            };\n            this.clearCaches();\n            var seen_1 = new Set();\n            try {\n                for (var _a = __values(this.program.getSourceFiles()), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var sourceFile = _b.value;\n                    var fileName = sourceFile.fileName;\n                    seen_1.add(fileName);\n                    var version$$1 = this.host.getScriptVersion(fileName);\n                    var lastVersion = this.fileVersions.get(fileName);\n                    if (version$$1 != lastVersion) {\n                        this.fileVersions.set(fileName, version$$1);\n                        if (this._staticSymbolResolver) {\n                            invalidateFile(fileName);\n                        }\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            // Remove file versions that are no longer in the file and invalidate them.\n            var missing = Array.from(this.fileVersions.keys()).filter(function (f) { return !seen_1.has(f); });\n            missing.forEach(function (f) { return _this.fileVersions.delete(f); });\n            if (this._staticSymbolResolver) {\n                missing.forEach(invalidateFile);\n            }\n            this.lastProgram = program;\n        }\n        var e_1, _c;\n    };\n    TypeScriptServiceHost.prototype.clearCaches = function () {\n        this._checker = null;\n        this._typeCache = [];\n        this._resolver = null;\n        this.collectedErrors = null;\n        this.modulesOutOfDate = true;\n    };\n    TypeScriptServiceHost.prototype.ensureTemplateMap = function () {\n        if (!this.fileToComponent || !this.templateReferences) {\n            var fileToComponent = new Map();\n            var templateReference = [];\n            var ngModuleSummary = this.getAnalyzedModules();\n            var urlResolver = createOfflineCompileUrlResolver();\n            try {\n                for (var _a = __values(ngModuleSummary.ngModules), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var module_1 = _b.value;\n                    try {\n                        for (var _c = __values(module_1.declaredDirectives), _d = _c.next(); !_d.done; _d = _c.next()) {\n                            var directive = _d.value;\n                            var metadata = this.resolver.getNonNormalizedDirectiveMetadata(directive.reference).metadata;\n                            if (metadata.isComponent && metadata.template && metadata.template.templateUrl) {\n                                var templateName = urlResolver.resolve(this.reflector.componentModuleUrl(directive.reference), metadata.template.templateUrl);\n                                fileToComponent.set(templateName, directive.reference);\n                                templateReference.push(templateName);\n                            }\n                        }\n                    }\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                    finally {\n                        try {\n                            if (_d && !_d.done && (_e = _c.return)) _e.call(_c);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_f = _a.return)) _f.call(_a);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            this.fileToComponent = fileToComponent;\n            this.templateReferences = templateReference;\n        }\n        var e_3, _f, e_2, _e;\n    };\n    TypeScriptServiceHost.prototype.getSourceFromDeclaration = function (fileName, version$$1, source, span, type, declaration, node, sourceFile) {\n        var queryCache = undefined;\n        var t = this;\n        if (declaration) {\n            return {\n                version: version$$1,\n                source: source,\n                span: span,\n                type: type,\n                get members() {\n                    return getClassMembersFromDeclaration(t.program, t.checker, sourceFile, declaration);\n                },\n                get query() {\n                    if (!queryCache) {\n                        var pipes_1 = t.service.getPipesAt(fileName, node.getStart());\n                        queryCache = getSymbolQuery(t.program, t.checker, sourceFile, function () { return getPipesTable(sourceFile, t.program, t.checker, pipes_1); });\n                    }\n                    return queryCache;\n                }\n            };\n        }\n    };\n    TypeScriptServiceHost.prototype.getSourceFromNode = function (fileName, version$$1, node) {\n        var result = undefined;\n        switch (node.kind) {\n            case ts.SyntaxKind.NoSubstitutionTemplateLiteral:\n            case ts.SyntaxKind.StringLiteral:\n                var _a = __read(this.getTemplateClassDeclFromNode(node), 2), declaration = _a[0], decorator = _a[1];\n                if (declaration && declaration.name) {\n                    var sourceFile = this.getSourceFile(fileName);\n                    if (sourceFile) {\n                        return this.getSourceFromDeclaration(fileName, version$$1, this.stringOf(node) || '', shrink$1(spanOf$4(node)), this.reflector.getStaticSymbol(sourceFile.fileName, declaration.name.text), declaration, node, sourceFile);\n                    }\n                }\n                break;\n        }\n        return result;\n    };\n    TypeScriptServiceHost.prototype.getSourceFromType = function (fileName, version$$1, type) {\n        var result = undefined;\n        var declaration = this.getTemplateClassFromStaticSymbol(type);\n        if (declaration) {\n            var snapshot = this.host.getScriptSnapshot(fileName);\n            if (snapshot) {\n                var source = snapshot.getText(0, snapshot.getLength());\n                result = this.getSourceFromDeclaration(fileName, version$$1, source, { start: 0, end: source.length }, type, declaration, declaration, declaration.getSourceFile());\n            }\n        }\n        return result;\n    };\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"reflectorHost\", {\n        get: function () {\n            var _this = this;\n            var result = this._reflectorHost;\n            if (!result) {\n                if (!this.context) {\n                    // Make up a context by finding the first script and using that as the base dir.\n                    var scriptFileNames = this.host.getScriptFileNames();\n                    if (0 === scriptFileNames.length) {\n                        throw new Error('Internal error: no script file names found');\n                    }\n                    this.context = scriptFileNames[0];\n                }\n                // Use the file context's directory as the base directory.\n                // The host's getCurrentDirectory() is not reliable as it is always \"\" in\n                // tsserver. We don't need the exact base directory, just one that contains\n                // a source file.\n                var source = this.tsService.getProgram().getSourceFile(this.context);\n                if (!source) {\n                    throw new Error('Internal error: no context could be determined');\n                }\n                var tsConfigPath = findTsConfig$1(source.fileName);\n                var basePath = path.dirname(tsConfigPath || this.context);\n                var options = { basePath: basePath, genDir: basePath };\n                var compilerOptions = this.host.getCompilationSettings();\n                if (compilerOptions && compilerOptions.baseUrl) {\n                    options.baseUrl = compilerOptions.baseUrl;\n                }\n                if (compilerOptions && compilerOptions.paths) {\n                    options.paths = compilerOptions.paths;\n                }\n                result = this._reflectorHost =\n                    new ReflectorHost(function () { return _this.tsService.getProgram(); }, this.host, options);\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TypeScriptServiceHost.prototype.collectError = function (error, filePath) {\n        if (filePath) {\n            var errorMap = this.collectedErrors;\n            if (!errorMap || !this.collectedErrors) {\n                errorMap = this.collectedErrors = new Map();\n            }\n            var errors = errorMap.get(filePath);\n            if (!errors) {\n                errors = [];\n                this.collectedErrors.set(filePath, errors);\n            }\n            errors.push(error);\n        }\n    };\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"staticSymbolResolver\", {\n        get: function () {\n            var _this = this;\n            var result = this._staticSymbolResolver;\n            if (!result) {\n                this._summaryResolver = new AotSummaryResolver({\n                    loadSummary: function (filePath) { return null; },\n                    isSourceFile: function (sourceFilePath) { return true; },\n                    toSummaryFileName: function (sourceFilePath) { return sourceFilePath; },\n                    fromSummaryFileName: function (filePath) { return filePath; },\n                }, this._staticSymbolCache);\n                result = this._staticSymbolResolver = new StaticSymbolResolver(this.reflectorHost, this._staticSymbolCache, this._summaryResolver, function (e, filePath) { return _this.collectError(e, filePath); });\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"reflector\", {\n        get: function () {\n            var _this = this;\n            var result = this._reflector;\n            if (!result) {\n                var ssr = this.staticSymbolResolver;\n                result = this._reflector = new StaticReflector(this._summaryResolver, ssr, [], [], function (e, filePath) { return _this.collectError(e, filePath); });\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TypeScriptServiceHost.prototype.getTemplateClassFromStaticSymbol = function (type) {\n        var source = this.getSourceFile(type.filePath);\n        if (source) {\n            var declarationNode = ts.forEachChild(source, function (child) {\n                if (child.kind === ts.SyntaxKind.ClassDeclaration) {\n                    var classDeclaration = child;\n                    if (classDeclaration.name != null && classDeclaration.name.text === type.name) {\n                        return classDeclaration;\n                    }\n                }\n            });\n            return declarationNode;\n        }\n        return undefined;\n    };\n    /**\n     * Given a template string node, see if it is an Angular template string, and if so return the\n     * containing class.\n     */\n    TypeScriptServiceHost.prototype.getTemplateClassDeclFromNode = function (currentToken) {\n        // Verify we are in a 'template' property assignment, in an object literal, which is an call\n        // arg, in a decorator\n        var parentNode = currentToken.parent; // PropertyAssignment\n        if (!parentNode) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        if (parentNode.kind !== ts.SyntaxKind.PropertyAssignment) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        else {\n            // TODO: Is this different for a literal, i.e. a quoted property name like \"template\"?\n            if (parentNode.name.text !== 'template') {\n                return TypeScriptServiceHost.missingTemplate;\n            }\n        }\n        parentNode = parentNode.parent; // ObjectLiteralExpression\n        if (!parentNode || parentNode.kind !== ts.SyntaxKind.ObjectLiteralExpression) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        parentNode = parentNode.parent; // CallExpression\n        if (!parentNode || parentNode.kind !== ts.SyntaxKind.CallExpression) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        var callTarget = parentNode.expression;\n        var decorator = parentNode.parent; // Decorator\n        if (!decorator || decorator.kind !== ts.SyntaxKind.Decorator) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        var declaration = decorator.parent; // ClassDeclaration\n        if (!declaration || declaration.kind !== ts.SyntaxKind.ClassDeclaration) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        return [declaration, callTarget];\n    };\n    TypeScriptServiceHost.prototype.getCollectedErrors = function (defaultSpan, sourceFile) {\n        var errors = (this.collectedErrors && this.collectedErrors.get(sourceFile.fileName));\n        return (errors && errors.map(function (e) {\n            var line = e.line || (e.position && e.position.line);\n            var column = e.column || (e.position && e.position.column);\n            var span = spanAt$1(sourceFile, line, column) || defaultSpan;\n            if (isFormattedError(e)) {\n                return errorToDiagnosticWithChain(e, span);\n            }\n            return { message: e.message, span: span };\n        })) ||\n            [];\n    };\n    TypeScriptServiceHost.prototype.getDeclarationFromNode = function (sourceFile, node) {\n        if (node.kind == ts.SyntaxKind.ClassDeclaration && node.decorators &&\n            node.name) {\n            try {\n                for (var _a = __values(node.decorators), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var decorator = _b.value;\n                    if (decorator.expression && decorator.expression.kind == ts.SyntaxKind.CallExpression) {\n                        var classDeclaration = node;\n                        if (classDeclaration.name) {\n                            var call = decorator.expression;\n                            var target = call.expression;\n                            var type = this.checker.getTypeAtLocation(target);\n                            if (type) {\n                                var staticSymbol = this.reflector.getStaticSymbol(sourceFile.fileName, classDeclaration.name.text);\n                                try {\n                                    if (this.resolver.isDirective(staticSymbol)) {\n                                        var metadata = this.resolver.getNonNormalizedDirectiveMetadata(staticSymbol).metadata;\n                                        var declarationSpan = spanOf$4(target);\n                                        return {\n                                            type: staticSymbol,\n                                            declarationSpan: declarationSpan,\n                                            metadata: metadata,\n                                            errors: this.getCollectedErrors(declarationSpan, sourceFile)\n                                        };\n                                    }\n                                }\n                                catch (e) {\n                                    if (e.message) {\n                                        this.collectError(e, sourceFile.fileName);\n                                        var declarationSpan = spanOf$4(target);\n                                        return {\n                                            type: staticSymbol,\n                                            declarationSpan: declarationSpan,\n                                            errors: this.getCollectedErrors(declarationSpan, sourceFile)\n                                        };\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            catch (e_4_1) { e_4 = { error: e_4_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_4) throw e_4.error; }\n            }\n        }\n        var e_4, _c;\n    };\n    TypeScriptServiceHost.prototype.stringOf = function (node) {\n        switch (node.kind) {\n            case ts.SyntaxKind.NoSubstitutionTemplateLiteral:\n                return node.text;\n            case ts.SyntaxKind.StringLiteral:\n                return node.text;\n        }\n    };\n    TypeScriptServiceHost.prototype.findNode = function (sourceFile, position) {\n        function find(node) {\n            if (position >= node.getStart() && position < node.getEnd()) {\n                return ts.forEachChild(node, find) || node;\n            }\n        }\n        return find(sourceFile);\n    };\n    TypeScriptServiceHost.missingTemplate = [undefined, undefined];\n    return TypeScriptServiceHost;\n}());\nfunction findTsConfig$1(fileName) {\n    var dir = path.dirname(fileName);\n    while (fs.existsSync(dir)) {\n        var candidate = path.join(dir, 'tsconfig.json');\n        if (fs.existsSync(candidate))\n            return candidate;\n        var parentDir = path.dirname(dir);\n        if (parentDir === dir)\n            break;\n        dir = parentDir;\n    }\n}\nfunction spanOf$4(node) {\n    return { start: node.getStart(), end: node.getEnd() };\n}\nfunction shrink$1(span, offset) {\n    if (offset == null)\n        offset = 1;\n    return { start: span.start + offset, end: span.end - offset };\n}\nfunction spanAt$1(sourceFile, line, column) {\n    if (line != null && column != null) {\n        var position_1 = ts.getPositionOfLineAndCharacter(sourceFile, line, column);\n        var findChild = function findChild(node) {\n            if (node.kind > ts.SyntaxKind.LastToken && node.pos <= position_1 && node.end > position_1) {\n                var betterNode = ts.forEachChild(node, findChild);\n                return betterNode || node;\n            }\n        };\n        var node = ts.forEachChild(sourceFile, findChild);\n        if (node) {\n            return { start: node.getStart(), end: node.getEnd() };\n        }\n    }\n}\nfunction convertChain(chain) {\n    return { message: chain.message, next: chain.next ? convertChain(chain.next) : undefined };\n}\nfunction errorToDiagnosticWithChain(error, span) {\n    return { message: error.chain ? convertChain(error.chain) : error.message, span: span };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar projectHostMap = new WeakMap();\nfunction getExternalFiles(project) {\n    var host = projectHostMap.get(project);\n    if (host) {\n        return host.getTemplateReferences();\n    }\n}\nfunction create(info /* ts.server.PluginCreateInfo */) {\n    // Create the proxy\n    var proxy = Object.create(null);\n    var oldLS = info.languageService;\n    function tryCall(fileName, callback) {\n        if (fileName && !oldLS.getProgram().getSourceFile(fileName)) {\n            return undefined;\n        }\n        try {\n            return callback();\n        }\n        catch (e) {\n            return undefined;\n        }\n    }\n    function tryFilenameCall(m) {\n        return function (fileName) { return tryCall(fileName, function () { return (m.call(ls, fileName)); }); };\n    }\n    function tryFilenameOneCall(m) {\n        return function (fileName, p) { return tryCall(fileName, function () { return (m.call(ls, fileName, p)); }); };\n    }\n    function tryFilenameTwoCall(m) {\n        return function (fileName, p1, p2) { return tryCall(fileName, function () { return (m.call(ls, fileName, p1, p2)); }); };\n    }\n    function tryFilenameThreeCall(m) {\n        return function (fileName, p1, p2, p3) { return tryCall(fileName, function () { return (m.call(ls, fileName, p1, p2, p3)); }); };\n    }\n    function tryFilenameFourCall(m) {\n        return function (fileName, p1, p2, p3, p4) {\n            return tryCall(fileName, function () { return (m.call(ls, fileName, p1, p2, p3, p4)); });\n        };\n    }\n    function typescriptOnly(ls) {\n        return {\n            cleanupSemanticCache: function () { return ls.cleanupSemanticCache(); },\n            getSyntacticDiagnostics: tryFilenameCall(ls.getSyntacticDiagnostics),\n            getSemanticDiagnostics: tryFilenameCall(ls.getSemanticDiagnostics),\n            getCompilerOptionsDiagnostics: function () { return ls.getCompilerOptionsDiagnostics(); },\n            getSyntacticClassifications: tryFilenameOneCall(ls.getSemanticClassifications),\n            getSemanticClassifications: tryFilenameOneCall(ls.getSemanticClassifications),\n            getEncodedSyntacticClassifications: tryFilenameOneCall(ls.getEncodedSyntacticClassifications),\n            getEncodedSemanticClassifications: tryFilenameOneCall(ls.getEncodedSemanticClassifications),\n            getCompletionsAtPosition: tryFilenameTwoCall(ls.getCompletionsAtPosition),\n            getCompletionEntryDetails: tryFilenameFourCall(ls.getCompletionEntryDetails),\n            getCompletionEntrySymbol: tryFilenameThreeCall(ls.getCompletionEntrySymbol),\n            getQuickInfoAtPosition: tryFilenameOneCall(ls.getQuickInfoAtPosition),\n            getNameOrDottedNameSpan: tryFilenameTwoCall(ls.getNameOrDottedNameSpan),\n            getBreakpointStatementAtPosition: tryFilenameOneCall(ls.getBreakpointStatementAtPosition),\n            getSignatureHelpItems: tryFilenameOneCall(ls.getSignatureHelpItems),\n            getRenameInfo: tryFilenameOneCall(ls.getRenameInfo),\n            findRenameLocations: tryFilenameThreeCall(ls.findRenameLocations),\n            getDefinitionAtPosition: tryFilenameOneCall(ls.getDefinitionAtPosition),\n            getTypeDefinitionAtPosition: tryFilenameOneCall(ls.getTypeDefinitionAtPosition),\n            getImplementationAtPosition: tryFilenameOneCall(ls.getImplementationAtPosition),\n            getReferencesAtPosition: tryFilenameOneCall(ls.getReferencesAtPosition),\n            findReferences: tryFilenameOneCall(ls.findReferences),\n            getDocumentHighlights: tryFilenameTwoCall(ls.getDocumentHighlights),\n            /** @deprecated */\n            getOccurrencesAtPosition: tryFilenameOneCall(ls.getOccurrencesAtPosition),\n            getNavigateToItems: function (searchValue, maxResultCount, fileName, excludeDtsFiles) { return tryCall(fileName, function () { return ls.getNavigateToItems(searchValue, maxResultCount, fileName, excludeDtsFiles); }); },\n            getNavigationBarItems: tryFilenameCall(ls.getNavigationBarItems),\n            getNavigationTree: tryFilenameCall(ls.getNavigationTree),\n            getOutliningSpans: tryFilenameCall(ls.getOutliningSpans),\n            getTodoComments: tryFilenameOneCall(ls.getTodoComments),\n            getBraceMatchingAtPosition: tryFilenameOneCall(ls.getBraceMatchingAtPosition),\n            getIndentationAtPosition: tryFilenameTwoCall(ls.getIndentationAtPosition),\n            getFormattingEditsForRange: tryFilenameThreeCall(ls.getFormattingEditsForRange),\n            getFormattingEditsForDocument: tryFilenameOneCall(ls.getFormattingEditsForDocument),\n            getFormattingEditsAfterKeystroke: tryFilenameThreeCall(ls.getFormattingEditsAfterKeystroke),\n            getDocCommentTemplateAtPosition: tryFilenameOneCall(ls.getDocCommentTemplateAtPosition),\n            isValidBraceCompletionAtPosition: tryFilenameTwoCall(ls.isValidBraceCompletionAtPosition),\n            getSpanOfEnclosingComment: tryFilenameTwoCall(ls.getSpanOfEnclosingComment),\n            getCodeFixesAtPosition: tryFilenameFourCall(ls.getCodeFixesAtPosition),\n            applyCodeActionCommand: (function (action) { return tryCall(undefined, function () { return ls.applyCodeActionCommand(action); }); }),\n            getEmitOutput: tryFilenameCall(ls.getEmitOutput),\n            getProgram: function () { return ls.getProgram(); },\n            dispose: function () { return ls.dispose(); },\n            getApplicableRefactors: tryFilenameOneCall(ls.getApplicableRefactors),\n            getEditsForRefactor: tryFilenameFourCall(ls.getEditsForRefactor),\n            getDefinitionAndBoundSpan: tryFilenameOneCall(ls.getDefinitionAndBoundSpan),\n            getCombinedCodeFix: function (scope, fixId, formatOptions) {\n                return tryCall(undefined, function () { return ls.getCombinedCodeFix(scope, fixId, formatOptions); });\n            }\n        };\n    }\n    oldLS = typescriptOnly(oldLS);\n    var _loop_1 = function (k) {\n        proxy[k] = function () { return oldLS[k].apply(oldLS, arguments); };\n    };\n    for (var k in oldLS) {\n        _loop_1(k);\n    }\n    function completionToEntry(c) {\n        return {\n            // TODO: remove any and fix type error.\n            kind: c.kind,\n            name: c.name,\n            sortText: c.sort,\n            kindModifiers: ''\n        };\n    }\n    function diagnosticChainToDiagnosticChain(chain) {\n        return {\n            messageText: chain.message,\n            category: ts.DiagnosticCategory.Error,\n            code: 0,\n            next: chain.next ? diagnosticChainToDiagnosticChain(chain.next) : undefined\n        };\n    }\n    function diagnosticMessageToDiagnosticMessageText(message) {\n        if (typeof message === 'string') {\n            return message;\n        }\n        return diagnosticChainToDiagnosticChain(message);\n    }\n    function diagnosticToDiagnostic(d, file) {\n        var result = {\n            file: file,\n            start: d.span.start,\n            length: d.span.end - d.span.start,\n            messageText: diagnosticMessageToDiagnosticMessageText(d.message),\n            category: ts.DiagnosticCategory.Error,\n            code: 0,\n            source: 'ng'\n        };\n        return result;\n    }\n    function tryOperation(attempting, callback) {\n        try {\n            return callback();\n        }\n        catch (e) {\n            info.project.projectService.logger.info(\"Failed to \" + attempting + \": \" + e.toString());\n            info.project.projectService.logger.info(\"Stack trace: \" + e.stack);\n            return null;\n        }\n    }\n    var serviceHost = new TypeScriptServiceHost(info.languageServiceHost, info.languageService);\n    var ls = createLanguageService(serviceHost);\n    serviceHost.setSite(ls);\n    projectHostMap.set(info.project, serviceHost);\n    proxy.getCompletionsAtPosition = function (fileName, position, options) {\n        var base = oldLS.getCompletionsAtPosition(fileName, position, options) || {\n            isGlobalCompletion: false,\n            isMemberCompletion: false,\n            isNewIdentifierLocation: false,\n            entries: []\n        };\n        tryOperation('get completions', function () {\n            var results = ls.getCompletionsAt(fileName, position);\n            if (results && results.length) {\n                if (base === undefined) {\n                    base = {\n                        isGlobalCompletion: false,\n                        isMemberCompletion: false,\n                        isNewIdentifierLocation: false,\n                        entries: []\n                    };\n                }\n                try {\n                    for (var results_1 = __values(results), results_1_1 = results_1.next(); !results_1_1.done; results_1_1 = results_1.next()) {\n                        var entry = results_1_1.value;\n                        base.entries.push(completionToEntry(entry));\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (results_1_1 && !results_1_1.done && (_a = results_1.return)) _a.call(results_1);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n            var e_1, _a;\n        });\n        return base;\n    };\n    proxy.getQuickInfoAtPosition = function (fileName, position) {\n        var base = oldLS.getQuickInfoAtPosition(fileName, position);\n        // TODO(vicb): the tags property has been removed in TS 2.2\n        tryOperation('get quick info', function () {\n            var ours = ls.getHoverAt(fileName, position);\n            if (ours) {\n                var displayParts = [];\n                try {\n                    for (var _a = __values(ours.text), _b = _a.next(); !_b.done; _b = _a.next()) {\n                        var part = _b.value;\n                        displayParts.push({ kind: part.language || 'angular', text: part.text });\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n                var tags = base && base.tags;\n                base = {\n                    displayParts: displayParts,\n                    documentation: [],\n                    kind: 'angular',\n                    kindModifiers: 'what does this do?',\n                    textSpan: { start: ours.span.start, length: ours.span.end - ours.span.start },\n                };\n                if (tags) {\n                    base.tags = tags;\n                }\n            }\n            var e_2, _c;\n        });\n        return base;\n    };\n    proxy.getSemanticDiagnostics = function (fileName) {\n        var result = oldLS.getSemanticDiagnostics(fileName);\n        var base = result || [];\n        tryOperation('get diagnostics', function () {\n            info.project.projectService.logger.info(\"Computing Angular semantic diagnostics...\");\n            var ours = ls.getDiagnostics(fileName);\n            if (ours && ours.length) {\n                var file_1 = oldLS.getProgram().getSourceFile(fileName);\n                if (file_1) {\n                    base.push.apply(base, ours.map(function (d) { return diagnosticToDiagnostic(d, file_1); }));\n                }\n            }\n        });\n        return base;\n    };\n    proxy.getDefinitionAtPosition = function (fileName, position) {\n        var base = oldLS.getDefinitionAtPosition(fileName, position);\n        if (base && base.length) {\n            return base;\n        }\n        return tryOperation('get definition', function () {\n            var ours = ls.getDefinitionAt(fileName, position);\n            if (ours && ours.length) {\n                base = base || [];\n                try {\n                    for (var ours_1 = __values(ours), ours_1_1 = ours_1.next(); !ours_1_1.done; ours_1_1 = ours_1.next()) {\n                        var loc = ours_1_1.value;\n                        base.push({\n                            fileName: loc.fileName,\n                            textSpan: { start: loc.span.start, length: loc.span.end - loc.span.start },\n                            name: '',\n                            // TODO: remove any and fix type error.\n                            kind: 'definition',\n                            containerName: loc.fileName,\n                            containerKind: 'file',\n                        });\n                    }\n                }\n                catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                finally {\n                    try {\n                        if (ours_1_1 && !ours_1_1.done && (_a = ours_1.return)) _a.call(ours_1);\n                    }\n                    finally { if (e_3) throw e_3.error; }\n                }\n            }\n            return base;\n            var e_3, _a;\n        }) || [];\n    };\n    return proxy;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all public APIs of the common package.\n */\n/**\n *\n */\nvar VERSION$3 = new Version$1('6.0.0');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all public APIs of the language service package.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nexports.createLanguageService = createLanguageService;\nexports.TypeScriptServiceHost = TypeScriptServiceHost;\nexports.createLanguageServiceFromTypescript = createLanguageServiceFromTypescript;\nexports.VERSION = VERSION$3;\nexports.getExternalFiles = getExternalFiles;\nexports.create = create;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n});\n//# sourceMappingURL=language-service.umd.js.map\n"]}